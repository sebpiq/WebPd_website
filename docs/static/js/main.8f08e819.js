/*! For license information please see main.8f08e819.js.LICENSE.txt */
(()=>{var e={599:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>a});var r={};try{!function(e,n){if(new e("q=%2B").get("q")!==n||new e({q:n}).get("q")!==n||new e([["q",n]]).get("q")!==n||"q=%0A"!==new e("q=\n").toString()||"q=+%26"!==new e({q:" &"}).toString()||"q=%25zx"!==new e({q:"%zx"}).toString())throw e;r.URLSearchParams=e}(URLSearchParams,"+")}catch(URLSearchParams){!function(e,n,t){var a=e.create,i=e.defineProperty,o=/[!'\(\)~]|%20|%00/g,s=/%(?![0-9a-fA-F]{2})/g,l=/\+/g,c={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},u={append:function(e,n){h(this._ungap,e,n)},delete:function(e){delete this._ungap[e]},get:function(e){return this.has(e)?this._ungap[e][0]:null},getAll:function(e){return this.has(e)?this._ungap[e].slice(0):[]},has:function(e){return e in this._ungap},set:function(e,t){this._ungap[e]=[n(t)]},forEach:function(e,t){var r=this;for(var a in r._ungap)r._ungap[a].forEach(i,a);function i(i){e.call(t,i,n(a),r)}},toJSON:function(){return{}},toString:function(){var e=[];for(var n in this._ungap)for(var t=g(n),r=0,a=this._ungap[n];r<a.length;r++)e.push(t+"="+g(a[r]));return e.join("&")}};for(var d in u)i(p.prototype,d,{configurable:!0,writable:!0,value:u[d]});function p(e){var n=a(null);switch(i(this,"_ungap",{value:n}),!0){case!e:break;case"string"===typeof e:"?"===e.charAt(0)&&(e=e.slice(1));for(var r=e.split("&"),o=0,s=r.length;o<s;o++){var l=(c=r[o]).indexOf("=");-1<l?h(n,m(c.slice(0,l)),m(c.slice(l+1))):c.length&&h(n,m(c),"")}break;case t(e):for(o=0,s=e.length;o<s;o++){var c;h(n,(c=e[o])[0],c[1])}break;case"forEach"in e:e.forEach(f,n);break;default:for(var u in e)h(n,u,e[u])}}function f(e,n){h(this,n,e)}function h(e,n,r){var a=t(r)?r.join(","):r;n in e?e[n].push(a):e[n]=[a]}function m(e){return decodeURIComponent(e.replace(s,"%25").replace(l," "))}function g(e){return encodeURIComponent(e).replace(o,y)}function y(e){return c[e]}r.URLSearchParams=p}(Object,String,Array.isArray)}!function(e){var n=!1;try{n=!!Symbol.iterator}catch(r){}function t(e,t){var r=[];return e.forEach(t,r),n?r[Symbol.iterator]():{next:function(){var e=r.shift();return{done:void 0===e,value:e}}}}"forEach"in e||(e.forEach=function(e,n){var t=this,r=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach((function(a){a.length&&!(a in r)&&(r[a]=t.getAll(a)).forEach((function(r){e.call(n,r,a,t)}))}))}),"keys"in e||(e.keys=function(){return t(this,(function(e,n){this.push(n)}))}),"values"in e||(e.values=function(){return t(this,(function(e,n){this.push(e)}))}),"entries"in e||(e.entries=function(){return t(this,(function(e,n){this.push([n,e])}))}),n&&!(Symbol.iterator in e)&&(e[Symbol.iterator]=e.entries),"sort"in e||(e.sort=function(){for(var e,n,t,r=this.entries(),a=r.next(),i=a.done,o=[],s=Object.create(null);!i;)n=(t=a.value)[0],o.push(n),n in s||(s[n]=[]),s[n].push(t[1]),i=(a=r.next()).done;for(o.sort(),e=0;e<o.length;e++)this.delete(o[e]);for(e=0;e<o.length;e++)n=o[e],this.append(n,s[n].shift())}),function(n){var t=n.defineProperty,r=n.getOwnPropertyDescriptor,a=function(n){var t=n.append;n.append=e.append,URLSearchParams.call(n,n._usp.search.slice(1)),n.append=t},i=function(e,n){if(!(e instanceof n))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+n.name)},o=function(o){var s,l,c=o.prototype,u=r(c,"searchParams"),d=r(c,"href"),p=r(c,"search");!u&&p&&p.set&&(l=function(n){function r(t,r){e.append.call(this,t,r),t=this.toString(),n.set.call(this._usp,t?"?"+t:"")}function a(t){e.delete.call(this,t),t=this.toString(),n.set.call(this._usp,t?"?"+t:"")}function i(t,r){e.set.call(this,t,r),t=this.toString(),n.set.call(this._usp,t?"?"+t:"")}return function(e,n){return e.append=r,e.delete=a,e.set=i,t(e,"_usp",{configurable:!0,writable:!0,value:n})}}(p),s=function(e,n){return t(e,"_searchParams",{configurable:!0,writable:!0,value:l(n,e)}),n},n.defineProperties(c,{href:{get:function(){return d.get.call(this)},set:function(e){var n=this._searchParams;d.set.call(this,e),n&&a(n)}},search:{get:function(){return p.get.call(this)},set:function(e){var n=this._searchParams;p.set.call(this,e),n&&a(n)}},searchParams:{get:function(){return i(this,o),this._searchParams||s(this,new URLSearchParams(this.search.slice(1)))},set:function(e){i(this,o),s(this,e)}}}))};try{o(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&o(URL)}catch(s){}}(Object)}(r.URLSearchParams.prototype);const a=r.URLSearchParams},628:(e,n)=>{"use strict";n.A=function(e,n){if(e&&n){var t=Array.isArray(n)?n:n.split(",");if(0===t.length)return!0;var r=e.name||"",a=(e.type||"").toLowerCase(),i=a.replace(/\/.*$/,"");return t.some((function(e){var n=e.trim().toLowerCase();return"."===n.charAt(0)?r.toLowerCase().endsWith(n):n.endsWith("/*")?i===n.replace(/\/.*$/,""):a===n}))}return!0}},531:(e,n,t)=>{"use strict";t.r(n),t.d(n,{createBrowserHistory:()=>A,createHashHistory:()=>M,createLocation:()=>v,createMemoryHistory:()=>F,createPath:()=>y,locationsAreEqual:()=>b,parsePath:()=>g});var r=t(168);function a(e){return"/"===e.charAt(0)}function i(e,n){for(var t=n,r=t+1,a=e.length;r<a;t+=1,r+=1)e[t]=e[r];e.pop()}const o=function(e,n){void 0===n&&(n="");var t,r=e&&e.split("/")||[],o=n&&n.split("/")||[],s=e&&a(e),l=n&&a(n),c=s||l;if(e&&a(e)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var u=o[o.length-1];t="."===u||".."===u||""===u}else t=!1;for(var d=0,p=o.length;p>=0;p--){var f=o[p];"."===f?i(o,p):".."===f?(i(o,p),d++):d&&(i(o,p),d--)}if(!c)for(;d--;d)o.unshift("..");!c||""===o[0]||o[0]&&a(o[0])||o.unshift("");var h=o.join("/");return t&&"/"!==h.substr(-1)&&(h+="/"),h};function s(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}const l=function e(n,t){if(n===t)return!0;if(null==n||null==t)return!1;if(Array.isArray(n))return Array.isArray(t)&&n.length===t.length&&n.every((function(n,r){return e(n,t[r])}));if("object"===typeof n||"object"===typeof t){var r=s(n),a=s(t);return r!==n||a!==t?e(r,a):Object.keys(Object.assign({},n,t)).every((function(r){return e(n[r],t[r])}))}return!1};var c=!0,u="Invariant failed";function d(e,n){if(!e){if(c)throw new Error(u);var t="function"===typeof n?n():n,r=t?"".concat(u,": ").concat(t):u;throw new Error(r)}}function p(e){return"/"===e.charAt(0)?e:"/"+e}function f(e){return"/"===e.charAt(0)?e.substr(1):e}function h(e,n){return function(e,n){return 0===e.toLowerCase().indexOf(n.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(n.length))}(e,n)?e.substr(n.length):e}function m(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function g(e){var n=e||"/",t="",r="",a=n.indexOf("#");-1!==a&&(r=n.substr(a),n=n.substr(0,a));var i=n.indexOf("?");return-1!==i&&(t=n.substr(i),n=n.substr(0,i)),{pathname:n,search:"?"===t?"":t,hash:"#"===r?"":r}}function y(e){var n=e.pathname,t=e.search,r=e.hash,a=n||"/";return t&&"?"!==t&&(a+="?"===t.charAt(0)?t:"?"+t),r&&"#"!==r&&(a+="#"===r.charAt(0)?r:"#"+r),a}function v(e,n,t,a){var i;"string"===typeof e?(i=g(e)).state=n:(void 0===(i=(0,r.A)({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==n&&void 0===i.state&&(i.state=n));try{i.pathname=decodeURI(i.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return t&&(i.key=t),a?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=o(i.pathname,a.pathname)):i.pathname=a.pathname:i.pathname||(i.pathname="/"),i}function b(e,n){return e.pathname===n.pathname&&e.search===n.search&&e.hash===n.hash&&e.key===n.key&&l(e.state,n.state)}function w(){var e=null;var n=[];return{setPrompt:function(n){return e=n,function(){e===n&&(e=null)}},confirmTransitionTo:function(n,t,r,a){if(null!=e){var i="function"===typeof e?e(n,t):e;"string"===typeof i?"function"===typeof r?r(i,a):a(!0):a(!1!==i)}else a(!0)},appendListener:function(e){var t=!0;function r(){t&&e.apply(void 0,arguments)}return n.push(r),function(){t=!1,n=n.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.forEach((function(e){return e.apply(void 0,t)}))}}}var S=!("undefined"===typeof window||!window.document||!window.document.createElement);function x(e,n){n(window.confirm(e))}var k="popstate",I="hashchange";function _(){try{return window.history.state||{}}catch(e){return{}}}function A(e){void 0===e&&(e={}),S||d(!1);var n=window.history,t=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),a=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,o=i.forceRefresh,s=void 0!==o&&o,l=i.getUserConfirmation,c=void 0===l?x:l,u=i.keyLength,f=void 0===u?6:u,g=e.basename?m(p(e.basename)):"";function b(e){var n=e||{},t=n.key,r=n.state,a=window.location,i=a.pathname+a.search+a.hash;return g&&(i=h(i,g)),v(i,r,t)}function A(){return Math.random().toString(36).substr(2,f)}var T=w();function E(e){(0,r.A)(B,e),B.length=n.length,T.notifyListeners(B.location,B.action)}function O(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||M(b(e.state))}function C(){M(b(_()))}var N=!1;function M(e){if(N)N=!1,E();else{T.confirmTransitionTo(e,"POP",c,(function(n){n?E({action:"POP",location:e}):function(e){var n=B.location,t=F.indexOf(n.key);-1===t&&(t=0);var r=F.indexOf(e.key);-1===r&&(r=0);var a=t-r;a&&(N=!0,L(a))}(e)}))}}var P=b(_()),F=[P.key];function R(e){return g+y(e)}function L(e){n.go(e)}var D=0;function j(e){1===(D+=e)&&1===e?(window.addEventListener(k,O),a&&window.addEventListener(I,C)):0===D&&(window.removeEventListener(k,O),a&&window.removeEventListener(I,C))}var z=!1;var B={length:n.length,action:"POP",location:P,createHref:R,push:function(e,r){var a="PUSH",i=v(e,r,A(),B.location);T.confirmTransitionTo(i,a,c,(function(e){if(e){var r=R(i),o=i.key,l=i.state;if(t)if(n.pushState({key:o,state:l},null,r),s)window.location.href=r;else{var c=F.indexOf(B.location.key),u=F.slice(0,c+1);u.push(i.key),F=u,E({action:a,location:i})}else window.location.href=r}}))},replace:function(e,r){var a="REPLACE",i=v(e,r,A(),B.location);T.confirmTransitionTo(i,a,c,(function(e){if(e){var r=R(i),o=i.key,l=i.state;if(t)if(n.replaceState({key:o,state:l},null,r),s)window.location.replace(r);else{var c=F.indexOf(B.location.key);-1!==c&&(F[c]=i.key),E({action:a,location:i})}else window.location.replace(r)}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var n=T.setPrompt(e);return z||(j(1),z=!0),function(){return z&&(z=!1,j(-1)),n()}},listen:function(e){var n=T.appendListener(e);return j(1),function(){j(-1),n()}}};return B}var T="hashchange",E={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+f(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:f,decodePath:p},slash:{encodePath:p,decodePath:p}};function O(e){var n=e.indexOf("#");return-1===n?e:e.slice(0,n)}function C(){var e=window.location.href,n=e.indexOf("#");return-1===n?"":e.substring(n+1)}function N(e){window.location.replace(O(window.location.href)+"#"+e)}function M(e){void 0===e&&(e={}),S||d(!1);var n=window.history,t=(window.navigator.userAgent.indexOf("Firefox"),e),a=t.getUserConfirmation,i=void 0===a?x:a,o=t.hashType,s=void 0===o?"slash":o,l=e.basename?m(p(e.basename)):"",c=E[s],u=c.encodePath,f=c.decodePath;function g(){var e=f(C());return l&&(e=h(e,l)),v(e)}var b=w();function k(e){(0,r.A)(B,e),B.length=n.length,b.notifyListeners(B.location,B.action)}var I=!1,_=null;function A(){var e,n,t=C(),r=u(t);if(t!==r)N(r);else{var a=g(),o=B.location;if(!I&&(n=a,(e=o).pathname===n.pathname&&e.search===n.search&&e.hash===n.hash))return;if(_===y(a))return;_=null,function(e){if(I)I=!1,k();else{var n="POP";b.confirmTransitionTo(e,n,i,(function(t){t?k({action:n,location:e}):function(e){var n=B.location,t=R.lastIndexOf(y(n));-1===t&&(t=0);var r=R.lastIndexOf(y(e));-1===r&&(r=0);var a=t-r;a&&(I=!0,L(a))}(e)}))}}(a)}}var M=C(),P=u(M);M!==P&&N(P);var F=g(),R=[y(F)];function L(e){n.go(e)}var D=0;function j(e){1===(D+=e)&&1===e?window.addEventListener(T,A):0===D&&window.removeEventListener(T,A)}var z=!1;var B={length:n.length,action:"POP",location:F,createHref:function(e){var n=document.querySelector("base"),t="";return n&&n.getAttribute("href")&&(t=O(window.location.href)),t+"#"+u(l+y(e))},push:function(e,n){var t="PUSH",r=v(e,void 0,void 0,B.location);b.confirmTransitionTo(r,t,i,(function(e){if(e){var n=y(r),a=u(l+n);if(C()!==a){_=n,function(e){window.location.hash=e}(a);var i=R.lastIndexOf(y(B.location)),o=R.slice(0,i+1);o.push(n),R=o,k({action:t,location:r})}else k()}}))},replace:function(e,n){var t="REPLACE",r=v(e,void 0,void 0,B.location);b.confirmTransitionTo(r,t,i,(function(e){if(e){var n=y(r),a=u(l+n);C()!==a&&(_=n,N(a));var i=R.indexOf(y(B.location));-1!==i&&(R[i]=n),k({action:t,location:r})}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var n=b.setPrompt(e);return z||(j(1),z=!0),function(){return z&&(z=!1,j(-1)),n()}},listen:function(e){var n=b.appendListener(e);return j(1),function(){j(-1),n()}}};return B}function P(e,n,t){return Math.min(Math.max(e,n),t)}function F(e){void 0===e&&(e={});var n=e,t=n.getUserConfirmation,a=n.initialEntries,i=void 0===a?["/"]:a,o=n.initialIndex,s=void 0===o?0:o,l=n.keyLength,c=void 0===l?6:l,u=w();function d(e){(0,r.A)(b,e),b.length=b.entries.length,u.notifyListeners(b.location,b.action)}function p(){return Math.random().toString(36).substr(2,c)}var f=P(s,0,i.length-1),h=i.map((function(e){return v(e,void 0,"string"===typeof e?p():e.key||p())})),m=y;function g(e){var n=P(b.index+e,0,b.entries.length-1),r=b.entries[n];u.confirmTransitionTo(r,"POP",t,(function(e){e?d({action:"POP",location:r,index:n}):d()}))}var b={length:h.length,action:"POP",location:h[f],index:f,entries:h,createHref:m,push:function(e,n){var r="PUSH",a=v(e,n,p(),b.location);u.confirmTransitionTo(a,r,t,(function(e){if(e){var n=b.index+1,t=b.entries.slice(0);t.length>n?t.splice(n,t.length-n,a):t.push(a),d({action:r,location:a,index:n,entries:t})}}))},replace:function(e,n){var r="REPLACE",a=v(e,n,p(),b.location);u.confirmTransitionTo(a,r,t,(function(e){e&&(b.entries[b.index]=a,d({action:r,location:a}))}))},go:g,goBack:function(){g(-1)},goForward:function(){g(1)},canGo:function(e){var n=b.index+e;return n>=0&&n<b.entries.length},block:function(e){return void 0===e&&(e=!1),u.setPrompt(e)},listen:function(e){return u.appendListener(e)}};return b}},219:(e,n,t)=>{"use strict";var r=t(763),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?o:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(n,t,r){if("string"!==typeof t){if(h){var a=f(t);a&&a!==h&&e(n,a,r)}var o=u(t);d&&(o=o.concat(d(t)));for(var s=l(n),m=l(t),g=0;g<o.length;++g){var y=o[g];if(!i[y]&&(!r||!r[y])&&(!m||!m[y])&&(!s||!s[y])){var v=p(t,y);try{c(n,y,v)}catch(b){}}}}return n}},983:(e,n)=>{"use strict";var t="function"===typeof Symbol&&Symbol.for,r=t?Symbol.for("react.element"):60103,a=t?Symbol.for("react.portal"):60106,i=t?Symbol.for("react.fragment"):60107,o=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,l=t?Symbol.for("react.provider"):60109,c=t?Symbol.for("react.context"):60110,u=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,p=t?Symbol.for("react.forward_ref"):60112,f=t?Symbol.for("react.suspense"):60113,h=t?Symbol.for("react.suspense_list"):60120,m=t?Symbol.for("react.memo"):60115,g=t?Symbol.for("react.lazy"):60116,y=t?Symbol.for("react.block"):60121,v=t?Symbol.for("react.fundamental"):60117,b=t?Symbol.for("react.responder"):60118,w=t?Symbol.for("react.scope"):60119;function S(e){if("object"===typeof e&&null!==e){var n=e.$$typeof;switch(n){case r:switch(e=e.type){case u:case d:case i:case s:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case p:case g:case m:case l:return e;default:return n}}case a:return n}}}function x(e){return S(e)===d}n.AsyncMode=u,n.ConcurrentMode=d,n.ContextConsumer=c,n.ContextProvider=l,n.Element=r,n.ForwardRef=p,n.Fragment=i,n.Lazy=g,n.Memo=m,n.Portal=a,n.Profiler=s,n.StrictMode=o,n.Suspense=f,n.isAsyncMode=function(e){return x(e)||S(e)===u},n.isConcurrentMode=x,n.isContextConsumer=function(e){return S(e)===c},n.isContextProvider=function(e){return S(e)===l},n.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},n.isForwardRef=function(e){return S(e)===p},n.isFragment=function(e){return S(e)===i},n.isLazy=function(e){return S(e)===g},n.isMemo=function(e){return S(e)===m},n.isPortal=function(e){return S(e)===a},n.isProfiler=function(e){return S(e)===s},n.isStrictMode=function(e){return S(e)===o},n.isSuspense=function(e){return S(e)===f},n.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===i||e===d||e===s||e===o||e===f||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===p||e.$$typeof===v||e.$$typeof===b||e.$$typeof===w||e.$$typeof===y)},n.typeOf=S},763:(e,n,t)=>{"use strict";e.exports=t(983)},814:e=>{"use strict";e.exports=function(e,n){return n||(n={}),e?(e=String(e.__esModule?e.default:e),n.hash&&(e+=n.hash),n.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},159:(e,n,t)=>{e.exports=function e(n,t,r){function a(o,s){if(!t[o]){if(!n[o]){if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=t[o]={exports:{}};n[o][0].call(c.exports,(function(e){return a(n[o][1][e]||e)}),c,c.exports,e,n,t,r)}return t[o].exports}for(var i=void 0,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,n,t){"use strict";var r=e("./utils"),a=e("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(e){for(var n,t,a,o,s,l,c,u=[],d=0,p=e.length,f=p,h="string"!==r.getTypeOf(e);d<e.length;)f=p-d,a=h?(n=e[d++],t=d<p?e[d++]:0,d<p?e[d++]:0):(n=e.charCodeAt(d++),t=d<p?e.charCodeAt(d++):0,d<p?e.charCodeAt(d++):0),o=n>>2,s=(3&n)<<4|t>>4,l=1<f?(15&t)<<2|a>>6:64,c=2<f?63&a:64,u.push(i.charAt(o)+i.charAt(s)+i.charAt(l)+i.charAt(c));return u.join("")},t.decode=function(e){var n,t,r,o,s,l,c=0,u=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var p,f=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===i.charAt(64)&&f--,e.charAt(e.length-2)===i.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(p=a.uint8array?new Uint8Array(0|f):new Array(0|f);c<e.length;)n=i.indexOf(e.charAt(c++))<<2|(o=i.indexOf(e.charAt(c++)))>>4,t=(15&o)<<4|(s=i.indexOf(e.charAt(c++)))>>2,r=(3&s)<<6|(l=i.indexOf(e.charAt(c++))),p[u++]=n,64!==s&&(p[u++]=t),64!==l&&(p[u++]=r);return p}},{"./support":30,"./utils":32}],2:[function(e,n,t){"use strict";var r=e("./external"),a=e("./stream/DataWorker"),i=e("./stream/Crc32Probe"),o=e("./stream/DataLengthProbe");function s(e,n,t,r,a){this.compressedSize=e,this.uncompressedSize=n,this.crc32=t,this.compression=r,this.compressedContent=a}s.prototype={getContentWorker:function(){var e=new a(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),n=this;return e.on("end",(function(){if(this.streamInfo.data_length!==n.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new a(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,n,t){return e.pipe(new i).pipe(new o("uncompressedSize")).pipe(n.compressWorker(t)).pipe(new o("compressedSize")).withStreamInfo("compression",n)},n.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,n,t){"use strict";var r=e("./stream/GenericWorker");t.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},t.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,n,t){"use strict";var r=e("./utils"),a=function(){for(var e,n=[],t=0;t<256;t++){e=t;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;n[t]=e}return n}();n.exports=function(e,n){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,n,t,r){var i=a,o=r+t;e^=-1;for(var s=r;s<o;s++)e=e>>>8^i[255&(e^n[s])];return~e}(0|n,e,e.length,0):function(e,n,t,r){var i=a,o=r+t;e^=-1;for(var s=r;s<o;s++)e=e>>>8^i[255&(e^n.charCodeAt(s))];return~e}(0|n,e,e.length,0):0}},{"./utils":32}],5:[function(e,n,t){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},{}],6:[function(e,n,t){"use strict";var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),n.exports={Promise:r}},{lie:37}],7:[function(e,n,t){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,a=e("pako"),i=e("./utils"),o=e("./stream/GenericWorker"),s=r?"uint8array":"array";function l(e,n){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=n,this.meta={}}t.magic="\b\0",i.inherits(l,o),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(i.transformTo(s,e.data),!1)},l.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(n){e.push({data:n,meta:e.meta})}},t.compressWorker=function(e){return new l("Deflate",e)},t.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,n,t){"use strict";function r(e,n){var t,r="";for(t=0;t<n;t++)r+=String.fromCharCode(255&e),e>>>=8;return r}function a(e,n,t,a,o,u){var d,p,f=e.file,h=e.compression,m=u!==s.utf8encode,g=i.transformTo("string",u(f.name)),y=i.transformTo("string",s.utf8encode(f.name)),v=f.comment,b=i.transformTo("string",u(v)),w=i.transformTo("string",s.utf8encode(v)),S=y.length!==f.name.length,x=w.length!==v.length,k="",I="",_="",A=f.dir,T=f.date,E={crc32:0,compressedSize:0,uncompressedSize:0};n&&!t||(E.crc32=e.crc32,E.compressedSize=e.compressedSize,E.uncompressedSize=e.uncompressedSize);var O=0;n&&(O|=8),m||!S&&!x||(O|=2048);var C=0,N=0;A&&(C|=16),"UNIX"===o?(N=798,C|=function(e,n){var t=e;return e||(t=n?16893:33204),(65535&t)<<16}(f.unixPermissions,A)):(N=20,C|=function(e){return 63&(e||0)}(f.dosPermissions)),d=T.getUTCHours(),d<<=6,d|=T.getUTCMinutes(),d<<=5,d|=T.getUTCSeconds()/2,p=T.getUTCFullYear()-1980,p<<=4,p|=T.getUTCMonth()+1,p<<=5,p|=T.getUTCDate(),S&&(I=r(1,1)+r(l(g),4)+y,k+="up"+r(I.length,2)+I),x&&(_=r(1,1)+r(l(b),4)+w,k+="uc"+r(_.length,2)+_);var M="";return M+="\n\0",M+=r(O,2),M+=h.magic,M+=r(d,2),M+=r(p,2),M+=r(E.crc32,4),M+=r(E.compressedSize,4),M+=r(E.uncompressedSize,4),M+=r(g.length,2),M+=r(k.length,2),{fileRecord:c.LOCAL_FILE_HEADER+M+g+k,dirRecord:c.CENTRAL_FILE_HEADER+r(N,2)+M+r(b.length,2)+"\0\0\0\0"+r(C,4)+r(a,4)+g+k+b}}var i=e("../utils"),o=e("../stream/GenericWorker"),s=e("../utf8"),l=e("../crc32"),c=e("../signature");function u(e,n,t,r){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=n,this.zipPlatform=t,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(u,o),u.prototype.push=function(e){var n=e.meta.percent||0,t=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:t?(n+100*(t-r-1))/t:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var n=this.streamFiles&&!e.file.dir;if(n){var t=a(e,n,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:t.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var n=this.streamFiles&&!e.file.dir,t=a(e,n,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(t.dirRecord),n)this.push({data:function(e){return c.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:t.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,n=0;n<this.dirRecords.length;n++)this.push({data:this.dirRecords[n],meta:{percent:100}});var t=this.bytesWritten-e,a=function(e,n,t,a,o){var s=i.transformTo("string",o(a));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(n,4)+r(t,4)+r(s.length,2)+s}(this.dirRecords.length,t,e,this.zipComment,this.encodeFileName);this.push({data:a,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var n=this;return e.on("data",(function(e){n.processChunk(e)})),e.on("end",(function(){n.closedSource(n.previous.streamInfo),n._sources.length?n.prepareNextSource():n.end()})),e.on("error",(function(e){n.error(e)})),this},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var n=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var t=0;t<n.length;t++)try{n[t].error(e)}catch(e){}return!0},u.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,n=0;n<e.length;n++)e[n].lock()},n.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,n,t){"use strict";var r=e("../compressions"),a=e("./ZipFileWorker");t.generateWorker=function(e,n,t){var i=new a(n.streamFiles,t,n.platform,n.encodeFileName),o=0;try{e.forEach((function(e,t){o++;var a=function(e,n){var t=e||n,a=r[t];if(!a)throw new Error(t+" is not a valid compression method !");return a}(t.options.compression,n.compression),s=t.options.compressionOptions||n.compressionOptions||{},l=t.dir,c=t.date;t._compressWorker(a,s).withStreamInfo("file",{name:e,dir:l,date:c,comment:t.comment||"",unixPermissions:t.unixPermissions,dosPermissions:t.dosPermissions}).pipe(i)})),i.entriesCount=o}catch(e){i.error(e)}return i}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,n,t){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var n in this)"function"!=typeof this[n]&&(e[n]=this[n]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,n){return(new r).loadAsync(e,n)},r.external=e("./external"),n.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,n,t){"use strict";var r=e("./utils"),a=e("./external"),i=e("./utf8"),o=e("./zipEntries"),s=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new a.Promise((function(n,t){var r=e.decompressed.getContentWorker().pipe(new s);r.on("error",(function(e){t(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?t(new Error("Corrupted zip : CRC32 mismatch")):n()})).resume()}))}n.exports=function(e,n){var t=this;return n=r.extend(n||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),l.isNode&&l.isStream(e)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,n.optimizedBinaryString,n.base64).then((function(e){var t=new o(n);return t.load(e),t})).then((function(e){var t=[a.Promise.resolve(e)],r=e.files;if(n.checkCRC32)for(var i=0;i<r.length;i++)t.push(c(r[i]));return a.Promise.all(t)})).then((function(e){for(var a=e.shift(),i=a.files,o=0;o<i.length;o++){var s=i[o],l=s.fileNameStr,c=r.resolve(s.fileNameStr);t.file(c,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:n.createFolders}),s.dir||(t.file(c).unsafeOriginalName=l)}return a.zipComment.length&&(t.comment=a.zipComment),t}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,n,t){"use strict";var r=e("../utils"),a=e("../stream/GenericWorker");function i(e,n){a.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(n)}r.inherits(i,a),i.prototype._bindStream=function(e){var n=this;(this._stream=e).pause(),e.on("data",(function(e){n.push({data:e,meta:{percent:0}})})).on("error",(function(e){n.isPaused?this.generatedError=e:n.error(e)})).on("end",(function(){n.isPaused?n._upstreamEnded=!0:n.end()}))},i.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,n,t){"use strict";var r=e("readable-stream").Readable;function a(e,n,t){r.call(this,n),this._helper=e;var a=this;e.on("data",(function(e,n){a.push(e)||a._helper.pause(),t&&t(n)})).on("error",(function(e){a.emit("error",e)})).on("end",(function(){a.push(null)}))}e("../utils").inherits(a,r),a.prototype._read=function(){this._helper.resume()},n.exports=a},{"../utils":32,"readable-stream":16}],14:[function(e,n,t){"use strict";n.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,n){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,n);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,n)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var n=new Buffer(e);return n.fill(0),n},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,n,t){"use strict";function r(e,n,t){var r,a=i.getTypeOf(n),s=i.extend(t||{},l);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=m(e)),s.createFolders&&(r=h(e))&&g.call(this,r,!0);var d="string"===a&&!1===s.binary&&!1===s.base64;t&&void 0!==t.binary||(s.binary=!d),(n instanceof c&&0===n.uncompressedSize||s.dir||!n||0===n.length)&&(s.base64=!1,s.binary=!0,n="",s.compression="STORE",a="string");var y=null;y=n instanceof c||n instanceof o?n:p.isNode&&p.isStream(n)?new f(e,n):i.prepareContent(e,n,s.binary,s.optimizedBinaryString,s.base64);var v=new u(e,y,s);this.files[e]=v}var a=e("./utf8"),i=e("./utils"),o=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),u=e("./zipObject"),d=e("./generate"),p=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),h=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var n=e.lastIndexOf("/");return 0<n?e.substring(0,n):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,n){return n=void 0!==n?n:l.createFolders,e=m(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:n}),this.files[e]};function y(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var v={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var n,t,r;for(n in this.files)r=this.files[n],(t=n.slice(this.root.length,n.length))&&n.slice(0,this.root.length)===this.root&&e(t,r)},filter:function(e){var n=[];return this.forEach((function(t,r){e(t,r)&&n.push(r)})),n},file:function(e,n,t){if(1!==arguments.length)return e=this.root+e,r.call(this,e,n,t),this;if(y(e)){var a=e;return this.filter((function(e,n){return!n.dir&&a.test(e)}))}var i=this.files[this.root+e];return i&&!i.dir?i:null},folder:function(e){if(!e)return this;if(y(e))return this.filter((function(n,t){return t.dir&&e.test(n)}));var n=this.root+e,t=g.call(this,n),r=this.clone();return r.root=t.name,r},remove:function(e){e=this.root+e;var n=this.files[e];if(n||("/"!==e.slice(-1)&&(e+="/"),n=this.files[e]),n&&!n.dir)delete this.files[e];else for(var t=this.filter((function(n,t){return t.name.slice(0,e.length)===e})),r=0;r<t.length;r++)delete this.files[t[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var n,t={};try{if((t=i.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=t.type.toLowerCase(),t.compression=t.compression.toUpperCase(),"binarystring"===t.type&&(t.type="string"),!t.type)throw new Error("No output type specified.");i.checkSupport(t.type),"darwin"!==t.platform&&"freebsd"!==t.platform&&"linux"!==t.platform&&"sunos"!==t.platform||(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var r=t.comment||this.comment||"";n=d.generateWorker(this,t,r)}catch(e){(n=new o("error")).error(e)}return new s(n,t.type||"string",t.mimeType)},generateAsync:function(e,n){return this.generateInternalStream(e).accumulate(n)},generateNodeStream:function(e,n){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(n)}};n.exports=v},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,n,t){"use strict";n.exports=e("stream")},{stream:void 0}],17:[function(e,n,t){"use strict";var r=e("./DataReader");function a(e){r.call(this,e);for(var n=0;n<this.data.length;n++)e[n]=255&e[n]}e("../utils").inherits(a,r),a.prototype.byteAt=function(e){return this.data[this.zero+e]},a.prototype.lastIndexOfSignature=function(e){for(var n=e.charCodeAt(0),t=e.charCodeAt(1),r=e.charCodeAt(2),a=e.charCodeAt(3),i=this.length-4;0<=i;--i)if(this.data[i]===n&&this.data[i+1]===t&&this.data[i+2]===r&&this.data[i+3]===a)return i-this.zero;return-1},a.prototype.readAndCheckSignature=function(e){var n=e.charCodeAt(0),t=e.charCodeAt(1),r=e.charCodeAt(2),a=e.charCodeAt(3),i=this.readData(4);return n===i[0]&&t===i[1]&&r===i[2]&&a===i[3]},a.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=a},{"../utils":32,"./DataReader":18}],18:[function(e,n,t){"use strict";var r=e("../utils");function a(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var n,t=0;for(this.checkOffset(e),n=this.index+e-1;n>=this.index;n--)t=(t<<8)+this.byteAt(n);return this.index+=e,t},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},n.exports=a},{"../utils":32}],19:[function(e,n,t){"use strict";var r=e("./Uint8ArrayReader");function a(e){r.call(this,e)}e("../utils").inherits(a,r),a.prototype.readData=function(e){this.checkOffset(e);var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,n,t){"use strict";var r=e("./DataReader");function a(e){r.call(this,e)}e("../utils").inherits(a,r),a.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},a.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},a.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},a.prototype.readData=function(e){this.checkOffset(e);var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=a},{"../utils":32,"./DataReader":18}],21:[function(e,n,t){"use strict";var r=e("./ArrayReader");function a(e){r.call(this,e)}e("../utils").inherits(a,r),a.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var n=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(e,n,t){"use strict";var r=e("../utils"),a=e("../support"),i=e("./ArrayReader"),o=e("./StringReader"),s=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");n.exports=function(e){var n=r.getTypeOf(e);return r.checkSupport(n),"string"!==n||a.uint8array?"nodebuffer"===n?new s(e):a.uint8array?new l(r.transformTo("uint8array",e)):new i(r.transformTo("array",e)):new o(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,n,t){"use strict";t.LOCAL_FILE_HEADER="PK\x03\x04",t.CENTRAL_FILE_HEADER="PK\x01\x02",t.CENTRAL_DIRECTORY_END="PK\x05\x06",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",t.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",t.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,n,t){"use strict";var r=e("./GenericWorker"),a=e("../utils");function i(e){r.call(this,"ConvertWorker to "+e),this.destType=e}a.inherits(i,r),i.prototype.processChunk=function(e){this.push({data:a.transformTo(this.destType,e.data),meta:e.meta})},n.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(e,n,t){"use strict";var r=e("./GenericWorker"),a=e("../crc32");function i(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(i,r),i.prototype.processChunk=function(e){this.streamInfo.crc32=a(e.data,this.streamInfo.crc32||0),this.push(e)},n.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,n,t){"use strict";var r=e("../utils"),a=e("./GenericWorker");function i(e){a.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(i,a),i.prototype.processChunk=function(e){if(e){var n=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=n+e.data.length}a.prototype.processChunk.call(this,e)},n.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(e,n,t){"use strict";var r=e("../utils"),a=e("./GenericWorker");function i(e){a.call(this,"DataWorker");var n=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){n.dataIsReady=!0,n.data=e,n.max=e&&e.length||0,n.type=r.getTypeOf(e),n.isPaused||n._tickAndRepeat()}),(function(e){n.error(e)}))}r.inherits(i,a),i.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,n=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,n);break;case"uint8array":e=this.data.subarray(this.index,n);break;case"array":case"nodebuffer":e=this.data.slice(this.index,n)}return this.index=n,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(e,n,t){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,n){return this._listeners[e].push(n),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,n){if(this._listeners[e])for(var t=0;t<this._listeners[e].length;t++)this._listeners[e][t].call(this,n)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var n=this;return e.on("data",(function(e){n.processChunk(e)})),e.on("end",(function(){n.end()})),e.on("error",(function(e){n.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,n){return this.extraStreamInfo[e]=n,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},n.exports=r},{}],29:[function(e,n,t){"use strict";var r=e("../utils"),a=e("./ConvertWorker"),i=e("./GenericWorker"),o=e("../base64"),s=e("../support"),l=e("../external"),c=null;if(s.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function u(e,n){return new l.Promise((function(t,a){var i=[],s=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",(function(e,t){i.push(e),n&&n(t)})).on("error",(function(e){i=[],a(e)})).on("end",(function(){try{var e=function(e,n,t){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",n),t);case"base64":return o.encode(n);default:return r.transformTo(e,n)}}(l,function(e,n){var t,r=0,a=null,i=0;for(t=0;t<n.length;t++)i+=n[t].length;switch(e){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(a=new Uint8Array(i),t=0;t<n.length;t++)a.set(n[t],r),r+=n[t].length;return a;case"nodebuffer":return Buffer.concat(n);default:throw new Error("concat : unsupported type '"+e+"'")}}(s,i),c);t(e)}catch(e){a(e)}i=[]})).resume()}))}function d(e,n,t){var o=n;switch(n){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=n,this._mimeType=t,r.checkSupport(o),this._worker=e.pipe(new a(o)),e.lock()}catch(e){this._worker=new i("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return u(this,e)},on:function(e,n){var t=this;return"data"===e?this._worker.on(e,(function(e){n.call(t,e.data,e.meta)})):this._worker.on(e,(function(){r.delay(n,arguments,t)})),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,t){"use strict";if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,t.nodebuffer="undefined"!=typeof Buffer,t.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)t.blob=!1;else{var r=new ArrayBuffer(0);try{t.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(r),t.blob=0===a.getBlob("application/zip").size}catch(e){t.blob=!1}}}try{t.nodestream=!!e("readable-stream").Readable}catch(e){t.nodestream=!1}},{"readable-stream":16}],31:[function(e,n,t){"use strict";for(var r=e("./utils"),a=e("./support"),i=e("./nodejsUtils"),o=e("./stream/GenericWorker"),s=new Array(256),l=0;l<256;l++)s[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){o.call(this,"utf-8 decode"),this.leftOver=null}function u(){o.call(this,"utf-8 encode")}s[254]=s[254]=1,t.utf8encode=function(e){return a.nodebuffer?i.newBufferFrom(e,"utf-8"):function(e){var n,t,r,i,o,s=e.length,l=0;for(i=0;i<s;i++)55296==(64512&(t=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(r=e.charCodeAt(i+1)))&&(t=65536+(t-55296<<10)+(r-56320),i++),l+=t<128?1:t<2048?2:t<65536?3:4;for(n=a.uint8array?new Uint8Array(l):new Array(l),i=o=0;o<l;i++)55296==(64512&(t=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(r=e.charCodeAt(i+1)))&&(t=65536+(t-55296<<10)+(r-56320),i++),t<128?n[o++]=t:(t<2048?n[o++]=192|t>>>6:(t<65536?n[o++]=224|t>>>12:(n[o++]=240|t>>>18,n[o++]=128|t>>>12&63),n[o++]=128|t>>>6&63),n[o++]=128|63&t);return n}(e)},t.utf8decode=function(e){return a.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var n,t,a,i,o=e.length,l=new Array(2*o);for(n=t=0;n<o;)if((a=e[n++])<128)l[t++]=a;else if(4<(i=s[a]))l[t++]=65533,n+=i-1;else{for(a&=2===i?31:3===i?15:7;1<i&&n<o;)a=a<<6|63&e[n++],i--;1<i?l[t++]=65533:a<65536?l[t++]=a:(a-=65536,l[t++]=55296|a>>10&1023,l[t++]=56320|1023&a)}return l.length!==t&&(l.subarray?l=l.subarray(0,t):l.length=t),r.applyFromCharCode(l)}(e=r.transformTo(a.uint8array?"uint8array":"array",e))},r.inherits(c,o),c.prototype.processChunk=function(e){var n=r.transformTo(a.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var i=n;(n=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),n.set(i,this.leftOver.length)}else n=this.leftOver.concat(n);this.leftOver=null}var o=function(e,n){var t;for((n=n||e.length)>e.length&&(n=e.length),t=n-1;0<=t&&128==(192&e[t]);)t--;return t<0||0===t?n:t+s[e[t]]>n?t:n}(n),l=n;o!==n.length&&(a.uint8array?(l=n.subarray(0,o),this.leftOver=n.subarray(o,n.length)):(l=n.slice(0,o),this.leftOver=n.slice(o,n.length))),this.push({data:t.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=c,r.inherits(u,o),u.prototype.processChunk=function(e){this.push({data:t.utf8encode(e.data),meta:e.meta})},t.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,n,t){"use strict";var r=e("./support"),a=e("./base64"),i=e("./nodejsUtils"),o=e("./external");function s(e){return e}function l(e,n){for(var t=0;t<e.length;++t)n[t]=255&e.charCodeAt(t);return n}e("setimmediate"),t.newBlob=function(n,r){t.checkSupport("blob");try{return new Blob([n],{type:r})}catch(e){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return a.append(n),a.getBlob(r)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,n,t){var r=[],a=0,i=e.length;if(i<=t)return String.fromCharCode.apply(null,e);for(;a<i;)"array"===n||"nodebuffer"===n?r.push(String.fromCharCode.apply(null,e.slice(a,Math.min(a+t,i)))):r.push(String.fromCharCode.apply(null,e.subarray(a,Math.min(a+t,i)))),a+=t;return r.join("")},stringifyByChar:function(e){for(var n="",t=0;t<e.length;t++)n+=String.fromCharCode(e[t]);return n},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,i.allocBuffer(1)).length}catch(e){return!1}}()}};function u(e){var n=65536,r=t.getTypeOf(e),a=!0;if("uint8array"===r?a=c.applyCanBeUsed.uint8array:"nodebuffer"===r&&(a=c.applyCanBeUsed.nodebuffer),a)for(;1<n;)try{return c.stringifyByChunk(e,r,n)}catch(e){n=Math.floor(n/2)}return c.stringifyByChar(e)}function d(e,n){for(var t=0;t<e.length;t++)n[t]=e[t];return n}t.applyFromCharCode=u;var p={};p.string={string:s,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return p.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,i.allocBuffer(e.length))}},p.array={string:u,array:s,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(e)}},p.arraybuffer={string:function(e){return u(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:s,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(new Uint8Array(e))}},p.uint8array={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:s,nodebuffer:function(e){return i.newBufferFrom(e)}},p.nodebuffer={string:u,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return p.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:s},t.transformTo=function(e,n){if(n=n||"",!e)return n;t.checkSupport(e);var r=t.getTypeOf(n);return p[r][e](n)},t.resolve=function(e){for(var n=e.split("/"),t=[],r=0;r<n.length;r++){var a=n[r];"."===a||""===a&&0!==r&&r!==n.length-1||(".."===a?t.pop():t.push(a))}return t.join("/")},t.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&i.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(e){var n,t,r="";for(t=0;t<(e||"").length;t++)r+="\\x"+((n=e.charCodeAt(t))<16?"0":"")+n.toString(16).toUpperCase();return r},t.delay=function(e,n,t){setImmediate((function(){e.apply(t||null,n||[])}))},t.inherits=function(e,n){function t(){}t.prototype=n.prototype,e.prototype=new t},t.extend=function(){var e,n,t={};for(e=0;e<arguments.length;e++)for(n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&void 0===t[n]&&(t[n]=arguments[e][n]);return t},t.prepareContent=function(e,n,i,s,c){return o.Promise.resolve(n).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise((function(n,t){var r=new FileReader;r.onload=function(e){n(e.target.result)},r.onerror=function(e){t(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(n){var u=t.getTypeOf(n);return u?("arraybuffer"===u?n=t.transformTo("uint8array",n):"string"===u&&(c?n=a.decode(n):i&&!0!==s&&(n=function(e){return l(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(n))),n):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,n,t){"use strict";var r=e("./reader/readerFor"),a=e("./utils"),i=e("./signature"),o=e("./zipEntry"),s=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var n=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(n)+", expected "+a.pretty(e)+")")}},isSignature:function(e,n){var t=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===n;return this.reader.setIndex(t),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),n=s.uint8array?"uint8array":"array",t=a.transformTo(n,e);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,n,t,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),n=this.reader.readInt(4),t=this.reader.readData(n),this.zip64ExtensibleData[e]={id:e,length:n,value:t}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,n;for(e=0;e<this.files.length;e++)n=this.files[e],this.reader.setIndex(n.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),n.readLocalPart(this.reader),n.handleUTF8(),n.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var n=e;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var t=this.centralDirOffset+this.centralDirSize;this.zip64&&(t+=20,t+=12+this.zip64EndOfCentralSize);var r=n-t;if(0<r)this.isSignature(n,i.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,n,t){"use strict";var r=e("./reader/readerFor"),a=e("./utils"),i=e("./compressedObject"),o=e("./crc32"),s=e("./utf8"),l=e("./compressions"),c=e("./support");function u(e,n){this.options=e,this.loadOptions=n}u.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var n,t;if(e.skip(22),this.fileNameLength=e.readInt(2),t=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(t),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(n=function(e){for(var n in l)if(Object.prototype.hasOwnProperty.call(l,n)&&l[n].magic===e)return l[n];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,n,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var n=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(n),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var n,t,r,a=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<a;)n=e.readInt(2),t=e.readInt(2),r=e.readData(t),this.extraFields[n]={id:n,length:t,value:r};e.setIndex(a)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var n=this.findExtraFieldUnicodePath();if(null!==n)this.fileNameStr=n;else{var t=a.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(t)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var i=a.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var n=r(e.value);return 1!==n.readInt(1)||o(this.fileName)!==n.readInt(4)?null:s.utf8decode(n.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var n=r(e.value);return 1!==n.readInt(1)||o(this.fileComment)!==n.readInt(4)?null:s.utf8decode(n.readData(e.length-5))}return null}},n.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,n,t){"use strict";function r(e,n,t){this.name=e,this.dir=t.dir,this.date=t.date,this.comment=t.comment,this.unixPermissions=t.unixPermissions,this.dosPermissions=t.dosPermissions,this._data=n,this._dataBinary=t.binary,this.options={compression:t.compression,compressionOptions:t.compressionOptions}}var a=e("./stream/StreamHelper"),i=e("./stream/DataWorker"),o=e("./utf8"),s=e("./compressedObject"),l=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var n=null,t="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(t=e.toLowerCase())||"text"===t;"binarystring"!==t&&"text"!==t||(t="string"),n=this._decompressWorker();var i=!this._dataBinary;i&&!r&&(n=n.pipe(new o.Utf8EncodeWorker)),!i&&r&&(n=n.pipe(new o.Utf8DecodeWorker))}catch(e){(n=new l("error")).error(e)}return new a(n,t,"")},async:function(e,n){return this.internalStream(e).accumulate(n)},nodeStream:function(e,n){return this.internalStream(e||"nodebuffer").toNodejsStream(n)},_compressWorker:function(e,n){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var t=this._decompressWorker();return this._dataBinary||(t=t.pipe(new o.Utf8EncodeWorker)),s.createWorkerFrom(t,e,n)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof l?this._data:new i(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<c.length;d++)r.prototype[c[d]]=u;n.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,r){(function(e){"use strict";var t,r,a=e.MutationObserver||e.WebKitMutationObserver;if(a){var i=0,o=new a(u),s=e.document.createTextNode("");o.observe(s,{characterData:!0}),t=function(){s.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var n=e.document.createElement("script");n.onreadystatechange=function(){u(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,t=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,n;r=!0;for(var t=c.length;t;){for(n=c,c=[],e=-1;++e<t;)n[e]();t=c.length}r=!1}n.exports=function(e){1!==c.push(e)||r||t()}}).call(this,"undefined"!=typeof t.g?t.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,n,t){"use strict";var r=e("immediate");function a(){}var i={},o=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==a&&f(this,e)}function u(e,n,t){this.promise=e,"function"==typeof n&&(this.onFulfilled=n,this.callFulfilled=this.otherCallFulfilled),"function"==typeof t&&(this.onRejected=t,this.callRejected=this.otherCallRejected)}function d(e,n,t){r((function(){var r;try{r=n(t)}catch(r){return i.reject(e,r)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function p(e){var n=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof n)return function(){n.apply(e,arguments)}}function f(e,n){var t=!1;function r(n){t||(t=!0,i.reject(e,n))}function a(n){t||(t=!0,i.resolve(e,n))}var o=h((function(){n(a,r)}));"error"===o.status&&r(o.value)}function h(e,n){var t={};try{t.value=e(n),t.status="success"}catch(e){t.status="error",t.value=e}return t}(n.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var n=this.constructor;return this.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,n){if("function"!=typeof e&&this.state===s||"function"!=typeof n&&this.state===o)return this;var t=new this.constructor(a);return this.state!==l?d(t,this.state===s?e:n,this.outcome):this.queue.push(new u(t,e,n)),t},u.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){i.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},i.resolve=function(e,n){var t=h(p,n);if("error"===t.status)return i.reject(e,t.value);var r=t.value;if(r)f(e,r);else{e.state=s,e.outcome=n;for(var a=-1,o=e.queue.length;++a<o;)e.queue[a].callFulfilled(n)}return e},i.reject=function(e,n){e.state=o,e.outcome=n;for(var t=-1,r=e.queue.length;++t<r;)e.queue[t].callRejected(n);return e},c.resolve=function(e){return e instanceof this?e:i.resolve(new this(a),e)},c.reject=function(e){var n=new this(a);return i.reject(n,e)},c.all=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var o=new Array(t),s=0,l=-1,c=new this(a);++l<t;)u(e[l],l);return c;function u(e,a){n.resolve(e).then((function(e){o[a]=e,++s!==t||r||(r=!0,i.resolve(c,o))}),(function(e){r||(r=!0,i.reject(c,e))}))}},c.race=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var o,s=-1,l=new this(a);++s<t;)o=e[s],n.resolve(o).then((function(e){r||(r=!0,i.resolve(l,e))}),(function(e){r||(r=!0,i.reject(l,e))}));return l}},{immediate:36}],38:[function(e,n,t){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),n.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,n,t){"use strict";var r=e("./zlib/deflate"),a=e("./utils/common"),i=e("./utils/strings"),o=e("./zlib/messages"),s=e("./zlib/zstream"),l=Object.prototype.toString,c=0,u=-1,d=0,p=8;function f(e){if(!(this instanceof f))return new f(e);this.options=a.assign({level:u,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var n=this.options;n.raw&&0<n.windowBits?n.windowBits=-n.windowBits:n.gzip&&0<n.windowBits&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var t=r.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(t!==c)throw new Error(o[t]);if(n.header&&r.deflateSetHeader(this.strm,n.header),n.dictionary){var h;if(h="string"==typeof n.dictionary?i.string2buf(n.dictionary):"[object ArrayBuffer]"===l.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,(t=r.deflateSetDictionary(this.strm,h))!==c)throw new Error(o[t]);this._dict_set=!0}}function h(e,n){var t=new f(n);if(t.push(e,!0),t.err)throw t.msg||o[t.err];return t.result}f.prototype.push=function(e,n){var t,o,s=this.strm,u=this.options.chunkSize;if(this.ended)return!1;o=n===~~n?n:!0===n?4:0,"string"==typeof e?s.input=i.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new a.Buf8(u),s.next_out=0,s.avail_out=u),1!==(t=r.deflate(s,o))&&t!==c)return this.onEnd(t),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(i.buf2binstring(a.shrinkBuf(s.output,s.next_out))):this.onData(a.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==t);return 4===o?(t=r.deflateEnd(this.strm),this.onEnd(t),this.ended=!0,t===c):2!==o||(this.onEnd(c),!(s.avail_out=0))},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=f,t.deflate=h,t.deflateRaw=function(e,n){return(n=n||{}).raw=!0,h(e,n)},t.gzip=function(e,n){return(n=n||{}).gzip=!0,h(e,n)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,n,t){"use strict";var r=e("./zlib/inflate"),a=e("./utils/common"),i=e("./utils/strings"),o=e("./zlib/constants"),s=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),u=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var n=this.options;n.raw&&0<=n.windowBits&&n.windowBits<16&&(n.windowBits=-n.windowBits,0===n.windowBits&&(n.windowBits=-15)),!(0<=n.windowBits&&n.windowBits<16)||e&&e.windowBits||(n.windowBits+=32),15<n.windowBits&&n.windowBits<48&&0==(15&n.windowBits)&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var t=r.inflateInit2(this.strm,n.windowBits);if(t!==o.Z_OK)throw new Error(s[t]);this.header=new c,r.inflateGetHeader(this.strm,this.header)}function p(e,n){var t=new d(n);if(t.push(e,!0),t.err)throw t.msg||s[t.err];return t.result}d.prototype.push=function(e,n){var t,s,l,c,d,p,f=this.strm,h=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;s=n===~~n?n:!0===n?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?f.input=i.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new a.Buf8(h),f.next_out=0,f.avail_out=h),(t=r.inflate(f,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&m&&(p="string"==typeof m?i.string2buf(m):"[object ArrayBuffer]"===u.call(m)?new Uint8Array(m):m,t=r.inflateSetDictionary(this.strm,p)),t===o.Z_BUF_ERROR&&!0===g&&(t=o.Z_OK,g=!1),t!==o.Z_STREAM_END&&t!==o.Z_OK)return this.onEnd(t),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&t!==o.Z_STREAM_END&&(0!==f.avail_in||s!==o.Z_FINISH&&s!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=i.utf8border(f.output,f.next_out),c=f.next_out-l,d=i.buf2string(f.output,l),f.next_out=c,f.avail_out=h-c,c&&a.arraySet(f.output,f.output,l,c,0),this.onData(d)):this.onData(a.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((0<f.avail_in||0===f.avail_out)&&t!==o.Z_STREAM_END);return t===o.Z_STREAM_END&&(s=o.Z_FINISH),s===o.Z_FINISH?(t=r.inflateEnd(this.strm),this.onEnd(t),this.ended=!0,t===o.Z_OK):s!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(f.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=d,t.inflate=p,t.inflateRaw=function(e,n){return(n=n||{}).raw=!0,p(e,n)},t.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,n,t){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var t=n.shift();if(t){if("object"!=typeof t)throw new TypeError(t+"must be non-object");for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}}return e},t.shrinkBuf=function(e,n){return e.length===n?e:e.subarray?e.subarray(0,n):(e.length=n,e)};var a={arraySet:function(e,n,t,r,a){if(n.subarray&&e.subarray)e.set(n.subarray(t,t+r),a);else for(var i=0;i<r;i++)e[a+i]=n[t+i]},flattenChunks:function(e){var n,t,r,a,i,o;for(n=r=0,t=e.length;n<t;n++)r+=e[n].length;for(o=new Uint8Array(r),n=a=0,t=e.length;n<t;n++)i=e[n],o.set(i,a),a+=i.length;return o}},i={arraySet:function(e,n,t,r,a){for(var i=0;i<r;i++)e[a+i]=n[t+i]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(r)},{}],42:[function(e,n,t){"use strict";var r=e("./common"),a=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(e){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}for(var o=new r.Buf8(256),s=0;s<256;s++)o[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function l(e,n){if(n<65537&&(e.subarray&&i||!e.subarray&&a))return String.fromCharCode.apply(null,r.shrinkBuf(e,n));for(var t="",o=0;o<n;o++)t+=String.fromCharCode(e[o]);return t}o[254]=o[254]=1,t.string2buf=function(e){var n,t,a,i,o,s=e.length,l=0;for(i=0;i<s;i++)55296==(64512&(t=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(a=e.charCodeAt(i+1)))&&(t=65536+(t-55296<<10)+(a-56320),i++),l+=t<128?1:t<2048?2:t<65536?3:4;for(n=new r.Buf8(l),i=o=0;o<l;i++)55296==(64512&(t=e.charCodeAt(i)))&&i+1<s&&56320==(64512&(a=e.charCodeAt(i+1)))&&(t=65536+(t-55296<<10)+(a-56320),i++),t<128?n[o++]=t:(t<2048?n[o++]=192|t>>>6:(t<65536?n[o++]=224|t>>>12:(n[o++]=240|t>>>18,n[o++]=128|t>>>12&63),n[o++]=128|t>>>6&63),n[o++]=128|63&t);return n},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var n=new r.Buf8(e.length),t=0,a=n.length;t<a;t++)n[t]=e.charCodeAt(t);return n},t.buf2string=function(e,n){var t,r,a,i,s=n||e.length,c=new Array(2*s);for(t=r=0;t<s;)if((a=e[t++])<128)c[r++]=a;else if(4<(i=o[a]))c[r++]=65533,t+=i-1;else{for(a&=2===i?31:3===i?15:7;1<i&&t<s;)a=a<<6|63&e[t++],i--;1<i?c[r++]=65533:a<65536?c[r++]=a:(a-=65536,c[r++]=55296|a>>10&1023,c[r++]=56320|1023&a)}return l(c,r)},t.utf8border=function(e,n){var t;for((n=n||e.length)>e.length&&(n=e.length),t=n-1;0<=t&&128==(192&e[t]);)t--;return t<0||0===t?n:t+o[e[t]]>n?t:n}},{"./common":41}],43:[function(e,n,t){"use strict";n.exports=function(e,n,t,r){for(var a=65535&e,i=e>>>16&65535,o=0;0!==t;){for(t-=o=2e3<t?2e3:t;i=i+(a=a+n[r++]|0)|0,--o;);a%=65521,i%=65521}return a|i<<16}},{}],44:[function(e,n,t){"use strict";n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,n,t){"use strict";var r=function(){for(var e,n=[],t=0;t<256;t++){e=t;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;n[t]=e}return n}();n.exports=function(e,n,t,a){var i=r,o=a+t;e^=-1;for(var s=a;s<o;s++)e=e>>>8^i[255&(e^n[s])];return~e}},{}],46:[function(e,n,t){"use strict";var r,a=e("../utils/common"),i=e("./trees"),o=e("./adler32"),s=e("./crc32"),l=e("./messages"),c=0,u=4,d=0,p=-2,f=-1,h=4,m=2,g=8,y=9,v=286,b=30,w=19,S=2*v+1,x=15,k=3,I=258,_=I+k+1,A=42,T=113,E=1,O=2,C=3,N=4;function M(e,n){return e.msg=l[n],n}function P(e){return(e<<1)-(4<e?9:0)}function F(e){for(var n=e.length;0<=--n;)e[n]=0}function R(e){var n=e.state,t=n.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(a.arraySet(e.output,n.pending_buf,n.pending_out,t,e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,0===n.pending&&(n.pending_out=0))}function L(e,n){i._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,R(e.strm)}function D(e,n){e.pending_buf[e.pending++]=n}function j(e,n){e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=255&n}function z(e,n){var t,r,a=e.max_chain_length,i=e.strstart,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-_?e.strstart-(e.w_size-_):0,c=e.window,u=e.w_mask,d=e.prev,p=e.strstart+I,f=c[i+o-1],h=c[i+o];e.prev_length>=e.good_match&&(a>>=2),s>e.lookahead&&(s=e.lookahead);do{if(c[(t=n)+o]===h&&c[t+o-1]===f&&c[t]===c[i]&&c[++t]===c[i+1]){i+=2,t++;do{}while(c[++i]===c[++t]&&c[++i]===c[++t]&&c[++i]===c[++t]&&c[++i]===c[++t]&&c[++i]===c[++t]&&c[++i]===c[++t]&&c[++i]===c[++t]&&c[++i]===c[++t]&&i<p);if(r=I-(p-i),i=p-I,o<r){if(e.match_start=n,s<=(o=r))break;f=c[i+o-1],h=c[i+o]}}}while((n=d[n&u])>l&&0!=--a);return o<=e.lookahead?o:e.lookahead}function B(e){var n,t,r,i,l,c,u,d,p,f,h=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=h+(h-_)){for(a.arraySet(e.window,e.window,h,h,0),e.match_start-=h,e.strstart-=h,e.block_start-=h,n=t=e.hash_size;r=e.head[--n],e.head[n]=h<=r?r-h:0,--t;);for(n=t=h;r=e.prev[--n],e.prev[n]=h<=r?r-h:0,--t;);i+=h}if(0===e.strm.avail_in)break;if(c=e.strm,u=e.window,d=e.strstart+e.lookahead,f=void 0,(p=i)<(f=c.avail_in)&&(f=p),t=0===f?0:(c.avail_in-=f,a.arraySet(u,c.input,c.next_in,f,d),1===c.state.wrap?c.adler=o(c.adler,u,f,d):2===c.state.wrap&&(c.adler=s(c.adler,u,f,d)),c.next_in+=f,c.total_in+=f,f),e.lookahead+=t,e.lookahead+e.insert>=k)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+k-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<k)););}while(e.lookahead<_&&0!==e.strm.avail_in)}function U(e,n){for(var t,r;;){if(e.lookahead<_){if(B(e),e.lookahead<_&&n===c)return E;if(0===e.lookahead)break}if(t=0,e.lookahead>=k&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==t&&e.strstart-t<=e.w_size-_&&(e.match_length=z(e,t)),e.match_length>=k)if(r=i._tr_tally(e,e.strstart-e.match_start,e.match_length-k),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=k){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(L(e,!1),0===e.strm.avail_out))return E}return e.insert=e.strstart<k-1?e.strstart:k-1,n===u?(L(e,!0),0===e.strm.avail_out?C:N):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?E:O}function W(e,n){for(var t,r,a;;){if(e.lookahead<_){if(B(e),e.lookahead<_&&n===c)return E;if(0===e.lookahead)break}if(t=0,e.lookahead>=k&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=k-1,0!==t&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-_&&(e.match_length=z(e,t),e.match_length<=5&&(1===e.strategy||e.match_length===k&&4096<e.strstart-e.match_start)&&(e.match_length=k-1)),e.prev_length>=k&&e.match_length<=e.prev_length){for(a=e.strstart+e.lookahead-k,r=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-k),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=k-1,e.strstart++,r&&(L(e,!1),0===e.strm.avail_out))return E}else if(e.match_available){if((r=i._tr_tally(e,0,e.window[e.strstart-1]))&&L(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return E}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<k-1?e.strstart:k-1,n===u?(L(e,!0),0===e.strm.avail_out?C:N):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?E:O}function $(e,n,t,r,a){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=r,this.func=a}function V(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*S),this.dyn_dtree=new a.Buf16(2*(2*b+1)),this.bl_tree=new a.Buf16(2*(2*w+1)),F(this.dyn_ltree),F(this.dyn_dtree),F(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(x+1),this.heap=new a.Buf16(2*v+1),F(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*v+1),F(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(e){var n;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=m,(n=e.state).pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?A:T,e.adler=2===n.wrap?0:1,n.last_flush=c,i._tr_init(n),d):M(e,p)}function H(e){var n=G(e);return n===d&&function(e){e.window_size=2*e.w_size,F(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=k-1,e.match_available=0,e.ins_h=0}(e.state),n}function q(e,n,t,r,i,o){if(!e)return p;var s=1;if(n===f&&(n=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),i<1||y<i||t!==g||r<8||15<r||n<0||9<n||o<0||h<o)return M(e,p);8===r&&(r=9);var l=new V;return(e.state=l).strm=e,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+k-1)/k),l.window=new a.Buf8(2*l.w_size),l.head=new a.Buf16(l.hash_size),l.prev=new a.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new a.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=n,l.strategy=o,l.method=t,H(e)}r=[new $(0,0,0,0,(function(e,n){var t=65535;for(t>e.pending_buf_size-5&&(t=e.pending_buf_size-5);;){if(e.lookahead<=1){if(B(e),0===e.lookahead&&n===c)return E;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+t;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,L(e,!1),0===e.strm.avail_out))return E;if(e.strstart-e.block_start>=e.w_size-_&&(L(e,!1),0===e.strm.avail_out))return E}return e.insert=0,n===u?(L(e,!0),0===e.strm.avail_out?C:N):(e.strstart>e.block_start&&(L(e,!1),e.strm.avail_out),E)})),new $(4,4,8,4,U),new $(4,5,16,8,U),new $(4,6,32,32,U),new $(4,4,16,16,W),new $(8,16,32,32,W),new $(8,16,128,128,W),new $(8,32,128,256,W),new $(32,128,258,1024,W),new $(32,258,258,4096,W)],t.deflateInit=function(e,n){return q(e,n,g,15,8,0)},t.deflateInit2=q,t.deflateReset=H,t.deflateResetKeep=G,t.deflateSetHeader=function(e,n){return e&&e.state?2!==e.state.wrap?p:(e.state.gzhead=n,d):p},t.deflate=function(e,n){var t,a,o,l;if(!e||!e.state||5<n||n<0)return e?M(e,p):p;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||666===a.status&&n!==u)return M(e,0===e.avail_out?-5:p);if(a.strm=e,t=a.last_flush,a.last_flush=n,a.status===A)if(2===a.wrap)e.adler=0,D(a,31),D(a,139),D(a,8),a.gzhead?(D(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),D(a,255&a.gzhead.time),D(a,a.gzhead.time>>8&255),D(a,a.gzhead.time>>16&255),D(a,a.gzhead.time>>24&255),D(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),D(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(D(a,255&a.gzhead.extra.length),D(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=s(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(D(a,0),D(a,0),D(a,0),D(a,0),D(a,0),D(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),D(a,3),a.status=T);else{var f=g+(a.w_bits-8<<4)<<8;f|=(2<=a.strategy||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(f|=32),f+=31-f%31,a.status=T,j(a,f),0!==a.strstart&&(j(a,e.adler>>>16),j(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(o=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>o&&(e.adler=s(e.adler,a.pending_buf,a.pending-o,o)),R(e),o=a.pending,a.pending!==a.pending_buf_size));)D(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>o&&(e.adler=s(e.adler,a.pending_buf,a.pending-o,o)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){o=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>o&&(e.adler=s(e.adler,a.pending_buf,a.pending-o,o)),R(e),o=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,D(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>o&&(e.adler=s(e.adler,a.pending_buf,a.pending-o,o)),0===l&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){o=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>o&&(e.adler=s(e.adler,a.pending_buf,a.pending-o,o)),R(e),o=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,D(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>o&&(e.adler=s(e.adler,a.pending_buf,a.pending-o,o)),0===l&&(a.status=103)}else a.status=103;if(103===a.status&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&R(e),a.pending+2<=a.pending_buf_size&&(D(a,255&e.adler),D(a,e.adler>>8&255),e.adler=0,a.status=T)):a.status=T),0!==a.pending){if(R(e),0===e.avail_out)return a.last_flush=-1,d}else if(0===e.avail_in&&P(n)<=P(t)&&n!==u)return M(e,-5);if(666===a.status&&0!==e.avail_in)return M(e,-5);if(0!==e.avail_in||0!==a.lookahead||n!==c&&666!==a.status){var h=2===a.strategy?function(e,n){for(var t;;){if(0===e.lookahead&&(B(e),0===e.lookahead)){if(n===c)return E;break}if(e.match_length=0,t=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(L(e,!1),0===e.strm.avail_out))return E}return e.insert=0,n===u?(L(e,!0),0===e.strm.avail_out?C:N):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?E:O}(a,n):3===a.strategy?function(e,n){for(var t,r,a,o,s=e.window;;){if(e.lookahead<=I){if(B(e),e.lookahead<=I&&n===c)return E;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=k&&0<e.strstart&&(r=s[a=e.strstart-1])===s[++a]&&r===s[++a]&&r===s[++a]){o=e.strstart+I;do{}while(r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&a<o);e.match_length=I-(o-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=k?(t=i._tr_tally(e,1,e.match_length-k),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(L(e,!1),0===e.strm.avail_out))return E}return e.insert=0,n===u?(L(e,!0),0===e.strm.avail_out?C:N):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?E:O}(a,n):r[a.level].func(a,n);if(h!==C&&h!==N||(a.status=666),h===E||h===C)return 0===e.avail_out&&(a.last_flush=-1),d;if(h===O&&(1===n?i._tr_align(a):5!==n&&(i._tr_stored_block(a,0,0,!1),3===n&&(F(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),R(e),0===e.avail_out))return a.last_flush=-1,d}return n!==u?d:a.wrap<=0?1:(2===a.wrap?(D(a,255&e.adler),D(a,e.adler>>8&255),D(a,e.adler>>16&255),D(a,e.adler>>24&255),D(a,255&e.total_in),D(a,e.total_in>>8&255),D(a,e.total_in>>16&255),D(a,e.total_in>>24&255)):(j(a,e.adler>>>16),j(a,65535&e.adler)),R(e),0<a.wrap&&(a.wrap=-a.wrap),0!==a.pending?d:1)},t.deflateEnd=function(e){var n;return e&&e.state?(n=e.state.status)!==A&&69!==n&&73!==n&&91!==n&&103!==n&&n!==T&&666!==n?M(e,p):(e.state=null,n===T?M(e,-3):d):p},t.deflateSetDictionary=function(e,n){var t,r,i,s,l,c,u,f,h=n.length;if(!e||!e.state)return p;if(2===(s=(t=e.state).wrap)||1===s&&t.status!==A||t.lookahead)return p;for(1===s&&(e.adler=o(e.adler,n,h,0)),t.wrap=0,h>=t.w_size&&(0===s&&(F(t.head),t.strstart=0,t.block_start=0,t.insert=0),f=new a.Buf8(t.w_size),a.arraySet(f,n,h-t.w_size,t.w_size,0),n=f,h=t.w_size),l=e.avail_in,c=e.next_in,u=e.input,e.avail_in=h,e.next_in=0,e.input=n,B(t);t.lookahead>=k;){for(r=t.strstart,i=t.lookahead-(k-1);t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+k-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,--i;);t.strstart=r,t.lookahead=k-1,B(t)}return t.strstart+=t.lookahead,t.block_start=t.strstart,t.insert=t.lookahead,t.lookahead=0,t.match_length=t.prev_length=k-1,t.match_available=0,e.next_in=c,e.input=u,e.avail_in=l,t.wrap=s,d},t.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,n,t){"use strict";n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,n,t){"use strict";n.exports=function(e,n){var t,r,a,i,o,s,l,c,u,d,p,f,h,m,g,y,v,b,w,S,x,k,I,_,A;t=e.state,r=e.next_in,_=e.input,a=r+(e.avail_in-5),i=e.next_out,A=e.output,o=i-(n-e.avail_out),s=i+(e.avail_out-257),l=t.dmax,c=t.wsize,u=t.whave,d=t.wnext,p=t.window,f=t.hold,h=t.bits,m=t.lencode,g=t.distcode,y=(1<<t.lenbits)-1,v=(1<<t.distbits)-1;e:do{h<15&&(f+=_[r++]<<h,h+=8,f+=_[r++]<<h,h+=8),b=m[f&y];n:for(;;){if(f>>>=w=b>>>24,h-=w,0===(w=b>>>16&255))A[i++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=m[(65535&b)+(f&(1<<w)-1)];continue n}if(32&w){t.mode=12;break e}e.msg="invalid literal/length code",t.mode=30;break e}S=65535&b,(w&=15)&&(h<w&&(f+=_[r++]<<h,h+=8),S+=f&(1<<w)-1,f>>>=w,h-=w),h<15&&(f+=_[r++]<<h,h+=8,f+=_[r++]<<h,h+=8),b=g[f&v];t:for(;;){if(f>>>=w=b>>>24,h-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=g[(65535&b)+(f&(1<<w)-1)];continue t}e.msg="invalid distance code",t.mode=30;break e}if(x=65535&b,h<(w&=15)&&(f+=_[r++]<<h,(h+=8)<w&&(f+=_[r++]<<h,h+=8)),l<(x+=f&(1<<w)-1)){e.msg="invalid distance too far back",t.mode=30;break e}if(f>>>=w,h-=w,(w=i-o)<x){if(u<(w=x-w)&&t.sane){e.msg="invalid distance too far back",t.mode=30;break e}if(I=p,(k=0)===d){if(k+=c-w,w<S){for(S-=w;A[i++]=p[k++],--w;);k=i-x,I=A}}else if(d<w){if(k+=c+d-w,(w-=d)<S){for(S-=w;A[i++]=p[k++],--w;);if(k=0,d<S){for(S-=w=d;A[i++]=p[k++],--w;);k=i-x,I=A}}}else if(k+=d-w,w<S){for(S-=w;A[i++]=p[k++],--w;);k=i-x,I=A}for(;2<S;)A[i++]=I[k++],A[i++]=I[k++],A[i++]=I[k++],S-=3;S&&(A[i++]=I[k++],1<S&&(A[i++]=I[k++]))}else{for(k=i-x;A[i++]=A[k++],A[i++]=A[k++],A[i++]=A[k++],2<(S-=3););S&&(A[i++]=A[k++],1<S&&(A[i++]=A[k++]))}break}}break}}while(r<a&&i<s);r-=S=h>>3,f&=(1<<(h-=S<<3))-1,e.next_in=r,e.next_out=i,e.avail_in=r<a?a-r+5:5-(r-a),e.avail_out=i<s?s-i+257:257-(i-s),t.hold=f,t.bits=h}},{}],49:[function(e,n,t){"use strict";var r=e("../utils/common"),a=e("./adler32"),i=e("./crc32"),o=e("./inffast"),s=e("./inftrees"),l=1,c=2,u=0,d=-2,p=1,f=852,h=592;function m(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(e){var n;return e&&e.state?(n=e.state,e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=1&n.wrap),n.mode=p,n.last=0,n.havedict=0,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new r.Buf32(f),n.distcode=n.distdyn=new r.Buf32(h),n.sane=1,n.back=-1,u):d}function v(e){var n;return e&&e.state?((n=e.state).wsize=0,n.whave=0,n.wnext=0,y(e)):d}function b(e,n){var t,r;return e&&e.state?(r=e.state,n<0?(t=0,n=-n):(t=1+(n>>4),n<48&&(n&=15)),n&&(n<8||15<n)?d:(null!==r.window&&r.wbits!==n&&(r.window=null),r.wrap=t,r.wbits=n,v(e))):d}function w(e,n){var t,r;return e?(r=new g,(e.state=r).window=null,(t=b(e,n))!==u&&(e.state=null),t):d}var S,x,k=!0;function I(e){if(k){var n;for(S=new r.Buf32(512),x=new r.Buf32(32),n=0;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(s(l,e.lens,0,288,S,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;s(c,e.lens,0,32,x,0,e.work,{bits:5}),k=!1}e.lencode=S,e.lenbits=9,e.distcode=x,e.distbits=5}function _(e,n,t,a){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),a>=o.wsize?(r.arraySet(o.window,n,t-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(a<(i=o.wsize-o.wnext)&&(i=a),r.arraySet(o.window,n,t-a,i,o.wnext),(a-=i)?(r.arraySet(o.window,n,t-a,a,0),o.wnext=a,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}t.inflateReset=v,t.inflateReset2=b,t.inflateResetKeep=y,t.inflateInit=function(e){return w(e,15)},t.inflateInit2=w,t.inflate=function(e,n){var t,f,h,g,y,v,b,w,S,x,k,A,T,E,O,C,N,M,P,F,R,L,D,j,z=0,B=new r.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;12===(t=e.state).mode&&(t.mode=13),y=e.next_out,h=e.output,b=e.avail_out,g=e.next_in,f=e.input,v=e.avail_in,w=t.hold,S=t.bits,x=v,k=b,L=u;e:for(;;)switch(t.mode){case p:if(0===t.wrap){t.mode=13;break}for(;S<16;){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}if(2&t.wrap&&35615===w){B[t.check=0]=255&w,B[1]=w>>>8&255,t.check=i(t.check,B,2,0),S=w=0,t.mode=2;break}if(t.flags=0,t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&w)<<8)+(w>>8))%31){e.msg="incorrect header check",t.mode=30;break}if(8!=(15&w)){e.msg="unknown compression method",t.mode=30;break}if(S-=4,R=8+(15&(w>>>=4)),0===t.wbits)t.wbits=R;else if(R>t.wbits){e.msg="invalid window size",t.mode=30;break}t.dmax=1<<R,e.adler=t.check=1,t.mode=512&w?10:12,S=w=0;break;case 2:for(;S<16;){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}if(t.flags=w,8!=(255&t.flags)){e.msg="unknown compression method",t.mode=30;break}if(57344&t.flags){e.msg="unknown header flags set",t.mode=30;break}t.head&&(t.head.text=w>>8&1),512&t.flags&&(B[0]=255&w,B[1]=w>>>8&255,t.check=i(t.check,B,2,0)),S=w=0,t.mode=3;case 3:for(;S<32;){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}t.head&&(t.head.time=w),512&t.flags&&(B[0]=255&w,B[1]=w>>>8&255,B[2]=w>>>16&255,B[3]=w>>>24&255,t.check=i(t.check,B,4,0)),S=w=0,t.mode=4;case 4:for(;S<16;){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}t.head&&(t.head.xflags=255&w,t.head.os=w>>8),512&t.flags&&(B[0]=255&w,B[1]=w>>>8&255,t.check=i(t.check,B,2,0)),S=w=0,t.mode=5;case 5:if(1024&t.flags){for(;S<16;){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}t.length=w,t.head&&(t.head.extra_len=w),512&t.flags&&(B[0]=255&w,B[1]=w>>>8&255,t.check=i(t.check,B,2,0)),S=w=0}else t.head&&(t.head.extra=null);t.mode=6;case 6:if(1024&t.flags&&(v<(A=t.length)&&(A=v),A&&(t.head&&(R=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),r.arraySet(t.head.extra,f,g,A,R)),512&t.flags&&(t.check=i(t.check,f,A,g)),v-=A,g+=A,t.length-=A),t.length))break e;t.length=0,t.mode=7;case 7:if(2048&t.flags){if(0===v)break e;for(A=0;R=f[g+A++],t.head&&R&&t.length<65536&&(t.head.name+=String.fromCharCode(R)),R&&A<v;);if(512&t.flags&&(t.check=i(t.check,f,A,g)),v-=A,g+=A,R)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=8;case 8:if(4096&t.flags){if(0===v)break e;for(A=0;R=f[g+A++],t.head&&R&&t.length<65536&&(t.head.comment+=String.fromCharCode(R)),R&&A<v;);if(512&t.flags&&(t.check=i(t.check,f,A,g)),v-=A,g+=A,R)break e}else t.head&&(t.head.comment=null);t.mode=9;case 9:if(512&t.flags){for(;S<16;){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}if(w!==(65535&t.check)){e.msg="header crc mismatch",t.mode=30;break}S=w=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=12;break;case 10:for(;S<32;){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}e.adler=t.check=m(w),S=w=0,t.mode=11;case 11:if(0===t.havedict)return e.next_out=y,e.avail_out=b,e.next_in=g,e.avail_in=v,t.hold=w,t.bits=S,2;e.adler=t.check=1,t.mode=12;case 12:if(5===n||6===n)break e;case 13:if(t.last){w>>>=7&S,S-=7&S,t.mode=27;break}for(;S<3;){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}switch(t.last=1&w,S-=1,3&(w>>>=1)){case 0:t.mode=14;break;case 1:if(I(t),t.mode=20,6!==n)break;w>>>=2,S-=2;break e;case 2:t.mode=17;break;case 3:e.msg="invalid block type",t.mode=30}w>>>=2,S-=2;break;case 14:for(w>>>=7&S,S-=7&S;S<32;){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}if((65535&w)!=(w>>>16^65535)){e.msg="invalid stored block lengths",t.mode=30;break}if(t.length=65535&w,S=w=0,t.mode=15,6===n)break e;case 15:t.mode=16;case 16:if(A=t.length){if(v<A&&(A=v),b<A&&(A=b),0===A)break e;r.arraySet(h,f,g,A,y),v-=A,g+=A,b-=A,y+=A,t.length-=A;break}t.mode=12;break;case 17:for(;S<14;){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}if(t.nlen=257+(31&w),w>>>=5,S-=5,t.ndist=1+(31&w),w>>>=5,S-=5,t.ncode=4+(15&w),w>>>=4,S-=4,286<t.nlen||30<t.ndist){e.msg="too many length or distance symbols",t.mode=30;break}t.have=0,t.mode=18;case 18:for(;t.have<t.ncode;){for(;S<3;){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}t.lens[U[t.have++]]=7&w,w>>>=3,S-=3}for(;t.have<19;)t.lens[U[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,D={bits:t.lenbits},L=s(0,t.lens,0,19,t.lencode,0,t.work,D),t.lenbits=D.bits,L){e.msg="invalid code lengths set",t.mode=30;break}t.have=0,t.mode=19;case 19:for(;t.have<t.nlen+t.ndist;){for(;C=(z=t.lencode[w&(1<<t.lenbits)-1])>>>16&255,N=65535&z,!((O=z>>>24)<=S);){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}if(N<16)w>>>=O,S-=O,t.lens[t.have++]=N;else{if(16===N){for(j=O+2;S<j;){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}if(w>>>=O,S-=O,0===t.have){e.msg="invalid bit length repeat",t.mode=30;break}R=t.lens[t.have-1],A=3+(3&w),w>>>=2,S-=2}else if(17===N){for(j=O+3;S<j;){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}S-=O,R=0,A=3+(7&(w>>>=O)),w>>>=3,S-=3}else{for(j=O+7;S<j;){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}S-=O,R=0,A=11+(127&(w>>>=O)),w>>>=7,S-=7}if(t.have+A>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=30;break}for(;A--;)t.lens[t.have++]=R}}if(30===t.mode)break;if(0===t.lens[256]){e.msg="invalid code -- missing end-of-block",t.mode=30;break}if(t.lenbits=9,D={bits:t.lenbits},L=s(l,t.lens,0,t.nlen,t.lencode,0,t.work,D),t.lenbits=D.bits,L){e.msg="invalid literal/lengths set",t.mode=30;break}if(t.distbits=6,t.distcode=t.distdyn,D={bits:t.distbits},L=s(c,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,D),t.distbits=D.bits,L){e.msg="invalid distances set",t.mode=30;break}if(t.mode=20,6===n)break e;case 20:t.mode=21;case 21:if(6<=v&&258<=b){e.next_out=y,e.avail_out=b,e.next_in=g,e.avail_in=v,t.hold=w,t.bits=S,o(e,k),y=e.next_out,h=e.output,b=e.avail_out,g=e.next_in,f=e.input,v=e.avail_in,w=t.hold,S=t.bits,12===t.mode&&(t.back=-1);break}for(t.back=0;C=(z=t.lencode[w&(1<<t.lenbits)-1])>>>16&255,N=65535&z,!((O=z>>>24)<=S);){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}if(C&&0==(240&C)){for(M=O,P=C,F=N;C=(z=t.lencode[F+((w&(1<<M+P)-1)>>M)])>>>16&255,N=65535&z,!(M+(O=z>>>24)<=S);){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}w>>>=M,S-=M,t.back+=M}if(w>>>=O,S-=O,t.back+=O,t.length=N,0===C){t.mode=26;break}if(32&C){t.back=-1,t.mode=12;break}if(64&C){e.msg="invalid literal/length code",t.mode=30;break}t.extra=15&C,t.mode=22;case 22:if(t.extra){for(j=t.extra;S<j;){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}t.length+=w&(1<<t.extra)-1,w>>>=t.extra,S-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=23;case 23:for(;C=(z=t.distcode[w&(1<<t.distbits)-1])>>>16&255,N=65535&z,!((O=z>>>24)<=S);){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}if(0==(240&C)){for(M=O,P=C,F=N;C=(z=t.distcode[F+((w&(1<<M+P)-1)>>M)])>>>16&255,N=65535&z,!(M+(O=z>>>24)<=S);){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}w>>>=M,S-=M,t.back+=M}if(w>>>=O,S-=O,t.back+=O,64&C){e.msg="invalid distance code",t.mode=30;break}t.offset=N,t.extra=15&C,t.mode=24;case 24:if(t.extra){for(j=t.extra;S<j;){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}t.offset+=w&(1<<t.extra)-1,w>>>=t.extra,S-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=30;break}t.mode=25;case 25:if(0===b)break e;if(A=k-b,t.offset>A){if((A=t.offset-A)>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=30;break}T=A>t.wnext?(A-=t.wnext,t.wsize-A):t.wnext-A,A>t.length&&(A=t.length),E=t.window}else E=h,T=y-t.offset,A=t.length;for(b<A&&(A=b),b-=A,t.length-=A;h[y++]=E[T++],--A;);0===t.length&&(t.mode=21);break;case 26:if(0===b)break e;h[y++]=t.length,b--,t.mode=21;break;case 27:if(t.wrap){for(;S<32;){if(0===v)break e;v--,w|=f[g++]<<S,S+=8}if(k-=b,e.total_out+=k,t.total+=k,k&&(e.adler=t.check=t.flags?i(t.check,h,k,y-k):a(t.check,h,k,y-k)),k=b,(t.flags?w:m(w))!==t.check){e.msg="incorrect data check",t.mode=30;break}S=w=0}t.mode=28;case 28:if(t.wrap&&t.flags){for(;S<32;){if(0===v)break e;v--,w+=f[g++]<<S,S+=8}if(w!==(4294967295&t.total)){e.msg="incorrect length check",t.mode=30;break}S=w=0}t.mode=29;case 29:L=1;break e;case 30:L=-3;break e;case 31:return-4;default:return d}return e.next_out=y,e.avail_out=b,e.next_in=g,e.avail_in=v,t.hold=w,t.bits=S,(t.wsize||k!==e.avail_out&&t.mode<30&&(t.mode<27||4!==n))&&_(e,e.output,e.next_out,k-e.avail_out)?(t.mode=31,-4):(x-=e.avail_in,k-=e.avail_out,e.total_in+=x,e.total_out+=k,t.total+=k,t.wrap&&k&&(e.adler=t.check=t.flags?i(t.check,h,k,e.next_out-k):a(t.check,h,k,e.next_out-k)),e.data_type=t.bits+(t.last?64:0)+(12===t.mode?128:0)+(20===t.mode||15===t.mode?256:0),(0==x&&0===k||4===n)&&L===u&&(L=-5),L)},t.inflateEnd=function(e){if(!e||!e.state)return d;var n=e.state;return n.window&&(n.window=null),e.state=null,u},t.inflateGetHeader=function(e,n){var t;return e&&e.state?0==(2&(t=e.state).wrap)?d:((t.head=n).done=!1,u):d},t.inflateSetDictionary=function(e,n){var t,r=n.length;return e&&e.state?0!==(t=e.state).wrap&&11!==t.mode?d:11===t.mode&&a(1,n,r,0)!==t.check?-3:_(e,n,r,r)?(t.mode=31,-4):(t.havedict=1,u):d},t.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,n,t){"use strict";var r=e("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(e,n,t,l,c,u,d,p){var f,h,m,g,y,v,b,w,S,x=p.bits,k=0,I=0,_=0,A=0,T=0,E=0,O=0,C=0,N=0,M=0,P=null,F=0,R=new r.Buf16(16),L=new r.Buf16(16),D=null,j=0;for(k=0;k<=15;k++)R[k]=0;for(I=0;I<l;I++)R[n[t+I]]++;for(T=x,A=15;1<=A&&0===R[A];A--);if(A<T&&(T=A),0===A)return c[u++]=20971520,c[u++]=20971520,p.bits=1,0;for(_=1;_<A&&0===R[_];_++);for(T<_&&(T=_),k=C=1;k<=15;k++)if(C<<=1,(C-=R[k])<0)return-1;if(0<C&&(0===e||1!==A))return-1;for(L[1]=0,k=1;k<15;k++)L[k+1]=L[k]+R[k];for(I=0;I<l;I++)0!==n[t+I]&&(d[L[n[t+I]]++]=I);if(v=0===e?(P=D=d,19):1===e?(P=a,F-=257,D=i,j-=257,256):(P=o,D=s,-1),k=_,y=u,O=I=M=0,m=-1,g=(N=1<<(E=T))-1,1===e&&852<N||2===e&&592<N)return 1;for(;;){for(b=k-O,S=d[I]<v?(w=0,d[I]):d[I]>v?(w=D[j+d[I]],P[F+d[I]]):(w=96,0),f=1<<k-O,_=h=1<<E;c[y+(M>>O)+(h-=f)]=b<<24|w<<16|S,0!==h;);for(f=1<<k-1;M&f;)f>>=1;if(0!==f?(M&=f-1,M+=f):M=0,I++,0==--R[k]){if(k===A)break;k=n[t+d[I]]}if(T<k&&(M&g)!==m){for(0===O&&(O=T),y+=_,C=1<<(E=k-O);E+O<A&&!((C-=R[E+O])<=0);)E++,C<<=1;if(N+=1<<E,1===e&&852<N||2===e&&592<N)return 1;c[m=M&g]=T<<24|E<<16|y-u}}return 0!==M&&(c[y+M]=k-O<<24|64<<16),p.bits=T,0}},{"../utils/common":41}],51:[function(e,n,t){"use strict";n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,n,t){"use strict";var r=e("../utils/common"),a=0,i=1;function o(e){for(var n=e.length;0<=--n;)e[n]=0}var s=0,l=29,c=256,u=c+1+l,d=30,p=19,f=2*u+1,h=15,m=16,g=7,y=256,v=16,b=17,w=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],_=new Array(2*(u+2));o(_);var A=new Array(2*d);o(A);var T=new Array(512);o(T);var E=new Array(256);o(E);var O=new Array(l);o(O);var C,N,M,P=new Array(d);function F(e,n,t,r,a){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function R(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}function L(e){return e<256?T[e]:T[256+(e>>>7)]}function D(e,n){e.pending_buf[e.pending++]=255&n,e.pending_buf[e.pending++]=n>>>8&255}function j(e,n,t){e.bi_valid>m-t?(e.bi_buf|=n<<e.bi_valid&65535,D(e,e.bi_buf),e.bi_buf=n>>m-e.bi_valid,e.bi_valid+=t-m):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)}function z(e,n,t){j(e,t[2*n],t[2*n+1])}function B(e,n){for(var t=0;t|=1&e,e>>>=1,t<<=1,0<--n;);return t>>>1}function U(e,n,t){var r,a,i=new Array(h+1),o=0;for(r=1;r<=h;r++)i[r]=o=o+t[r-1]<<1;for(a=0;a<=n;a++){var s=e[2*a+1];0!==s&&(e[2*a]=B(i[s]++,s))}}function W(e){var n;for(n=0;n<u;n++)e.dyn_ltree[2*n]=0;for(n=0;n<d;n++)e.dyn_dtree[2*n]=0;for(n=0;n<p;n++)e.bl_tree[2*n]=0;e.dyn_ltree[2*y]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function $(e){8<e.bi_valid?D(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function V(e,n,t,r){var a=2*n,i=2*t;return e[a]<e[i]||e[a]===e[i]&&r[n]<=r[t]}function G(e,n,t){for(var r=e.heap[t],a=t<<1;a<=e.heap_len&&(a<e.heap_len&&V(n,e.heap[a+1],e.heap[a],e.depth)&&a++,!V(n,r,e.heap[a],e.depth));)e.heap[t]=e.heap[a],t=a,a<<=1;e.heap[t]=r}function H(e,n,t){var r,a,i,o,s=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],a=e.pending_buf[e.l_buf+s],s++,0===r?z(e,a,n):(z(e,(i=E[a])+c+1,n),0!==(o=S[i])&&j(e,a-=O[i],o),z(e,i=L(--r),t),0!==(o=x[i])&&j(e,r-=P[i],o)),s<e.last_lit;);z(e,y,n)}function q(e,n){var t,r,a,i=n.dyn_tree,o=n.stat_desc.static_tree,s=n.stat_desc.has_stree,l=n.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=f,t=0;t<l;t++)0!==i[2*t]?(e.heap[++e.heap_len]=c=t,e.depth[t]=0):i[2*t+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[a]=0,e.opt_len--,s&&(e.static_len-=o[2*a+1]);for(n.max_code=c,t=e.heap_len>>1;1<=t;t--)G(e,i,t);for(a=l;t=e.heap[1],e.heap[1]=e.heap[e.heap_len--],G(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=t,e.heap[--e.heap_max]=r,i[2*a]=i[2*t]+i[2*r],e.depth[a]=(e.depth[t]>=e.depth[r]?e.depth[t]:e.depth[r])+1,i[2*t+1]=i[2*r+1]=a,e.heap[1]=a++,G(e,i,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,n){var t,r,a,i,o,s,l=n.dyn_tree,c=n.max_code,u=n.stat_desc.static_tree,d=n.stat_desc.has_stree,p=n.stat_desc.extra_bits,m=n.stat_desc.extra_base,g=n.stat_desc.max_length,y=0;for(i=0;i<=h;i++)e.bl_count[i]=0;for(l[2*e.heap[e.heap_max]+1]=0,t=e.heap_max+1;t<f;t++)g<(i=l[2*l[2*(r=e.heap[t])+1]+1]+1)&&(i=g,y++),l[2*r+1]=i,c<r||(e.bl_count[i]++,o=0,m<=r&&(o=p[r-m]),s=l[2*r],e.opt_len+=s*(i+o),d&&(e.static_len+=s*(u[2*r+1]+o)));if(0!==y){do{for(i=g-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[g]--,y-=2}while(0<y);for(i=g;0!==i;i--)for(r=e.bl_count[i];0!==r;)c<(a=e.heap[--t])||(l[2*a+1]!==i&&(e.opt_len+=(i-l[2*a+1])*l[2*a],l[2*a+1]=i),r--)}}(e,n),U(i,c,e.bl_count)}function K(e,n,t){var r,a,i=-1,o=n[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),n[2*(t+1)+1]=65535,r=0;r<=t;r++)a=o,o=n[2*(r+1)+1],++s<l&&a===o||(s<c?e.bl_tree[2*a]+=s:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[2*v]++):s<=10?e.bl_tree[2*b]++:e.bl_tree[2*w]++,i=a,c=(s=0)===o?(l=138,3):a===o?(l=6,3):(l=7,4))}function Y(e,n,t){var r,a,i=-1,o=n[1],s=0,l=7,c=4;for(0===o&&(l=138,c=3),r=0;r<=t;r++)if(a=o,o=n[2*(r+1)+1],!(++s<l&&a===o)){if(s<c)for(;z(e,a,e.bl_tree),0!=--s;);else 0!==a?(a!==i&&(z(e,a,e.bl_tree),s--),z(e,v,e.bl_tree),j(e,s-3,2)):s<=10?(z(e,b,e.bl_tree),j(e,s-3,3)):(z(e,w,e.bl_tree),j(e,s-11,7));i=a,c=(s=0)===o?(l=138,3):a===o?(l=6,3):(l=7,4)}}o(P);var X=!1;function J(e,n,t,a){j(e,(s<<1)+(a?1:0),3),function(e,n,t,a){$(e),a&&(D(e,t),D(e,~t)),r.arraySet(e.pending_buf,e.window,n,t,e.pending),e.pending+=t}(e,n,t,!0)}t._tr_init=function(e){X||(function(){var e,n,t,r,a,i=new Array(h+1);for(r=t=0;r<l-1;r++)for(O[r]=t,e=0;e<1<<S[r];e++)E[t++]=r;for(E[t-1]=r,r=a=0;r<16;r++)for(P[r]=a,e=0;e<1<<x[r];e++)T[a++]=r;for(a>>=7;r<d;r++)for(P[r]=a<<7,e=0;e<1<<x[r]-7;e++)T[256+a++]=r;for(n=0;n<=h;n++)i[n]=0;for(e=0;e<=143;)_[2*e+1]=8,e++,i[8]++;for(;e<=255;)_[2*e+1]=9,e++,i[9]++;for(;e<=279;)_[2*e+1]=7,e++,i[7]++;for(;e<=287;)_[2*e+1]=8,e++,i[8]++;for(U(_,u+1,i),e=0;e<d;e++)A[2*e+1]=5,A[2*e]=B(e,5);C=new F(_,S,c+1,u,h),N=new F(A,x,0,d,h),M=new F(new Array(0),k,0,p,g)}(),X=!0),e.l_desc=new R(e.dyn_ltree,C),e.d_desc=new R(e.dyn_dtree,N),e.bl_desc=new R(e.bl_tree,M),e.bi_buf=0,e.bi_valid=0,W(e)},t._tr_stored_block=J,t._tr_flush_block=function(e,n,t,r){var o,s,l=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var n,t=4093624447;for(n=0;n<=31;n++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*n])return a;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return i;for(n=32;n<c;n++)if(0!==e.dyn_ltree[2*n])return i;return a}(e)),q(e,e.l_desc),q(e,e.d_desc),l=function(e){var n;for(K(e,e.dyn_ltree,e.l_desc.max_code),K(e,e.dyn_dtree,e.d_desc.max_code),q(e,e.bl_desc),n=p-1;3<=n&&0===e.bl_tree[2*I[n]+1];n--);return e.opt_len+=3*(n+1)+5+5+4,n}(e),o=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=o&&(o=s)):o=s=t+5,t+4<=o&&-1!==n?J(e,n,t,r):4===e.strategy||s===o?(j(e,2+(r?1:0),3),H(e,_,A)):(j(e,4+(r?1:0),3),function(e,n,t,r){var a;for(j(e,n-257,5),j(e,t-1,5),j(e,r-4,4),a=0;a<r;a++)j(e,e.bl_tree[2*I[a]+1],3);Y(e,e.dyn_ltree,n-1),Y(e,e.dyn_dtree,t-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),H(e,e.dyn_ltree,e.dyn_dtree)),W(e),r&&$(e)},t._tr_tally=function(e,n,t){return e.pending_buf[e.d_buf+2*e.last_lit]=n>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&n,e.pending_buf[e.l_buf+e.last_lit]=255&t,e.last_lit++,0===n?e.dyn_ltree[2*t]++:(e.matches++,n--,e.dyn_ltree[2*(E[t]+c+1)]++,e.dyn_dtree[2*L(n)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){j(e,2,3),z(e,y,_),function(e){16===e.bi_valid?(D(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,n,t){"use strict";n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,n,r){(function(e){!function(e,n){"use strict";if(!e.setImmediate){var t,r,a,i,o=1,s={},l=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,t="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){p(e)}))}:function(){if(e.postMessage&&!e.importScripts){var n=!0,t=e.onmessage;return e.onmessage=function(){n=!1},e.postMessage("","*"),e.onmessage=t,n}}()?(i="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",f,!1):e.attachEvent("onmessage",f),function(n){e.postMessage(i+n,"*")}):e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},function(e){a.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(r=c.documentElement,function(e){var n=c.createElement("script");n.onreadystatechange=function(){p(e),n.onreadystatechange=null,r.removeChild(n),n=null},r.appendChild(n)}):function(e){setTimeout(p,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var n=new Array(arguments.length-1),r=0;r<n.length;r++)n[r]=arguments[r+1];var a={callback:e,args:n};return s[o]=a,t(o),o++},u.clearImmediate=d}function d(e){delete s[e]}function p(e){if(l)setTimeout(p,0,e);else{var t=s[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{d(e),l=!1}}}}function f(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(i)&&p(+n.data.slice(i.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,"undefined"!=typeof t.g?t.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},497:(e,n,t)=>{"use strict";var r=t(218);function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,n,t,a,i,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function n(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:i,resetWarningCache:a};return t.PropTypes=t,t}},173:(e,n,t)=>{e.exports=t(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,n,t)=>{"use strict";var r=t(43),a=t(853);function i(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,n){c(e,n),c(e+"Capture",n)}function c(e,n){for(s[e]=n,e=0;e<n.length;e++)o.add(n[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},h={};function m(e,n,t,r,a,i,o){this.acceptsBooleans=2===n||3===n||4===n,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=i,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var n=e[0];g[n]=new m(n,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,n,t,r){var a=g.hasOwnProperty(n)?g[n]:null;(null!==a?0!==a.type:r||!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&(function(e,n,t,r){if(null===n||"undefined"===typeof n||function(e,n,t,r){if(null!==t&&0===t.type)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==t?!t.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,n,t,r))return!0;if(r)return!1;if(null!==t)switch(t.type){case 3:return!n;case 4:return!1===n;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}(n,t,a,r)&&(t=null),r||null===a?function(e){return!!d.call(h,e)||!d.call(f,e)&&(p.test(e)?h[e]=!0:(f[e]=!0,!1))}(n)&&(null===t?e.removeAttribute(n):e.setAttribute(n,""+t)):a.mustUseProperty?e[a.propertyName]=null===t?3!==a.type&&"":t:(n=a.attributeName,r=a.attributeNamespace,null===t?e.removeAttribute(n):(t=3===(a=a.type)||4===a&&!0===t?"":""+t,r?e.setAttributeNS(r,n,t):e.setAttribute(n,t))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var n=e.replace(y,v);g[n]=new m(n,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var n=e.replace(y,v);g[n]=new m(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var n=e.replace(y,v);g[n]=new m(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),T=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var F=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=F&&e[F]||e["@@iterator"])?e:null}var L,D=Object.assign;function j(e){if(void 0===L)try{throw Error()}catch(t){var n=t.stack.trim().match(/\n( *(at )?)/);L=n&&n[1]||""}return"\n"+L+e}var z=!1;function B(e,n){if(!e||z)return"";z=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(c){var r=c}Reflect.construct(e,[],n)}else{try{n.call()}catch(c){r=c}e.call(n.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),i=r.stack.split("\n"),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(1!==o||1!==s)do{if(o--,0>--s||a[o]!==i[s]){var l="\n"+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?j(e):""}function U(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case x:return"Portal";case _:return"Profiler";case I:return"StrictMode";case O:return"Suspense";case C:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case E:var n=e.render;return(e=e.displayName)||(e=""!==(e=n.displayName||n.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(n=e.displayName||null)?n:W(e.type)||"Memo";case M:n=e._payload,e=e._init;try{return W(e(n))}catch(t){}}return null}function $(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=n.render).displayName||e.name||"",n.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(n);case 8:return n===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof n)return n.displayName||n.name||null;if("string"===typeof n)return n}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var n=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===n||"radio"===n)}function H(e){e._valueTracker||(e._valueTracker=function(e){var n=G(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),r=""+e[n];if(!e.hasOwnProperty(n)&&"undefined"!==typeof t&&"function"===typeof t.get&&"function"===typeof t.set){var a=t.get,i=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}(e))}function q(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==t&&(n.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(n){return e.body}}function Y(e,n){var t=n.checked;return D({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=t?t:e._wrapperState.initialChecked})}function X(e,n){var t=null==n.defaultValue?"":n.defaultValue,r=null!=n.checked?n.checked:n.defaultChecked;t=V(null!=n.value?n.value:t),e._wrapperState={initialChecked:r,initialValue:t,controlled:"checkbox"===n.type||"radio"===n.type?null!=n.checked:null!=n.value}}function J(e,n){null!=(n=n.checked)&&b(e,"checked",n,!1)}function Z(e,n){J(e,n);var t=V(n.value),r=n.type;if(null!=t)"number"===r?(0===t&&""===e.value||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");n.hasOwnProperty("value")?ee(e,n.type,t):n.hasOwnProperty("defaultValue")&&ee(e,n.type,V(n.defaultValue)),null==n.checked&&null!=n.defaultChecked&&(e.defaultChecked=!!n.defaultChecked)}function Q(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var r=n.type;if(!("submit"!==r&&"reset"!==r||void 0!==n.value&&null!==n.value))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==t&&(e.name=t)}function ee(e,n,t){"number"===n&&K(e.ownerDocument)===e||(null==t?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var ne=Array.isArray;function te(e,n,t,r){if(e=e.options,n){n={};for(var a=0;a<t.length;a++)n["$"+t[a]]=!0;for(t=0;t<e.length;t++)a=n.hasOwnProperty("$"+e[t].value),e[t].selected!==a&&(e[t].selected=a),a&&r&&(e[t].defaultSelected=!0)}else{for(t=""+V(t),n=null,a=0;a<e.length;a++){if(e[a].value===t)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==n||e[a].disabled||(n=e[a])}null!==n&&(n.selected=!0)}}function re(e,n){if(null!=n.dangerouslySetInnerHTML)throw Error(i(91));return D({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,n){var t=n.value;if(null==t){if(t=n.children,n=n.defaultValue,null!=t){if(null!=n)throw Error(i(92));if(ne(t)){if(1<t.length)throw Error(i(93));t=t[0]}n=t}null==n&&(n=""),t=n}e._wrapperState={initialValue:V(t)}}function ie(e,n){var t=V(n.value),r=V(n.defaultValue);null!=t&&((t=""+t)!==e.value&&(e.value=t),null==n.defaultValue&&e.defaultValue!==t&&(e.defaultValue=t)),null!=r&&(e.defaultValue=""+r)}function oe(e){var n=e.textContent;n===e._wrapperState.initialValue&&""!==n&&null!==n&&(e.value=n)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,n){return null==e||"http://www.w3.org/1999/xhtml"===e?se(n):"http://www.w3.org/2000/svg"===e&&"foreignObject"===n?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,n){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=n;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,t,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,n)}))}:ue);function pe(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&3===t.nodeType)return void(t.nodeValue=n)}e.textContent=n}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function me(e,n,t){return null==n||"boolean"===typeof n||""===n?"":t||"number"!==typeof n||0===n||fe.hasOwnProperty(e)&&fe[e]?(""+n).trim():n+"px"}function ge(e,n){for(var t in e=e.style,n)if(n.hasOwnProperty(t)){var r=0===t.indexOf("--"),a=me(t,n[t],r);"float"===t&&(t="cssFloat"),r?e.setProperty(t,a):e[t]=a}}Object.keys(fe).forEach((function(e){he.forEach((function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),fe[n]=fe[e]}))}));var ye=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,n){if(n){if(ye[e]&&(null!=n.children||null!=n.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=n.dangerouslySetInnerHTML){if(null!=n.children)throw Error(i(60));if("object"!==typeof n.dangerouslySetInnerHTML||!("__html"in n.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=n.style&&"object"!==typeof n.style)throw Error(i(62))}}function be(e,n){if(-1===e.indexOf("-"))return"string"===typeof n.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,ke=null,Ie=null;function _e(e){if(e=ba(e)){if("function"!==typeof xe)throw Error(i(280));var n=e.stateNode;n&&(n=Sa(n),xe(e.stateNode,e.type,n))}}function Ae(e){ke?Ie?Ie.push(e):Ie=[e]:ke=e}function Te(){if(ke){var e=ke,n=Ie;if(Ie=ke=null,_e(e),n)for(e=0;e<n.length;e++)_e(n[e])}}function Ee(e,n){return e(n)}function Oe(){}var Ce=!1;function Ne(e,n,t){if(Ce)return e(n,t);Ce=!0;try{return Ee(e,n,t)}finally{Ce=!1,(null!==ke||null!==Ie)&&(Oe(),Te())}}function Me(e,n){var t=e.stateNode;if(null===t)return null;var r=Sa(t);if(null===r)return null;t=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(t&&"function"!==typeof t)throw Error(i(231,n,typeof t));return t}var Pe=!1;if(u)try{var Fe={};Object.defineProperty(Fe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Fe,Fe),window.removeEventListener("test",Fe,Fe)}catch(ue){Pe=!1}function Re(e,n,t,r,a,i,o,s,l){var c=Array.prototype.slice.call(arguments,3);try{n.apply(t,c)}catch(u){this.onError(u)}}var Le=!1,De=null,je=!1,ze=null,Be={onError:function(e){Le=!0,De=e}};function Ue(e,n,t,r,a,i,o,s,l){Le=!1,De=null,Re.apply(Be,arguments)}function We(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do{0!==(4098&(n=e).flags)&&(t=n.return),e=n.return}while(e)}return 3===n.tag?t:null}function $e(e){if(13===e.tag){var n=e.memoizedState;if(null===n&&(null!==(e=e.alternate)&&(n=e.memoizedState)),null!==n)return n.dehydrated}return null}function Ve(e){if(We(e)!==e)throw Error(i(188))}function Ge(e){return null!==(e=function(e){var n=e.alternate;if(!n){if(null===(n=We(e)))throw Error(i(188));return n!==e?null:e}for(var t=e,r=n;;){var a=t.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){t=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===t)return Ve(a),e;if(o===r)return Ve(a),n;o=o.sibling}throw Error(i(188))}if(t.return!==r.return)t=a,r=o;else{for(var s=!1,l=a.child;l;){if(l===t){s=!0,t=a,r=o;break}if(l===r){s=!0,r=a,t=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===t){s=!0,t=o,r=a;break}if(l===r){s=!0,r=o,t=a;break}l=l.sibling}if(!s)throw Error(i(189))}}if(t.alternate!==r)throw Error(i(190))}if(3!==t.tag)throw Error(i(188));return t.stateNode.current===t?e:n}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var n=He(e);if(null!==n)return n;e=e.sibling}return null}var qe=a.unstable_scheduleCallback,Ke=a.unstable_cancelCallback,Ye=a.unstable_shouldYield,Xe=a.unstable_requestPaint,Je=a.unstable_now,Ze=a.unstable_getCurrentPriorityLevel,Qe=a.unstable_ImmediatePriority,en=a.unstable_UserBlockingPriority,nn=a.unstable_NormalPriority,tn=a.unstable_LowPriority,rn=a.unstable_IdlePriority,an=null,on=null;var sn=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ln(e)/cn|0)|0},ln=Math.log,cn=Math.LN2;var un=64,dn=4194304;function pn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fn(e,n){var t=e.pendingLanes;if(0===t)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=268435455&t;if(0!==o){var s=o&~a;0!==s?r=pn(s):0!==(i&=o)&&(r=pn(i))}else 0!==(o=t&~a)?r=pn(o):0!==i&&(r=pn(i));if(0===r)return 0;if(0!==n&&n!==r&&0===(n&a)&&((a=r&-r)>=(i=n&-n)||16===a&&0!==(4194240&i)))return n;if(0!==(4&r)&&(r|=16&t),0!==(n=e.entangledLanes))for(e=e.entanglements,n&=r;0<n;)a=1<<(t=31-sn(n)),r|=e[t],n&=~a;return r}function hn(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;default:return-1}}function mn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gn(){var e=un;return 0===(4194240&(un<<=1))&&(un=64),e}function yn(e){for(var n=[],t=0;31>t;t++)n.push(e);return n}function vn(e,n,t){e.pendingLanes|=n,536870912!==n&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[n=31-sn(n)]=t}function bn(e,n){var t=e.entangledLanes|=n;for(e=e.entanglements;t;){var r=31-sn(t),a=1<<r;a&n|e[r]&n&&(e[r]|=n),t&=~a}}var wn=0;function Sn(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xn,kn,In,_n,An,Tn=!1,En=[],On=null,Cn=null,Nn=null,Mn=new Map,Pn=new Map,Fn=[],Rn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ln(e,n){switch(e){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":Nn=null;break;case"pointerover":case"pointerout":Mn.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pn.delete(n.pointerId)}}function Dn(e,n,t,r,a,i){return null===e||e.nativeEvent!==i?(e={blockedOn:n,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},null!==n&&(null!==(n=ba(n))&&kn(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,null!==a&&-1===n.indexOf(a)&&n.push(a),e)}function jn(e){var n=va(e.target);if(null!==n){var t=We(n);if(null!==t)if(13===(n=t.tag)){if(null!==(n=$e(t)))return e.blockedOn=n,void An(e.priority,(function(){In(t)}))}else if(3===n&&t.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===t.tag?t.stateNode.containerInfo:null)}e.blockedOn=null}function zn(e){if(null!==e.blockedOn)return!1;for(var n=e.targetContainers;0<n.length;){var t=Xn(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(null!==t)return null!==(n=ba(t))&&kn(n),e.blockedOn=t,!1;var r=new(t=e.nativeEvent).constructor(t.type,t);we=r,t.target.dispatchEvent(r),we=null,n.shift()}return!0}function Bn(e,n,t){zn(e)&&t.delete(n)}function Un(){Tn=!1,null!==On&&zn(On)&&(On=null),null!==Cn&&zn(Cn)&&(Cn=null),null!==Nn&&zn(Nn)&&(Nn=null),Mn.forEach(Bn),Pn.forEach(Bn)}function Wn(e,n){e.blockedOn===n&&(e.blockedOn=null,Tn||(Tn=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Un)))}function $n(e){function n(n){return Wn(n,e)}if(0<En.length){Wn(En[0],e);for(var t=1;t<En.length;t++){var r=En[t];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==On&&Wn(On,e),null!==Cn&&Wn(Cn,e),null!==Nn&&Wn(Nn,e),Mn.forEach(n),Pn.forEach(n),t=0;t<Fn.length;t++)(r=Fn[t]).blockedOn===e&&(r.blockedOn=null);for(;0<Fn.length&&null===(t=Fn[0]).blockedOn;)jn(t),null===t.blockedOn&&Fn.shift()}var Vn=w.ReactCurrentBatchConfig,Gn=!0;function Hn(e,n,t,r){var a=wn,i=Vn.transition;Vn.transition=null;try{wn=1,Kn(e,n,t,r)}finally{wn=a,Vn.transition=i}}function qn(e,n,t,r){var a=wn,i=Vn.transition;Vn.transition=null;try{wn=4,Kn(e,n,t,r)}finally{wn=a,Vn.transition=i}}function Kn(e,n,t,r){if(Gn){var a=Xn(e,n,t,r);if(null===a)Vr(e,n,r,Yn,t),Ln(e,r);else if(function(e,n,t,r,a){switch(n){case"focusin":return On=Dn(On,e,n,t,r,a),!0;case"dragenter":return Cn=Dn(Cn,e,n,t,r,a),!0;case"mouseover":return Nn=Dn(Nn,e,n,t,r,a),!0;case"pointerover":var i=a.pointerId;return Mn.set(i,Dn(Mn.get(i)||null,e,n,t,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Pn.set(i,Dn(Pn.get(i)||null,e,n,t,r,a)),!0}return!1}(a,e,n,t,r))r.stopPropagation();else if(Ln(e,r),4&n&&-1<Rn.indexOf(e)){for(;null!==a;){var i=ba(a);if(null!==i&&xn(i),null===(i=Xn(e,n,t,r))&&Vr(e,n,r,Yn,t),i===a)break;a=i}null!==a&&r.stopPropagation()}else Vr(e,n,r,null,t)}}var Yn=null;function Xn(e,n,t,r){if(Yn=null,null!==(e=va(e=Se(r))))if(null===(n=We(e)))e=null;else if(13===(t=n.tag)){if(null!==(e=$e(n)))return e;e=null}else if(3===t){if(n.stateNode.current.memoizedState.isDehydrated)return 3===n.tag?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Yn=e,null}function Jn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Qe:return 1;case en:return 4;case nn:case tn:return 16;case rn:return 536870912;default:return 16}default:return 16}}var Zn=null,Qn=null,et=null;function nt(){if(et)return et;var e,n,t=Qn,r=t.length,a="value"in Zn?Zn.value:Zn.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return et=a.slice(e,1<n?1-n:void 0)}function tt(e){var n=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===n&&(e=13):e=n,10===e&&(e=13),32<=e||13===e?e:0}function rt(){return!0}function at(){return!1}function it(e){function n(n,t,r,a,i){for(var o in this._reactName=n,this._targetInst=r,this.type=t,this.nativeEvent=a,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rt:at,this.isPropagationStopped=at,this}return D(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rt)},persist:function(){},isPersistent:rt}),n}var ot,st,lt,ct={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ut=it(ct),dt=D({},ct,{view:0,detail:0}),pt=it(dt),ft=D({},dt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_t,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lt&&(lt&&"mousemove"===e.type?(ot=e.screenX-lt.screenX,st=e.screenY-lt.screenY):st=ot=0,lt=e),ot)},movementY:function(e){return"movementY"in e?e.movementY:st}}),ht=it(ft),mt=it(D({},ft,{dataTransfer:0})),gt=it(D({},dt,{relatedTarget:0})),yt=it(D({},ct,{animationName:0,elapsedTime:0,pseudoElement:0})),vt=D({},ct,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bt=it(vt),wt=it(D({},ct,{data:0})),St={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function It(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):!!(e=kt[e])&&!!n[e]}function _t(){return It}var At=D({},dt,{key:function(e){if(e.key){var n=St[e.key]||e.key;if("Unidentified"!==n)return n}return"keypress"===e.type?13===(e=tt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_t,charCode:function(e){return"keypress"===e.type?tt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tt=it(At),Et=it(D({},ft,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ot=it(D({},dt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_t})),Ct=it(D({},ct,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nt=D({},ft,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mt=it(Nt),Pt=[9,13,27,32],Ft=u&&"CompositionEvent"in window,Rt=null;u&&"documentMode"in document&&(Rt=document.documentMode);var Lt=u&&"TextEvent"in window&&!Rt,Dt=u&&(!Ft||Rt&&8<Rt&&11>=Rt),jt=String.fromCharCode(32),zt=!1;function Bt(e,n){switch(e){case"keyup":return-1!==Pt.indexOf(n.keyCode);case"keydown":return 229!==n.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ut(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wt=!1;var $t={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vt(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===n?!!$t[e.type]:"textarea"===n}function Gt(e,n,t,r){Ae(r),0<(n=Hr(n,"onChange")).length&&(t=new ut("onChange","change",null,t,r),e.push({event:t,listeners:n}))}var Ht=null,qt=null;function Kt(e){jr(e,0)}function Yt(e){if(q(wa(e)))return e}function Xt(e,n){if("change"===e)return n}var Jt=!1;if(u){var Zt;if(u){var Qt="oninput"in document;if(!Qt){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qt="function"===typeof er.oninput}Zt=Qt}else Zt=!1;Jt=Zt&&(!document.documentMode||9<document.documentMode)}function nr(){Ht&&(Ht.detachEvent("onpropertychange",tr),qt=Ht=null)}function tr(e){if("value"===e.propertyName&&Yt(qt)){var n=[];Gt(n,qt,e,Se(e)),Ne(Kt,n)}}function rr(e,n,t){"focusin"===e?(nr(),qt=t,(Ht=n).attachEvent("onpropertychange",tr)):"focusout"===e&&nr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yt(qt)}function ir(e,n){if("click"===e)return Yt(n)}function or(e,n){if("input"===e||"change"===e)return Yt(n)}var sr="function"===typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e===1/n)||e!==e&&n!==n};function lr(e,n){if(sr(e,n))return!0;if("object"!==typeof e||null===e||"object"!==typeof n||null===n)return!1;var t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var a=t[r];if(!d.call(n,a)||!sr(e[a],n[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,n){var t,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(t=e+r.textContent.length,e<=n&&t>=n)return{node:r,offset:n-e};e=t}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?dr(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}function pr(){for(var e=window,n=K();n instanceof e.HTMLIFrameElement;){try{var t="string"===typeof n.contentWindow.location.href}catch(r){t=!1}if(!t)break;n=K((e=n.contentWindow).document)}return n}function fr(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&("input"===n&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===n||"true"===e.contentEditable)}function hr(e){var n=pr(),t=e.focusedElem,r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&dr(t.ownerDocument.documentElement,t)){if(null!==r&&fr(t))if(n=r.start,void 0===(e=r.end)&&(e=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(e,t.value.length);else if((e=(n=t.ownerDocument||document)&&n.defaultView||window).getSelection){e=e.getSelection();var a=t.textContent.length,i=Math.min(r.start,a);r=void 0===r.end?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=ur(t,i);var o=ur(t,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((n=n.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(n),e.extend(o.node,o.offset)):(n.setEnd(o.node,o.offset),e.addRange(n)))}for(n=[],e=t;e=e.parentNode;)1===e.nodeType&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<n.length;t++)(e=n[t]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function wr(e,n,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;br||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Hr(yr,"onSelect")).length&&(n=new ut("onSelect","select",null,n,t),e.push({event:n,listeners:r}),n.target=gr)))}function Sr(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var xr={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionend:Sr("Transition","TransitionEnd")},kr={},Ir={};function _r(e){if(kr[e])return kr[e];if(!xr[e])return e;var n,t=xr[e];for(n in t)if(t.hasOwnProperty(n)&&n in Ir)return kr[e]=t[n];return e}u&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Ar=_r("animationend"),Tr=_r("animationiteration"),Er=_r("animationstart"),Or=_r("transitionend"),Cr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,n){Cr.set(e,n),l(n,[e])}for(var Pr=0;Pr<Nr.length;Pr++){var Fr=Nr[Pr];Mr(Fr.toLowerCase(),"on"+(Fr[0].toUpperCase()+Fr.slice(1)))}Mr(Ar,"onAnimationEnd"),Mr(Tr,"onAnimationIteration"),Mr(Er,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Or,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Dr(e,n,t){var r=e.type||"unknown-event";e.currentTarget=t,function(e,n,t,r,a,o,s,l,c){if(Ue.apply(this,arguments),Le){if(!Le)throw Error(i(198));var u=De;Le=!1,De=null,je||(je=!0,ze=u)}}(r,n,void 0,e),e.currentTarget=null}function jr(e,n){n=0!==(4&n);for(var t=0;t<e.length;t++){var r=e[t],a=r.event;r=r.listeners;e:{var i=void 0;if(n)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;Dr(a,s,c),i=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,c=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;Dr(a,s,c),i=l}}}if(je)throw e=ze,je=!1,ze=null,e}function zr(e,n){var t=n[ma];void 0===t&&(t=n[ma]=new Set);var r=e+"__bubble";t.has(r)||($r(n,e,2,!1),t.add(r))}function Br(e,n,t){var r=0;n&&(r|=4),$r(t,e,r,n)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Ur]){e[Ur]=!0,o.forEach((function(n){"selectionchange"!==n&&(Lr.has(n)||Br(n,!1,e),Br(n,!0,e))}));var n=9===e.nodeType?e:e.ownerDocument;null===n||n[Ur]||(n[Ur]=!0,Br("selectionchange",!1,n))}}function $r(e,n,t,r){switch(Jn(n)){case 1:var a=Hn;break;case 4:a=qn;break;default:a=Kn}t=a.bind(null,n,t,e),a=void 0,!Pe||"touchstart"!==n&&"touchmove"!==n&&"wheel"!==n||(a=!0),r?void 0!==a?e.addEventListener(n,t,{capture:!0,passive:a}):e.addEventListener(n,t,!0):void 0!==a?e.addEventListener(n,t,{passive:a}):e.addEventListener(n,t,!1)}function Vr(e,n,t,r,a){var i=r;if(0===(1&n)&&0===(2&n)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;o=o.return}for(;null!==s;){if(null===(o=va(s)))return;if(5===(l=o.tag)||6===l){r=i=o;continue e}s=s.parentNode}}r=r.return}Ne((function(){var r=i,a=Se(t),o=[];e:{var s=Cr.get(e);if(void 0!==s){var l=ut,c=e;switch(e){case"keypress":if(0===tt(t))break e;case"keydown":case"keyup":l=Tt;break;case"focusin":c="focus",l=gt;break;case"focusout":c="blur",l=gt;break;case"beforeblur":case"afterblur":l=gt;break;case"click":if(2===t.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ht;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ot;break;case Ar:case Tr:case Er:l=yt;break;case Or:l=Ct;break;case"scroll":l=pt;break;case"wheel":l=Mt;break;case"copy":case"cut":case"paste":l=bt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Et}var u=0!==(4&n),d=!u&&"scroll"===e,p=u?null!==s?s+"Capture":null:s;u=[];for(var f,h=r;null!==h;){var m=(f=h).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==p&&(null!=(m=Me(h,p))&&u.push(Gr(h,m,f)))),d)break;h=h.return}0<u.length&&(s=new l(s,c,null,t,a),o.push({event:s,listeners:u}))}}if(0===(7&n)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||t===we||!(c=t.relatedTarget||t.fromElement)||!va(c)&&!c[ha])&&(l||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=t.relatedTarget||t.toElement)?va(c):null)&&(c!==(d=We(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=ht,m="onMouseLeave",p="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(u=Et,m="onPointerLeave",p="onPointerEnter",h="pointer"),d=null==l?s:wa(l),f=null==c?s:wa(c),(s=new u(m,h+"leave",l,t,a)).target=d,s.relatedTarget=f,m=null,va(a)===r&&((u=new u(p,h+"enter",c,t,a)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(p=c,h=0,f=u=l;f;f=qr(f))h++;for(f=0,m=p;m;m=qr(m))f++;for(;0<h-f;)u=qr(u),h--;for(;0<f-h;)p=qr(p),f--;for(;h--;){if(u===p||null!==p&&u===p.alternate)break e;u=qr(u),p=qr(p)}u=null}else u=null;null!==l&&Kr(o,s,l,u,!1),null!==c&&null!==d&&Kr(o,d,c,u,!0)}if("select"===(l=(s=r?wa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Xt;else if(Vt(s))if(Jt)g=or;else{g=ar;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ir);switch(g&&(g=g(e,r))?Gt(o,g,t,a):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?wa(r):window,e){case"focusin":(Vt(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(o,t,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(o,t,a)}var v;if(Ft)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Wt?Bt(e,t)&&(b="onCompositionEnd"):"keydown"===e&&229===t.keyCode&&(b="onCompositionStart");b&&(Dt&&"ko"!==t.locale&&(Wt||"onCompositionStart"!==b?"onCompositionEnd"===b&&Wt&&(v=nt()):(Qn="value"in(Zn=a)?Zn.value:Zn.textContent,Wt=!0)),0<(y=Hr(r,b)).length&&(b=new wt(b,e,null,t,a),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=Ut(t))&&(b.data=v))),(v=Lt?function(e,n){switch(e){case"compositionend":return Ut(n);case"keypress":return 32!==n.which?null:(zt=!0,jt);case"textInput":return(e=n.data)===jt&&zt?null:e;default:return null}}(e,t):function(e,n){if(Wt)return"compositionend"===e||!Ft&&Bt(e,n)?(e=nt(),et=Qn=Zn=null,Wt=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Dt&&"ko"!==n.locale?null:n.data}}(e,t))&&(0<(r=Hr(r,"onBeforeInput")).length&&(a=new wt("onBeforeInput","beforeinput",null,t,a),o.push({event:a,listeners:r}),a.data=v))}jr(o,n)}))}function Gr(e,n,t){return{instance:e,listener:n,currentTarget:t}}function Hr(e,n){for(var t=n+"Capture",r=[];null!==e;){var a=e,i=a.stateNode;5===a.tag&&null!==i&&(a=i,null!=(i=Me(e,t))&&r.unshift(Gr(e,i,a)),null!=(i=Me(e,n))&&r.push(Gr(e,i,a))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,n,t,r,a){for(var i=n._reactName,o=[];null!==t&&t!==r;){var s=t,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,a?null!=(l=Me(t,i))&&o.unshift(Gr(t,l,s)):a||null!=(l=Me(t,i))&&o.push(Gr(t,l,s))),t=t.return}0!==o.length&&e.push({event:n,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Zr(e,n,t){if(n=Jr(n),Jr(e)!==n&&t)throw Error(i(425))}function Qr(){}var ea=null,na=null;function ta(e,n){return"textarea"===e||"noscript"===e||"string"===typeof n.children||"number"===typeof n.children||"object"===typeof n.dangerouslySetInnerHTML&&null!==n.dangerouslySetInnerHTML&&null!=n.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,ia="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ia?function(e){return ia.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function la(e,n){var t=n,r=0;do{var a=t.nextSibling;if(e.removeChild(t),a&&8===a.nodeType)if("/$"===(t=a.data)){if(0===r)return e.removeChild(a),void $n(n);r--}else"$"!==t&&"$?"!==t&&"$!"!==t||r++;t=a}while(t);$n(n)}function ca(e){for(;null!=e;e=e.nextSibling){var n=e.nodeType;if(1===n||3===n)break;if(8===n){if("$"===(n=e.data)||"$!"===n||"$?"===n)break;if("/$"===n)return null}}return e}function ua(e){e=e.previousSibling;for(var n=0;e;){if(8===e.nodeType){var t=e.data;if("$"===t||"$!"===t||"$?"===t){if(0===n)return e;n--}else"/$"===t&&n++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),pa="__reactFiber$"+da,fa="__reactProps$"+da,ha="__reactContainer$"+da,ma="__reactEvents$"+da,ga="__reactListeners$"+da,ya="__reactHandles$"+da;function va(e){var n=e[pa];if(n)return n;for(var t=e.parentNode;t;){if(n=t[ha]||t[pa]){if(t=n.alternate,null!==n.child||null!==t&&null!==t.child)for(e=ua(e);null!==e;){if(t=e[pa])return t;e=ua(e)}return n}t=(e=t).parentNode}return null}function ba(e){return!(e=e[pa]||e[ha])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function Sa(e){return e[fa]||null}var xa=[],ka=-1;function Ia(e){return{current:e}}function _a(e){0>ka||(e.current=xa[ka],xa[ka]=null,ka--)}function Aa(e,n){ka++,xa[ka]=e.current,e.current=n}var Ta={},Ea=Ia(Ta),Oa=Ia(!1),Ca=Ta;function Na(e,n){var t=e.type.contextTypes;if(!t)return Ta;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var a,i={};for(a in t)i[a]=n[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ma(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pa(){_a(Oa),_a(Ea)}function Fa(e,n,t){if(Ea.current!==Ta)throw Error(i(168));Aa(Ea,n),Aa(Oa,t)}function Ra(e,n,t){var r=e.stateNode;if(n=n.childContextTypes,"function"!==typeof r.getChildContext)return t;for(var a in r=r.getChildContext())if(!(a in n))throw Error(i(108,$(e)||"Unknown",a));return D({},t,r)}function La(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ta,Ca=Ea.current,Aa(Ea,e),Aa(Oa,Oa.current),!0}function Da(e,n,t){var r=e.stateNode;if(!r)throw Error(i(169));t?(e=Ra(e,n,Ca),r.__reactInternalMemoizedMergedChildContext=e,_a(Oa),_a(Ea),Aa(Ea,e)):_a(Oa),Aa(Oa,t)}var ja=null,za=!1,Ba=!1;function Ua(e){null===ja?ja=[e]:ja.push(e)}function Wa(){if(!Ba&&null!==ja){Ba=!0;var e=0,n=wn;try{var t=ja;for(wn=1;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}ja=null,za=!1}catch(a){throw null!==ja&&(ja=ja.slice(e+1)),qe(Qe,Wa),a}finally{wn=n,Ba=!1}}return null}var $a=[],Va=0,Ga=null,Ha=0,qa=[],Ka=0,Ya=null,Xa=1,Ja="";function Za(e,n){$a[Va++]=Ha,$a[Va++]=Ga,Ga=e,Ha=n}function Qa(e,n,t){qa[Ka++]=Xa,qa[Ka++]=Ja,qa[Ka++]=Ya,Ya=e;var r=Xa;e=Ja;var a=32-sn(r)-1;r&=~(1<<a),t+=1;var i=32-sn(n)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Xa=1<<32-sn(n)+a|t<<a|r,Ja=i+e}else Xa=1<<i|t<<a|r,Ja=e}function ei(e){null!==e.return&&(Za(e,1),Qa(e,1,0))}function ni(e){for(;e===Ga;)Ga=$a[--Va],$a[Va]=null,Ha=$a[--Va],$a[Va]=null;for(;e===Ya;)Ya=qa[--Ka],qa[Ka]=null,Ja=qa[--Ka],qa[Ka]=null,Xa=qa[--Ka],qa[Ka]=null}var ti=null,ri=null,ai=!1,ii=null;function oi(e,n){var t=Nc(5,null,null,0);t.elementType="DELETED",t.stateNode=n,t.return=e,null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)}function si(e,n){switch(e.tag){case 5:var t=e.type;return null!==(n=1!==n.nodeType||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n)&&(e.stateNode=n,ti=e,ri=ca(n.firstChild),!0);case 6:return null!==(n=""===e.pendingProps||3!==n.nodeType?null:n)&&(e.stateNode=n,ti=e,ri=null,!0);case 13:return null!==(n=8!==n.nodeType?null:n)&&(t=null!==Ya?{id:Xa,overflow:Ja}:null,e.memoizedState={dehydrated:n,treeContext:t,retryLane:1073741824},(t=Nc(18,null,null,0)).stateNode=n,t.return=e,e.child=t,ti=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(ai){var n=ri;if(n){var t=n;if(!si(e,n)){if(li(e))throw Error(i(418));n=ca(t.nextSibling);var r=ti;n&&si(e,n)?oi(r,t):(e.flags=-4097&e.flags|2,ai=!1,ti=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ai=!1,ti=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ti=e}function di(e){if(e!==ti)return!1;if(!ai)return ui(e),ai=!0,!1;var n;if((n=3!==e.tag)&&!(n=5!==e.tag)&&(n="head"!==(n=e.type)&&"body"!==n&&!ta(e.type,e.memoizedProps)),n&&(n=ri)){if(li(e))throw pi(),Error(i(418));for(;n;)oi(e,n),n=ca(n.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType){var t=e.data;if("/$"===t){if(0===n){ri=ca(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++}e=e.nextSibling}ri=null}}else ri=ti?ca(e.stateNode.nextSibling):null;return!0}function pi(){for(var e=ri;e;)e=ca(e.nextSibling)}function fi(){ri=ti=null,ai=!1}function hi(e){null===ii?ii=[e]:ii.push(e)}var mi=w.ReactCurrentBatchConfig;function gi(e,n,t){if(null!==(e=t.ref)&&"function"!==typeof e&&"object"!==typeof e){if(t._owner){if(t=t._owner){if(1!==t.tag)throw Error(i(309));var r=t.stateNode}if(!r)throw Error(i(147,e));var a=r,o=""+e;return null!==n&&null!==n.ref&&"function"===typeof n.ref&&n.ref._stringRef===o?n.ref:(n=function(e){var n=a.refs;null===e?delete n[o]:n[o]=e},n._stringRef=o,n)}if("string"!==typeof e)throw Error(i(284));if(!t._owner)throw Error(i(290,e))}return e}function yi(e,n){throw e=Object.prototype.toString.call(n),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function bi(e){function n(n,t){if(e){var r=n.deletions;null===r?(n.deletions=[t],n.flags|=16):r.push(t)}}function t(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function r(e,n){for(e=new Map;null!==n;)null!==n.key?e.set(n.key,n):e.set(n.index,n),n=n.sibling;return e}function a(e,n){return(e=Pc(e,n)).index=0,e.sibling=null,e}function o(n,t,r){return n.index=r,e?null!==(r=n.alternate)?(r=r.index)<t?(n.flags|=2,t):r:(n.flags|=2,t):(n.flags|=1048576,t)}function s(n){return e&&null===n.alternate&&(n.flags|=2),n}function l(e,n,t,r){return null===n||6!==n.tag?((n=Dc(t,e.mode,r)).return=e,n):((n=a(n,t)).return=e,n)}function c(e,n,t,r){var i=t.type;return i===k?d(e,n,t.props.children,r,t.key):null!==n&&(n.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===M&&vi(i)===n.type)?((r=a(n,t.props)).ref=gi(e,n,t),r.return=e,r):((r=Fc(t.type,t.key,t.props,null,e.mode,r)).ref=gi(e,n,t),r.return=e,r)}function u(e,n,t,r){return null===n||4!==n.tag||n.stateNode.containerInfo!==t.containerInfo||n.stateNode.implementation!==t.implementation?((n=jc(t,e.mode,r)).return=e,n):((n=a(n,t.children||[])).return=e,n)}function d(e,n,t,r,i){return null===n||7!==n.tag?((n=Rc(t,e.mode,r,i)).return=e,n):((n=a(n,t)).return=e,n)}function p(e,n,t){if("string"===typeof n&&""!==n||"number"===typeof n)return(n=Dc(""+n,e.mode,t)).return=e,n;if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return(t=Fc(n.type,n.key,n.props,null,e.mode,t)).ref=gi(e,null,n),t.return=e,t;case x:return(n=jc(n,e.mode,t)).return=e,n;case M:return p(e,(0,n._init)(n._payload),t)}if(ne(n)||R(n))return(n=Rc(n,e.mode,t,null)).return=e,n;yi(e,n)}return null}function f(e,n,t,r){var a=null!==n?n.key:null;if("string"===typeof t&&""!==t||"number"===typeof t)return null!==a?null:l(e,n,""+t,r);if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return t.key===a?c(e,n,t,r):null;case x:return t.key===a?u(e,n,t,r):null;case M:return f(e,n,(a=t._init)(t._payload),r)}if(ne(t)||R(t))return null!==a?null:d(e,n,t,r,null);yi(e,t)}return null}function h(e,n,t,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(n,e=e.get(t)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case S:return c(n,e=e.get(null===r.key?t:r.key)||null,r,a);case x:return u(n,e=e.get(null===r.key?t:r.key)||null,r,a);case M:return h(e,n,t,(0,r._init)(r._payload),a)}if(ne(r)||R(r))return d(n,e=e.get(t)||null,r,a,null);yi(n,r)}return null}function m(a,i,s,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(a,d,s[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&n(a,d),i=o(y,i,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===s.length)return t(a,d),ai&&Za(a,m),c;if(null===d){for(;m<s.length;m++)null!==(d=p(a,s[m],l))&&(i=o(d,i,m),null===u?c=d:u.sibling=d,u=d);return ai&&Za(a,m),c}for(d=r(a,d);m<s.length;m++)null!==(g=h(d,a,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=o(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return n(a,e)})),ai&&Za(a,m),c}function g(a,s,l,c){var u=R(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(a,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&n(a,m),s=o(b,s,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return t(a,m),ai&&Za(a,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=p(a,v.value,c))&&(s=o(v,s,g),null===d?u=v:d.sibling=v,d=v);return ai&&Za(a,g),u}for(m=r(a,m);!v.done;g++,v=l.next())null!==(v=h(m,a,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=o(v,s,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach((function(e){return n(a,e)})),ai&&Za(a,g),u}return function e(r,i,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case S:e:{for(var c=o.key,u=i;null!==u;){if(u.key===c){if((c=o.type)===k){if(7===u.tag){t(r,u.sibling),(i=a(u,o.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&vi(c)===u.type){t(r,u.sibling),(i=a(u,o.props)).ref=gi(r,u,o),i.return=r,r=i;break e}t(r,u);break}n(r,u),u=u.sibling}o.type===k?((i=Rc(o.props.children,r.mode,l,o.key)).return=r,r=i):((l=Fc(o.type,o.key,o.props,null,r.mode,l)).ref=gi(r,i,o),l.return=r,r=l)}return s(r);case x:e:{for(u=o.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){t(r,i.sibling),(i=a(i,o.children||[])).return=r,r=i;break e}t(r,i);break}n(r,i),i=i.sibling}(i=jc(o,r.mode,l)).return=r,r=i}return s(r);case M:return e(r,i,(u=o._init)(o._payload),l)}if(ne(o))return m(r,i,o,l);if(R(o))return g(r,i,o,l);yi(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(t(r,i.sibling),(i=a(i,o)).return=r,r=i):(t(r,i),(i=Dc(o,r.mode,l)).return=r,r=i),s(r)):t(r,i)}}var wi=bi(!0),Si=bi(!1),xi=Ia(null),ki=null,Ii=null,_i=null;function Ai(){_i=Ii=ki=null}function Ti(e){var n=xi.current;_a(xi),e._currentValue=n}function Ei(e,n,t){for(;null!==e;){var r=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,null!==r&&(r.childLanes|=n)):null!==r&&(r.childLanes&n)!==n&&(r.childLanes|=n),e===t)break;e=e.return}}function Oi(e,n){ki=e,_i=Ii=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&n)&&(bs=!0),e.firstContext=null)}function Ci(e){var n=e._currentValue;if(_i!==e)if(e={context:e,memoizedValue:n,next:null},null===Ii){if(null===ki)throw Error(i(308));Ii=e,ki.dependencies={lanes:0,firstContext:e}}else Ii=Ii.next=e;return n}var Ni=null;function Mi(e){null===Ni?Ni=[e]:Ni.push(e)}function Pi(e,n,t,r){var a=n.interleaved;return null===a?(t.next=t,Mi(n)):(t.next=a.next,a.next=t),n.interleaved=t,Fi(e,r)}function Fi(e,n){e.lanes|=n;var t=e.alternate;for(null!==t&&(t.lanes|=n),t=e,e=e.return;null!==e;)e.childLanes|=n,null!==(t=e.alternate)&&(t.childLanes|=n),t=e,e=e.return;return 3===t.tag?t.stateNode:null}var Ri=!1;function Li(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Di(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ji(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function zi(e,n,t){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&El)){var a=r.pending;return null===a?n.next=n:(n.next=a.next,a.next=n),r.pending=n,Fi(e,t)}return null===(a=r.interleaved)?(n.next=n,Mi(r)):(n.next=a.next,a.next=n),r.interleaved=n,Fi(e,t)}function Bi(e,n,t){if(null!==(n=n.updateQueue)&&(n=n.shared,0!==(4194240&t))){var r=n.lanes;t|=r&=e.pendingLanes,n.lanes=t,bn(e,t)}}function Ui(e,n){var t=e.updateQueue,r=e.alternate;if(null!==r&&t===(r=r.updateQueue)){var a=null,i=null;if(null!==(t=t.firstBaseUpdate)){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};null===i?a=i=o:i=i.next=o,t=t.next}while(null!==t);null===i?a=i=n:i=i.next=n}else a=i=n;return t={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=t)}null===(e=t.lastBaseUpdate)?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function Wi(e,n,t,r){var a=e.updateQueue;Ri=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,c=l.next;l.next=null,null===o?i=c:o.next=c,o=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=a.baseState;for(o=0,u=c=l=null,s=i;;){var p=s.lane,f=s.eventTime;if((r&p)===p){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,m=s;switch(p=n,f=t,m.tag){case 1:if("function"===typeof(h=m.payload)){d=h.call(f,d,p);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(p="function"===typeof(h=m.payload)?h.call(f,d,p):h)||void 0===p)break e;d=D({},d,p);break e;case 2:Ri=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(p=a.effects)?a.effects=[s]:p.push(s))}else f={eventTime:f,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=p;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(p=s).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}if(null===u&&(l=d),a.baseState=l,a.firstBaseUpdate=c,a.lastBaseUpdate=u,null!==(n=a.shared.interleaved)){a=n;do{o|=a.lane,a=a.next}while(a!==n)}else null===i&&(a.shared.lanes=0);Ll|=o,e.lanes=o,e.memoizedState=d}}function $i(e,n,t){if(e=n.effects,n.effects=null,null!==e)for(n=0;n<e.length;n++){var r=e[n],a=r.callback;if(null!==a){if(r.callback=null,r=t,"function"!==typeof a)throw Error(i(191,a));a.call(r)}}}var Vi={},Gi=Ia(Vi),Hi=Ia(Vi),qi=Ia(Vi);function Ki(e){if(e===Vi)throw Error(i(174));return e}function Yi(e,n){switch(Aa(qi,n),Aa(Hi,e),Aa(Gi,Vi),e=n.nodeType){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:le(null,"");break;default:n=le(n=(e=8===e?n.parentNode:n).namespaceURI||null,e=e.tagName)}_a(Gi),Aa(Gi,n)}function Xi(){_a(Gi),_a(Hi),_a(qi)}function Ji(e){Ki(qi.current);var n=Ki(Gi.current),t=le(n,e.type);n!==t&&(Aa(Hi,e),Aa(Gi,t))}function Zi(e){Hi.current===e&&(_a(Gi),_a(Hi))}var Qi=Ia(0);function eo(e){for(var n=e;null!==n;){if(13===n.tag){var t=n.memoizedState;if(null!==t&&(null===(t=t.dehydrated)||"$?"===t.data||"$!"===t.data))return n}else if(19===n.tag&&void 0!==n.memoizedProps.revealOrder){if(0!==(128&n.flags))return n}else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var no=[];function to(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var ro=w.ReactCurrentDispatcher,ao=w.ReactCurrentBatchConfig,io=0,oo=null,so=null,lo=null,co=!1,uo=!1,po=0,fo=0;function ho(){throw Error(i(321))}function mo(e,n){if(null===n)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!sr(e[t],n[t]))return!1;return!0}function go(e,n,t,r,a,o){if(io=o,oo=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,ro.current=null===e||null===e.memoizedState?Qo:es,e=t(r,a),uo){o=0;do{if(uo=!1,po=0,25<=o)throw Error(i(301));o+=1,lo=so=null,n.updateQueue=null,ro.current=ns,e=t(r,a)}while(uo)}if(ro.current=Zo,n=null!==so&&null!==so.next,io=0,lo=so=oo=null,co=!1,n)throw Error(i(300));return e}function yo(){var e=0!==po;return po=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function bo(){if(null===so){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=so.next;var n=null===lo?oo.memoizedState:lo.next;if(null!==n)lo=n,so=e;else{if(null===e)throw Error(i(310));e={memoizedState:(so=e).memoizedState,baseState:so.baseState,baseQueue:so.baseQueue,queue:so.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function wo(e,n){return"function"===typeof n?n(e):n}function So(e){var n=bo(),t=n.queue;if(null===t)throw Error(i(311));t.lastRenderedReducer=e;var r=so,a=r.baseQueue,o=t.pending;if(null!==o){if(null!==a){var s=a.next;a.next=o.next,o.next=s}r.baseQueue=a=o,t.pending=null}if(null!==a){o=a.next,r=r.baseState;var l=s=null,c=null,u=o;do{var d=u.lane;if((io&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var p={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=p,s=r):c=c.next=p,oo.lanes|=d,Ll|=d}u=u.next}while(null!==u&&u!==o);null===c?s=r:c.next=l,sr(r,n.memoizedState)||(bs=!0),n.memoizedState=r,n.baseState=s,n.baseQueue=c,t.lastRenderedState=r}if(null!==(e=t.interleaved)){a=e;do{o=a.lane,oo.lanes|=o,Ll|=o,a=a.next}while(a!==e)}else null===a&&(t.lanes=0);return[n.memoizedState,t.dispatch]}function xo(e){var n=bo(),t=n.queue;if(null===t)throw Error(i(311));t.lastRenderedReducer=e;var r=t.dispatch,a=t.pending,o=n.memoizedState;if(null!==a){t.pending=null;var s=a=a.next;do{o=e(o,s.action),s=s.next}while(s!==a);sr(o,n.memoizedState)||(bs=!0),n.memoizedState=o,null===n.baseQueue&&(n.baseState=o),t.lastRenderedState=o}return[o,r]}function ko(){}function Io(e,n){var t=oo,r=bo(),a=n(),o=!sr(r.memoizedState,a);if(o&&(r.memoizedState=a,bs=!0),r=r.queue,Lo(To.bind(null,t,r,e),[e]),r.getSnapshot!==n||o||null!==lo&&1&lo.memoizedState.tag){if(t.flags|=2048,No(9,Ao.bind(null,t,r,a,n),void 0,null),null===Ol)throw Error(i(349));0!==(30&io)||_o(t,n,a)}return a}function _o(e,n,t){e.flags|=16384,e={getSnapshot:n,value:t},null===(n=oo.updateQueue)?(n={lastEffect:null,stores:null},oo.updateQueue=n,n.stores=[e]):null===(t=n.stores)?n.stores=[e]:t.push(e)}function Ao(e,n,t,r){n.value=t,n.getSnapshot=r,Eo(n)&&Oo(e)}function To(e,n,t){return t((function(){Eo(n)&&Oo(e)}))}function Eo(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!sr(e,t)}catch(r){return!0}}function Oo(e){var n=Fi(e,1);null!==n&&tc(n,e,1,-1)}function Co(e){var n=vo();return"function"===typeof e&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:wo,lastRenderedState:e},n.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[n.memoizedState,e]}function No(e,n,t,r){return e={tag:e,create:n,destroy:t,deps:r,next:null},null===(n=oo.updateQueue)?(n={lastEffect:null,stores:null},oo.updateQueue=n,n.lastEffect=e.next=e):null===(t=n.lastEffect)?n.lastEffect=e.next=e:(r=t.next,t.next=e,e.next=r,n.lastEffect=e),e}function Mo(){return bo().memoizedState}function Po(e,n,t,r){var a=vo();oo.flags|=e,a.memoizedState=No(1|n,t,void 0,void 0===r?null:r)}function Fo(e,n,t,r){var a=bo();r=void 0===r?null:r;var i=void 0;if(null!==so){var o=so.memoizedState;if(i=o.destroy,null!==r&&mo(r,o.deps))return void(a.memoizedState=No(n,t,i,r))}oo.flags|=e,a.memoizedState=No(1|n,t,i,r)}function Ro(e,n){return Po(8390656,8,e,n)}function Lo(e,n){return Fo(2048,8,e,n)}function Do(e,n){return Fo(4,2,e,n)}function jo(e,n){return Fo(4,4,e,n)}function zo(e,n){return"function"===typeof n?(e=e(),n(e),function(){n(null)}):null!==n&&void 0!==n?(e=e(),n.current=e,function(){n.current=null}):void 0}function Bo(e,n,t){return t=null!==t&&void 0!==t?t.concat([e]):null,Fo(4,4,zo.bind(null,n,e),t)}function Uo(){}function Wo(e,n){var t=bo();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&mo(n,r[1])?r[0]:(t.memoizedState=[e,n],e)}function $o(e,n){var t=bo();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&mo(n,r[1])?r[0]:(e=e(),t.memoizedState=[e,n],e)}function Vo(e,n,t){return 0===(21&io)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=t):(sr(t,n)||(t=gn(),oo.lanes|=t,Ll|=t,e.baseState=!0),n)}function Go(e,n){var t=wn;wn=0!==t&&4>t?t:4,e(!0);var r=ao.transition;ao.transition={};try{e(!1),n()}finally{wn=t,ao.transition=r}}function Ho(){return bo().memoizedState}function qo(e,n,t){var r=nc(e);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},Yo(e))Xo(n,t);else if(null!==(t=Pi(e,n,t,r))){tc(t,e,r,ec()),Jo(t,n,r)}}function Ko(e,n,t){var r=nc(e),a={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(Yo(e))Xo(n,a);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=n.lastRenderedReducer))try{var o=n.lastRenderedState,s=i(o,t);if(a.hasEagerState=!0,a.eagerState=s,sr(s,o)){var l=n.interleaved;return null===l?(a.next=a,Mi(n)):(a.next=l.next,l.next=a),void(n.interleaved=a)}}catch(c){}null!==(t=Pi(e,n,a,r))&&(tc(t,e,r,a=ec()),Jo(t,n,r))}}function Yo(e){var n=e.alternate;return e===oo||null!==n&&n===oo}function Xo(e,n){uo=co=!0;var t=e.pending;null===t?n.next=n:(n.next=t.next,t.next=n),e.pending=n}function Jo(e,n,t){if(0!==(4194240&t)){var r=n.lanes;t|=r&=e.pendingLanes,n.lanes=t,bn(e,t)}}var Zo={readContext:Ci,useCallback:ho,useContext:ho,useEffect:ho,useImperativeHandle:ho,useInsertionEffect:ho,useLayoutEffect:ho,useMemo:ho,useReducer:ho,useRef:ho,useState:ho,useDebugValue:ho,useDeferredValue:ho,useTransition:ho,useMutableSource:ho,useSyncExternalStore:ho,useId:ho,unstable_isNewReconciler:!1},Qo={readContext:Ci,useCallback:function(e,n){return vo().memoizedState=[e,void 0===n?null:n],e},useContext:Ci,useEffect:Ro,useImperativeHandle:function(e,n,t){return t=null!==t&&void 0!==t?t.concat([e]):null,Po(4194308,4,zo.bind(null,n,e),t)},useLayoutEffect:function(e,n){return Po(4194308,4,e,n)},useInsertionEffect:function(e,n){return Po(4,2,e,n)},useMemo:function(e,n){var t=vo();return n=void 0===n?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var r=vo();return n=void 0!==t?t(n):n,r.memoizedState=r.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},r.queue=e,e=e.dispatch=qo.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:Co,useDebugValue:Uo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=Co(!1),n=e[0];return e=Go.bind(null,e[1]),vo().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,t){var r=oo,a=vo();if(ai){if(void 0===t)throw Error(i(407));t=t()}else{if(t=n(),null===Ol)throw Error(i(349));0!==(30&io)||_o(r,n,t)}a.memoizedState=t;var o={value:t,getSnapshot:n};return a.queue=o,Ro(To.bind(null,r,o,e),[e]),r.flags|=2048,No(9,Ao.bind(null,r,o,t,n),void 0,null),t},useId:function(){var e=vo(),n=Ol.identifierPrefix;if(ai){var t=Ja;n=":"+n+"R"+(t=(Xa&~(1<<32-sn(Xa)-1)).toString(32)+t),0<(t=po++)&&(n+="H"+t.toString(32)),n+=":"}else n=":"+n+"r"+(t=fo++).toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},es={readContext:Ci,useCallback:Wo,useContext:Ci,useEffect:Lo,useImperativeHandle:Bo,useInsertionEffect:Do,useLayoutEffect:jo,useMemo:$o,useReducer:So,useRef:Mo,useState:function(){return So(wo)},useDebugValue:Uo,useDeferredValue:function(e){return Vo(bo(),so.memoizedState,e)},useTransition:function(){return[So(wo)[0],bo().memoizedState]},useMutableSource:ko,useSyncExternalStore:Io,useId:Ho,unstable_isNewReconciler:!1},ns={readContext:Ci,useCallback:Wo,useContext:Ci,useEffect:Lo,useImperativeHandle:Bo,useInsertionEffect:Do,useLayoutEffect:jo,useMemo:$o,useReducer:xo,useRef:Mo,useState:function(){return xo(wo)},useDebugValue:Uo,useDeferredValue:function(e){var n=bo();return null===so?n.memoizedState=e:Vo(n,so.memoizedState,e)},useTransition:function(){return[xo(wo)[0],bo().memoizedState]},useMutableSource:ko,useSyncExternalStore:Io,useId:Ho,unstable_isNewReconciler:!1};function ts(e,n){if(e&&e.defaultProps){for(var t in n=D({},n),e=e.defaultProps)void 0===n[t]&&(n[t]=e[t]);return n}return n}function rs(e,n,t,r){t=null===(t=t(r,n=e.memoizedState))||void 0===t?n:D({},n,t),e.memoizedState=t,0===e.lanes&&(e.updateQueue.baseState=t)}var as={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,n,t){e=e._reactInternals;var r=ec(),a=nc(e),i=ji(r,a);i.payload=n,void 0!==t&&null!==t&&(i.callback=t),null!==(n=zi(e,i,a))&&(tc(n,e,a,r),Bi(n,e,a))},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var r=ec(),a=nc(e),i=ji(r,a);i.tag=1,i.payload=n,void 0!==t&&null!==t&&(i.callback=t),null!==(n=zi(e,i,a))&&(tc(n,e,a,r),Bi(n,e,a))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=ec(),r=nc(e),a=ji(t,r);a.tag=2,void 0!==n&&null!==n&&(a.callback=n),null!==(n=zi(e,a,r))&&(tc(n,e,r,t),Bi(n,e,r))}};function is(e,n,t,r,a,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!n.prototype||!n.prototype.isPureReactComponent||(!lr(t,r)||!lr(a,i))}function os(e,n,t){var r=!1,a=Ta,i=n.contextType;return"object"===typeof i&&null!==i?i=Ci(i):(a=Ma(n)?Ca:Ea.current,i=(r=null!==(r=n.contextTypes)&&void 0!==r)?Na(e,a):Ta),n=new n(t,i),e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,n.updater=as,e.stateNode=n,n._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),n}function ss(e,n,t,r){e=n.state,"function"===typeof n.componentWillReceiveProps&&n.componentWillReceiveProps(t,r),"function"===typeof n.UNSAFE_componentWillReceiveProps&&n.UNSAFE_componentWillReceiveProps(t,r),n.state!==e&&as.enqueueReplaceState(n,n.state,null)}function ls(e,n,t,r){var a=e.stateNode;a.props=t,a.state=e.memoizedState,a.refs={},Li(e);var i=n.contextType;"object"===typeof i&&null!==i?a.context=Ci(i):(i=Ma(n)?Ca:Ea.current,a.context=Na(e,i)),a.state=e.memoizedState,"function"===typeof(i=n.getDerivedStateFromProps)&&(rs(e,n,i,t),a.state=e.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(n=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),n!==a.state&&as.enqueueReplaceState(a,a.state,null),Wi(e,t,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function cs(e,n){try{var t="",r=n;do{t+=U(r),r=r.return}while(r);var a=t}catch(i){a="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:n,stack:a,digest:null}}function us(e,n,t){return{value:e,source:null,stack:null!=t?t:null,digest:null!=n?n:null}}function ds(e,n){try{console.error(n.value)}catch(t){setTimeout((function(){throw t}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function fs(e,n,t){(t=ji(-1,t)).tag=3,t.payload={element:null};var r=n.value;return t.callback=function(){Vl||(Vl=!0,Gl=r),ds(0,n)},t}function hs(e,n,t){(t=ji(-1,t)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=n.value;t.payload=function(){return r(a)},t.callback=function(){ds(0,n)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(t.callback=function(){ds(0,n),"function"!==typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})}),t}function ms(e,n,t){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var a=new Set;r.set(n,a)}else void 0===(a=r.get(n))&&(a=new Set,r.set(n,a));a.has(t)||(a.add(t),e=_c.bind(null,e,n,t),n.then(e,e))}function gs(e){do{var n;if((n=13===e.tag)&&(n=null===(n=e.memoizedState)||null!==n.dehydrated),n)return e;e=e.return}while(null!==e);return null}function ys(e,n,t,r,a){return 0===(1&e.mode)?(e===n?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,1===t.tag&&(null===t.alternate?t.tag=17:((n=ji(-1,1)).tag=2,zi(t,n,1))),t.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var vs=w.ReactCurrentOwner,bs=!1;function ws(e,n,t,r){n.child=null===e?Si(n,null,t,r):wi(n,e.child,t,r)}function Ss(e,n,t,r,a){t=t.render;var i=n.ref;return Oi(n,a),r=go(e,n,t,r,i,a),t=yo(),null===e||bs?(ai&&t&&ei(n),n.flags|=1,ws(e,n,r,a),n.child):(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,Vs(e,n,a))}function xs(e,n,t,r,a){if(null===e){var i=t.type;return"function"!==typeof i||Mc(i)||void 0!==i.defaultProps||null!==t.compare||void 0!==t.defaultProps?((e=Fc(t.type,null,r,n,n.mode,a)).ref=n.ref,e.return=n,n.child=e):(n.tag=15,n.type=i,ks(e,n,i,r,a))}if(i=e.child,0===(e.lanes&a)){var o=i.memoizedProps;if((t=null!==(t=t.compare)?t:lr)(o,r)&&e.ref===n.ref)return Vs(e,n,a)}return n.flags|=1,(e=Pc(i,r)).ref=n.ref,e.return=n,n.child=e}function ks(e,n,t,r,a){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===n.ref){if(bs=!1,n.pendingProps=r=i,0===(e.lanes&a))return n.lanes=e.lanes,Vs(e,n,a);0!==(131072&e.flags)&&(bs=!0)}}return As(e,n,t,r,a)}function Is(e,n,t){var r=n.pendingProps,a=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&n.mode))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Aa(Pl,Ml),Ml|=t;else{if(0===(1073741824&t))return e=null!==i?i.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Aa(Pl,Ml),Ml|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:t,Aa(Pl,Ml),Ml|=r}else null!==i?(r=i.baseLanes|t,n.memoizedState=null):r=t,Aa(Pl,Ml),Ml|=r;return ws(e,n,a,t),n.child}function _s(e,n){var t=n.ref;(null===e&&null!==t||null!==e&&e.ref!==t)&&(n.flags|=512,n.flags|=2097152)}function As(e,n,t,r,a){var i=Ma(t)?Ca:Ea.current;return i=Na(n,i),Oi(n,a),t=go(e,n,t,r,i,a),r=yo(),null===e||bs?(ai&&r&&ei(n),n.flags|=1,ws(e,n,t,a),n.child):(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,Vs(e,n,a))}function Ts(e,n,t,r,a){if(Ma(t)){var i=!0;La(n)}else i=!1;if(Oi(n,a),null===n.stateNode)$s(e,n),os(n,t,r),ls(n,t,r,a),r=!0;else if(null===e){var o=n.stateNode,s=n.memoizedProps;o.props=s;var l=o.context,c=t.contextType;"object"===typeof c&&null!==c?c=Ci(c):c=Na(n,c=Ma(t)?Ca:Ea.current);var u=t.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==c)&&ss(n,o,r,c),Ri=!1;var p=n.memoizedState;o.state=p,Wi(n,r,o,a),l=n.memoizedState,s!==r||p!==l||Oa.current||Ri?("function"===typeof u&&(rs(n,t,u,r),l=n.memoizedState),(s=Ri||is(n,t,s,r,p,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(n.flags|=4194308)):("function"===typeof o.componentDidMount&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=l),o.props=r,o.state=l,o.context=c,r=s):("function"===typeof o.componentDidMount&&(n.flags|=4194308),r=!1)}else{o=n.stateNode,Di(e,n),s=n.memoizedProps,c=n.type===n.elementType?s:ts(n.type,s),o.props=c,d=n.pendingProps,p=o.context,"object"===typeof(l=t.contextType)&&null!==l?l=Ci(l):l=Na(n,l=Ma(t)?Ca:Ea.current);var f=t.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==d||p!==l)&&ss(n,o,r,l),Ri=!1,p=n.memoizedState,o.state=p,Wi(n,r,o,a);var h=n.memoizedState;s!==d||p!==h||Oa.current||Ri?("function"===typeof f&&(rs(n,t,f,r),h=n.memoizedState),(c=Ri||is(n,t,c,r,p,h,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,l)),"function"===typeof o.componentDidUpdate&&(n.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(n.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(n.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=h),o.props=r,o.state=h,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(n.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(n.flags|=1024),r=!1)}return Es(e,n,t,r,i,a)}function Es(e,n,t,r,a,i){_s(e,n);var o=0!==(128&n.flags);if(!r&&!o)return a&&Da(n,t,!1),Vs(e,n,i);r=n.stateNode,vs.current=n;var s=o&&"function"!==typeof t.getDerivedStateFromError?null:r.render();return n.flags|=1,null!==e&&o?(n.child=wi(n,e.child,null,i),n.child=wi(n,null,s,i)):ws(e,n,s,i),n.memoizedState=r.state,a&&Da(n,t,!0),n.child}function Os(e){var n=e.stateNode;n.pendingContext?Fa(0,n.pendingContext,n.pendingContext!==n.context):n.context&&Fa(0,n.context,!1),Yi(e,n.containerInfo)}function Cs(e,n,t,r,a){return fi(),hi(a),n.flags|=256,ws(e,n,t,r),n.child}var Ns,Ms,Ps,Fs,Rs={dehydrated:null,treeContext:null,retryLane:0};function Ls(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ds(e,n,t){var r,a=n.pendingProps,o=Qi.current,s=!1,l=0!==(128&n.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,n.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Aa(Qi,1&o),null===e)return ci(n),null!==(e=n.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&n.mode)?n.lanes=1:"$!"===e.data?n.lanes=8:n.lanes=1073741824,null):(l=a.children,e=a.fallback,s?(a=n.mode,s=n.child,l={mode:"hidden",children:l},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Lc(l,a,0,null),e=Rc(e,a,t,null),s.return=n,e.return=n,s.sibling=e,n.child=s,n.child.memoizedState=Ls(t),n.memoizedState=Rs,e):js(n,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,n,t,r,a,o,s){if(t)return 256&n.flags?(n.flags&=-257,zs(e,n,s,r=us(Error(i(422))))):null!==n.memoizedState?(n.child=e.child,n.flags|=128,null):(o=r.fallback,a=n.mode,r=Lc({mode:"visible",children:r.children},a,0,null),(o=Rc(o,a,s,null)).flags|=2,r.return=n,o.return=n,r.sibling=o,n.child=r,0!==(1&n.mode)&&wi(n,e.child,null,s),n.child.memoizedState=Ls(s),n.memoizedState=Rs,o);if(0===(1&n.mode))return zs(e,n,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,zs(e,n,s,r=us(o=Error(i(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=Ol)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Fi(e,a),tc(r,e,a,-1))}return mc(),zs(e,n,s,r=us(Error(i(421))))}return"$?"===a.data?(n.flags|=128,n.child=e.child,n=Tc.bind(null,e),a._reactRetry=n,null):(e=o.treeContext,ri=ca(a.nextSibling),ti=n,ai=!0,ii=null,null!==e&&(qa[Ka++]=Xa,qa[Ka++]=Ja,qa[Ka++]=Ya,Xa=e.id,Ja=e.overflow,Ya=n),n=js(n,r.children),n.flags|=4096,n)}(e,n,l,a,r,o,t);if(s){s=a.fallback,l=n.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:a.children};return 0===(1&l)&&n.child!==o?((a=n.child).childLanes=0,a.pendingProps=c,n.deletions=null):(a=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Pc(r,s):(s=Rc(s,l,t,null)).flags|=2,s.return=n,a.return=n,a.sibling=s,n.child=a,a=s,s=n.child,l=null===(l=e.child.memoizedState)?Ls(t):{baseLanes:l.baseLanes|t,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~t,n.memoizedState=Rs,a}return e=(s=e.child).sibling,a=Pc(s,{mode:"visible",children:a.children}),0===(1&n.mode)&&(a.lanes=t),a.return=n,a.sibling=null,null!==e&&(null===(t=n.deletions)?(n.deletions=[e],n.flags|=16):t.push(e)),n.child=a,n.memoizedState=null,a}function js(e,n){return(n=Lc({mode:"visible",children:n},e.mode,0,null)).return=e,e.child=n}function zs(e,n,t,r){return null!==r&&hi(r),wi(n,e.child,null,t),(e=js(n,n.pendingProps.children)).flags|=2,n.memoizedState=null,e}function Bs(e,n,t){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n),Ei(e.return,n,t)}function Us(e,n,t,r,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:a}:(i.isBackwards=n,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=a)}function Ws(e,n,t){var r=n.pendingProps,a=r.revealOrder,i=r.tail;if(ws(e,n,r.children,t),0!==(2&(r=Qi.current)))r=1&r|2,n.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=n.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bs(e,t,n);else if(19===e.tag)Bs(e,t,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Aa(Qi,r),0===(1&n.mode))n.memoizedState=null;else switch(a){case"forwards":for(t=n.child,a=null;null!==t;)null!==(e=t.alternate)&&null===eo(e)&&(a=t),t=t.sibling;null===(t=a)?(a=n.child,n.child=null):(a=t.sibling,t.sibling=null),Us(n,!1,a,t,i);break;case"backwards":for(t=null,a=n.child,n.child=null;null!==a;){if(null!==(e=a.alternate)&&null===eo(e)){n.child=a;break}e=a.sibling,a.sibling=t,t=a,a=e}Us(n,!0,t,null,i);break;case"together":Us(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function $s(e,n){0===(1&n.mode)&&null!==e&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Vs(e,n,t){if(null!==e&&(n.dependencies=e.dependencies),Ll|=n.lanes,0===(t&n.childLanes))return null;if(null!==e&&n.child!==e.child)throw Error(i(153));if(null!==n.child){for(t=Pc(e=n.child,e.pendingProps),n.child=t,t.return=n;null!==e.sibling;)e=e.sibling,(t=t.sibling=Pc(e,e.pendingProps)).return=n;t.sibling=null}return n.child}function Gs(e,n){if(!ai)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;null!==n;)null!==n.alternate&&(t=n),n=n.sibling;null===t?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?n||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hs(e){var n=null!==e.alternate&&e.alternate.child===e.child,t=0,r=0;if(n)for(var a=e.child;null!==a;)t|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)t|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=t,n}function qs(e,n,t){var r=n.pendingProps;switch(ni(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hs(n),null;case 1:case 17:return Ma(n.type)&&Pa(),Hs(n),null;case 3:return r=n.stateNode,Xi(),_a(Oa),_a(Ea),to(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(n)?n.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&n.flags)||(n.flags|=1024,null!==ii&&(oc(ii),ii=null))),Ms(e,n),Hs(n),null;case 5:Zi(n);var a=Ki(qi.current);if(t=n.type,null!==e&&null!=n.stateNode)Ps(e,n,t,r,a),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!r){if(null===n.stateNode)throw Error(i(166));return Hs(n),null}if(e=Ki(Gi.current),di(n)){r=n.stateNode,t=n.type;var o=n.memoizedProps;switch(r[pa]=n,r[fa]=o,e=0!==(1&n.mode),t){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(a=0;a<Rr.length;a++)zr(Rr[a],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":X(r,o),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},zr("invalid",r);break;case"textarea":ae(r,o),zr("invalid",r)}for(var l in ve(t,o),a=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),a=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zr("scroll",r)}switch(t){case"input":H(r),Q(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Qr)}r=a,n.updateQueue=r,null!==r&&(n.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(t)),"http://www.w3.org/1999/xhtml"===e?"script"===t?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(t,{is:r.is}):(e=l.createElement(t),"select"===t&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,t),e[pa]=n,e[fa]=r,Ns(e,n,!1,!1),n.stateNode=e;e:{switch(l=be(t,r),t){case"dialog":zr("cancel",e),zr("close",e),a=r;break;case"iframe":case"object":case"embed":zr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Rr.length;a++)zr(Rr[a],e);a=r;break;case"source":zr("error",e),a=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),a=r;break;case"details":zr("toggle",e),a=r;break;case"input":X(e,r),a=Y(e,r),zr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=D({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),zr("invalid",e)}for(o in ve(t,a),c=a)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==t||""!==u)&&pe(e,u):"number"===typeof u&&pe(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=u&&"onScroll"===o&&zr("scroll",e):null!=u&&b(e,o,u,l))}switch(t){case"input":H(e),Q(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?te(e,!!r.multiple,o,!1):null!=r.defaultValue&&te(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Qr)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(n.flags|=4)}null!==n.ref&&(n.flags|=512,n.flags|=2097152)}return Hs(n),null;case 6:if(e&&null!=n.stateNode)Fs(e,n,e.memoizedProps,r);else{if("string"!==typeof r&&null===n.stateNode)throw Error(i(166));if(t=Ki(qi.current),Ki(Gi.current),di(n)){if(r=n.stateNode,t=n.memoizedProps,r[pa]=n,(o=r.nodeValue!==t)&&null!==(e=ti))switch(e.tag){case 3:Zr(r.nodeValue,t,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,t,0!==(1&e.mode))}o&&(n.flags|=4)}else(r=(9===t.nodeType?t:t.ownerDocument).createTextNode(r))[pa]=n,n.stateNode=r}return Hs(n),null;case 13:if(_a(Qi),r=n.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ai&&null!==ri&&0!==(1&n.mode)&&0===(128&n.flags))pi(),fi(),n.flags|=98560,o=!1;else if(o=di(n),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=n.memoizedState)?o.dehydrated:null))throw Error(i(317));o[pa]=n}else fi(),0===(128&n.flags)&&(n.memoizedState=null),n.flags|=4;Hs(n),o=!1}else null!==ii&&(oc(ii),ii=null),o=!0;if(!o)return 65536&n.flags?n:null}return 0!==(128&n.flags)?(n.lanes=t,n):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(n.child.flags|=8192,0!==(1&n.mode)&&(null===e||0!==(1&Qi.current)?0===Fl&&(Fl=3):mc())),null!==n.updateQueue&&(n.flags|=4),Hs(n),null);case 4:return Xi(),Ms(e,n),null===e&&Wr(n.stateNode.containerInfo),Hs(n),null;case 10:return Ti(n.type._context),Hs(n),null;case 19:if(_a(Qi),null===(o=n.memoizedState))return Hs(n),null;if(r=0!==(128&n.flags),null===(l=o.rendering))if(r)Gs(o,!1);else{if(0!==Fl||null!==e&&0!==(128&e.flags))for(e=n.child;null!==e;){if(null!==(l=eo(e))){for(n.flags|=128,Gs(o,!1),null!==(r=l.updateQueue)&&(n.updateQueue=r,n.flags|=4),n.subtreeFlags=0,r=t,t=n.child;null!==t;)e=r,(o=t).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return Aa(Qi,1&Qi.current|2),n.child}e=e.sibling}null!==o.tail&&Je()>Wl&&(n.flags|=128,r=!0,Gs(o,!1),n.lanes=4194304)}else{if(!r)if(null!==(e=eo(l))){if(n.flags|=128,r=!0,null!==(t=e.updateQueue)&&(n.updateQueue=t,n.flags|=4),Gs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ai)return Hs(n),null}else 2*Je()-o.renderingStartTime>Wl&&1073741824!==t&&(n.flags|=128,r=!0,Gs(o,!1),n.lanes=4194304);o.isBackwards?(l.sibling=n.child,n.child=l):(null!==(t=o.last)?t.sibling=l:n.child=l,o.last=l)}return null!==o.tail?(n=o.tail,o.rendering=n,o.tail=n.sibling,o.renderingStartTime=Je(),n.sibling=null,t=Qi.current,Aa(Qi,r?1&t|2:1&t),n):(Hs(n),null);case 22:case 23:return dc(),r=null!==n.memoizedState,null!==e&&null!==e.memoizedState!==r&&(n.flags|=8192),r&&0!==(1&n.mode)?0!==(1073741824&Ml)&&(Hs(n),6&n.subtreeFlags&&(n.flags|=8192)):Hs(n),null;case 24:case 25:return null}throw Error(i(156,n.tag))}function Ks(e,n){switch(ni(n),n.tag){case 1:return Ma(n.type)&&Pa(),65536&(e=n.flags)?(n.flags=-65537&e|128,n):null;case 3:return Xi(),_a(Oa),_a(Ea),to(),0!==(65536&(e=n.flags))&&0===(128&e)?(n.flags=-65537&e|128,n):null;case 5:return Zi(n),null;case 13:if(_a(Qi),null!==(e=n.memoizedState)&&null!==e.dehydrated){if(null===n.alternate)throw Error(i(340));fi()}return 65536&(e=n.flags)?(n.flags=-65537&e|128,n):null;case 19:return _a(Qi),null;case 4:return Xi(),null;case 10:return Ti(n.type._context),null;case 22:case 23:return dc(),null;default:return null}}Ns=function(e,n){for(var t=n.child;null!==t;){if(5===t.tag||6===t.tag)e.appendChild(t.stateNode);else if(4!==t.tag&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}},Ms=function(){},Ps=function(e,n,t,r){var a=e.memoizedProps;if(a!==r){e=n.stateNode,Ki(Gi.current);var i,o=null;switch(t){case"input":a=Y(e,a),r=Y(e,r),o=[];break;case"select":a=D({},a,{value:void 0}),r=D({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(u in ve(t,r),t=null,a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&null!=a[u])if("style"===u){var l=a[u];for(i in l)l.hasOwnProperty(i)&&(t||(t={}),t[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=a?a[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(t||(t={}),t[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(t||(t={}),t[i]=c[i])}else t||(o||(o=[]),o.push(u,t)),t=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}t&&(o=o||[]).push("style",t);var u=o;(n.updateQueue=u)&&(n.flags|=4)}},Fs=function(e,n,t,r){t!==r&&(n.flags|=4)};var Ys=!1,Xs=!1,Js="function"===typeof WeakSet?WeakSet:Set,Zs=null;function Qs(e,n){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(r){Ic(e,n,r)}else t.current=null}function el(e,n,t){try{t()}catch(r){Ic(e,n,r)}}var nl=!1;function tl(e,n,t){var r=n.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,void 0!==i&&el(n,t,i)}a=a.next}while(a!==r)}}function rl(e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var t=n=n.next;do{if((t.tag&e)===e){var r=t.create;t.destroy=r()}t=t.next}while(t!==n)}}function al(e){var n=e.ref;if(null!==n){var t=e.stateNode;e.tag,e=t,"function"===typeof n?n(e):n.current=e}}function il(e){var n=e.alternate;null!==n&&(e.alternate=null,il(n)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(n=e.stateNode)&&(delete n[pa],delete n[fa],delete n[ma],delete n[ga],delete n[ya])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,n,t){var r=e.tag;if(5===r||6===r)e=e.stateNode,n?8===t.nodeType?t.parentNode.insertBefore(e,n):t.insertBefore(e,n):(8===t.nodeType?(n=t.parentNode).insertBefore(e,t):(n=t).appendChild(e),null!==(t=t._reactRootContainer)&&void 0!==t||null!==n.onclick||(n.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(ll(e,n,t),e=e.sibling;null!==e;)ll(e,n,t),e=e.sibling}function cl(e,n,t){var r=e.tag;if(5===r||6===r)e=e.stateNode,n?t.insertBefore(e,n):t.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,n,t),e=e.sibling;null!==e;)cl(e,n,t),e=e.sibling}var ul=null,dl=!1;function pl(e,n,t){for(t=t.child;null!==t;)fl(e,n,t),t=t.sibling}function fl(e,n,t){if(on&&"function"===typeof on.onCommitFiberUnmount)try{on.onCommitFiberUnmount(an,t)}catch(s){}switch(t.tag){case 5:Xs||Qs(t,n);case 6:var r=ul,a=dl;ul=null,pl(e,n,t),dl=a,null!==(ul=r)&&(dl?(e=ul,t=t.stateNode,8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)):ul.removeChild(t.stateNode));break;case 18:null!==ul&&(dl?(e=ul,t=t.stateNode,8===e.nodeType?la(e.parentNode,t):1===e.nodeType&&la(e,t),$n(e)):la(ul,t.stateNode));break;case 4:r=ul,a=dl,ul=t.stateNode.containerInfo,dl=!0,pl(e,n,t),ul=r,dl=a;break;case 0:case 11:case 14:case 15:if(!Xs&&(null!==(r=t.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&el(t,n,o),a=a.next}while(a!==r)}pl(e,n,t);break;case 1:if(!Xs&&(Qs(t,n),"function"===typeof(r=t.stateNode).componentWillUnmount))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(s){Ic(t,n,s)}pl(e,n,t);break;case 21:pl(e,n,t);break;case 22:1&t.mode?(Xs=(r=Xs)||null!==t.memoizedState,pl(e,n,t),Xs=r):pl(e,n,t);break;default:pl(e,n,t)}}function hl(e){var n=e.updateQueue;if(null!==n){e.updateQueue=null;var t=e.stateNode;null===t&&(t=e.stateNode=new Js),n.forEach((function(n){var r=Ec.bind(null,e,n);t.has(n)||(t.add(n),n.then(r,r))}))}}function ml(e,n){var t=n.deletions;if(null!==t)for(var r=0;r<t.length;r++){var a=t[r];try{var o=e,s=n,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(i(160));fl(o,s,a),ul=null,dl=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(u){Ic(a,n,u)}}if(12854&n.subtreeFlags)for(n=n.child;null!==n;)gl(n,e),n=n.sibling}function gl(e,n){var t=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(n,e),yl(e),4&r){try{tl(3,e,e.return),rl(3,e)}catch(g){Ic(e,e.return,g)}try{tl(5,e,e.return)}catch(g){Ic(e,e.return,g)}}break;case 1:ml(n,e),yl(e),512&r&&null!==t&&Qs(t,t.return);break;case 5:if(ml(n,e),yl(e),512&r&&null!==t&&Qs(t,t.return),32&e.flags){var a=e.stateNode;try{pe(a,"")}catch(g){Ic(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,s=null!==t?t.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(a,o),be(l,s);var u=be(l,o);for(s=0;s<c.length;s+=2){var d=c[s],p=c[s+1];"style"===d?ge(a,p):"dangerouslySetInnerHTML"===d?de(a,p):"children"===d?pe(a,p):b(a,d,p,u)}switch(l){case"input":Z(a,o);break;case"textarea":ie(a,o);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var h=o.value;null!=h?te(a,!!o.multiple,h,!1):f!==!!o.multiple&&(null!=o.defaultValue?te(a,!!o.multiple,o.defaultValue,!0):te(a,!!o.multiple,o.multiple?[]:"",!1))}a[fa]=o}catch(g){Ic(e,e.return,g)}}break;case 6:if(ml(n,e),yl(e),4&r){if(null===e.stateNode)throw Error(i(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(g){Ic(e,e.return,g)}}break;case 3:if(ml(n,e),yl(e),4&r&&null!==t&&t.memoizedState.isDehydrated)try{$n(n.containerInfo)}catch(g){Ic(e,e.return,g)}break;case 4:default:ml(n,e),yl(e);break;case 13:ml(n,e),yl(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(Ul=Je())),4&r&&hl(e);break;case 22:if(d=null!==t&&null!==t.memoizedState,1&e.mode?(Xs=(u=Xs)||d,ml(n,e),Xs=u):ml(n,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Zs=e,d=e.child;null!==d;){for(p=Zs=d;null!==Zs;){switch(h=(f=Zs).child,f.tag){case 0:case 11:case 14:case 15:tl(4,f,f.return);break;case 1:Qs(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,t=f.return;try{n=r,m.props=n.memoizedProps,m.state=n.memoizedState,m.componentWillUnmount()}catch(g){Ic(r,t,g)}}break;case 5:Qs(f,f.return);break;case 22:if(null!==f.memoizedState){Sl(p);continue}}null!==h?(h.return=f,Zs=h):Sl(p)}d=d.sibling}e:for(d=null,p=e;;){if(5===p.tag){if(null===d){d=p;try{a=p.stateNode,u?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=p.stateNode,s=void 0!==(c=p.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Ic(e,e.return,g)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=u?"":p.memoizedProps}catch(g){Ic(e,e.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ml(n,e),yl(e),4&r&&hl(e);case 21:}}function yl(e){var n=e.flags;if(2&n){try{e:{for(var t=e.return;null!==t;){if(ol(t)){var r=t;break e}t=t.return}throw Error(i(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(pe(a,""),r.flags&=-33),cl(e,sl(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,sl(e),o);break;default:throw Error(i(161))}}catch(s){Ic(e,e.return,s)}e.flags&=-3}4096&n&&(e.flags&=-4097)}function vl(e,n,t){Zs=e,bl(e,n,t)}function bl(e,n,t){for(var r=0!==(1&e.mode);null!==Zs;){var a=Zs,i=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||Ys;if(!o){var s=a.alternate,l=null!==s&&null!==s.memoizedState||Xs;s=Ys;var c=Xs;if(Ys=o,(Xs=l)&&!c)for(Zs=a;null!==Zs;)l=(o=Zs).child,22===o.tag&&null!==o.memoizedState?xl(a):null!==l?(l.return=o,Zs=l):xl(a);for(;null!==i;)Zs=i,bl(i,n,t),i=i.sibling;Zs=a,Ys=s,Xs=c}wl(e)}else 0!==(8772&a.subtreeFlags)&&null!==i?(i.return=a,Zs=i):wl(e)}}function wl(e){for(;null!==Zs;){var n=Zs;if(0!==(8772&n.flags)){var t=n.alternate;try{if(0!==(8772&n.flags))switch(n.tag){case 0:case 11:case 15:Xs||rl(5,n);break;case 1:var r=n.stateNode;if(4&n.flags&&!Xs)if(null===t)r.componentDidMount();else{var a=n.elementType===n.type?t.memoizedProps:ts(n.type,t.memoizedProps);r.componentDidUpdate(a,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=n.updateQueue;null!==o&&$i(n,o,r);break;case 3:var s=n.updateQueue;if(null!==s){if(t=null,null!==n.child)switch(n.child.tag){case 5:case 1:t=n.child.stateNode}$i(n,s,t)}break;case 5:var l=n.stateNode;if(null===t&&4&n.flags){t=l;var c=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===n.memoizedState){var u=n.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&$n(p)}}}break;default:throw Error(i(163))}Xs||512&n.flags&&al(n)}catch(f){Ic(n,n.return,f)}}if(n===e){Zs=null;break}if(null!==(t=n.sibling)){t.return=n.return,Zs=t;break}Zs=n.return}}function Sl(e){for(;null!==Zs;){var n=Zs;if(n===e){Zs=null;break}var t=n.sibling;if(null!==t){t.return=n.return,Zs=t;break}Zs=n.return}}function xl(e){for(;null!==Zs;){var n=Zs;try{switch(n.tag){case 0:case 11:case 15:var t=n.return;try{rl(4,n)}catch(l){Ic(n,t,l)}break;case 1:var r=n.stateNode;if("function"===typeof r.componentDidMount){var a=n.return;try{r.componentDidMount()}catch(l){Ic(n,a,l)}}var i=n.return;try{al(n)}catch(l){Ic(n,i,l)}break;case 5:var o=n.return;try{al(n)}catch(l){Ic(n,o,l)}}}catch(l){Ic(n,n.return,l)}if(n===e){Zs=null;break}var s=n.sibling;if(null!==s){s.return=n.return,Zs=s;break}Zs=n.return}}var kl,Il=Math.ceil,_l=w.ReactCurrentDispatcher,Al=w.ReactCurrentOwner,Tl=w.ReactCurrentBatchConfig,El=0,Ol=null,Cl=null,Nl=0,Ml=0,Pl=Ia(0),Fl=0,Rl=null,Ll=0,Dl=0,jl=0,zl=null,Bl=null,Ul=0,Wl=1/0,$l=null,Vl=!1,Gl=null,Hl=null,ql=!1,Kl=null,Yl=0,Xl=0,Jl=null,Zl=-1,Ql=0;function ec(){return 0!==(6&El)?Je():-1!==Zl?Zl:Zl=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Nl?Nl&-Nl:null!==mi.transition?(0===Ql&&(Ql=gn()),Ql):0!==(e=wn)?e:e=void 0===(e=window.event)?16:Jn(e.type)}function tc(e,n,t,r){if(50<Xl)throw Xl=0,Jl=null,Error(i(185));vn(e,t,r),0!==(2&El)&&e===Ol||(e===Ol&&(0===(2&El)&&(Dl|=t),4===Fl&&sc(e,Nl)),rc(e,r),1===t&&0===El&&0===(1&n.mode)&&(Wl=Je()+500,za&&Wa()))}function rc(e,n){var t=e.callbackNode;!function(e,n){for(var t=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-sn(i),s=1<<o,l=a[o];-1===l?0!==(s&t)&&0===(s&r)||(a[o]=hn(s,n)):l<=n&&(e.expiredLanes|=s),i&=~s}}(e,n);var r=fn(e,e===Ol?Nl:0);if(0===r)null!==t&&Ke(t),e.callbackNode=null,e.callbackPriority=0;else if(n=r&-r,e.callbackPriority!==n){if(null!=t&&Ke(t),1===n)0===e.tag?function(e){za=!0,Ua(e)}(lc.bind(null,e)):Ua(lc.bind(null,e)),oa((function(){0===(6&El)&&Wa()})),t=null;else{switch(Sn(r)){case 1:t=Qe;break;case 4:t=en;break;case 16:default:t=nn;break;case 536870912:t=rn}t=Oc(t,ac.bind(null,e))}e.callbackPriority=n,e.callbackNode=t}}function ac(e,n){if(Zl=-1,Ql=0,0!==(6&El))throw Error(i(327));var t=e.callbackNode;if(xc()&&e.callbackNode!==t)return null;var r=fn(e,e===Ol?Nl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||n)n=gc(e,r);else{n=r;var a=El;El|=2;var o=hc();for(Ol===e&&Nl===n||($l=null,Wl=Je()+500,pc(e,n));;)try{vc();break}catch(l){fc(e,l)}Ai(),_l.current=o,El=a,null!==Cl?n=0:(Ol=null,Nl=0,n=Fl)}if(0!==n){if(2===n&&(0!==(a=mn(e))&&(r=a,n=ic(e,a))),1===n)throw t=Rl,pc(e,0),sc(e,r),rc(e,Je()),t;if(6===n)sc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var n=e;;){if(16384&n.flags){var t=n.updateQueue;if(null!==t&&null!==(t=t.stores))for(var r=0;r<t.length;r++){var a=t[r],i=a.getSnapshot;a=a.value;try{if(!sr(i(),a))return!1}catch(s){return!1}}}if(t=n.child,16384&n.subtreeFlags&&null!==t)t.return=n,n=t;else{if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}(a)&&(2===(n=gc(e,r))&&(0!==(o=mn(e))&&(r=o,n=ic(e,o))),1===n))throw t=Rl,pc(e,0),sc(e,r),rc(e,Je()),t;switch(e.finishedWork=a,e.finishedLanes=r,n){case 0:case 1:throw Error(i(345));case 2:case 5:Sc(e,Bl,$l);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(n=Ul+500-Je())){if(0!==fn(e,0))break;if(((a=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(Sc.bind(null,e,Bl,$l),n);break}Sc(e,Bl,$l);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(n=e.eventTimes,a=-1;0<r;){var s=31-sn(r);o=1<<s,(s=n[s])>a&&(a=s),r&=~o}if(r=a,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Il(r/1960))-r)){e.timeoutHandle=ra(Sc.bind(null,e,Bl,$l),r);break}Sc(e,Bl,$l);break;default:throw Error(i(329))}}}return rc(e,Je()),e.callbackNode===t?ac.bind(null,e):null}function ic(e,n){var t=zl;return e.current.memoizedState.isDehydrated&&(pc(e,n).flags|=256),2!==(e=gc(e,n))&&(n=Bl,Bl=t,null!==n&&oc(n)),e}function oc(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function sc(e,n){for(n&=~jl,n&=~Dl,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-sn(n),r=1<<t;e[t]=-1,n&=~r}}function lc(e){if(0!==(6&El))throw Error(i(327));xc();var n=fn(e,0);if(0===(1&n))return rc(e,Je()),null;var t=gc(e,n);if(0!==e.tag&&2===t){var r=mn(e);0!==r&&(n=r,t=ic(e,r))}if(1===t)throw t=Rl,pc(e,0),sc(e,n),rc(e,Je()),t;if(6===t)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Sc(e,Bl,$l),rc(e,Je()),null}function cc(e,n){var t=El;El|=1;try{return e(n)}finally{0===(El=t)&&(Wl=Je()+500,za&&Wa())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&El)&&xc();var n=El;El|=1;var t=Tl.transition,r=wn;try{if(Tl.transition=null,wn=1,e)return e()}finally{wn=r,Tl.transition=t,0===(6&(El=n))&&Wa()}}function dc(){Ml=Pl.current,_a(Pl)}function pc(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(-1!==t&&(e.timeoutHandle=-1,aa(t)),null!==Cl)for(t=Cl.return;null!==t;){var r=t;switch(ni(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pa();break;case 3:Xi(),_a(Oa),_a(Ea),to();break;case 5:Zi(r);break;case 4:Xi();break;case 13:case 19:_a(Qi);break;case 10:Ti(r.type._context);break;case 22:case 23:dc()}t=t.return}if(Ol=e,Cl=e=Pc(e.current,null),Nl=Ml=n,Fl=0,Rl=null,jl=Dl=Ll=0,Bl=zl=null,null!==Ni){for(n=0;n<Ni.length;n++)if(null!==(r=(t=Ni[n]).interleaved)){t.interleaved=null;var a=r.next,i=t.pending;if(null!==i){var o=i.next;i.next=a,r.next=o}t.pending=r}Ni=null}return e}function fc(e,n){for(;;){var t=Cl;try{if(Ai(),ro.current=Zo,co){for(var r=oo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}co=!1}if(io=0,lo=so=oo=null,uo=!1,po=0,Al.current=null,null===t||null===t.return){Fl=1,Rl=n,Cl=null;break}e:{var o=e,s=t.return,l=t,c=n;if(n=Nl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,p=d.tag;if(0===(1&d.mode)&&(0===p||11===p||15===p)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=gs(s);if(null!==h){h.flags&=-257,ys(h,s,l,0,n),1&h.mode&&ms(o,u,n),c=u;var m=(n=h).updateQueue;if(null===m){var g=new Set;g.add(c),n.updateQueue=g}else m.add(c);break e}if(0===(1&n)){ms(o,u,n),mc();break e}c=Error(i(426))}else if(ai&&1&l.mode){var y=gs(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,l,0,n),hi(cs(c,l));break e}}o=c=cs(c,l),4!==Fl&&(Fl=2),null===zl?zl=[o]:zl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,n&=-n,o.lanes|=n,Ui(o,fs(0,c,n));break e;case 1:l=c;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Hl||!Hl.has(b)))){o.flags|=65536,n&=-n,o.lanes|=n,Ui(o,hs(o,l,n));break e}}o=o.return}while(null!==o)}wc(t)}catch(w){n=w,Cl===t&&null!==t&&(Cl=t=t.return);continue}break}}function hc(){var e=_l.current;return _l.current=Zo,null===e?Zo:e}function mc(){0!==Fl&&3!==Fl&&2!==Fl||(Fl=4),null===Ol||0===(268435455&Ll)&&0===(268435455&Dl)||sc(Ol,Nl)}function gc(e,n){var t=El;El|=2;var r=hc();for(Ol===e&&Nl===n||($l=null,pc(e,n));;)try{yc();break}catch(a){fc(e,a)}if(Ai(),El=t,_l.current=r,null!==Cl)throw Error(i(261));return Ol=null,Nl=0,Fl}function yc(){for(;null!==Cl;)bc(Cl)}function vc(){for(;null!==Cl&&!Ye();)bc(Cl)}function bc(e){var n=kl(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===n?wc(e):Cl=n,Al.current=null}function wc(e){var n=e;do{var t=n.alternate;if(e=n.return,0===(32768&n.flags)){if(null!==(t=qs(t,n,Ml)))return void(Cl=t)}else{if(null!==(t=Ks(t,n)))return t.flags&=32767,void(Cl=t);if(null===e)return Fl=6,void(Cl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(n=n.sibling))return void(Cl=n);Cl=n=e}while(null!==n);0===Fl&&(Fl=5)}function Sc(e,n,t){var r=wn,a=Tl.transition;try{Tl.transition=null,wn=1,function(e,n,t,r){do{xc()}while(null!==Kl);if(0!==(6&El))throw Error(i(327));t=e.finishedWork;var a=e.finishedLanes;if(null===t)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=t.lanes|t.childLanes;if(function(e,n){var t=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<t;){var a=31-sn(t),i=1<<a;n[a]=0,r[a]=-1,e[a]=-1,t&=~i}}(e,o),e===Ol&&(Cl=Ol=null,Nl=0),0===(2064&t.subtreeFlags)&&0===(2064&t.flags)||ql||(ql=!0,Oc(nn,(function(){return xc(),null}))),o=0!==(15990&t.flags),0!==(15990&t.subtreeFlags)||o){o=Tl.transition,Tl.transition=null;var s=wn;wn=1;var l=El;El|=4,Al.current=null,function(e,n){if(ea=Gn,fr(e=pr())){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(r&&0!==r.rangeCount){t=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{t.nodeType,o.nodeType}catch(S){t=null;break e}var s=0,l=-1,c=-1,u=0,d=0,p=e,f=null;n:for(;;){for(var h;p!==t||0!==a&&3!==p.nodeType||(l=s+a),p!==o||0!==r&&3!==p.nodeType||(c=s+r),3===p.nodeType&&(s+=p.nodeValue.length),null!==(h=p.firstChild);)f=p,p=h;for(;;){if(p===e)break n;if(f===t&&++u===a&&(l=s),f===o&&++d===r&&(c=s),null!==(h=p.nextSibling))break;f=(p=f).parentNode}p=h}t=-1===l||-1===c?null:{start:l,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(na={focusedElem:e,selectionRange:t},Gn=!1,Zs=n;null!==Zs;)if(e=(n=Zs).child,0!==(1028&n.subtreeFlags)&&null!==e)e.return=n,Zs=e;else for(;null!==Zs;){n=Zs;try{var m=n.alternate;if(0!==(1024&n.flags))switch(n.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=n.stateNode,b=v.getSnapshotBeforeUpdate(n.elementType===n.type?g:ts(n.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=n.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(i(163))}}catch(S){Ic(n,n.return,S)}if(null!==(e=n.sibling)){e.return=n.return,Zs=e;break}Zs=n.return}m=nl,nl=!1}(e,t),gl(t,e),hr(na),Gn=!!ea,na=ea=null,e.current=t,vl(t,e,a),Xe(),El=l,wn=s,Tl.transition=o}else e.current=t;if(ql&&(ql=!1,Kl=e,Yl=a),o=e.pendingLanes,0===o&&(Hl=null),function(e){if(on&&"function"===typeof on.onCommitFiberRoot)try{on.onCommitFiberRoot(an,e,void 0,128===(128&e.current.flags))}catch(n){}}(t.stateNode),rc(e,Je()),null!==n)for(r=e.onRecoverableError,t=0;t<n.length;t++)a=n[t],r(a.value,{componentStack:a.stack,digest:a.digest});if(Vl)throw Vl=!1,e=Gl,Gl=null,e;0!==(1&Yl)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Jl?Xl++:(Xl=0,Jl=e):Xl=0,Wa()}(e,n,t,r)}finally{Tl.transition=a,wn=r}return null}function xc(){if(null!==Kl){var e=Sn(Yl),n=Tl.transition,t=wn;try{if(Tl.transition=null,wn=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,Yl=0,0!==(6&El))throw Error(i(331));var a=El;for(El|=4,Zs=e.current;null!==Zs;){var o=Zs,s=o.child;if(0!==(16&Zs.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zs=u;null!==Zs;){var d=Zs;switch(d.tag){case 0:case 11:case 15:tl(8,d,o)}var p=d.child;if(null!==p)p.return=d,Zs=p;else for(;null!==Zs;){var f=(d=Zs).sibling,h=d.return;if(il(d),d===u){Zs=null;break}if(null!==f){f.return=h,Zs=f;break}Zs=h}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Zs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(o=Zs).flags))switch(o.tag){case 0:case 11:case 15:tl(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Zs=v;break e}Zs=o.return}}var b=e.current;for(Zs=b;null!==Zs;){var w=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Zs=w;else e:for(s=b;null!==Zs;){if(0!==(2048&(l=Zs).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){Ic(l,l.return,x)}if(l===s){Zs=null;break e}var S=l.sibling;if(null!==S){S.return=l.return,Zs=S;break e}Zs=l.return}}if(El=a,Wa(),on&&"function"===typeof on.onPostCommitFiberRoot)try{on.onPostCommitFiberRoot(an,e)}catch(x){}r=!0}return r}finally{wn=t,Tl.transition=n}}return!1}function kc(e,n,t){e=zi(e,n=fs(0,n=cs(t,n),1),1),n=ec(),null!==e&&(vn(e,1,n),rc(e,n))}function Ic(e,n,t){if(3===e.tag)kc(e,e,t);else for(;null!==n;){if(3===n.tag){kc(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){n=zi(n,e=hs(n,e=cs(t,e),1),1),e=ec(),null!==n&&(vn(n,1,e),rc(n,e));break}}n=n.return}}function _c(e,n,t){var r=e.pingCache;null!==r&&r.delete(n),n=ec(),e.pingedLanes|=e.suspendedLanes&t,Ol===e&&(Nl&t)===t&&(4===Fl||3===Fl&&(130023424&Nl)===Nl&&500>Je()-Ul?pc(e,0):jl|=t),rc(e,n)}function Ac(e,n){0===n&&(0===(1&e.mode)?n=1:(n=dn,0===(130023424&(dn<<=1))&&(dn=4194304)));var t=ec();null!==(e=Fi(e,n))&&(vn(e,n,t),rc(e,t))}function Tc(e){var n=e.memoizedState,t=0;null!==n&&(t=n.retryLane),Ac(e,t)}function Ec(e,n){var t=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(t=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(n),Ac(e,t)}function Oc(e,n){return qe(e,n)}function Cc(e,n,t,r){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(e,n,t,r){return new Cc(e,n,t,r)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,n){var t=e.alternate;return null===t?((t=Nc(e.tag,n,e.key,e.mode)).elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=14680064&e.flags,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function Fc(e,n,t,r,a,o){var s=2;if(r=e,"function"===typeof e)Mc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return Rc(t.children,a,o,n);case I:s=8,a|=8;break;case _:return(e=Nc(12,t,n,2|a)).elementType=_,e.lanes=o,e;case O:return(e=Nc(13,t,n,a)).elementType=O,e.lanes=o,e;case C:return(e=Nc(19,t,n,a)).elementType=C,e.lanes=o,e;case P:return Lc(t,a,o,n);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case T:s=9;break e;case E:s=11;break e;case N:s=14;break e;case M:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(n=Nc(s,t,n,a)).elementType=e,n.type=r,n.lanes=o,n}function Rc(e,n,t,r){return(e=Nc(7,e,r,n)).lanes=t,e}function Lc(e,n,t,r){return(e=Nc(22,e,r,n)).elementType=P,e.lanes=t,e.stateNode={isHidden:!1},e}function Dc(e,n,t){return(e=Nc(6,e,null,n)).lanes=t,e}function jc(e,n,t){return(n=Nc(4,null!==e.children?e.children:[],e.key,n)).lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function zc(e,n,t,r,a){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yn(0),this.expirationTimes=yn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yn(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Bc(e,n,t,r,a,i,o,s,l){return e=new zc(e,n,t,s,l),1===n?(n=1,!0===i&&(n|=8)):n=0,i=Nc(3,null,null,n),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Li(i),e}function Uc(e){if(!e)return Ta;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Ma(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(null!==n);throw Error(i(171))}if(1===e.tag){var t=e.type;if(Ma(t))return Ra(e,t,n)}return n}function Wc(e,n,t,r,a,i,o,s,l){return(e=Bc(t,r,!0,e,0,i,0,s,l)).context=Uc(null),t=e.current,(i=ji(r=ec(),a=nc(t))).callback=void 0!==n&&null!==n?n:null,zi(t,i,a),e.current.lanes=a,vn(e,a,r),rc(e,r),e}function $c(e,n,t,r){var a=n.current,i=ec(),o=nc(a);return t=Uc(t),null===n.context?n.context=t:n.pendingContext=t,(n=ji(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(n.callback=r),null!==(e=zi(a,n,o))&&(tc(e,a,o,i),Bi(e,a,o)),o}function Vc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,n){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var t=e.retryLane;e.retryLane=0!==t&&t<n?t:n}}function Hc(e,n){Gc(e,n),(e=e.alternate)&&Gc(e,n)}kl=function(e,n,t){if(null!==e)if(e.memoizedProps!==n.pendingProps||Oa.current)bs=!0;else{if(0===(e.lanes&t)&&0===(128&n.flags))return bs=!1,function(e,n,t){switch(n.tag){case 3:Os(n),fi();break;case 5:Ji(n);break;case 1:Ma(n.type)&&La(n);break;case 4:Yi(n,n.stateNode.containerInfo);break;case 10:var r=n.type._context,a=n.memoizedProps.value;Aa(xi,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=n.memoizedState))return null!==r.dehydrated?(Aa(Qi,1&Qi.current),n.flags|=128,null):0!==(t&n.child.childLanes)?Ds(e,n,t):(Aa(Qi,1&Qi.current),null!==(e=Vs(e,n,t))?e.sibling:null);Aa(Qi,1&Qi.current);break;case 19:if(r=0!==(t&n.childLanes),0!==(128&e.flags)){if(r)return Ws(e,n,t);n.flags|=128}if(null!==(a=n.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Aa(Qi,Qi.current),r)break;return null;case 22:case 23:return n.lanes=0,Is(e,n,t)}return Vs(e,n,t)}(e,n,t);bs=0!==(131072&e.flags)}else bs=!1,ai&&0!==(1048576&n.flags)&&Qa(n,Ha,n.index);switch(n.lanes=0,n.tag){case 2:var r=n.type;$s(e,n),e=n.pendingProps;var a=Na(n,Ea.current);Oi(n,t),a=go(null,n,r,e,a,t);var o=yo();return n.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Ma(r)?(o=!0,La(n)):o=!1,n.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Li(n),a.updater=as,n.stateNode=a,a._reactInternals=n,ls(n,r,e,t),n=Es(null,n,r,!0,o,t)):(n.tag=0,ai&&o&&ei(n),ws(null,n,a,t),n=n.child),n;case 16:r=n.elementType;e:{switch($s(e,n),e=n.pendingProps,r=(a=r._init)(r._payload),n.type=r,a=n.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===N)return 14}return 2}(r),e=ts(r,e),a){case 0:n=As(null,n,r,e,t);break e;case 1:n=Ts(null,n,r,e,t);break e;case 11:n=Ss(null,n,r,e,t);break e;case 14:n=xs(null,n,r,ts(r.type,e),t);break e}throw Error(i(306,r,""))}return n;case 0:return r=n.type,a=n.pendingProps,As(e,n,r,a=n.elementType===r?a:ts(r,a),t);case 1:return r=n.type,a=n.pendingProps,Ts(e,n,r,a=n.elementType===r?a:ts(r,a),t);case 3:e:{if(Os(n),null===e)throw Error(i(387));r=n.pendingProps,a=(o=n.memoizedState).element,Di(e,n),Wi(n,r,null,t);var s=n.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},n.updateQueue.baseState=o,n.memoizedState=o,256&n.flags){n=Cs(e,n,r,t,a=cs(Error(i(423)),n));break e}if(r!==a){n=Cs(e,n,r,t,a=cs(Error(i(424)),n));break e}for(ri=ca(n.stateNode.containerInfo.firstChild),ti=n,ai=!0,ii=null,t=Si(n,null,r,t),n.child=t;t;)t.flags=-3&t.flags|4096,t=t.sibling}else{if(fi(),r===a){n=Vs(e,n,t);break e}ws(e,n,r,t)}n=n.child}return n;case 5:return Ji(n),null===e&&ci(n),r=n.type,a=n.pendingProps,o=null!==e?e.memoizedProps:null,s=a.children,ta(r,a)?s=null:null!==o&&ta(r,o)&&(n.flags|=32),_s(e,n),ws(e,n,s,t),n.child;case 6:return null===e&&ci(n),null;case 13:return Ds(e,n,t);case 4:return Yi(n,n.stateNode.containerInfo),r=n.pendingProps,null===e?n.child=wi(n,null,r,t):ws(e,n,r,t),n.child;case 11:return r=n.type,a=n.pendingProps,Ss(e,n,r,a=n.elementType===r?a:ts(r,a),t);case 7:return ws(e,n,n.pendingProps,t),n.child;case 8:case 12:return ws(e,n,n.pendingProps.children,t),n.child;case 10:e:{if(r=n.type._context,a=n.pendingProps,o=n.memoizedProps,s=a.value,Aa(xi,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===a.children&&!Oa.current){n=Vs(e,n,t);break e}}else for(null!==(o=n.child)&&(o.return=n);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ji(-1,t&-t)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=t,null!==(c=o.alternate)&&(c.lanes|=t),Ei(o.return,t,n),l.lanes|=t;break}c=c.next}}else if(10===o.tag)s=o.type===n.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(i(341));s.lanes|=t,null!==(l=s.alternate)&&(l.lanes|=t),Ei(s,t,n),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===n){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}ws(e,n,a.children,t),n=n.child}return n;case 9:return a=n.type,r=n.pendingProps.children,Oi(n,t),r=r(a=Ci(a)),n.flags|=1,ws(e,n,r,t),n.child;case 14:return a=ts(r=n.type,n.pendingProps),xs(e,n,r,a=ts(r.type,a),t);case 15:return ks(e,n,n.type,n.pendingProps,t);case 17:return r=n.type,a=n.pendingProps,a=n.elementType===r?a:ts(r,a),$s(e,n),n.tag=1,Ma(r)?(e=!0,La(n)):e=!1,Oi(n,t),os(n,r,a),ls(n,r,a,t),Es(null,n,r,!0,e,t);case 19:return Ws(e,n,t);case 22:return Is(e,n,t)}throw Error(i(156,n.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function Qc(e,n,t,r,a){var i=t._reactRootContainer;if(i){var o=i;if("function"===typeof a){var s=a;a=function(){var e=Vc(o);s.call(e)}}$c(n,o,e,a)}else o=function(e,n,t,r,a){if(a){if("function"===typeof r){var i=r;r=function(){var e=Vc(o);i.call(e)}}var o=Wc(n,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[ha]=o.current,Wr(8===e.nodeType?e.parentNode:e),uc(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Vc(l);s.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[ha]=l.current,Wr(8===e.nodeType?e.parentNode:e),uc((function(){$c(n,l,t,r)})),l}(t,n,e,a,r);return Vc(o)}Yc.prototype.render=Kc.prototype.render=function(e){var n=this._internalRoot;if(null===n)throw Error(i(409));$c(e,n,null,null)},Yc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var n=e.containerInfo;uc((function(){$c(null,e,null,null)})),n[ha]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var n=_n();e={blockedOn:null,target:e,priority:n};for(var t=0;t<Fn.length&&0!==n&&n<Fn[t].priority;t++);Fn.splice(t,0,e),0===t&&jn(e)}},xn=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var t=pn(n.pendingLanes);0!==t&&(bn(n,1|t),rc(n,Je()),0===(6&El)&&(Wl=Je()+500,Wa()))}break;case 13:uc((function(){var n=Fi(e,1);if(null!==n){var t=ec();tc(n,e,1,t)}})),Hc(e,1)}},kn=function(e){if(13===e.tag){var n=Fi(e,134217728);if(null!==n)tc(n,e,134217728,ec());Hc(e,134217728)}},In=function(e){if(13===e.tag){var n=nc(e),t=Fi(e,n);if(null!==t)tc(t,e,n,ec());Hc(e,n)}},_n=function(){return wn},An=function(e,n){var t=wn;try{return wn=e,n()}finally{wn=t}},xe=function(e,n,t){switch(n){case"input":if(Z(e,t),n=t.name,"radio"===t.type&&null!=n){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<t.length;n++){var r=t[n];if(r!==e&&r.form===e.form){var a=Sa(r);if(!a)throw Error(i(90));q(r),Z(r,a)}}}break;case"textarea":ie(e,t);break;case"select":null!=(n=t.value)&&te(e,!!t.multiple,n,!1)}},Ee=cc,Oe=uc;var eu={usingClientEntryPoint:!1,Events:[ba,wa,Sa,Ae,Te,cc]},nu={findFiberByHostInstance:va,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tu={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{an=ru.inject(tu),on=ru}catch(ue){}}n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,n.createPortal=function(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(n))throw Error(i(200));return function(e,n,t){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:n,implementation:t}}(e,n,null,t)},n.createRoot=function(e,n){if(!Xc(e))throw Error(i(299));var t=!1,r="",a=qc;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(t=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),n=Bc(e,1,!1,null,0,t,0,r,a),e[ha]=n.current,Wr(8===e.nodeType?e.parentNode:e),new Kc(n)},n.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var n=e._reactInternals;if(void 0===n){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ge(n))?null:e.stateNode},n.flushSync=function(e){return uc(e)},n.hydrate=function(e,n,t){if(!Jc(n))throw Error(i(200));return Qc(null,e,n,!0,t)},n.hydrateRoot=function(e,n,t){if(!Xc(e))throw Error(i(405));var r=null!=t&&t.hydratedSources||null,a=!1,o="",s=qc;if(null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(a=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),n=Wc(n,null,e,1,null!=t?t:null,a,0,o,s),e[ha]=n.current,Wr(e),r)for(e=0;e<r.length;e++)a=(a=(t=r[e])._getVersion)(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a);return new Yc(n)},n.render=function(e,n,t){if(!Jc(n))throw Error(i(200));return Qc(null,e,n,!1,t)},n.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(i(40));return!!e._reactRootContainer&&(uc((function(){Qc(null,null,e,!1,(function(){e._reactRootContainer=null,e[ha]=null}))})),!0)},n.unstable_batchedUpdates=cc,n.unstable_renderSubtreeIntoContainer=function(e,n,t,r){if(!Jc(t))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Qc(e,n,t,!1,r)},n.version="18.3.1-next-f1338f8080-20240426"},391:(e,n,t)=>{"use strict";var r=t(950);n.createRoot=r.createRoot,n.hydrateRoot=r.hydrateRoot},950:(e,n,t)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}(),e.exports=t(730)},528:(e,n)=>{"use strict";var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler");Symbol.for("react.provider");var s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),h=Symbol.for("react.offscreen"),m=Symbol.for("react.client.reference");function g(e){if("object"===typeof e&&null!==e){var n=e.$$typeof;switch(n){case t:switch(e=e.type){case a:case o:case i:case u:case d:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case p:case s:return e;default:return n}}case r:return n}}}n.Hy=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===o||e===i||e===u||e===d||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===p||e.$$typeof===l||e.$$typeof===s||e.$$typeof===c||e.$$typeof===m||void 0!==e.getModuleId)},n.QP=g},358:(e,n)=>{"use strict";var t,r=Symbol.for("react.element"),a=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var n=e.$$typeof;switch(n){case r:switch(e=e.type){case i:case s:case o:case p:case f:return e;default:switch(e=e&&e.$$typeof){case u:case c:case d:case m:case h:case l:return e;default:return n}}case a:return n}}}t=Symbol.for("react.module.reference")},706:(e,n,t)=>{"use strict";t(358)},153:(e,n,t)=>{"use strict";var r=t(43),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,n,t){var r,i={},c=null,u=null;for(r in void 0!==t&&(c=""+t),void 0!==n.key&&(c=""+n.key),void 0!==n.ref&&(u=n.ref),n)o.call(n,r)&&!l.hasOwnProperty(r)&&(i[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps)void 0===i[r]&&(i[r]=n[r]);return{$$typeof:a,type:e,key:c,ref:u,props:i,_owner:s.current}}n.Fragment=i,n.jsx=c,n.jsxs=c},202:(e,n)=>{"use strict";var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,n,t){this.props=e,this.context=n,this.refs=g,this.updater=t||h}function v(){}function b(e,n,t){this.props=e,this.context=n,this.refs=g,this.updater=t||h}y.prototype.isReactComponent={},y.prototype.setState=function(e,n){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,m(w,y.prototype),w.isPureReactComponent=!0;var S=Array.isArray,x=Object.prototype.hasOwnProperty,k={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function _(e,n,r){var a,i={},o=null,s=null;if(null!=n)for(a in void 0!==n.ref&&(s=n.ref),void 0!==n.key&&(o=""+n.key),n)x.call(n,a)&&!I.hasOwnProperty(a)&&(i[a]=n[a]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===i[a]&&(i[a]=l[a]);return{$$typeof:t,type:e,key:o,ref:s,props:i,_owner:k.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===t}var T=/\/+/g;function E(e,n){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return n[e]}))}(""+e.key):n.toString(36)}function O(e,n,a,i,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case t:case r:l=!0}}if(l)return o=o(l=e),e=""===i?"."+E(l,0):i,S(o)?(a="",null!=e&&(a=e.replace(T,"$&/")+"/"),O(o,n,a,"",(function(e){return e}))):null!=o&&(A(o)&&(o=function(e,n){return{$$typeof:t,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),n.push(o)),1;if(l=0,i=""===i?".":i+":",S(e))for(var c=0;c<e.length;c++){var u=i+E(s=e[c],c);l+=O(s,n,a,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=O(s=s.value,n,a,u=i+E(s,c++),o);else if("object"===s)throw n=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return l}function C(e,n,t){if(null==e)return e;var r=[],a=0;return O(e,r,"","",(function(e){return n.call(t,e,a++)})),r}function N(e){if(-1===e._status){var n=e._result;(n=n()).then((function(n){0!==e._status&&-1!==e._status||(e._status=1,e._result=n)}),(function(n){0!==e._status&&-1!==e._status||(e._status=2,e._result=n)})),-1===e._status&&(e._status=0,e._result=n)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},P={transition:null},F={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:P,ReactCurrentOwner:k};function R(){throw Error("act(...) is not supported in production builds of React.")}n.Children={map:C,forEach:function(e,n,t){C(e,(function(){n.apply(this,arguments)}),t)},count:function(e){var n=0;return C(e,(function(){n++})),n},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},n.Component=y,n.Fragment=a,n.Profiler=o,n.PureComponent=b,n.StrictMode=i,n.Suspense=u,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,n.act=R,n.cloneElement=function(e,n,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),i=e.key,o=e.ref,s=e._owner;if(null!=n){if(void 0!==n.ref&&(o=n.ref,s=k.current),void 0!==n.key&&(i=""+n.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in n)x.call(n,c)&&!I.hasOwnProperty(c)&&(a[c]=void 0===n[c]&&void 0!==l?l[c]:n[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];a.children=l}return{$$typeof:t,type:e.type,key:i,ref:o,props:a,_owner:s}},n.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},n.createElement=_,n.createFactory=function(e){var n=_.bind(null,e);return n.type=e,n},n.createRef=function(){return{current:null}},n.forwardRef=function(e){return{$$typeof:c,render:e}},n.isValidElement=A,n.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:N}},n.memo=function(e,n){return{$$typeof:d,type:e,compare:void 0===n?null:n}},n.startTransition=function(e){var n=P.transition;P.transition={};try{e()}finally{P.transition=n}},n.unstable_act=R,n.useCallback=function(e,n){return M.current.useCallback(e,n)},n.useContext=function(e){return M.current.useContext(e)},n.useDebugValue=function(){},n.useDeferredValue=function(e){return M.current.useDeferredValue(e)},n.useEffect=function(e,n){return M.current.useEffect(e,n)},n.useId=function(){return M.current.useId()},n.useImperativeHandle=function(e,n,t){return M.current.useImperativeHandle(e,n,t)},n.useInsertionEffect=function(e,n){return M.current.useInsertionEffect(e,n)},n.useLayoutEffect=function(e,n){return M.current.useLayoutEffect(e,n)},n.useMemo=function(e,n){return M.current.useMemo(e,n)},n.useReducer=function(e,n,t){return M.current.useReducer(e,n,t)},n.useRef=function(e){return M.current.useRef(e)},n.useState=function(e){return M.current.useState(e)},n.useSyncExternalStore=function(e,n,t){return M.current.useSyncExternalStore(e,n,t)},n.useTransition=function(){return M.current.useTransition()},n.version="18.3.1"},43:(e,n,t)=>{"use strict";e.exports=t(202)},579:(e,n,t)=>{"use strict";e.exports=t(153)},868:(e,n,t)=>{"use strict";n.A=void 0;var r,a=t(531),i=(r=t(599))&&r.__esModule?r:{default:r};function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e){var n,t=e.store,r=e.params,o=e.replaceState,s=e.initialTruth,l=e.history,c=void 0===l?(0,a.createBrowserHistory)():l,u=t.dispatch,d=!1,p=!1;function f(e){return Object.hasOwnProperty.call(e,"location")?e.location:Object.hasOwnProperty.call(e,"getCurrentLocation")?e.getCurrentLocation():void 0}function h(e){var n=new i.default(e.search),t={};return Object.keys(r).forEach((function(e){var a=r[e],i=a.defaultValue,o=a.stringToValue,s=void 0===o?function(e){return e}:o,l=n.get(e),c=null===l?i:s(l);t[e]=c})),t}function m(e){if(void 0!==e.location&&(e=e.location),!d){var a=t.getState(),i=h(e),o=[];Object.keys(i).forEach((function(e){var t=i[e];if(void 0===n||n[e]!==t){var s=r[e],l=s.selector,c=s.action;l(a)!==t&&o.push(c(t))}})),n=i,p=!0,o.forEach((function(e){u(e)})),p=!1,g({replaceState:!0})}}function g(e){var a=e.replaceState;if(!p){var o=t.getState(),s=f(c),l=new i.default(s.search);Object.keys(r).forEach((function(e){var t=r[e],a=t.selector,i=t.defaultValue,s=t.valueToString,c=void 0===s?function(e){return"".concat(e)}:s,u=a(o);u===i?l.delete(e):l.set(e,c(u)),n[e]=u}));var u="?".concat(l);if(u!==(s.search||"?")){d=!0;var h={pathname:s.pathname,search:u,hash:s.hash,state:s.state};a?c.replace(h):c.push(h),d=!1}}}var y=c.listen(m),v=t.subscribe((function(){return g({replaceState:o})}));return"location"===s?m(f(c)):n=h(f(c)),"store"===s&&g({replaceState:!0}),function(){y(),v()}}l.enhancer=function(e){return function(n){return function(t,r,a){var i=n(t,r,a);return l(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(t,!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({store:i},e)),i}}};var c=l;n.A=c},234:(e,n)=>{"use strict";function t(e,n){var t=e.length;e.push(n);e:for(;0<t;){var r=t-1>>>1,a=e[r];if(!(0<i(a,n)))break e;e[r]=n,e[t]=a,t=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var n=e[0],t=e.pop();if(t!==n){e[0]=t;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>i(l,t))c<a&&0>i(u,l)?(e[r]=u,e[c]=t,r=c):(e[r]=l,e[s]=t,r=s);else{if(!(c<a&&0>i(u,t)))break e;e[r]=u,e[c]=t,r=c}}}return n}function i(e,n){var t=e.sortIndex-n.sortIndex;return 0!==t?t:e.id-n.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();n.unstable_now=function(){return s.now()-l}}var c=[],u=[],d=1,p=null,f=3,h=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var n=r(u);null!==n;){if(null===n.callback)a(u);else{if(!(n.startTime<=e))break;a(u),n.sortIndex=n.expirationTime,t(c,n)}n=r(u)}}function S(e){if(g=!1,w(e),!m)if(null!==r(c))m=!0,P(x);else{var n=r(u);null!==n&&F(S,n.startTime-e)}}function x(e,t){m=!1,g&&(g=!1,v(A),A=-1),h=!0;var i=f;try{for(w(t),p=r(c);null!==p&&(!(p.expirationTime>t)||e&&!O());){var o=p.callback;if("function"===typeof o){p.callback=null,f=p.priorityLevel;var s=o(p.expirationTime<=t);t=n.unstable_now(),"function"===typeof s?p.callback=s:p===r(c)&&a(c),w(t)}else a(c);p=r(c)}if(null!==p)var l=!0;else{var d=r(u);null!==d&&F(S,d.startTime-t),l=!1}return l}finally{p=null,f=i,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,I=!1,_=null,A=-1,T=5,E=-1;function O(){return!(n.unstable_now()-E<T)}function C(){if(null!==_){var e=n.unstable_now();E=e;var t=!0;try{t=_(!0,e)}finally{t?k():(I=!1,_=null)}}else I=!1}if("function"===typeof b)k=function(){b(C)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,M=N.port2;N.port1.onmessage=C,k=function(){M.postMessage(null)}}else k=function(){y(C,0)};function P(e){_=e,I||(I=!0,k())}function F(e,t){A=y((function(){e(n.unstable_now())}),t)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(e){e.callback=null},n.unstable_continueExecution=function(){m||h||(m=!0,P(x))},n.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return r(c)},n.unstable_next=function(e){switch(f){case 1:case 2:case 3:var n=3;break;default:n=f}var t=f;f=n;try{return e()}finally{f=t}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var t=f;f=e;try{return n()}finally{f=t}},n.unstable_scheduleCallback=function(e,a,i){var o=n.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>o?(e.sortIndex=i,t(u,e),null===r(c)&&e===r(u)&&(g?(v(A),A=-1):g=!0,F(S,i-o))):(e.sortIndex=s,t(c,e),m||h||(m=!0,P(x))),e},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(e){var n=f;return function(){var t=f;f=n;try{return e.apply(this,arguments)}finally{f=t}}}},853:(e,n,t)=>{"use strict";e.exports=t(234)},324:e=>{e.exports=function(e,n,t,r){var a=t?t.call(r,e,n):void 0;if(void 0!==a)return!!a;if(e===n)return!0;if("object"!==typeof e||!e||"object"!==typeof n||!n)return!1;var i=Object.keys(e),o=Object.keys(n);if(i.length!==o.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(n),l=0;l<i.length;l++){var c=i[l];if(!s(c))return!1;var u=e[c],d=n[c];if(!1===(a=t?t.call(r,u,d,c):void 0)||void 0===a&&u!==d)return!1}return!0}},330:(e,n,t)=>{"use strict";var r=t(43);var a="function"===typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e===1/n)||e!==e&&n!==n},i=r.useState,o=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function c(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!a(e,t)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,n){return n()}:function(e,n){var t=n(),r=i({inst:{value:t,getSnapshot:n}}),a=r[0].inst,u=r[1];return s((function(){a.value=t,a.getSnapshot=n,c(a)&&u({inst:a})}),[e,t,n]),o((function(){return c(a)&&u({inst:a}),e((function(){c(a)&&u({inst:a})}))}),[e]),l(t),t};n.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},717:(e,n,t)=>{"use strict";var r=t(43),a=t(461);var i="function"===typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e===1/n)||e!==e&&n!==n},o=a.useSyncExternalStore,s=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;n.useSyncExternalStoreWithSelector=function(e,n,t,r,a){var d=s(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=c((function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==a&&p.hasValue){var n=p.value;if(a(n,e))return s=n}return s=e}if(n=s,i(o,e))return n;var t=r(e);return void 0!==a&&a(n,t)?(o=e,n):(o=e,s=t)}var o,s,l=!1,c=void 0===t?null:t;return[function(){return e(n())},null===c?void 0:function(){return e(c())}]}),[n,t,r,a]);var f=o(e,d[0],d[1]);return l((function(){p.hasValue=!0,p.value=f}),[f]),u(f),f}},461:(e,n,t)=>{"use strict";e.exports=t(330)},443:(e,n,t)=>{"use strict";e.exports=t(717)},631:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfEAAABTCAYAAACPkT4sAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAABGRJREFUeJzt3b2LpWcdxvHrPjsYk0IlWARTpFhlTmwkWmhnLIyBWDwklYhV8K1KlZkJmGYRnBlsgghGgoJJBAvjIyiolfGlFDW+7BxICgNbicKKLyjJ3P4FSnafM3PPL/v59PM71zzDme9wmmmbHPQs87396eThhTeG+9K8+7FV2o+W3Gjpn9ubNk9va9NZOJzXP23Jh0fvWKqlf3xv2vxw9I7/52i+9+WkXx69Y6me1fsOpj++NHrHWTqedx/qaT8YvWOpnrx4MJ3cP3rHWTuc1z9uyQOjdyzV0h7Zm66+sOTGaltjAIDzJeIAUJSIA0BRIg4ARYk4ABQl4gBQlIgDQFEiDgBFiTgAFCXiAFCUiANAUSIOAEWJOAAUJeIAUJSIA0BRO6MHJMnh/N6PrHL6niU3ruWt33hq+s1r29rE//TvpH9r9IjXk1dHbzh77a/J6XfHbljd19IfOZ7XH7rZCz25vj+dfGebqy6onyV9M3JAS/vg8bz+zLIb/ZePT5s/bGvTBfVa0r85dkK7fJr+0eN5/c4lVy5ExFc5fbQnn1xy4878/fkkIn7GWvLPvWmz6JcEb1S/tj/4WR/O6ydbcqUvutJeSXIrRPzZ/WnzzMgBR/P6zz15etmV1WNJ3tQR78l/Dga/t47n9SeSfHvZe8vH6QBQlogDQFEiDgBFiTgAFCXiAFCUiANAUSIOAEWJOAAUJeIAUJSIA0BRIg4ARYk4ABQl4gBQlIgDQFEiDgBFXYj/J04dPXnb4bz7q9E7WvLY/rT5xegdZ+zdo591S+4a+frFfOFw3v384A2vnCYPLjmwk7y6rTGcPRHnRl1qae8fPaKlv330hnNw+0V41rxh97S0e0YO6MmLT0wnw//I5vz4OB0AihJxAChKxAGgKBEHgKJEHACKEnEAKErEAaAoEQeAokQcAIoScQAoSsQBoCgRB4CiRBwAihJxACjKvyLlRr3e0387ekSS66MHnIN/9fSrIwe0tLuSvGvkhkL+1NP/MnJAS9uMfH3On4hzQ1ryt/1p84HRO24RLx8MftaH8/rJllwZuaGQLx5Mm2dGj+DW4uN0AChKxAGgKBEHgKJEHACKEnEAKErEAaAoEQeAokQcAIoScQAoSsQBoCgRB4CiRBwAihJxAChKxAGgKBEHgKJ2WvLZJQdO095xNO9+fcmNnv77lrZox23Z+fLRvHvp5jfk+tJnkfSfL/v6i68ndyz9eW/DafKVJ6bN70bvOFvt7vHPut2X5EpLv3azF3r69S0OgsVa8pbR762eXO7J11bJr5fc2dmbThZ9I8fzvQ/3tKMlN3r6p/ank+eW3Dic1/9I2h0LTvxkbzp5fMmGW8RtSfv06BGX0r+f5E0e8X7n+Gfd07N6dH+6+tLYHbBVO+PfW8kq7at709UXlt0AAEoScQAoSsQBoCgRB4CiRBwAihJxAChKxAGgKBEHgKJEHACKEnEAKErEAaAoEQeAokQcAIoScQAoSsQBoKj/ApGS0l+mZnzQAAAAAElFTkSuQmCC"},168:(e,n,t)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},r.apply(null,arguments)}t.d(n,{A:()=>r})}},n={};function t(r){var a=n[r];if(void 0!==a)return a.exports;var i=n[r]={exports:{}};return e[r](i,i.exports,t),i.exports}t.m=e,t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.f={},t.e=e=>Promise.all(Object.keys(t.f).reduce(((n,r)=>(t.f[r](e,n),n)),[])),t.u=e=>"static/js/"+e+".fffb421b.chunk.js",t.miniCssF=e=>{},t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={},n="webpd_website:";t.l=(r,a,i,o)=>{if(e[r])e[r].push(a);else{var s,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==n+i){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,t.nc&&s.setAttribute("nonce",t.nc),s.setAttribute("data-webpack",n+i),s.src=r),e[r]=[a];var p=(n,t)=>{s.onerror=s.onload=null,clearTimeout(f);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((e=>e(t))),n)return n(t)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.p="./",(()=>{t.b=document.baseURI||self.location.href;var e={792:0};t.f.j=(n,r)=>{var a=t.o(e,n)?e[n]:void 0;if(0!==a)if(a)r.push(a[2]);else{var i=new Promise(((t,r)=>a=e[n]=[t,r]));r.push(a[2]=i);var o=t.p+t.u(n),s=new Error;t.l(o,(r=>{if(t.o(e,n)&&(0!==(a=e[n])&&(e[n]=void 0),a)){var i=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+n+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,a[1](s)}}),"chunk-"+n,n)}};var n=(n,r)=>{var a,i,o=r[0],s=r[1],l=r[2],c=0;if(o.some((n=>0!==e[n]))){for(a in s)t.o(s,a)&&(t.m[a]=s[a]);if(l)l(t)}for(n&&n(r);c<o.length;c++)i=o[c],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkwebpd_website=self.webpackChunkwebpd_website||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))})(),t.nc=void 0,(()=>{"use strict";var e=t(43),n=t(391);function r(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var a=t(528),i=t(324),o=t.n(i);const s=function(e){function n(e,r,l,c,p){for(var f,h,m,g,w,x=0,k=0,I=0,_=0,A=0,M=0,F=m=f=0,L=0,D=0,j=0,z=0,B=l.length,U=B-1,W="",$="",V="",G="";L<B;){if(h=l.charCodeAt(L),L===U&&0!==k+_+I+x&&(0!==k&&(h=47===k?10:47),_=I=x=0,B++,U++),0===k+_+I+x){if(L===U&&(0<D&&(W=W.replace(d,"")),0<W.trim().length)){switch(h){case 32:case 9:case 59:case 13:case 10:break;default:W+=l.charAt(L)}h=59}switch(h){case 123:for(f=(W=W.trim()).charCodeAt(0),m=1,z=++L;L<B;){switch(h=l.charCodeAt(L)){case 123:m++;break;case 125:m--;break;case 47:switch(h=l.charCodeAt(L+1)){case 42:case 47:e:{for(F=L+1;F<U;++F)switch(l.charCodeAt(F)){case 47:if(42===h&&42===l.charCodeAt(F-1)&&L+2!==F){L=F+1;break e}break;case 10:if(47===h){L=F+1;break e}}L=F}}break;case 91:h++;case 40:h++;case 34:case 39:for(;L++<U&&l.charCodeAt(L)!==h;);}if(0===m)break;L++}if(m=l.substring(z,L),0===f&&(f=(W=W.replace(u,"").trim()).charCodeAt(0)),64===f){switch(0<D&&(W=W.replace(d,"")),h=W.charCodeAt(1)){case 100:case 109:case 115:case 45:D=r;break;default:D=N}if(z=(m=n(r,D,m,h,p+1)).length,0<P&&(w=s(3,m,D=t(N,W,j),r,E,T,z,h,p,c),W=D.join(""),void 0!==w&&0===(z=(m=w.trim()).length)&&(h=0,m="")),0<z)switch(h){case 115:W=W.replace(S,o);case 100:case 109:case 45:m=W+"{"+m+"}";break;case 107:m=(W=W.replace(y,"$1 $2"))+"{"+m+"}",m=1===C||2===C&&i("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=W+m,112===c&&($+=m,m="")}else m=""}else m=n(r,t(r,W,j),m,c,p+1);V+=m,m=j=D=F=f=0,W="",h=l.charCodeAt(++L);break;case 125:case 59:if(1<(z=(W=(0<D?W.replace(d,""):W).trim()).length))switch(0===F&&(f=W.charCodeAt(0),45===f||96<f&&123>f)&&(z=(W=W.replace(" ",":")).length),0<P&&void 0!==(w=s(1,W,r,e,E,T,$.length,c,p,c))&&0===(z=(W=w.trim()).length)&&(W="\0\0"),f=W.charCodeAt(0),h=W.charCodeAt(1),f){case 0:break;case 64:if(105===h||99===h){G+=W+l.charAt(L);break}default:58!==W.charCodeAt(z-1)&&($+=a(W,f,h,W.charCodeAt(2)))}j=D=F=f=0,W="",h=l.charCodeAt(++L)}}switch(h){case 13:case 10:47===k?k=0:0===1+f&&107!==c&&0<W.length&&(D=1,W+="\0"),0<P*R&&s(0,W,r,e,E,T,$.length,c,p,c),T=1,E++;break;case 59:case 125:if(0===k+_+I+x){T++;break}default:switch(T++,g=l.charAt(L),h){case 9:case 32:if(0===_+x+k)switch(A){case 44:case 58:case 9:case 32:g="";break;default:32!==h&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===_+k+x&&(D=j=1,g="\f"+g);break;case 108:if(0===_+k+x+O&&0<F)switch(L-F){case 2:112===A&&58===l.charCodeAt(L-3)&&(O=A);case 8:111===M&&(O=M)}break;case 58:0===_+k+x&&(F=L);break;case 44:0===k+I+_+x&&(D=1,g+="\r");break;case 34:case 39:0===k&&(_=_===h?0:0===_?h:_);break;case 91:0===_+k+I&&x++;break;case 93:0===_+k+I&&x--;break;case 41:0===_+k+x&&I--;break;case 40:if(0===_+k+x){if(0===f)if(2*A+3*M===533);else f=1;I++}break;case 64:0===k+I+_+x+F+m&&(m=1);break;case 42:case 47:if(!(0<_+x+I))switch(k){case 0:switch(2*h+3*l.charCodeAt(L+1)){case 235:k=47;break;case 220:z=L,k=42}break;case 42:47===h&&42===A&&z+2!==L&&(33===l.charCodeAt(z+2)&&($+=l.substring(z,L+1)),g="",k=0)}}0===k&&(W+=g)}M=A,A=h,L++}if(0<(z=$.length)){if(D=r,0<P&&(void 0!==(w=s(2,$,D,e,E,T,z,c,p,c))&&0===($=w).length))return G+$+V;if($=D.join(",")+"{"+$+"}",0!==C*O){switch(2!==C||i($,2)||(O=0),O){case 111:$=$.replace(b,":-moz-$1")+$;break;case 112:$=$.replace(v,"::-webkit-input-$1")+$.replace(v,"::-moz-$1")+$.replace(v,":-ms-input-$1")+$}O=0}}return G+$+V}function t(e,n,t){var a=n.trim().split(m);n=a;var i=a.length,o=e.length;switch(o){case 0:case 1:var s=0;for(e=0===o?"":e[0]+" ";s<i;++s)n[s]=r(e,n[s],t).trim();break;default:var l=s=0;for(n=[];s<i;++s)for(var c=0;c<o;++c)n[l++]=r(e[c]+" ",a[s],t).trim()}return n}function r(e,n,t){var r=n.charCodeAt(0);switch(33>r&&(r=(n=n.trim()).charCodeAt(0)),r){case 38:return n.replace(g,"$1"+e.trim());case 58:return e.trim()+n.replace(g,"$1"+e.trim());default:if(0<1*t&&0<n.indexOf("\f"))return n.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+n}function a(e,n,t,r){var o=e+";",s=2*n+3*t+4*r;if(944===s){e=o.indexOf(":",9)+1;var l=o.substring(e,o.length-1).trim();return l=o.substring(0,e).trim()+l+";",1===C||2===C&&i(l,1)?"-webkit-"+l+l:l}if(0===C||2===C&&!i(o,1))return o;switch(s){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(A,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(l=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+l+o;case 1005:return f.test(o)?o.replace(p,":-webkit-")+o.replace(p,":-moz-")+o:o;case 1e3:switch(n=(l=o.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(n)){case 226:l=o.replace(w,"tb");break;case 232:l=o.replace(w,"tb-rl");break;case 220:l=o.replace(w,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+l+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(n=(o=e).length-10,s=(l=(33===o.charCodeAt(n)?o.substring(0,n):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:o=o.replace(l,"-webkit-"+l)+";"+o;break;case 207:case 102:o=o.replace(l,"-webkit-"+(102<s?"inline-":"")+"box")+";"+o.replace(l,"-webkit-"+l)+";"+o.replace(l,"-ms-"+l+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return l=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+l+"-ms-flex-"+l+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(k,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(k,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===_.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?a(e.replace("stretch","fill-available"),n,t,r).replace(":fill-available",":stretch"):o.replace(l,"-webkit-"+l)+o.replace(l,"-moz-"+l.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===t+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(h,"$1-webkit-$2")+o}return o}function i(e,n){var t=e.indexOf(1===n?":":"{"),r=e.substring(0,3!==n?t:10);return t=e.substring(t+1,e.length-1),F(2!==n?r:r.replace(I,"$1"),t,n)}function o(e,n){var t=a(n,n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2));return t!==n+";"?t.replace(x," or ($1)").substring(4):"("+n+")"}function s(e,n,t,r,a,i,o,s,l,u){for(var d,p=0,f=n;p<P;++p)switch(d=M[p].call(c,e,f,t,r,a,i,o,s,l,u)){case void 0:case!1:case!0:case null:break;default:f=d}if(f!==n)return f}function l(e){return void 0!==(e=e.prefix)&&(F=null,e?"function"!==typeof e?C=1:(C=2,F=e):C=0),l}function c(e,t){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<P){var a=s(-1,t,r,r,E,T,0,0,0,0);void 0!==a&&"string"===typeof a&&(t=a)}var i=n(N,r,t,0,0);return 0<P&&(void 0!==(a=s(-2,i,r,r,E,T,i.length,0,0,0))&&(i=a)),O=0,T=E=1,i}var u=/^\0+/g,d=/[\0\r\f]/g,p=/: */g,f=/zoo|gra/,h=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,y=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,b=/:(read-only)/g,w=/[svh]\w+-[tblr]{2}/,S=/\(\s*(.*)\s*\)/g,x=/([\s\S]*?);/g,k=/-self|flex-/g,I=/[^]*?(:[rp][el]a[\w-]+)[^]*/,_=/stretch|:\s*\w+\-(?:conte|avail)/,A=/([^-])(image-set\()/,T=1,E=1,O=0,C=1,N=[],M=[],P=0,F=null,R=0;return c.use=function e(n){switch(n){case void 0:case null:P=M.length=0;break;default:if("function"===typeof n)M[P++]=n;else if("object"===typeof n)for(var t=0,r=n.length;t<r;++t)e(n[t]);else R=0|!!n}return e},c.set=l,void 0!==e&&l(e),c};const l={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function c(e){var n=Object.create(null);return function(t){return void 0===n[t]&&(n[t]=e(t)),n[t]}}var u=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,d=c((function(e){return u.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),p=t(219),f=t.n(p);function h(){return(h=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var m=function(e,n){for(var t=[e[0]],r=0,a=n.length;r<a;r+=1)t.push(n[r],e[r+1]);return t},g=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,a.QP)(e)},y=Object.freeze([]),v=Object.freeze({});function b(e){return"function"==typeof e}function w(e){return e.displayName||e.name||"Component"}function S(e){return e&&"string"==typeof e.styledComponentId}var x="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",k="undefined"!=typeof window&&"HTMLElement"in window,I=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&(void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY))),_={};function A(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(t.length>0?" Args: "+t.join(", "):""))}var T=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var n=e.prototype;return n.indexOfGroup=function(e){for(var n=0,t=0;t<e;t++)n+=this.groupSizes[t];return n},n.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var t=this.groupSizes,r=t.length,a=r;e>=a;)(a<<=1)<0&&A(16,""+e);this.groupSizes=new Uint32Array(a),this.groupSizes.set(t),this.length=a;for(var i=r;i<a;i++)this.groupSizes[i]=0}for(var o=this.indexOfGroup(e+1),s=0,l=n.length;s<l;s++)this.tag.insertRule(o,n[s])&&(this.groupSizes[e]++,o++)},n.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],t=this.indexOfGroup(e),r=t+n;this.groupSizes[e]=0;for(var a=t;a<r;a++)this.tag.deleteRule(t)}},n.getGroup=function(e){var n="";if(e>=this.length||0===this.groupSizes[e])return n;for(var t=this.groupSizes[e],r=this.indexOfGroup(e),a=r+t,i=r;i<a;i++)n+=this.tag.getRule(i)+"/*!sc*/\n";return n},e}(),E=new Map,O=new Map,C=1,N=function(e){if(E.has(e))return E.get(e);for(;O.has(C);)C++;var n=C++;return E.set(e,n),O.set(n,e),n},M=function(e){return O.get(e)},P=function(e,n){n>=C&&(C=n+1),E.set(e,n),O.set(n,e)},F="style["+x+'][data-styled-version="5.3.11"]',R=new RegExp("^"+x+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),L=function(e,n,t){for(var r,a=t.split(","),i=0,o=a.length;i<o;i++)(r=a[i])&&e.registerName(n,r)},D=function(e,n){for(var t=(n.textContent||"").split("/*!sc*/\n"),r=[],a=0,i=t.length;a<i;a++){var o=t[a].trim();if(o){var s=o.match(R);if(s){var l=0|parseInt(s[1],10),c=s[2];0!==l&&(P(c,l),L(e,c,s[3]),e.getTag().insertRules(l,r)),r.length=0}else r.push(o)}}},j=function(){return t.nc},z=function(e){var n=document.head,t=e||n,r=document.createElement("style"),a=function(e){for(var n=e.childNodes,t=n.length;t>=0;t--){var r=n[t];if(r&&1===r.nodeType&&r.hasAttribute(x))return r}}(t),i=void 0!==a?a.nextSibling:null;r.setAttribute(x,"active"),r.setAttribute("data-styled-version","5.3.11");var o=j();return o&&r.setAttribute("nonce",o),t.insertBefore(r,i),r},B=function(){function e(e){var n=this.element=z(e);n.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var n=document.styleSheets,t=0,r=n.length;t<r;t++){var a=n[t];if(a.ownerNode===e)return a}A(17)}(n),this.length=0}var n=e.prototype;return n.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch(e){return!1}},n.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},n.getRule=function(e){var n=this.sheet.cssRules[e];return void 0!==n&&"string"==typeof n.cssText?n.cssText:""},e}(),U=function(){function e(e){var n=this.element=z(e);this.nodes=n.childNodes,this.length=0}var n=e.prototype;return n.insertRule=function(e,n){if(e<=this.length&&e>=0){var t=document.createTextNode(n),r=this.nodes[e];return this.element.insertBefore(t,r||null),this.length++,!0}return!1},n.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},n.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),W=function(){function e(e){this.rules=[],this.length=0}var n=e.prototype;return n.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},n.deleteRule=function(e){this.rules.splice(e,1),this.length--},n.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),$=k,V={isServer:!k,useCSSOMInjection:!I},G=function(){function e(e,n,t){void 0===e&&(e=v),void 0===n&&(n={}),this.options=h({},V,{},e),this.gs=n,this.names=new Map(t),this.server=!!e.isServer,!this.server&&k&&$&&($=!1,function(e){for(var n=document.querySelectorAll(F),t=0,r=n.length;t<r;t++){var a=n[t];a&&"active"!==a.getAttribute(x)&&(D(e,a),a.parentNode&&a.parentNode.removeChild(a))}}(this))}e.registerId=function(e){return N(e)};var n=e.prototype;return n.reconstructWithOptions=function(n,t){return void 0===t&&(t=!0),new e(h({},this.options,{},n),this.gs,t&&this.names||void 0)},n.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},n.getTag=function(){return this.tag||(this.tag=(t=(n=this.options).isServer,r=n.useCSSOMInjection,a=n.target,e=t?new W(a):r?new B(a):new U(a),new T(e)));var e,n,t,r,a},n.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},n.registerName=function(e,n){if(N(e),this.names.has(e))this.names.get(e).add(n);else{var t=new Set;t.add(n),this.names.set(e,t)}},n.insertRules=function(e,n,t){this.registerName(e,n),this.getTag().insertRules(N(e),t)},n.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},n.clearRules=function(e){this.getTag().clearGroup(N(e)),this.clearNames(e)},n.clearTag=function(){this.tag=void 0},n.toString=function(){return function(e){for(var n=e.getTag(),t=n.length,r="",a=0;a<t;a++){var i=M(a);if(void 0!==i){var o=e.names.get(i),s=n.getGroup(a);if(o&&s&&o.size){var l=x+".g"+a+'[id="'+i+'"]',c="";void 0!==o&&o.forEach((function(e){e.length>0&&(c+=e+",")})),r+=""+s+l+'{content:"'+c+'"}/*!sc*/\n'}}}return r}(this)},e}(),H=/(a)(d)/gi,q=function(e){return String.fromCharCode(e+(e>25?39:97))};function K(e){var n,t="";for(n=Math.abs(e);n>52;n=n/52|0)t=q(n%52)+t;return(q(n%52)+t).replace(H,"$1-$2")}var Y=function(e,n){for(var t=n.length;t;)e=33*e^n.charCodeAt(--t);return e},X=function(e){return Y(5381,e)};function J(e){for(var n=0;n<e.length;n+=1){var t=e[n];if(b(t)&&!S(t))return!1}return!0}var Z=X("5.3.11"),Q=function(){function e(e,n,t){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===t||t.isStatic)&&J(e),this.componentId=n,this.baseHash=Y(Z,n),this.baseStyle=t,G.registerId(n)}return e.prototype.generateAndInjectStyles=function(e,n,t){var r=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(e,n,t)),this.isStatic&&!t.hash)if(this.staticRulesId&&n.hasNameForId(r,this.staticRulesId))a.push(this.staticRulesId);else{var i=ye(this.rules,e,n,t).join(""),o=K(Y(this.baseHash,i)>>>0);if(!n.hasNameForId(r,o)){var s=t(i,"."+o,void 0,r);n.insertRules(r,o,s)}a.push(o),this.staticRulesId=o}else{for(var l=this.rules.length,c=Y(this.baseHash,t.hash),u="",d=0;d<l;d++){var p=this.rules[d];if("string"==typeof p)u+=p;else if(p){var f=ye(p,e,n,t),h=Array.isArray(f)?f.join(""):f;c=Y(c,h+d),u+=h}}if(u){var m=K(c>>>0);if(!n.hasNameForId(r,m)){var g=t(u,"."+m,void 0,r);n.insertRules(r,m,g)}a.push(m)}}return a.join(" ")},e}(),ee=/^\s*\/\/.*$/gm,ne=[":","[",".","#"];function te(e){var n,t,r,a,i=void 0===e?v:e,o=i.options,l=void 0===o?v:o,c=i.plugins,u=void 0===c?y:c,d=new s(l),p=[],f=function(e){function n(n){if(n)try{e(n+"}")}catch(e){}}return function(t,r,a,i,o,s,l,c,u,d){switch(t){case 1:if(0===u&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(a[0]+r),"";default:return r+(0===d?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(n)}}}((function(e){p.push(e)})),h=function(e,r,i){return 0===r&&-1!==ne.indexOf(i[t.length])||i.match(a)?e:"."+n};function m(e,i,o,s){void 0===s&&(s="&");var l=e.replace(ee,""),c=i&&o?o+" "+i+" { "+l+" }":l;return n=s,t=i,r=new RegExp("\\"+t+"\\b","g"),a=new RegExp("(\\"+t+"\\b){2,}"),d(o||!i?"":i,c)}return d.use([].concat(u,[function(e,n,a){2===e&&a.length&&a[0].lastIndexOf(t)>0&&(a[0]=a[0].replace(r,h))},f,function(e){if(-2===e){var n=p;return p=[],n}}])),m.hash=u.length?u.reduce((function(e,n){return n.name||A(15),Y(e,n.name)}),5381).toString():"",m}var re=e.createContext(),ae=(re.Consumer,e.createContext()),ie=(ae.Consumer,new G),oe=te();function se(){return(0,e.useContext)(re)||ie}function le(){return(0,e.useContext)(ae)||oe}function ce(n){var t=(0,e.useState)(n.stylisPlugins),r=t[0],a=t[1],i=se(),s=(0,e.useMemo)((function(){var e=i;return n.sheet?e=n.sheet:n.target&&(e=e.reconstructWithOptions({target:n.target},!1)),n.disableCSSOMInjection&&(e=e.reconstructWithOptions({useCSSOMInjection:!1})),e}),[n.disableCSSOMInjection,n.sheet,n.target]),l=(0,e.useMemo)((function(){return te({options:{prefix:!n.disableVendorPrefixes},plugins:r})}),[n.disableVendorPrefixes,r]);return(0,e.useEffect)((function(){o()(r,n.stylisPlugins)||a(n.stylisPlugins)}),[n.stylisPlugins]),e.createElement(re.Provider,{value:s},e.createElement(ae.Provider,{value:l},n.children))}var ue=function(){function e(e,n){var t=this;this.inject=function(e,n){void 0===n&&(n=oe);var r=t.name+n.hash;e.hasNameForId(t.id,r)||e.insertRules(t.id,r,n(t.rules,r,"@keyframes"))},this.toString=function(){return A(12,String(t.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=n}return e.prototype.getName=function(e){return void 0===e&&(e=oe),this.name+e.hash},e}(),de=/([A-Z])/,pe=/([A-Z])/g,fe=/^ms-/,he=function(e){return"-"+e.toLowerCase()};function me(e){return de.test(e)?e.replace(pe,he).replace(fe,"-ms-"):e}var ge=function(e){return null==e||!1===e||""===e};function ye(e,n,t,r){if(Array.isArray(e)){for(var a,i=[],o=0,s=e.length;o<s;o+=1)""!==(a=ye(e[o],n,t,r))&&(Array.isArray(a)?i.push.apply(i,a):i.push(a));return i}return ge(e)?"":S(e)?"."+e.styledComponentId:b(e)?"function"!=typeof(c=e)||c.prototype&&c.prototype.isReactComponent||!n?e:ye(e(n),n,t,r):e instanceof ue?t?(e.inject(t,r),e.getName(r)):e:g(e)?function e(n,t){var r,a,i=[];for(var o in n)n.hasOwnProperty(o)&&!ge(n[o])&&(Array.isArray(n[o])&&n[o].isCss||b(n[o])?i.push(me(o)+":",n[o],";"):g(n[o])?i.push.apply(i,e(n[o],o)):i.push(me(o)+": "+(r=o,(null==(a=n[o])||"boolean"==typeof a||""===a?"":"number"!=typeof a||0===a||r in l||r.startsWith("--")?String(a).trim():a+"px")+";")));return t?[t+" {"].concat(i,["}"]):i}(e):e.toString();var c}var ve=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function be(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return b(e)||g(e)?ve(ye(m(y,[e].concat(t)))):0===t.length&&1===e.length&&"string"==typeof e[0]?e:ve(ye(m(e,t)))}new Set;var we=function(e,n,t){return void 0===t&&(t=v),e.theme!==t.theme&&e.theme||n||t.theme},Se=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,xe=/(^-|-$)/g;function ke(e){return e.replace(Se,"-").replace(xe,"")}var Ie=function(e){return K(X(e)>>>0)};function _e(e){return"string"==typeof e&&!0}var Ae=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Te=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Ee(e,n,t){var r=e[t];Ae(n)&&Ae(r)?Oe(r,n):e[t]=n}function Oe(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];for(var a=0,i=t;a<i.length;a++){var o=i[a];if(Ae(o))for(var s in o)Te(s)&&Ee(e,o[s],s)}return e}var Ce=e.createContext();Ce.Consumer;var Ne={};function Me(n,t,r){var a=S(n),i=!_e(n),o=t.attrs,s=void 0===o?y:o,l=t.componentId,c=void 0===l?function(e,n){var t="string"!=typeof e?"sc":ke(e);Ne[t]=(Ne[t]||0)+1;var r=t+"-"+Ie("5.3.11"+t+Ne[t]);return n?n+"-"+r:r}(t.displayName,t.parentComponentId):l,u=t.displayName,p=void 0===u?function(e){return _e(e)?"styled."+e:"Styled("+w(e)+")"}(n):u,m=t.displayName&&t.componentId?ke(t.displayName)+"-"+t.componentId:t.componentId||c,g=a&&n.attrs?Array.prototype.concat(n.attrs,s).filter(Boolean):s,x=t.shouldForwardProp;a&&n.shouldForwardProp&&(x=t.shouldForwardProp?function(e,r,a){return n.shouldForwardProp(e,r,a)&&t.shouldForwardProp(e,r,a)}:n.shouldForwardProp);var k,I=new Q(r,m,a?n.componentStyle:void 0),_=I.isStatic&&0===s.length,A=function(n,t){return function(n,t,r,a){var i=n.attrs,o=n.componentStyle,s=n.defaultProps,l=n.foldedComponentIds,c=n.shouldForwardProp,u=n.styledComponentId,p=n.target,f=function(e,n,t){void 0===e&&(e=v);var r=h({},n,{theme:e}),a={};return t.forEach((function(e){var n,t,i,o=e;for(n in b(o)&&(o=o(r)),o)r[n]=a[n]="className"===n?(t=a[n],i=o[n],t&&i?t+" "+i:t||i):o[n]})),[r,a]}(we(t,(0,e.useContext)(Ce),s)||v,t,i),m=f[0],g=f[1],y=function(e,n,t){var r=se(),a=le();return n?e.generateAndInjectStyles(v,r,a):e.generateAndInjectStyles(t,r,a)}(o,a,m),w=r,S=g.$as||t.$as||g.as||t.as||p,x=_e(S),k=g!==t?h({},t,{},g):t,I={};for(var _ in k)"$"!==_[0]&&"as"!==_&&("forwardedAs"===_?I.as=k[_]:(c?c(_,d,S):!x||d(_))&&(I[_]=k[_]));return t.style&&g.style!==t.style&&(I.style=h({},t.style,{},g.style)),I.className=Array.prototype.concat(l,u,y!==u?y:null,t.className,g.className).filter(Boolean).join(" "),I.ref=w,(0,e.createElement)(S,I)}(k,n,t,_)};return A.displayName=p,(k=e.forwardRef(A)).attrs=g,k.componentStyle=I,k.displayName=p,k.shouldForwardProp=x,k.foldedComponentIds=a?Array.prototype.concat(n.foldedComponentIds,n.styledComponentId):y,k.styledComponentId=m,k.target=a?n.target:n,k.withComponent=function(e){var n=t.componentId,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(t,["componentId"]),i=n&&n+"-"+(_e(e)?e:ke(w(e)));return Me(e,h({},a,{attrs:g,componentId:i}),r)},Object.defineProperty(k,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=a?Oe({},n.defaultProps,e):e}}),Object.defineProperty(k,"toString",{value:function(){return"."+k.styledComponentId}}),i&&f()(k,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),k}var Pe=function(e){return function e(n,t,r){if(void 0===r&&(r=v),!(0,a.Hy)(t))return A(1,String(t));var i=function(){return n(t,r,be.apply(void 0,arguments))};return i.withConfig=function(a){return e(n,t,h({},r,{},a))},i.attrs=function(a){return e(n,t,h({},r,{attrs:Array.prototype.concat(r.attrs,a).filter(Boolean)}))},i}(Me,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Pe[e]=Pe(e)}));var Fe=function(){function e(e,n){this.rules=e,this.componentId=n,this.isStatic=J(e),G.registerId(this.componentId+1)}var n=e.prototype;return n.createStyles=function(e,n,t,r){var a=r(ye(this.rules,n,t,r).join(""),""),i=this.componentId+e;t.insertRules(i,i,a)},n.removeStyles=function(e,n){n.clearRules(this.componentId+e)},n.renderStyles=function(e,n,t,r){e>2&&G.registerId(this.componentId+e),this.removeStyles(e,t),this.createStyles(e,n,t,r)},e}();!function(){function n(){var n=this;this._emitSheetCSS=function(){var e=n.instance.toString();if(!e)return"";var t=j();return"<style "+[t&&'nonce="'+t+'"',x+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+e+"</style>"},this.getStyleTags=function(){return n.sealed?A(2):n._emitSheetCSS()},this.getStyleElement=function(){var t;if(n.sealed)return A(2);var r=((t={})[x]="",t["data-styled-version"]="5.3.11",t.dangerouslySetInnerHTML={__html:n.instance.toString()},t),a=j();return a&&(r.nonce=a),[e.createElement("style",h({},r,{key:"sc-0-0"}))]},this.seal=function(){n.sealed=!0},this.instance=new G({isServer:!0}),this.sealed=!1}var t=n.prototype;t.collectStyles=function(n){return this.sealed?A(2):e.createElement(ce,{sheet:this.instance},n)},t.interleaveWithNodeStream=function(e){return A(3)}}();const Re=Pe,Le=(e=>{const n=[],t=10;switch(e%2){case 0:for(let e=0;e<t;e++){const r=0,a=180+60*(t-e)/t,i=100+150*e/t;n.push("rgba(".concat(Math.round(r),", ").concat(Math.round(a),", ").concat(Math.round(i),")"))}break;case 1:for(let e=0;e<t;e++){const r=160+95*e/t,a=80+100*(t-e)/t,i=0;n.push("rgba(".concat(Math.round(r),", ").concat(Math.round(i),", ").concat(Math.round(a),")"))}}return{colors:n,counter:0,next(){return n[this.counter++%n.length]}}})(1);Le.counter=5;const De={devices:{desktop:{fontSize:20},mobile:{fontSize:16,maxWidth:600}},dimensions:{maxContentWidth:"900px"},fonts:{title:"Silkscreen",default:"Rajdhani"},fontSizes:{h1:"300%",h2:"140%"},colors:{bg1:"#333333",bg1p5:"#222222",bg2:"#1a1a1a",bg3:"#444444",fg1:"#d1d1d1",fg1p5:"#a1a1a1",fg2:"#555555",colorScheme:Le},spacings:{space1:"1rem",space2:"2rem",space0p1:"0.25rem"},controls:{gridSize:50},zIndexes:{closeButton:2,spinner:3}};var je,ze,Be,Ue,We,$e,Ve,Ge,He,qe,Ke,Ye,Xe,Je,Ze,Qe=t(579);const en=Re.h2(je||(je=r(["\n    font-family: ",";\n    font-size: 140%;\n    color: ",";\n    margin: 0;\n    padding: 0;\n"])),De.fonts.title,De.colors.colorScheme.next()),nn=Re.h3(ze||(ze=r(["\n    text-transform: uppercase;\n    font-weight: bold;\n    font-family: ",";\n    margin: 0;\n    padding: 0;\n"])),De.fonts.title),tn=Re.div(Be||(Be=r(["\n    background-color: ",";\n    margin: "," auto 0 auto;\n    padding: ",";\n    width: 100%;\n    max-width: ",";\n"])),De.colors.bg2,De.spacings.space1,De.spacings.space1,De.dimensions.maxContentWidth),rn="\n    border: none;\n    cursor: pointer;\n    background-color: ".concat(De.colors.bg3,";\n"),an="\n    font-family: ".concat(De.fonts.title,";\n"),on=Re.button(Ue||(Ue=r(["\n    ","\n"])),rn),sn=Re(on)(We||(We=r(["\n    ","\n    background-color: ",";\n"])),an,(()=>De.colors.colorScheme.next())),ln=Re.select($e||($e=r(["\n    border: none;\n    background-color: ",";\n    cursor: pointer;\n"])),De.colors.bg1p5),cn=Re.span(Ve||(Ve=r(["\n    position: absolute;\n    bottom: ",";\n    right: ",";\n    color: ",";\n"])),De.spacings.space0p1,De.spacings.space0p1,De.colors.fg1p5),un=e=>{let{filename:n}=e;const t=n.split("/").slice(-1)[0]||null;return(0,Qe.jsx)(cn,{children:t})},dn=Re.span(Ge||(Ge=r(["\n    position: absolute;\n    bottom: ",";\n    left: ",";\n    color: ",";\n"])),De.spacings.space0p1,De.spacings.space0p1,De.colors.fg1p5),pn="\n    height: 20vh;\n    max-height: 10em;\n    user-select: none;\n",fn="\n    letter-spacing: 0.1em;\n    opacity: 0.3;\n    user-select: none;\n",hn=Re.span(He||(He=r(["\n    font-size: 120%;\n    font-weight: bold;\n    color: ",";\n    min-width: 1.5em;\n    @media (max-width: ","px) {\n        text-align: center;\n    }\n"])),De.colors.fg2,De.devices.mobile.maxWidth),mn=Re.div(qe||(qe=r(["\n    color: ",";\n    ::before {\n        content: '\u2192 ';\n    }\n    a {\n        color: ",";\n    }\n"])),De.colors.fg2,De.colors.fg2),gn=Re(tn)(Ke||(Ke=r(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n"]))),yn=Re.div(Ye||(Ye=r(["\n    min-width: 6.5rem;\n    transform: translateX(-20%);\n"]))),vn=Re.div(Xe||(Xe=r(["\n    flex: auto;\n"]))),bn=Re.div(Je||(Je=r(["\n    font-family: ",";\n    color: ",";\n"])),De.fonts.title,De.colors.colorScheme.next()),wn=Re.div(Ze||(Ze=r(["\n& > * {\n    font-size: 90%;\n    margin-right: ",";\n    &:last-child {\n        margin-right: 0;\n    }\n}\n"])),De.spacings.space0p1);var Sn,xn,kn;const In=Re.div(Sn||(Sn=r(["\n    position: relative;\n    background-color: ",";\n"])),De.colors.bg1p5),_n=Re.pre(xn||(xn=r(["\n    ","\n    ","\n    overflow: auto;\n    margin: 0;\n    padding: 0;\n"])),pn,fn),An=Re(wn)(kn||(kn=r(["\n    position: absolute;\n    top: calc(",");\n    right: calc(",");\n"])),De.spacings.space0p1,De.spacings.space0p1),Tn=e=>{let{pd:n,filename:t,extraButtons:r}=e;return(0,Qe.jsxs)(In,{children:[(0,Qe.jsx)(_n,{children:n}),t?(0,Qe.jsx)(un,{filename:t}):null,r?(0,Qe.jsx)(An,{children:r}):null]})},En=(e,n,t)=>{const r=new Blob([n],{type:t});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(r,e);else{const n=window.document.createElement("a");n.href=window.URL.createObjectURL(r),n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}},On="bits",Cn="bytes",Nn="",Mn="jedec",Pn="round",Fn=" ",Rn="string",Ln={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function Dn(e){let{bits:n=!1,pad:t=!1,base:r=-1,round:a=2,locale:i=Nn,localeOptions:o={},separator:s=Nn,spacer:l=Fn,symbols:c={},standard:u=Nn,output:d=Rn,fullform:p=!1,fullforms:f=[],exponent:h=-1,roundingMethod:m=Pn,precision:g=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},y=h,v=Number(e),b=[],w=0,S=Nn;"si"===u?(r=10,u=Mn):"iec"===u||u===Mn?r=2:2===r?u="iec":(r=10,u=Mn);const x=10===r?1e3:1024,k=!0===p,I=v<0,_=Math[m];if("bigint"!==typeof e&&isNaN(e))throw new TypeError("Invalid number");if("function"!==typeof _)throw new TypeError("Invalid rounding method");if(I&&(v=-v),(-1===y||isNaN(y))&&(y=Math.floor(Math.log(v)/Math.log(x)),y<0&&(y=0)),y>8&&(g>0&&(g+=8-y),y=8),"exponent"===d)return y;if(0===v)b[0]=0,S=b[1]=Ln.symbol[u][n?On:Cn][y];else{w=v/(2===r?Math.pow(2,10*y):Math.pow(1e3,y)),n&&(w*=8,w>=x&&y<8&&(w/=x,y++));const e=Math.pow(10,y>0?a:0);b[0]=_(w*e)/e,b[0]===x&&y<8&&-1===h&&(b[0]=1,y++),S=b[1]=10===r&&1===y?n?"kbit":"kB":Ln.symbol[u][n?On:Cn][y]}if(I&&(b[0]=-b[0]),g>0&&(b[0]=b[0].toPrecision(g)),b[1]=c[b[1]]||b[1],!0===i?b[0]=b[0].toLocaleString():i.length>0?b[0]=b[0].toLocaleString(i,o):s.length>0&&(b[0]=b[0].toString().replace(".",s)),t&&a>0){const e=b[0].toString(),n=s||(e.match(/(\D)/g)||[]).pop()||".",t=e.toString().split(n),r=t[1]||Nn,i=r.length,o=a-i;b[0]="".concat(t[0]).concat(n).concat(r.padEnd(i+o,"0"))}return k&&(b[1]=f[y]?f[y]:Ln.fullform[u][y]+(n?"bit":"byte")+(1===b[0]?Nn:"s")),"array"===d?b:"object"===d?{value:b[0],symbol:b[1],exponent:y,unit:S}:b.join(l)}var jn,zn,Bn;const Un=["\u2591","\u2592","\u2593","\u2594","\u2599","\u259a","\u259b","\u259c","\u259d","\u259e","\u259f"],Wn=Re.div(jn||(jn=r(["\n    position: relative;\n"]))),$n=Re.div(zn||(zn=r(["\n    ","\n    word-break: break-all;\n    overflow: hidden;\n    opacity: 0.1;\n    text-align: justify;\n"])),pn),Vn=Re(wn)(Bn||(Bn=r(["\n    position: absolute;\n    top: calc(",");\n    right: calc(",");\n"])),De.spacings.space0p1,De.spacings.space0p1),Gn=n=>{let{wasm:t,filename:r,showDownloadButton:a,showFileSize:i,extraButtons:o}=n;if(a){const e=()=>{En(r,t,"application/wasm")};o=[...o||[],(0,Qe.jsx)(on,{onClick:e,children:"download"},"download")]}const s=(0,e.useMemo)((()=>Array.from(new Uint8Array(t))),[t]),l=Dn(t.byteLength);return(0,Qe.jsxs)(Wn,{children:[r?(0,Qe.jsx)(un,{filename:r}):null,i?(0,Qe.jsx)(dn,{children:l}):null,(0,Qe.jsx)($n,{children:s.slice(0,1e3).map(((e,n)=>(0,Qe.jsxs)("span",{children:[Un[e%Un.length]," "]},n)))}),o?(0,Qe.jsx)(Vn,{children:o}):null]})};var Hn,qn,Kn,Yn,Xn,Jn,Zn;const Qn=e=>{const n=Math.floor(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return Math.floor(e*Math.pow(10,n))/Math.pow(10,n)}(e,2));return"".concat(n.toString().padStart(3,"0"))},et=Re.div(Hn||(Hn=r(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    @media (max-width: ","px) {\n        flex-direction: column-reverse;\n        align-items: flex-end;\n    }\n"])),De.devices.mobile.maxWidth),nt=Re.div(qn||(qn=r(["\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    min-width: 4em;\n    margin: 0 ",";\n    font-size: ",";\n    @media (max-width: ","px) {\n        font-size: 120%;\n    }\n    & > span {\n        font-size: 100%;\n    }\n    & > span:nth-child(1) {\n        text-align: right;\n    }\n    & > span:nth-child(2) {\n        text-align: center;\n    }\n"])),De.spacings.space1,De.fontSizes.h2,De.devices.mobile.maxWidth),tt=Re.div(Kn||(Kn=r(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    flex: auto;\n    margin-right: ",";\n    @media (max-width: ","px) {\n        align-self: stretch;\n        margin-right: 0;\n    }\n    @media (max-width: 400px) {\n        font-size: 50%;\n    }\n\n"])),De.spacings.space1,De.devices.mobile.maxWidth),rt=Re(sn)(Yn||(Yn=r(["\n    min-width: 4.5em;\n    align-self: stretch;\n    @media (max-width: 700px) {\n        font-size: 80%;\n    }\n"]))),at=Re.div(Xn||(Xn=r(["\n    display: flex;\n    flex-direction: row;\n    align-self: stretch;\n"]))),it=Re(sn)(Jn||(Jn=r(["\n    min-width: 3em;\n    @media (max-width: 700px) {\n        font-size: 80%;\n    }\n"]))),ot=Re(wn)(Zn||(Zn=r(["\n    align-self: stretch;\n    display: flex;\n    align-items: stretch;\n    @media (max-width: ","px) {\n        justify-content: flex-end;\n        margin-bottom: ",";\n    }\n"])),De.devices.mobile.maxWidth,De.spacings.space1),st=n=>{let{wav:t,showDownloadButton:r,extraButtons:a}=n;const[i,o]=(0,e.useState)(!1),[,s]=(0,e.useState)(0),l=(0,e.useMemo)((()=>{const e=new Audio(URL.createObjectURL(new Blob([t],{type:"audio/wav"})));return e.onplay=()=>{o(!0)},e.onpause=()=>{o(!1)},e.onended=()=>{o(!1)},e}),[t]);(0,e.useEffect)((()=>{if(!i)return;const e=setInterval((()=>{s(l.currentTime)}),100);return()=>clearInterval(e)}),[i]);return(0,Qe.jsxs)(et,{children:[(0,Qe.jsxs)(tt,{children:[i?(0,Qe.jsx)(rt,{onClick:()=>{l.paused&&o(!1),l.pause()},children:"Pause"}):(0,Qe.jsx)(rt,{onClick:()=>{l.paused||o(!0),l.play()},children:"Play"}),(0,Qe.jsxs)(nt,{children:[(0,Qe.jsx)("span",{children:Qn(l.currentTime)}),(0,Qe.jsx)("span",{children:"/"}),(0,Qe.jsx)("span",{children:isNaN(l.duration)?Qn(0):Qn(l.duration)})]}),(0,Qe.jsxs)(at,{children:[(0,Qe.jsx)(it,{onClick:()=>{l.volume=Math.max(l.volume-.1,0)},children:"-"}),(0,Qe.jsx)(it,{onClick:()=>{l.volume=Math.min(l.volume+.1,1)},children:"+"})]})]}),(0,Qe.jsxs)(ot,{children:[a||null,r?(0,Qe.jsx)(on,{onClick:()=>{En("audio.webpd.wav",t,"audio/wav")},children:"download"}):null]})]})};var lt,ct,ut,dt,pt=t(159),ft=t.n(pt);const ht=Re.div(lt||(lt=r(["\n    position: relative;\n    background-color: ",";\n"])),De.colors.bg1p5),mt=Re.div(ct||(ct=r(["\n    ","\n    font-weight: bold;\n    margin: 0;\n    padding: 0;\n"])),fn),gt=Re.table(ut||(ut=r(["\n    ","\n    word-break: break-all;\n    overflow: hidden;\n    text-align: justify;\n    padding-left: 0.5em;\n\n    & td {\n        padding-right: 0.5em;\n    }\n"])),fn),yt=Re(wn)(dt||(dt=r(["\n    position: absolute;\n    top: calc(",");\n    right: calc(",");\n"])),De.spacings.space0p1,De.spacings.space0p1),vt=e=>{let{app:n,filename:t,showDownloadButton:r,extraButtons:a}=e;if(r){const e=()=>{var e=new(ft());Object.entries(n).forEach((n=>{let[t,r]=n;e.file(t,r)})),e.generateAsync({type:"arraybuffer"}).then((e=>{En(t,e,"application/zip")}))};a=[...a||[],(0,Qe.jsx)(on,{onClick:e,children:"download"},"download")]}return(0,Qe.jsxs)(ht,{children:[(0,Qe.jsx)(mt,{children:t}),(0,Qe.jsx)(gt,{children:(0,Qe.jsx)("tbody",{children:Object.entries(n).map((e=>{let[n,t]=e;return(0,Qe.jsxs)("tr",{children:[(0,Qe.jsxs)("td",{children:[" \u221f ",n]}),(0,Qe.jsx)("td",{children:Dn("string"===typeof t?(r=t,new Blob([r]).size):t.byteLength)})]},n);var r}))})}),a?(0,Qe.jsx)(yt,{children:a}):null]})},bt=e=>{let{format:n,artefacts:t,filename:r,showDownloadButton:a,extraButtons:i}=e;switch(n){case"pd":return t.pd?(0,Qe.jsx)(Tn,{pd:t.pd,filename:r,extraButtons:i}):null;case"wasm":return t.wasm?(0,Qe.jsx)(Gn,{wasm:t.wasm,filename:r||"patch.wasm",showDownloadButton:a,extraButtons:i,showFileSize:!0}):null;case"wav":return t.wav?(0,Qe.jsx)(st,{wav:t.wav,showDownloadButton:a,extraButtons:i}):null;case"app":return t.app?(0,Qe.jsx)(vt,{app:t.app,filename:r||"app.zip",extraButtons:i,showDownloadButton:a}):null}return null};function wt(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(t.length?" "+t.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function St(e){return!!e&&!!e[ur]}function xt(e){var n;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var n=Object.getPrototypeOf(e);if(null===n)return!0;var t=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return t===Object||"function"==typeof t&&Function.toString.call(t)===dr}(e)||Array.isArray(e)||!!e[cr]||!!(null===(n=e.constructor)||void 0===n?void 0:n[cr])||Ot(e)||Ct(e))}function kt(e,n,t){void 0===t&&(t=!1),0===It(e)?(t?Object.keys:pr)(e).forEach((function(r){t&&"symbol"==typeof r||n(r,e[r],e)})):e.forEach((function(t,r){return n(r,t,e)}))}function It(e){var n=e[ur];return n?n.i>3?n.i-4:n.i:Array.isArray(e)?1:Ot(e)?2:Ct(e)?3:0}function _t(e,n){return 2===It(e)?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function At(e,n){return 2===It(e)?e.get(n):e[n]}function Tt(e,n,t){var r=It(e);2===r?e.set(n,t):3===r?e.add(t):e[n]=t}function Et(e,n){return e===n?0!==e||1/e==1/n:e!=e&&n!=n}function Ot(e){return ir&&e instanceof Map}function Ct(e){return or&&e instanceof Set}function Nt(e){return e.o||e.t}function Mt(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var n=fr(e);delete n[ur];for(var t=pr(n),r=0;r<t.length;r++){var a=t[r],i=n[a];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(n[a]={configurable:!0,writable:!0,enumerable:i.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),n)}function Pt(e,n){return void 0===n&&(n=!1),Rt(e)||St(e)||!xt(e)||(It(e)>1&&(e.set=e.add=e.clear=e.delete=Ft),Object.freeze(e),n&&kt(e,(function(e,n){return Pt(n,!0)}),!0)),e}function Ft(){wt(2)}function Rt(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Lt(e){var n=hr[e];return n||wt(18,e),n}function Dt(e,n){hr[e]||(hr[e]=n)}function jt(){return rr}function zt(e,n){n&&(Lt("Patches"),e.u=[],e.s=[],e.v=n)}function Bt(e){Ut(e),e.p.forEach($t),e.p=null}function Ut(e){e===rr&&(rr=e.l)}function Wt(e){return rr={p:[],l:rr,h:e,m:!0,_:0}}function $t(e){var n=e[ur];0===n.i||1===n.i?n.j():n.g=!0}function Vt(e,n){n._=n.p.length;var t=n.p[0],r=void 0!==e&&e!==t;return n.h.O||Lt("ES5").S(n,e,r),r?(t[ur].P&&(Bt(n),wt(4)),xt(e)&&(e=Gt(n,e),n.l||qt(n,e)),n.u&&Lt("Patches").M(t[ur].t,e,n.u,n.s)):e=Gt(n,t,[]),Bt(n),n.u&&n.v(n.u,n.s),e!==lr?e:void 0}function Gt(e,n,t){if(Rt(n))return n;var r=n[ur];if(!r)return kt(n,(function(a,i){return Ht(e,r,n,a,i,t)}),!0),n;if(r.A!==e)return n;if(!r.P)return qt(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var a=4===r.i||5===r.i?r.o=Mt(r.k):r.o,i=a,o=!1;3===r.i&&(i=new Set(a),a.clear(),o=!0),kt(i,(function(n,i){return Ht(e,r,a,n,i,t,o)})),qt(e,a,!1),t&&e.u&&Lt("Patches").N(r,t,e.u,e.s)}return r.o}function Ht(e,n,t,r,a,i,o){if(St(a)){var s=Gt(e,a,i&&n&&3!==n.i&&!_t(n.R,r)?i.concat(r):void 0);if(Tt(t,r,s),!St(s))return;e.m=!1}else o&&t.add(a);if(xt(a)&&!Rt(a)){if(!e.h.D&&e._<1)return;Gt(e,a),n&&n.A.l||qt(e,a)}}function qt(e,n,t){void 0===t&&(t=!1),!e.l&&e.h.D&&e.m&&Pt(n,t)}function Kt(e,n){var t=e[ur];return(t?Nt(t):e)[n]}function Yt(e,n){if(n in e)for(var t=Object.getPrototypeOf(e);t;){var r=Object.getOwnPropertyDescriptor(t,n);if(r)return r;t=Object.getPrototypeOf(t)}}function Xt(e){e.P||(e.P=!0,e.l&&Xt(e.l))}function Jt(e){e.o||(e.o=Mt(e.t))}function Zt(e,n,t){var r=Ot(n)?Lt("MapSet").F(n,t):Ct(n)?Lt("MapSet").T(n,t):e.O?function(e,n){var t=Array.isArray(e),r={i:t?1:0,A:n?n.A:jt(),P:!1,I:!1,R:{},l:n,t:e,k:null,o:null,j:null,C:!1},a=r,i=mr;t&&(a=[r],i=gr);var o=Proxy.revocable(a,i),s=o.revoke,l=o.proxy;return r.k=l,r.j=s,l}(n,t):Lt("ES5").J(n,t);return(t?t.A:jt()).p.push(r),r}function Qt(e){return St(e)||wt(22,e),function e(n){if(!xt(n))return n;var t,r=n[ur],a=It(n);if(r){if(!r.P&&(r.i<4||!Lt("ES5").K(r)))return r.t;r.I=!0,t=er(n,a),r.I=!1}else t=er(n,a);return kt(t,(function(n,a){r&&At(r.t,n)===a||Tt(t,n,e(a))})),3===a?new Set(t):t}(e)}function er(e,n){switch(n){case 2:return new Map(e);case 3:return Array.from(e)}return Mt(e)}function nr(){function e(e,n){var t=a[e];return t?t.enumerable=n:a[e]=t={configurable:!0,enumerable:n,get:function(){var n=this[ur];return mr.get(n,e)},set:function(n){var t=this[ur];mr.set(t,e,n)}},t}function n(e){for(var n=e.length-1;n>=0;n--){var a=e[n][ur];if(!a.P)switch(a.i){case 5:r(a)&&Xt(a);break;case 4:t(a)&&Xt(a)}}}function t(e){for(var n=e.t,t=e.k,r=pr(t),a=r.length-1;a>=0;a--){var i=r[a];if(i!==ur){var o=n[i];if(void 0===o&&!_t(n,i))return!0;var s=t[i],l=s&&s[ur];if(l?l.t!==o:!Et(s,o))return!0}}var c=!!n[ur];return r.length!==pr(n).length+(c?0:1)}function r(e){var n=e.k;if(n.length!==e.t.length)return!0;var t=Object.getOwnPropertyDescriptor(n,n.length-1);if(t&&!t.get)return!0;for(var r=0;r<n.length;r++)if(!n.hasOwnProperty(r))return!0;return!1}var a={};Dt("ES5",{J:function(n,t){var r=Array.isArray(n),a=function(n,t){if(n){for(var r=Array(t.length),a=0;a<t.length;a++)Object.defineProperty(r,""+a,e(a,!0));return r}var i=fr(t);delete i[ur];for(var o=pr(i),s=0;s<o.length;s++){var l=o[s];i[l]=e(l,n||!!i[l].enumerable)}return Object.create(Object.getPrototypeOf(t),i)}(r,n),i={i:r?5:4,A:t?t.A:jt(),P:!1,I:!1,R:{},l:t,t:n,k:a,o:null,g:!1,C:!1};return Object.defineProperty(a,ur,{value:i,writable:!0}),a},S:function(e,t,a){a?St(t)&&t[ur].A===e&&n(e.p):(e.u&&function e(n){if(n&&"object"==typeof n){var t=n[ur];if(t){var a=t.t,i=t.k,o=t.R,s=t.i;if(4===s)kt(i,(function(n){n!==ur&&(void 0!==a[n]||_t(a,n)?o[n]||e(i[n]):(o[n]=!0,Xt(t)))})),kt(a,(function(e){void 0!==i[e]||_t(i,e)||(o[e]=!1,Xt(t))}));else if(5===s){if(r(t)&&(Xt(t),o.length=!0),i.length<a.length)for(var l=i.length;l<a.length;l++)o[l]=!1;else for(var c=a.length;c<i.length;c++)o[c]=!0;for(var u=Math.min(i.length,a.length),d=0;d<u;d++)i.hasOwnProperty(d)||(o[d]=!0),void 0===o[d]&&e(i[d])}}}}(e.p[0]),n(e.p))},K:function(e){return 4===e.i?t(e):r(e)}})}var tr,rr,ar="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),ir="undefined"!=typeof Map,or="undefined"!=typeof Set,sr="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,lr=ar?Symbol.for("immer-nothing"):((tr={})["immer-nothing"]=!0,tr),cr=ar?Symbol.for("immer-draftable"):"__$immer_draftable",ur=ar?Symbol.for("immer-state"):"__$immer_state",dr=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),pr="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,fr=Object.getOwnPropertyDescriptors||function(e){var n={};return pr(e).forEach((function(t){n[t]=Object.getOwnPropertyDescriptor(e,t)})),n},hr={},mr={get:function(e,n){if(n===ur)return e;var t=Nt(e);if(!_t(t,n))return function(e,n,t){var r,a=Yt(n,t);return a?"value"in a?a.value:null===(r=a.get)||void 0===r?void 0:r.call(e.k):void 0}(e,t,n);var r=t[n];return e.I||!xt(r)?r:r===Kt(e.t,n)?(Jt(e),e.o[n]=Zt(e.A.h,r,e)):r},has:function(e,n){return n in Nt(e)},ownKeys:function(e){return Reflect.ownKeys(Nt(e))},set:function(e,n,t){var r=Yt(Nt(e),n);if(null==r?void 0:r.set)return r.set.call(e.k,t),!0;if(!e.P){var a=Kt(Nt(e),n),i=null==a?void 0:a[ur];if(i&&i.t===t)return e.o[n]=t,e.R[n]=!1,!0;if(Et(t,a)&&(void 0!==t||_t(e.t,n)))return!0;Jt(e),Xt(e)}return e.o[n]===t&&(void 0!==t||n in e.o)||Number.isNaN(t)&&Number.isNaN(e.o[n])||(e.o[n]=t,e.R[n]=!0),!0},deleteProperty:function(e,n){return void 0!==Kt(e.t,n)||n in e.t?(e.R[n]=!1,Jt(e),Xt(e)):delete e.R[n],e.o&&delete e.o[n],!0},getOwnPropertyDescriptor:function(e,n){var t=Nt(e),r=Reflect.getOwnPropertyDescriptor(t,n);return r?{writable:!0,configurable:1!==e.i||"length"!==n,enumerable:r.enumerable,value:t[n]}:r},defineProperty:function(){wt(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){wt(12)}},gr={};kt(mr,(function(e,n){gr[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}})),gr.deleteProperty=function(e,n){return gr.set.call(this,e,n,void 0)},gr.set=function(e,n,t){return mr.set.call(this,e[0],n,t,e[0])};var yr=function(){function e(e){var n=this;this.O=sr,this.D=!0,this.produce=function(e,t,r){if("function"==typeof e&&"function"!=typeof t){var a=t;t=e;var i=n;return function(e){var n=this;void 0===e&&(e=a);for(var r=arguments.length,o=Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return i.produce(e,(function(e){var r;return(r=t).call.apply(r,[n,e].concat(o))}))}}var o;if("function"!=typeof t&&wt(6),void 0!==r&&"function"!=typeof r&&wt(7),xt(e)){var s=Wt(n),l=Zt(n,e,void 0),c=!0;try{o=t(l),c=!1}finally{c?Bt(s):Ut(s)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return zt(s,r),Vt(e,s)}),(function(e){throw Bt(s),e})):(zt(s,r),Vt(o,s))}if(!e||"object"!=typeof e){if(void 0===(o=t(e))&&(o=e),o===lr&&(o=void 0),n.D&&Pt(o,!0),r){var u=[],d=[];Lt("Patches").M(e,o,u,d),r(u,d)}return o}wt(21,e)},this.produceWithPatches=function(e,t){if("function"==typeof e)return function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return n.produceWithPatches(t,(function(n){return e.apply(void 0,[n].concat(a))}))};var r,a,i=n.produce(e,t,(function(e,n){r=e,a=n}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return[e,r,a]})):[i,r,a]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var n=e.prototype;return n.createDraft=function(e){xt(e)||wt(8),St(e)&&(e=Qt(e));var n=Wt(this),t=Zt(this,e,void 0);return t[ur].C=!0,Ut(n),t},n.finishDraft=function(e,n){var t=(e&&e[ur]).A;return zt(t,n),Vt(void 0,t)},n.setAutoFreeze=function(e){this.D=e},n.setUseProxies=function(e){e&&!sr&&wt(20),this.O=e},n.applyPatches=function(e,n){var t;for(t=n.length-1;t>=0;t--){var r=n[t];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}t>-1&&(n=n.slice(t+1));var a=Lt("Patches").$;return St(e)?a(e,n):this.produce(e,(function(e){return a(e,n)}))},e}(),vr=new yr,br=vr.produce;vr.produceWithPatches.bind(vr),vr.setAutoFreeze.bind(vr),vr.setUseProxies.bind(vr),vr.applyPatches.bind(vr),vr.createDraft.bind(vr),vr.finishDraft.bind(vr);const wr=br;function Sr(e){return Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sr(e)}function xr(e){var n=function(e,n){if("object"!=Sr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=Sr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==Sr(n)?n:n+""}function kr(e,n,t){return(n=xr(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Ir(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function _r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ir(Object(t),!0).forEach((function(n){kr(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ir(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Ar(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Tr="function"===typeof Symbol&&Symbol.observable||"@@observable",Er=function(){return Math.random().toString(36).substring(7).split("").join(".")},Or={INIT:"@@redux/INIT"+Er(),REPLACE:"@@redux/REPLACE"+Er(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Er()}};function Cr(e){if("object"!==typeof e||null===e)return!1;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}function Nr(e,n,t){var r;if("function"===typeof n&&"function"===typeof t||"function"===typeof t&&"function"===typeof arguments[3])throw new Error(Ar(0));if("function"===typeof n&&"undefined"===typeof t&&(t=n,n=void 0),"undefined"!==typeof t){if("function"!==typeof t)throw new Error(Ar(1));return t(Nr)(e,n)}if("function"!==typeof e)throw new Error(Ar(2));var a=e,i=n,o=[],s=o,l=!1;function c(){s===o&&(s=o.slice())}function u(){if(l)throw new Error(Ar(3));return i}function d(e){if("function"!==typeof e)throw new Error(Ar(4));if(l)throw new Error(Ar(5));var n=!0;return c(),s.push(e),function(){if(n){if(l)throw new Error(Ar(6));n=!1,c();var t=s.indexOf(e);s.splice(t,1),o=null}}}function p(e){if(!Cr(e))throw new Error(Ar(7));if("undefined"===typeof e.type)throw new Error(Ar(8));if(l)throw new Error(Ar(9));try{l=!0,i=a(i,e)}finally{l=!1}for(var n=o=s,t=0;t<n.length;t++){(0,n[t])()}return e}return p({type:Or.INIT}),(r={dispatch:p,subscribe:d,getState:u,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Ar(10));a=e,p({type:Or.REPLACE})}})[Tr]=function(){var e,n=d;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(Ar(11));function t(){e.next&&e.next(u())}return t(),{unsubscribe:n(t)}}})[Tr]=function(){return this},e},r}function Mr(e){for(var n=Object.keys(e),t={},r=0;r<n.length;r++){var a=n[r];0,"function"===typeof e[a]&&(t[a]=e[a])}var i,o=Object.keys(t);try{!function(e){Object.keys(e).forEach((function(n){var t=e[n];if("undefined"===typeof t(void 0,{type:Or.INIT}))throw new Error(Ar(12));if("undefined"===typeof t(void 0,{type:Or.PROBE_UNKNOWN_ACTION()}))throw new Error(Ar(13))}))}(t)}catch(s){i=s}return function(e,n){if(void 0===e&&(e={}),i)throw i;for(var r=!1,a={},s=0;s<o.length;s++){var l=o[s],c=t[l],u=e[l],d=c(u,n);if("undefined"===typeof d){n&&n.type;throw new Error(Ar(14))}a[l]=d,r=r||d!==u}return(r=r||o.length!==Object.keys(e).length)?a:e}}function Pr(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return 0===n.length?function(e){return e}:1===n.length?n[0]:n.reduce((function(e,n){return function(){return e(n.apply(void 0,arguments))}}))}function Fr(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){return function(){var t=e.apply(void 0,arguments),r=function(){throw new Error(Ar(15))},a={getState:t.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=n.map((function(e){return e(a)}));return r=Pr.apply(void 0,i)(t.dispatch),_r(_r({},t),{},{dispatch:r})}}}function Rr(e){return function(n){var t=n.dispatch,r=n.getState;return function(n){return function(a){return"function"===typeof a?a(t,r,e):n(a)}}}}var Lr=Rr();Lr.withExtraArgument=Rr;const Dr=Lr;var jr=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),zr=function(e,n){var t,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(e,o)}catch(s){i=[6,s],r=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},Br=function(e,n){for(var t=0,r=n.length,a=e.length;t<r;t++,a++)e[a]=n[t];return e},Ur=Object.defineProperty,Wr=Object.defineProperties,$r=Object.getOwnPropertyDescriptors,Vr=Object.getOwnPropertySymbols,Gr=Object.prototype.hasOwnProperty,Hr=Object.prototype.propertyIsEnumerable,qr=function(e,n,t){return n in e?Ur(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t},Kr=function(e,n){for(var t in n||(n={}))Gr.call(n,t)&&qr(e,t,n[t]);if(Vr)for(var r=0,a=Vr(n);r<a.length;r++){t=a[r];Hr.call(n,t)&&qr(e,t,n[t])}return e},Yr=function(e,n){return Wr(e,$r(n))},Xr=function(e,n,t){return new Promise((function(r,a){var i=function(e){try{s(t.next(e))}catch(n){a(n)}},o=function(e){try{s(t.throw(e))}catch(n){a(n)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(i,o)};s((t=t.apply(e,n)).next())}))},Jr="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Pr:Pr.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function Zr(e){if("object"!==typeof e||null===e)return!1;var n=Object.getPrototypeOf(e);if(null===n)return!0;for(var t=n;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return n===t}function Qr(e,n){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(n){var a=n.apply(void 0,t);if(!a)throw new Error("prepareAction did not return an object");return Kr(Kr({type:e,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:e,payload:t[0]}}return t.toString=function(){return""+e},t.type=e,t.match=function(n){return n.type===e},t}var ea=function(e){function n(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=e.apply(this,t)||this;return Object.setPrototypeOf(a,n.prototype),a}return jr(n,e),Object.defineProperty(n,Symbol.species,{get:function(){return n},enumerable:!1,configurable:!0}),n.prototype.concat=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.prototype.concat.apply(this,n)},n.prototype.prepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length&&Array.isArray(e[0])?new(n.bind.apply(n,Br([void 0],e[0].concat(this)))):new(n.bind.apply(n,Br([void 0],e.concat(this))))},n}(Array),na=function(e){function n(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=e.apply(this,t)||this;return Object.setPrototypeOf(a,n.prototype),a}return jr(n,e),Object.defineProperty(n,Symbol.species,{get:function(){return n},enumerable:!1,configurable:!0}),n.prototype.concat=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.prototype.concat.apply(this,n)},n.prototype.prepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length&&Array.isArray(e[0])?new(n.bind.apply(n,Br([void 0],e[0].concat(this)))):new(n.bind.apply(n,Br([void 0],e.concat(this))))},n}(Array);function ta(e){return xt(e)?wr(e,(function(){})):e}function ra(){return function(e){return function(e){void 0===e&&(e={});var n=e.thunk,t=void 0===n||n,r=(e.immutableCheck,e.serializableCheck,e.actionCreatorCheck,new ea);t&&(!function(e){return"boolean"===typeof e}(t)?r.push(Dr.withExtraArgument(t.extraArgument)):r.push(Dr));0;return r}(e)}}function aa(e){var n,t={},r=[],a={addCase:function(e,n){var r="string"===typeof e?e:e.type;if(!r)throw new Error("`builder.addCase` cannot be called with an empty action type");if(r in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[r]=n,a},addMatcher:function(e,n){return r.push({matcher:e,reducer:n}),a},addDefaultCase:function(e){return n=e,a}};return e(a),[t,r,n]}function ia(e){var n=e.name;if(!n)throw new Error("`name` is a required option for createSlice");var t,r="function"==typeof e.initialState?e.initialState:ta(e.initialState),a=e.reducers||{},i=Object.keys(a),o={},s={},l={};function c(){var n="function"===typeof e.extraReducers?aa(e.extraReducers):[e.extraReducers],t=n[0],a=void 0===t?{}:t,i=n[1],o=void 0===i?[]:i,l=n[2],c=void 0===l?void 0:l,u=Kr(Kr({},a),s);return function(e,n,t,r){void 0===t&&(t=[]);var a,i="function"===typeof n?aa(n):[n,t,r],o=i[0],s=i[1],l=i[2];if(function(e){return"function"===typeof e}(e))a=function(){return ta(e())};else{var c=ta(e);a=function(){return c}}function u(e,n){void 0===e&&(e=a());var t=Br([o[n.type]],s.filter((function(e){return(0,e.matcher)(n)})).map((function(e){return e.reducer})));return 0===t.filter((function(e){return!!e})).length&&(t=[l]),t.reduce((function(e,t){if(t){var r;if(St(e))return void 0===(r=t(e,n))?e:r;if(xt(e))return wr(e,(function(e){return t(e,n)}));if(void 0===(r=t(e,n))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return u.getInitialState=a,u}(r,(function(e){for(var n in u)e.addCase(n,u[n]);for(var t=0,r=o;t<r.length;t++){var a=r[t];e.addMatcher(a.matcher,a.reducer)}c&&e.addDefaultCase(c)}))}return i.forEach((function(e){var t,r,i=a[e],c=n+"/"+e;"reducer"in i?(t=i.reducer,r=i.prepare):t=i,o[e]=t,s[c]=t,l[e]=r?Qr(c,r):Qr(c)})),{name:n,reducer:function(e,n){return t||(t=c()),t(e,n)},actions:l,caseReducers:o,getInitialState:function(){return t||(t=c()),t.getInitialState()}}}var oa=function(e){void 0===e&&(e=21);for(var n="",t=e;t--;)n+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return n},sa=["name","message","stack","code"],la=function(e,n){this.payload=e,this.meta=n},ca=function(e,n){this.payload=e,this.meta=n},ua=function(e){if("object"===typeof e&&null!==e){for(var n={},t=0,r=sa;t<r.length;t++){var a=r[t];"string"===typeof e[a]&&(n[a]=e[a])}return n}return{message:String(e)}};!function(){function e(e,n,t){var r=Qr(e+"/fulfilled",(function(e,n,t,r){return{payload:e,meta:Yr(Kr({},r||{}),{arg:t,requestId:n,requestStatus:"fulfilled"})}})),a=Qr(e+"/pending",(function(e,n,t){return{payload:void 0,meta:Yr(Kr({},t||{}),{arg:n,requestId:e,requestStatus:"pending"})}})),i=Qr(e+"/rejected",(function(e,n,r,a,i){return{payload:a,error:(t&&t.serializeError||ua)(e||"Rejected"),meta:Yr(Kr({},i||{}),{arg:r,requestId:n,rejectedWithValue:!!a,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(s,l,c){var u,d=(null==t?void 0:t.idGenerator)?t.idGenerator(e):oa(),p=new o;function f(e){u=e,p.abort()}var h=function(){return Xr(this,null,(function(){var o,h,m,g,y,v;return zr(this,(function(b){switch(b.label){case 0:return b.trys.push([0,4,,5]),g=null==(o=null==t?void 0:t.condition)?void 0:o.call(t,e,{getState:l,extra:c}),null===(w=g)||"object"!==typeof w||"function"!==typeof w.then?[3,2]:[4,g];case 1:g=b.sent(),b.label=2;case 2:if(!1===g||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return y=new Promise((function(e,n){return p.signal.addEventListener("abort",(function(){return n({name:"AbortError",message:u||"Aborted"})}))})),s(a(d,e,null==(h=null==t?void 0:t.getPendingMeta)?void 0:h.call(t,{requestId:d,arg:e},{getState:l,extra:c}))),[4,Promise.race([y,Promise.resolve(n(e,{dispatch:s,getState:l,extra:c,requestId:d,signal:p.signal,abort:f,rejectWithValue:function(e,n){return new la(e,n)},fulfillWithValue:function(e,n){return new ca(e,n)}})).then((function(n){if(n instanceof la)throw n;return n instanceof ca?r(n.payload,d,e,n.meta):r(n,d,e)}))])];case 3:return m=b.sent(),[3,5];case 4:return v=b.sent(),m=v instanceof la?i(null,d,e,v.payload,v.meta):i(v,d,e),[3,5];case 5:return t&&!t.dispatchConditionRejection&&i.match(m)&&m.meta.condition||s(m),[2,m]}var w}))}))}();return Object.assign(h,{abort:f,requestId:d,arg:e,unwrap:function(){return h.then(da)}})}}),{pending:a,rejected:i,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}();function da(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var pa="listenerMiddleware";Qr(pa+"/add"),Qr(pa+"/removeAll"),Qr(pa+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof t.g?t.g:globalThis);var fa,ha=function(e){return function(n){setTimeout(n,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:ha(10);nr();var ma=t(461),ga=t(443),ya=t(950);let va=function(e){e()};const ba=()=>va,wa=Symbol.for("react-redux-context"),Sa="undefined"!==typeof globalThis?globalThis:{};function xa(){var n;if(!e.createContext)return{};const t=null!=(n=Sa[wa])?n:Sa[wa]=new Map;let r=t.get(e.createContext);return r||(r=e.createContext(null),t.set(e.createContext,r)),r}const ka=xa();function Ia(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka;return function(){return(0,e.useContext)(n)}}const _a=Ia();let Aa=()=>{throw new Error("uSES not initialized!")};const Ta=(e,n)=>e===n;function Ea(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka;const t=n===ka?_a:Ia(n);return function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:a=Ta,stabilityCheck:i,noopCheck:o}="function"===typeof r?{equalityFn:r}:r;const{store:s,subscription:l,getServerState:c,stabilityCheck:u,noopCheck:d}=t(),p=((0,e.useRef)(!0),(0,e.useCallback)({[n.name]:e=>n(e)}[n.name],[n,u,i])),f=Aa(l.addNestedSub,s.getState,c||s.getState,p,a);return(0,e.useDebugValue)(f),f}}const Oa=Ea();t(706);const Ca={notify(){},get:()=>[]};function Na(e,n){let t,r=Ca,a=0,i=!1;function o(){c.onStateChange&&c.onStateChange()}function s(){a++,t||(t=n?n.addNestedSub(o):e.subscribe(o),r=function(){const e=ba();let n=null,t=null;return{clear(){n=null,t=null},notify(){e((()=>{let e=n;for(;e;)e.callback(),e=e.next}))},get(){let e=[],t=n;for(;t;)e.push(t),t=t.next;return e},subscribe(e){let r=!0,a=t={callback:e,next:null,prev:t};return a.prev?a.prev.next=a:n=a,function(){r&&null!==n&&(r=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:n=a.next)}}}}())}function l(){a--,t&&0===a&&(t(),t=void 0,r.clear(),r=Ca)}const c={addNestedSub:function(e){s();const n=r.subscribe(e);let t=!1;return()=>{t||(t=!0,n(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return i},trySubscribe:function(){i||(i=!0,s())},tryUnsubscribe:function(){i&&(i=!1,l())},getListeners:()=>r};return c}const Ma=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?e.useLayoutEffect:e.useEffect;let Pa=null;const Fa=function(n){let{store:t,context:r,children:a,serverState:i,stabilityCheck:o="once",noopCheck:s="once"}=n;const l=e.useMemo((()=>{const e=Na(t);return{store:t,subscription:e,getServerState:i?()=>i:void 0,stabilityCheck:o,noopCheck:s}}),[t,i,o,s]),c=e.useMemo((()=>t.getState()),[t]);Ma((()=>{const{subscription:e}=l;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),c!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[l,c]);const u=r||ka;return e.createElement(u.Provider,{value:l},a)};function Ra(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka;const n=e===ka?_a:Ia(e);return function(){const{store:e}=n();return e}}const La=Ra();function Da(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka;const n=e===ka?La:Ra(e);return function(){return n().dispatch}}const ja=Da();var za;(e=>{Aa=e})(ga.useSyncExternalStoreWithSelector),(e=>{Pa=e})(ma.useSyncExternalStore),za=ya.unstable_batchedUpdates,va=za;const Ba=["pd","wasm"],Ua={url:null,filepath:null,arrayBuffer:null,focusOn:"local"},Wa=ia({name:"buildInput",initialState:Ua,reducers:{setUrl:(e,n)=>{e.url=n.payload,e.focusOn="url"},fetchUrlError:(e,n)=>{},fetchUrlSuccess:(e,n)=>{e.filepath=null,e.url=n.payload.url,e.arrayBuffer=n.payload.arrayBuffer},setLocalFile:(e,n)=>{e.url=null,e.filepath=n.payload.filepath,e.arrayBuffer=n.payload.arrayBuffer,e.focusOn="local"},setFocusOn:(e,n)=>{e.focusOn=n.payload},clear:()=>Ua}}),$a=["wav","app"],Va={format:null,codeTarget:"JavaScript",previewDurationSeconds:30},Ga=ia({name:"buildOutput",initialState:Va,reducers:{setFormat:(e,n)=>{e.format=n.payload},setCodeTarget:(e,n)=>{e.codeTarget=n.payload},setPreviewDurationSeconds:(e,n)=>{e.previewDurationSeconds=n.payload},clear:()=>Va},extraReducers(e){e.addCase(Wa.actions.setFocusOn,(e=>{e.format=null}))}});let Ha=null;const qa=/\\(\$\d+)/g,Ka=/\\\\\\,/g,Ya=/\\\\\\;/g,Xa=e=>{try{return Ja(e)}catch(n){if(!(n instanceof ni))throw n}try{return ei(e)}catch(n){if(!(n instanceof ni))throw n}throw new ni("Not a valid arg ".concat(e))},Ja=e=>{if(ti(e))return e;if(ri(e)){const n=Number(e);if(isNaN(n))throw new ni("Not a valid number arg ".concat(e));return n}throw new ni("Not a valid number arg ".concat(e))},Za=e=>{if(void 0===e)throw new ni("Received undefined");const n=parseInt(e,10);if(isNaN(n))throw new ni("Invalid int received");return n},Qa=e=>{const n=Ja(e);if(0===n||1===n)return n;throw new ni("Should be 0 or 1")},ei=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!ri(e))throw new ni("Not a valid string arg ".concat(e));if(null!==n&&e===n)return"";let t,r=e.replace(Ka,",").replace(Ya,";");for(;t=qa.exec(r);)r=r.replace(t[0],t[1]);return r};class ni extends Error{}const ti=e=>Number.isFinite(e),ri=e=>"string"===typeof e,ai={floatatom:"floatatom",symbolatom:"symbolatom",listbox:"listbox",bng:"bng",tgl:"tgl",nbx:"nbx",vsl:"vsl",hsl:"hsl",vradio:"vradio",hradio:"hradio",vu:"vu",cnv:"cnv",msg:"msg"},ii=(e,n)=>{let{tokens:t}=n;const r=ei(t[2]),a=Xa(t[3]),i=Za(t[5]);return{id:e,args:[r,a,i%2],data:null,layout:{drawAs:["polygon","points","bezier"][i>>>1]}}},oi=(e,n)=>{let{tokens:t}=n;const r=t[4],a=[];if("pd"!==r&&"graph"!==r&&"table"!==r)throw new Error("unknown canvasType : ".concat(r));return"pd"===r&&void 0!==t[5]&&a.push(ei(t[5])),{id:e,type:r,patchId:ei(t[1]),nodeClass:"subpatch",args:a,layout:hi(t)}},si=(e,n)=>{let{tokens:t}=n;return{id:e,args:[],type:"array",nodeClass:"array",arrayId:ei(t[1]),layout:{}}},li=e=>{const n=e[1];let t="";switch(n){case"text":return{type:"text",args:[e.slice(4).join(" ")],nodeClass:"text"};case"obj":return t=ei(e[4]),{type:t,args:e.slice(5),nodeClass:Object.keys(ai).includes(t)?"control":"generic"};default:return t=ei(n),{type:t,args:e.slice(4),nodeClass:Object.keys(ai).includes(t)?"control":"generic"}}},ci=e=>{let{tokens:n}=e;return{source:{nodeId:ei(n[2]),portletId:Za(n[3])},sink:{nodeId:ei(n[4]),portletId:Za(n[5])}}},ui=(e,n,t,r)=>({id:e,type:n,args:t.map(Xa),nodeClass:"generic",layout:r}),di=(e,n,t)=>({id:e,type:"text",args:n.map(Xa),nodeClass:"text",layout:t}),pi=(e,n,t,r)=>{const a={id:e,type:n,args:t,nodeClass:"control",layout:r};if("floatatom"===a.type||"symbolatom"===a.type||"listbox"===a.type)a.layout=_r(_r({},a.layout),{},{widthInChars:Ja(t[0]),labelPos:Ja(t[3]),label:ei(t[4],"-")}),a.args=[Ja(t[1]),Ja(t[2]),ei(t[5],"-"),ei(t[6],"-")];else if("msg"===a.type)a.args=a.args.map(Xa);else if("bng"===a.type)a.layout=_r(_r({},a.layout),{},{size:Ja(t[0]),hold:Ja(t[1]),interrupt:Ja(t[2]),label:ei(t[6],"empty"),labelX:Ja(t[7]),labelY:Ja(t[8]),labelFont:t[9],labelFontSize:Ja(t[10]),bgColor:t[11],fgColor:t[12],labelColor:t[13]}),a.args=[Qa(t[3]),ei(t[5],"empty"),ei(t[4],"empty")];else if("tgl"===a.type)a.layout=_r(_r({},a.layout),{},{size:Ja(t[0]),label:ei(t[4],"empty"),labelX:Ja(t[5]),labelY:Ja(t[6]),labelFont:t[7],labelFontSize:Ja(t[8]),bgColor:t[9],fgColor:t[10],labelColor:t[11]}),a.args=[Ja(t[13]),Qa(t[1]),Ja(t[12]),ei(t[3],"empty"),ei(t[2],"empty")];else if("nbx"===a.type)a.layout=_r(_r({},a.layout),{},{widthInChars:Ja(t[0]),height:Ja(t[1]),log:Ja(t[4]),label:ei(t[8],"empty"),labelX:Ja(t[9]),labelY:Ja(t[10]),labelFont:t[11],labelFontSize:Ja(t[12]),bgColor:t[13],fgColor:t[14],labelColor:t[15],logHeight:t[17]}),a.args=[Ja(t[2]),Ja(t[3]),Qa(t[5]),Ja(t[16]),ei(t[7],"empty"),ei(t[6],"empty")];else if("vsl"===a.type||"hsl"===a.type){a.layout=_r(_r({},a.layout),{},{width:Ja(t[0]),height:Ja(t[1]),log:Ja(t[4]),label:ei(t[8],"empty"),labelX:Ja(t[9]),labelY:Ja(t[10]),labelFont:t[11],labelFontSize:Ja(t[12]),bgColor:t[13],fgColor:t[14],labelColor:t[15],steadyOnClick:t[17]});const e=Ja(t[2]),n=Ja(t[3]),r=Qa(t[4]),i=Ja(t[16]),o="hsl"===a.type?a.layout.width:a.layout.height;let s=0;if(r){const t=Math.log(n/e)/(o-1);s=e*Math.exp(t*i*.01)}else s=e+(n-e)*i/(100*(o-1));a.args=[e,n,Qa(t[5]),s,ei(t[7],"empty"),ei(t[6],"empty")]}else if("vradio"===a.type||"hradio"===a.type)a.layout=_r(_r({},a.layout),{},{size:Ja(t[0]),label:ei(t[6],"empty"),labelX:Ja(t[7]),labelY:Ja(t[8]),labelFont:t[9],labelFontSize:Ja(t[10]),bgColor:t[11],fgColor:t[12],labelColor:t[13]}),a.args=[Ja(t[3]),Qa(t[2]),Ja(t[14]),ei(t[5],"empty"),ei(t[4],"empty"),Qa(t[2])];else if("vu"===a.type)a.layout=_r(_r({},a.layout),{},{width:Ja(t[0]),height:Ja(t[1]),label:ei(t[3],"empty"),labelX:Ja(t[4]),labelY:Ja(t[5]),labelFont:t[6],labelFontSize:Ja(t[7]),bgColor:t[8],labelColor:t[9],log:Ja(t[10])}),a.args=[ei(t[2],"empty"),ei(t[11])];else{if("cnv"!==a.type)throw new Error("Unexpected control node ".concat(a.type));a.layout=_r(_r({},a.layout),{},{size:Ja(t[0]),width:Ja(t[1]),height:Ja(t[2]),label:ei(t[5],"empty"),labelX:Ja(t[6]),labelY:Ja(t[7]),labelFont:t[8],labelFontSize:Ja(t[9]),bgColor:t[10],labelColor:t[11]}),a.args=[ei(t[4],"empty"),ei(t[3],"empty"),ei(t[12])]}return a};function fi(e,n){if(n){const t=n;for(;t.length;){"f"===t.shift()&&(e.layout.width=Ja(t.shift()))}}return e}const hi=e=>({x:Za(e[2]),y:Za(e[3])});function mi(e,n){return mi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},mi(e,n)}function gi(){gi=function(e,n){return new t(e,void 0,n)};var e=RegExp.prototype,n=new WeakMap;function t(e,r,a){var i=RegExp(e,r);return n.set(i,a||n.get(e)),mi(i,t.prototype)}function r(e,t){var r=n.get(t);return Object.keys(r).reduce((function(n,t){var a=r[t];if("number"==typeof a)n[t]=e[a];else{for(var i=0;void 0===e[a[i]]&&i+1<a.length;)i++;n[t]=e[a[i]]}return n}),Object.create(null))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&mi(e,n)}(t,RegExp),t.prototype.exec=function(n){var t=e.exec.call(this,n);if(t){t.groups=r(t,this);var a=t.indices;a&&(a.groups=r(a,this))}return t},t.prototype[Symbol.replace]=function(t,a){if("string"==typeof a){var i=n.get(this);return e[Symbol.replace].call(this,t,a.replace(/\$<([^>]+)>/g,(function(e,n){var t=i[n];return"$"+(Array.isArray(t)?t.join("$"):t)})))}if("function"==typeof a){var o=this;return e[Symbol.replace].call(this,t,(function(){var e=arguments;return"object"!=Sr(e[e.length-1])&&(e=[].slice.call(e)).push(r(e,o)),a.apply(this,e)}))}return e[Symbol.replace].call(this,t,a)},gi.apply(this,arguments)}const yi=gi(/(((?<!\\)\s*)((?<!\\\\)\\,)((?<!\\)\s*))|(((?<!\\)\s*)((?<!\\\\)\\;)((?<!\\)\s*))|((?<!\\)\s)+|\r\n?|\n/,{comma:1,semi:5}),vi=/,(?!\\)/,bi=/(#((.|\r|\n)*?)[^\\\\])\r{0,1}\n{0,1};\r{0,1}(\n|$)/gi,wi=e=>e.split("").reverse().join("");const Si=e=>{const n=Array.from(e.matchAll(new RegExp(yi,"g"))),t=[];n.forEach(((r,a)=>{const i=0===a?0:n[a-1].index+n[a-1][0].length,o=r.index,s=e.slice(i,o);s.length&&t.push(s),r[1]?t.push(","):r[5]&&t.push(";")}));const r=n.slice(-1)[0];if(r){const n=e.slice(r.index+r[0].length);n.length&&t.push(n)}return t},xi=["obj","floatatom","symbolatom","listbox","msg","text"],ki=()=>"".concat(++ki.counter);ki.counter=-1;const Ii=()=>"".concat(++Ii.counter);Ii.counter=-1;const _i=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return t.every(((n,t)=>n===e[t]))};var Ai=e=>{let n=(e=>{const n=[];bi.lastIndex=0;let t=null;for(;t=bi.exec(e);){const r=wi(t[1]).split(vi).reverse().map(wi),a=e.slice(0,t.index).split("\n").length-1;n.push({tokens:Si(r[0]),lineAfterComma:r[1]?Si(r[1]):void 0,lineIndex:a})}return n})(e);const t={pd:{rootPatchId:"0",patches:{},arrays:{}},errors:[],warnings:[],tokenizedLines:n,patchTokenizedLinesMap:{}};return Ti(t,!0),Object.keys(t.pd.patches).forEach((e=>{Oi(t,e),Ci(t,e),Ei(t,e),t.patchTokenizedLinesMap[e].length&&t.patchTokenizedLinesMap[e].forEach((e=>{let{tokens:n,lineIndex:r}=e;t.errors.push({message:'"'.concat(n[0]," ").concat(n[1],'" unexpected chunk'),lineIndex:r})}))})),t.errors.length?{status:1,warnings:t.warnings,errors:t.errors}:{status:0,warnings:t.warnings,pd:t.pd}};const Ti=(e,n)=>{const t=ki(),r=[];let a=null,i=null,o=-1,s=!0,l=e.tokenizedLines[0]?e.tokenizedLines[0].lineIndex:-1;for(;e.tokenizedLines.length&&s;){const{tokens:n,lineIndex:l}=e.tokenizedLines[0];_i(n,"#N","struct")||_i(n,"#X","declare")||_i(n,"#X","scalar")||_i(n,"#X","f")?(e.warnings.push({message:'"'.concat(n[0]," ").concat(n[1],'" chunk is not supported'),lineIndex:l}),e.tokenizedLines.shift()):(o++,Ni(e,l,(()=>{if(_i(n,"#N","canvas")&&0===o)a=e.tokenizedLines.shift();else if(_i(n,"#N","canvas"))Ti(e,!1);else if(_i(n,"#X","obj",n[2],n[3],"table")){const n=e.tokenizedLines.shift().tokens;e.tokenizedLines=[{tokens:["#N","canvas","0","0","100","100","(subpatch)","0"],lineIndex:l},{tokens:["#N","canvas","0","0","100","100","(subpatch)","0"],lineIndex:l},{tokens:["#X","array",ei(n[5]),n[6]||100..toString(),"float","0"],lineIndex:l},{tokens:["#X","restore","0","0","graph"],lineIndex:l},{tokens:["#X","restore",n[2],n[3],"table"],lineIndex:l},...e.tokenizedLines],Ti(e,!1)}else _i(n,"#X","coords")?i=e.tokenizedLines.shift():_i(n,"#X","restore")?(e.tokenizedLines[0].tokens=["PATCH",t,...e.tokenizedLines[0].tokens.slice(2)],s=!1):r.push(e.tokenizedLines.shift())})))}null!==a?(n&&(e.pd.rootPatchId=t),e.pd.patches[t]=((e,n,t,r)=>{const{tokens:a}=t,i=r?r.tokens:null;let o={windowX:Za(a[2]),windowY:Za(a[3]),windowWidth:Za(a[4]),windowHeight:Za(a[5])};if("undefined"!==typeof a[7]&&(o.openOnLoad=Qa(a[7])),i&&"undefined"!==typeof i[8]){const e=Ja(i[8]);o.graphOnParent=e>0?1:0,1===o.graphOnParent&&(o=_r(_r({},o),{},{hideObjectNameAndArguments:2===e?1:0,viewportX:i[9]?Za(i[9]):0,viewportY:i[10]?Za(i[10]):0,viewportWidth:Za(i[6]),viewportHeight:Za(i[7])}))}return{id:e,isRoot:n,layout:o,args:[],nodes:{},connections:[],inlets:[],outlets:[]}})(t,n,a,i),e.patchTokenizedLinesMap[t]=r):e.errors.push({message:"Parsing failed #canvas missing",lineIndex:l})},Ei=(e,n)=>{const t=e.pd.patches[n],r=(e,n)=>parseFloat(e.id)-parseFloat(n.id),a=(e,n)=>e.layout.x-n.layout.x,i=Object.values(t.nodes).filter((e=>["inlet","inlet~"].includes(e.type))),o=i.every((e=>!!e.layout))?a:r;i.sort(o);const s=Object.values(t.nodes).filter((e=>["outlet","outlet~"].includes(e.type))),l=s.every((e=>!!e.layout))?a:r;s.sort(l),e.pd.patches[n]=_r(_r({},t),{},{inlets:i.map((e=>e.id)),outlets:s.map((e=>e.id))})},Oi=(e,n)=>{const t=e.patchTokenizedLinesMap[n],r=[];let a=null;for(;t.length;){const{tokens:n,lineIndex:i}=t[0];Ni(e,i,(()=>{if(_i(n,"#X","array"))a=ii(Ii(),t.shift()),e.pd.arrays[a.id]=a,r.push({tokens:["ARRAY",a.id],lineAfterComma:[],lineIndex:i});else if(_i(n,"#A")){if(!a)throw new Error("line ".concat(i,": Unsupported data chunk #A."));if(0===a.args[2])throw new Error("got array data for an array that doesn't save contents.");const e=a.data||[];a.data=e;const r=Ja(n[1]);n.slice(2).forEach(((n,t)=>{const a=Ja(n);Number.isFinite(a)&&(e[r+t]=a)})),t.shift()}else r.push(t.shift())}))}e.patchTokenizedLinesMap[n]=r},Ci=(e,n)=>{const t=e.pd.patches[n],r=e.patchTokenizedLinesMap[n],a=[];let i=-1;const o=()=>"".concat(++i);for(;r.length;){const{tokens:n,lineIndex:i}=r[0];Ni(e,i,(()=>{let e=null;if(_i(n,"PATCH"))e=oi(o(),r.shift());else if(_i(n,"ARRAY"))e=si(o(),r.shift());else if(xi.some((e=>_i(n,"#X",e)))){const n=r.shift(),{nodeClass:t,type:a,args:i}=li(n.tokens),s=hi(n.tokens);e="control"===t?pi(o(),a,i,s):"text"===t?di(o(),i,s):ui(o(),a,i,s),e=fi(e,n.lineAfterComma)}e?t.nodes[e.id]=e:_i(n,"#X","connect")?t.connections.push(ci(r.shift())):a.push(r.shift())}))}e.patchTokenizedLinesMap[n]=a},Ni=(e,n,t)=>{try{t()}catch(r){if(!(r instanceof ni))throw r;e.errors.push({message:r.message,lineIndex:n})}},Mi=e=>async n=>{let t=null;try{t=await e(n)}catch(a){if(a instanceof Pi)return{status:1,unknownNodeType:n};throw a}const r=Ai(t);return 0===r.status?{status:0,pd:r.pd,parsingWarnings:r.warnings}:{status:1,parsingErrors:r.errors,parsingWarnings:r.warnings}};class Pi extends Error{}const Fi=(e,n)=>{const t=e[n];if(!t)throw new Error("no artefact was generated for ".concat(n));return t},Ri=e=>(new TextDecoder).decode(e);var Li="0.1.2";const Di=e=>{let{variableNamesReadOnly:n,precompiledCode:{dependencies:t},settings:{audio:r,io:a,customMetadata:i}}=e;const o={},s=[...t.exports,...t.imports.map((e=>e.name))];return Object.entries(n.globals).forEach((e=>{let[n,t]=e;return Object.entries(t||{}).forEach((e=>{let[t,r]=e;s.includes(r)&&(o[n]||(o[n]={}),o[n][t]=r)}))})),{libVersion:Li,customMetadata:i,settings:{audio:_r(_r({},r),{},{sampleRate:0,blockSize:0}),io:a},compilation:{variableNamesIndex:{io:n.io,globals:o}}}},ji=e=>{const n=[];for(let t=0;t<e;t++)n.push(t);return n},zi=(e,n)=>{const t={};return e.forEach(((e,r)=>{const[a,i]=n(e,r);t[a]=i})),t},Bi=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];const r=n.find((e=>{let[n]=e;return n}));if(!r)throw new Error("no route found");return r[1]},Ui=(e,n,t)=>Xi({astType:"Var",name:n,type:e,value:void 0!==t?Ji(t):void 0}),Wi=(e,n,t)=>Xi({astType:"ConstVar",name:n,type:e,value:Ji(t)}),$i=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"void";return function(r){for(var a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];return Xi({astType:"Func",name:e,args:n,returnType:t,body:qi(r,...i)})}},Vi=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"void";return function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return Xi({astType:"Func",name:null,args:e,returnType:n,body:qi(t,...a)})}},Gi=(e,n)=>Xi({astType:"Class",name:e,members:n}),Hi=e=>({astType:"Sequence",content:Ki(Yi(e,ji(e.length-1).map((()=>"\n"))))}),qi=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return Xi({astType:"Sequence",content:Ki(Yi(e,t))})},Ki=e=>{const n=e.flatMap((e=>"string"===typeof e?[e]:"number"===typeof e?[e.toString()]:null===e?[]:Array.isArray(e)?Ki(Yi(e,ji(e.length-1).map((()=>"\n")))):"object"===typeof e&&"Sequence"===e.astType?e.content:[e])),[t,r]=n.reduce(((e,n)=>{let[t,r]=e;return"string"===typeof n?[t,r+n]:r.length?[[...t,r,n],""]:[[...t,n],""]}),[[],""]);return r.length&&t.push(r),t},Yi=(e,n)=>0===e.length?[]:e.slice(1).reduce(((e,t,r)=>e.concat([n[r],t])),[e[0]]),Xi=e=>_r({},e),Ji=e=>"number"===typeof e?Hi([e.toString()]):"string"===typeof e?Hi([e]):e,Zi=(e,n)=>{const t=e[n];if(t)return t;throw new Error('Node "'.concat(n,'" not found in graph'))},Qi=(e,n)=>{const t=e.inlets[n];if(t)return t;throw new Error('Inlet "'.concat(n,'" not found in node ').concat(e.id," of type ").concat(e.type))},eo=(e,n)=>{const t=e.outlets[n];if(t)return t;throw new Error('Outlet "'.concat(n,'" not found in node ').concat(e.id," of type ").concat(e.type))},no=(e,n)=>e.sinks[n]||[],to=(e,n)=>e.sources[n]||[],ro=(e,n)=>n.map((n=>Zi(e,n))),ao=(e,n,t)=>so(n.sinks,eo,e,n,t),io=(e,n)=>oo(e.sinks,eo,e,n),oo=(e,n,t,r)=>Object.entries(e).reduce(((e,a)=>{let[i,o]=a;const s={portletId:i,nodeId:t.id};return n(t,i).type===r||void 0===r?[...e,...o.map((e=>[s,e]))]:e}),[]),so=(e,n,t,r,a)=>oo(e,n,r,a).reduce(((e,n)=>{let[t,r]=n;return e.includes(r.nodeId)?e:[...e,r.nodeId]}),[]).map((e=>Zi(t,e))),lo=(e,n,t)=>{const r=[];return n.forEach((n=>co(r,[],e,n,t))),r},co=(e,n,t,r,a)=>{if(a&&!a(r))return;const i=[...n,r.id];((e,n,t)=>so(n.sources,Qi,e,n,t))(t,r,"signal").forEach((r=>{-1===n.indexOf(r.id)&&co(e,i,t,r,a)})),-1===e.indexOf(r.id)&&e.push(r.id)},uo=(e,n)=>{const t=[];return n.forEach((n=>{po(t,e,n)})),t},po=(e,n,t)=>{-1===e.indexOf(t.id)&&(e.push(t.id),ao(n,t,"message").forEach((t=>{po(e,n,t)})))},fo=(e,n)=>{const t={};return Object.entries(e).forEach((e=>{let[r,a]=e;const i=a.filter((e=>{let{nodeId:t}=e;return n.includes(t)}));i.length&&(t[r]=i)})),t},ho=(e,n)=>{const t={};return Object.entries(e).forEach((e=>{let[r,a]=e;const i=a.filter((e=>{let{nodeId:t}=e;return n.includes(t)}));i.length&&(t[r]=i)})),t},mo=function(e){return{id:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DUMMY",args:{},sources:{},sinks:{},inlets:{},outlets:{}}},go=(e,n)=>e.portletId===n.portletId&&e.nodeId===n.nodeId,yo={Var:(e,n)=>"let ".concat(e.name).concat(n?" = ".concat(n):""),ConstVar:(e,n)=>"const ".concat(e.name," = ").concat(n),Func:(e,n,t)=>"function ".concat(null!==e.name?e.name:"","(").concat(e.args.map(((e,t)=>n[t]?"".concat(e.name,"=").concat(n[t]):e.name)).join(", "),") {").concat(t,"}"),Class:()=>""},vo={Var:(e,n)=>"let ".concat(e.name,": ").concat(e.type).concat(n?" = ".concat(n):""),ConstVar:(e,n)=>"const ".concat(e.name,": ").concat(e.type," = ").concat(n),Func:(e,n,t)=>"function ".concat(null!==e.name?e.name:"","(").concat(e.args.map(((e,t)=>"".concat(e.name,": ").concat(e.type).concat(n[t]?"=".concat(n[t]):""))).join(", "),"): ").concat(e.returnType," {").concat(t,"}"),Class:e=>"class ".concat(e.name," {\n").concat(e.members.map((e=>"".concat(e.name,": ").concat(e.type))).join("\n"),"\n}")},bo=(e,n)=>{const t=e[n];if(!t)throw new Error("node [".concat(n,"] is not implemented"));return _r({dependencies:[]},t)},wo=e=>{const n=Object.values(e).filter((e=>!!e.isPullingSignal)),t=Object.values(e).filter((e=>!!e.isPushingMessages));return Array.from(new Set([...uo(e,t),...lo(e,n)]))},So=e=>lo(e,xo(e)),xo=e=>Object.values(e).filter((e=>!!e.isPullingSignal)),ko=(e,n)=>ro(e.graph,n.traversal).reduce(((n,t)=>{if(!Ao(e,t)||ao(e.graph,t,"signal").every((n=>Ao(e,n))))return n;let r=!0;const a={outNodesIds:[t.id],traversal:lo(e.graph,[t],(n=>(r=r&&Ao(e,n),r)))};return r?[...n,a]:n}),[]),Io=(e,n)=>ro(e,n.outNodesIds).flatMap((e=>io(e,"signal"))),_o=(e,n)=>e.filter((e=>!n.includes(e))),Ao=(e,n)=>{let{precompiledCodeAssigner:t}=e;const r=t.nodes[n.id],a=t.nodeImplementations[r.nodeType];return!!a.nodeImplementation.flags&&!!a.nodeImplementation.flags.isPureFunction},To=(e,n)=>{let{precompiledCodeAssigner:t}=e;const r=io(n,"signal").map((e=>{let[n,t]=e;return t})).reduce(((e,n)=>e.every((e=>!go(e,n)))?[...e,n]:e),[]),a=t.nodes[n.id],i=t.nodeImplementations[a.nodeType];return!!i.nodeImplementation.flags&&!!i.nodeImplementation.flags.isDspInline&&1===r.length};var Eo,Oo,Co,No,Mo,Po,Fo;var Ro=e=>{let{precompiledCode:n}=e;return n.dependencies.ast},Lo=e=>{let{precompiledCode:{nodeImplementations:n}}=e;return Hi(Object.values(n).map((e=>[e.stateClass,e.core])))},Do=e=>{let{precompiledCode:{graph:n,nodes:t,nodeImplementations:a}}=e;return Hi([n.fullTraversal.reduce(((e,n)=>{const i=t[n],o=a[i.nodeType];if(i.state){if(!o.stateClass)throw new Error('Node "'.concat(n,'" of type ').concat(i.nodeType," has a state but no state class"));return[...e,Wi(o.stateClass.name,i.state.name,qi(Eo||(Eo=r(["{\n                                ","\n                            }"])),Object.entries(i.state.initialization).map((e=>{let[n,t]=e;return qi(Oo||(Oo=r(["",": ",","])),n,t)}))))]}return e}),[])])},jo=e=>{let{precompiledCode:{graph:n,nodes:t}}=e;return Hi([n.fullTraversal.map((e=>t[e].initialization))])},zo=e=>{let{globals:{msg:n},precompiledCode:{io:t}}=e;return Hi(Object.values(t.messageReceivers).map((e=>Object.values(e).map((e=>$i(e.functionName,[Ui(n.Message,"m")],"void")(Co||(Co=r(["\n                    ","(m)\n                "])),e.getSinkFunctionName()))))))},Bo=(e,n)=>{let{precompiledCode:t}=e;return Hi(Object.entries(t.io.messageSenders).map((e=>{let[t,r]=e;return Object.entries(r).map((e=>{let[r,a]=e;return n(a.functionName,t,r)}))})))},Uo=e=>{let{globals:{msg:n},precompiledCode:{graph:t,nodes:a},settings:{debug:i}}=e;return Hi([t.fullTraversal.map((e=>[a[e],e])).map((e=>{let[t,a]=e;return[Object.values(t.signalOuts).map((e=>Ui("Float",e,"0"))),Object.entries(t.messageReceivers).map((e=>{let[t,o]=e;return $i(o.name,o.args,o.returnType)(No||(No=r(["\n                            ","\n                            throw new Error('Node \"",'", inlet "',"\", unsupported message : ' + ","(",")",")\n                        "])),o.body,a,t,n.display,o.args[0].name,i?" + '\\nDEBUG : remember, you must return from message receiver'":"")}))]})),t.fullTraversal.flatMap((e=>Object.values(a[e].messageSenders))).filter((e=>{let{sinkFunctionNames:n}=e;return n.length>0})).map((e=>{let{messageSenderName:t,sinkFunctionNames:a}=e;return $i(t,[Ui(n.Message,"m")],"void")(Mo||(Mo=r(["\n                        ","\n                    "])),a.map((e=>"".concat(e,"(m)"))))}))])},Wo=e=>{let{globals:{core:n,commons:t},precompiledCode:{nodes:a,graph:{hotDspGroup:i,coldDspGroups:o}}}=e;return qi(Po||(Po=r(["\n        for ("," = 0; "," < ","; ","++) {\n            ","(",")\n            ","\n            ","++\n        }\n    "])),n.IT_FRAME,n.IT_FRAME,n.BLOCK_SIZE,n.IT_FRAME,t._emitFrame,n.FRAME,i.traversal.map((e=>[...Object.entries(a[e].dsp.inlets).filter((n=>{let[t]=n;return void 0===(r=o,a={nodeId:e,portletId:t},Object.values(r).find((e=>{let{sinkConnections:n}=e;return n.find((e=>{let[n,t]=e;return go(t,a)}))})));var r,a})).map((e=>{let[n,t]=e;return t})),a[e].dsp.loop])),n.FRAME)},$o=e=>{let{globals:{msg:n},precompiledCode:{graph:t}}=e;return Hi(Object.values(t.coldDspGroups).map((e=>{let{functionName:t}=e;return"".concat(t,"(").concat(n.EMPTY_MESSAGE,")")})))},Vo=e=>{let{globals:{msg:n},precompiledCode:{graph:{coldDspGroups:t},nodes:a}}=e;return Hi(Object.values(t).map((e=>{let{dspGroup:t,sinkConnections:i,functionName:o}=e;return $i(o,[Ui(n.Message,"m")],"void")(Fo||(Fo=r(["\n                    ","\n                    ","\n                "])),t.traversal.map((e=>a[e].dsp.loop)),i.filter((e=>{let[n,t]=e;return t.portletId in a[t.nodeId].dsp.inlets})).map((e=>{let[n,t]=e;return a[t.nodeId].dsp.inlets[t.portletId]})))})))},Go=(e,n,t)=>{let{precompiledCode:{dependencies:r}}=e;return Hi([r.imports.map(n),r.exports.map(t)])};const Ho=(e,n)=>{if("string"===typeof n)return n;if("Var"===n.astType)return n.value?e.Var(n,Ho(e,n.value)):e.Var(n);if("ConstVar"===n.astType){if(!n.value)throw new Error("ConstVar ".concat(n.name," must have an initial value"));return e.ConstVar(n,Ho(e,n.value))}if("Func"===n.astType)return e.Func(n,n.args.map((n=>n.value?Ho(e,n.value):null)),Ho(e,n.body));if("Class"===n.astType)return e.Class(n);if("Sequence"===n.astType)return n.content.map((n=>Ho(e,n))).join("");throw new Error("Unexpected element in AST ".concat(n))},qo=(e,n,t)=>{const r=Ko(t);return{keys:[...r.keys,n],parents:[...r.parents,e]}},Ko=e=>e||{keys:[],parents:[]},Yo=()=>{throw new Error("This Proxy is read-only.")},Xo=(e,n,t)=>{if(!(n in e)){if(["toJSON","Symbol(Symbol.toStringTag)","constructor","$typeof","$$typeof","@@__IMMUTABLE_ITERABLE__@@","@@__IMMUTABLE_RECORD__@@","then"].includes(n))return!0;throw new Error("namespace".concat(t?" <".concat(t.keys.join("."),">"):""," doesn't know key \"").concat(String(n),'"'))}return!1},Jo=(e,n,t,r)=>{const a=r||{keys:[],parents:[]},i=Jo.ensureValue(n,e,t,a);if(r){const n=r.parents[r.parents.length-1],t=r.keys[r.keys.length-1];t in n&&!("LiteralDefaultNull"in e)||(n[t]=i)}return"Literal"in e||"LiteralDefaultNull"in e?i:new Proxy(i,{get:(n,r)=>{const o=String(r);let s;if("Index"in e)s=e.Index(o,t,a);else{if(!("Interface"in e))throw new Error("no builder");if(!(o in e.Interface))throw new Error('Interface has no entry "'.concat(String(o),'"'));s=e.Interface[o]}return Jo(s,o in i?i[o]:void 0,t,qo(i,o,a))},set:Yo})};Jo.ensureValue=(e,n,t,r,a)=>{if("Index"in n)return e||n.indexConstructor(t,Ko(r));if("Interface"in n){const i=e||{};return Object.entries(n.Interface).forEach((e=>{let[n,o]=e;i[n]=Jo.ensureValue(i[n],o,t,qo(i,n,r),qo(i,n,a))})),i}if("Literal"in n)return e||n.Literal(t,Ko(r));if("LiteralDefaultNull"in n)return a?e||null:e||n.LiteralDefaultNull(t,Ko(r));throw new Error("Invalid Assigner")},Jo.Interface=e=>({Interface:e}),Jo.Index=(e,n)=>({Index:e,indexConstructor:n||(()=>({}))}),Jo.Literal=e=>({Literal:e}),Jo.LiteralDefaultNull=e=>({LiteralDefaultNull:e});const Zo=(e,n)=>new Proxy(e,{get:(e,t)=>{const r=String(t);if(!Xo(e,r,n))return e[r]},set:(e,n,t)=>{const r=ns(String(n));if(e.hasOwnProperty(r))throw new Error('Key "'.concat(String(r),'" is protected and cannot be overwritten.'));return e[r]=t,t}}),Qo=(e,n)=>new Proxy(e,{get:(e,t)=>{const r=String(t);if(Xo(e,r,n))return;const a=e[r];return"object"===typeof a&&null!==a?Qo(a,qo(e,r,n)):a},set:Yo}),es=(e,n,t)=>new Proxy(e,{get:(e,r)=>{const a=ns(String(r));if(!Xo(e,a,{parents:[e],keys:[n,t]}))return e[a]},set:Yo}),ns=e=>{const n=/\$(.*)/.exec(e);return n?n[1]:e};var ts,rs,as,is,os,ss,ls,cs,us,ds,ps,fs,hs=e=>{const{precompiledCode:n,settings:t,variableNamesReadOnly:a}=e,i=a.globals,o={settings:t,globals:i,precompiledCode:n},{channelCount:s}=t.audio,l=Di(e);return Ho(vo,qi(ls||(ls=r(["\n        const metadata: string = '","'\n\n        ","\n        ","\n\n        ","\n        ","\n\n        ","\n        ","\n        ","\n\n        export function initialize(sampleRate: Float, blockSize: Int): void {\n            "," = createFloatArray(blockSize * ",")\n            "," = createFloatArray(blockSize * ",")\n            "," = sampleRate\n            "," = blockSize\n\n            ","\n            ","\n        }\n\n        export function dspLoop(): void {\n            ","\n        }\n\n        export {\n            metadata,\n            ","\n        }\n\n        ","\n    "])),(e=>JSON.stringify(e).replace(/\\"/g,'\\\\"'))(l),Ro(o),Lo(o),Do(o),Uo(o),Vo(o),zo(o),Bo(o,(e=>qi(cs||(cs=r(["export declare function ","(m: ","): void"])),e,i.msg.Message))),i.core.INPUT,s.in.toString(),i.core.OUTPUT,s.out.toString(),i.core.SAMPLE_RATE,i.core.BLOCK_SIZE,jo(o),$o(o),Wo(o),Object.values(n.io.messageReceivers).map((e=>Object.values(e).map((e=>{let{functionName:n}=e;return n+","})))),Go(o,(e=>{let{name:n,args:t,returnType:a}=e;return qi(us||(us=r(["export declare function "," (","): ",""])),n,t.map((e=>"".concat(e.name,": ").concat(e.type))).join(","),a)}),(e=>qi(ds||(ds=r(["export { "," }"])),e)))))};const ms="G",gs="N",ys="NT",vs="IO",bs="COLD",ws=Jo.Interface({nodes:Jo.Index((e=>Jo.Interface({signalOuts:Jo.Index((n=>Jo.Literal((()=>Is(gs,e,"outs",n))))),messageSenders:Jo.Index((n=>Jo.Literal((()=>Is(gs,e,"snds",n))))),messageReceivers:Jo.Index((n=>Jo.Literal((()=>Is(gs,e,"rcvs",n))))),state:Jo.LiteralDefaultNull((()=>Is(gs,e,"state")))}))),nodeImplementations:Jo.Index(((e,n)=>{let{nodeImplementations:t}=n;const r=bo(t,e),a=(r.flags?r.flags.alphaName:null)||e;return Jo.Index((e=>Jo.Literal((()=>Is(ys,a,e)))))})),globals:Jo.Index((e=>Jo.Index((n=>["fs"].includes(e)?Jo.Literal((()=>Is(ms,e,n))):"core"===e?Jo.Literal((()=>n)):Jo.Literal((()=>Is(ms,e,n))))))),io:Jo.Interface({messageReceivers:Jo.Index((e=>Jo.Index((n=>Jo.Literal((()=>Is(vs,"rcv",e,n))))))),messageSenders:Jo.Index((e=>Jo.Index((n=>Jo.Literal((()=>Is(vs,"snd",e,n)))))))}),coldDspGroups:Jo.Index((e=>Jo.Literal((()=>Is(bs,e)))))}),Ss=e=>{let{input:n,variableNamesIndex:t}=e;return Jo(ws,t,n)},xs=Jo.Interface({graph:Jo.Literal(((e,n)=>({fullTraversal:[],hotDspGroup:{traversal:[],outNodesIds:[]},coldDspGroups:Zo({},n)}))),nodeImplementations:Jo.Index(((e,n)=>{let{nodeImplementations:t}=n;return Jo.Literal((()=>({nodeImplementation:bo(t,e),stateClass:null,core:null})))}),((e,n)=>Zo({},n))),nodes:Jo.Index(((e,n)=>{let{graph:t}=n;return Jo.Literal((()=>({nodeType:Zi(t,e).type,messageReceivers:{},messageSenders:{},signalOuts:{},signalIns:{},initialization:qi(ps||(ps=r([""]))),dsp:{loop:qi(fs||(fs=r([""]))),inlets:{}},state:null})))}),((e,n)=>Zo({},n))),dependencies:Jo.Literal((()=>({imports:[],exports:[],ast:Hi([])}))),io:Jo.Interface({messageReceivers:Jo.Index((e=>Jo.Literal(((e,n)=>Zo({},n)))),((e,n)=>Zo({},n))),messageSenders:Jo.Index((e=>Jo.Literal(((e,n)=>Zo({},n)))),((e,n)=>Zo({},n)))})}),ks=e=>{let{input:n,precompiledCode:t}=e;return Jo(xs,t,n)},Is=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.map(_s).join("_")},_s=e=>{if(!As.exec(e))throw new Error('Invalid variable name for code generation "'.concat(e,'"'));return e},As=/^[a-zA-Z0-9_]+$/;var Ts,Es,Os,Cs,Ns,Ms,Ps,Fs;const Rs={namespace:"sked",code:(e,n,t)=>{let{ns:a}=e,{target:i}=t;const o=[];return"assemblyscript"===i&&o.push("\n                type ".concat(a.Callback," = (event: ").concat(a.Event,") => void\n                type ").concat(a.Id," = Int\n                type ").concat(a.Mode," = Int\n                type ").concat(a.Event," = string\n            ")),Hi([...o,Wi(a.Id,a.ID_NULL,"-1"),Wi(a.Id,a._ID_COUNTER_INIT,"1"),Wi("Int",a._MODE_WAIT,"0"),Wi("Int",a._MODE_SUBSCRIBE,"1"),Gi(a._Request,[Ui(a.Id,"id"),Ui(a.Mode,"mode"),Ui(a.Callback,"callback")]),Gi(a.Skeduler,[Ui("Map<".concat(a.Event,", Array<").concat(a.Id,">>"),"events"),Ui("Map<".concat(a.Id,", ").concat(a._Request,">"),"requests"),Ui("boolean","isLoggingEvents"),Ui("Set<".concat(a.Event,">"),"eventLog"),Ui(a.Id,"idCounter")]),$i(a.create,[Ui("boolean","isLoggingEvents")],a.Skeduler)(Ts||(Ts=r(["\n                return {\n                    eventLog: new Set(),\n                    events: new Map(),\n                    requests: new Map(),\n                    idCounter: ",",\n                    isLoggingEvents,\n                }\n            "])),a._ID_COUNTER_INIT),$i(a.wait,[Ui(a.Skeduler,"skeduler"),Ui(a.Event,"event"),Ui(a.Callback,"callback")],a.Id)(Es||(Es=r(['\n                if (skeduler.isLoggingEvents === false) {\n                    throw new Error("Please activate skeduler\'s isLoggingEvents")\n                }\n\n                if (skeduler.eventLog.has(event)) {\n                    callback(event)\n                    return ',"\n                } else {\n                    return ","(skeduler, event, callback, ",")\n                }\n            "])),a.ID_NULL,a._createRequest,a._MODE_WAIT),$i(a.waitFuture,[Ui(a.Skeduler,"skeduler"),Ui(a.Event,"event"),Ui(a.Callback,"callback")],a.Id)(Os||(Os=r(["\n                return ","(skeduler, event, callback, ",")\n            "])),a._createRequest,a._MODE_WAIT),$i(a.subscribe,[Ui(a.Skeduler,"skeduler"),Ui(a.Event,"event"),Ui(a.Callback,"callback")],a.Id)(Cs||(Cs=r(["\n                return ","(skeduler, event, callback, ",")\n            "])),a._createRequest,a._MODE_SUBSCRIBE),$i(a.emit,[Ui(a.Skeduler,"skeduler"),Ui(a.Event,"event")],"void")(Ns||(Ns=r(["\n                if (skeduler.isLoggingEvents === true) {\n                    skeduler.eventLog.add(event)\n                }\n                if (skeduler.events.has(event)) {\n                    ","\n                    ","\n                    for (","; i < skedIds.length; i++) {\n                        if (skeduler.requests.has(skedIds[i])) {\n                            ","\n                            request.callback(event)\n                            if (request.mode === ",") {\n                                skeduler.requests.delete(request.id)\n                            } else {\n                                skedIdsStaying.push(request.id)\n                            }\n                        }\n                    }\n                    skeduler.events.set(event, skedIdsStaying)\n                }\n            "])),Wi("Array<".concat(a.Id,">"),"skedIds","skeduler.events.get(event)"),Wi("Array<".concat(a.Id,">"),"skedIdsStaying","[]"),Ui("Int","i","0"),Wi(a._Request,"request","skeduler.requests.get(skedIds[i])"),a._MODE_WAIT),$i(a.cancel,[Ui(a.Skeduler,"skeduler"),Ui(a.Id,"id")],"void")(Ms||(Ms=r(["\n                skeduler.requests.delete(id)\n            "]))),$i(a._createRequest,[Ui(a.Skeduler,"skeduler"),Ui(a.Event,"event"),Ui(a.Callback,"callback"),Ui(a.Mode,"mode")],a.Id)(Ps||(Ps=r(["\n                ","\n                ","\n                skeduler.requests.set(id, request)\n                if (!skeduler.events.has(event)) {\n                    skeduler.events.set(event, [id])    \n                } else {\n                    skeduler.events.get(event).push(id)\n                }\n                return id\n            "])),Wi(a.Id,"id","".concat(a._nextId,"(skeduler)")),Wi(a._Request,"request","{\n                    id, \n                    mode, \n                    callback,\n                }")),$i(a._nextId,[Ui(a.Skeduler,"skeduler")],a.Id)(Fs||(Fs=r(["\n                return skeduler.idCounter++\n            "])))])}};var Ls,Ds,js,zs,Bs,Us,Ws,$s;const Vs="commons",Gs={namespace:Vs,code:(e,n,t)=>{let{ns:a}=e,{sked:i}=n;return Hi([Wi("Map<string, FloatArray>",a._ARRAYS,"new Map()"),Wi(i.Skeduler,a._ARRAYS_SKEDULER,"".concat(i.create,"(false)")),$i(a.getArray,[Ui("string","arrayName")],"FloatArray")(Ls||(Ls=r(["\n            if (!",".has(arrayName)) {\n                throw new Error('Unknown array ' + arrayName)\n            }\n            return ",".get(arrayName)\n        "])),a._ARRAYS,a._ARRAYS),$i(a.hasArray,[Ui("string","arrayName")],"boolean")(Ds||(Ds=r(["\n            return ",".has(arrayName)\n        "])),a._ARRAYS),$i(a.setArray,[Ui("string","arrayName"),Ui("FloatArray","array")],"void")(js||(js=r(["\n            ",".set(arrayName, array)\n            ","(",", arrayName)\n        "])),a._ARRAYS,i.emit,a._ARRAYS_SKEDULER),$i(a.subscribeArrayChanges,[Ui("string","arrayName"),Ui(i.Callback,"callback")],i.Id)(zs||(zs=r(["\n            const id = ","(",", arrayName, callback)\n            if (",".has(arrayName)) {\n                callback(arrayName)\n            }\n            return id\n        "])),i.subscribe,a._ARRAYS_SKEDULER,a._ARRAYS),$i(a.cancelArrayChangesSubscription,[Ui(i.Id,"id")],"void")(Bs||(Bs=r(["\n            ","(",", id)\n        "])),i.cancel,a._ARRAYS_SKEDULER),Object.entries(t.arrays).map((e=>{let[n,t]=e;return Hi(["".concat(a.setArray,'("').concat(n,'", createFloatArray(').concat(t.length,"))"),"".concat(a.getArray,'("').concat(n,'").set(').concat(JSON.stringify(Array.from(t)),")")])}))])},exports:e=>{let{ns:n}=e;return[n.getArray,n.setArray]},dependencies:[Rs]},Hs={namespace:Vs,code:(e,n)=>{let{ns:t}=e,{sked:a}=n;return Hi([Wi(a.Skeduler,t._FRAME_SKEDULER,"".concat(a.create,"(false)")),$i(t._emitFrame,[Ui("Int","frame")],"void")(Us||(Us=r(["\n            ","(",", frame.toString())\n        "])),a.emit,t._FRAME_SKEDULER),$i(t.waitFrame,[Ui("Int","frame"),Ui(a.Callback,"callback")],a.Id)(Ws||(Ws=r(["\n            return ","(",", frame.toString(), callback)\n        "])),a.waitFuture,t._FRAME_SKEDULER),$i(t.cancelWaitFrame,[Ui(a.Id,"id")],"void")($s||($s=r(["\n            ","(",", id)\n        "])),a.cancel,t._FRAME_SKEDULER)])},dependencies:[Rs]};var qs,Ks,Ys,Xs,Js,Zs,Qs,el,nl,tl,rl,al,il,ol,sl,ll;const cl={namespace:"core",code:(e,n,t)=>{let{ns:a}=e,{target:i,audio:{bitDepth:o}}=t;const s=32===o?"f32":"f64",l=32===o?"Float32Array":"Float64Array",c=32===o?"getFloat32":"getFloat64",u=32===o?"setFloat32":"setFloat64",d={toInt:$i(a.toInt,[Ui("Float","v")],"Int"),toFloat:$i(a.toFloat,[Ui("Int","v")],"Float"),createFloatArray:$i(a.createFloatArray,[Ui("Int","length")],"FloatArray"),setFloatDataView:$i(a.setFloatDataView,[Ui("DataView","dataView"),Ui("Int","position"),Ui("Float","value")],"void"),getFloatDataView:$i(a.getFloatDataView,[Ui("DataView","dataView"),Ui("Int","position")],"Float")},p=[Ui("Int",a.IT_FRAME,"0"),Ui("Int",a.FRAME,"0"),Ui("Int",a.BLOCK_SIZE,"0"),Ui("Float",a.SAMPLE_RATE,"0"),Ui("Float",a.NULL_SIGNAL,"0"),Ui("FloatArray",a.INPUT,"createFloatArray(0)"),Ui("FloatArray",a.OUTPUT,"createFloatArray(0)")];if("assemblyscript"===i)return Hi(["\n                type FloatArray = ".concat(l,"\n                type Float = ").concat(s,"\n                type Int = ").concat("i32","\n                "),d.toInt(qs||(qs=r(["\n                    return ","(v)\n                "])),"i32"),d.toFloat(Ks||(Ks=r(["\n                    return ","(v)\n                "])),s),d.createFloatArray(Ys||(Ys=r(["\n                    return new ","(length)\n                "])),l),d.setFloatDataView(Xs||(Xs=r(["\n                    dataView.","(position, value)\n                "])),u),d.getFloatDataView(Js||(Js=r(["\n                    return dataView.","(position)\n                "])),c),$i(a.x_createListOfArrays,[],"FloatArray[]")(Zs||(Zs=r(["\n                    const arrays: FloatArray[] = []\n                    return arrays\n                "]))),$i(a.x_pushToListOfArrays,[Ui("FloatArray[]","arrays"),Ui("FloatArray","array")],"void")(Qs||(Qs=r(["\n                    arrays.push(array)\n                "]))),$i(a.x_getListOfArraysLength,[Ui("FloatArray[]","arrays")],"Int")(el||(el=r(["\n                    return arrays.length\n                "]))),$i(a.x_getListOfArraysElem,[Ui("FloatArray[]","arrays"),Ui("Int","index")],"FloatArray")(nl||(nl=r(["\n                    return arrays[index]\n                "]))),$i(a.x_getInput,[],"FloatArray")(tl||(tl=r(["\n                    return ","\n                "])),a.INPUT),$i(a.x_getOutput,[],"FloatArray")(rl||(rl=r(["\n                    return ","\n                "])),a.OUTPUT),...p]);if("javascript"===i)return Hi(["\n                const i32 = (v) => v\n                const f32 = i32\n                const f64 = i32\n                ",d.toInt(al||(al=r(["\n                    return v\n                "]))),d.toFloat(il||(il=r(["\n                    return v\n                "]))),d.createFloatArray(ol||(ol=r(["\n                    return new ","(length)\n                "])),l),d.setFloatDataView(sl||(sl=r(["\n                    dataView.","(position, value)\n                "])),u),d.getFloatDataView(ll||(ll=r(["\n                    return dataView.","(position)\n                "])),c),...p]);throw new Error("Unexpected target: ".concat(i))},exports:(e,n,t)=>{let{ns:r}=e,{target:a}=t;return"assemblyscript"===a?[r.x_createListOfArrays,r.x_pushToListOfArrays,r.x_getListOfArraysLength,r.x_getListOfArraysElem,r.x_getInput,r.x_getOutput,r.createFloatArray]:[]}};var ul,dl,pl,fl,hl,ml,gl,yl,vl,bl,wl,Sl,xl,kl,Il,_l,Al,Tl,El,Ol,Cl,Nl,Ml,Pl,Fl,Rl,Ll,Dl,jl,zl,Bl,Ul,Wl,$l;const Vl={namespace:"msg",code:(e,n,t)=>{let{ns:a}=e,{target:i}=t;const o={create:$i(a.create,[Ui(a.Template,"template")],a.Message),writeStringToken:$i(a.writeStringToken,[Ui(a.Message,"message"),Ui("Int","tokenIndex"),Ui("string","value")],"void"),writeFloatToken:$i(a.writeFloatToken,[Ui(a.Message,"message"),Ui("Int","tokenIndex"),Ui(a._FloatToken,"value")],"void"),readStringToken:$i(a.readStringToken,[Ui(a.Message,"message"),Ui("Int","tokenIndex")],"string"),readFloatToken:$i(a.readFloatToken,[Ui(a.Message,"message"),Ui("Int","tokenIndex")],a._FloatToken),getLength:$i(a.getLength,[Ui(a.Message,"message")],"Int"),getTokenType:$i(a.getTokenType,[Ui(a.Message,"message"),Ui("Int","tokenIndex")],"Int"),isStringToken:$i(a.isStringToken,[Ui(a.Message,"message"),Ui("Int","tokenIndex")],"boolean"),isFloatToken:$i(a.isFloatToken,[Ui(a.Message,"message"),Ui("Int","tokenIndex")],"boolean"),isMatching:$i(a.isMatching,[Ui(a.Message,"message"),Ui("Array<".concat(a._HeaderEntry,">"),"tokenTypes")],"boolean"),floats:$i(a.floats,[Ui("Array<Float>","values")],a.Message),strings:$i(a.strings,[Ui("Array<string>","values")],a.Message),display:$i(a.display,[Ui(a.Message,"message")],"string")},s=[$i(a.VOID_MESSAGE_RECEIVER,[Ui(a.Message,"m")],"void")(ul||(ul=r([""]))),Ui(a.Message,a.EMPTY_MESSAGE,"".concat(a.create,"([])"))];if(a.Template,a.Handler,"assemblyscript"===i)return Hi(["\n                type ".concat(a.Template," = Array<Int>\n                \n                type ").concat(a._FloatToken," = Float\n                type ").concat(a._CharToken," = Int\n\n                type ").concat(a._HeaderEntry," = Int\n\n                type ").concat(a.Handler," = (m: ").concat(a.Message,") => void\n                "),Wi(a._HeaderEntry,a.FLOAT_TOKEN,"0"),Wi(a._HeaderEntry,a.STRING_TOKEN,"1"),o.create(dl||(dl=r(["\n                    let i: Int = 0\n                    let byteCount: Int = 0\n                    let tokenTypes: Array<","> = []\n                    let tokenPositions: Array<","> = []\n\n                    i = 0\n                    while (i < template.length) {\n                        switch(template[i]) {\n                            case ",":\n                                byteCount += sizeof<",">()\n                                tokenTypes.push(",")\n                                tokenPositions.push(byteCount)\n                                i += 1\n                                break\n                            case ",":\n                                byteCount += sizeof<",">() * template[i + 1]\n                                tokenTypes.push(",')\n                                tokenPositions.push(byteCount)\n                                i += 2\n                                break\n                            default:\n                                throw new Error("unknown token type : " + template[i].toString())\n                        }\n                    }\n\n                    const tokenCount = tokenTypes.length\n                    const headerByteCount = ',"(tokenCount) \n                        * sizeof<",">()\n                    byteCount += headerByteCount\n\n                    const buffer = new ArrayBuffer(byteCount)\n                    const dataView = new DataView(buffer)\n                    let writePosition: Int = 0\n                    \n                    dataView.setInt32(writePosition, tokenCount)\n                    writePosition += sizeof<",">()\n\n                    for (i = 0; i < tokenCount; i++) {\n                        dataView.setInt32(writePosition, tokenTypes[i])\n                        writePosition += sizeof<",">()\n                    }\n\n                    dataView.setInt32(writePosition, headerByteCount)\n                    writePosition += sizeof<",">()\n                    for (i = 0; i < tokenCount; i++) {\n                        dataView.setInt32(writePosition, headerByteCount + tokenPositions[i])\n                        writePosition += sizeof<",">()\n                    }\n\n                    const header = ","(dataView, tokenCount)\n                    return {\n                        dataView,\n                        tokenCount,\n                        header,\n                        tokenTypes: ","(header),\n                        tokenPositions: ","(header),\n                    }\n                "])),a._HeaderEntry,a._HeaderEntry,a.FLOAT_TOKEN,a._FloatToken,a.FLOAT_TOKEN,a.STRING_TOKEN,a._CharToken,a.STRING_TOKEN,a._computeHeaderLength,a._HeaderEntry,a._HeaderEntry,a._HeaderEntry,a._HeaderEntry,a._HeaderEntry,a._unpackHeader,a._unpackTokenTypes,a._unpackTokenPositions),o.writeStringToken(pl||(pl=r(["\n                    const startPosition = message.tokenPositions[tokenIndex]\n                    const endPosition = message.tokenPositions[tokenIndex + 1]\n                    const expectedStringLength: Int = (endPosition - startPosition) / sizeof<",">()\n                    if (value.length !== expectedStringLength) {\n                        throw new Error('Invalid string size, specified ' + expectedStringLength.toString() + ', received ' + value.length.toString())\n                    }\n\n                    for (let i = 0; i < value.length; i++) {\n                        message.dataView.setInt32(\n                            startPosition + i * sizeof<",">(), \n                            value.codePointAt(i)\n                        )\n                    }\n                "])),a._CharToken,a._CharToken),o.writeFloatToken(fl||(fl=r(["\n                    setFloatDataView(message.dataView, message.tokenPositions[tokenIndex], value)\n                "]))),o.readStringToken(hl||(hl=r(["\n                    const startPosition = message.tokenPositions[tokenIndex]\n                    const endPosition = message.tokenPositions[tokenIndex + 1]\n                    const stringLength: Int = (endPosition - startPosition) / sizeof<",">()\n                    let value: string = ''\n                    for (let i = 0; i < stringLength; i++) {\n                        value += String.fromCodePoint(message.dataView.getInt32(startPosition + sizeof<",">() * i))\n                    }\n                    return value\n                "])),a._CharToken,a._CharToken),o.readFloatToken(ml||(ml=r(["\n                    return getFloatDataView(message.dataView, message.tokenPositions[tokenIndex])\n                "]))),o.getLength(gl||(gl=r(["\n                    return message.tokenTypes.length\n                "]))),o.getTokenType(yl||(yl=r(["\n                    return message.tokenTypes[tokenIndex]\n                "]))),o.isStringToken(vl||(vl=r(["\n                    return ","(message, tokenIndex) === ","\n                "])),a.getTokenType,a.STRING_TOKEN),o.isFloatToken(bl||(bl=r(["\n                    return ","(message, tokenIndex) === ","\n                "])),a.getTokenType,a.FLOAT_TOKEN),o.isMatching(wl||(wl=r(["\n                    if (message.tokenTypes.length !== tokenTypes.length) {\n                        return false\n                    }\n                    for (let i: Int = 0; i < tokenTypes.length; i++) {\n                        if (message.tokenTypes[i] !== tokenTypes[i]) {\n                            return false\n                        }\n                    }\n                    return true\n                "]))),o.floats(Sl||(Sl=r(["\n                    const message: "," = ","(\n                        values.map<",">(v => ","))\n                    for (let i: Int = 0; i < values.length; i++) {\n                        ","(message, i, values[i])\n                    }\n                    return message\n                "])),a.Message,a.create,a._HeaderEntry,a.FLOAT_TOKEN,a.writeFloatToken),o.strings(xl||(xl=r(["\n                    const template: "," = []\n                    for (let i: Int = 0; i < values.length; i++) {\n                        template.push(",")\n                        template.push(values[i].length)\n                    }\n                    const message: "," = ","(template)\n                    for (let i: Int = 0; i < values.length; i++) {\n                        ","(message, i, values[i])\n                    }\n                    return message\n                "])),a.Template,a.STRING_TOKEN,a.Message,a.create,a.writeStringToken),o.display(kl||(kl=r(["\n                    let displayArray: Array<string> = []\n                    for (let i: Int = 0; i < ","(message); i++) {\n                        if (","(message, i)) {\n                            displayArray.push(","(message, i).toString())\n                        } else {\n                            displayArray.push('\"' + ","(message, i) + '\"')\n                        }\n                    }\n                    return '[' + displayArray.join(', ') + ']'\n                "])),a.getLength,a.isFloatToken,a.readFloatToken,a.readStringToken),Gi(a.Message,[Ui("DataView","dataView"),Ui(a._Header,"header"),Ui(a._HeaderEntry,"tokenCount"),Ui(a._Header,"tokenTypes"),Ui(a._Header,"tokenPositions")]),$i(a.x_create,[Ui("Int32Array","templateTypedArray")],a.Message)(Il||(Il=r(["\n                    const template: "," = new Array<Int>(templateTypedArray.length)\n                    for (let i: Int = 0; i < templateTypedArray.length; i++) {\n                        template[i] = templateTypedArray[i]\n                    }\n                    return ","(template)\n                "])),a.Template,a.create),$i(a.x_getTokenTypes,[Ui(a.Message,"message")],a._Header)(_l||(_l=r(["\n                    return message.tokenTypes\n                "]))),$i(a.x_createTemplate,[Ui("i32","length")],"Int32Array")(Al||(Al=r(["\n                    return new Int32Array(length)\n                "]))),"type ".concat(a._Header," = Int32Array"),$i(a._computeHeaderLength,[Ui("Int","tokenCount")],"Int")(Tl||(Tl=r(["\n                    return 1 + tokenCount * 2 + 1\n                "]))),$i(a._unpackHeader,[Ui("DataView","messageDataView"),Ui(a._HeaderEntry,"tokenCount")],a._Header)(El||(El=r(["\n                    const headerLength = ","(tokenCount)\n                    // TODO : why is this `wrap` not working ?\n                    // return Int32Array.wrap(messageDataView.buffer, 0, headerLength)\n                    const messageHeader = new Int32Array(headerLength)\n                    for (let i = 0; i < headerLength; i++) {\n                        messageHeader[i] = messageDataView.getInt32(sizeof<",">() * i)\n                    }\n                    return messageHeader\n                "],["\n                    const headerLength = ","(tokenCount)\n                    // TODO : why is this \\`wrap\\` not working ?\n                    // return Int32Array.wrap(messageDataView.buffer, 0, headerLength)\n                    const messageHeader = new Int32Array(headerLength)\n                    for (let i = 0; i < headerLength; i++) {\n                        messageHeader[i] = messageDataView.getInt32(sizeof<",">() * i)\n                    }\n                    return messageHeader\n                "])),a._computeHeaderLength,a._HeaderEntry),$i(a._unpackTokenTypes,[Ui(a._Header,"header")],a._Header)(Ol||(Ol=r(["\n                    return header.slice(1, 1 + header[0])\n                "]))),$i(a._unpackTokenPositions,[Ui(a._Header,"header")],a._Header)(Cl||(Cl=r(["\n                    return header.slice(1 + header[0])\n                "]))),...s]);if("javascript"===i)return Hi([Wi("string",a.FLOAT_TOKEN,'"number"'),Wi("string",a.STRING_TOKEN,'"string"'),o.create(Nl||(Nl=r(["\n                    const m = []\n                    let i = 0\n                    while (i < template.length) {\n                        if (template[i] === ",") {\n                            m.push('')\n                            i += 2\n                        } else if (template[i] === ",") {\n                            m.push(0)\n                            i += 1\n                        }\n                    }\n                    return m\n                "])),a.STRING_TOKEN,a.FLOAT_TOKEN),o.getLength(Ml||(Ml=r(["\n                    return message.length\n                "]))),o.getTokenType(Pl||(Pl=r(["\n                    return typeof message[tokenIndex]\n                "]))),o.isStringToken(Fl||(Fl=r(["\n                    return ","(message, tokenIndex) === 'string'\n                "])),a.getTokenType),o.isFloatToken(Rl||(Rl=r(["\n                    return ","(message, tokenIndex) === 'number'\n                "])),a.getTokenType),o.isMatching(Ll||(Ll=r(["\n                    return (message.length === tokenTypes.length) \n                        && message.every((v, i) => ","(message, i) === tokenTypes[i])\n                "])),a.getTokenType),o.writeFloatToken(Dl||(Dl=r(["\n                    message[tokenIndex] = value\n                "]))),o.writeStringToken(jl||(jl=r(["\n                    message[tokenIndex] = value\n                "]))),o.readFloatToken(zl||(zl=r(["\n                    return message[tokenIndex]\n                "]))),o.readStringToken(Bl||(Bl=r(["\n                    return message[tokenIndex]\n                "]))),o.floats(Ul||(Ul=r(["\n                    return values\n                "]))),o.strings(Wl||(Wl=r(["\n                    return values\n                "]))),o.display($l||($l=r(["\n                    return '[' + message\n                        .map(t => typeof t === 'string' ? '\"' + t + '\"' : t.toString())\n                        .join(', ') + ']'\n                "]))),...s]);throw new Error("Unexpected target: ".concat(i))},exports:(e,n,t)=>{let{ns:r}=e,{target:a}=t;return"assemblyscript"===a?[r.x_create,r.x_getTokenTypes,r.x_createTemplate,r.writeStringToken,r.writeFloatToken,r.readStringToken,r.readFloatToken,r.FLOAT_TOKEN,r.STRING_TOKEN]:[]}};const Gl=(e,n,t,r)=>Hi(e.map((e=>e.code(Jl(n,e),t,r))).reduce(((e,n)=>e.every((e=>!Xl(e,n)))?[...e,n]:e),[])),Hl=(e,n,t,r)=>e.reduce(((e,a)=>a.exports?[...e,...a.exports(Jl(n,a),t,r).filter((n=>e.every((e=>n!==e))))]:e),[]),ql=(e,n,t,r)=>e.reduce(((e,a)=>a.imports?[...e,...a.imports(Jl(n,a),t,r).filter((n=>e.every((e=>n.name!==e.name))))]:e),[]),Kl=e=>e.flatMap((e=>e.dependencies?[...Kl(e.dependencies),e]:[e])),Yl=e=>{let{graph:n,precompiledCodeAssigner:t}=e;return ro(n,t.graph.fullTraversal).reduce(((e,n)=>{const r=t.nodes[n.id];return[...e,...t.nodeImplementations[r.nodeType].nodeImplementation.dependencies||[]]}),[])},Xl=(e,n)=>JSON.stringify(e)===JSON.stringify(n),Jl=(e,n)=>({ns:Zl(e,n)}),Zl=(e,n)=>e.globals[n.namespace],Ql=e=>"(".concat(e.args.map((e=>"".concat(e.name,": ").concat(e.type))).join(", "),") => ").concat(e.returnType);var ec,nc,tc;const rc=(e,n)=>{let{settings:t,variableNamesAssigner:a,precompiledCodeAssigner:i}=e;const o=i.nodes[n.id],s=i.nodeImplementations[o.nodeType],{state:l,snds:c,ns:u,globals:d}=ac(n.id,o,a),p=es(s.nodeImplementation.messageReceivers?s.nodeImplementation.messageReceivers({ns:u,state:l,snds:c,node:n},d,t):{},n.id,"messageReceivers");Object.keys(o.messageReceivers).forEach((e=>{const t=p[e];((e,n)=>{if("object"!==typeof e||"Func"!==e.astType)throw new Error("Expected an ast Func, got : ".concat(e));if(e.args.length!==n.args.length||e.args.some(((e,t)=>{const r=n.args[t];return!r||e.type!==r.type}))||e.returnType!==n.returnType)throw new Error("Func should be have signature ".concat(Ql(n))+" got instead ".concat(Ql(e)))})(t,Vi([Ui(d.msg.Message,"m")],"void")(ec||(ec=r([""]))));const i=o.messageReceivers[e];i.name=a.nodes[n.id].messageReceivers[e],i.args=t.args,i.body=t.body,i.returnType=t.returnType}))},ac=(e,n,t)=>({globals:Qo(t.globals),ns:Qo(t.nodeImplementations[n.nodeType]),state:n.state?n.state.name:"",ins:es(n.signalIns,e,"ins"),outs:es(n.signalOuts,e,"outs"),snds:es(Object.entries(n.messageSenders).reduce(((e,n)=>{let[t,{messageSenderName:r}]=n;return _r(_r({},e),{},{[t]:r})}),{}),e,"snds"),rcvs:es(Object.entries(n.messageReceivers).reduce(((e,n)=>{let[t,r]=n;return _r(_r({},e),{},{[t]:r.name})}),{}),e,"rcvs")}),ic=(e,n)=>{const t=Zi(e,n.outNodesIds[0]);return Object.entries(t.sinks).find((e=>{let[n]=e;return"signal"===eo(t,n).type}))[1][0]};var oc;const sc=(e,n)=>n.nodeImplementations[e],lc=(e,n)=>{if(e[n.id])throw new Error('Node "'.concat(n.id,'" already exists'));return e[n.id]=n,e[n.id]},cc=(e,n,t)=>{const r=Zi(e,t.nodeId),a=Zi(e,n.nodeId),i=to(r,t.portletId),o=no(a,n.portletId),s=eo(a,n.portletId),l=Qi(r,t.portletId);if(!o.some((e=>go(t,e)))){if(!s)throw new Error("Undefined outlet ".concat(n.nodeId,":").concat(n.portletId));if(!l)throw new Error("Undefined inlet ".concat(t.nodeId,":").concat(t.portletId));if(s.type!==l.type)throw new Error("Incompatible portlets types ".concat(n.nodeId," | ").concat(n.portletId," (").concat(s.type,") -> ").concat(t.nodeId," | ").concat(t.portletId," (").concat(l.type,")"));if("signal"===l.type&&i.length)throw new Error("Signal inlets can have only one connection");dc(r.sources,t.portletId).push(n),dc(a.sinks,n.portletId).push(t)}},uc=(e,n,t)=>{const r=Zi(e,n),a=Zi(e,t);Object.entries(a.sources).forEach((e=>{let[t,r]=e;return a.sources[t]=r.filter((e=>e.nodeId!==n))})),Object.entries(r.sinks).forEach((e=>{let[n,a]=e;return r.sinks[n]=a.filter((e=>e.nodeId!==t))}))},dc=(e,n)=>e[n]=e[n]||[];var pc;const fc="_messageReceiver",hc={},mc="_messageSender",gc={messageReceivers:(e,n)=>{let{node:{args:t}}=e,{msg:a}=n;return{0:Vi([Ui(a.Message,"m")])(pc||(pc=r(["\n                ","(m)\n                return\n            "])),t.messageSenderName)}}},yc=(e,n,t,r)=>{const a="n_io".concat("messageReceiver"===n?"Rcv":"Snd","_").concat(t,"_").concat(r);if(e[a])throw new Error("Node id ".concat(a," already exists in graph"));return a};var vc=e=>{const n=bc(e);var t,a;(e=>{if(e[fc])throw new Error("Reserved node type '".concat(fc,"' already exists. Please use a different name."));if(e[mc])throw new Error("Reserved node type '".concat(mc,"' already exists. Please use a different name."));e[fc]=hc,e[mc]=gc})(n.nodeImplementations),Object.entries(e.settings.io.messageReceivers).forEach((e=>{let[t,r]=e;r.forEach((e=>{((e,n,t)=>{let{precompiledCode:r,graph:a,variableNamesAssigner:i,precompiledCodeAssigner:o}=e;const s=yc(a,"messageReceiver",n,t),l=_r(_r({},mo(s,fc)),{},{isPushingMessages:!0,outlets:{0:{id:"0",type:"message"}}});lc(a,l),cc(a,{nodeId:s,portletId:"0"},{nodeId:n,portletId:t}),o.io.messageReceivers[n][t]={functionName:i.io.messageReceivers[n][t],getSinkFunctionName:()=>r.nodes[s].messageSenders[0].messageSenderName}})(n,t,e)}))})),Object.entries(e.settings.io.messageSenders).forEach((e=>{let[t,r]=e;r.forEach((e=>{((e,n,t)=>{let{graph:r,variableNamesAssigner:a,precompiledCodeAssigner:i}=e;const o=yc(r,"messageSender",n,t),s=a.io.messageSenders[n][t],l=_r(_r({},mo(o,mc)),{},{args:{messageSenderName:s},inlets:{0:{id:"0",type:"message"}}});lc(r,l),cc(r,{nodeId:n,portletId:t},{nodeId:o,portletId:"0"}),i.io.messageSenders[n][t]={functionName:s}})(n,t,e)}))})),n.graph=(t=n.graph,a=wo(n.graph),zi(Object.values(t).filter((e=>a.includes(e.id))),(e=>[e.id,_r(_r({},e),{},{sources:ho(e.sources,a),sinks:fo(e.sinks,a)})]))),n.nodeImplementations=((e,n)=>Object.values(e).reduce(((e,t)=>t.type in e?e:_r(_r({},e),{},{[t.type]:bo(n,t.type)})),{}))(n.graph,n.nodeImplementations),n.precompiledCode.graph.fullTraversal=wo(n.graph);const i=ro(n.graph,n.precompiledCode.graph.fullTraversal);((e,n)=>{const{settings:t,variableNamesAssigner:r,precompiledCodeAssigner:a}=e,i=Kl([...n,...Yl(e)]),o=Qo(e.variableNamesIndex.globals);a.dependencies.ast=Gl(i,r,o,t),a.dependencies.exports=Hl(i,r,o,t),a.dependencies.imports=ql(i,r,o,t)})(n,[cl,Gs,Hs,Vl]),Object.keys(n.nodeImplementations).forEach((e=>{((e,n)=>{let{settings:t,variableNamesReadOnly:r,variableNamesAssigner:a,precompiledCodeAssigner:i}=e;const o=i.nodeImplementations[n],s=o.nodeImplementation;s.core&&(o.core=s.core({ns:sc(n,a)},r.globals,t))})(n,e),((e,n)=>{let{graph:t,settings:r,variableNamesReadOnly:a,variableNamesAssigner:i,precompiledCodeAssigner:o}=e;const s=o.nodeImplementations[n];if(s.nodeImplementation.state){const e=Object.values(t).find((e=>e.type===n));if(!e)throw new Error('No node of type "'.concat(n,'" exists in the graph.'));sc(n,i).State;const o=s.nodeImplementation.state({ns:sc(n,a),node:e},a.globals,r);s.stateClass=_r(_r({},o),{},{members:o.members.map((e=>_r(_r({},e),{},{value:void 0})))})}})(n,e)})),i.forEach((e=>{((e,n)=>{let{settings:t,variableNamesAssigner:r,precompiledCodeAssigner:a}=e;const i=a.nodes[n.id],o=a.nodeImplementations[i.nodeType];if(o.nodeImplementation.state){const{ns:e,globals:a}=ac(n.id,i,r),s=o.nodeImplementation.state({ns:e,node:n},a,t);i.state={name:r.nodes[n.id].state,initialization:s.members.reduce(((e,n)=>_r(_r({},e),{},{[n.name]:n.value})),{})}}})(n,e)}));const o={traversal:So(n.graph),outNodesIds:xo(n.graph).map((e=>e.id))},s=((e,n)=>ko(e,n).reduce(((e,n)=>{const t=e.find((e=>e.traversal.some((e=>n.traversal.includes(e)))));return t?[...e.filter((e=>e!==t)),{traversal:[...t.traversal,...n.traversal],outNodesIds:[...t.outNodesIds,...n.outNodesIds]}]:[...e,n]}),[]).map((n=>({traversal:lo(e.graph,ro(e.graph,n.outNodesIds)),outNodesIds:n.outNodesIds}))))(n,o),l=((e,n,t)=>{let{graph:r}=e;return{traversal:t.reduce(((e,n)=>_o(e,n.traversal)),So(r)),outNodesIds:n.outNodesIds}})(n,o,s),c=[l,...s],u=c.flatMap((e=>{const t=((e,n)=>ro(e.graph,n.traversal).reduce(((t,r)=>{const a=ao(e.graph,r,"signal");return!To(e,r)||n.outNodesIds.includes(r.id)||To(e,a[0])&&!n.outNodesIds.includes(a[0].id)?t:[...t,{traversal:lo(e.graph,[r],(n=>To(e,n))),outNodesIds:[r.id]}]}),[]))(n,e);return e.traversal=_o(e.traversal,t.flatMap((e=>e.traversal))),t}));return n.precompiledCode.graph.hotDspGroup=l,s.forEach(((e,t)=>{((e,n,t)=>{let{graph:r,variableNamesAssigner:a,precompiledCodeAssigner:i}=e;i.graph.coldDspGroups[t]={functionName:a.coldDspGroups[t],dspGroup:n,sinkConnections:Io(r,n)}})(n,e,"".concat(t))})),i.forEach((e=>{Object.values(e.inlets).forEach((t=>{"signal"===t.type?0===to(e,t.id).length&&((e,n,t)=>{let{variableNamesAssigner:r,precompiledCodeAssigner:a}=e;a.nodes[n.id].signalIns[t]=r.globals.core.NULL_SIGNAL})(n,e,t.id):"message"===t.type&&((e,n,t)=>{let{variableNamesAssigner:a,precompiledCodeAssigner:i}=e;const o=i.nodes[n.id],s=a.globals;if(to(n,t).length>=1){const e=a.nodes[n.id].messageReceivers[t];o.messageReceivers[t]=$i(e,[Ui(s.msg.Message,"m")],"void")(oc||(oc=r(['throw new Error("This placeholder should have been replaced during precompilation")'])))}})(n,e,t.id)}))})),i.forEach((e=>{Object.values(e.outlets).filter((e=>"message"===e.type)).forEach((t=>{((e,n,t)=>{let{variableNamesAssigner:r,precompiledCodeAssigner:a}=e;const i=no(n,t),o=a.nodes[n.id],s=[...i.map((e=>{let{nodeId:n,portletId:t}=e;return r.nodes[n].messageReceivers[t]})),...i.reduce(((e,n)=>[...e,...Object.entries(a.graph.coldDspGroups).filter((e=>{let[t,{dspGroup:r}]=e;return((e,n)=>e.traversal.includes(n))(r,n.nodeId)})).map((e=>{let[n]=e;return n})).map((e=>r.coldDspGroups[e]))]),[])];o.messageSenders[t]=s.length>1?{messageSenderName:r.nodes[n.id].messageSenders[t],sinkFunctionNames:s}:1===s.length?{messageSenderName:s[0],sinkFunctionNames:[]}:{messageSenderName:r.globals.msg.VOID_MESSAGE_RECEIVER,sinkFunctionNames:[]}})(n,e,t.id)}))})),c.forEach((e=>{ro(n.graph,e.traversal).forEach((e=>{Object.values(e.outlets).forEach((t=>{((e,n,t)=>{const{variableNamesAssigner:r,precompiledCodeAssigner:a}=e,i=no(n,t),o=r.nodes[n.id].signalOuts[t];a.nodes[n.id].signalOuts[t]=o,i.forEach((e=>{let{portletId:n,nodeId:t}=e;a.nodes[t].signalIns[n]=o}))})(n,e,t.id)}))}))})),u.forEach((e=>{((e,n)=>{let{graph:t,settings:r,variableNamesAssigner:a,precompiledCodeAssigner:i}=e;const o=n.traversal.reduce(((e,o)=>{const s=i.nodes[o],l=i.nodeImplementations[s.nodeType],{ins:c,outs:u,snds:d,state:p,ns:f,globals:h}=ac(o,s,a),m=Zi(t,o),g=zi(Object.values(m.inlets).map((e=>[e,to(m,e.id)])).filter((e=>{let[t,r]=e;return"signal"===t.type&&r.length>0&&n.traversal.includes(r[0].nodeId)})),(n=>{let[t,r]=n;const a=r[0];if(!(a.nodeId in e))throw new Error("Unexpected error : inlining failed, missing inlined source ".concat(a.nodeId));return[t.id,e[a.nodeId]]}));if(!l.nodeImplementation.dsp)throw new Error("No dsp to generate for node ".concat(m.type,":").concat(m.id));const y=l.nodeImplementation.dsp({ns:f,state:p,ins:es(_r(_r({},c),g),o,"ins"),outs:u,snds:d,node:m},h,r);if(!("astType"in y))throw new Error("Inlined dsp can only be an AstSequence");return _r(_r({},e),{},{[o]:"("+Ho((v=r.target,{javascript:yo,assemblyscript:vo}[v]),y)+")"});var v}),{}),s=ic(t,n);i.nodes[s.nodeId].signalIns[s.portletId]=o[n.outNodesIds[0]]})(n,e)})),c.forEach((e=>{ro(n.graph,e.traversal).forEach((e=>{((e,n)=>{let{settings:t,variableNamesAssigner:a,precompiledCodeAssigner:i}=e;const o=i.nodes[n.id],s=i.nodeImplementations[o.nodeType],{outs:l,ins:c,snds:u,state:d,ns:p,globals:f}=ac(n.id,o,a);if(!s.nodeImplementation.dsp)throw new Error("No dsp to generate for node ".concat(n.type,":").concat(n.id));const h=s.nodeImplementation.dsp({ns:p,node:n,state:d,ins:c,outs:l,snds:u},f,t);if(s.nodeImplementation.flags&&s.nodeImplementation.flags.isDspInline){if("loop"in h)throw new Error("Invalid dsp definition for inlinable node ".concat(n.type,":").concat(n.id));const e=Object.keys(n.outlets)[0];o.dsp.loop=qi(tc||(tc=r([""," = ",""])),a.nodes[n.id].signalOuts[e],h)}else"loop"in h?(o.dsp.loop=h.loop,Object.entries(h.inlets).forEach((e=>{let[n,t]=e;o.dsp.inlets[n]=t}))):o.dsp.loop=h})(n,e)}))})),i.forEach((e=>{((e,n)=>{let{settings:t,variableNamesAssigner:a,precompiledCodeAssigner:i}=e;const o=i.nodes[n.id],s=i.nodeImplementations[o.nodeType],{state:l,snds:c,ns:u,globals:d}=ac(n.id,o,a);o.initialization=s.nodeImplementation.initialization?s.nodeImplementation.initialization({ns:u,state:l,snds:c,node:n},d,t):qi(nc||(nc=r([""])))})(n,e),rc(n,e)})),n};const bc=e=>{const n={graph:_r({},e.graph),nodeImplementations:_r({},e.nodeImplementations),settings:e.settings},t=(e=>Jo.ensureValue({},xs,e))(n),r=(e=>Jo.ensureValue({},ws,e))(n);return _r(_r({},n),{},{precompiledCode:t,variableNamesIndex:r,variableNamesAssigner:Ss({variableNamesIndex:r,input:n}),variableNamesReadOnly:Qo(r),precompiledCodeAssigner:ks({precompiledCode:t,input:n})})};class wc extends Error{}var Sc=(e,n,t,a)=>{const i=((e,n)=>{const t=e.arrays||{},r={messageReceivers:(e.io||{}).messageReceivers||{},messageSenders:(e.io||{}).messageSenders||{}},a=e.debug||!1,i=e.audio||{channelCount:{in:2,out:2},bitDepth:64};if(![32,64].includes(i.bitDepth))throw new wc('"bitDepth" can be only 32 or 64');return{audio:i,arrays:t,io:r,debug:a,target:n,customMetadata:e.customMetadata||{}}})(a,t),{precompiledCode:o,variableNamesIndex:s}=vc({graph:e,nodeImplementations:n,settings:i});let l;const c={precompiledCode:o,settings:i,variableNamesReadOnly:Qo(s)};if("javascript"===t)l=(e=>{const{precompiledCode:n,settings:t,variableNamesReadOnly:a}=e,i=Qo(a),{globals:o}=i,s={settings:t,globals:o,precompiledCode:n},l=Di(e);return Ho(yo,qi(ts||(ts=r(["\n        ","\n        ","\n\n        ","\n        ","\n\n        ","\n        ","\n        ","\n\n        const exports = {\n            metadata: ",",\n            initialize: (sampleRate, blockSize) => {\n                exports.metadata.settings.audio.sampleRate = sampleRate\n                exports.metadata.settings.audio.blockSize = blockSize\n                "," = sampleRate\n                "," = blockSize\n\n                ","\n                ","\n            },\n            dspLoop: (",", ",") => {\n                ","\n            },\n            io: {\n                messageReceivers: {\n                    ","\n                },\n                messageSenders: {\n                    ","\n                },\n            }\n        }\n\n        ","\n    "])),Ro(s),Lo(s),Do(s),Uo(s),Vo(s),zo(s),Bo(s,((e,n,t)=>qi(rs||(rs=r(["const "," = (m) => {exports.io.messageSenders['","']['","'](m)}"])),e,n,t))),JSON.stringify(l),o.core.SAMPLE_RATE,o.core.BLOCK_SIZE,jo(s),$o(s),o.core.INPUT,o.core.OUTPUT,Wo(s),Object.entries(n.io.messageReceivers).map((e=>{let[n,t]=e;return qi(as||(as=r(["",": {\n                            ","\n                        },"])),n,Object.entries(t).map((e=>{let[n,{functionName:t}]=e;return'"'.concat(n,'": ').concat(t,",")})))})),Object.entries(t.io.messageSenders).map((e=>{let[n,t]=e;return qi(is||(is=r(["",": {\n                            ","\n                        },"])),n,t.map((e=>'"'.concat(e,'": () => undefined,'))))})),Go(s,(e=>{let{name:n}=e;return qi(os||(os=r(["\n                exports."," = () => { throw new Error('import for "," not provided') }\n                const "," = (...args) => exports.","(...args)\n            "])),n,n,n,n)}),(e=>qi(ss||(ss=r(["exports."," = ",""])),e,e)))))})(c);else{if("assemblyscript"!==t)throw new Error("Invalid target ".concat(t));l=hs(c)}return{status:0,code:l}};const xc=e=>64===e?Float64Array:Float32Array,kc=(e,n)=>new Proxy({},{get:(t,r)=>{if(n.hasOwnProperty(r)){const t=String(r),a=n[t];switch(a.type){case"raw":if(r in e)return e[t];throw new Error("Key ".concat(String(t)," doesn't exist in raw module"));case"proxy":case"callback":return a.value}}},has:function(e,t){return t in n},set:(e,t,r)=>{if(!n.hasOwnProperty(String(t)))throw new Error("Key ".concat(String(t)," is not defined in bindings"));{const e=String(t),a=n[e];if("callback"!==a.type)throw new Error("Binding key ".concat(String(e)," is read-only"));a.value=r}return!0}}),Ic=(e,n)=>_c(e,{globals:n.globals,io:n.io}),_c=(e,n)=>{if("string"===typeof n)return e[n];if("object"===typeof n)return new Proxy(e,{get:(t,r)=>{const a=String(r);if(a in e)return Reflect.get(e,a);if(a in n){const t=n[a];return _c(e,t)}Xo(e,a)},has:function(t,r){return r in e||r in n},set:(t,r,a)=>{const i=String(r);if(i in n){const t=n[i];if("string"!==typeof t)throw new Error("Failed to set value for key ".concat(String(r),": variable name is not a string"));return Reflect.set(e,t,a)}throw new Error("Key ".concat(String(r)," is not defined in raw module"))}});throw new Error("Invalid name mapping")},Ac=(e,n)=>{if(!n)throw new Error("Cannot lift a null pointer");const t=(n>>>=0)+new Uint32Array(e.memory.buffer)[n-4>>>2]>>>1,r=new Uint16Array(e.memory.buffer);let a=n>>>1,i="";for(;t-a>1024;)i+=String.fromCharCode(...r.subarray(a,a+=1024));return i+String.fromCharCode(...r.subarray(a,t))},Tc=(e,n)=>{if(null==n)throw new Error("Cannot lower a null string");const t=n.length,r=e.__new(t<<1,1)>>>0,a=new Uint16Array(e.memory.buffer);for(let i=0;i<t;++i)a[(r>>>1)+i]=n.charCodeAt(i);return r},Ec=(e,n,t)=>{if(!t)throw new Error("Cannot lift a null pointer");const r=new Uint32Array(e.memory.buffer);return new n(e.memory.buffer,r[t+4>>>2],r[t+8>>>2]/n.BYTES_PER_ELEMENT)},Oc=(e,n,t)=>{const r=xc(n),a=e.globals.core.createFloatArray(t.length),i=Ec(e,r,a);return i.set(t),{array:i,arrayPointer:a}},Cc=(e,n,t)=>{const r=e.globals.core.x_createListOfArrays();return t.forEach((t=>{const{arrayPointer:a}=Oc(e,n,t);e.globals.core.x_pushToListOfArrays(r,a)})),r},Nc=(e,n,t)=>{const r=e.globals.core.x_getListOfArraysLength(t),a=[],i=xc(n);for(let o=0;o<r;o++){const n=e.globals.core.x_getListOfArraysElem(t,o);a.push(Ec(e,i,n))}return a},Mc=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const t=await WebAssembly.instantiate(e,_r({env:{abort:(e,n,t,a)=>{const i=Ac(r,e);(()=>{throw Error("".concat(i," at ").concat(t,":").concat(a))})()},seed:()=>Date.now()*Math.random(),"console.log":e=>{console.log(Ac(r,e))}}},n)),r=t.instance.exports;return t.instance},Pc=async e=>{const n={};WebAssembly.Module.imports(new WebAssembly.Module(e)).filter((e=>"input"===e.module&&"function"===e.kind)).forEach((e=>n[e.name]=()=>{}));const t=(await Mc(e,{input:n})).exports,r=t.metadata.valueOf(),a=Ac(t,r);return JSON.parse(a)},Fc=e=>{const n=e.metadata.compilation.variableNamesIndex.globals.fs,t=kc(e,{onReadSoundFile:{type:"callback",value:()=>{}},onWriteSoundFile:{type:"callback",value:()=>{}},onOpenSoundReadStream:{type:"callback",value:()=>{}},onOpenSoundWriteStream:{type:"callback",value:()=>{}},onSoundStreamData:{type:"callback",value:()=>{}},onCloseSoundStream:{type:"callback",value:()=>{}},sendReadSoundFileResponse:{type:"proxy",value:"x_onReadSoundFileResponse"in n?e.globals.fs.x_onReadSoundFileResponse:void 0},sendWriteSoundFileResponse:{type:"proxy",value:"x_onWriteSoundFileResponse"in n?e.globals.fs.x_onWriteSoundFileResponse:void 0},sendSoundStreamData:{type:"proxy",value:"x_onSoundStreamData"in n?e.globals.fs.x_onSoundStreamData:void 0},closeSoundStream:{type:"proxy",value:"x_onCloseSoundStream"in n?e.globals.fs.x_onCloseSoundStream:void 0}});return"i_openSoundWriteStream"in n&&(e.globals.fs.i_openSoundWriteStream=function(){return t.onOpenSoundWriteStream(...arguments)}),"i_sendSoundStreamData"in n&&(e.globals.fs.i_sendSoundStreamData=function(){return t.onSoundStreamData(...arguments)}),"i_openSoundReadStream"in n&&(e.globals.fs.i_openSoundReadStream=function(){return t.onOpenSoundReadStream(...arguments)}),"i_closeSoundStream"in n&&(e.globals.fs.i_closeSoundStream=function(){return t.onCloseSoundStream(...arguments)}),"i_writeSoundFile"in n&&(e.globals.fs.i_writeSoundFile=function(){return t.onWriteSoundFile(...arguments)}),"i_readSoundFile"in n&&(e.globals.fs.i_readSoundFile=function(){return t.onReadSoundFile(...arguments)}),t},Rc=(e,n)=>{const t=xc(n.settings.audio.bitDepth);return kc(e,{getArray:{type:"proxy",value:n=>e.globals.commons.getArray(n)},setArray:{type:"proxy",value:(n,r)=>e.globals.commons.setArray(n,new t(r))}})},Lc=(e,n)=>{const t=(e=>new Function("\n        ".concat(e,"\n        return exports\n    "))())(e),r=Ic(t,t.metadata.compilation.variableNamesIndex);return kc(t,_r(_r({},(e=>{const n=e.metadata.compilation.variableNamesIndex.globals,t={commons:{type:"proxy",value:Rc(e,e.metadata)}};return"fs"in n&&(t.fs={type:"proxy",value:Fc(e)}),{metadata:{type:"raw"},initialize:{type:"raw"},dspLoop:{type:"raw"},io:{type:"raw"},globals:{type:"proxy",value:kc(e,t)}}})(r)),n||{}))},Dc=async(e,n)=>{switch(e){case"assemblyscript":return Pc(n);case"javascript":return Lc(n).metadata}};const jc=/\$(\d+)/,zc=(e,n)=>{const t=e.patches[n];if(!t)throw new Error("Patch ".concat(n," not found"));return t},Bc=e=>{const n=e.patches[e.rootPatchId];if(!n)throw new Error("Could not resolve root patch");return n},Uc=(e,n)=>{const t=e.nodes[n];if(!t)throw new Error("Pd node ".concat(n," not found in patch ").concat(e.id));return t},Wc=(e,n)=>{const t=e[n];return t?t.aliasTo?Wc(e,t.aliasTo):{nodeBuilder:t,nodeType:n}:null},$c=(e,n)=>{const t=parseInt(n.id);if(isNaN(t))throw new Error("Invalid patch id");const r=[t,...n.args],a=new RegExp(jc,"g");let i;for(;i=a.exec(e);){const n=parseInt(i[1],10),t=0<=n&&n<r.length;if(i[0]===e)return t?r[n]:void 0;t&&(e=e.replace(i[0],r[n].toString()))}return e},Vc=(e,n)=>{const t=$c(n[0],e),r="string"===typeof n[1]?$c(n[1],e):n[1];return[(void 0===t?"":t).toString(),void 0===r?0:r,n[2]]},Gc=(e,n)=>n.map((n=>"string"===typeof n?$c(n,e):n));function Hc(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==n.indexOf(r))continue;t[r]=e[r]}return t}function qc(e,n){if(null==e)return{};var t,r,a=Hc(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],-1===n.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}const Kc=["status","parsingWarnings"];const Yc=async(e,n,t,r)=>{const{pd:a,abstractionLoader:i,errors:o,warnings:s}=e;t.nodes=_r({},t.nodes);for(let l of Object.values(t.nodes)){if(o.hasOwnProperty(l.type))continue;if("subpatch"===l.nodeClass){l=t.nodes[l.id]=_r(_r({},l),{},{patchId:Jc(r.patches,l.patchId)}),await Yc(e,n,zc(a,l.patchId),r);continue}if("array"===l.nodeClass){l=t.nodes[l.id]=_r(_r({},l),{},{arrayId:Jc(r.arrays,l.arrayId)});continue}if(null!==Wc(e.nodeBuilders,l.type))continue;const c=await Xc(e,l.type,i);if(c.parsingWarnings&&(s[l.type]=c.parsingWarnings),1===c.status){const{status:e,parsingWarnings:n}=c,t=qc(c,Kc);o[l.type]=t;continue}const[u,d]=Zc(a,c.pd),p=Bc(d);l=t.nodes[l.id]=_r(_r({},l),{},{args:Gc(n,l.args),nodeClass:"subpatch",patchId:p.id,type:"pd"}),p.args=l.args,Object.values(d.arrays).forEach((e=>e.args=Vc(p,e.args))),a.patches=_r(_r({},a.patches),d.patches),a.arrays=_r(_r({},a.arrays),d.arrays),await Yc(e,p,p,u)}},Xc=async(e,n,t)=>{if(!e.abstractions[n]){const r=await t(n);return 0===r.status&&(e.abstractions[n]=r.pd),r}return{status:0,pd:e.abstractions[n]}},Jc=(e,n)=>{const t=e.get(n);if(void 0===t)throw new Error("Could not resolve ".concat(n));return t},Zc=(e,n)=>{const t={patches:{},arrays:{},rootPatchId:n.rootPatchId},r={patches:new Map,arrays:new Map};let a=Object.keys(e.patches);a=a.length?a:["-1"];let i=Object.keys(e.arrays);i=i.length?i:["-1"];let o=Math.max(...a.map((e=>parseInt(e))))+1,s=Math.max(...i.map((e=>parseInt(e))))+1;return Object.entries(n.patches).forEach((e=>{let[n,a]=e;const i="".concat(o++);r.patches.set(n,i),t.patches[i]=_r(_r({},a),{},{id:i})})),Object.entries(n.arrays).forEach((e=>{let[n,a]=e;const i="".concat(s++);r.arrays.set(n,i),t.arrays[i]=_r(_r({},a),{},{id:i})})),t.rootPatchId=Jc(r.patches,t.rootPatchId),[r,t]},Qc={translateArgs:()=>({}),build:()=>({inlets:{},outlets:{}})},eu={pd:Qc,inlet:Qc,outlet:Qc,"inlet~":Qc,"outlet~":Qc},nu=e=>{if("number"!==typeof e)throw new iu("".concat(e," is not a number"));return e},tu=e=>{if("string"!==typeof e)throw new iu("".concat(e," is not a string"));return e},ru=e=>void 0!==e?nu(e):void 0,au=e=>void 0!==e?tu(e):void 0;class iu extends Error{}var ou;const su={translateArgs:e=>({channelCount:nu(e.args[0])}),build:e=>({inlets:zi(ji(e.channelCount),(e=>["".concat(e),{type:"signal",id:"".concat(e)}])),outlets:{0:{type:"signal",id:"0"}}})},lu={flags:{isPureFunction:!0,isDspInline:!0,alphaName:"_mixer_t"},dsp:e=>{let{node:n,ins:t}=e;return qi(ou||(ou=r(["",""])),Object.keys(n.inlets).map((e=>t[e])).join(" + "))}};var cu,uu,du;const pu=(e,n)=>Vi([Ui(n.Message,"m")])(cu||(cu=r(["\n    if (","(m, [","])) {\n        "," = ","(m, 0)\n        return\n    }\n"])),n.isMatching,n.FLOAT_TOKEN,e,n.readFloatToken),fu=(e,n)=>Vi([Ui(n.Message,"m")])(uu||(uu=r(["\n    if (","(m, [","])) {\n        "," = ","(m, 0)\n        return\n    }\n"])),n.isMatching,n.STRING_TOKEN,e,n.readStringToken),hu=(e,n,t)=>Vi([Ui(t.Message,"m")])(du||(du=r(["\n    if (","(m, [","])) {\n        ","(",", ","(m, 0))\n        return\n    }\n"])),t.isMatching,t.FLOAT_TOKEN,e,n,t.readFloatToken);var mu;const gu={translateArgs:e=>{let{args:n}=e;return{initValue:ru(n[0])||0}},build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"signal",id:"0"}}})},yu={flags:{isPureFunction:!0,isDspInline:!0,alphaName:"sig_t"},state:e=>{let{node:{args:n},ns:t}=e;return Gi(t.State,[Ui("Float","currentValue",n.initValue)])},dsp:e=>{let{state:n}=e;return qi(mu||(mu=r(["",".currentValue"])),n)},messageReceivers:(e,n)=>{let{state:t}=e,{msg:r}=n;return{0:pu("".concat(t,".currentValue"),r)}}};var vu;const bu={translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}}})},wu={messageReceivers:(e,n)=>{let{snds:t}=e,{msg:a}=n;return{0:Vi([Ui(a.Message,"m")])(vu||(vu=r(["\n            if (","(m, [","])) {\n                ","(m)\n                return\n            } else {\n                ","(m)\n                return\n            }\n        "])),a.isMatching,a.FLOAT_TOKEN,t.$0,t.$1)}}},Su="_mixer~",xu="_routemsg",ku="sig~";var Iu;!function(e){e.PD="n",e.IMPLICIT_NODE="m"}(Iu||(Iu={}));const _u=(e,n)=>"".concat(Iu.PD,"_").concat(e,"_").concat(n),Au=e=>e.toString(10),Tu=(e,n)=>(n=n.replaceAll(/[^a-zA-Z0-9_]/g,""),"".concat(Iu.IMPLICIT_NODE,"_").concat(e.nodeId,"_").concat(e.portletId,"_").concat(n));var Eu=async function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:async e=>({status:1,unknownNodeType:e});const r=await(async(e,n,t)=>{const[r,a]=Zc({patches:{},arrays:{},rootPatchId:e.rootPatchId},e),i={pd:a,nodeBuilders:n,abstractions:{},errors:{},warnings:{},abstractionLoader:t},o=Bc(i.pd);return Object.values(i.pd.arrays).forEach((e=>e.args=Vc(o,e.args))),await Yc(i,o,o,r),Object.keys(i.errors).length?{status:1,pd:i.pd,errors:i.errors,warnings:i.warnings}:{status:0,pd:i.pd,abstractions:i.abstractions,warnings:i.warnings}})(e,n,t),a=Object.keys(r.warnings);if(1===r.status)return{status:1,abstractionsLoadingErrors:r.errors,abstractionsLoadingWarnings:a?r.warnings:void 0};const{pd:i}=r,o={pd:i,nodeBuilders:n,graph:{}},s=Bc(i);ju(o,[s],Ou),Nu(o,[s]),Object.values(o.graph).forEach((e=>{Object.keys(eu).includes(e.type)&&((e,n)=>{const t=e[n];t&&(Object.values(t.sources).forEach((t=>t.slice(0).forEach((t=>uc(e,t.nodeId,n))))),Object.values(t.sinks).forEach((t=>t.slice(0).forEach((t=>uc(e,n,t.nodeId))))),delete e[n])})(o.graph,e.id)}));const l=Object.values(o.pd.arrays).reduce(((e,n)=>(e[n.args[0]]=n.data?new Float32Array(n.data):new Float32Array(n.args[1]),e)),{});return{status:0,graph:o.graph,pd:o.pd,arrays:l,abstractionsLoadingWarnings:a?r.warnings:void 0}};const Ou=(e,n)=>{const t=zu(n),r=Uu(n);Object.values(t.nodes).forEach((n=>{const a=_u(t.id,n.id);Cu(e,r,t,n,a)}))},Cu=(e,n,t,r,a)=>{const i=Wc(e.nodeBuilders,r.type);if(null===i)throw new Error("unknown node type ".concat(r.type));const{nodeBuilder:o,nodeType:s}=i;if(!0===o.isNoop)return null;o.skipDollarArgsResolution||(r=_r(_r({},r),{},{args:Gc(n,r.args)}));const l=o.translateArgs(r,t,e.pd),c=o.build(l);return lc(e.graph,_r(_r({},mo(a,s)),{},{args:l},c))},Nu=(e,n)=>{const{graph:t}=e;let r=[];ju(e,n,((e,n)=>{Ru(e,n,r)}));const a=Fu(e,r);Object.values(t).forEach((n=>{Object.values(n.inlets).forEach((r=>{const i={nodeId:n.id,portletId:r.id},o=(a[n.id]?a[n.id][r.id]:void 0)||{signalSources:[],messageSources:[]};if("signal"===r.type){const{nodeBuilder:r}=Wc(e.nodeBuilders,n.type),a=r.configureMessageToSignalConnection?r.configureMessageToSignalConnection(i.portletId,n.args):void 0;Pu(t,o.signalSources,o.messageSources,i,a)}else{if(0!==o.signalSources.length)throw new Error("Unexpected signal connection to node id ".concat(i.nodeId,", inlet ").concat(i.portletId));Mu(t,o.messageSources,i)}}))}))},Mu=(e,n,t)=>n.forEach((n=>{cc(e,n,t)})),Pu=(e,n,t,r,a)=>{let i=null;if(1===n.length)cc(e,n[0],r);else if(n.length>1){const t={channelCount:n.length},a=lc(e,_r(_r({},mo(Tu(r,Su),Su)),{},{args:t},su.build(t)));cc(e,{nodeId:a.id,portletId:"0"},r),n.forEach(((n,t)=>{cc(e,n,{nodeId:a.id,portletId:Au(t)})}))}else{const n={initValue:a?a.initialSignalValue:0};i=lc(e,_r(_r({},mo(Tu(r,ku),ku)),{},{args:n},gu.build(n))),cc(e,{nodeId:i.id,portletId:"0"},r)}if(t.length){const n={},o=lc(e,_r(_r({},mo(Tu(r,xu),xu)),{},{args:n},bu.build(n)));let s=!1;i&&(cc(e,{nodeId:o.id,portletId:"0"},{nodeId:i.id,portletId:"0"}),s=!0),a&&void 0!==a.reroutedMessageInletId&&(cc(e,{nodeId:o.id,portletId:"1"},{nodeId:r.nodeId,portletId:a.reroutedMessageInletId}),s=!0),s&&t.forEach((n=>{cc(e,n,{nodeId:o.id,portletId:"0"})}))}},Fu=(e,n)=>{const{graph:t}=e,r={};return n.forEach((e=>{const[a,i]=e,[o,s]=i,l=_u(zu(o).id,s.nodeId);r[l]=r[l]||{};const c=Au(s.portletId);if(r[l][c])return;let u=[];n.forEach((e=>{const[n,t]=e;Gu(i,t)&&u.push(n)}));const d=[],p=[];u.forEach((e=>{let[n,r]=e;const a=zu(n),i={nodeId:_u(a.id,r.nodeId),portletId:Au(r.portletId)},o=Zi(t,i.nodeId);"signal"===eo(o,i.portletId).type?d.push(i):p.push(i)})),r[l][c]={signalSources:d,messageSources:p}})),r},Ru=(e,n,t)=>{const{graph:r}=e,a=zu(n);a.connections.filter((e=>{let{source:n,sink:t}=e;const i=_u(a.id,n.nodeId),o=_u(a.id,t.nodeId);return!(!r[i]||!r[o])})).forEach((r=>{let{source:a,sink:i}=r;const o=Lu(e,[n,a]),s=Du(e,n,i);o.forEach((e=>s.forEach((n=>{t.some((t=>{let[r,a]=t;return Gu(e,r)&&Gu(n,a)}))||t.push([e,n])}))))}))},Lu=(e,n)=>{let[t,r]=n;const{pd:a}=e,i=zu(t),o=Uc(i,r.nodeId);if("inlet"===o.type||"inlet~"===o.type){const n=Bu(t);if(!n)return[];const r=Vu(n,i.id),a=$u(i.inlets,o.id);return n.connections.filter((e=>{let{sink:n}=e;return n.nodeId===r.id&&n.portletId===a})).flatMap((n=>{let{source:r}=n;return Lu(e,[[...t.slice(0,-1)],r])}))}if("subpatch"===o.nodeClass){const n=zc(a,o.patchId),i=Wu(n.outlets,r.portletId);return n.connections.filter((e=>{let{sink:n}=e;return n.nodeId===i&&0===n.portletId})).flatMap((r=>{let{source:a}=r;return Lu(e,[[...t,n],a])}))}return[[t,r]]},Du=(e,n,t)=>{const{pd:r}=e,a=zu(n),i=Uc(a,t.nodeId);if("outlet"===i.type||"outlet~"===i.type){const t=Bu(n);if(!t)return[];const r=Vu(t,a.id),o=$u(a.outlets,i.id);return t.connections.filter((e=>{let{source:n}=e;return n.nodeId===r.id&&n.portletId===o})).flatMap((t=>{let{sink:r}=t;return Du(e,[...n.slice(0,-1)],r)}))}if("subpatch"===i.nodeClass){const a=zc(r,i.patchId),o=Wu(a.inlets,t.portletId);return a.connections.filter((e=>{let{source:n}=e;return n.nodeId===o&&0===n.portletId})).flatMap((t=>{let{sink:r}=t;return Du(e,[...n,a],r)}))}return[[n,t]]},ju=(e,n,t)=>{const r=zu(n);t(e,n),Object.values(r.nodes).forEach((r=>{if("subpatch"===r.nodeClass){const a=zc(e.pd,r.patchId);ju(e,[...n,a],t)}}))},zu=e=>{const n=e.slice(-1)[0];if(!n)throw new Error("patchPath empty !");return n},Bu=e=>e.length<2?null:e.slice(-2)[0],Uu=e=>{const n=e.slice(0).reverse().find((e=>e.isRoot));if(!n)throw new Error("Could not resolve root patch from path");return n},Wu=(e,n)=>{const t=e[n];if(void 0===t)throw new Error("Portlet ".concat(n," is undefined in patch.outlets/patch.inlets"));return t},$u=(e,n)=>e.findIndex((e=>e===n)),Vu=(e,n)=>{const t=Object.values(e.nodes).find((e=>"subpatch"===e.nodeClass&&e.patchId===n));if(void 0===t)throw new Error("could not find subpatch node with patchId=".concat(n," inside patch ").concat(e.id));return t},Gu=(e,n)=>{let[t,r]=e,[a,i]=n;return zu(t).id===zu(a).id&&r.nodeId===i.nodeId&&r.portletId===i.portletId},Hu=e=>qu(e,Bc(e)),qu=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===t&&(t={topLeft:{x:-1/0,y:-1/0},bottomRight:{x:1/0,y:1/0}});const r=[];return Object.values(n.nodes).forEach((a=>{if("pd"===a.type&&"subpatch"===a.nodeClass){const s=e.patches[a.patchId],l=Xu(a);if(!s.layout.graphOnParent)return;const c=Yu(s),u=((e,n)=>{const t=n.x-e.x,r=n.y-e.y;return e=>({x:e.x+t,y:e.y+r})})({x:l.x,y:l.y},{x:c.viewportX,y:c.viewportY}),d={topLeft:u(t.topLeft),bottomRight:u(t.bottomRight)},p={x:c.viewportX,y:c.viewportY},f=((e,n)=>{const t={x:Math.max(e.topLeft.x,n.topLeft.x),y:Math.max(e.topLeft.y,n.topLeft.y)},r={x:Math.min(e.bottomRight.x,n.bottomRight.x),y:Math.min(e.bottomRight.y,n.bottomRight.y)};return r.x<=t.x||r.y<=t.y?null:{topLeft:t,bottomRight:r}})(d,{topLeft:p,bottomRight:(i=p,o={x:c.viewportWidth,y:c.viewportHeight},{x:i.x+o.x,y:i.y+o.y})});if(null===f)return;const h=qu(e,s,f),m={nodeClass:"subpatch",patchId:n.id,pdNodeId:a.id,children:h};r.push(m)}else if(a.type in ai&&"control"===a.nodeClass){const e=Xu(a);if(!((e,n)=>n.topLeft.x<=e.x&&e.x<=n.bottomRight.x&&n.topLeft.y<=e.y&&e.y<=n.bottomRight.y)({x:e.x,y:e.y},t))return;const i={nodeClass:"control",patchId:n.id,pdNodeId:a.id,nodeId:_u(n.id,a.id)};r.push(i)}else if(n.id===e.rootPatchId&&"text"===a.nodeClass){const e={nodeClass:"text",patchId:n.id,pdNodeId:a.id};r.push(e)}var i,o})),r},Ku=(e,n)=>{e.forEach((e=>{"subpatch"===e.nodeClass?(n(e),Ku(e.children,n)):n(e)}))},Yu=e=>{const n=e.layout,t=n.viewportX,r=n.viewportY,a=n.viewportWidth,i=n.viewportHeight;if("number"!==typeof t||"number"!==typeof r||"number"!==typeof a||"number"!==typeof i)throw new Error("Missing patch layout attributes");return{viewportX:t,viewportY:r,viewportWidth:a,viewportHeight:i}},Xu=e=>{const n=e.layout.x,t=e.layout.y;if("number"!==typeof n||"number"!==typeof t)throw new Error("Missing node layout attributes");let r=null;return"control"===e.nodeClass?r=e.layout.label:"subpatch"===e.nodeClass&&(r=e.args[0]?e.args[0].toString():null),{x:n,y:t,label:r}},Ju="webpd-runtime.js";const Zu=(e,n,t,r,a)=>{if(Object.keys(e).length){const a={};return Ku(n.pdGui,(e=>{"control"===e.nodeClass&&(a[e.nodeId]=e)})),Object.entries(e).flatMap((e=>{let[i,o]=e;return o.map((e=>{const o=Zi(n.graph,i);if("send"===o.type||"receive"===o.type)return r(o,e);const s=a[i];if(s){if("control"===s.nodeClass){const r=n.pdNodes[s.patchId][s.pdNodeId];return t(o,e,r.layout)}return""}return""}))})).join("")}return a},Qu=e=>{let{refs:n,cache:t}=e;t.wasmOutput=Ec(n.rawModule,t.arrayType,n.rawModule.globals.core.x_getOutput()),t.wasmInput=Ec(n.rawModule,t.arrayType,n.rawModule.globals.core.x_getInput())},ed=e=>{const{refs:n,cache:t}=e;return{getArray:{type:"proxy",value:e=>{const r=Tc(n.rawModule,e),a=n.rawModule.globals.commons.getArray(r);return Ec(n.rawModule,t.arrayType,a)}},setArray:{type:"proxy",value:(r,a)=>{const i=Tc(n.rawModule,r),{arrayPointer:o}=Oc(n.rawModule,t.bitDepth,a);n.rawModule.globals.commons.setArray(i,o),Qu(e)}}}},nd=(e,n)=>{const t=e.globals.msg.x_getTokenTypes(n),r=Ec(e,Int32Array,t),a=[];return r.forEach(((t,r)=>{if(t===e.globals.msg.FLOAT_TOKEN.valueOf())a.push(e.globals.msg.readFloatToken(n,r));else if(t===e.globals.msg.STRING_TOKEN.valueOf()){const t=e.globals.msg.readStringToken(n,r);a.push(Ac(e,t))}})),a},td=e=>{let{metadata:n,refs:t}=e;return Object.entries(n.settings.io.messageReceivers).reduce(((e,n)=>{let[r,a]=n;return _r(_r({},e),{},{[r]:{type:"proxy",value:zi(a,(e=>[e,n=>{const a=((e,n)=>{const t=n.reduce(((n,t)=>{if("number"===typeof t)n.push(e.globals.msg.FLOAT_TOKEN.valueOf());else{if("string"!==typeof t)throw new Error("invalid message value ".concat(t));n.push(e.globals.msg.STRING_TOKEN.valueOf()),n.push(t.length)}return n}),[]),r=e.globals.msg.x_createTemplate(t.length);Ec(e,Int32Array,r).set(t);const a=e.globals.msg.x_create(r);return n.forEach(((n,t)=>{if("number"===typeof n)e.globals.msg.writeFloatToken(a,t,n);else if("string"===typeof n){const r=Tc(e,n);e.globals.msg.writeStringToken(a,t,r)}})),a})(t.rawModule,n);t.rawModule.io.messageReceivers[r][e](a)}]))}})}),{})},rd=e=>{let{metadata:n}=e;return Object.entries(n.settings.io.messageSenders).reduce(((e,n)=>{let[t,r]=n;return _r(_r({},e),{},{[t]:{type:"proxy",value:zi(r,(e=>[e,e=>{}]))}})}),{})},ad=async(e,n)=>{const t=await Pc(e),r=t.settings.audio.bitDepth,a=xc(r),i={refs:{},metadata:t,cache:{wasmOutput:new a(0),wasmInput:new a(0),arrayType:a,bitDepth:r,blockSize:0}},o=_r(_r({},(e=>{const n={},{cache:t,metadata:r,refs:a}=e,i=r.compilation.variableNamesIndex.globals;if("fs"in i){const r=_c(n,i.fs);"i_readSoundFile"in i.fs&&(r.i_readSoundFile=(e,n,t)=>{const r=Ac(a.rawModule,n),i=nd(a.rawModule,t);a.engine.globals.fs.onReadSoundFile(e,r,i)}),"i_writeSoundFile"in i.fs&&(r.i_writeSoundFile=(e,n,r,i)=>{const o=Nc(a.rawModule,t.bitDepth,n),s=Ac(a.rawModule,r),l=nd(a.rawModule,i);a.engine.globals.fs.onWriteSoundFile(e,o,s,l)}),"i_openSoundReadStream"in i.fs&&(r.i_openSoundReadStream=(n,t,r)=>{const i=Ac(a.rawModule,t),o=nd(a.rawModule,r);Qu(e),a.engine.globals.fs.onOpenSoundReadStream(n,i,o)}),"i_openSoundWriteStream"in i.fs&&(r.i_openSoundWriteStream=(e,n,t)=>{const r=Ac(a.rawModule,n),i=nd(a.rawModule,t);a.engine.globals.fs.onOpenSoundWriteStream(e,r,i)}),"i_sendSoundStreamData"in i.fs&&(r.i_sendSoundStreamData=(e,n)=>{const r=Nc(a.rawModule,t.bitDepth,n);a.engine.globals.fs.onSoundStreamData(e,r)}),"i_closeSoundStream"in i.fs&&(r.i_closeSoundStream=function(){return a.engine.globals.fs.onCloseSoundStream(...arguments)})}return n})(i)),(e=>{let{metadata:n,refs:t}=e;const r={},{variableNamesIndex:a}=n.compilation;return Object.entries(n.settings.io.messageSenders).forEach((e=>{let[n,i]=e;i.forEach((e=>{const i=a.io.messageSenders[n][e];r[i]=r=>{const a=nd(t.rawModule,r);t.engine.io.messageSenders[n][e](a)}}))})),r})(i)),s=await Mc(e,{input:o});i.refs.rawModule=Ic(s.exports,t.compilation.variableNamesIndex);const l=id(i),c=kc(i.refs.rawModule,_r(_r({},l),n||{}));return i.refs.engine=c,c},id=e=>{const{metadata:n,refs:t}=e,r=n.compilation.variableNamesIndex.globals,a={messageReceivers:kc(t.rawModule,td(e)),messageSenders:kc(t.rawModule,rd(e))},i={commons:{type:"proxy",value:kc(t.rawModule,ed(e))}};if("fs"in r){const n=kc(t.rawModule,(e=>{const{refs:n,cache:t,metadata:r}=e,a=r.compilation.variableNamesIndex.globals.fs;return{sendReadSoundFileResponse:{type:"proxy",value:"x_onReadSoundFileResponse"in a?(r,a,i)=>{let o=0;i&&(o=Cc(n.rawModule,t.bitDepth,i)),n.rawModule.globals.fs.x_onReadSoundFileResponse(r,a,o),Qu(e)}:void 0},sendWriteSoundFileResponse:{type:"proxy",value:"x_onWriteSoundFileResponse"in a?n.rawModule.globals.fs.x_onWriteSoundFileResponse:void 0},sendSoundStreamData:{type:"proxy",value:"x_onSoundStreamData"in a?(r,a)=>{const i=Cc(n.rawModule,t.bitDepth,a),o=n.rawModule.globals.fs.x_onSoundStreamData(r,i);return Qu(e),o}:void 0},closeSoundStream:{type:"proxy",value:"x_onCloseSoundStream"in a?n.rawModule.globals.fs.x_onCloseSoundStream:void 0},onReadSoundFile:{type:"callback",value:()=>{}},onWriteSoundFile:{type:"callback",value:()=>{}},onOpenSoundReadStream:{type:"callback",value:()=>{}},onOpenSoundWriteStream:{type:"callback",value:()=>{}},onSoundStreamData:{type:"callback",value:()=>{}},onCloseSoundStream:{type:"callback",value:()=>{}}}})(e));i.fs={type:"proxy",value:n}}return _r(_r({},(e=>{const{refs:n,cache:t,metadata:r}=e;return{initialize:{type:"proxy",value:(a,i)=>{r.settings.audio.blockSize=i,r.settings.audio.sampleRate=a,t.blockSize=i,n.rawModule.initialize(a,i),Qu(e)}},dspLoop:{type:"proxy",value:(r,a)=>{for(let e=0;e<r.length;e++)t.wasmInput.set(r[e],e*t.blockSize);Qu(e),n.rawModule.dspLoop(),Qu(e);for(let e=0;e<a.length;e++)a[e].set(t.wasmOutput.subarray(t.blockSize*e,t.blockSize*(e+1)))}}}})(e)),{},{metadata:{type:"proxy",value:n},globals:{type:"proxy",value:kc(t.rawModule,i)},io:{type:"proxy",value:a}})},od="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function sd(e,n,t,r){if(["32f","64"].indexOf(n)>-1&&["32f","64"].indexOf(r)>-1)return void t.set(e);dd(n),dd(r);let a=function(e,n){let t=function(e){return e};e!=n&&(t=["32f","64"].includes(e)?cd:["32f","64"].includes(n)?ud:ld);return t}(n,r),i={oldMin:Math.pow(2,parseInt(n,10))/2,newMin:Math.pow(2,parseInt(r,10))/2,oldMax:Math.pow(2,parseInt(n,10))/2-1,newMax:Math.pow(2,parseInt(r,10))/2-1};pd(n,e,!0);for(let o=0,s=e.length;o<s;o++)t[o]=a(e[o],i);pd(r,t,!1)}function ld(e,n){return e=e>0?parseInt(e/n.oldMax*n.newMax,10):parseInt(e/n.oldMin*n.newMin,10)}function cd(e,n){return parseInt(e>0?e*n.newMax:e*n.newMin,10)}function ud(e,n){return e>0?e/n.oldMax:e/n.oldMin}function dd(e){if("32f"!=e&&"64"!=e&&(parseInt(e,10)<"8"||parseInt(e,10)>"53"))throw new Error("Invalid bit depth.")}function pd(e,n,t){if("8"==e){let e=t?-128:128;for(let t=0,r=n.length;t<r;t++)n[t]=n[t]+=e}}const fd=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],hd=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767];function md(e,n){let t=function(e,n){yd(e,n);let t=[];return t.push(255&e),t.push(e>>8&255),t.push(n.index),t.push(0),t}(e[0],n);for(let r=3,a=e.length;r<a;r+=2){let a=yd(e[r],n),i=yd(e[r+1],n);t.push(i<<4|a)}return t}function gd(e,n){var t;n.predicted=(t=e[1]<<8|e[0])>32768?t-65536:t,n.index=e[2],n.step=hd[n.index];let r=[n.predicted,n.predicted];for(let a=4,i=e.length;a<i;a++){let t=e[a],i=t>>4,o=i<<4^t;r.push(vd(o,n)),r.push(vd(i,n))}return r}function yd(e,n){let t=e-n.predicted,r=0;t>=0?r=0:(r=8,t=-t);let a=hd[n.index],i=a>>3;return t>a&&(r|=4,t-=a,i+=a),a>>=1,t>a&&(r|=2,t-=a,i+=a),a>>=1,t>a&&(r|=1,i+=a),function(e,n,t){8&e?t.predicted-=n:t.predicted+=n;t.predicted<-32768?t.predicted=-32768:t.predicted>32767&&(t.predicted=32767);t.index+=fd[7&e],t.index<0?t.index=0:t.index>88&&(t.index=88)}(r,i,n),r}function vd(e,n){let t=0;return 4&e&&(t+=n.step),2&e&&(t+=n.step>>1),1&e&&(t+=n.step>>2),t+=n.step>>3,8&e&&(t=-t),n.predicted+=t,n.predicted>32767?n.predicted=32767:n.predicted<-32767&&(n.predicted=-32767),function(e,n){n.index+=fd[e],n.index<0?n.index=0:n.index>88&&(n.index=88);n.step=hd[n.index]}(e,n),n.predicted}const bd=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];function wd(e){let n,t=~(e=-32768==e?-32767:e)>>8&128;if(t||(e*=-1),e>32635&&(e=32635),e>=256){let t=bd[e>>8&127];n=t<<4|e>>t+3&15}else n=e>>4;return 85^n^t}function Sd(e){let n=0;0!==(128&(e^=85))&&(e&=-129,n=-1);let t=4+((240&e)>>4),r=0;return r=4!=t?1<<t|(15&e)<<t-4|1<<t-5:e<<1|1,r=0===n?r:-r,8*r*-1}const xd=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],kd=[0,132,396,924,1980,4092,8316,16764];function Id(e){let n,t,r,a;return n=e>>8&128,0!=n&&(e=-e),(e+=132)>32635&&(e=32635),t=xd[e>>7&255],r=e>>t+3&15,a=~(n|t<<4|r),a}function _d(e){let n,t,r,a;return n=128&(e=~e),t=e>>4&7,r=15&e,a=kd[t]+(r<<t+3),0!=n&&(a=-a),a}function Ad(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;for(let a=t;a<r;a+=n)Td(e,n,a)}function Td(e,n,t){n--;for(let r=0;r<n;r++){let a=e[t+r];e[t+r]=e[t+n],e[t+n]=a,n--}}function Ed(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0,a=e.length;for(;r<a;){let a=e.codePointAt(r);if(a<128)n[t]=a,t++;else{let e=0,i=0;for(a<=2047?(e=1,i=192):a<=65535?(e=2,i=224):a<=1114111&&(e=3,i=240,r++),n[t]=(a>>6*e)+i,t++;e>0;)n[t]=128|a>>6*(e-1)&63,t++,e--}r++}return t}class Od{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.bits=e,this.offset=Math.ceil(e/8),this.max=Math.pow(2,e)-1,this.min=0,this.unpack=this.unpack_,n&&(this.max=Math.pow(2,e)/2-1,this.min=-this.max-1,this.unpack=this.unpackSigned_)}pack(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n=this.clamp_(Math.round(n));for(let r=0,a=this.offset;r<a;r++)e[t]=255&Math.floor(n/Math.pow(2,8*r)),t++;return t}unpack_(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=0;for(let r=0;r<this.offset;r++)t+=e[n+r]*Math.pow(256,r);return t}unpackSigned_(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.sign_(this.unpack_(e,n))}clamp_(e){return e>this.max?this.max:e<this.min?this.min:e}sign_(e){return e>this.max&&(e-=2*this.max+2),e}}class Cd{constructor(e,n){this.offset=Math.ceil((e+n)/8),this.ebits=e,this.fbits=n,this.bias=(1<<e-1)-1,this.biasP2=Math.pow(2,this.bias+1),this.ebitsFbits=e+n,this.fbias=Math.pow(2,-(8*this.offset-1-e))}pack(e,n,t){Math.abs(n)>this.biasP2-2*this.ebitsFbits&&(n=n<0?-1/0:1/0);let r=((n=+n)||1/n)<0||n<0?1:0;n=Math.abs(n);let a=Math.min(Math.floor(Math.log(n)/Math.LN2),1023),i=Nd(n/Math.pow(2,a)*Math.pow(2,this.fbits));return n!==n?(i=Math.pow(2,this.fbits-1),a=(1<<this.ebits)-1):0!==n&&(n>=Math.pow(2,1-this.bias)?(i/Math.pow(2,this.fbits)>=2&&(a+=1,i=1),a>this.bias?(a=(1<<this.ebits)-1,i=0):(a+=this.bias,i=Nd(i)-Math.pow(2,this.fbits))):(i=Nd(n/Math.pow(2,1-this.bias-this.fbits)),a=0)),this.packFloatBits_(e,t,r,a,i)}unpack(e,n){let t,r=(1<<this.ebits)-1,a="";for(let s=this.offset-1;s>=0;s--){let t=e[s+n].toString(2);a+="00000000".substring(t.length)+t}let i="1"==a.charAt(0)?-1:1;a=a.substring(1);let o=parseInt(a.substring(0,this.ebits),2);return a=a.substring(this.ebits),o==r?0!==parseInt(a,2)?NaN:i*(1/0):(0===o?(o+=1,t=parseInt(a,2)):t=parseInt("1"+a,2),i*t*this.fbias*Math.pow(2,o-this.bias))}packFloatBits_(e,n,t,r,a){let i=[];i.push(t);for(let u=this.ebits;u>0;u-=1)i[u]=r%2?1:0,r=Math.floor(r/2);let o=i.length;for(let u=this.fbits;u>0;u-=1)i[o+u]=a%2?1:0,a=Math.floor(a/2);let s=i.join(""),l=this.offset+n-1,c=n;for(;l>=n;)e[l]=parseInt(s.substring(0,8),2),s=s.substring(8),l--,c++;return c}}function Nd(e){let n=Math.floor(e),t=e-n;return t<.5?n:t>.5||n%2?n+1:n}function Md(e){return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r="";for(let a=n;a<t;){let n=128,t=191,i=!1,o=e[a++];if(o>=0&&o<=127)r+=String.fromCharCode(o);else{let s=0;o>=194&&o<=223?s=1:o>=224&&o<=239?(s=2,224===e[a]&&(n=160),237===e[a]&&(t=159)):o>=240&&o<=244?(s=3,240===e[a]&&(n=144),244===e[a]&&(t=143)):i=!0,o&=(1<<8-s-1)-1;for(let r=0;r<s;r++)(e[a]<n||e[a]>t)&&(i=!0),o=o<<6|63&e[a],a++;i?r+=String.fromCharCode(65533):o<=65535?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296+(o>>10&1023),56320+(1023&o)))}}return r}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length)}function Pd(e){let n=[];return Ed(e,n),n}function Fd(e,n){return Ed(e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)}function Rd(e,n,t){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=Ud((n=n||{}).bits,n.fp,n.signed),i=Math.ceil(n.bits/8),o=0,s=r;for(let l=e.length;o<l;o++)r=a.pack(t,e[o],r);return n.be&&Ad(t,i,s,r),r}function Ld(e,n,t){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length,i=Ud((n=n||{}).bits,n.fp,n.signed);if(a=function(e,n,t,r){let a=(t-n)%r;return t-a}(0,r,a,i.offset),n.be){let o=function(e){return new Uint8Array(e)}(e);n.be&&Ad(o,i.offset,r,a),Bd(o,t,r,a,i)}else Bd(e,t,r,a,i)}function Dd(e,n,t){return Rd([e],n,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)}function jd(e,n){let t=[];return Dd(e,n,t,0),t}function zd(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];return Ld(e,n,r,t,t+Math.ceil(n.bits/8)),r[0]}function Bd(e,n,t,r,a){let i=a.offset;for(let o=0,s=t;s<r;s+=i,o++)n[o]=a.unpack(e,s)}function Ud(e,n,t){return n&&32==e?new Cd(8,23):n&&64==e?new Cd(11,52):new Od(e,t)}class Wd{constructor(){this.container="",this.chunkSize=0,this.format="",this.signature=null,this.head=0,this.uInt32={bits:32,be:!1},this.supported_containers=["RIFF","RIFX"]}setSignature(e){if(this.head=0,this.container=this.readString(e,4),-1===this.supported_containers.indexOf(this.container))throw Error("Not a supported format.");this.uInt32.be="RIFX"===this.container,this.chunkSize=this.readUInt32(e),this.format=this.readString(e,4),this.signature={chunkId:this.container,chunkSize:this.chunkSize,format:this.format,subChunks:this.getSubChunksIndex_(e)}}findChunk(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=this.signature.subChunks,r=[];for(let a=0;a<t.length;a++)if(t[a].chunkId==e){if(!n)return t[a];r.push(t[a])}return"LIST"==e&&r.length?r:null}readString(e,n){let t="";return t=Md(e,this.head,this.head+n),this.head+=n,t}readUInt32(e){let n=zd(e,this.uInt32,this.head);return this.head+=4,n}getSubChunksIndex_(e){let n=[],t=this.head;for(;t<=e.length-8;)n.push(this.getSubChunkIndex_(e,t)),t+=8+n[n.length-1].chunkSize,t=t%2?t+1:t;return n}getSubChunkIndex_(e,n){let t={chunkId:this.getChunkId_(e,n),chunkSize:this.getChunkSize_(e,n)};if("LIST"==t.chunkId)t.format=Md(e,n+8,n+12),this.head+=4,t.subChunks=this.getSubChunksIndex_(e);else{let e=t.chunkSize%2?t.chunkSize+1:t.chunkSize;this.head=n+8+e,t.chunkData={start:n+8,end:this.head}}return t}getChunkId_(e,n){return this.head+=4,Md(e,n,n+4)}getChunkSize_(e,n){return this.head+=4,zd(e,this.uInt32,n+4)}}class $d extends Wd{constructor(){super(),this.supported_containers.push("RF64"),this.fmt={chunkId:"",chunkSize:0,audioFormat:0,numChannels:0,sampleRate:0,byteRate:0,blockAlign:0,bitsPerSample:0,cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]},this.fact={chunkId:"",chunkSize:0,dwSampleLength:0},this.cue={chunkId:"",chunkSize:0,dwCuePoints:0,points:[]},this.smpl={chunkId:"",chunkSize:0,dwManufacturer:0,dwProduct:0,dwSamplePeriod:0,dwMIDIUnityNote:0,dwMIDIPitchFraction:0,dwSMPTEFormat:0,dwSMPTEOffset:0,dwNumSampleLoops:0,dwSamplerData:0,loops:[]},this.bext={chunkId:"",chunkSize:0,description:"",originator:"",originatorReference:"",originationDate:"",originationTime:"",timeReference:[0,0],version:0,UMID:"",loudnessValue:0,loudnessRange:0,maxTruePeakLevel:0,maxMomentaryLoudness:0,maxShortTermLoudness:0,reserved:"",codingHistory:""},this.iXML={chunkId:"",chunkSize:0,value:""},this.ds64={chunkId:"",chunkSize:0,riffSizeHigh:0,riffSizeLow:0,dataSizeHigh:0,dataSizeLow:0,originationTime:0,sampleCountHigh:0,sampleCountLow:0},this.data={chunkId:"",chunkSize:0,samples:new Uint8Array(0)},this.LIST=[],this.junk={chunkId:"",chunkSize:0,chunkData:[]},this._PMX={chunkId:"",chunkSize:0,value:""},this.uInt16={bits:16,be:!1,signed:!1,fp:!1}}fromBuffer(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.clearHeaders(),this.setSignature(e),this.uInt16.be=this.uInt32.be,"WAVE"!=this.format)throw Error('Could not find the "WAVE" format identifier');this.readDs64Chunk_(e),this.readFmtChunk_(e),this.readFactChunk_(e),this.readBextChunk_(e),this.readiXMLChunk_(e),this.readCueChunk_(e),this.readSmplChunk_(e),this.readDataChunk_(e,n),this.readJunkChunk_(e),this.readLISTChunk_(e),this.read_PMXChunk_(e)}clearHeaders(){let e=new $d;Object.assign(this.fmt,e.fmt),Object.assign(this.fact,e.fact),Object.assign(this.cue,e.cue),Object.assign(this.smpl,e.smpl),Object.assign(this.bext,e.bext),Object.assign(this.iXML,e.iXML),Object.assign(this.ds64,e.ds64),Object.assign(this.data,e.data),this.LIST=[],Object.assign(this.junk,e.junk),Object.assign(this._PMX,e._PMX)}readFmtChunk_(e){let n=this.findChunk("fmt ");if(!n)throw Error('Could not find the "fmt " chunk');this.head=n.chunkData.start,this.fmt.chunkId=n.chunkId,this.fmt.chunkSize=n.chunkSize,this.fmt.audioFormat=this.readUInt16_(e),this.fmt.numChannels=this.readUInt16_(e),this.fmt.sampleRate=this.readUInt32(e),this.fmt.byteRate=this.readUInt32(e),this.fmt.blockAlign=this.readUInt16_(e),this.fmt.bitsPerSample=this.readUInt16_(e),this.readFmtExtension_(e)}readFmtExtension_(e){this.fmt.chunkSize>16&&(this.fmt.cbSize=this.readUInt16_(e),this.fmt.chunkSize>18&&(this.fmt.validBitsPerSample=this.readUInt16_(e),this.fmt.chunkSize>20&&(this.fmt.dwChannelMask=this.readUInt32(e),this.fmt.subformat=[this.readUInt32(e),this.readUInt32(e),this.readUInt32(e),this.readUInt32(e)])))}readFactChunk_(e){let n=this.findChunk("fact");n&&(this.head=n.chunkData.start,this.fact.chunkId=n.chunkId,this.fact.chunkSize=n.chunkSize,this.fact.dwSampleLength=this.readUInt32(e))}readCueChunk_(e){let n=this.findChunk("cue ");if(n){this.head=n.chunkData.start,this.cue.chunkId=n.chunkId,this.cue.chunkSize=n.chunkSize,this.cue.dwCuePoints=this.readUInt32(e);for(let n=0;n<this.cue.dwCuePoints;n++)this.cue.points.push({dwName:this.readUInt32(e),dwPosition:this.readUInt32(e),fccChunk:this.readString(e,4),dwChunkStart:this.readUInt32(e),dwBlockStart:this.readUInt32(e),dwSampleOffset:this.readUInt32(e)})}}readSmplChunk_(e){let n=this.findChunk("smpl");if(n){this.head=n.chunkData.start,this.smpl.chunkId=n.chunkId,this.smpl.chunkSize=n.chunkSize,this.smpl.dwManufacturer=this.readUInt32(e),this.smpl.dwProduct=this.readUInt32(e),this.smpl.dwSamplePeriod=this.readUInt32(e),this.smpl.dwMIDIUnityNote=this.readUInt32(e),this.smpl.dwMIDIPitchFraction=this.readUInt32(e),this.smpl.dwSMPTEFormat=this.readUInt32(e),this.smpl.dwSMPTEOffset=this.readUInt32(e),this.smpl.dwNumSampleLoops=this.readUInt32(e),this.smpl.dwSamplerData=this.readUInt32(e);for(let n=0;n<this.smpl.dwNumSampleLoops;n++)this.smpl.loops.push({dwName:this.readUInt32(e),dwType:this.readUInt32(e),dwStart:this.readUInt32(e),dwEnd:this.readUInt32(e),dwFraction:this.readUInt32(e),dwPlayCount:this.readUInt32(e)})}}readDataChunk_(e,n){let t=this.findChunk("data");if(!t)throw Error('Could not find the "data" chunk');this.data.chunkId="data",this.data.chunkSize=t.chunkSize,n&&(this.data.samples=e.slice(t.chunkData.start,t.chunkData.end))}readBextChunk_(e){let n=this.findChunk("bext");n&&(this.head=n.chunkData.start,this.bext.chunkId=n.chunkId,this.bext.chunkSize=n.chunkSize,this.bext.description=this.readString(e,256),this.bext.originator=this.readString(e,32),this.bext.originatorReference=this.readString(e,32),this.bext.originationDate=this.readString(e,10),this.bext.originationTime=this.readString(e,8),this.bext.timeReference=[this.readUInt32(e),this.readUInt32(e)],this.bext.version=this.readUInt16_(e),this.bext.UMID=this.readString(e,64),this.bext.loudnessValue=this.readUInt16_(e),this.bext.loudnessRange=this.readUInt16_(e),this.bext.maxTruePeakLevel=this.readUInt16_(e),this.bext.maxMomentaryLoudness=this.readUInt16_(e),this.bext.maxShortTermLoudness=this.readUInt16_(e),this.bext.reserved=this.readString(e,180),this.bext.codingHistory=this.readString(e,this.bext.chunkSize-602))}readiXMLChunk_(e){let n=this.findChunk("iXML");n&&(this.head=n.chunkData.start,this.iXML.chunkId=n.chunkId,this.iXML.chunkSize=n.chunkSize,this.iXML.value=Md(e,this.head,this.head+this.iXML.chunkSize))}readDs64Chunk_(e){let n=this.findChunk("ds64");if(n)this.head=n.chunkData.start,this.ds64.chunkId=n.chunkId,this.ds64.chunkSize=n.chunkSize,this.ds64.riffSizeHigh=this.readUInt32(e),this.ds64.riffSizeLow=this.readUInt32(e),this.ds64.dataSizeHigh=this.readUInt32(e),this.ds64.dataSizeLow=this.readUInt32(e),this.ds64.originationTime=this.readUInt32(e),this.ds64.sampleCountHigh=this.readUInt32(e),this.ds64.sampleCountLow=this.readUInt32(e);else if("RF64"==this.container)throw Error('Could not find the "ds64" chunk')}readLISTChunk_(e){let n=this.findChunk("LIST",!0);if(null!==n)for(let t=0;t<n.length;t++){let r=n[t];this.LIST.push({chunkId:r.chunkId,chunkSize:r.chunkSize,format:r.format,subChunks:[]});for(let n=0;n<r.subChunks.length;n++)this.readLISTSubChunks_(r.subChunks[n],r.format,e)}}readLISTSubChunks_(e,n,t){"adtl"==n?["labl","note","ltxt"].indexOf(e.chunkId)>-1&&this.readLISTadtlSubChunks_(t,e):"INFO"==n&&this.readLISTINFOSubChunks_(t,e)}readLISTadtlSubChunks_(e,n){this.head=n.chunkData.start;let t={chunkId:n.chunkId,chunkSize:n.chunkSize,dwName:this.readUInt32(e)};"ltxt"==n.chunkId?(t.dwSampleLength=this.readUInt32(e),t.dwPurposeID=this.readUInt32(e),t.dwCountry=this.readUInt16_(e),t.dwLanguage=this.readUInt16_(e),t.dwDialect=this.readUInt16_(e),t.dwCodePage=this.readUInt16_(e),t.value=""):t.value=this.readZSTR_(e,this.head),this.LIST[this.LIST.length-1].subChunks.push(t)}readLISTINFOSubChunks_(e,n){this.head=n.chunkData.start,this.LIST[this.LIST.length-1].subChunks.push({chunkId:n.chunkId,chunkSize:n.chunkSize,value:this.readZSTR_(e,this.head)})}readJunkChunk_(e){let n=this.findChunk("junk");n&&(this.junk={chunkId:n.chunkId,chunkSize:n.chunkSize,chunkData:[].slice.call(e.slice(n.chunkData.start,n.chunkData.end))})}read_PMXChunk_(e){let n=this.findChunk("_PMX");n&&(this.head=n.chunkData.start,this._PMX.chunkId=n.chunkId,this._PMX.chunkSize=n.chunkSize,this._PMX.value=Md(e,this.head,this.head+this._PMX.chunkSize))}readZSTR_(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let t=n;t<e.length&&(this.head++,0!==e[t]);t++);return Md(e,n,this.head-1)}readUInt16_(e){let n=zd(e,this.uInt16,this.head);return this.head+=2,n}}function Vd(e,n){let t=Pd(e);for(let r=t.length;r<n;r++)t.push(0);return t}class Gd extends $d{toBuffer(){this.uInt16.be="RIFX"===this.container,this.uInt32.be=this.uInt16.be;let e=[this.getJunkBytes_(),this.getDs64Bytes_(),this.getBextBytes_(),this.getiXMLBytes_(),this.getFmtBytes_(),this.getFactBytes_(),Pd(this.data.chunkId),jd(this.data.samples.length,this.uInt32),this.data.samples,this.getCueBytes_(),this.getSmplBytes_(),this.getLISTBytes_(),this.get_PMXBytes_()],n=0;for(let a=0;a<e.length;a++)n+=e[a].length;let t=new Uint8Array(n+12),r=0;r=Fd(this.container,t,r),r=Dd(n+4,this.uInt32,t,r),r=Fd(this.format,t,r);for(let a=0;a<e.length;a++)t.set(e[a],r),r+=e[a].length;return t}getBextBytes_(){let e=[];return this.enforceBext_(),this.bext.chunkId&&(this.bext.chunkSize=602+this.bext.codingHistory.length,e=e.concat(Pd(this.bext.chunkId),jd(602+this.bext.codingHistory.length,this.uInt32),Vd(this.bext.description,256),Vd(this.bext.originator,32),Vd(this.bext.originatorReference,32),Vd(this.bext.originationDate,10),Vd(this.bext.originationTime,8),jd(this.bext.timeReference[0],this.uInt32),jd(this.bext.timeReference[1],this.uInt32),jd(this.bext.version,this.uInt16),Vd(this.bext.UMID,64),jd(this.bext.loudnessValue,this.uInt16),jd(this.bext.loudnessRange,this.uInt16),jd(this.bext.maxTruePeakLevel,this.uInt16),jd(this.bext.maxMomentaryLoudness,this.uInt16),jd(this.bext.maxShortTermLoudness,this.uInt16),Vd(this.bext.reserved,180),Vd(this.bext.codingHistory,this.bext.codingHistory.length))),this.enforceByteLen_(e),e}enforceBext_(){for(let e in this.bext)if(this.bext.hasOwnProperty(e)&&this.bext[e]&&"timeReference"!=e){this.bext.chunkId="bext";break}(this.bext.timeReference[0]||this.bext.timeReference[1])&&(this.bext.chunkId="bext")}getiXMLBytes_(){let e=[];if(this.iXML.chunkId){let n=Pd(this.iXML.value);this.iXML.chunkSize=n.length,e=e.concat(Pd(this.iXML.chunkId),jd(this.iXML.chunkSize,this.uInt32),n)}return this.enforceByteLen_(e),e}getDs64Bytes_(){let e=[];return this.ds64.chunkId&&(e=e.concat(Pd(this.ds64.chunkId),jd(this.ds64.chunkSize,this.uInt32),jd(this.ds64.riffSizeHigh,this.uInt32),jd(this.ds64.riffSizeLow,this.uInt32),jd(this.ds64.dataSizeHigh,this.uInt32),jd(this.ds64.dataSizeLow,this.uInt32),jd(this.ds64.originationTime,this.uInt32),jd(this.ds64.sampleCountHigh,this.uInt32),jd(this.ds64.sampleCountLow,this.uInt32))),this.enforceByteLen_(e),e}getCueBytes_(){let e=[];if(this.cue.chunkId){let n=this.getCuePointsBytes_();e=e.concat(Pd(this.cue.chunkId),jd(n.length+4,this.uInt32),jd(this.cue.dwCuePoints,this.uInt32),n)}return this.enforceByteLen_(e),e}getCuePointsBytes_(){let e=[];for(let n=0;n<this.cue.dwCuePoints;n++)e=e.concat(jd(this.cue.points[n].dwName,this.uInt32),jd(this.cue.points[n].dwPosition,this.uInt32),Pd(this.cue.points[n].fccChunk),jd(this.cue.points[n].dwChunkStart,this.uInt32),jd(this.cue.points[n].dwBlockStart,this.uInt32),jd(this.cue.points[n].dwSampleOffset,this.uInt32));return e}getSmplBytes_(){let e=[];if(this.smpl.chunkId){let n=this.getSmplLoopsBytes_();e=e.concat(Pd(this.smpl.chunkId),jd(n.length+36,this.uInt32),jd(this.smpl.dwManufacturer,this.uInt32),jd(this.smpl.dwProduct,this.uInt32),jd(this.smpl.dwSamplePeriod,this.uInt32),jd(this.smpl.dwMIDIUnityNote,this.uInt32),jd(this.smpl.dwMIDIPitchFraction,this.uInt32),jd(this.smpl.dwSMPTEFormat,this.uInt32),jd(this.smpl.dwSMPTEOffset,this.uInt32),jd(this.smpl.dwNumSampleLoops,this.uInt32),jd(this.smpl.dwSamplerData,this.uInt32),n)}return this.enforceByteLen_(e),e}getSmplLoopsBytes_(){let e=[];for(let n=0;n<this.smpl.dwNumSampleLoops;n++)e=e.concat(jd(this.smpl.loops[n].dwName,this.uInt32),jd(this.smpl.loops[n].dwType,this.uInt32),jd(this.smpl.loops[n].dwStart,this.uInt32),jd(this.smpl.loops[n].dwEnd,this.uInt32),jd(this.smpl.loops[n].dwFraction,this.uInt32),jd(this.smpl.loops[n].dwPlayCount,this.uInt32));return e}getFactBytes_(){let e=[];return this.fact.chunkId&&(e=e.concat(Pd(this.fact.chunkId),jd(this.fact.chunkSize,this.uInt32),jd(this.fact.dwSampleLength,this.uInt32))),this.enforceByteLen_(e),e}getFmtBytes_(){let e=[];if(this.fmt.chunkId){let n=e.concat(Pd(this.fmt.chunkId),jd(this.fmt.chunkSize,this.uInt32),jd(this.fmt.audioFormat,this.uInt16),jd(this.fmt.numChannels,this.uInt16),jd(this.fmt.sampleRate,this.uInt32),jd(this.fmt.byteRate,this.uInt32),jd(this.fmt.blockAlign,this.uInt16),jd(this.fmt.bitsPerSample,this.uInt16),this.getFmtExtensionBytes_());return this.enforceByteLen_(n),n}throw Error('Could not find the "fmt " chunk')}getFmtExtensionBytes_(){let e=[];return this.fmt.chunkSize>16&&(e=e.concat(jd(this.fmt.cbSize,this.uInt16))),this.fmt.chunkSize>18&&(e=e.concat(jd(this.fmt.validBitsPerSample,this.uInt16))),this.fmt.chunkSize>20&&(e=e.concat(jd(this.fmt.dwChannelMask,this.uInt32))),this.fmt.chunkSize>24&&(e=e.concat(jd(this.fmt.subformat[0],this.uInt32),jd(this.fmt.subformat[1],this.uInt32),jd(this.fmt.subformat[2],this.uInt32),jd(this.fmt.subformat[3],this.uInt32))),e}getLISTBytes_(){let e=[];for(let n=0;n<this.LIST.length;n++){let t=this.getLISTSubChunksBytes_(this.LIST[n].subChunks,this.LIST[n].format);e=e.concat(Pd(this.LIST[n].chunkId),jd(t.length+4,this.uInt32),Pd(this.LIST[n].format),t)}return this.enforceByteLen_(e),e}getLISTSubChunksBytes_(e,n){let t=[];for(let r=0,a=e.length;r<a;r++)"INFO"==n?t=t.concat(this.getLISTINFOSubChunksBytes_(e[r])):"adtl"==n&&(t=t.concat(this.getLISTadtlSubChunksBytes_(e[r]))),this.enforceByteLen_(t);return t}getLISTINFOSubChunksBytes_(e){let n=[],t=Vd(e.value,e.value.length);return n=n.concat(Pd(e.chunkId),jd(t.length+1,this.uInt32),t),n.push(0),n}getLISTadtlSubChunksBytes_(e){let n=[];if(["labl","note"].indexOf(e.chunkId)>-1){let t=Vd(e.value,e.value.length);n=n.concat(Pd(e.chunkId),jd(t.length+4+1,this.uInt32),jd(e.dwName,this.uInt32),t),n.push(0)}else"ltxt"==e.chunkId&&(n=n.concat(this.getLtxtChunkBytes_(e)));return n}getLtxtChunkBytes_(e){return[].concat(Pd(e.chunkId),jd(e.value.length+20,this.uInt32),jd(e.dwName,this.uInt32),jd(e.dwSampleLength,this.uInt32),jd(e.dwPurposeID,this.uInt32),jd(e.dwCountry,this.uInt16),jd(e.dwLanguage,this.uInt16),jd(e.dwDialect,this.uInt16),jd(e.dwCodePage,this.uInt16),Vd(e.value,e.value.length))}get_PMXBytes_(){let e=[];if(this._PMX.chunkId){let n=Pd(this._PMX.value);this._PMX.chunkSize=n.length,e=e.concat(Pd(this._PMX.chunkId),jd(this._PMX.chunkSize,this.uInt32),n)}return this.enforceByteLen_(e),e}getJunkBytes_(){let e=[];return this.junk.chunkId?e.concat(Pd(this.junk.chunkId),jd(this.junk.chunkData.length,this.uInt32),this.junk.chunkData):(this.enforceByteLen_(e),e)}enforceByteLen_(e){e.length%2&&e.push(0)}}function Hd(e,n,t){return!(t<1||e*(n/8)*t>4294967295)}class qd extends Gd{constructor(){super(),this.bitDepth="0",this.dataType={bits:0,be:!1},this.WAV_AUDIO_FORMATS={4:17,8:1,"8a":6,"8m":7,16:1,24:1,32:1,"32f":3,64:3}}fromScratch(e,n,t,r,a){a=a||{},this.clearHeaders(),this.newWavFile_(e,n,t,r,a)}fromBuffer(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super.fromBuffer(e,n),this.bitDepthFromFmt_(),this.updateDataType_()}toBuffer(){return this.validateWavHeader_(),super.toBuffer()}getSamples(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Float64Array,t=new n(this.data.samples.length/(this.dataType.bits/8));return Ld(this.data.samples,this.dataType,t,0,this.data.samples.length),!e&&this.fmt.numChannels>1?function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=[];for(let a=0;a<n;a++)r[a]=new t(e.length/n);for(let a=0;a<n;a++)for(let t=a,i=0;t<e.length;t+=n,i++)r[a][i]=e[t];return r}(t,this.fmt.numChannels,n):t}getSample(e){if((e*=this.dataType.bits/8)+this.dataType.bits/8>this.data.samples.length)throw new Error("Range error");return zd(this.data.samples.slice(e,e+this.dataType.bits/8),this.dataType)}setSample(e,n){if((e*=this.dataType.bits/8)+this.dataType.bits/8>this.data.samples.length)throw new Error("Range error");Dd(n,this.dataType,this.data.samples,e)}getiXML(){return this.iXML.value}setiXML(e){if("string"!==typeof e)throw new TypeError("iXML value must be a string.");this.iXML.value=e,this.iXML.chunkId="iXML"}get_PMX(){return this._PMX.value}set_PMX(e){if("string"!==typeof e)throw new TypeError("_PMX value must be a string.");this._PMX.value=e,this._PMX.chunkId="_PMX"}newWavFile_(e,n,t,r,a){a.container||(a.container="RIFF"),this.container=a.container,this.bitDepth=t,r=function(e){let n=[];if(e.length>0)if(e[0].constructor!==Number){n=new Float64Array(e[0].length*e.length);for(let t=0,r=e[0].length,a=0;t<r;t++)for(let i=0,o=e.length;i<o;i++,a++)n[a]=e[i][t]}else n=e;return n}(r),this.updateDataType_();let i=this.dataType.bits/8;this.data.samples=new Uint8Array(r.length*i),Rd(r,this.dataType,this.data.samples,0),this.makeWavHeader_(t,e,n,i,this.data.samples.length,a),this.data.chunkId="data",this.data.chunkSize=this.data.samples.length,this.validateWavHeader_()}makeWavHeader_(e,n,t,r,a,i){"4"==e?this.createADPCMHeader_(e,n,t,r,a,i):"8a"==e||"8m"==e?this.createALawMulawHeader_(e,n,t,r,a,i):-1==Object.keys(this.WAV_AUDIO_FORMATS).indexOf(e)||n>2?this.createExtensibleHeader_(e,n,t,r,a,i):this.createPCMHeader_(e,n,t,r,a,i)}createPCMHeader_(e,n,t,r,a,i){this.container=i.container,this.chunkSize=36+a,this.format="WAVE",this.bitDepth=e,this.fmt={chunkId:"fmt ",chunkSize:16,audioFormat:this.WAV_AUDIO_FORMATS[e]||65534,numChannels:n,sampleRate:t,byteRate:n*r*t,blockAlign:n*r,bitsPerSample:parseInt(e,10),cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]}}createADPCMHeader_(e,n,t,r,a,i){this.createPCMHeader_(e,n,t,r,a,i),this.chunkSize=40+a,this.fmt.chunkSize=20,this.fmt.byteRate=4055,this.fmt.blockAlign=256,this.fmt.bitsPerSample=4,this.fmt.cbSize=2,this.fmt.validBitsPerSample=505,this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:2*a}}createExtensibleHeader_(e,n,t,r,a,i){this.createPCMHeader_(e,n,t,r,a,i),this.chunkSize=60+a,this.fmt.chunkSize=40,this.fmt.bitsPerSample=1+(parseInt(e,10)-1|7),this.fmt.cbSize=22,this.fmt.validBitsPerSample=parseInt(e,10),this.fmt.dwChannelMask=function(e){let n=0;1===e?n=4:2===e?n=3:4===e?n=51:6===e?n=63:8===e&&(n=1599);return n}(n),this.fmt.subformat=[1,1048576,2852126848,1905997824]}createALawMulawHeader_(e,n,t,r,a,i){this.createPCMHeader_(e,n,t,r,a,i),this.chunkSize=40+a,this.fmt.chunkSize=20,this.fmt.cbSize=2,this.fmt.validBitsPerSample=8,this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:a}}bitDepthFromFmt_(){3===this.fmt.audioFormat&&32===this.fmt.bitsPerSample?this.bitDepth="32f":6===this.fmt.audioFormat?this.bitDepth="8a":7===this.fmt.audioFormat?this.bitDepth="8m":this.bitDepth=this.fmt.bitsPerSample.toString()}validateBitDepth_(){if(!this.WAV_AUDIO_FORMATS[this.bitDepth]){if(parseInt(this.bitDepth,10)>8&&parseInt(this.bitDepth,10)<54)return!0;throw new Error("Invalid bit depth.")}return!0}updateDataType_(){this.dataType={bits:1+(parseInt(this.bitDepth,10)-1|7),fp:"32f"==this.bitDepth||"64"==this.bitDepth,signed:"8"!=this.bitDepth,be:"RIFX"==this.container},["4","8a","8m"].indexOf(this.bitDepth)>-1&&(this.dataType.bits=8,this.dataType.signed=!1)}validateWavHeader_(){if(this.validateBitDepth_(),e=this.fmt.numChannels,n=this.fmt.bitsPerSample,e<1||e*n/8>65535)throw new Error("Invalid number of channels.");var e,n;if(!Hd(this.fmt.numChannels,this.fmt.bitsPerSample,this.fmt.sampleRate))throw new Error("Invalid sample rate.")}}class Kd extends qd{getTag(e){let n=this.getTagIndex_(e);return null!==n.TAG?this.LIST[n.LIST].subChunks[n.TAG].value:null}setTag(e,n){e=function(e){if(e.constructor!==String)throw new Error("Invalid tag name.");if(e.length<4)for(let n=0,t=4-e.length;n<t;n++)e+=" ";return e}(e);let t=this.getTagIndex_(e);null!==t.TAG?(this.LIST[t.LIST].subChunks[t.TAG].chunkSize=n.length+1,this.LIST[t.LIST].subChunks[t.TAG].value=n):null!==t.LIST?this.LIST[t.LIST].subChunks.push({chunkId:e,chunkSize:n.length+1,value:n}):(this.LIST.push({chunkId:"LIST",chunkSize:8+n.length+1,format:"INFO",subChunks:[]}),this.LIST[this.LIST.length-1].subChunks.push({chunkId:e,chunkSize:n.length+1,value:n}))}deleteTag(e){let n=this.getTagIndex_(e);return null!==n.TAG&&(this.LIST[n.LIST].subChunks.splice(n.TAG,1),!0)}listTags(){let e=this.getLISTIndex("INFO"),n={};if(null!==e)for(let t=0,r=this.LIST[e].subChunks.length;t<r;t++)n[this.LIST[e].subChunks[t].chunkId]=this.LIST[e].subChunks[t].value;return n}getLISTIndex(e){for(let n=0,t=this.LIST.length;n<t;n++)if(this.LIST[n].format==e)return n;return null}getTagIndex_(e){let n={LIST:null,TAG:null};for(let t=0,r=this.LIST.length;t<r;t++)if("INFO"==this.LIST[t].format){n.LIST=t;for(let r=0,a=this.LIST[t].subChunks.length;r<a;r++)if(this.LIST[t].subChunks[r].chunkId==e){n.TAG=r;break}break}return n}}class Yd extends Kd{listCuePoints(){let e=this.getCuePoints_();for(let n=0,t=e.length;n<t;n++)e[n].position=e[n].dwSampleOffset/this.fmt.sampleRate*1e3,e[n].dwSampleLength?(e[n].end=e[n].dwSampleLength/this.fmt.sampleRate*1e3,e[n].end+=e[n].position):e[n].end=null,delete e[n].value;return e}setCuePoint(e){this.cue.chunkId="cue ",e.label||(e.label="");let n=this.getCuePoints_();this.clearLISTadtl_(),this.cue.points=[],e.dwSampleOffset=e.position*this.fmt.sampleRate/1e3,e.dwSampleLength=0,e.end&&(e.dwSampleLength=e.end*this.fmt.sampleRate/1e3-e.dwSampleOffset),0===n.length?this.setCuePoint_(e,1):this.setCuePointInOrder_(n,e),this.cue.dwCuePoints=this.cue.points.length}deleteCuePoint(e){this.cue.chunkId="cue ";let n=this.getCuePoints_();this.clearLISTadtl_();let t=this.cue.points.length;this.cue.points=[];for(let r=0;r<t;r++)r+1!==e&&this.setCuePoint_(n[r],r+1);this.cue.dwCuePoints=this.cue.points.length,this.cue.dwCuePoints?this.cue.chunkId="cue ":(this.cue.chunkId="",this.clearLISTadtl_())}updateLabel(e,n){let t=this.getLISTIndex("adtl");if(null!==t)for(let r=0,a=this.LIST[t].subChunks.length;r<a;r++)this.LIST[t].subChunks[r].dwName==e&&(this.LIST[t].subChunks[r].value=n)}getCuePoints_(){let e=[];for(let n=0;n<this.cue.points.length;n++){let t=this.cue.points[n],r=this.getDataForCuePoint_(t.dwName);r.label=r.value?r.value:"",r.dwPosition=t.dwPosition,r.fccChunk=t.fccChunk,r.dwChunkStart=t.dwChunkStart,r.dwBlockStart=t.dwBlockStart,r.dwSampleOffset=t.dwSampleOffset,e.push(r)}return e}getDataForCuePoint_(e){let n=this.getLISTIndex("adtl"),t={};return null!==n&&this.getCueDataFromLIST_(t,n,e),t}getCueDataFromLIST_(e,n,t){for(let r=0,a=this.LIST[n].subChunks.length;r<a;r++)if(this.LIST[n].subChunks[r].dwName==t){let t=this.LIST[n].subChunks[r];e.value=t.value||e.value,e.dwName=t.dwName||0,e.dwSampleLength=t.dwSampleLength||0,e.dwPurposeID=t.dwPurposeID||0,e.dwCountry=t.dwCountry||0,e.dwLanguage=t.dwLanguage||0,e.dwDialect=t.dwDialect||0,e.dwCodePage=t.dwCodePage||0}}setCuePoint_(e,n){this.cue.points.push({dwName:n,dwPosition:e.dwPosition?e.dwPosition:0,fccChunk:e.fccChunk?e.fccChunk:"data",dwChunkStart:e.dwChunkStart?e.dwChunkStart:0,dwBlockStart:e.dwBlockStart?e.dwBlockStart:0,dwSampleOffset:e.dwSampleOffset}),this.setLabl_(e,n)}setCuePointInOrder_(e,n){let t=!1;for(let r=0;r<e.length;r++)e[r].dwSampleOffset>n.dwSampleOffset&&!t?(this.setCuePoint_(n,r+1),this.setCuePoint_(e[r],r+2),t=!0):this.setCuePoint_(e[r],t?r+2:r+1);t||this.setCuePoint_(n,this.cue.points.length+1)}clearLISTadtl_(){for(let e=0,n=this.LIST.length;e<n;e++)"adtl"==this.LIST[e].format&&this.LIST.splice(e)}setLabl_(e,n){let t=this.getLISTIndex("adtl");null===t&&(this.LIST.push({chunkId:"LIST",chunkSize:4,format:"adtl",subChunks:[]}),t=this.LIST.length-1),this.setLabelText_(t,e,n),e.dwSampleLength&&this.setLtxtChunk_(t,e,n)}setLabelText_(e,n,t){this.LIST[e].subChunks.push({chunkId:"labl",chunkSize:4,dwName:t,value:n.label}),this.LIST[e].chunkSize+=12}setLtxtChunk_(e,n,t){this.LIST[e].subChunks.push({chunkId:"ltxt",chunkSize:20,dwName:t,dwSampleLength:n.dwSampleLength,dwPurposeID:n.dwPurposeID||0,dwCountry:n.dwCountry||0,dwLanguage:n.dwLanguage||0,dwDialect:n.dwDialect||0,dwCodePage:n.dwCodePage||0,value:n.label}),this.LIST[e].chunkSize+=28}}class Xd{constructor(e,n,t){this.length_=e,this.scaleFactor_=(e-1)/n,this.interpolate=this.sinc,"point"===t.method?this.interpolate=this.point:"linear"===t.method?this.interpolate=this.linear:"cubic"===t.method&&(this.interpolate=this.cubic),this.tangentFactor_=1-Math.max(0,Math.min(1,t.tension||0)),this.sincFilterSize_=t.sincFilterSize||1,this.kernel_=function(e){return function(n){return function(e){if(0===e)return 1;return Math.sin(Math.PI*e)/(Math.PI*e)}(n)*e(n)}}(t.sincWindow||Jd)}point(e,n){return this.getClippedInput_(Math.round(this.scaleFactor_*e),n)}linear(e,n){e=this.scaleFactor_*e;let t=Math.floor(e);return(1-(e-=t))*this.getClippedInput_(t,n)+e*this.getClippedInput_(t+1,n)}cubic(e,n){e=this.scaleFactor_*e;let t=Math.floor(e),r=[this.getTangent_(t,n),this.getTangent_(t+1,n)],a=[this.getClippedInput_(t,n),this.getClippedInput_(t+1,n)],i=(e-=t)*e,o=e*i;return(2*o-3*i+1)*a[0]+(o-2*i+e)*r[0]+(-2*o+3*i)*a[1]+(o-i)*r[1]}sinc(e,n){e=this.scaleFactor_*e;let t=Math.floor(e),r=t-this.sincFilterSize_+1,a=t+this.sincFilterSize_,i=0;for(let o=r;o<=a;o++)i+=this.kernel_(e-o)*this.getClippedInput_(o,n);return i}getTangent_(e,n){return this.tangentFactor_*(this.getClippedInput_(e+1,n)-this.getClippedInput_(e-1,n))/2}getClippedInput_(e,n){return 0<=e&&e<this.length_?n[e]:0}}function Jd(e){return Math.exp(-e/2*e/2)}const Zd={point:!1,linear:!1,cubic:!0,sinc:!0},Qd={IIR:16,FIR:71},ep={IIR:class{constructor(e,n,t){let r=[];for(let a=0;a<e;a++)r.push(this.getCoeffs_({Fs:n,Fc:t,Q:.5/Math.sin(Math.PI/(2*e)*(a+.5))}));this.stages=[];for(let a=0;a<r.length;a++)this.stages[a]={b0:r[a].b[0],b1:r[a].b[1],b2:r[a].b[2],a1:r[a].a[0],a2:r[a].a[1],k:r[a].k,z:[0,0]}}filter(e){let n=e;for(let t=0,r=this.stages.length;t<r;t++)n=this.runStage_(t,n);return n}getCoeffs_(e){let n={a:[],b:[]},t=this.preCalc_(e,n);return n.k=1,n.b.push((1-t.cw)/(2*t.a0)),n.b.push(2*n.b[0]),n.b.push(n.b[0]),n}preCalc_(e,n){let t={},r=2*Math.PI*e.Fc/e.Fs;return t.alpha=Math.sin(r)/(2*e.Q),t.cw=Math.cos(r),t.a0=1+t.alpha,n.a0=t.a0,n.a.push(-2*t.cw/t.a0),n.k=1,n.a.push((1-t.alpha)/t.a0),t}runStage_(e,n){let t=n*this.stages[e].k-this.stages[e].a1*this.stages[e].z[0]-this.stages[e].a2*this.stages[e].z[1],r=this.stages[e].b0*t+this.stages[e].b1*this.stages[e].z[0]+this.stages[e].b2*this.stages[e].z[1];return this.stages[e].z[1]=this.stages[e].z[0],this.stages[e].z[0]=t,r}reset(){for(let e=0;e<this.stages.length;e++)this.stages[e].z=[0,0]}},FIR:class{constructor(e,n,t){let r=2*Math.PI*t/n,a=0;this.filters=[];for(let i=0;i<=e;i++)i-e/2===0?this.filters[i]=r:(this.filters[i]=Math.sin(r*(i-e/2))/(i-e/2),this.filters[i]*=.54-.46*Math.cos(2*Math.PI*i/e)),a+=this.filters[i];for(let i=0;i<=e;i++)this.filters[i]/=a;this.z=this.initZ_()}filter(e){this.z.buf[this.z.pointer]=e;let n=0;for(let t=0,r=this.z.buf.length;t<r;t++)n+=this.filters[t]*this.z.buf[(this.z.pointer+t)%this.z.buf.length];return this.z.pointer=(this.z.pointer+1)%this.z.buf.length,n}reset(){this.z=this.initZ_()}initZ_(){let e=[];for(let n=0;n<this.filters.length-1;n++)e.push(0);return{buf:e,pointer:0}}}};function np(e,n,t){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r=r||{};let a=(t-n)/n+1,i=new Float64Array(e.length*a);r.method=r.method||"cubic";let o=new Xd(e.length,i.length,{method:r.method,tension:r.tension||0,sincFilterSize:r.sincFilterSize||6,sincWindow:r.sincWindow||void 0,clip:r.clip||"mirror"});if(void 0===r.LPF&&(r.LPF=Zd[r.method]),r.LPF){r.LPFType=r.LPFType||"IIR";const a=ep[r.LPFType];if(t>n){!function(e,n,t,r){for(let a=0,i=n.length;a<i;a++)n[a]=r.filter(t.interpolate(a,e));r.reset();for(let a=n.length-1;a>=0;a--)n[a]=r.filter(n[a])}(e,i,o,new a(r.LPForder||Qd[r.LPFType],t,n/2))}else{!function(e,n,t,r){for(let a=0,i=e.length;a<i;a++)e[a]=r.filter(e[a]);r.reset();for(let a=e.length-1;a>=0;a--)e[a]=r.filter(e[a]);tp(e,n,t)}(e,i,o,new a(r.LPForder||Qd[r.LPFType],n,t/2))}}else tp(e,i,o);return i}function tp(e,n,t){for(let r=0,a=n.length;r<a;r++)n[r]=t.interpolate(r,e)}class rp extends Yd{toRIFF(){let e=new Float64Array(ap(this.data.samples.length,this.dataType.bits/8));Ld(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,e,{container:"RIFF"})}toRIFX(){let e=new Float64Array(ap(this.data.samples.length,this.dataType.bits/8));Ld(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,e,{container:"RIFX"})}toIMAADPCM(){if(8e3!==this.fmt.sampleRate)throw new Error("Only 8000 Hz files can be compressed as IMA-ADPCM.");if(1!==this.fmt.numChannels)throw new Error("Only mono files can be compressed as IMA-ADPCM.");{this.assure16Bit_();let e=new Int16Array(ap(this.data.samples.length,2));Ld(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"4",function(e){let n={index:0,predicted:0,step:7},t=new Uint8Array(e.length),r=[],a=0,i=0;for(let s=0,l=e.length;s<l;s++)s%505==0&&0!=s&&(t.set(md(r,n),a),a+=256,r=[],i++),r.push(e[s]);let o=e.length/2;return o%2&&o++,t.slice(0,o+512+4*i)}(e),{container:this.correctContainer_()})}}fromIMAADPCM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"16";this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,t={index:0,predicted:0,step:7},r=new Int16Array(2*e.length),a=[],i=0;for(let o=0,s=e.length;o<s;o++){if(o%n==0&&0!=o){let e=gd(a,t);r.set(e,i),i+=e.length,a=[]}a.push(e[o])}return r}(this.data.samples,this.fmt.blockAlign),{container:this.correctContainer_()}),"16"!=e&&this.toBitDepth(e)}toALaw(){this.assure16Bit_();let e=new Int16Array(ap(this.data.samples.length,2));Ld(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"8a",function(e){let n=new Uint8Array(e.length);for(let t=0,r=e.length;t<r;t++)n[t]=wd(e[t]);return n}(e),{container:this.correctContainer_()})}fromALaw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"16";this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",function(e){let n=new Int16Array(e.length);for(let t=0,r=e.length;t<r;t++)n[t]=Sd(e[t]);return n}(this.data.samples),{container:this.correctContainer_()}),"16"!=e&&this.toBitDepth(e)}toMuLaw(){this.assure16Bit_();let e=new Int16Array(ap(this.data.samples.length,2));Ld(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"8m",function(e){let n=new Uint8Array(e.length);for(let t=0,r=e.length;t<r;t++)n[t]=Id(e[t]);return n}(e),{container:this.correctContainer_()})}fromMuLaw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"16";this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",function(e){let n=new Int16Array(e.length);for(let t=0,r=e.length;t<r;t++)n[t]=_d(e[t]);return n}(this.data.samples),{container:this.correctContainer_()}),"16"!=e&&this.toBitDepth(e)}toBitDepth(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=e,r=this.bitDepth;n||("32f"!=e&&(t=this.dataType.bits.toString()),r=""+this.dataType.bits),this.assureUncompressed_();let a=this.getSamples(!0),i=new Float64Array(a.length);sd(a,r,i,t),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,e,i,{container:this.correctContainer_()})}toSampleRate(e,n){this.validateResample_(e);let t=this.getSamples(),r=[];if(t.constructor===Float64Array)r=np(t,this.fmt.sampleRate,e,n);else for(let a=0;a<t.length;a++)r.push(np(t[a],this.fmt.sampleRate,e,n));this.fromExisting_(this.fmt.numChannels,e,this.bitDepth,r,{container:this.correctContainer_()})}validateResample_(e){if(!Hd(this.fmt.numChannels,this.fmt.bitsPerSample,e))throw new Error("Invalid sample rate.");if(["4","8a","8m"].indexOf(this.bitDepth)>-1)throw new Error("wavefile can't change the sample rate of compressed files.")}assure16Bit_(){this.assureUncompressed_(),"16"!=this.bitDepth&&this.toBitDepth("16")}assureUncompressed_(){"8a"==this.bitDepth?this.fromALaw():"8m"==this.bitDepth?this.fromMuLaw():"4"==this.bitDepth&&this.fromIMAADPCM()}correctContainer_(){return"RF64"==this.container?"RIFF":this.container}fromExisting_(e,n,t,r,a){let i=new Yd;Object.assign(this.fmt,i.fmt),Object.assign(this.fact,i.fact),Object.assign(this.ds64,i.ds64),Object.assign(this.data,i.data),this.newWavFile_(e,n,t,r,a)}}function ap(e,n){let t=e/n;return t%2&&t++,t}class ip extends rp{constructor(e){super(),e&&this.fromBuffer(e)}fromBase64(e){this.fromBuffer(function(e){let n=new Uint8Array(256);for(let a=0;a<64;a++)n[od.charCodeAt(a)]=a;let t=.75*e.length;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);let r=new Uint8Array(t);for(let a=0,i=0;a<e.length;a+=4){let t=n[e.charCodeAt(a)],o=n[e.charCodeAt(a+1)],s=n[e.charCodeAt(a+2)],l=n[e.charCodeAt(a+3)];r[i++]=t<<2|o>>4,r[i++]=(15&o)<<4|s>>2,r[i++]=(3&s)<<6|63&l}return r}(e))}toBase64(){return function(e){let n="";for(let t=0;t<e.length;t+=3)n+=od[e[t]>>2],n+=od[(3&e[t])<<4|e[t+1]>>4],n+=od[(15&e[t+1])<<2|e[t+2]>>6],n+=od[63&e[t+2]];return e.length%3===2?n=n.substring(0,n.length-1)+"=":e.length%3===1&&(n=n.substring(0,n.length-2)+"=="),n}(this.toBuffer())}toDataURI(){return"data:audio/wav;base64,"+this.toBase64()}fromDataURI(e){this.fromBase64(e.replace("data:audio/wav;base64,",""))}}const op=(e,n)=>{const t=e.length;let r=new ip;return r.fromScratch(t,n,"32f",e.map((e=>e.map((e=>e))))),r.toBuffer()},sp=async(e,n)=>{switch(n){case"javascript":return Lc(Fi(e,"javascript"));case"assemblyscript":return ad(Fi(e,"wasm"))}},lp=(e,n,t)=>{const{channelCount:r,sampleRate:a,blockSize:i}=t,o=Math.round(n*a),s=cp("in",t),l=cp("out",t),c=cp("out",t,o);e.initialize(a,i);let u=0;for(;u<o;){e.dspLoop(s,l);for(let e=0;e<r.out;e++)c[e].set(l[e].slice(0,Math.min(i,o-u)),u);u+=i}return c},cp=(e,n,t)=>{const{channelCount:r,blockSize:a,bitDepth:i}=n;void 0===t&&(t=a);const o=xc(i),s=[];for(let l=0;l<r[e];l++)s.push(new o(Math.round(t)));return s},up={pd:{extensions:[".pd"],description:"Pure Data text"},pdJson:{extensions:[".pd.json"],description:"Pure Data JSON"},dspGraph:{extensions:[".dsp-graph.json"],description:"WebPd DSP graph"},javascript:{extensions:[".js"],description:"JavaScript WebPd module"},assemblyscript:{extensions:[".as",".ts"],description:"AssemblyScript DSP code"},wasm:{extensions:[".wasm"],description:"Web Assembly WebPd module"},wav:{extensions:[".wav"],description:"An audio preview of your patch"},app:{extensions:[],description:"Complete web app embedding your compiled WebPd patch"}},dp=["pd","pdJson","dspGraph",[["javascript","wav"],["assemblyscript","wasm","wav"],["assemblyscript","wasm","app"],["javascript","app"]]],pp=e=>{const n=Object.entries(up).filter((n=>{let[t,r]=n;return!!r.extensions.some((n=>e.endsWith(n)))}));return 0===n.length?null:n[0][0]},fp=(e,n,t)=>{let r=hp(dp,n,[]).filter((n=>n.includes(e))).map((n=>n.slice(n.indexOf(e)+1)));return t&&t!==e&&(r=r.filter((e=>e.includes(t)))),0===r.length?null:r[0]},hp=(e,n,t)=>{let r=[...t];return e.flatMap((e=>Array.isArray(e)?hp(e,n,r):(r=[...r,e],e===n?[r]:[])))},mp=(e,n)=>{let t=[...n];return e.flatMap(((n,r)=>Array.isArray(n)?mp(n,t):(t=[...t,n],r===e.length-1?[t]:[])))},gp={translateArgs:(e,n)=>{let t;if(e.args.length)t=e.args.map((e=>nu(e)-1));else{const r=new Set;n.connections.forEach((n=>{n.sink.nodeId===e.id&&r.add(n.sink.portletId)}));const a=Math.max(...r);t=[];for(let e=0;e<=a;e++)t.push(e)}return{channelMapping:t}},build:e=>({inlets:zi(e.channelMapping,((e,n)=>["".concat(n),{type:"signal",id:"".concat(n)}])),outlets:{},isPullingSignal:!0})},yp={flags:{alphaName:"dac_t"},dsp:(e,n,t)=>{let{ins:r,node:a}=e,{core:i}=n,{audio:o,target:s}=t;return Hi([a.args.channelMapping.map(((e,n)=>[e,n])).filter((e=>{let[n]=e;return 0<=n&&n<o.channelCount.out})).map((e=>{let[n,t]=e;return"javascript"===s?"".concat(i.OUTPUT,"[").concat(n,"][").concat(i.IT_FRAME,"] = ").concat(r["".concat(t)]):"".concat(i.OUTPUT,"[").concat(i.IT_FRAME," + ").concat(i.BLOCK_SIZE," * ").concat(n,"] = ").concat(r["".concat(t)])}))])}},vp={translateArgs:(e,n)=>{let t;if(e.args.length)t=e.args.map((e=>nu(e)-1));else{const r=new Set;n.connections.forEach((n=>{n.source.nodeId===e.id&&r.add(n.source.portletId)}));const a=Math.max(...r);t=[];for(let e=0;e<=a;e++)t.push(e)}return{channelMapping:t}},build:e=>({inlets:{},outlets:zi(e.channelMapping,((e,n)=>["".concat(n),{type:"signal",id:"".concat(n)}]))})},bp={flags:{alphaName:"adc_t"},dsp:(e,n,t)=>{let{outs:r,node:a}=e,{core:i}=n,{audio:o,target:s}=t;return Hi([a.args.channelMapping.map(((e,n)=>[e,n])).filter((e=>{let[n]=e;return 0<=n&&n<o.channelCount.in})).map((e=>{let[n,t]=e;return"javascript"===s?"".concat(r["".concat(t)]," = ").concat(i.INPUT,"[").concat(n,"][").concat(i.IT_FRAME,"]"):"".concat(r["".concat(t)]," = ").concat(i.INPUT,"[").concat(i.IT_FRAME," + ").concat(i.BLOCK_SIZE," * ").concat(n,"]")}))])}};var wp,Sp,xp,kp,Ip,_p,Ap,Tp,Ep;const Op={namespace:"bangUtils",code:(e,n)=>{let{ns:t}=e,{msg:a}=n;return Hi([$i(t.isBang,[Ui(a.Message,"message")],"boolean")(wp||(wp=r(["\n            return (\n                ","(message, 0) \n                && ","(message, 0) === 'bang'\n            )\n        "])),a.isStringToken,a.readStringToken),$i(t.bang,[],a.Message)(Sp||(Sp=r(["\n            ","\n            ","(message, 0, 'bang')\n            return message\n        "])),Wi(a.Message,"message","".concat(a.create,"([").concat(a.STRING_TOKEN,", 4])")),a.writeStringToken),$i(t.emptyToBang,[Ui(a.Message,"message")],a.Message)(xp||(xp=r(["\n            if (","(message) === 0) {\n                return ","()\n            } else {\n                return message\n            }\n        "])),a.getLength,t.bang)])},dependencies:[Vl]},Cp={namespace:"msgUtils",code:(e,n)=>{let{ns:t}=e,{msg:a}=n;return Hi([$i(t.slice,[Ui(a.Message,"message"),Ui("Int","start"),Ui("Int","end")],a.Message)(kp||(kp=r(["\n            if (","(message) <= start) {\n                throw new Error('message empty')\n            }\n            ","\n            ","\n            ","(message, newMessage, start, end, 0)\n            return newMessage\n        "])),a.getLength,Wi(a.Template,"template","".concat(t._copyTemplate,"(message, start, end)")),Wi(a.Message,"newMessage","".concat(a.create,"(template)")),t.copy),$i(t.concat,[Ui(a.Message,"message1"),Ui(a.Message,"message2")],a.Message)(Ip||(Ip=r(["\n            ","\n            ","(message1, newMessage, 0, ","(message1), 0)\n            ","(message2, newMessage, 0, ","(message2), ","(message1))\n            return newMessage\n        "])),Wi(a.Message,"newMessage","".concat(a.create,"(").concat(t._copyTemplate,"(message1, 0, ").concat(a.getLength,"(message1)).concat(").concat(t._copyTemplate,"(message2, 0, ").concat(a.getLength,"(message2))))")),t.copy,a.getLength,t.copy,a.getLength,a.getLength),$i(t.shift,[Ui(a.Message,"message")],a.Message)(_p||(_p=r(["\n            switch (","(message)) {\n                case 0:\n                    throw new Error('message empty')\n                case 1:\n                    return ","([])\n                default:\n                    return ","(message, 1, ","(message))\n            }\n        "])),a.getLength,a.create,t.slice,a.getLength),$i(t.copy,[Ui(a.Message,"src"),Ui(a.Message,"dest"),Ui("Int","srcStart"),Ui("Int","srcEnd"),Ui("Int","destStart")],"void")(Ap||(Ap=r(["\n            ","\n            ","\n            for (i, j; i < srcEnd; i++, j++) {\n                if (","(src, i) === ",") {\n                    ","(dest, j, ","(src, i))\n                } else {\n                    ","(dest, j, ","(src, i))\n                }\n            }\n        "])),Ui("Int","i","srcStart"),Ui("Int","j","destStart"),a.getTokenType,a.STRING_TOKEN,a.writeStringToken,a.readStringToken,a.writeFloatToken,a.readFloatToken),$i(t._copyTemplate,[Ui(a.Message,"src"),Ui("Int","start"),Ui("Int","end")],a.Template)(Tp||(Tp=r(["\n            ","\n            for (","; i < end; i++) {\n                ","\n                template.push(tokenType)\n                if (tokenType === ",") {\n                    template.push(","(src, i).length)\n                }\n            }\n            return template\n        "])),Wi(a.Template,"template","[]"),Ui("Int","i","start"),Wi("Int","tokenType","".concat(a.getTokenType,"(src, i)")),a.STRING_TOKEN,a.readStringToken)])},dependencies:[Vl]},Np={namespace:"actionUtils",code:(e,n)=>{let{ns:t}=e,{msg:a}=n;return Hi([$i(t.isAction,[Ui(a.Message,"message"),Ui("string","action")],"boolean")(Ep||(Ep=r(["\n            return ","(message, [","])\n                && ","(message, 0) === action\n        "])),a.isMatching,a.STRING_TOKEN,a.readStringToken)])},dependencies:[Vl]};var Mp;const Pp={flags:{alphaName:"samplerate_t"},messageReceivers:(e,n)=>{let{snds:t}=e,{core:a,msg:i,bangUtils:o}=n;return{0:Vi([Ui(i.Message,"m")])(Mp||(Mp=r(["\n            if (","(m)) { \n                ","(","([","])) \n                return\n            }\n        "])),o.isBang,t.$0,i.floats,a.SAMPLE_RATE)}},dependencies:[Op]};var Fp,Rp,Lp,Dp,jp;const zp={translateArgs:e=>({frequency:ru(e.args[0])||0}),build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:(e,n)=>{let{frequency:t}=n;if("0"===e)return{initialSignalValue:t}}},Bp=e=>{let{alphaName:n,coeff:t,generateOperation:a}=e;const i={flags:{alphaName:n},state:e=>{let{ns:n}=e;return Gi(n.State,[Ui("Float","phase",0),Ui("Float","step",0)])},initialization:e=>{let{ns:n,state:t}=e;return qi(Fp||(Fp=r(["\n            ","(",", 0)\n        "])),n.setStep,t)},messageReceivers:(e,n)=>{let{ns:t,state:r}=e,{msg:a}=n;return{1:hu(t.setPhase,r,a)}},dsp:e=>{let{ns:n,state:t,outs:i,ins:o}=e;return{inlets:{0:qi(Rp||(Rp=r(["","(",", ",")"])),n.setStep,t,o.$0)},loop:qi(Lp||(Lp=r(["\n                "," = ","\n                ",".phase += ",".step\n            "])),i.$0,a("".concat(t,".phase")),t,t)}},core:(e,n)=>{let{ns:a}=e,{core:i}=n;return Hi([$i(a.setStep,[Ui(a.State,"state"),Ui("Float","freq")])(Dp||(Dp=r(["\n                    state.step = ("," / ",") * freq\n                "])),t,i.SAMPLE_RATE),$i(a.setPhase,[Ui(a.State,"state"),Ui("Float","phase")])(jp||(jp=r(["\n                    state.phase = phase % 1.0","\n                "])),t?" * ".concat(t):"")])}};return i},Up={"osc~":Bp({alphaName:"osc_t",coeff:"2 * Math.PI",generateOperation:e=>"Math.cos(".concat(e,")")}),"phasor~":Bp({alphaName:"phasor_t",coeff:"1",generateOperation:e=>"".concat(e," % 1")})},Wp={"osc~":zp,"phasor~":zp};var $p;const Vp={translateArgs:e=>{let{args:n}=e;return{minValue:ru(n[0])||0,maxValue:ru(n[1])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"signal",id:"0"}}})},Gp={flags:{isPureFunction:!0,isDspInline:!0,alphaName:"clip_t"},state:e=>{let{node:{args:n},ns:t}=e;return Gi(t.State,[Ui("Float","minValue",n.minValue),Ui("Float","maxValue",n.maxValue)])},dsp:e=>{let{ins:n,state:t}=e;return qi($p||($p=r(["Math.max(Math.min(",".maxValue, ","), ",".minValue)"])),t,n.$0,t)},messageReceivers:(e,n)=>{let{state:t}=e,{msg:r}=n;return{1:pu("".concat(t,".minValue"),r),2:pu("".concat(t,".maxValue"),r)}}};var Hp,qp;const Kp={translateArgs:()=>({}),build:()=>({inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"},1:{type:"signal",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},Yp={flags:{alphaName:"samphold_t"},state:e=>{let{ns:n}=e;return Gi(n.State,[Ui("Float","signalMemory",0),Ui("Float","controlMemory",0)])},dsp:e=>{let{ins:n,outs:t,state:a}=e;return qi(Hp||(Hp=r(["\n        ",".signalMemory = "," = "," < ",".controlMemory ? ",": ",".signalMemory\n        ",".controlMemory = ","\n    "])),a,t.$0,n.$1,a,n.$0,a,a,n.$1)},messageReceivers:(e,n)=>{let{state:t}=e,{msg:a}=n;return{"0_message":Vi([Ui(a.Message,"m")],"void")(qp||(qp=r(["\n            if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ",".signalMemory = ","(m, 1)\n                return\n    \n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'reset'\n            ) {\n                ",".controlMemory = ","(m, 1)\n                return\n    \n            } else if (\n                ","(m, [","])\n                && ","(m, 0) === 'reset'\n            ) {\n                ",".controlMemory = 1e20\n                return\n            }\n        "])),a.isMatching,a.STRING_TOKEN,a.FLOAT_TOKEN,a.readStringToken,t,a.readFloatToken,a.isMatching,a.STRING_TOKEN,a.FLOAT_TOKEN,a.readStringToken,t,a.readFloatToken,a.isMatching,a.STRING_TOKEN,a.readStringToken,t)}}};var Xp,Jp;const Zp={translateArgs:()=>({}),build:()=>({inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"}},outlets:{0:{type:"message",id:"0"}},isPullingSignal:!0}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},Qp={flags:{alphaName:"snapshot_t"},state:e=>{let{ns:n}=e;return Gi(n.State,[Ui("Float","currentValue",0)])},dsp:e=>{let{ins:n,state:t}=e;return qi(Xp||(Xp=r(["\n        ",".currentValue = ","\n    "])),t,n.$0)},messageReceivers:(e,n)=>{let{state:t,snds:a}=e,{msg:i,bangUtils:o}=n;return{"0_message":Vi([Ui(i.Message,"m")],"void")(Jp||(Jp=r(["\n            if (","(m)) {\n                ","(","([",".currentValue]))\n                return \n            }\n        "])),o.isBang,a.$0,i.floats,t)}},dependencies:[Op]};var ef;var nf,tf,rf,af,of;const sf={namespace:"linesUtils",code:(e,n)=>{let{ns:t}=e,{points:a}=n;return Hi([Gi(t.LineSegment,[Ui(a.Point,"p0"),Ui(a.Point,"p1"),Ui("Float","dx"),Ui("Float","dy")]),$i(t.computeSlope,[Ui(a.Point,"p0"),Ui(a.Point,"p1")],"Float")(nf||(nf=r(["\n            return p1.x !== p0.x ? (p1.y - p0.y) / (p1.x - p0.x) : 0\n        "]))),$i(t.removePointsBeforeFrame,[Ui("Array<".concat(a.Point,">"),"points"),Ui("Float","frame")],"Array<".concat(a.Point,">"))(tf||(tf=r(["\n            ","\n            ","\n            while (i < points.length) {\n                if (frame <= points[i].x) {\n                    newPoints.push(points[i])\n                }\n                i++\n            }\n            return newPoints\n        "])),Wi("Array<".concat(a.Point,">"),"newPoints","[]"),Ui("Int","i","0")),$i(t.insertNewLinePoints,[Ui("Array<".concat(a.Point,">"),"points"),Ui(a.Point,"p0"),Ui(a.Point,"p1")],"Array<".concat(a.Point,">"))(rf||(rf=r(["\n            ","\n            ","\n            \n            // Keep the points that are before the new points added\n            while (i < points.length && points[i].x <= p0.x) {\n                newPoints.push(points[i])\n                i++\n            }\n            \n            // Find the start value of the start point :\n            \n            // 1. If there is a previous point and that previous point\n            // is on the same frame, we don't modify the start point value.\n            // (represents a vertical line).\n            if (0 < i - 1 && points[i - 1].x === p0.x) {\n\n            // 2. If new points are inserted in between already existing points \n            // we need to interpolate the existing line to find the startValue.\n            } else if (0 < i && i < points.length) {\n                newPoints.push({\n                    x: p0.x,\n                    y: ","(p0.x, points[i - 1], points[i])\n                })\n\n            // 3. If new line is inserted after all existing points, \n            // we just take the value of the last point\n            } else if (i >= points.length && points.length) {\n                newPoints.push({\n                    x: p0.x,\n                    y: points[points.length - 1].y,\n                })\n\n            // 4. If new line placed in first position, we take the defaultStartValue.\n            } else if (i === 0) {\n                newPoints.push({\n                    x: p0.x,\n                    y: p0.y,\n                })\n            }\n            \n            newPoints.push({\n                x: p1.x,\n                y: p1.y,\n            })\n            return newPoints\n        "])),Wi("Array<".concat(a.Point,">"),"newPoints","[]"),Ui("Int","i","0"),a.interpolateLin),$i(t.computeFrameAjustedPoints,[Ui("Array<".concat(a.Point,">"),"points")],"Array<".concat(a.Point,">"))(af||(af=r(["\n            if (points.length < 2) {\n                throw new Error('invalid length for points')\n            }\n\n            ","\n            ","\n            ","\n            ","\n            ","\n            \n            while(i < points.length) {\n                p = points[i]\n                frameLower = Math.floor(p.x)\n                frameUpper = frameLower + 1\n\n                // I. Placing interpolated point at the lower bound of the current frame\n                // ------------------------------------------------------------------------\n                // 1. Point is already on an exact frame,\n                if (p.x === frameLower) {\n                    newPoints.push({ x: p.x, y: p.y })\n\n                    // 1.a. if several of the next points are also on the same X,\n                    // we find the last one to draw a vertical line.\n                    while (\n                        (i + 1) < points.length\n                        && points[i + 1].x === frameLower\n                    ) {\n                        i++\n                    }\n                    if (points[i].y !== newPoints[newPoints.length - 1].y) {\n                        newPoints.push({ x: points[i].x, y: points[i].y })\n                    }\n\n                    // 1.b. if last point, we quit\n                    if (i + 1 >= points.length) {\n                        break\n                    }\n\n                    // 1.c. if next point is in a different frame we can move on to next iteration\n                    if (frameUpper <= points[i + 1].x) {\n                        i++\n                        continue\n                    }\n                \n                // 2. Point isn't on an exact frame\n                // 2.a. There's a previous point, the we use it to interpolate the value.\n                } else if (newPoints.length) {\n                    newPoints.push({\n                        x: frameLower,\n                        y: ","(frameLower, points[i - 1], p),\n                    })\n                \n                // 2.b. It's the very first point, then we don't change its value.\n                } else {\n                    newPoints.push({ x: frameLower, y: p.y })\n                }\n\n                // II. Placing interpolated point at the upper bound of the current frame\n                // ---------------------------------------------------------------------------\n                // First, we find the closest point from the frame upper bound (could be the same p).\n                // Or could be a point that is exactly placed on frameUpper.\n                while (\n                    (i + 1) < points.length \n                    && (\n                        Math.ceil(points[i + 1].x) === frameUpper\n                        || Math.floor(points[i + 1].x) === frameUpper\n                    )\n                ) {\n                    i++\n                }\n                p = points[i]\n\n                // 1. If the next point is directly in the next frame, \n                // we do nothing, as this corresponds with next iteration frameLower.\n                if (Math.floor(p.x) === frameUpper) {\n                    continue\n                \n                // 2. If there's still a point after p, we use it to interpolate the value\n                } else if (i < points.length - 1) {\n                    newPoints.push({\n                        x: frameUpper,\n                        y: ","(frameUpper, p, points[i + 1]),\n                    })\n\n                // 3. If it's the last point, we dont change the value\n                } else {\n                    newPoints.push({ x: frameUpper, y: p.y })\n                }\n\n                i++\n            }\n\n            return newPoints\n        "])),Wi("Array<".concat(a.Point,">"),"newPoints","[]"),Ui("Int","i","0"),Ui(a.Point,"p","points[0]"),Ui("Float","frameLower","0"),Ui("Float","frameUpper","0"),a.interpolateLin,a.interpolateLin),$i(t.computeLineSegments,[Ui("Array<".concat(a.Point,">"),"points")],"Array<".concat(t.LineSegment,">"))(of||(of=r(["\n            ","\n            ","\n            ","\n            ","\n\n            while(i < points.length - 1) {\n                p0 = points[i]\n                p1 = points[i + 1]\n                lineSegments.push({\n                    p0, p1, \n                    dy: ","(p0, p1),\n                    dx: 1,\n                })\n                i++\n            }\n            return lineSegments\n        "])),Wi("Array<".concat(t.LineSegment,">"),"lineSegments","[]"),Ui("Int","i","0"),Ui(a.Point,"p0"),Ui(a.Point,"p1"),t.computeSlope)])},dependencies:[{namespace:"points",code:e=>{let{ns:n}=e;return $i(n.interpolateLin,[Ui("Float","x"),Ui(n.Point,"p0"),Ui(n.Point,"p1")],"Float")(ef||(ef=r(["\n        return p0.y + (x - p0.x) * (p1.y - p0.y) / (p1.x - p0.x)\n    "])))},dependencies:[{namespace:"points",code:e=>{let{ns:n}=e;return Gi(n.Point,[Ui("Float","x"),Ui("Float","y")])}}]}]};var lf;const cf={namespace:"timing",code:()=>$i("computeUnitInSamples",[Ui("Float","sampleRate"),Ui("Float","amount"),Ui("string","unit")],"Float")(lf||(lf=r(["\n        if (unit.slice(0, 3) === 'per') {\n            if (amount !== 0) {\n                amount = 1 / amount\n            }\n            unit = unit.slice(3)\n        }\n\n        if (unit === 'msec' || unit === 'milliseconds' || unit === 'millisecond') {\n            return amount / 1000 * sampleRate\n        } else if (unit === 'sec' || unit === 'seconds' || unit === 'second') {\n            return amount * sampleRate\n        } else if (unit === 'min' || unit === 'minutes' || unit === 'minute') {\n            return amount * 60 * sampleRate\n        } else if (unit === 'samp' || unit === 'samples' || unit === 'sample') {\n            return amount\n        } else {\n            throw new Error(\"invalid time unit : \" + unit)\n        }\n    "])))};var uf,df,pf,ff,hf;const mf={flags:{alphaName:"vline_t"},state:(e,n)=>{let{ns:t}=e,{linesUtils:r,points:a}=n;return Gi(t.State,[Ui("Array<".concat(a.Point,">"),"points","[]"),Ui("Array<".concat(r.LineSegment,">"),"lineSegments","[]"),Ui("Float","currentValue",0),Ui("Float","nextDurationSamp",0),Ui("Float","nextDelaySamp",0)])},dsp:(e,n)=>{let{outs:t,state:a}=e,{core:i}=n;return qi(uf||(uf=r(["\n        if (",".lineSegments.length) {\n            if (toFloat(",") < ",".lineSegments[0].p0.x) {\n\n            // This should come first to handle vertical lines\n            } else if (toFloat(",") === ",".lineSegments[0].p1.x) {\n                ",".currentValue = ",".lineSegments[0].p1.y\n                ",".lineSegments.shift()\n\n            } else if (toFloat(",") === ",".lineSegments[0].p0.x) {\n                ",".currentValue = ",".lineSegments[0].p0.y\n\n            } else if (toFloat(",") < ",".lineSegments[0].p1.x) {\n                ",".currentValue += ",".lineSegments[0].dy\n\n            }\n        }\n        "," = ",".currentValue\n    "])),a,i.FRAME,a,i.FRAME,a,a,a,a,i.FRAME,a,a,a,i.FRAME,a,a,a,t.$0,a)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{actionUtils:i,msg:o}=n;return{0:Vi([Ui(o.Message,"m")])(df||(df=r(["\n        if (\n            ","(m, [","])\n            || ","(m, [",", ","])\n            || ","(m, [",", ",", ","])\n        ) {\n            switch (","(m)) {\n                case 3:\n                    ","(",", ","(m, 2))\n                case 2:\n                    ","(",", ","(m, 1))\n                case 1:\n                    ","(",", ","(m, 0))\n            }\n            return\n    \n        } else if (","(m, 'stop')) {\n            ",".points = []\n            ",".lineSegments = []\n            return\n        }\n        "])),o.isMatching,o.FLOAT_TOKEN,o.isMatching,o.FLOAT_TOKEN,o.FLOAT_TOKEN,o.isMatching,o.FLOAT_TOKEN,o.FLOAT_TOKEN,o.FLOAT_TOKEN,o.getLength,t.setNextDelay,a,o.readFloatToken,t.setNextDuration,a,o.readFloatToken,t.setNewLine,a,o.readFloatToken,i.isAction,a,a),1:hu(t.setNextDuration,a,o),2:hu(t.setNextDelay,a,o)}},core:(e,n)=>{let{ns:t}=e,{linesUtils:a,core:i}=n;return Hi([$i(t.setNewLine,[Ui(t.State,"state"),Ui("Float","targetValue")],"void")(pf||(pf=r(["\n                state.points = ","(state.points, toFloat(","))\n                ","\n                ","\n                if (endFrame === toFloat(",")) {\n                    state.currentValue = targetValue\n                    state.lineSegments = []\n                } else {\n                    state.points = ","(\n                        state.points, \n                        {x: startFrame, y: state.currentValue},\n                        {x: endFrame, y: targetValue}\n                    )\n                    state.lineSegments = ","(\n                        ","(state.points))\n                }\n                state.nextDurationSamp = 0\n                state.nextDelaySamp = 0\n            "])),a.removePointsBeforeFrame,i.FRAME,Wi("Float","startFrame","toFloat(".concat(i.FRAME,") + state.nextDelaySamp")),Wi("Float","endFrame","startFrame + state.nextDurationSamp"),i.FRAME,a.insertNewLinePoints,a.computeLineSegments,a.computeFrameAjustedPoints),$i(t.setNextDuration,[Ui(t.State,"state"),Ui("Float","durationMsec")],"void")(ff||(ff=r(["\n                state.nextDurationSamp = computeUnitInSamples(",", durationMsec, 'msec')\n            "])),i.SAMPLE_RATE),$i(t.setNextDelay,[Ui(t.State,"state"),Ui("Float","delayMsec")],"void")(hf||(hf=r(["\n                state.nextDelaySamp = computeUnitInSamples(",", delayMsec, 'msec')\n            "])),i.SAMPLE_RATE)])},dependencies:[sf,cf,Np]};var gf,yf,vf,bf,wf;const Sf={translateArgs:e=>{let{args:n}=e;return{initValue:ru(n[0])||0}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"signal",id:"0"}}})},xf={flags:{alphaName:"line_t"},state:(e,n)=>{let{node:{args:t},ns:r}=e,{linesUtils:a}=n;return Gi(r.State,[Ui(a.LineSegment,"currentLine",r.defaultLine),Ui("Float","currentValue",t.initValue),Ui("Float","nextDurationSamp",0)])},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{actionUtils:i,msg:o}=n;return{0:Vi([Ui(o.Message,"m")])(gf||(gf=r(["\n            if (\n                ","(m, [","])\n                || ","(m, [",", ","])\n            ) {\n                switch (","(m)) {\n                    case 2:\n                        ","(",", ","(m, 1))\n                    case 1:\n                        ","(",", ","(m, 0))\n                }\n                return\n    \n            } else if (","(m, 'stop')) {\n                ","(",")\n                return\n    \n            }\n        "])),o.isMatching,o.FLOAT_TOKEN,o.isMatching,o.FLOAT_TOKEN,o.FLOAT_TOKEN,o.getLength,t.setNextDuration,a,o.readFloatToken,t.setNewLine,a,o.readFloatToken,i.isAction,t.stop,a),1:hu(t.setNextDuration,a,o)}},dsp:(e,n)=>{let{outs:t,state:a}=e,{core:i}=n;return qi(yf||(yf=r(["\n        "," = ",".currentValue\n        if (toFloat(",") < ",".currentLine.p1.x) {\n            ",".currentValue += ",".currentLine.dy\n            if (toFloat("," + 1) >= ",".currentLine.p1.x) {\n                ",".currentValue = ",".currentLine.p1.y\n            }\n        }\n    "])),t.$0,a,i.FRAME,a,a,a,i.FRAME,a,a,a)},core:(e,n)=>{let{ns:t}=e,{linesUtils:a,core:i}=n;return Hi([Wi(a.LineSegment,t.defaultLine,"{\n                p0: {x: -1, y: 0},\n                p1: {x: -1, y: 0},\n                dx: 1,\n                dy: 0,\n            }"),$i(t.setNewLine,[Ui(t.State,"state"),Ui("Float","targetValue")],"void")(vf||(vf=r(["\n                ","\n                ","\n                if (endFrame === toFloat(",")) {\n                    state.currentLine = ","\n                    state.currentValue = targetValue\n                    state.nextDurationSamp = 0\n                } else {\n                    state.currentLine = {\n                        p0: {\n                            x: startFrame, \n                            y: state.currentValue,\n                        }, \n                        p1: {\n                            x: endFrame, \n                            y: targetValue,\n                        }, \n                        dx: 1,\n                        dy: 0,\n                    }\n                    state.currentLine.dy = ","(state.currentLine.p0, state.currentLine.p1)\n                    state.nextDurationSamp = 0\n                }\n            "])),Wi("Float","startFrame","toFloat(".concat(i.FRAME,")")),Wi("Float","endFrame","toFloat(".concat(i.FRAME,") + state.nextDurationSamp")),i.FRAME,t.defaultLine,a.computeSlope),$i(t.setNextDuration,[Ui(t.State,"state"),Ui("Float","durationMsec")],"void")(bf||(bf=r(["\n                state.nextDurationSamp = computeUnitInSamples(",", durationMsec, 'msec')\n            "])),i.SAMPLE_RATE),$i(t.stop,[Ui(t.State,"state")],"void")(wf||(wf=r(["\n                state.currentLine.p1.x = -1\n                state.currentLine.p1.y = state.currentValue\n            "])))])},dependencies:[Np,cf,sf]};var kf,If,_f,Af,Tf,Ef,Of,Cf,Nf,Mf,Pf,Ff,Rf,Lf,Df;const jf={translateArgs:e=>{let{args:n}=e;return{initValue:ru(n[0])||0,timeGrainMsec:Math.max(ru(n[1])||20,20)}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0})},zf={state:(e,n)=>{let{node:{args:t},ns:a}=e,{sked:i,msg:o,linesUtils:s}=n;return Gi(a.State,[Ui(s.LineSegment,"currentLine","{\n                p0: {x: -1, y: 0},\n                p1: {x: -1, y: 0},\n                dx: 1,\n                dy: 0,\n            }"),Ui("Float","currentValue",t.initValue),Ui("Float","nextSamp",-1),Ui("Int","nextSampInt",-1),Ui("Float","grainSamp",0),Ui("Float","nextDurationSamp",0),Ui(i.Id,"skedId",i.ID_NULL),Ui(o.Handler,"snd0",qi(kf||(kf=r(["",""])),Vi([Ui(o.Message,"m")])(If||(If=r([""]))))),Ui(i.Callback,"tickCallback",qi(_f||(_f=r(["",""])),Vi()(Af||(Af=r([""])))))])},initialization:e=>{let{ns:n,node:{args:t},state:a,snds:i}=e;return qi(Tf||(Tf=r(["\n            ","(",", ",")\n            ",".snd0 = ","\n            ",".tickCallback = ","\n        "])),n.setGrain,a,t.timeGrainMsec,a,i.$0,a,Vi()(Ef||(Ef=r(["\n                ","(",")\n            "])),n.tick,a))},messageReceivers:(e,n)=>{let{ns:t,snds:a,state:i}=e,{actionUtils:o,msg:s}=n;return{0:Vi([Ui(s.Message,"m")])(Of||(Of=r(["\n            if (\n                ","(m, [","])\n                || ","(m, [",", ","])\n                || ","(m, [",", ",", ","])\n            ) {\n                ","(",")\n                switch (","(m)) {\n                    case 3:\n                        ","(",", ","(m, 2))\n                    case 2:\n                        ","(",", ","(m, 1))\n                    case 1:\n                        ","\n                        if (",".nextDurationSamp === 0) {\n                            ",".currentValue = targetValue\n                            ","(","([targetValue]))\n                        } else {\n                            ","(","([",".currentValue]))\n                            ","(",", targetValue)\n                            ","(",", ",".currentLine.dx)\n                            ","(",")\n                        }\n                        \n                }\n                return\n    \n            } else if (","(m, 'stop')) {\n                ","(",")\n                return\n    \n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ","(",")\n                ",".currentValue = ","(m, 1)\n                return\n            }\n        "])),s.isMatching,s.FLOAT_TOKEN,s.isMatching,s.FLOAT_TOKEN,s.FLOAT_TOKEN,s.isMatching,s.FLOAT_TOKEN,s.FLOAT_TOKEN,s.FLOAT_TOKEN,t.stopCurrentLine,i,s.getLength,t.setGrain,i,s.readFloatToken,t.setNextDuration,i,s.readFloatToken,Wi("Float","targetValue","".concat(s.readFloatToken,"(m, 0)")),i,i,a.$0,s.floats,a.$0,s.floats,i,t.setNewLine,i,t.incrementTime,i,i,t.scheduleNextTick,i,o.isAction,t.stopCurrentLine,i,s.isMatching,s.STRING_TOKEN,s.FLOAT_TOKEN,s.readStringToken,t.stopCurrentLine,i,i,s.readFloatToken),1:hu(t.setNextDuration,i,s),2:hu(t.setGrain,i,s)}},core:(e,n)=>{let{ns:t}=e,{commons:a,core:i,sked:o,msg:s,linesUtils:l,points:c}=n;return Hi([$i(t.setNewLine,[Ui(t.State,"state"),Ui("Float","targetValue")],"void")(Cf||(Cf=r(["\n                state.currentLine = {\n                    p0: {\n                        x: toFloat(","), \n                        y: state.currentValue,\n                    }, \n                    p1: {\n                        x: toFloat(",") + state.nextDurationSamp, \n                        y: targetValue,\n                    }, \n                    dx: state.grainSamp\n                }\n                state.nextDurationSamp = 0\n                state.currentLine.dy = ","(state.currentLine.p0, state.currentLine.p1) * state.grainSamp\n            "])),i.FRAME,i.FRAME,l.computeSlope),$i(t.setNextDuration,[Ui(t.State,"state"),Ui("Float","durationMsec")],"void")(Nf||(Nf=r(["\n                state.nextDurationSamp = computeUnitInSamples(",", durationMsec, 'msec')\n            "])),i.SAMPLE_RATE),$i(t.setGrain,[Ui(t.State,"state"),Ui("Float","grainMsec")],"void")(Mf||(Mf=r(["\n                state.grainSamp = computeUnitInSamples(",", Math.max(grainMsec, ","), 'msec')\n            "])),i.SAMPLE_RATE,20),$i(t.stopCurrentLine,[Ui(t.State,"state")],"void")(Pf||(Pf=r(["\n                if (state.skedId !== ",") {\n                    ","(state.skedId)\n                    state.skedId = ","\n                }\n                if ("," < state.nextSampInt) {\n                    ","(state, -1 * (state.nextSamp - toFloat(",")))\n                }\n                ","(state, -1)\n            "])),o.ID_NULL,a.cancelWaitFrame,o.ID_NULL,i.FRAME,t.incrementTime,i.FRAME,t.setNextSamp),$i(t.setNextSamp,[Ui(t.State,"state"),Ui("Float","currentSamp")],"void")(Ff||(Ff=r(["\n                state.nextSamp = currentSamp\n                state.nextSampInt = toInt(Math.round(currentSamp))\n            "]))),$i(t.incrementTime,[Ui(t.State,"state"),Ui("Float","incrementSamp")],"void")(Rf||(Rf=r(["\n                if (incrementSamp === state.currentLine.dx) {\n                    state.currentValue += state.currentLine.dy\n                } else {\n                    state.currentValue += ","(\n                        incrementSamp,\n                        {x: 0, y: 0},\n                        {x: state.currentLine.dx, y: state.currentLine.dy},\n                    )\n                }\n                ","(\n                    state, \n                    (state.nextSamp !== -1 ? state.nextSamp: toFloat(",")) + incrementSamp\n                )\n            "])),c.interpolateLin,t.setNextSamp,i.FRAME),$i(t.tick,[Ui(t.State,"state")],"void")(Lf||(Lf=r(["\n                state.snd0(","([state.currentValue]))\n                if (toFloat(",") >= state.currentLine.p1.x) {\n                    state.currentValue = state.currentLine.p1.y\n                    ","(state)\n                } else {\n                    ","(state, state.currentLine.dx)\n                    ","(state)\n                }\n            "])),s.floats,i.FRAME,t.stopCurrentLine,t.incrementTime,t.scheduleNextTick),$i(t.scheduleNextTick,[Ui(t.State,"state")],"void")(Df||(Df=r(["\n                state.skedId = ","(state.nextSampInt, state.tickCallback)\n            "])),a.waitFrame)])},dependencies:[Np,cf,sf,Hs]};var Bf,Uf,Wf;const $f=440*Math.pow(2,1430/12),Vf={namespace:"funcs",code:e=>{let{ns:n}=e;return $i(n.mtof,[Ui("Float","value")],"Float")(Bf||(Bf=r(["\n        return value <= -1500 ? 0: (value > 1499 ? "," : Math.pow(2, (value - 69) / 12) * 440)\n    "])),$f)}},Gf={namespace:"funcs",code:e=>{let{ns:n}=e;return $i(n.ftom,[Ui("Float","value")],"Float")(Uf||(Uf=r(["\n        return value <= 0 ? -1500: 12 * Math.log(value / 440) / Math.LN2 + 69\n    "])))}},Hf={namespace:"funcs",code:e=>{let{ns:n}=e;return $i(n.pow,[Ui("Float","leftOp"),Ui("Float","rightOp")],"Float")(Wf||(Wf=r(["\n        return leftOp > 0 || (Math.round(rightOp) === rightOp) ? Math.pow(leftOp, rightOp): 0\n    "])))}};var qf,Kf,Yf,Xf,Jf,Zf;const Qf={translateArgs:()=>({}),build:()=>({inlets:{0:{type:"signal",id:"0"}},outlets:{0:{type:"signal",id:"0"}}})},eh={"abs~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"abs_t"},dsp:e=>{let{ins:n}=e;return qi(qf||(qf=r(["Math.abs(",")"])),n.$0)}},"cos~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"cos_t"},dsp:e=>{let{ins:n}=e;return qi(Kf||(Kf=r(["Math.cos("," * 2 * Math.PI)"])),n.$0)}},"wrap~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"wrap_t"},dsp:e=>{let{ins:n}=e;return qi(Yf||(Yf=r(["(1 + ("," % 1)) % 1"])),n.$0)}},"sqrt~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"sqrt_t"},dsp:e=>{let{ins:n}=e;return qi(Xf||(Xf=r([""," >= 0 ? Math.pow(",", 0.5): 0"])),n.$0,n.$0)}},"mtof~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"mtof_t"},dsp:(e,n)=>{let{ins:t}=e,{funcs:a}=n;return qi(Jf||(Jf=r(["","(",")"])),a.mtof,t.$0)},dependencies:[Vf]},"ftom~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"ftom_t"},dsp:(e,n)=>{let{ins:t}=e,{funcs:a}=n;return qi(Zf||(Zf=r(["","(",")"])),a.ftom,t.$0)},dependencies:[Gf]}},nh={"abs~":Qf,"cos~":Qf,"wrap~":Qf,"sqrt~":Qf,"mtof~":Qf,"ftom~":Qf};var th,rh,ah;const ih=e=>({arrayName:au(e.args[0])||""}),oh=(e,n)=>{let{sked:t,commons:a}=n;return Hi([Wi("FloatArray",e.emptyArray,"createFloatArray(1)"),$i(e.createState,[Ui("string","arrayName")],e.State)(th||(th=r(["\n            return {\n                array: ",",\n                arrayName,\n                arrayChangesSubscription: ",",\n                readPosition: 0,\n                readUntil: 0,\n                writePosition: 0,\n            }\n        "])),e.emptyArray,t.ID_NULL),$i(e.setArrayName,[Ui(e.State,"state"),Ui("string","arrayName"),Ui(t.Callback,"callback")],"void")(rh||(rh=r(["\n            if (state.arrayChangesSubscription != ",") {\n                ","(state.arrayChangesSubscription)\n            }\n            state.arrayName = arrayName\n            state.array = ","\n            ","(arrayName, callback)\n        "])),t.ID_NULL,a.cancelArrayChangesSubscription,e.emptyArray,a.subscribeArrayChanges),$i(e.prepareIndex,[Ui("Float","index"),Ui("Int","arrayLength")],"Int")(ah||(ah=r(["\n            return toInt(Math.min(\n                Math.max(\n                    0, Math.floor(index)\n                ), toFloat(arrayLength - 1)\n            ))\n        "])))])};var sh,lh,ch;const uh={translateArgs:ih,build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}})},dh={state:(e,n)=>{let{node:{args:t},ns:r}=e,{sked:a}=n;return Gi(r.State,[Ui("FloatArray","array",r.emptyArray),Ui("string","arrayName",'"'.concat(t.arrayName,'"')),Ui(a.Id,"arrayChangesSubscription",a.ID_NULL),Ui("Int","readPosition",0),Ui("Int","readUntil",0),Ui("Int","writePosition",0)])},initialization:e=>{let{ns:n,state:t}=e;return qi(sh||(sh=r(["\n        if (",".arrayName.length) {\n            ","(\n                ",", \n                ",".arrayName,\n                () => ","(",")\n            )\n        }\n    "])),t,n.setArrayName,t,t,n.setArrayNameFinalize,t)},messageReceivers:(e,n)=>{let{ns:t,snds:a,state:i}=e,{msg:o}=n;return{0:Vi([Ui(o.Message,"m")])(lh||(lh=r(["\n            if (","(m, [","])) {        \n                if (",".array.length === 0) {\n                    ","(","([0]))\n\n                } else {\n                    ","(","([",".array[\n                        ","(\n                            ","(m, 0), \n                            ",".array.length\n                        )\n                    ]]))\n                }\n                return \n\n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ","(\n                    ",", \n                    ","(m, 1),\n                    () => ","(",")\n                )\n                return\n        \n            }\n        "])),o.isMatching,o.FLOAT_TOKEN,i,a.$0,o.floats,a.$0,o.floats,i,t.prepareIndex,o.readFloatToken,i,o.isMatching,o.STRING_TOKEN,o.STRING_TOKEN,o.readStringToken,t.setArrayName,i,o.readStringToken,t.setArrayNameFinalize,i)}},core:(e,n)=>{let{ns:t}=e;const{commons:a}=n;return Hi([oh(t,n),$i(t.setArrayNameFinalize,[Ui(t.State,"state")],"void")(ch||(ch=r(["\n                state.array = ","(state.arrayName)\n            "])),a.getArray)])},dependencies:[Gs]};var ph,fh,hh,mh;const gh={translateArgs:ih,build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{}})},yh={state:(e,n)=>{let{node:{args:t},ns:r}=e,{sked:a}=n;return Gi(r.State,[Ui("FloatArray","array",r.emptyArray),Ui("string","arrayName",'"'.concat(t.arrayName,'"')),Ui(a.Id,"arrayChangesSubscription",a.ID_NULL),Ui("Int","readPosition",0),Ui("Int","readUntil",0),Ui("Int","writePosition",0)])},initialization:e=>{let{ns:n,state:t}=e;return qi(ph||(ph=r(["\n        if (",".arrayName.length) {\n            ","(\n                ",", \n                ",".arrayName,\n                () => ","(",")\n            )\n        }\n    "])),t,n.setArrayName,t,t,n.setArrayNameFinalize,t)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:i}=n;return{0:Vi([Ui(i.Message,"m")])(fh||(fh=r(["\n            if (","(m, [","])) {        \n                if (",".array.length === 0) {\n                    return\n\n                } else {\n                    ",".array[",".writePosition] = ","(m, 0)\n                    return\n                }\n\n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ","(\n                    ",", \n                    ","(m, 1),\n                    () => ","(","),\n                )\n                return\n        \n            }\n        "])),i.isMatching,i.FLOAT_TOKEN,a,a,a,i.readFloatToken,i.isMatching,i.STRING_TOKEN,i.STRING_TOKEN,i.readStringToken,t.setArrayName,a,i.readStringToken,t.setArrayNameFinalize,a),1:hu(t.setWritePosition,a,i)}},core:(e,n)=>{let{ns:t}=e;const{commons:a}=n;return Hi([oh(t,n),$i(t.setArrayNameFinalize,[Ui(t.State,"state")],"void")(hh||(hh=r(["\n                state.array = ","(state.arrayName)\n            "])),a.getArray),$i(t.setWritePosition,[Ui(t.State,"state"),Ui("Float","writePosition")],"void")(mh||(mh=r(["\n                state.writePosition = ","(writePosition, state.array.length)\n            "])),t.prepareIndex)])},dependencies:[Gs]};var vh,bh,wh,Sh,xh,kh;const Ih={translateArgs:e=>({arrayName:au(e.args[0])||""}),build:()=>({isPullingSignal:!0,inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"}},outlets:{}}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},_h={flags:{alphaName:"tabwrite_t"},state:(e,n)=>{let{node:{args:t},ns:r}=e,{sked:a}=n;return Gi(r.State,[Ui("FloatArray","array",r.emptyArray),Ui("string","arrayName",'"'.concat(t.arrayName,'"')),Ui(a.Id,"arrayChangesSubscription",a.ID_NULL),Ui("Int","writePosition",0)])},initialization:e=>{let{ns:n,state:t}=e;return qi(vh||(vh=r(["\n        if (",".arrayName.length) {\n            ","(\n                ",", \n                ",".arrayName,\n                () => ","(",")\n            )\n        }\n    "])),t,n.setArrayName,t,t,n.setArrayNameFinalize,t)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:i,bangUtils:o,actionUtils:s}=n;return{"0_message":Vi([Ui(i.Message,"m")])(bh||(bh=r(["\n            if (","(m)) {\n                ","(",", 0)\n                return \n                \n            } else if (","(m, 'stop')) {\n                ","(",")\n                return \n    \n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ","(\n                    ",",\n                    ","(m, 1),\n                    () => ","(","),\n                )\n                return\n    \n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'start'\n            ) {\n                ","(\n                    ",",\n                    toInt(","(m, 1))\n                )\n                return \n    \n            }\n        "])),o.isBang,t.start,a,s.isAction,t.stop,a,i.isMatching,i.STRING_TOKEN,i.STRING_TOKEN,i.readStringToken,t.setArrayName,a,i.readStringToken,t.setArrayNameFinalize,a,i.isMatching,i.STRING_TOKEN,i.FLOAT_TOKEN,i.readStringToken,t.start,a,i.readFloatToken)}},dsp:e=>{let{state:n,ins:t}=e;return qi(wh||(wh=r(["\n        if (",".writePosition < ",".array.length) {\n            ",".array[",".writePosition++] = ","\n        }\n    "])),n,n,n,n,t.$0)},core:(e,n)=>{let{ns:t}=e;const{commons:a}=n;return Hi([oh(t,n),$i(t.setArrayNameFinalize,[Ui(t.State,"state")],"void")(Sh||(Sh=r(["\n                state.array = ","(state.arrayName)\n                state.writePosition = state.array.length\n            "])),a.getArray),$i(t.start,[Ui(t.State,"state"),Ui("Int","writeFrom")],"void")(xh||(xh=r(["\n                state.writePosition = writeFrom\n            "]))),$i(t.stop,[Ui(t.State,"state")],"void")(kh||(kh=r(["\n                state.writePosition = state.array.length\n            "])))])},dependencies:[Gs,Np,Op]};var Ah,Th,Eh,Oh;const Ch={translateArgs:e=>({arrayName:au(e.args[0])||""}),build:()=>({inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},Nh={flags:{isDspInline:!0,alphaName:"tabread_t"},state:(e,n)=>{let{node:{args:t},ns:r}=e,{sked:a}=n;return Gi(r.State,[Ui("FloatArray","array",r.emptyArray),Ui("string","arrayName",'"'.concat(t.arrayName,'"')),Ui(a.Id,"arrayChangesSubscription",a.ID_NULL),Ui("Int","readPosition",0),Ui("Int","readUntil",0),Ui("Int","writePosition",0)])},initialization:e=>{let{ns:n,state:t}=e;return qi(Ah||(Ah=r(["\n        if (",".arrayName.length) {\n            ","(\n                ",", \n                ",".arrayName,\n                () => ","(",")\n            )\n        }\n    "])),t,n.setArrayName,t,t,n.setArrayNameFinalize,t)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:i}=n;return{"0_message":Vi([Ui(i.Message,"m")])(Th||(Th=r(["\n            if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ","(\n                    ",",\n                    ","(m, 1),\n                    () => ","(","),\n                )\n                return\n    \n            }\n        "])),i.isMatching,i.STRING_TOKEN,i.STRING_TOKEN,i.readStringToken,t.setArrayName,a,i.readStringToken,t.setArrayNameFinalize,a)}},dsp:e=>{let{ins:n,state:t}=e;return qi(Eh||(Eh=r(["",".array[toInt(Math.max(Math.min(Math.floor(","), toFloat(",".array.length - 1)), 0))]"])),t,n.$0,t)},core:(e,n)=>{let{ns:t}=e;const{commons:a}=n;return Hi([oh(t,n),$i(t.setArrayNameFinalize,[Ui(t.State,"state")],"void")(Oh||(Oh=r(["\n                state.array = ","(state.arrayName)\n            "])),a.getArray)])},dependencies:[Op,Gs,Np]},Mh={"tabread~":Ch,"tabread4~":Ch},Ph={"tabread~":Nh,"tabread4~":Nh};var Fh,Rh,Lh,Dh,jh,zh;const Bh={translateArgs:e=>({arrayName:au(e.args[0])||""}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"signal",id:"0"},1:{type:"message",id:"1"}}})},Uh={flags:{alphaName:"tabplay_t"},state:(e,n)=>{let{node:{args:t},ns:r}=e,{sked:a}=n;return Gi(r.State,[Ui("FloatArray","array",r.emptyArray),Ui("string","arrayName",'"'.concat(t.arrayName,'"')),Ui(a.Id,"arrayChangesSubscription",a.ID_NULL),Ui("Int","readPosition",0),Ui("Int","readUntil",0),Ui("Int","writePosition",0)])},initialization:e=>{let{ns:n,state:t}=e;return qi(Fh||(Fh=r(["\n        if (",".arrayName.length) {\n            ","(\n                ",", \n                ",".arrayName,\n                () => ","(",")\n            )\n        }\n    "])),t,n.setArrayName,t,t,n.setArrayNameFinalize,t)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:i,bangUtils:o,actionUtils:s}=n;return{0:Vi([Ui(i.Message,"m")])(Rh||(Rh=r(["\n            if (","(m)) {\n                ","(",", 0, ",".array.length)\n                return \n                \n            } else if (","(m, 'stop')) {\n                ","(",")\n                return \n    \n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ","(\n                    ",",\n                    ","(m, 1),\n                    () => ","(","),\n                )\n                return\n    \n            } else if (","(m, [","])) {\n                ","(\n                    ",",\n                    toInt(","(m, 0)), \n                    ",".array.length\n                )\n                return \n    \n            } else if (","(m, [",", ","])) {\n                ","\n                ","(\n                    ",",\n                    fromSample,\n                    fromSample + toInt(","(m, 1)),\n                )\n                return\n            }\n        "])),o.isBang,t.play,a,a,s.isAction,t.stop,a,i.isMatching,i.STRING_TOKEN,i.STRING_TOKEN,i.readStringToken,t.setArrayName,a,i.readStringToken,t.setArrayNameFinalize,a,i.isMatching,i.FLOAT_TOKEN,t.play,a,i.readFloatToken,a,i.isMatching,i.FLOAT_TOKEN,i.FLOAT_TOKEN,Wi("Int","fromSample","toInt(".concat(i.readFloatToken,"(m, 0))")),t.play,a,i.readFloatToken)}},dsp:(e,n)=>{let{state:t,snds:a,outs:i}=e,{bangUtils:o}=n;return qi(Lh||(Lh=r(["\n        if (",".readPosition < ",".readUntil) {\n            "," = ",".array[",".readPosition]\n            ",".readPosition++\n            if (",".readPosition >= ",".readUntil) {\n                ","(","())\n            }\n        } else {\n            "," = 0\n        }\n    "])),t,t,i.$0,t,t,t,t,t,a.$1,o.bang,i.$0)},core:(e,n)=>{let{ns:t}=e;const{commons:a}=n;return Hi([oh(t,n),$i(t.setArrayNameFinalize,[Ui(t.State,"state")],"void")(Dh||(Dh=r(["\n                state.array = ","(state.arrayName)\n                state.readPosition = state.array.length\n                state.readUntil = state.array.length\n            "])),a.getArray),$i(t.play,[Ui(t.State,"state"),Ui("Int","playFrom"),Ui("Int","playTo")],"void")(jh||(jh=r(["\n                state.readPosition = playFrom\n                state.readUntil = toInt(Math.min(\n                    toFloat(playTo), \n                    toFloat(state.array.length),\n                ))\n            "]))),$i(t.stop,[Ui(t.State,"state")],"void")(zh||(zh=r(["\n                state.readPosition = 0\n                state.readUntil = 0\n            "])))])},dependencies:[Op,Gs,Np]};var Wh,$h,Vh,Gh,Hh,qh;const Kh="buf",Yh={namespace:Kh,code:e=>{let{ns:n}=e;return Hi([Gi(n.SoundBuffer,[Ui("FloatArray","data"),Ui("Int","length"),Ui("Int","writeCursor"),Ui("Int","pullAvailableLength")]),$i(n.clear,[Ui(n.SoundBuffer,"buffer")],"void")(Wh||(Wh=r(["\n            buffer.data.fill(0)\n        "]))),$i(n.create,[Ui("Int","length")],n.SoundBuffer)($h||($h=r(["\n            return {\n                data: createFloatArray(length),\n                length: length,\n                writeCursor: 0,\n                pullAvailableLength: 0,\n            }\n        "])))])}},Xh={namespace:Kh,code:e=>{let{ns:n}=e;return Hi([$i(n.writeSample,[Ui(n.SoundBuffer,"buffer"),Ui("Float","value")],"void")(Hh||(Hh=r(["\n            buffer.data[buffer.writeCursor] = value\n            buffer.writeCursor = (buffer.writeCursor + 1) % buffer.length\n        "]))),$i(n.readSample,[Ui(n.SoundBuffer,"buffer"),Ui("Int","offset")],"Float")(qh||(qh=r(["\n            // R = (buffer.writeCursor - 1 - offset) -> ideal read position\n            // W = R % buffer.length -> wrap it so that its within buffer length bounds (but could be negative)\n            // (W + buffer.length) % buffer.length -> if W negative, (W + buffer.length) shifts it back to positive.\n            return buffer.data[(buffer.length + ((buffer.writeCursor - 1 - offset) % buffer.length)) % buffer.length]\n        "])))])},dependencies:[Yh]};var Jh,Zh,Qh,em,nm,tm,rm,am,im,om,sm,lm,cm,um,dm,pm,fm,hm,mm;const gm="fs",ym={namespace:gm,code:(e,n,t)=>{let{ns:a}=e,{msg:i}=n,{target:o}=t;const s=[];return"assemblyscript"===o&&s.push("\n                type ".concat(a.OperationId," = Int\n                type ").concat(a.OperationStatus," = Int\n                type ").concat(a.OperationCallback," = (\n                    id: ").concat(a.OperationId,", \n                    status: ").concat(a.OperationStatus,"\n                ) => void\n                type ").concat(a.OperationSoundCallback," = (\n                    id: ").concat(a.OperationId,", \n                    status: ").concat(a.OperationStatus,", \n                    sound: FloatArray[]\n                ) => void\n                type ").concat(a.Url," = string\n            ")),Hi([...s,Wi("Int",a.OPERATION_SUCCESS,(0).toString()),Wi("Int",a.OPERATION_FAILURE,1..toString()),Wi("Set<".concat(a.OperationId,">"),a._OPERATIONS_IDS,"new Set()"),Wi("Map<".concat(a.OperationId,", ").concat(a.OperationCallback,">"),a._OPERATIONS_CALLBACKS,"new Map()"),Wi("Map<".concat(a.OperationId,", ").concat(a.OperationSoundCallback,">"),a._OPERATIONS_SOUND_CALLBACKS,"new Map()"),Ui("Int",a._OPERATIONS_COUNTER,"1"),Gi(a.SoundInfo,[Ui("Int","channelCount"),Ui("Int","sampleRate"),Ui("Int","bitDepth"),Ui("string","encodingFormat"),Ui("string","endianness"),Ui("string","extraOptions")]),$i(a.soundInfoToMessage,[Ui(a.SoundInfo,"soundInfo")],i.Message)(Jh||(Jh=r(["\n                ","\n                ","(info, 0, toFloat(soundInfo.channelCount))\n                ","(info, 1, toFloat(soundInfo.sampleRate))\n                ","(info, 2, toFloat(soundInfo.bitDepth))\n                ","(info, 3, soundInfo.encodingFormat)\n                ","(info, 4, soundInfo.endianness)\n                ","(info, 5, soundInfo.extraOptions)\n                return info\n            "])),Wi(i.Message,"info","".concat(i.create,"([\n                    ").concat(i.FLOAT_TOKEN,",\n                    ").concat(i.FLOAT_TOKEN,",\n                    ").concat(i.FLOAT_TOKEN,",\n                    ").concat(i.STRING_TOKEN,",\n                    soundInfo.encodingFormat.length,\n                    ").concat(i.STRING_TOKEN,",\n                    soundInfo.endianness.length,\n                    ").concat(i.STRING_TOKEN,",\n                    soundInfo.extraOptions.length\n                ])")),i.writeFloatToken,i.writeFloatToken,i.writeFloatToken,i.writeStringToken,i.writeStringToken,i.writeStringToken),$i(a._assertOperationExists,[Ui(a.OperationId,"id"),Ui("string","operationName")],"void")(Zh||(Zh=r(["\n                if (!",".has(id)) {\n                    throw new Error(operationName + ' operation unknown : ' + id.toString())\n                }\n            "])),a._OPERATIONS_IDS),$i(a._createOperationId,[],a.OperationId)(Qh||(Qh=r(["\n                ","\n                ",".add(id)\n                return id\n            "])),Wi(a.OperationId,"id","".concat(a._OPERATIONS_COUNTER,"++")),a._OPERATIONS_IDS)])},dependencies:[Vl]},vm={namespace:gm,code:e=>{let{ns:n}=e;return Hi([$i(n.readSoundFile,[Ui(n.Url,"url"),Ui(n.SoundInfo,"soundInfo"),Ui(n.OperationSoundCallback,"callback")],n.OperationId)(em||(em=r(["\n            ","\n            ",".set(id, callback)\n            ","(id, url, ","(soundInfo))\n            return id\n        "])),Wi(n.OperationId,"id","".concat(n._createOperationId,"()")),n._OPERATIONS_SOUND_CALLBACKS,n.i_readSoundFile,n.soundInfoToMessage),$i(n.x_onReadSoundFileResponse,[Ui(n.OperationId,"id"),Ui(n.OperationStatus,"status"),Ui("FloatArray[]","sound")],"void")(nm||(nm=r(["\n            ",'(id, "','")\n            ',".delete(id)\n            // Finish cleaning before calling the callback in case it would throw an error.\n            const callback = ",".get(id)\n            callback(id, status, sound)\n            ",".delete(id)\n        "])),n._assertOperationExists,n.x_onReadSoundFileResponse,n._OPERATIONS_IDS,n._OPERATIONS_SOUND_CALLBACKS,n._OPERATIONS_SOUND_CALLBACKS)])},exports:e=>{let{ns:n}=e;return[n.x_onReadSoundFileResponse]},imports:(e,n)=>{let{ns:t}=e,{msg:a}=n;return[$i(t.i_readSoundFile,[Ui(t.OperationId,"id"),Ui(t.Url,"url"),Ui(a.Message,"info")],"void")(tm||(tm=r([""])))]},dependencies:[ym]},bm={namespace:gm,code:e=>{let{ns:n}=e;return Hi([$i(n.writeSoundFile,[Ui("FloatArray[]","sound"),Ui(n.Url,"url"),Ui(n.SoundInfo,"soundInfo"),Ui(n.OperationCallback,"callback")],n.OperationId)(rm||(rm=r(["\n            ","\n            ",".set(id, callback)\n            ","(id, sound, url, ","(soundInfo))\n            return id\n        "])),Wi(n.OperationId,"id","".concat(n._createOperationId,"()")),n._OPERATIONS_CALLBACKS,n.i_writeSoundFile,n.soundInfoToMessage),$i(n.x_onWriteSoundFileResponse,[Ui(n.OperationId,"id"),Ui(n.OperationStatus,"status")],"void")(am||(am=r(["\n            ",'(id, "','")\n            ',".delete(id)\n            // Finish cleaning before calling the callback in case it would throw an error.\n            ","\n            callback(id, status)\n            ",".delete(id)\n        "])),n._assertOperationExists,n.x_onWriteSoundFileResponse,n._OPERATIONS_IDS,Wi(n.OperationCallback,"callback","".concat(n._OPERATIONS_CALLBACKS,".get(id)")),n._OPERATIONS_CALLBACKS)])},exports:e=>{let{ns:n}=e;return[n.x_onWriteSoundFileResponse]},imports:(e,n)=>{let{ns:t}=e,{msg:a}=n;return[$i(t.i_writeSoundFile,[Ui(t.OperationId,"id"),Ui("FloatArray[]","sound"),Ui(t.Url,"url"),Ui(a.Message,"info")],"void")(im||(im=r([""])))]},dependencies:[ym]},wm={namespace:gm,code:(e,n)=>{let{ns:t}=e,{buf:a}=n;return Hi([Wi("Map<".concat(t.OperationId,", Array<").concat(a.SoundBuffer,">>"),t.SOUND_STREAM_BUFFERS,"new Map()"),Wi("Int",t._SOUND_BUFFER_LENGTH,"20 * 44100"),$i(t.closeSoundStream,[Ui(t.OperationId,"id"),Ui(t.OperationStatus,"status")],"void")(om||(om=r(["\n            if (!",".has(id)) {\n                return\n            }\n            ",".delete(id)\n            ",".get(id)(id, status)\n            ",".delete(id)\n            // Delete this last, to give the callback \n            // a chance to save a reference to the buffer\n            // If write stream, there won't be a buffer\n            if (",".has(id)) {\n                ",".delete(id)\n            }\n            ","(id, status)\n        "])),t._OPERATIONS_IDS,t._OPERATIONS_IDS,t._OPERATIONS_CALLBACKS,t._OPERATIONS_CALLBACKS,t.SOUND_STREAM_BUFFERS,t.SOUND_STREAM_BUFFERS,t.i_closeSoundStream),$i(t.x_onCloseSoundStream,[Ui(t.OperationId,"id"),Ui(t.OperationStatus,"status")],"void")(sm||(sm=r(["\n            ","(id, status)\n        "])),t.closeSoundStream)])},exports:e=>{let{ns:n}=e;return[n.x_onCloseSoundStream]},imports:e=>{let{ns:n}=e;return[$i(n.i_closeSoundStream,[Ui(n.OperationId,"id"),Ui(n.OperationStatus,"status")],"void")(lm||(lm=r([""])))]},dependencies:[Yh,ym]},Sm={namespace:gm,code:(e,n)=>{let{ns:t}=e,{buf:a}=n;return Hi([$i(t.openSoundReadStream,[Ui(t.Url,"url"),Ui(t.SoundInfo,"soundInfo"),Ui(t.OperationCallback,"callback")],t.OperationId)(cm||(cm=r(["\n            ","\n            ","\n            for (","; channel < soundInfo.channelCount; channel++) {\n                buffers.push(","(","))\n            }\n            ",".set(id, buffers)\n            ",".set(id, callback)\n            ","(id, url, ","(soundInfo))\n            return id\n        "])),Wi(t.OperationId,"id","".concat(t._createOperationId,"()")),Wi("Array<".concat(a.SoundBuffer,">"),"buffers","[]"),Ui("Int","channel","0"),a.create,t._SOUND_BUFFER_LENGTH,t.SOUND_STREAM_BUFFERS,t._OPERATIONS_CALLBACKS,t.i_openSoundReadStream,t.soundInfoToMessage),$i(t.x_onSoundStreamData,[Ui(t.OperationId,"id"),Ui("FloatArray[]","block")],"Int")(um||(um=r(["\n            ",'(id, "','")\n            const buffers = ',".get(id)\n            for (","; i < buffers.length; i++) {\n                ","(buffers[i], block[i])\n            }\n            return buffers[0].pullAvailableLength\n        "])),t._assertOperationExists,t.x_onSoundStreamData,t.SOUND_STREAM_BUFFERS,Ui("Int","i","0"),a.pushBlock)])},exports:e=>{let{ns:n}=e;return[n.x_onSoundStreamData]},imports:(e,n)=>{let{ns:t}=e,{msg:a}=n;return[$i(t.i_openSoundReadStream,[Ui(t.OperationId,"id"),Ui(t.Url,"url"),Ui(a.Message,"info")],"void")(dm||(dm=r([""])))]},dependencies:[wm,{namespace:Kh,code:e=>{let{ns:n}=e;return Hi([$i(n.pushBlock,[Ui(n.SoundBuffer,"buffer"),Ui("FloatArray","block")],"Int")(Vh||(Vh=r(["\n            if (buffer.pullAvailableLength + block.length > buffer.length) {\n                throw new Error('buffer full')\n            }\n\n            ","\n            while (left > 0) {\n                ","\n                buffer.data.set(\n                    block.subarray(\n                        block.length - left, \n                        block.length - left + lengthToWrite\n                    ), \n                    buffer.writeCursor\n                )\n                left -= lengthToWrite\n                buffer.writeCursor = (buffer.writeCursor + lengthToWrite) % buffer.length\n                buffer.pullAvailableLength += lengthToWrite\n            }\n            return buffer.pullAvailableLength\n        "])),Ui("Int","left","block.length"),Wi("Int","lengthToWrite","toInt(Math.min(\n                    toFloat(buffer.length - buffer.writeCursor), \n                    toFloat(left),\n                ))")),$i(n.pullSample,[Ui(n.SoundBuffer,"buffer")],"Float")(Gh||(Gh=r(["\n            if (buffer.pullAvailableLength <= 0) {\n                return 0\n            }\n            ","\n            buffer.pullAvailableLength -= 1\n            return buffer.data[readCursor >= 0 ? readCursor : buffer.length + readCursor]\n        "])),Wi("Int","readCursor","buffer.writeCursor - buffer.pullAvailableLength"))])},dependencies:[Yh]}]},xm={namespace:gm,code:e=>{let{ns:n}=e;return Hi([$i(n.openSoundWriteStream,[Ui(n.Url,"url"),Ui(n.SoundInfo,"soundInfo"),Ui(n.OperationCallback,"callback")],n.OperationId)(pm||(pm=r(["\n            const id = ","()\n            ",".set(id, [])\n            ",".set(id, callback)\n            ","(id, url, ","(soundInfo))\n            return id\n        "])),n._createOperationId,n.SOUND_STREAM_BUFFERS,n._OPERATIONS_CALLBACKS,n.i_openSoundWriteStream,n.soundInfoToMessage),$i(n.sendSoundStreamData,[Ui(n.OperationId,"id"),Ui("FloatArray[]","block")],"void")(fm||(fm=r(["\n            ",'(id, "','")\n            ',"(id, block)\n        "])),n._assertOperationExists,n.sendSoundStreamData,n.i_sendSoundStreamData)])},imports:(e,n)=>{let{ns:t}=e,{msg:a}=n;return[$i(t.i_openSoundWriteStream,[Ui(t.OperationId,"id"),Ui(t.Url,"url"),Ui(a.Message,"info")],"void")(hm||(hm=r([""]))),$i(t.i_sendSoundStreamData,[Ui(t.OperationId,"id"),Ui("FloatArray[]","block")],"void")(mm||(mm=r([""])))]},dependencies:[wm]};var km,Im;const _m={namespace:"soundFileOpenOpts",code:(e,n)=>{let{ns:t}=e,{msg:a,fs:i}=n;return $i(t.parse,[Ui(a.Message,"m"),Ui(i.SoundInfo,"soundInfo")],"Set<Int>")(km||(km=r(["\n            ","\n            ","\n            while (i < ","(m)) {\n                if (","(m, i)) {\n                    ","\n                    if (['-wave', '-aiff', '-caf', '-next', '-ascii'].includes(str)) {\n                        soundInfo.encodingFormat = str.slice(1)\n\n                    } else if (str === '-raw') {\n                        console.log('-raw format not yet supported')\n                        i += 4\n                        \n                    } else if (str === '-big') {\n                        soundInfo.endianness = 'b'\n\n                    } else if (str === '-little') {\n                        soundInfo.endianness = 'l'\n\n                    } else if (str === '-bytes') {\n                        if (i < ","(m) && ","(m, i + 1)) {\n                            soundInfo.bitDepth = toInt(","(m, i + 1) * 8)\n                            i++\n                        } else {\n                            console.log('failed to parse -bytes <value>')\n                        }\n\n                    } else if (str === '-rate') {\n                        if (i < ","(m) && ","(m, i + 1)) {\n                            soundInfo.sampleRate = toInt(","(m, i + 1))\n                            i++\n                        } else {\n                            console.log('failed to parse -rate <value>')\n                        }\n\n                    } else {\n                        unhandled.add(i)\n                    }\n                    \n                } else {\n                    unhandled.add(i)\n                }\n                i++\n            }\n            return unhandled\n        "])),Wi("Set<Int>","unhandled","new Set()"),Ui("Int","i","0"),a.getLength,a.isStringToken,Wi("string","str","".concat(a.readStringToken,"(m, i)")),a.getLength,a.isFloatToken,a.readFloatToken,a.getLength,a.isFloatToken,a.readFloatToken)},dependencies:[Vl,ym]},Am={namespace:"readWriteFsOpts",code:(e,n)=>{let{ns:t}=e,{msg:a,fs:i}=n;return $i(t.parse,[Ui(a.Message,"m"),Ui(i.SoundInfo,"soundInfo"),Ui("Set<Int>","unhandledOptions")],"string")(Im||(Im=r(['\n            // Remove the "open" token\n            unhandledOptions.delete(0)\n\n            ',"\n            ","\n            ","\n            ","\n            while (i < ","(m)) {\n                if (!unhandledOptions.has(i)) {\n\n                } else if (","(m, i)) {\n                    url = ","(m, i)\n                    urlFound = true\n\n                } else {\n                    console.log(\"[writesf/readsf~] invalid option index \" + i.toString())\n                    errored = true\n                }\n                i++\n            }\n            if (!urlFound) {\n                console.log(\"[writesf/readsf~] invalid options, file url not found\")\n                return ''\n            }\n            if (errored) {\n                return ''\n            }\n            return url\n        "])),Ui("string","url",'""'),Ui("boolean","urlFound","false"),Ui("boolean","errored","false"),Ui("Int","i","1"),a.getLength,a.isStringToken,a.readStringToken)},dependencies:[Vl,ym]};var Tm,Em,Om,Cm;const Nm={translateArgs:e=>({channelCount:ru(e.args[0])||1}),build:e=>({inlets:{0:{type:"message",id:"0"}},outlets:_r(_r({},zi(ji(e.channelCount),(e=>["".concat(e),{type:"signal",id:"".concat(e)}]))),{},{["".concat(e.channelCount)]:{type:"message",id:"".concat(e.channelCount)}})})},Mm={flags:{alphaName:"readsf_t"},state:(e,n)=>{let{ns:t}=e,{buf:r,fs:a}=n;return Gi(t.State,[Ui("Array<".concat(r.SoundBuffer,">"),"buffers","[]"),Ui(a.OperationId,"streamOperationId",-1),Ui("Int","readingStatus",0)])},messageReceivers:(e,n)=>{let{ns:t,node:a,state:i}=e,{actionUtils:o,msg:s}=n;return{0:Vi([Ui(s.Message,"m")])(Tm||(Tm=r(["\n            if (","(m) >= 2) {\n                if (","(m, 0) \n                    && ","(m, 0) === 'open'\n                ) {\n                    ","(\n                        ",",\n                        m,\n                        ",",\n                        ","\n                    )\n                    return\n                }\n    \n            } else if (","(m, [","])) {\n                if (","(m, 0) === 0) {\n                    ",".readingStatus = 3\n                    return\n    \n                } else {\n                    if (",".streamOperationId !== -1) {\n                        ",".readingStatus = 1\n                    } else {\n                        console.log('[readsf~] start requested without prior open')\n                    }\n                    return\n    \n                }\n                \n            } else if (","(m, 'print')) {\n                console.log('[readsf~] reading = ' + ",".readingStatus.toString())\n                return\n            }\n        "])),s.getLength,s.isStringToken,s.readStringToken,t.openStream,i,a.args.channelCount,Vi()(Em||(Em=r(["\n                            ",".streamOperationId = -1\n                            if (",".readingStatus === 1) {\n                                ",".readingStatus = 2\n                            } else {\n                                ",".readingStatus = 3\n                            }\n                        "])),i,i,i,i),s.isMatching,s.FLOAT_TOKEN,s.readFloatToken,i,i,i,o.isAction,i)}},dsp:(e,n)=>{let{state:t,snds:a,outs:i,node:{args:{channelCount:o}}}=e,{buf:s,bangUtils:l}=n;return qi(Om||(Om=r(["\n        switch(",".readingStatus) {\n            case 1: \n                ","\n                break\n                \n            case 2: \n                ","\n                if (",".buffers[0].pullAvailableLength === 0) {\n                    ","(","())\n                    ",".readingStatus = 3\n                }\n                break\n    \n            case 3: \n                ","\n                ",".readingStatus = 0\n                break\n        }\n    "])),t,ji(o).map((e=>"".concat(i[e]," = ").concat(s.pullSample,"(").concat(t,".buffers[").concat(e,"])"))),ji(o).map((e=>"".concat(i[e]," = ").concat(s.pullSample,"(").concat(t,".buffers[").concat(e,"])"))),t,a[o],l.bang,t,ji(o).map((e=>"".concat(i[e]," = 0"))),t)},core:(e,n)=>{let{ns:t}=e,{msg:a,fs:i,core:o,soundFileOpenOpts:s,readWriteFsOpts:l}=n;return Hi([$i(t.openStream,[Ui(t.State,"state"),Ui(a.Message,"m"),Ui("Int","channelCount"),Ui(i.OperationCallback,"onStreamClose")],"void")(Cm||(Cm=r(["\n                if (state.streamOperationId !== -1) {\n                    state.readingStatus = 3\n                    ","(state.streamOperationId, ",")\n                }\n        \n                ","\n                ","\n                ","\n                if (url.length === 0) {\n                    return\n                }\n                state.streamOperationId = ","(\n                    url,\n                    soundInfo,\n                    onStreamClose,\n                )\n                state.buffers = ",".get(state.streamOperationId)\n            "])),i.closeSoundStream,i.OPERATION_SUCCESS,Wi(i.SoundInfo,"soundInfo","{\n                    channelCount,\n                    sampleRate: toInt(".concat(o.SAMPLE_RATE,"),\n                    bitDepth: 32,\n                    encodingFormat: '',\n                    endianness: '',\n                    extraOptions: '',\n                }")),Wi("Set<Int>","unhandledOptions","".concat(s.parse,"(\n                    m,\n                    soundInfo,\n                )")),Wi("string","url","".concat(l.parse,"(\n                    m,\n                    soundInfo,\n                    unhandledOptions\n                )")),i.openSoundReadStream,i.SOUND_STREAM_BUFFERS)])},dependencies:[_m,Am,Op,Np,Sm]};var Pm,Fm,Rm;const Lm=220500,Dm={translateArgs:e=>({channelCount:ru(e.args[0])||1}),build:e=>{let{channelCount:n}=e;return{inlets:_r({"0_message":{type:"message",id:"0_message"}},zi(ji(n),(e=>["".concat(e),{type:"signal",id:"".concat(e)}]))),outlets:{},isPullingSignal:!0}},configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},jm={flags:{alphaName:"write_t"},state:(e,n)=>{let{node:{args:t},ns:r}=e,{fs:a}=n;return Gi(r.State,[Ui(a.OperationId,"operationId",-1),Ui("boolean","isWriting","false"),Ui("Array<FloatArray>","block","[\n                ".concat(ji(t.channelCount).map((()=>"createFloatArray(".concat(Lm,")"))).join(","),"\n            ]")),Ui("Int","cursor",0)])},dsp:e=>{let{ns:n,state:t,ins:a,node:{args:i}}=e;return qi(Pm||(Pm=r(["\n        if (",".isWriting === true) {\n            ","\n            ",".cursor++\n            if (",".cursor === ",") {\n                ","(",")\n            }\n        }\n    "])),t,ji(i.channelCount).map((e=>"".concat(t,".block[").concat(e,"][").concat(t,".cursor] = ").concat(a[e]))),t,t,Lm,n.flushBlock,t)},messageReceivers:(e,n)=>{let{ns:t,node:a,state:i}=e,{core:o,msg:s,fs:l,actionUtils:c,soundFileOpenOpts:u,readWriteFsOpts:d}=n;return{"0_message":Vi([Ui(s.Message,"m")],"void")(Fm||(Fm=r(["\n            if (","(m) >= 2) {\n                if (\n                    ","(m, 0) \n                    && ","(m, 0) === 'open'\n                ) {\n                    if (",".operationId !== -1) {\n                        ","(",".operationId, ",")\n                    }\n    \n                    ","\n                    ","\n                    ","\n                    if (url.length === 0) {\n                        return\n                    }\n                    ",".operationId = ","(\n                        url,\n                        soundInfo,\n                        () => {\n                            ","(",")\n                            ",".operationId = -1\n                        }\n                    )\n                    return\n                }\n    \n            } else if (","(m, 'start')) {\n                    ",".isWriting = true\n                    return\n    \n            } else if (","(m, 'stop')) {\n                ","(",")\n                ",".isWriting = false\n                return\n    \n            } else if (","(m, 'print')) {\n                console.log('[writesf~] writing = ' + ",".isWriting.toString())\n                return\n            }    \n        "])),s.getLength,s.isStringToken,s.readStringToken,i,l.closeSoundStream,i,l.OPERATION_SUCCESS,Wi(l.SoundInfo,"soundInfo","{\n                        channelCount: ".concat(a.args.channelCount,",\n                        sampleRate: toInt(").concat(o.SAMPLE_RATE,"),\n                        bitDepth: 32,\n                        encodingFormat: '',\n                        endianness: '',\n                        extraOptions: '',\n                    }")),Wi("Set<Int>","unhandledOptions","".concat(u.parse,"(\n                        m,\n                        soundInfo,\n                    )")),Wi("string","url","".concat(d.parse,"(\n                        m,\n                        soundInfo,\n                        unhandledOptions\n                    )")),i,l.openSoundWriteStream,t.flushBlock,i,i,c.isAction,i,c.isAction,t.flushBlock,i,i,c.isAction,i)}},core:(e,n)=>{let{ns:t}=e,{fs:a}=n;return Hi([$i(t.flushBlock,[Ui(t.State,"state")],"void")(Rm||(Rm=r(["\n                ","\n                for (","; i < state.block.length; i++) {\n                    block.push(state.block[i].subarray(0, state.cursor))\n                }\n                ","(state.operationId, block)\n                state.cursor = 0\n            "])),Wi("Array<FloatArray>","block","[]"),Ui("Int","i","0"),a.sendSoundStreamData)])},dependencies:[_m,Am,Np,xm]};var zm,Bm,Um,Wm,$m,Vm,Gm;const Hm={translateArgs:e=>{let{args:n}=e;return{frequency:ru(n[0])||0,Q:ru(n[1])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},qm={flags:{alphaName:"filters_bp_t"},state:e=>{let{node:{args:n},ns:t}=e;return Gi(t.State,[Ui("Float","frequency",n.frequency),Ui("Float","Q",n.Q),Ui("Float","coef1",0),Ui("Float","coef2",0),Ui("Float","gain",0),Ui("Float","y",0),Ui("Float","ym1",0),Ui("Float","ym2",0)])},initialization:e=>{let{ns:n,state:t}=e;return qi(zm||(zm=r(["\n        ","(",")\n    "])),n.updateCoefs,t)},dsp:e=>{let{ins:n,outs:t,state:a}=e;return qi(Bm||(Bm=r(["\n        ",".y = "," + ",".coef1 * ",".ym1 + ",".coef2 * ",".ym2\n        "," = ",".gain * ",".y\n        ",".ym2 = ",".ym1\n        ",".ym1 = ",".y\n    "])),a,n.$0,a,a,a,a,t.$0,a,a,a,a,a,a)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:i}=n;return{"0_message":Vi([Ui(i.Message,"m")],"void")(Um||(Um=r(["\n            if (\n                ","(m)\n                && ","(m, 0) === 'clear'\n            ) {\n                ","()\n                return \n            }\n        "])),i.isMatching,i.readStringToken,t.clear),1:hu(t.setFrequency,a,i),2:hu(t.setQ,a,i)}},core:(e,n)=>{let{ns:t}=e,{core:a}=n;return Hi([$i(t.updateCoefs,[Ui(t.State,"state")],"void")(Wm||(Wm=r(["\n                ","\n                ","\n                ","\n                ","\n        \n                state.coef1 = 2.0 * sigbp_qcos * r\n                state.coef2 = - r * r\n                state.gain = 2 * oneminusr * (oneminusr + r * omega)\n            "])),Ui("Float","omega","state.frequency * (2.0 * Math.PI) / ".concat(a.SAMPLE_RATE)),Ui("Float","oneminusr","state.Q < 0.001 ? 1.0 : Math.min(omega / state.Q, 1)"),Ui("Float","r","1.0 - oneminusr"),Ui("Float","sigbp_qcos","(omega >= -(0.5 * Math.PI) && omega <= 0.5 * Math.PI) ? \n                    (((Math.pow(omega, 6) * (-1.0 / 720.0) + Math.pow(omega, 4) * (1.0 / 24)) - Math.pow(omega, 2) * 0.5) + 1)\n                    : 0")),$i(t.setFrequency,[Ui(t.State,"state"),Ui("Float","frequency")],"void")($m||($m=r(["\n                state.frequency = (frequency < 0.001) ? 10: frequency\n                ","(state)\n            "])),t.updateCoefs),$i(t.setQ,[Ui(t.State,"state"),Ui("Float","Q")],"void")(Vm||(Vm=r(["\n                state.Q = Math.max(Q, 0)\n                ","(state)\n            "])),t.updateCoefs),$i(t.clear,[Ui(t.State,"state")],"void")(Gm||(Gm=r(["\n                state.ym1 = 0\n                state.ym2 = 0\n            "])))])}};var Km,Ym,Xm,Jm,Zm,Qm,eg;const ng={namespace:"sigBuses",code:e=>{let{ns:n}=e;return Hi([Wi("Map<string, Float>",n._BUSES,"new Map()"),"".concat(n._BUSES,".set('', 0)"),$i(n.addAssign,[Ui("string","busName"),Ui("Float","value")],"Float")(Km||(Km=r(["\n            ","\n            ",".set(\n                busName,\n                newValue,\n            )\n            return newValue\n        "])),Wi("Float","newValue","".concat(n._BUSES,".get(busName) + value")),n._BUSES),$i(n.set,[Ui("string","busName"),Ui("Float","value")],"void")(Ym||(Ym=r(["\n            ",".set(\n                busName,\n                value,\n            )\n        "])),n._BUSES),$i(n.reset,[Ui("string","busName")],"void")(Xm||(Xm=r(["\n            ",".set(busName, 0)\n        "])),n._BUSES),$i(n.read,[Ui("string","busName")],"Float")(Jm||(Jm=r(["\n            return ",".get(busName)\n        "])),n._BUSES)])}},tg={namespace:"msgBuses",code:(e,n)=>{let{ns:t}=e,{msg:a}=n;return Hi([Wi("Map<string, Array<".concat(a.Handler,">>"),t._BUSES,"new Map()"),$i(t.publish,[Ui("string","busName"),Ui(a.Message,"message")],"void")(Zm||(Zm=r(["\n            ","\n            ","\n            for (i = 0; i < callbacks.length; i++) {\n                callbacks[i](message)\n            }\n        "])),Ui("Int","i","0"),Wi("Array<".concat(a.Handler,">"),"callbacks","".concat(t._BUSES,".has(busName) ? ").concat(t._BUSES,".get(busName): []"))),$i(t.subscribe,[Ui("string","busName"),Ui(a.Handler,"callback")],"void")(Qm||(Qm=r(["\n            if (!",".has(busName)) {\n                ",".set(busName, [])\n            }\n            ",".get(busName).push(callback)\n        "])),t._BUSES,t._BUSES,t._BUSES),$i(t.unsubscribe,[Ui("string","busName"),Ui(a.Handler,"callback")],"void")(eg||(eg=r(["\n            if (!",".has(busName)) {\n                return\n            }\n            ","\n            ","\n            if (found !== -1) {\n                callbacks.splice(found, 1)\n            }\n        "])),t._BUSES,Wi("Array<".concat(a.Handler,">"),"callbacks","".concat(t._BUSES,".get(busName)")),Wi("Int","found","callbacks.indexOf(callback)"))])},dependencies:[Vl]};var rg,ag,ig,og,sg,lg,cg,ug;const dg={translateArgs:e=>({busName:au(e.args[0])||""}),build:()=>({inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"}},outlets:{},isPullingSignal:!0}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},pg={translateArgs:e=>({busName:au(e.args[0])||""}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"signal",id:"0"}}})},fg={translateArgs:e=>({busName:au(e.args[0])||""}),build:()=>({inlets:{0:{type:"signal",id:"0"}},outlets:{},isPullingSignal:!0})},hg={translateArgs:e=>({busName:au(e.args[0])||""}),build:()=>({inlets:{},outlets:{0:{type:"signal",id:"0"}}})},mg=(e,n)=>{let{sigBuses:t}=n;return Hi([$i(e.setBusName,[Ui(e.State,"state"),Ui("string","busName")],"void")(rg||(rg=r(["\n            if (busName.length) {\n                state.busName = busName\n                ","(state.busName)\n            }\n        "])),t.reset)])},gg={state:e=>{let{ns:n}=e;return Gi(n.State,[Ui("string","busName",'""')])},initialization:e=>{let{ns:n,node:{args:t},state:a}=e;return qi(ag||(ag=r(["\n        ","(",', "','")\n    '])),n.setBusName,a,t.busName)}},yg=_r(_r({},gg),{},{flags:{alphaName:"throw_t"},dsp:(e,n)=>{let{ins:t,state:a}=e,{sigBuses:i}=n;return qi(ig||(ig=r(["\n        ","(",".busName, ",")\n    "])),i.addAssign,a,t.$0)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:i}=n;return{"0_message":Vi([Ui(i.Message,"m")],"void")(og||(og=r(["\n            if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ","(",", ","(m, 1))\n                return\n            }\n        "])),i.isMatching,i.STRING_TOKEN,i.STRING_TOKEN,i.readStringToken,t.setBusName,a,i.readStringToken)}},core:(e,n)=>{let{ns:t}=e;return mg(t,n)},dependencies:[ng]}),vg=_r(_r({},gg),{},{flags:{alphaName:"catch_t"},dsp:(e,n)=>{let{outs:t,state:a}=e,{sigBuses:i}=n;return qi(sg||(sg=r(["\n        "," = ","(",".busName)\n        ","(",".busName)\n    "])),t.$0,i.read,a,i.reset,a)},core:(e,n)=>{let{ns:t}=e;return mg(t,n)},dependencies:[ng]}),bg=_r(_r({},gg),{},{flags:{alphaName:"send_t"},dsp:(e,n)=>{let{state:t,ins:a}=e,{sigBuses:i}=n;return qi(lg||(lg=r(["\n        ","(",".busName, ",")\n    "])),i.set,t,a.$0)},core:(e,n)=>{let{ns:t}=e;return mg(t,n)},dependencies:[ng]}),wg=_r(_r({},gg),{},{flags:{alphaName:"receive_t",isDspInline:!0},dsp:(e,n)=>{let{state:t}=e,{sigBuses:a}=n;return qi(cg||(cg=r(["","(",".busName)"])),a.read,t)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:i}=n;return{0:Vi([Ui(i.Message,"m")])(ug||(ug=r(["\n            if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ","(",", ","(m, 1))\n                return\n            }\n        "])),i.isMatching,i.STRING_TOKEN,i.STRING_TOKEN,i.readStringToken,t.setBusName,a,i.readStringToken)}},core:(e,n)=>{let{ns:t}=e;return mg(t,n)},dependencies:[ng]}),Sg={"throw~":dg,"catch~":hg,"send~":fg,"receive~":pg},xg={"throw~":yg,"catch~":vg,"send~":bg,"receive~":wg};var kg,Ig,_g,Ag,Tg,Eg,Og,Cg;const Ng={translateArgs:e=>({rate:ru(e.args[0])||0,unitAmount:ru(e.args[1])||1,unit:au(e.args[2])||"msec"}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}})},Mg={state:(e,n)=>{let{ns:t}=e,{msg:a,sked:i}=n;return Gi(t.State,[Ui("Float","rate",0),Ui("Float","sampleRatio",1),Ui("Int","skedId",i.ID_NULL),Ui("Float","realNextTick",-1),Ui(a.Handler,"snd0",Vi([Ui(a.Message,"m")])(kg||(kg=r([""])))),Ui(i.Callback,"tickCallback",Vi()(Ig||(Ig=r([""]))))])},initialization:(e,n)=>{let{ns:t,node:{args:a},state:i,snds:o}=e,{core:s}=n;return qi(_g||(_g=r(["\n            ",".snd0 = ","\n            ",".sampleRatio = computeUnitInSamples(",", ",', "','")\n            ',"(",", ",")\n            ",".tickCallback = ","\n        "])),i,o.$0,i,s.SAMPLE_RATE,a.unitAmount,a.unit,t.setRate,i,a.rate,i,Vi()(Ag||(Ag=r(["\n                ","(",")\n            "])),t.scheduleNextTick,i))},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{core:i,msg:o,bangUtils:s,actionUtils:l}=n;return{0:Vi([Ui(o.Message,"m")])(Tg||(Tg=r(["\n            if (","(m) === 1) {\n                if (\n                    (","(m, 0) && ","(m, 0) === 0)\n                    || ","(m, 'stop')\n                ) {\n                    ","(",")\n                    return\n    \n                } else if (\n                    ","(m, 0)\n                    || ","(m)\n                ) {\n                    ",".realNextTick = toFloat(",")\n                    ","(",")\n                    return\n                }\n            }\n        "])),o.getLength,o.isFloatToken,o.readFloatToken,l.isAction,t.stop,a,o.isFloatToken,s.isBang,a,i.FRAME,t.scheduleNextTick,a),1:hu(t.setRate,a,o)}},core:(e,n)=>{let{ns:t}=e,{bangUtils:a,commons:i,sked:o}=n;return Hi([$i(t.setRate,[Ui(t.State,"state"),Ui("Float","rate")],"void")(Eg||(Eg=r(["\n                state.rate = Math.max(rate, 0)\n            "]))),$i(t.scheduleNextTick,[Ui(t.State,"state")],"void")(Og||(Og=r(["\n                state.snd0(","())\n                state.realNextTick = state.realNextTick + state.rate * state.sampleRatio\n                state.skedId = ","(\n                    toInt(Math.round(state.realNextTick)), \n                    state.tickCallback,\n                )\n            "])),a.bang,i.waitFrame),$i(t.stop,[Ui(t.State,"state")],"void")(Cg||(Cg=r(["\n                if (state.skedId !== ",") {\n                    ","(state.skedId)\n                    state.skedId = ","\n                }\n                state.realNextTick = 0\n            "])),o.ID_NULL,i.cancelWaitFrame,o.ID_NULL)])},dependencies:[cf,Op,Np,Hs]};var Pg,Fg,Rg;const Lg={translateArgs:e=>({unitAmount:ru(e.args[0])||1,unit:au(e.args[1])||"msec"}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}})},Dg={state:e=>{let{ns:n}=e;return Gi(n.State,[Ui("Float","sampleRatio",0),Ui("Int","resetTime",0)])},initialization:(e,n)=>{let{node:{args:t},state:a}=e,{core:i}=n;return qi(Pg||(Pg=r(["\n            ",".sampleRatio = computeUnitInSamples(",", ",', "','")\n        '])),a,i.SAMPLE_RATE,t.unitAmount,t.unit)},messageReceivers:(e,n)=>{let{snds:t,state:a}=e,{bangUtils:i,core:o,msg:s}=n;return{0:Vi([Ui(s.Message,"m")])(Fg||(Fg=r(["\n            if (","(m)) {\n                ",".resetTime = ","\n                return\n    \n            } else if (\n                ","(m, [",", ",", ","])\n                && ","(m, 0) === 'tempo'\n            ) {\n                ",".sampleRatio = computeUnitInSamples(\n                    ",", \n                    ","(m, 1), \n                    ","(m, 2)\n                )\n                return\n            }\n        "])),i.isBang,a,o.FRAME,s.isMatching,s.STRING_TOKEN,s.FLOAT_TOKEN,s.STRING_TOKEN,s.readStringToken,a,o.SAMPLE_RATE,s.readFloatToken,s.readStringToken),1:Vi([Ui(s.Message,"m")])(Rg||(Rg=r(["\n            if (","(m)) {\n                ","(","([toFloat("," - ",".resetTime) / ",".sampleRatio]))\n                return\n            }\n        "])),i.isBang,t.$0,s.floats,o.FRAME,a,a)}},dependencies:[cf,Op]};var jg,zg,Bg,Ug,Wg;const $g={translateArgs:e=>({delay:ru(e.args[0])||0,unitAmount:ru(e.args[1])||1,unit:au(e.args[2])||"msec"}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0})},Vg={state:(e,n)=>{let{ns:t}=e,{sked:r}=n;return Gi(t.State,[Ui("Float","delay",0),Ui("Float","sampleRatio",1),Ui(r.Id,"scheduledBang",r.ID_NULL)])},initialization:(e,n)=>{let{ns:t,node:{args:a},state:i}=e,{core:o}=n;return qi(jg||(jg=r(["\n        ",".sampleRatio = computeUnitInSamples(",", ",', "','")\n        ',"(",", ",")\n    "])),i,o.SAMPLE_RATE,a.unitAmount,a.unit,t.setDelay,i,a.delay)},messageReceivers:(e,n)=>{let{ns:t,state:a,snds:i}=e,{core:o,msg:s,bangUtils:l}=n;return{0:Vi([Ui(s.Message,"m")])(zg||(zg=r(["\n            if (","(m) === 1) {\n                if (","(m, 0)) {\n                    ","\n                    if (action === 'bang' || action === 'start') {\n                        ","(\n                            ",", \n                            () => ","(","()),\n                            ",",\n                        )\n                        return\n                    } else if (action === 'stop') {\n                        ","(",")\n                        return\n                    }\n                    \n                } else if (","(m, 0)) {\n                    ","(",", ","(m, 0))\n                    ","(\n                        ",",\n                        () => ","(","()),\n                        ",",\n                    )\n                    return \n                }\n            \n            } else if (\n                ","(m, [",", ",", ","])\n                && ","(m, 0) === 'tempo'\n            ) {\n                ",".sampleRatio = computeUnitInSamples(\n                    ",", \n                    ","(m, 1), \n                    ","(m, 2)\n                )\n                return\n            }\n        "])),s.getLength,s.isStringToken,Wi("string","action","".concat(s.readStringToken,"(m, 0)")),t.scheduleDelay,a,i.$0,l.bang,o.FRAME,t.stop,a,s.isFloatToken,t.setDelay,a,s.readFloatToken,t.scheduleDelay,a,i.$0,l.bang,o.FRAME,s.isMatching,s.STRING_TOKEN,s.FLOAT_TOKEN,s.STRING_TOKEN,s.readStringToken,a,o.SAMPLE_RATE,s.readFloatToken,s.readStringToken),1:hu(t.setDelay,a,s)}},core:(e,n)=>{let{ns:t}=e,{sked:a,commons:i}=n;return Hi([$i(t.setDelay,[Ui(t.State,"state"),Ui("Float","delay")],"void")(Bg||(Bg=r(["\n                state.delay = Math.max(0, delay)\n            "]))),$i(t.scheduleDelay,[Ui(t.State,"state"),Ui(a.Callback,"callback"),Ui("Int","currentFrame")],"void")(Ug||(Ug=r(["\n                if (state.scheduledBang !== ",") {\n                    ","(state)\n                }\n                state.scheduledBang = ","(toInt(\n                    Math.round(\n                        toFloat(currentFrame) + state.delay * state.sampleRatio)),\n                    callback\n                )\n            "])),a.ID_NULL,t.stop,i.waitFrame),$i(t.stop,[Ui(t.State,"state")],"void")(Wg||(Wg=r(["\n                ","(state.scheduledBang)\n                state.scheduledBang = ","\n            "])),i.cancelWaitFrame,a.ID_NULL)])},dependencies:[cf,Op,Hs]};var Gg,Hg,qg;const Kg="empty",Yg=()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0}),Xg=(e,n)=>{let{msg:t,msgBuses:a}=n;return Hi([$i(e.setReceiveBusName,[Ui(e.State,"state"),Ui("string","busName")],"void")(Gg||(Gg=r(['\n            if (state.receiveBusName !== "','") {\n                ','(state.receiveBusName, state.messageReceiver)\n            }\n            state.receiveBusName = busName\n            if (state.receiveBusName !== "','") {\n                ',"(state.receiveBusName, state.messageReceiver)\n            }\n        "])),Kg,a.unsubscribe,Kg,a.subscribe),$i(e.setSendReceiveFromMessage,[Ui(e.State,"state"),Ui(t.Message,"m")],"boolean")(Hg||(Hg=r(["\n            if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'receive'\n            ) {\n                ","(state, ","(m, 1))\n                return true\n\n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'send'\n            ) {\n                state.sendBusName = ","(m, 1)\n                return true\n            }\n            return false\n        "])),t.isMatching,t.STRING_TOKEN,t.STRING_TOKEN,t.readStringToken,e.setReceiveBusName,t.readStringToken,t.isMatching,t.STRING_TOKEN,t.STRING_TOKEN,t.readStringToken,t.readStringToken),$i(e.defaultMessageHandler,[Ui(t.Message,"m")],"void")(qg||(qg=r([""])))])};var Jg,Zg,Qg,ey;const ny={translateArgs:e=>{let{args:[n,t,r,a,i,o]}=e;return{minValue:nu(n),maxValue:nu(t),sendBusName:au(o)||Kg,receiveBusName:au(i)||Kg,initValue:1===r?nu(a):0,outputOnLoad:!!r}},build:Yg},ty={translateArgs:e=>{let{args:[n,t,r,a,i]}=e;return{minValue:0,maxValue:nu(n),sendBusName:au(i)||Kg,receiveBusName:au(a)||Kg,initValue:1===t?nu(r):0,outputOnLoad:!!t}},build:Yg},ry=e=>{let{prepareStoreValue:n,prepareStoreValueBang:t,name:a}=e;return{flags:{alphaName:a},state:(e,n)=>{let{ns:t,node:{args:r}}=e,{msg:a}=n;return Gi(t.State,[Ui("Float","minValue",r.minValue),Ui("Float","maxValue",r.maxValue),Ui("Float","valueFloat",r.initValue),Ui(a.Message,"value","".concat(a.create,"([])")),Ui("string","receiveBusName",'"'.concat(r.receiveBusName,'"')),Ui("string","sendBusName",'"'.concat(r.sendBusName,'"')),Ui(a.Handler,"messageReceiver",t.defaultMessageHandler),Ui(a.Handler,"messageSender",t.defaultMessageHandler)])},initialization:(e,n)=>{let{ns:t,state:a,snds:i,node:{args:o}}=e,{commons:s,msg:l}=n;return qi(Jg||(Jg=r(["\n                ",".messageSender = ","\n                ",".messageReceiver = ","\n                ","(",', "','")\n    \n                ',"\n            "])),a,i.$0,a,Vi([Ui(l.Message,"m")])(Zg||(Zg=r(["\n                    ","(",", m)\n                "])),t.receiveMessage,a),t.setReceiveBusName,a,o.receiveBusName,o.outputOnLoad?"".concat(s.waitFrame,"(0, () => ").concat(i.$0,"(").concat(l.floats,"([").concat(a,".valueFloat])))"):null)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:i}=n;return{0:Vi([Ui(i.Message,"m")])(Qg||(Qg=r(["\n                ","(",", m)\n                return\n            "])),t.receiveMessage,a)}},core:(e,a)=>{let{ns:i}=e;const{msgBuses:o,bangUtils:s,msg:l}=a;return Hi([Xg(i,a),$i(i.receiveMessage,[Ui(i.State,"state"),Ui(l.Message,"m")],"void")(ey||(ey=r(["\n                    if (","(m, [","])) {\n                        ","\n                        ",'\n                        state.messageSender(outMessage)\n                        if (state.sendBusName !== "','") {\n                            ',"(state.sendBusName, outMessage)\n                        }\n                        return\n        \n                    } else if (","(m)) {\n                        ","\n                        ",'\n                        state.messageSender(outMessage)\n                        if (state.sendBusName !== "','") {\n                            ',"(state.sendBusName, outMessage)\n                        }\n                        return\n        \n                    } else if (\n                        ","(m, [",", ","]) \n                        && ","(m, 0) === 'set'\n                    ) {\n                        ","\n                        return\n                    \n                    } else if (","(state, m) === true) {\n                        return\n                    }\n                "])),l.isMatching,l.FLOAT_TOKEN,n?"state.valueFloat = ".concat(n("".concat(l.readFloatToken,"(m, 0)"))):"state.valueFloat = ".concat(l.readFloatToken,"(m, 0)"),Wi(l.Message,"outMessage","".concat(l.floats,"([state.valueFloat])")),Kg,o.publish,s.isBang,t?"state.valueFloat = ".concat(t("state.valueFloat")):null,Wi(l.Message,"outMessage","".concat(l.floats,"([state.valueFloat])")),Kg,o.publish,l.isMatching,l.STRING_TOKEN,l.FLOAT_TOKEN,l.readStringToken,n?"state.valueFloat = ".concat(n("".concat(l.readFloatToken,"(m, 1)"))):"state.valueFloat = ".concat(l.readFloatToken,"(m, 1)"),i.setSendReceiveFromMessage)])},dependencies:[Op,tg,Hs]}},ay={tgl:ry({name:"tgl",prepareStoreValueBang:e=>"".concat(e," === 0 ? state.maxValue: 0")}),nbx:ry({name:"nbx",prepareStoreValue:e=>"Math.min(Math.max(".concat(e,",state.minValue),state.maxValue)")}),hsl:ry({name:"hsl"}),vsl:ry({name:"vsl"}),hradio:ry({name:"hradio"}),vradio:ry({name:"vradio"})},iy={tgl:ty,nbx:ny,hsl:ny,vsl:ny,hradio:ty,vradio:ty};var oy,sy,ly,cy;const uy={translateArgs:e=>{let{args:[n,t,r]}=e;return{outputOnLoad:!!n,sendBusName:au(r)||Kg,receiveBusName:au(t)||Kg}},build:Yg},dy={state:(e,n)=>{let{ns:t,node:{args:r}}=e,{msg:a}=n;return Gi(t.State,[Ui(a.Message,"value","".concat(a.create,"([])")),Ui("string","receiveBusName",'"'.concat(r.receiveBusName,'"')),Ui("string","sendBusName",'"'.concat(r.sendBusName,'"')),Ui(a.Handler,"messageReceiver",t.defaultMessageHandler),Ui(a.Handler,"messageSender",t.defaultMessageHandler)])},initialization:(e,n)=>{let{ns:t,snds:a,state:i,node:{args:o}}=e,{commons:s,msg:l,bangUtils:c}=n;return qi(oy||(oy=r(["\n        ",".messageReceiver = ","\n        ",".messageSender = ","\n        ","(",', "','")\n\n        ',"\n    "])),i,Vi([Ui(l.Message,"m")])(sy||(sy=r(["\n            ","(",", m)\n        "])),t.receiveMessage,i),i,a.$0,t.setReceiveBusName,i,o.receiveBusName,o.outputOnLoad?"".concat(s.waitFrame,"(0, () => ").concat(a.$0,"(").concat(c.bang,"()))"):null)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:i}=n;return{0:Vi([Ui(i.Message,"m")])(ly||(ly=r(["\n            ","(",", m)\n            return\n        "])),t.receiveMessage,a)}},core:(e,n)=>{let{ns:t}=e;const{msg:a,msgBuses:i,bangUtils:o}=n;return Hi([Xg(t,n),$i(t.receiveMessage,[Ui(t.State,"state"),Ui(a.Message,"m")],"void")(cy||(cy=r(["\n                if (","(state, m) === true) {\n                    return\n                }\n                \n                ",'\n                state.messageSender(outMessage)\n                if (state.sendBusName !== "','") {\n                    ',"(state.sendBusName, outMessage)\n                }\n                return\n            "])),t.setSendReceiveFromMessage,Wi(a.Message,"outMessage","".concat(o.bang,"()")),Kg,i.publish)])},dependencies:[Op,tg,Hs]};var py,fy,hy,my;const gy={translateArgs:e=>{let{args:[n,t,r,a]}=e;return{sendBusName:au(a)||Kg,receiveBusName:au(r)||Kg}},build:Yg},yy=e=>{let{name:n,initValueCode:t,messageMatch:a}=e;return{flags:{alphaName:n},state:(e,n)=>{let{ns:r,node:{args:a}}=e;const{msg:i}=n;return Gi(r.State,[Ui(i.Message,"value",t(n)),Ui("string","receiveBusName",'"'.concat(a.receiveBusName,'"')),Ui("string","sendBusName",'"'.concat(a.sendBusName,'"')),Ui(i.Handler,"messageReceiver",r.defaultMessageHandler),Ui(i.Handler,"messageSender",r.defaultMessageHandler)])},initialization:(e,n)=>{let{ns:t,state:a,node:{args:i},snds:o}=e,{msg:s}=n;return qi(py||(py=r(["\n            ",".messageReceiver = ","\n            ",".messageSender = ","\n            ","(",', "','")\n        '])),a,Vi([Ui(s.Message,"m")])(fy||(fy=r(["\n                ","(",", m)\n            "])),t.receiveMessage,a),a,o.$0,t.setReceiveBusName,a,i.receiveBusName)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:i}=n;return{0:Vi([Ui(i.Message,"m")])(hy||(hy=r(["\n                ","(",", m)\n                return\n            "])),t.receiveMessage,a)}},core:(e,n)=>{let{ns:t}=e;const{msg:i,msgBuses:o,bangUtils:s,msgUtils:l}=n;return Hi([Xg(t,n),$i(t.receiveMessage,[Ui(t.State,"state"),Ui(i.Message,"m")],"void")(my||(my=r(["\n                    if (",'(m)) {\n                        state.messageSender(state.value)\n                        if (state.sendBusName !== "','") {\n                            ',"(state.sendBusName, state.value)\n                        }\n                        return\n                    \n                    } else if (\n                        ","(m, 0) === ","\n                        && ","(m, 0) === 'set'\n                    ) {\n                        ","\n                        "," \n                                state.value = setMessage    \n                                return\n                        ","\n        \n                    } else if (","(state, m) === true) {\n                        return\n                        \n                    } ",'\n                    \n                        state.value = m\n                        state.messageSender(state.value)\n                        if (state.sendBusName !== "','") {\n                            ',"(state.sendBusName, state.value)\n                        }\n                        return\n        \n                    }\n                "])),s.isBang,Kg,o.publish,i.getTokenType,i.STRING_TOKEN,i.readStringToken,Wi(i.Message,"setMessage","".concat(l.slice,"(m, 1, ").concat(i.getLength,"(m))")),a?"if (".concat(a("setMessage",n),") {"):null,a?"}":null,t.setSendReceiveFromMessage,a?"else if (".concat(a("m",n),") {"):"else {",Kg,o.publish)])},dependencies:[Op,tg,Cp]}},vy={floatatom:gy,symbolatom:gy,listbox:gy},by={floatatom:yy({name:"floatatom",initValueCode:e=>{let{msg:n}=e;return"".concat(n.floats,"([0])")},messageMatch:(e,n)=>{let{msg:t}=n;return"".concat(t.isMatching,"(").concat(e,", [").concat(t.FLOAT_TOKEN,"])")}}),symbolatom:yy({name:"symbolatom",initValueCode:e=>{let{msg:n}=e;return"".concat(n.strings,"([''])")},messageMatch:(e,n)=>{let{msg:t}=n;return"".concat(t.isMatching,"(").concat(e,", [").concat(t.STRING_TOKEN,"])")}}),listbox:yy({name:"listbox",initValueCode:e=>{let{bangUtils:n}=e;return"".concat(n.bang,"()")}})};var wy;const Sy={initialization:(e,n)=>{let{snds:t}=e,{bangUtils:a,commons:i}=n;return qi(wy||(wy=r(["","(0, () => ","(","()))"])),i.waitFrame,t.$0,a.bang)},dependencies:[Op,Hs]};var xy;const ky={namespace:"numbers",code:e=>{let{ns:n}=e;return $i(n.roundFloatAsPdInt,[Ui("Float","value")],"Float")(xy||(xy=r(["\n            return value > 0 ? Math.floor(value): Math.ceil(value)\n        "])))}};var Iy,_y,Ay,Ty;const Ey={translateArgs:e=>({value:ru(e.args[0])||0}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0})},Oy={state:e=>{let{ns:n}=e;return Gi(n.State,[Ui("Float","value",0)])},initialization:e=>{let{ns:n,node:{args:t},state:a}=e;return qi(Iy||(Iy=r(["\n            ","(",", ",")\n        "])),n.setValue,a,t.value)},messageReceivers:(e,n)=>{let{ns:t,snds:a,state:i}=e,{bangUtils:o,msg:s}=n;return{0:Vi([Ui(s.Message,"m")])(_y||(_y=r(["\n            if (","(m, [","])) {\n                ","(",", ","(m, 0))\n                ","(","([",".value]))\n                return \n\n            } else if (","(m)) {\n                ","(","([",".value]))\n                return\n                \n            }\n        "])),s.isMatching,s.FLOAT_TOKEN,t.setValue,i,s.readFloatToken,a.$0,s.floats,i,o.isBang,a.$0,s.floats,i),1:hu(t.setValue,i,s)}}},Cy={float:Ey,f:{aliasTo:"float"},int:Ey,i:{aliasTo:"int"}},Ny={float:_r(_r({},Oy),{},{core:e=>{let{ns:n}=e;return Hi([$i(n.setValue,[Ui(n.State,"state"),Ui("Float","value")],"void")(Ay||(Ay=r(["\n                state.value = value\n            "])))])},dependencies:[Op]}),int:_r(_r({},Oy),{},{core:(e,n)=>{let{ns:t}=e,{numbers:a}=n;return Hi([$i(t.setValue,[Ui(t.State,"state"),Ui("Float","value")],"void")(Ty||(Ty=r(["\n                state.value = ","(value)\n            "])),a.roundFloatAsPdInt)])},dependencies:[ky,Op]})};var My;const Py={translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}})},Fy=e=>{let{generateOperation:n,dependencies:t=[]}=e;return{messageReceivers:(e,t)=>{let{snds:a}=e;const{msg:i}=t;return{0:Vi([Ui(i.Message,"m")])(My||(My=r(["\n                    if (","(m, [","])) {\n                        ","\n                        ","(","([","]))\n                        return\n                    }\n                "])),i.isMatching,i.FLOAT_TOKEN,Wi("Float","value","".concat(i.readFloatToken,"(m, 0)")),a.$0,i.floats,n(t))}},dependencies:t}},Ry={abs:Fy({generateOperation:()=>"Math.abs(value)"}),wrap:Fy({generateOperation:()=>"(1 + (value % 1)) % 1"}),cos:Fy({generateOperation:()=>"Math.cos(value)"}),sqrt:Fy({generateOperation:()=>"value >= 0 ? Math.pow(value, 0.5): 0"}),mtof:Fy({generateOperation:e=>{let{funcs:n}=e;return"".concat(n.mtof,"(value)")},dependencies:[Vf]}),ftom:Fy({generateOperation:e=>{let{funcs:n}=e;return"".concat(n.ftom,"(value)")},dependencies:[Gf]}),rmstodb:Fy({generateOperation:()=>"value <= 0 ? 0 : 20 * Math.log(value) / Math.LN10 + 100"}),dbtorms:Fy({generateOperation:()=>"value <= 0 ? 0 : Math.exp(Math.LN10 * (value - 100) / 20)"}),powtodb:Fy({generateOperation:()=>"value <= 0 ? 0 : 10 * Math.log(value) / Math.LN10 + 100"}),dbtopow:Fy({generateOperation:()=>"value <= 0 ? 0 : Math.exp(Math.LN10 * (value - 100) / 10)"}),vu:Fy({generateOperation:()=>"value"})},Ly={abs:Py,cos:Py,wrap:Py,sqrt:Py,mtof:Py,ftom:Py,rmstodb:Py,dbtorms:Py,powtodb:Py,dbtopow:Py,vu:Py};var Dy,jy,zy,By,Uy,Wy,$y;const Vy=e=>({translateArgs:n=>{const t=ru(n.args[0]);return{value:void 0!==t?t:e}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:(e,n)=>"0"===e?{initialSignalValue:0}:"1"===e?{initialSignalValue:n.value}:void 0}),Gy={"+~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"add_t"},dsp:e=>{let{ins:n}=e;return qi(Dy||(Dy=r([""," + ",""])),n.$0,n.$1)}},"-~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"sub_t"},dsp:e=>{let{ins:n}=e;return qi(jy||(jy=r([""," - ",""])),n.$0,n.$1)}},"*~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"mul_t"},dsp:e=>{let{ins:n}=e;return qi(zy||(zy=r([""," * ",""])),n.$0,n.$1)}},"/~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"div_t"},dsp:e=>{let{ins:n}=e;return qi(By||(By=r([""," !== 0 ? "," / "," : 0"])),n.$1,n.$0,n.$1)}},"min~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"min_t"},dsp:e=>{let{ins:n}=e;return qi(Uy||(Uy=r(["Math.min(",", ",")"])),n.$0,n.$1)}},"max~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"max_t"},dsp:e=>{let{ins:n}=e;return qi(Wy||(Wy=r(["Math.max(",", ",")"])),n.$0,n.$1)}},"pow~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"pow_t"},dsp:(e,n)=>{let{ins:t}=e,{funcs:a}=n;return qi($y||($y=r(["","(",", ",")"])),a.pow,t.$0,t.$1)},dependencies:[Hf]}},Hy={"+~":Vy(0),"-~":Vy(0),"*~":Vy(0),"/~":Vy(0),"min~":Vy(0),"max~":Vy(0),"pow~":Vy(0)};var qy,Ky;const Yy={flags:{alphaName:"noise_t",isDspInline:!0},dsp:()=>qi(qy||(qy=r(["Math.random() * 2 - 1"]))),messageReceivers:(e,n)=>{let{msg:t}=n;return{0:Vi([Ui(t.Message,"m")])(Ky||(Ky=r(["\n            if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'seed'\n            ) {\n                console.log('WARNING : seed not implemented yet for [noise~]')\n                return\n            }\n        "])),t.isMatching,t.STRING_TOKEN,t.FLOAT_TOKEN,t.readStringToken)}}};var Xy,Jy,Zy,Qy;const ev={namespace:"delayBuffers",code:(e,n)=>{let{ns:t}=e,{buf:a,sked:i}=n;return Hi([Wi("Map<string, ".concat(a.SoundBuffer,">"),t._BUFFERS,"new Map()"),Wi(i.Skeduler,t._SKEDULER,"".concat(i.create,"(true)")),Wi("".concat(a.SoundBuffer),t.NULL_BUFFER,"".concat(a.create,"(1)")),$i(t.get,[Ui("string","delayName")],a.SoundBuffer)(Xy||(Xy=r(["\n            ",".get(delayName, buffer)\n        "])),t._BUFFERS),$i(t.set,[Ui("string","delayName"),Ui(a.SoundBuffer,"buffer")],"void")(Jy||(Jy=r(["\n            ",".set(delayName, buffer)\n            ","(",", delayName)\n        "])),t._BUFFERS,i.emit,t._SKEDULER),$i(t.wait,[Ui("string","delayName"),Ui(i.Callback,"callback")],"void")(Zy||(Zy=r(["\n            ","(",", delayName, callback)\n        "])),i.wait,t._SKEDULER),$i(t.delete,[Ui("string","delayName")],"void")(Qy||(Qy=r(["\n            ",".delete(delayName)\n        "])),t._BUFFERS)])},dependencies:[Yh,Rs]};var nv,tv,rv,av,iv,ov,sv,lv;const cv={translateArgs:e=>{let{args:n}=e;return{delayName:au(n[0])||"",initDelayMsec:ru(n[1])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:(e,n)=>{let{initDelayMsec:t}=n;if("0"===e)return{initialSignalValue:t}}},uv={state:(e,n)=>{let{ns:t}=e,{buf:r,delayBuffers:a}=n;return Gi(t.State,[Ui("string","delayName",'""'),Ui(r.SoundBuffer,"buffer",a.NULL_BUFFER),Ui("Float","rawOffset",0),Ui("Int","offset",0),Ui("(_: string) => void","setDelayNameCallback",t.NOOP)])},initialization:(e,n)=>{let{ns:t,node:{args:a},state:i}=e,{delayBuffers:o}=n;return qi(nv||(nv=r(["\n        ",".setDelayNameCallback = ",'\n\n        if ("','".length) {\n            ',"(",', "','", ',".setDelayNameCallback)\n        }\n    "])),i,Vi([Ui("string","_")])(tv||(tv=r(["\n            ",".buffer = ",".get(",".delayName)\n            ","(",")\n        "])),i,o._BUFFERS,i,t.updateOffset,i),a.delayName,t.setDelayName,i,a.delayName,i)},dsp:(e,n)=>{let{ns:t,state:a,outs:i,ins:o}=e,{buf:s}=n;return{inlets:{0:qi(rv||(rv=r(["","(",", ",")"])),t.setRawOffset,a,o.$0)},loop:qi(av||(av=r([""," = ","(",".buffer, ",".offset)"])),i.$0,s.readSample,a,a)}},core:(e,n)=>{let{ns:t}=e,{core:a,sked:i,delayBuffers:o}=n;return Hi([$i(t.setDelayName,[Ui(t.State,"state"),Ui("string","delayName"),Ui(i.Callback,"callback")])(iv||(iv=r(["\n                if (state.delayName.length) {\n                    state.buffer = ","\n                }\n                state.delayName = delayName\n                if (state.delayName.length) {\n                    ","(state.delayName, callback)\n                }\n            "])),o.NULL_BUFFER,o.wait),$i(t.setRawOffset,[Ui(t.State,"state"),Ui("Float","rawOffset")])(ov||(ov=r(["\n                state.rawOffset = rawOffset\n                ","(state)\n            "])),t.updateOffset),$i(t.updateOffset,[Ui(t.State,"state")])(sv||(sv=r(["\n                state.offset = toInt(Math.round(\n                    Math.min(\n                        Math.max(computeUnitInSamples(",', state.rawOffset, "msec"), 0), \n                        toFloat(state.buffer.length - 1)\n                    )\n                ))\n            '])),a.SAMPLE_RATE),$i(t.NOOP,[Ui("string","_")])(lv||(lv=r([""])))])},dependencies:[cf,ev,Xh]},dv={"delread~":cv,"delread4~":cv},pv={"delread~":_r(_r({},uv),{},{flags:{alphaName:"delread_t"}}),"delread4~":_r(_r({},uv),{},{flags:{alphaName:"delread4_t"}})};var fv,hv,mv,gv;const yv={translateArgs:e=>{let{args:n}=e;return{delayName:au(n[0])||"",maxDurationMsec:ru(n[1])||100}},build:()=>({inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"}},outlets:{},isPullingSignal:!0}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},vv={flags:{alphaName:"delwrite_t"},state:(e,n)=>{let{ns:t}=e,{buf:r,delayBuffers:a}=n;return Gi(t.State,[Ui("string","delayName",'""'),Ui(r.SoundBuffer,"buffer",a.NULL_BUFFER)])},initialization:(e,n)=>{let{ns:t,node:{args:a},state:i}=e,{buf:o,core:s}=n;return qi(fv||(fv=r(["\n        ",".buffer = ","(\n            toInt(Math.ceil(computeUnitInSamples(\n                ",", \n                ",',\n                "msec"\n            )))\n        )\n        if ("','".length) {\n            ',"(",', "','")\n        }\n    '])),i,o.create,s.SAMPLE_RATE,a.maxDurationMsec,a.delayName,t.setDelayName,i,a.delayName)},dsp:(e,n)=>{let{ins:t,state:a}=e,{buf:i}=n;return qi(hv||(hv=r(["","(",".buffer, ",")"])),i.writeSample,a,t.$0)},messageReceivers:(e,n)=>{let{state:t}=e,{buf:a,msg:i,actionUtils:o}=n;return{"0_message":Vi([Ui(i.Message,"m")],"void")(mv||(mv=r(["\n            if (","(m, 'clear')) {\n                ","(",".buffer)\n                return\n            }\n        "])),o.isAction,a.clear,t)}},core:(e,n)=>{let{ns:t}=e,{delayBuffers:a}=n;return Hi([$i(t.setDelayName,[Ui(t.State,"state"),Ui("string","delayName")],"void")(gv||(gv=r(["\n                if (state.delayName.length) {\n                    ","(state.delayName)\n                }\n                state.delayName = delayName\n                if (state.delayName.length) {\n                    ","(state.delayName, state.buffer)\n                }\n            "])),a.delete,a.set)])},dependencies:[cf,ev,Np,Xh]};var bv;const wv={translateArgs:e=>{let{args:n}=e;return{initValue:ru(n[0])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:(e,n)=>{let{initValue:t}=n;if("1"===e)return{initialSignalValue:t}}},Sv=e=>{let{generateOperation:n,alphaName:t}=e;return{flags:{alphaName:t},state:e=>{let{ns:n}=e;return Gi(n.State,[Ui("Float","lastOutput",0),Ui("Float","lastInput",0)])},dsp:e=>{let{ins:t,state:a,outs:i}=e;return qi(bv||(bv=r(["\n            ",".lastOutput = "," = ","\n            ",".lastInput = ","\n        "])),a,i.$0,n(t.$0,t.$1,"".concat(a,".lastOutput"),"".concat(a,".lastInput")),a,t.$0)}}},xv={"rpole~":wv,"rzero~":wv,"rzero_rev~":wv},kv={"rpole~":Sv({alphaName:"rpole_t",generateOperation:(e,n,t)=>"".concat(e," + ").concat(n," * ").concat(t)}),"rzero~":Sv({alphaName:"rzero_t",generateOperation:(e,n,t,r)=>"".concat(e," - ").concat(n," * ").concat(r)}),"rzero_rev~":Sv({alphaName:"rzero_rev_t",generateOperation:(e,n,t,r)=>"".concat(r," - ").concat(n," * ").concat(e)})};var Iv;const _v={translateArgs:e=>{let{args:n}=e;return{initCoeffRe:ru(n[0])||0,initCoeffIm:ru(n[1])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"},2:{type:"signal",id:"2"},3:{type:"signal",id:"3"}},outlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}}}),configureMessageToSignalConnection:(e,n)=>{let{initCoeffIm:t,initCoeffRe:r}=n;return"0"===e||"1"===e?{initialSignalValue:0}:"2"===e?{initialSignalValue:r}:"3"===e?{initialSignalValue:t}:void 0}},Av=e=>{let{generateOperationRe:n,generateOperationIm:t,alphaName:a}=e;return{flags:{alphaName:a},state:e=>{let{ns:n}=e;return Gi(n.State,[Ui("Float","lastOutputRe",0),Ui("Float","lastOutputIm",0),Ui("Float","lastInputRe",0),Ui("Float","lastInputIm",0)])},dsp:e=>{let{ins:a,state:i,outs:o}=e;return qi(Iv||(Iv=r(["\n            "," = ","\n            ",".lastOutputIm = "," = ","\n            ",".lastOutputRe    = ","\n            ",".lastInputRe = ","\n            ",".lastInputIm = ","\n        "])),o.$0,n(a.$0,a.$1,a.$2,a.$3,"".concat(i,".lastOutputRe"),"".concat(i,".lastOutputIm"),"".concat(i,".lastInputRe"),"".concat(i,".lastInputIm")),i,o.$1,t(a.$0,a.$1,a.$2,a.$3,"".concat(i,".lastOutputRe"),"".concat(i,".lastOutputIm"),"".concat(i,".lastInputRe"),"".concat(i,".lastInputIm")),i,o.$0,i,a.$0,i,a.$1)}}},Tv={"cpole~":_v,"czero~":_v},Ev={"cpole~":Av({alphaName:"cpole_t",generateOperationRe:(e,n,t,r,a,i)=>"".concat(e," + ").concat(a," * ").concat(t," - ").concat(i," * ").concat(r),generateOperationIm:(e,n,t,r,a,i)=>"".concat(n," + ").concat(a," * ").concat(r," + ").concat(i," * ").concat(t)}),"czero~":Av({alphaName:"czero_t",generateOperationRe:(e,n,t,r,a,i,o,s)=>"".concat(e," - ").concat(o," * ").concat(t," + ").concat(s," * ").concat(r),generateOperationIm:(e,n,t,r,a,i,o,s)=>"".concat(n," - ").concat(o," * ").concat(r," - ").concat(s," * ").concat(t)})};var Ov,Cv;const Nv={translateArgs:e=>{let{args:n}=e;return{initValue:ru(n[0])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:(e,n)=>{if("1"===e)return{initialSignalValue:n.initValue}}},Mv={flags:{alphaName:"hip_t"},state:e=>{let{ns:n}=e;return Gi(n.State,[Ui("Float","previous",0),Ui("Float","current",0),Ui("Float","coeff",0),Ui("Float","normal",0)])},dsp:(e,n)=>{let{ins:t,state:a,outs:i}=e,{core:o}=n;return{inlets:{1:qi(Ov||(Ov=r(["\n                ",".coeff = Math.min(Math.max(1 - "," * (2 * Math.PI) / ",", 0), 1)\n                ",".normal = 0.5 * (1 + ",".coeff)\n            "])),a,t.$1,o.SAMPLE_RATE,a,a)},loop:qi(Cv||(Cv=r(["\n            ",".current = "," + ",".coeff * ",".previous\n            "," = ",".normal * (",".current - ",".previous)\n            ",".previous = ",".current\n        "])),a,t.$0,a,a,i.$0,a,a,a,a,a)}}};var Pv,Fv,Rv;const Lv={translateArgs:e=>{let{args:n}=e;return{frequency:ru(n[0])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:(e,n)=>{if("1"===e)return{initialSignalValue:n.frequency}}},Dv={flags:{alphaName:"lop_t"},state:e=>{let{ns:n}=e;return Gi(n.State,[Ui("Float","previous",0),Ui("Float","coeff",0)])},dsp:e=>{let{ns:n,ins:t,state:a,outs:i}=e;return{inlets:{1:qi(Pv||(Pv=r(["","(",", ",")"])),n.setFreq,a,t.$1)},loop:qi(Fv||(Fv=r(["",".previous = "," = ",".coeff * "," + (1 - ",".coeff) * ",".previous"])),a,i.$0,a,t.$0,a,a)}},messageReceivers:(e,n)=>{let{ns:t,state:r}=e,{msg:a}=n;return{1:hu(t.setFreq,r,a)}},core:(e,n)=>{let{ns:t}=e,{core:a}=n;return Hi([$i(t.setFreq,[Ui(t.State,"state"),Ui("Float","freq")],"void")(Rv||(Rv=r(["\n                state.coeff = Math.max(Math.min(freq * 2 * Math.PI / ",", 1), 0)\n            "])),a.SAMPLE_RATE)])}};var jv,zv,Bv,Uv,Wv;const $v={translateArgs:e=>{let{args:n}=e;return{frequency:ru(n[0])||0,Q:ru(n[1])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}}})},Vv={flags:{alphaName:"vcf_t"},state:e=>{let{node:{args:n},ns:t}=e;return Gi(t.State,[Ui("Float","frequency",n.frequency),Ui("Float","Q",n.Q),Ui("Float","coef1",0),Ui("Float","coef2",0),Ui("Float","gain",0),Ui("Float","y",0),Ui("Float","ym1",0),Ui("Float","ym2",0)])},dsp:e=>{let{ns:n,ins:t,outs:a,state:i}=e;return{inlets:{1:qi(jv||(jv=r(["\n                ","(",", ",")\n            "])),n.setFrequency,i,t.$1)},loop:qi(zv||(zv=r(["\n            ",".y = "," + ",".coef1 * ",".ym1 + ",".coef2 * ",".ym2\n            "," = "," = ",".gain * ",".y\n            ",".ym2 = ",".ym1\n            ",".ym1 = ",".y\n        "])),i,t.$0,i,i,i,i,a.$1,a.$0,i,i,i,i,i,i)}},messageReceivers:(e,n)=>{let{ns:t,state:r}=e,{msg:a}=n;return{2:hu(t.setQ,r,a)}},core:(e,n)=>{let{ns:t}=e,{core:a}=n;return Hi([$i(t.updateCoefs,[Ui(t.State,"state")],"void")(Bv||(Bv=r(["\n                ","\n                ","\n                ","\n                ","\n        \n                state.coef1 = 2.0 * sigbp_qcos * r\n                state.coef2 = - r * r\n                state.gain = 2 * oneminusr * (oneminusr + r * omega)\n            "])),Ui("Float","omega","state.frequency * (2.0 * Math.PI) / ".concat(a.SAMPLE_RATE)),Ui("Float","oneminusr","state.Q < 0.001 ? 1.0 : Math.min(omega / state.Q, 1)"),Ui("Float","r","1.0 - oneminusr"),Ui("Float","sigbp_qcos","(omega >= -(0.5 * Math.PI) && omega <= 0.5 * Math.PI) ? \n                    (((Math.pow(omega, 6) * (-1.0 / 720.0) + Math.pow(omega, 4) * (1.0 / 24)) - Math.pow(omega, 2) * 0.5) + 1)\n                    : 0")),$i(t.setFrequency,[Ui(t.State,"state"),Ui("Float","frequency")],"void")(Uv||(Uv=r(["\n                state.frequency = (frequency < 0.001) ? 10: frequency\n                ","(state)\n            "])),t.updateCoefs),$i(t.setQ,[Ui(t.State,"state"),Ui("Float","Q")],"void")(Wv||(Wv=r(["\n                state.Q = Math.max(Q, 0)\n                ","(state)\n            "])),t.updateCoefs)])}};var Gv,Hv,qv,Kv,Yv,Xv,Jv,Zv,Qv,eb,nb,tb,rb,ab,ib,ob;const sb={skipDollarArgsResolution:!0,translateArgs:e=>{let{args:n}=e;const t=[{tokens:[],send:null}];let r=0,a=null;for(;r<n.length;){const e=n[r++];if(","===e||";"===e){if(r===n.length)continue;if(";"===e){let e=n[r++];if("string"!==typeof e)throw new Error('Expected a string after ";" from [msg( with args ['.concat(n.join(" "),"]"));a=e}t.push({tokens:[],send:a})}else t[t.length-1].tokens.push(e)}return{msgSpecs:t.filter((e=>e.tokens.length)).map((e=>("symbol"===e.tokens[0]&&(e.tokens=["string"===typeof e.tokens[1]?e.tokens[1]:""]),e)))}},build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}})},lb={state:e=>{let{ns:n}=e;return Gi(n.State,[Ui("Array<".concat(n.TokenSpec,">"),"msgSpecs","[]")])},initialization:(e,n)=>{const{node:{args:t},state:a}=e,{msg:i}=n,o=t.msgSpecs.map(((t,r)=>cb(e,n,t,r)));return qi(Gv||(Gv=r(["\n            ",".msgSpecs = [\n                ","\n            ]\n\n            ","\n        "])),a,o.map(((e,n)=>{let{isStaticMsg:o,code:s}=e;return qi(Hv||(Hv=r(["\n                    {\n                        transferFunction: ",",\n                        outTemplate: [],\n                        outMessage: ",",\n                        send: ",",\n                        hasSend: ",",\n                    },"])),Vi([Ui(i.Message,"inMessage")],i.Message)(qv||(qv=r(["\n                            ","\n                            return ",".msgSpecs[","].outMessage\n                        "])),o?null:s,a,n),i.EMPTY_MESSAGE,t.msgSpecs[n].send?'"'.concat(t.msgSpecs[n].send,'"'):'""',t.msgSpecs[n].send?"true":"false")})),o.filter((e=>{let{isStaticMsg:n}=e;return n})).map((e=>{let{code:n}=e;return n})))},messageReceivers:(e,n)=>{let{snds:t,state:a}=e,{msg:i,msgBuses:o}=n;return{0:Vi([Ui(i.Message,"m")])(Kv||(Kv=r(["\n                if (\n                    ","(m, 0) \n                    && ","(m, 0) === 'set'\n                ) {\n                    ","\n                    for (","; i < ","(m); i++) {\n                        if (","(m, i)) {\n                            outTemplate.push(",")\n                        } else {\n                            outTemplate.push(",")\n                            outTemplate.push(","(m, i).length)\n                        }\n                    }\n\n                    ","\n                    for (","; i < ","(m); i++) {\n                        if (","(m, i)) {\n                            ","(\n                                outMessage, i - 1, ","(m, i)\n                            )\n                        } else {\n                            ","(\n                                outMessage, i - 1, ","(m, i)\n                            )\n                        }\n                    }\n\n                    ",".msgSpecs.splice(0, ",".msgSpecs.length - 1)\n                    ",".msgSpecs[0] = {\n                        transferFunction: ",',\n                        outTemplate: outTemplate,\n                        outMessage: outMessage,\n                        send: "",\n                        hasSend: false,\n                    }\n                    return\n    \n                } else {\n                    for (',"; i < ",".msgSpecs.length; i++) {\n                        if (",".msgSpecs[i].hasSend) {\n                            ","(",".msgSpecs[i].send, ",".msgSpecs[i].transferFunction(m))\n                        } else {\n                            ","(",".msgSpecs[i].transferFunction(m))\n                        }\n                    }\n                    return\n                }\n            "])),i.isStringToken,i.readStringToken,Wi(i.Template,"outTemplate","[]"),Ui("Int","i","1"),i.getLength,i.isFloatToken,i.FLOAT_TOKEN,i.STRING_TOKEN,i.readStringToken,Wi(i.Message,"outMessage","".concat(i.create,"(outTemplate)")),Ui("Int","i","1"),i.getLength,i.isFloatToken,i.writeFloatToken,i.readFloatToken,i.writeStringToken,i.readStringToken,a,a,a,Vi([Ui(i.Message,"m")],i.Message)(Yv||(Yv=r(["\n                            return ",".msgSpecs[0].outMessage\n                        "])),a),Ui("Int","i","0"),a,a,o.publish,a,a,t.$0,a)}},core:(e,n)=>{let{ns:t}=e,{msg:r}=n;return Hi([Gi(t.TokenSpec,[Ui("(m: ".concat(r.Message,") => ").concat(r.Message),"transferFunction"),Ui(r.Template,"outTemplate"),Ui(r.Message,"outMessage"),Ui("string","send"),Ui("boolean","hasSend")])])},dependencies:[tg]},cb=(e,n,t,a)=>{let{state:i}=e,{msg:o}=n;const s="".concat(i,".msgSpecs[").concat(a,"].outTemplate"),l="".concat(i,".msgSpecs[").concat(a,"].outMessage");let c=[],u=[],d=0,p=!1,f=!0;t.tokens.forEach(((e,n)=>{const t=ub(e);if("noop"===t.type){f=!1;const{inIndex:e}=t;c.push(qi(Xv||(Xv=r(["\n                ",".push(","(inMessage, ","))\n                if (","(inMessage, ",")) {\n                    stringMem[","] = ","(inMessage, ",")\n                    ",".push(stringMem[","].length)\n                }\n            "])),s,o.getTokenType,e,o.isStringToken,e,d,o.readStringToken,e,s,d)),u.push(qi(Jv||(Jv=r(["\n                if (","(inMessage, ",")) {\n                    ","(",", ",", ","(inMessage, ","))\n                } else if (","(inMessage, ",")) {\n                    ","(",", ",", stringMem[","])\n                }\n            "])),o.isFloatToken,e,o.writeFloatToken,l,n,o.readFloatToken,e,o.isStringToken,e,o.writeStringToken,l,n,d)),d++}else"string-template"===t.type?(f=!1,p=!0,c.push(qi(Zv||(Zv=r(['\n                stringToken = "','"\n                ',"\n                stringMem[","] = stringToken\n                ",".push(",")\n                ",".push(stringMem[","].length)\n            "])),t.template,t.variables.map((e=>{let{placeholder:n,inIndex:t}=e;return"\n                    if (".concat(o.isFloatToken,"(inMessage, ").concat(t,")) {\n                        otherStringToken = ").concat(o.readFloatToken,"(inMessage, ").concat(t,").toString()\n                        if (otherStringToken.endsWith('.0')) {\n                            otherStringToken = otherStringToken.slice(0, -2)\n                        }\n                        stringToken = stringToken.replace(\"").concat(n,'", otherStringToken)\n                    } else if (').concat(o.isStringToken,"(inMessage, ").concat(t,')) {\n                        stringToken = stringToken.replace("').concat(n,'", ').concat(o.readStringToken,"(inMessage, ").concat(t,"))\n                    }")})).join("\n"),d,s,o.STRING_TOKEN,s,d)),u.push(qi(Qv||(Qv=r(["\n                ","(",", ",", stringMem[","])\n            "])),o.writeStringToken,l,n,d)),d++):"string-constant"===t.type?(c.push(qi(eb||(eb=r(["\n                ",".push(",")\n                ",".push(",")\n            "])),s,o.STRING_TOKEN,s,t.value.length)),u.push(qi(nb||(nb=r(["\n                ","(",", ",', "','")\n            '])),o.writeStringToken,l,n,t.value))):"float-constant"===t.type&&(c.push(qi(tb||(tb=r(["\n                ",".push(",")\n            "])),s,o.FLOAT_TOKEN)),u.push(qi(rb||(rb=r(["\n                ","(",", ",", ",")\n            "])),o.writeFloatToken,l,n,t.value)))}));const h=qi(ab||(ab=r(["\n        ","\n        ","\n        ","\n    "])),p?Ui("string","stringToken"):null,p?Ui("string","otherStringToken"):null,f?null:Ui("Array<string>","stringMem","[]"));return c.unshift(qi(ib||(ib=r([""," = []"])),s)),u.unshift(qi(ob||(ob=r([""," = ","(",")"])),l,o.create,s)),{isStaticMsg:f,code:Hi([h,...c,...u])}},ub=e=>{if("string"===typeof e){const n=db.exec(e);if(n&&n[0]===e){return{type:"noop",inIndex:parseInt(n[1],10)-1}}if(n){const n=[];let t;for(;t=pb.exec(e);)n.push({placeholder:t[0],inIndex:parseInt(t[1],10)-1});return{type:"string-template",template:e,variables:n}}return{type:"string-constant",value:e}}return{type:"float-constant",value:e}},db=/\$(\d+)/,pb=/\$(\d+)/g;var fb,hb,mb,gb,yb,vb,bb,wb;const Sb={translateArgs:e=>{let{args:n}=e;const t=au(n[0])||"append";let r=n.slice(1);switch(t){case"split":r=[ru(n[1])||0];break;case"trim":case"length":r=[];break;case"append":case"prepend":break;case"fromsymbol":case"tosymbol":case"store":throw new Error("list operation ".concat(t," not implemented yet"));default:throw new Error("invalid list operation ".concat(t))}return{operation:t,operationArgs:r}},build:e=>{let{operation:n}=e,t=0,r=0;switch(n){case"split":t=2,r=3;break;case"trim":case"length":t=1,r=1;break;case"prepend":case"append":t=2,r=1}return{inlets:zi(ji(t),(e=>["".concat(e),{type:"message",id:"".concat(e)}])),outlets:zi(ji(r),(e=>["".concat(e),{type:"message",id:"".concat(e)}]))}}},xb={state:(e,n)=>{let{ns:t}=e,{msg:r}=n;return Gi(t.State,[Ui("Int","splitPoint",0),Ui(r.Message,"currentList","".concat(r.create,"([])"))])},initialization:(e,n)=>{let{node:{args:t},state:a}=e,{msg:i}=n;return qi(fb||(fb=r(["\n        ","\n\n        ","\n    "])),"split"===t.operation?"".concat(a,".splitPoint = ").concat(t.operationArgs[0]):null,"append"===t.operation||"prepend"===t.operation?qi(hb||(hb=r([" \n            {\n                ","\n\n                ",".currentList = ","(template)\n\n                ","\n            }\n        "])),Wi(i.Template,"template","[".concat(t.operationArgs.map((e=>"string"===typeof e?"".concat(i.STRING_TOKEN,",").concat(e.length):"".concat(i.FLOAT_TOKEN))).join(","),"]")),a,i.create,t.operationArgs.map(((e,n)=>"string"===typeof e?"".concat(i.writeStringToken,"(").concat(a,".currentList, ").concat(n,', "').concat(e,'")'):"".concat(i.writeFloatToken,"(").concat(a,".currentList, ").concat(n,", ").concat(e,")")))):null)},messageReceivers:(e,n)=>{let{ns:t,snds:a,state:i,node:{args:o}}=e,{bangUtils:s,msgUtils:l,msg:c}=n;const u=Wi(c.Message,"inMessage","".concat(s.isBang,"(m) ? ").concat(c.create,"([]): m"));switch(o.operation){case"split":return{0:Vi([Ui(c.Message,"m")])(mb||(mb=r(["\n                        ","\n                        if (","(inMessage) < ",".splitPoint) {\n                            ","(m)\n                            return\n                        } else if (","(inMessage) === ",".splitPoint) {\n                            ","(","())\n                            ","(m)\n                            return\n                        }\n                        ","\n                        ","\n                        ","(","(outMessage1) === 0 ? ","(): outMessage1)\n                        ","(","(outMessage0) === 0 ? ","(): outMessage0)\n                        return\n                    "])),u,c.getLength,i,a.$2,c.getLength,i,a.$1,s.bang,a.$0,Wi(c.Message,"outMessage1","".concat(l.slice,"(inMessage, ").concat(i,".splitPoint, ").concat(c.getLength,"(inMessage))")),Wi(c.Message,"outMessage0","".concat(l.slice,"(inMessage, 0, ").concat(i,".splitPoint)")),a.$1,c.getLength,s.bang,a.$0,c.getLength,s.bang),1:hu(t.setSplitPoint,i,c)};case"trim":return{0:Vi([Ui(c.Message,"m")])(gb||(gb=r(["\n                        ","(m)\n                        return\n                    "])),a.$0)};case"length":return{0:Vi([Ui(c.Message,"m")])(yb||(yb=r(["\n                        if (","(m)) {\n                            ","(","([0]))\n                        } else {\n                            ","(","([toFloat(","(m))]))\n                        }\n                        return\n                    "])),s.isBang,a.$0,c.floats,a.$0,c.floats,c.getLength)};case"append":case"prepend":const e="prepend"===o.operation?"".concat(l.concat,"(").concat(i,".currentList, m)"):"".concat(l.concat,"(m, ").concat(i,".currentList)");return{0:Vi([Ui(c.Message,"m")])(vb||(vb=r(["\n                        if (","(m)) {\n                            ","(","(",".currentList) === 0 ? ","(): ",".currentList)\n                        } else {\n                            ","(","(",".currentList) === 0 && ","(m) === 0 ? ","(): ",")\n                        }\n                        return\n                    "])),s.isBang,a.$0,c.getLength,i,s.bang,i,a.$0,c.getLength,i,c.getLength,s.bang,e),1:Vi([Ui(c.Message,"m")])(bb||(bb=r(["\n                        ","\n                        ",".currentList = inMessage\n                        return\n                    "])),u,i)};default:throw new Error("unknown list operation ".concat(o.operation))}},core:e=>{let{ns:n}=e;return Hi([$i(n.setSplitPoint,[Ui(n.State,"state"),Ui("Float","value")],"void")(wb||(wb=r(["\n                state.splitPoint = toInt(value)\n            "])))])},dependencies:[Op,Cp]};var kb,Ib;const _b={translateArgs:e=>({value:au(e.args[0])||""}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0})},Ab={state:e=>{let{node:{args:n},ns:t}=e;return Gi(t.State,[Ui("string","value",'"'.concat(n.value,'"'))])},messageReceivers:(e,n)=>{let{snds:t,state:a}=e,{msg:i,bangUtils:o}=n;return{0:Vi([Ui(i.Message,"m")])(kb||(kb=r(["\n            if (","(m)) {\n                ","(","([",".value]))\n                return\n    \n            } else if (","(m, [","])) {\n                ",".value = ","(m, 0)\n                ","(","([",".value]))\n                return\n    \n            }\n        "])),o.isBang,t.$0,i.strings,a,i.isMatching,i.STRING_TOKEN,a,i.readStringToken,t.$0,i.strings,a),1:Vi([Ui(i.Message,"m")])(Ib||(Ib=r(["\n            if (","(m, [","])) {\n                ",".value = ","(m, 0)\n                return \n            }\n        "])),i.isMatching,i.STRING_TOKEN,a,i.readStringToken)}},dependencies:[Op,tg]};var Tb,Eb;const Ob={state:e=>{let{node:{args:n},ns:t}=e;return Gi(t.State,[Ui("string","busName",'"'.concat(n.busName,'"'))])},messageReceivers:(e,n)=>{let{state:t}=e,{msgBuses:a,msg:i}=n;return{0:Vi([Ui(i.Message,"m")])(Tb||(Tb=r(["\n            ","(",".busName, m)\n            return\n        "])),a.publish,t),1:fu("".concat(t,".busName"),i)}},dependencies:[tg]},Cb={send:{translateArgs:e=>({busName:au(e.args[0])||""}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{}})},receive:{translateArgs:e=>({busName:au(e.args[0])||""}),build:()=>({inlets:{},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0})}},Nb={send:Ob,receive:{initialization:(e,n)=>{let{node:{args:t},snds:a}=e,{msgBuses:i}=n;return qi(Eb||(Eb=r(["\n            ",'("','", ',")\n        "])),i.subscribe,t.busName,a.$0)},dependencies:[tg]}};var Mb,Pb,Fb,Rb,Lb;const Db={state:(e,n)=>{let{ns:t}=e,{fs:r}=n;return Gi(t.State,[Ui("Map<".concat(r.OperationId,", ").concat(t.Operation,">"),"operations","new Map()")])},messageReceivers:(e,n)=>{let{ns:t,state:a,snds:i}=e,{msg:o,fs:s,core:l,commons:c,soundFileOpenOpts:u}=n;return{0:Vi([Ui(o.Message,"m")])(Mb||(Mb=r(["\n            if (\n                ","(m) >= 3 \n                && ","(m, 0)\n                && (\n                    ","(m, 0) === 'read'\n                    || ","(m, 0) === 'write'\n                )\n            ) {\n                ","\n                ","\n                ","\n                ","\n                \n                // Remove the operation type\n                unhandledOptions.delete(0)\n                \n                ","\n                ","\n                while (i < ","(m)) {\n                    if (!unhandledOptions.has(i)) {\n\n                    } else if (","(m, i)) {\n                        str = ","(m, i)\n                        if (str === '-resize') {\n                            unhandledOptions.delete(i)\n                            operation.resize = true\n\n                        } else if (str === '-maxsize' || str === '-nframes') {\n                            unhandledOptions.delete(i)\n                            if (\n                                i + 1 >= ","(m) \n                                || !",'(m, i + 1)\n                            ) {\n                                console.log("invalid value for -maxsize")\n                            }\n                            operation.maxSize = ',"(m, i + 1)\n                            unhandledOptions.delete(i + 1)\n                            i++\n\n                        } else if (str === '-skip') {\n                            unhandledOptions.delete(i)\n                            if (\n                                i + 1 >= ","(m) \n                                || !",'(m, i + 1)\n                            ) {\n                                console.log("invalid value for -skip")\n                            }\n                            operation.skip = ',"(m, i + 1)\n                            unhandledOptions.delete(i + 1)\n                            i++\n\n                        } else if (str === '-normalize') {\n                            unhandledOptions.delete(i)\n                            console.log('-normalize not implemented')\n                        }\n                    }\n                    i++\n                }\n\n                i = 1\n                ","\n                while (i < ","(m)) {\n                    if (!unhandledOptions.has(i)) {\n\n                    } else if (","(m, i)) {\n                        str = ","(m, i)\n                        if (!str.startsWith('-') && urlFound === false) {\n                            operation.url = str\n                            urlFound = true\n                        } else {\n                            operation.arrayNames.push(str)\n                        }\n                        unhandledOptions.delete(i)\n                    }\n                    i++\n                }\n\n                for (i = 0; i < operation.arrayNames.length; i++) {\n                    if (!","(operation.arrayNames[i])) {\n                        console.log('[soundfiler] unknown array ' + operation.arrayNames[i])\n                        return\n                    }\n                }\n\n                if (unhandledOptions.size) {\n                    console.log(\"soundfiler received invalid options\")\n                }\n\n                soundInfo.channelCount = operation.arrayNames.length\n\n                if (operationType === 'read') {\n                    ","\n\n                    ",".operations.set(id, operation)\n\n                } else if (operationType === 'write') {\n                    ","\n                    ","\n                    ","\n                    ","\n                    \n                    for (i = 0; i < operation.arrayNames.length; i++) {\n                        framesToWrite = Math.max(\n                            framesToWrite,\n                            toFloat(","(operation.arrayNames[i]).length) - operation.skip,\n                        )\n                    }\n\n                    if (operation.maxSize >= 0) {\n                        framesToWrite = Math.min(\n                            operation.maxSize, \n                            framesToWrite\n                        )\n                    }\n                    operation.framesToWrite = framesToWrite\n\n                    if (framesToWrite < 1) {\n                        console.log('[soundfiler] no frames to write')\n                        return\n                    }\n\n                    for (i = 0; i < operation.arrayNames.length; i++) {\n                        array = ","(operation.arrayNames[i])\n                        if (framesToWrite > toFloat(array.length) - operation.skip) {\n                            sound.push(createFloatArray(toInt(framesToWrite)))\n                            sound[i].set(array.subarray(\n                                toInt(operation.skip), \n                                toInt(operation.skip + framesToWrite)\n                            ))\n                        } else {\n                            sound.push(array.subarray(\n                                toInt(operation.skip), \n                                toInt(operation.skip + framesToWrite)\n                            ))\n                        }\n                    }\n\n                    ","\n\n                    ","\n\n                    ",".operations.set(id, operation)\n                }\n\n                return\n            }\n        "])),o.getLength,o.isStringToken,o.readStringToken,o.readStringToken,Wi("string","operationType","".concat(o.readStringToken,"(m, 0)")),Wi(s.SoundInfo,"soundInfo","{\n                    channelCount: 0,\n                    sampleRate: toInt(".concat(l.SAMPLE_RATE,"),\n                    bitDepth: 32,\n                    encodingFormat: '',\n                    endianness: '',\n                    extraOptions: '',\n                }")),Wi(t.Operation,"operation","{\n                    arrayNames: [],\n                    resize: false,\n                    maxSize: -1,\n                    skip: 0,\n                    framesToWrite: 0,\n                    url: '',\n                    soundInfo,\n                }"),Ui("Set<Int>","unhandledOptions","".concat(u.parse,"(\n                    m,\n                    soundInfo,\n                )")),Ui("Int","i","1"),Ui("string","str",'""'),o.getLength,o.isStringToken,o.readStringToken,o.getLength,o.isFloatToken,o.readFloatToken,o.getLength,o.isFloatToken,o.readFloatToken,Ui("boolean","urlFound","false"),o.getLength,o.isStringToken,o.readStringToken,c.hasArray,Wi(s.OperationId,"id",qi(Pb||(Pb=r(["","(\n                        operation.url, \n                        soundInfo,\n                        ","\n                    )"])),s.readSoundFile,Vi([Ui(s.OperationId,"id"),Ui(s.OperationStatus,"status"),Ui("FloatArray[]","sound")],"void")(Fb||(Fb=r(["\n                            ","\n                            ",".operations.delete(id)\n                            ","\n                            ","\n                            ","\n                            ","\n                            for (i = 0; i < sound.length; i++) {\n                                if (operation.resize) {\n                                    if (operation.maxSize > 0) {\n                                        framesToRead = Math.min(\n                                            operation.maxSize, \n                                            toFloat(sound[i].length) - operation.skip\n                                        )\n        \n                                    } else {\n                                        framesToRead = toFloat(sound[i].length) - operation.skip\n                                    }\n        \n                                    ","(\n                                        operation.arrayNames[i], \n                                        sound[i].subarray(\n                                            toInt(operation.skip), \n                                            toInt(operation.skip + framesToRead)\n                                        )\n                                    )\n                                    \n                                } else {\n                                    array = ","(operation.arrayNames[i])\n                                    framesToRead = Math.min(\n                                        toFloat(array.length),\n                                        toFloat(sound[i].length) - operation.skip\n                                    )\n                                    array.set(sound[i].subarray(0, array.length))\n                                }\n                                maxFramesRead = Math.max(\n                                    maxFramesRead,\n                                    framesToRead\n                                )\n                            }\n        \n                            ","(","(operation.soundInfo))\n                            ","(","([maxFramesRead]))\n                        "])),Wi(t.Operation,"operation","".concat(a,".operations.get(id)")),a,Ui("Int","i","0"),Ui("Float","maxFramesRead","0"),Ui("Float","framesToRead","0"),Ui("FloatArray","array","createFloatArray(0)"),c.setArray,c.getArray,i.$1,t.buildMessage1,i.$0,o.floats))),a,Ui("Int","i","0"),Ui("Float","framesToWrite","0"),Ui("FloatArray","array","createFloatArray(0)"),Wi("FloatArray[]","sound","[]"),c.getArray,c.getArray,$i("callback",[Ui(s.OperationId,"id"),Ui(s.OperationStatus,"status")],"void")(Rb||(Rb=r(["\n                        ","\n                        ",".operations.delete(id)\n                        ","(","(operation.soundInfo))\n                        ","(","([operation.framesToWrite]))\n                    "])),Wi(t.Operation,"operation","".concat(a,".operations.get(id)")),a,i.$1,t.buildMessage1,i.$0,o.floats),Wi(s.OperationId,"id","".concat(s.writeSoundFile,"(\n                        sound, \n                        operation.url, \n                        soundInfo, \n                        callback\n                    )")),a)}},core:(e,n)=>{let{ns:t}=e,{msg:a,fs:i}=n;return Hi([Gi(t.Operation,[Ui("string","url"),Ui("Array<string>","arrayNames"),Ui("boolean","resize"),Ui("Float","maxSize"),Ui("Float","framesToWrite"),Ui("Float","skip"),Ui(i.SoundInfo,"soundInfo")]),$i(t.buildMessage1,[Ui(i.SoundInfo,"soundInfo")],a.Message)(Lb||(Lb=r(["\n                ","\n                ","(m, 0, toFloat(soundInfo.sampleRate))\n                ","(m, 1, -1) // TODO IMPLEMENT headersize\n                ","(m, 2, toFloat(soundInfo.channelCount))\n                ","(m, 3, Math.round(toFloat(soundInfo.bitDepth) / 8))\n                ","(m, 4, soundInfo.endianness)\n                return m\n            "])),Wi(a.Message,"m","".concat(a.create,"([\n                    ").concat(a.FLOAT_TOKEN,",\n                    ").concat(a.FLOAT_TOKEN,",\n                    ").concat(a.FLOAT_TOKEN,",\n                    ").concat(a.FLOAT_TOKEN,",\n                    ").concat(a.STRING_TOKEN,",\n                    soundInfo.endianness.length,\n                ])")),a.writeFloatToken,a.writeFloatToken,a.writeFloatToken,a.writeFloatToken,a.writeStringToken)])},dependencies:[_m,Gs,vm,bm]};var jb;const zb={messageReceivers:(e,n)=>{let{node:{args:t}}=e,{msg:a}=n;return{0:Vi([Ui(a.Message,"m")])(jb||(jb=r(['\n            console.log("',' " + ',"(m))\n            return\n        "])),t.prefix,a.display)}}};var Bb,Ub;const Wb=["float","bang","symbol","list","anything"],$b=e=>{switch(e){case"f":return"float";case"b":return"bang";case"s":return"symbol";case"l":return"list";case"a":return"anything";case"p":return"pointer";default:return e}},Vb=e=>{if("pointer"===e)throw new iu('"pointer" not supported (yet)');if(!Wb.includes(e))throw new iu("invalid type ".concat(e));return e},Gb=(e,n,t,r)=>{let{msg:a,bangUtils:i,tokenConversion:o}=r;switch(e){case"float":return"".concat(a.floats,"([").concat(o.toFloat,"(").concat(n,", ").concat(t,")])");case"bang":return"".concat(i.bang,"()");case"symbol":return"".concat(a.strings,"([").concat(o.toString_,"(").concat(n,", ").concat(t,")])");case"list":case"anything":return"".concat(n);default:throw new Error("type argument ".concat(e," not supported (yet)"))}},Hb="tokenConversion",qb={namespace:Hb,code:(e,n)=>{let{ns:t}=e,{msg:a}=n;return $i(t.toFloat,[Ui(a.Message,"m"),Ui("Int","i")],"Float")(Bb||(Bb=r(["\n        if (","(m, i)) {\n            return ","(m, i)\n        } else {\n            return 0\n        }\n    "])),a.isFloatToken,a.readFloatToken)}},Kb={namespace:Hb,code:(e,n)=>{let{ns:t}=e,{msg:a}=n;return $i(t.toString_,[Ui(a.Message,"m"),Ui("Int","i")],"string")(Ub||(Ub=r(["\n        if (","(m, i)) {\n            ","\n            if (str === 'bang') {\n                return 'symbol'\n            } else {\n                return str\n            }\n        } else {\n            return 'float'\n        }\n    "])),a.isStringToken,Wi("string","str","".concat(a.readStringToken,"(m, i)")))}};var Yb;const Xb={translateArgs:e=>{let{args:n}=e;return{typeArguments:0===n.length?["bang","bang"]:n.map(tu).map($b).map(Vb)}},build:e=>{let{typeArguments:n}=e;return{inlets:{0:{type:"message",id:"0"}},outlets:zi(n,((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}]))}}},Jb={messageReceivers:(e,n)=>{let{snds:t,node:{args:{typeArguments:a}}}=e;return{0:Vi([Ui(n.msg.Message,"m")])(Yb||(Yb=r(["\n            ","\n            return\n        "])),a.reverse().map(((e,r)=>"".concat(t[a.length-r-1],"(").concat(Gb(e,"m",0,n),")"))))}},dependencies:[qb,Kb,Op]};var Zb;const Qb={translateArgs:e=>{let{args:n}=e;return{initValue:ru(n[0])||0}},build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}})},ew={state:e=>{let{node:{args:n},ns:t}=e;return Gi(t.State,[Ui("Float","currentValue",n.initValue)])},messageReceivers:(e,n)=>{let{snds:t,state:a}=e,{bangUtils:i,msg:o}=n;return{0:Vi([Ui(o.Message,"m")])(Zb||(Zb=r(["\n            if (","(m, [","])) {\n                ","\n                if (newValue !== ",".currentValue) {\n                    ",".currentValue = newValue\n                    ","(","([",".currentValue]))\n                }\n                return\n    \n            } else if (","(m)) {\n                ","(","([",".currentValue]))\n                return \n    \n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ",".currentValue = ","(m, 1)\n                return\n            }\n        "])),o.isMatching,o.FLOAT_TOKEN,Wi("Float","newValue","".concat(o.readFloatToken,"(m, 0)")),a,a,t[0],o.floats,a,i.isBang,t[0],o.floats,a,o.isMatching,o.STRING_TOKEN,o.FLOAT_TOKEN,o.readStringToken,a,o.readFloatToken)}},dependencies:[Op]};var nw;const tw={translateArgs:e=>{let{args:n}=e;return{threshold:ru(n[0])||0}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}}})},rw={state:e=>{let{node:{args:n},ns:t}=e;return Gi(t.State,[Ui("Float","threshold",n.threshold)])},messageReceivers:(e,n)=>{let{snds:t,state:a}=e,{msg:i}=n;return{0:Vi([Ui(i.Message,"m")])(nw||(nw=r(["\n            if (","(m, [","])) {\n                ","\n                if (value >= ",".threshold) {\n                    ","(","([value]))\n                } else {\n                    ","(","([value]))\n                }\n                return\n            }\n        "])),i.isMatching,i.FLOAT_TOKEN,Wi("Float","value","".concat(i.readFloatToken,"(m, 0)")),a,t[1],i.floats,t[0],i.floats),1:pu("".concat(a,".threshold"),i)}}};var aw;const iw={translateArgs:e=>{let{args:n}=e;return{minValue:ru(n[0])||0,maxValue:ru(n[1])||0}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"message",id:"0"}}})},ow={state:e=>{let{node:{args:n},ns:t}=e;return Gi(t.State,[Ui("Float","minValue",n.minValue),Ui("Float","maxValue",n.maxValue)])},messageReceivers:(e,n)=>{let{snds:t,state:a}=e,{msg:i}=n;return{0:Vi([Ui(i.Message,"m")])(aw||(aw=r(["\n            if (","(m, [","])) {\n                ","(","([\n                    Math.max(\n                        Math.min(\n                            ",".maxValue, \n                            ","(m, 0)\n                        ), \n                        ",".minValue\n                    )\n                ]))\n                return\n            }\n        "])),i.isMatching,i.FLOAT_TOKEN,t[0],i.floats,a,i.readFloatToken,a),1:pu("".concat(a,".minValue"),i),2:pu("".concat(a,".maxValue"),i)}}};var sw,lw,cw;const uw={translateArgs:e=>{let{args:n}=e;return{filters:n.length?n:[0]}},build:e=>{const n={0:{type:"message",id:"0"}};return 1===e.filters.length&&(n[1]={type:"message",id:"1"}),{inlets:n,outlets:zi(e.filters.length?ji(e.filters.length+1):[0,1],((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}]))}}},dw={state:(e,n)=>{let{node:{args:t},ns:r}=e,{msg:a}=n;return Gi(r.State,[Ui("Float","floatFilter","number"===typeof t.filters[0]?t.filters[0]:0),Ui("string","stringFilter",'"'.concat(t.filters[0],'"')),Ui("Int","filterType","number"===typeof t.filters[0]?a.FLOAT_TOKEN:a.STRING_TOKEN)])},messageReceivers:(e,n)=>{let{snds:t,state:a,node:{args:i}}=e,{msg:o,bangUtils:s,msgUtils:l}=n;return i.filters.length>1?{0:Vi([Ui(o.Message,"m")])(sw||(sw=r(["\n                    ","\n    \n                    ","(m)\n                    return\n                "])),i.filters.map(((e,n)=>Bi(["float"===e,"\n                            if (".concat(o.isFloatToken,"(m, 0)) {\n                                ").concat(t[n],"(m)\n                                return\n                            }\n                        ")],["symbol"===e,"\n                            if (".concat(o.isStringToken,"(m, 0)) {\n                                ").concat(t[n],"(m)\n                                return\n                            }\n                        ")],["list"===e,"\n                            if (".concat(o.getLength,"(m).length > 1) {\n                                ").concat(t[n],"(m)\n                                return\n                            }\n                        ")],["bang"===e,"\n                            if (".concat(s.isBang,"(m)) {\n                                ").concat(t[n],"(m)\n                                return\n                            }\n                        ")],["number"===typeof e,"\n                            if (\n                                ".concat(o.isFloatToken,"(m, 0)\n                                && ").concat(o.readFloatToken,"(m, 0) === ").concat(e,"\n                            ) {\n                                ").concat(t[n],"(").concat(s.emptyToBang,"(").concat(l.shift,"(m)))\n                                return\n                            }\n                        ")],["string"===typeof e,"\n                            if (\n                                ".concat(o.isStringToken,"(m, 0) \n                                && ").concat(o.readStringToken,'(m, 0) === "').concat(e,'"\n                            ) {\n                                ').concat(t[n],"(").concat(s.emptyToBang,"(").concat(l.shift,"(m)))\n                                return\n                            }")]))),t[i.filters.length])}:{0:Vi([Ui(o.Message,"m")])(lw||(lw=r(["\n                    if (",".filterType === ",") {\n                        if (\n                            (",".stringFilter === 'float'\n                                && ","(m, 0))\n                            || (",".stringFilter === 'symbol'\n                                && ","(m, 0))\n                            || (",".stringFilter === 'list'\n                                && ","(m) > 1)\n                            || (",".stringFilter === 'bang' \n                                && ","(m))\n                        ) {\n                            ","(m)\n                            return\n                        \n                        } else if (\n                            ","(m, 0)\n                            && ","(m, 0) === ",".stringFilter\n                        ) {\n                            ","(","(","(m)))\n                            return\n                        }\n    \n                    } else if (\n                        ","(m, 0)\n                        && ","(m, 0) === ",".floatFilter\n                    ) {\n                        ","(","(","(m)))\n                        return\n                    }\n                \n                    ","(m)\n                return\n                "])),a,o.STRING_TOKEN,a,o.isFloatToken,a,o.isStringToken,a,o.getLength,a,s.isBang,t.$0,o.isStringToken,o.readStringToken,a,t.$0,s.emptyToBang,l.shift,o.isFloatToken,o.readFloatToken,a,t.$0,s.emptyToBang,l.shift,t.$1),1:Vi([Ui(o.Message,"m")])(cw||(cw=r(["\n                    ",".filterType = ","(m, 0)\n                    if (",".filterType === ",") {\n                        ",".stringFilter = ","(m, 0)\n                    } else {\n                        ",".floatFilter = ","(m, 0)\n                    }\n                    return\n                "])),a,o.getTokenType,a,o.STRING_TOKEN,a,o.readStringToken,a,o.readFloatToken)}},dependencies:[Op,Cp]};var pw,fw;const hw={translateArgs:e=>{let{args:n}=e;return{isClosed:0===(ru(n[0])||0)}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}})},mw={state:e=>{let{node:{args:n},ns:t}=e;return Gi(t.State,[Ui("Float","isClosed",n.isClosed?"true":"false")])},messageReceivers:(e,n)=>{let{ns:t,snds:a,state:i}=e,{msg:o}=n;return{0:Vi([Ui(o.Message,"m")])(pw||(pw=r(["\n            if (!",".isClosed) {\n                ","(m)\n            }\n            return\n        "])),i,a.$0),1:hu(t.setIsClosed,i,o)}},core:e=>{let{ns:n}=e;return Hi([$i(n.setIsClosed,[Ui(n.State,"state"),Ui("Float","value")],"void")(fw||(fw=r(["\n                state.isClosed = (value === 0)\n            "])))])}};var gw,yw;const vw={state:e=>{let{ns:n}=e;return Gi(n.State,[Ui("boolean","continueIter","true")])},messageReceivers:(e,n)=>{let{snds:t,state:a}=e,{msg:i,bangUtils:o}=n;return{0:Vi([Ui(i.Message,"m")])(gw||(gw=r(["\n            if (","(m)) {\n                ",".continueIter = true\n                while (",".continueIter) {\n                    ","(","())\n                }\n                return\n    \n            } else if (","(m, [","])) {\n                ",".continueIter = true\n                ","\n                ","\n                while (",".continueIter && iterCount++ < maxIterCount) {\n                    ","(","())\n                }\n                return\n            }\n        "])),o.isBang,a,a,t[0],o.bang,i.isMatching,i.FLOAT_TOKEN,a,Ui("Int","maxIterCount","toInt(".concat(i.readFloatToken,"(m, 0))")),Ui("Int","iterCount","0"),a,t[0],o.bang),1:Vi([Ui(i.Message,"m")])(yw||(yw=r(["\n            if (","(m)) {\n                ",".continueIter = false\n                return\n            }\n        "])),o.isBang,a)}},dependencies:[Op]};var bw,ww;const Sw={translateArgs:e=>{let{args:n}=e;return{maxValue:ru(n[0])||0}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}})},xw={state:e=>{let{node:{args:n},ns:t}=e;return Gi(t.State,[Ui("Float","maxValue",n.maxValue)])},messageReceivers:(e,n)=>{let{ns:t,snds:a,state:i}=e,{bangUtils:o,msg:s}=n;return{0:Vi([Ui(s.Message,"m")])(bw||(bw=r(["\n            if (","(m)) {\n                ","(","([Math.floor(Math.random() * ",".maxValue)]))\n                return\n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'seed'\n            ) {\n                console.log('WARNING : seed not implemented yet for [random]')\n                return\n            }\n        "])),o.isBang,a[0],s.floats,i,s.isMatching,s.STRING_TOKEN,s.FLOAT_TOKEN,s.readStringToken),1:hu(t.setMaxValue,i,s)}},core:e=>{let{ns:n}=e;return Hi([$i(n.setMaxValue,[Ui(n.State,"state"),Ui("Float","maxValue")],"void")(ww||(ww=r(["\n                state.maxValue = Math.max(maxValue, 0)\n            "])))])},dependencies:[Op]};var kw,Iw,_w,Aw,Tw,Ew,Ow,Cw;const Nw={translateArgs:e=>{let{args:n}=e,t=0;return n.length>=1&&(t=nu(n[n.length-1]),n=n.slice(0,-1)),n=n.length?n:[0],{typeArguments:n.map($b).map((e=>["number"===typeof e?"float":Vb(e),"number"===typeof e?e:"float"===e?0:"symbol"])),delay:t}},build:e=>({inlets:_r(_r({},zi(e.typeArguments,((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}]))),{},{["".concat(e.typeArguments.length)]:{type:"message",id:"".concat(e.typeArguments.length)}}),outlets:zi(e.typeArguments,((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}]))})},Mw={state:(e,n)=>{let{node:{args:t},ns:r}=e,{msg:a}=n;return Gi(r.State,[Ui("Int","delay",0),Ui("Array<".concat(a.Message,">"),"outputMessages","[".concat(t.typeArguments.map((e=>{let[n,t]=e;return"number"===typeof t?"".concat(a.floats,"([").concat(t,"])"):"".concat(a.strings,'(["').concat(t,'"])')})).join(","),"]")),Ui("Array<".concat(r.ScheduledMessage,">"),"scheduledMessages","[]"),Ui("Array<".concat(a.Handler,">"),"snds","[]")])},initialization:e=>{let{ns:n,node:{args:t},state:a,snds:i}=e;return qi(kw||(kw=r(["\n            ","(",", ",")\n            ",".snds = [","]\n        "])),n.setDelay,a,t.delay,a,ji(t.typeArguments.length).reverse().map((e=>i[e])).join(", "))},messageReceivers:(e,n)=>{let{ns:t,node:{args:a},state:i}=e;const{bangUtils:o,actionUtils:s,msg:l,core:c}=n;return _r(_r({0:Vi([Ui(l.Message,"m")])(Iw||(Iw=r(["\n                if (","(m, 'clear')) {\n                    ","(",")\n                    return \n        \n                } else if (","(m, 'flush')) {\n                    if (",".scheduledMessages.length) {\n                        ","(\n                            ",", \n                            ",".scheduledMessages[",".scheduledMessages.length - 1].frame\n                        )\n                    }\n                    return\n        \n                } else {\n                    ","\n                    ","\n        \n                    ","\n        \n                    return\n                }\n            "])),s.isAction,t.clear,i,s.isAction,i,t.sendMessages,i,i,i,Wi(l.Message,"inMessage","".concat(o.isBang,"(m) ? ").concat(l.create,"([]): m")),Wi("Int","insertIndex","".concat(t.prepareMessageScheduling,"(\n                        ").concat(i,", \n                        () => {\n                            ").concat(t.sendMessages,"(").concat(i,", ").concat(c.FRAME,")\n                        },\n                    )")),a.typeArguments.slice(0).reverse().map(((e,n)=>{let[t]=e;return[a.typeArguments.length-n-1,t]})).map(((e,t)=>{let[a,o]=e;return qi(_w||(_w=r(["\n                                if (","(inMessage) > ",") {\n                                    ",".scheduledMessages[insertIndex + ","].message = \n                                        ","\n                                    ",".outputMessages[","] \n                                        = ",".scheduledMessages[insertIndex + ","].message\n                                } else {\n                                    ",".scheduledMessages[insertIndex + ","].message \n                                        = ",".outputMessages[","]\n                                }\n                            "])),l.getLength,a,i,t,Gb(o,"inMessage",a,n),i,a,i,t,i,t,i,a)})))},zi(a.typeArguments.slice(1),((e,t)=>{let[a]=e;return["".concat(t+1),Vi([Ui(l.Message,"m")])(Aw||(Aw=r(["\n                        ",".outputMessages[","] = ","\n                        return\n                    "])),i,t+1,Gb(a,"m",0,n))]}))),{},{[a.typeArguments.length]:hu(t.setDelay,i,l)})},core:(e,n)=>{let{ns:t}=e,{msg:a,sked:i,core:o,commons:s}=n;return Hi([Gi(t.ScheduledMessage,[Ui(a.Message,"message"),Ui("Int","frame"),Ui(i.Id,"skedId")]),Wi(t.ScheduledMessage,t.dummyScheduledMessage,"{\n                message: ".concat(a.create,"([]),\n                frame: 0,\n                skedId: ").concat(i.ID_NULL,",\n            }")),$i(t.prepareMessageScheduling,[Ui(t.State,"state"),Ui(i.Callback,"callback")],"Int")(Tw||(Tw=r(["\n                ","\n                ","\n                ","\n        \n                while (\n                    insertIndex < state.scheduledMessages.length \n                    && state.scheduledMessages[insertIndex].frame <= frame\n                ) {\n                    insertIndex++\n                }\n        \n                ","\n                if (\n                    insertIndex === 0 || \n                    (\n                        insertIndex > 0 \n                        && state.scheduledMessages[insertIndex - 1].frame !== frame\n                    )\n                ) {\n                    skedId = ","(frame, callback)\n                }\n        \n                ","\n                for (","; i < state.snds.length; i++) {\n                    state.scheduledMessages.push(",")\n                }\n                state.scheduledMessages.copyWithin(\n                    (insertIndex + 1) * state.snds.length, \n                    insertIndex * state.snds.length\n                )\n                for (","; i < state.snds.length; i++) {\n                    state.scheduledMessages[insertIndex + i] = {\n                        message: ",".message,\n                        frame,\n                        skedId,\n                    }\n                }\n        \n                return insertIndex\n            "])),Ui("Int","insertIndex","0"),Ui("Int","frame","".concat(o.FRAME," + state.delay")),Ui(i.Id,"skedId",i.ID_NULL),"",s.waitFrame,"",Ui("Int","i",0),t.dummyScheduledMessage,Ui("Int","i",0),t.dummyScheduledMessage),$i(t.sendMessages,[Ui(t.State,"state"),Ui("Int","toFrame")],"void")(Ew||(Ew=r(["\n                ","\n                while (\n                    state.scheduledMessages.length \n                    && state.scheduledMessages[0].frame <= toFrame\n                ) {\n                    for (i = 0; i < state.snds.length; i++) {\n                        // Snds are already reversed\n                        state.snds[i](state.scheduledMessages.shift().message)\n                    }\n                }\n            "])),Ui("Int","i",0)),$i(t.clear,[Ui(t.State,"state")],"void")(Ow||(Ow=r(["\n                ","\n                ","\n                for (i; i < length; i++) {\n                    ","(state.scheduledMessages[i].skedId)\n                }\n                state.scheduledMessages = []\n            "])),Ui("Int","i","0"),Wi("Int","length","state.scheduledMessages.length"),s.cancelWaitFrame),$i(t.setDelay,[Ui(t.State,"state"),Ui("Float","delay")],"void")(Cw||(Cw=r(["\n                state.delay = toInt(Math.round(delay / 1000 * ","))\n            "])),o.SAMPLE_RATE)])},dependencies:[qb,Kb,Op,Np,Hs]};var Pw,Fw,Rw;const Lw={translateArgs:e=>{let{args:n}=e;return{typeArguments:(n.length?n:["float","float"]).map($b).map((e=>{if("bang"===(e=e||"float")&&(e="float"),"number"===typeof e)return e;if(!["float","symbol"].includes(e))throw new Error("".concat(e," not supported (yet)"));return e})).map((e=>["number"===typeof e?"float":Vb(e),"number"===typeof e?e:"float"===e?0:"symbol"]))}},build:e=>{let{typeArguments:n}=e;return{inlets:zi(n,((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}])),outlets:{0:{type:"message",id:"0"}}}}},Dw={state:e=>{let{node:{args:n},ns:t}=e;return Gi(t.State,[Ui("Array<Float>","floatValues","[".concat(n.typeArguments.map((e=>{let[n,t]=e;return"float"===n?t:0})).join(","),"]")),Ui("Array<string>","stringValues","[".concat(n.typeArguments.map((e=>{let[n,t]=e;return"symbol"===n?'"'.concat(t,'"'):'""'})).join(","),"]"))])},messageReceivers:(e,n)=>{let{snds:t,state:a,node:i}=e,{bangUtils:o,tokenConversion:s,msg:l}=n;return _r({0:Vi([Ui(l.Message,"m")])(Pw||(Pw=r(["\n            if (!","(m)) {\n                for (","; i < ","(m); i++) {\n                    ",".stringValues[i] = ","(m, i)\n                    ",".floatValues[i] = ","(m, i)\n                }\n            }\n    \n            ","\n    \n            ","\n    \n            ","\n    \n            ","(messageOut)\n            return\n        "])),o.isBang,Ui("Int","i","0"),l.getLength,a,s.toString_,a,s.toFloat,Wi(l.Template,"template","[".concat(i.args.typeArguments.map(((e,n)=>{let[t]=e;return"symbol"===t?"".concat(l.STRING_TOKEN,", ").concat(a,".stringValues[").concat(n,"].length"):"".concat(l.FLOAT_TOKEN)})).join(","),"]")),Wi(l.Message,"messageOut","".concat(l.create,"(template)")),i.args.typeArguments.map(((e,n)=>{let[t]=e;return"symbol"===t?"".concat(l.writeStringToken,"(messageOut, ").concat(n,", ").concat(a,".stringValues[").concat(n,"])"):"".concat(l.writeFloatToken,"(messageOut, ").concat(n,", ").concat(a,".floatValues[").concat(n,"])")})),t[0])},zi(i.args.typeArguments.slice(1),((e,n)=>{let[t]=e;if("symbol"===t)return["".concat(n+1),Vi([Ui(l.Message,"m")])(Fw||(Fw=r(["\n                        ",".stringValues[","] = ","(m, 0)\n                        return\n                    "])),a,n+1,s.toString_)];if("float"===t)return["".concat(n+1),Vi([Ui(l.Message,"m")])(Rw||(Rw=r(["\n                        ",".floatValues[","] = ","(m, 0)\n                        return\n                    "])),a,n+1,s.toFloat)];throw new Error("Unsupported type argument ".concat(t))})))},dependencies:[Kb,qb,Op]};var jw;const zw={translateArgs:e=>{let{args:n}=e;return{typeArguments:0===n.length?["float","float"]:n.map($b).map((e=>{if("number"===typeof e)return"float";if("symbol"===e||"float"===e)return e;throw new Error('Invalid type argument for unpack "'.concat(e,'"'))}))}},build:e=>{let{typeArguments:n}=e;return{inlets:{0:{type:"message",id:"0"}},outlets:zi(n,((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}]))}}},Bw={messageReceivers:(e,n)=>{let{snds:t,node:{args:a}}=e,{msg:i}=n;return{0:Vi([Ui(i.Message,"m")])(jw||(jw=r(["\n            ","\n            return\n        "])),a.typeArguments.map(((e,n)=>[e,n])).reverse().map((e=>{let[n,r]=e;return"\n                    if (\n                        ".concat(i.getLength,"(m) >= ").concat(r+1,"\n                    ) {\n                        if (").concat(i.getTokenType,"(m, ").concat(r,") === ").concat("float"===n?i.FLOAT_TOKEN:i.STRING_TOKEN,") {\n                            ").concat(Bi(["float"===n,"".concat(t[r],"(").concat(i.floats,"([").concat(i.readFloatToken,"(m, ").concat(r,")]))")],["symbol"===n,"".concat(t[r],"(").concat(i.strings,"([").concat(i.readStringToken,"(m, ").concat(r,")]))")]),"\n                        } else {\n                            console.log('unpack : invalid token type index ").concat(r,"')\n                        }\n                    }\n                ")})))}}};var Uw,Ww,$w,Vw;const Gw={translateArgs:e=>{let{args:n}=e;return{tokenizedExpressions:tS(n).map(Jw)}},build:e=>({inlets:zi(eS(e.tokenizedExpressions),(e=>{let{id:n}=e;return["".concat(n),{type:"message",id:"".concat(n)}]})),outlets:zi(e.tokenizedExpressions,((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}]))})},Hw={translateArgs:e=>{let{args:n}=e;return{tokenizedExpressions:tS(n).map(Jw)}},build:e=>({inlets:zi(nS(e.tokenizedExpressions),(e=>{let{id:n,type:t}=e;return["".concat(n),{type:"signal"===t?"signal":"message",id:"".concat(n)}]})),outlets:zi(e.tokenizedExpressions,((e,n)=>["".concat(n),{type:"signal",id:"".concat(n)}]))})},qw=()=>({state:e=>{let{node:{args:n},ns:t}=e;return Gi(t.State,[Ui("Map<Int, Float>","floatInputs","new Map()"),Ui("Map<Int, string>","stringInputs","new Map()"),Ui("Array<Float>","outputs","new Array(".concat(n.tokenizedExpressions.length,")"))])},initialization:e=>{let{node:{args:n,type:t},state:a}=e;const i="expr"===t?eS(n.tokenizedExpressions):nS(n.tokenizedExpressions).filter((e=>{let{type:n}=e;return"signal"!==n}));return qi(Uw||(Uw=r(["\n            ","\n            ","\n        "])),i.filter((e=>"float"===e.type||"int"===e.type)).map((e=>"".concat(a,".floatInputs.set(").concat(e.id,", 0)"))),i.filter((e=>"string"===e.type)).map((e=>"".concat(a,".stringInputs.set(").concat(e.id,", '')"))))},messageReceivers:(e,n)=>{let{snds:t,state:a,node:{args:i,type:o}}=e;const{bangUtils:s,tokenConversion:l,msg:c}=n,u="expr"===o?eS(i.tokenizedExpressions):nS(i.tokenizedExpressions).filter((e=>{let{type:n}=e;return"signal"!==n})),d=u.length&&0===u[0].id;return _r({0:Vi([Ui(c.Message,"m")])(Ww||(Ww=r(["\n                if (!","(m)) {\n                    for (","; i < ","(m); i++) {\n                        ",".stringInputs.set(i, ","(m, i))\n                        ",".floatInputs.set(i, ","(m, i))\n                    }\n                }\n    \n                ","\n                \n                return\n            "])),s.isBang,Ui("Int","i","0"),c.getLength,a,l.toString_,a,l.toFloat,"expr"===o?"\n                    ".concat(i.tokenizedExpressions.map(((e,t)=>"".concat(a,".outputs[").concat(t,"] = ").concat(Zw(a,null,e,n)))),"\n            \n                    ").concat(i.tokenizedExpressions.map(((e,n)=>"".concat(t["".concat(n)],"(").concat(c.floats,"([").concat(a,".outputs[").concat(n,"]]))"))),"\n                "):null)},zi(u.slice(d?1:0),(e=>{let{id:n,type:t}=e;if("float"===t||"int"===t)return["".concat(n),Vi([Ui(c.Message,"m")])($w||($w=r(["\n                                ",".floatInputs.set(",", ","(m, 0))\n                                return\n                            "])),a,n,l.toFloat)];if("string"===t)return["".concat(n),Vi([Ui(c.Message,"m")])(Vw||(Vw=r(["\n                                ",".stringInputs.set(",", ","(m, 0))\n                                return\n                            "])),a,n,l.toString_)];throw new Error("invalid input type ".concat(t))})))},dependencies:[Kb,qb,ky,Op,Gs]}),Kw=qw(),Yw=_r(_r({},qw()),{},{flags:{alphaName:"expr_t"},dsp:(e,n)=>{let{node:{args:t},state:r,outs:a,ins:i}=e;return Hi(t.tokenizedExpressions.map(((e,t)=>"".concat(a[t]," = ").concat(Zw(r,i,e,n)))))}}),Xw=gi(/(\$f([0-9]+))|(\$v([0-9]+))|(\$i([0-9]+))|(\$s([0-9]+)\s*\[([^\[\]]*)\])/,{f:1,id_f:2,v:3,id_v:4,i:5,id_i:6,s:7,id_s:8,sIndex:9}),Jw=e=>{let n,t=[];for(;n=Xw.exec(e);)n.index&&t.push({type:"raw",content:e.slice(0,n.index)}),n[1]?t.push({type:"float",id:parseInt(n[2])-1}):n[3]?t.push({type:"signal",id:parseInt(n[4])-1}):n[5]?t.push({type:"int",id:parseInt(n[6])-1}):n[7]&&(t=[...t,{type:"string",id:parseInt(n[8])-1},{type:"indexing-start"},...Jw(n[9]),{type:"indexing-end"}]),e=e.slice(n.index+n[0].length);return e.length&&t.push({type:"raw",content:e}),t},Zw=(e,n,t,r)=>{let{numbers:a,commons:i}=r;return"+("+t.map((t=>{switch(t.type){case"float":return"".concat(e,".floatInputs.get(").concat(t.id,")");case"signal":if(null===n)throw new Error("invalid token signal received");return n[t.id];case"int":return"".concat(a.roundFloatAsPdInt,"(").concat(e,".floatInputs.get(").concat(t.id,"))");case"string":return"".concat(i.getArray,"(").concat(e,".stringInputs.get(").concat(t.id,"))");case"indexing-start":return"[toInt(";case"indexing-end":return")]";case"raw":return t.content}})).join("")+")"},Qw=e=>{const n=[];e.forEach((e=>{e.forEach((e=>{"float"!==e.type&&"signal"!==e.type&&"int"!==e.type&&"string"!==e.type||n.push(e)}))})),n.sort(((e,n)=>{let{id:t}=e,{id:r}=n;return t-r}));const t=new Map;return n.filter((e=>{if(t.has(e.id)){if(t.get(e.id).type!==e.type)throw new Error("contradictory definitions for input ".concat(e.id));return!1}return t.set(e.id,e),!0}))},eS=e=>{const n=Qw(e);return n.forEach((e=>{if("signal"===e.type)throw new Error("invalid signal token $v# for [expr]")})),n},nS=e=>Qw(e),tS=e=>{let n=e.join(" ");return Object.getOwnPropertyNames(Math).forEach((e=>{n=n.replaceAll(e,"Math.".concat(e))})),n.split(";").map((e=>e.trim()))},rS={expr:Kw,"expr~":Yw},aS={expr:Gw,"expr~":Hw};var iS,oS,sS,lS;const cS=e=>({translateArgs:n=>{const t=ru(n.args[0]);return{value:void 0!==t?t:e}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}})}),uS=e=>{let{operationName:n,generateOperation:t,dependencies:a=[],prepareLeftOp:i,prepareRightOp:o}=e;return{flags:{alphaName:n},state:e=>{let{ns:n}=e;return Gi(n.State,[Ui("Float","leftOp",0),Ui("Float","rightOp",0)])},initialization:e=>{let{ns:n,state:t,node:{args:a}}=e;return qi(iS||(iS=r(["\n            ","(",", 0)\n            ","(",", ",")\n        "])),n.setLeft,t,n.setRight,t,a.value)},messageReceivers:(e,n)=>{let{ns:a,state:i,snds:o}=e;const{bangUtils:s,msg:l}=n;return{0:Vi([Ui(l.Message,"m")])(oS||(oS=r(["\n                    if (","(m, [","])) {\n                        ","(",", ","(m, 0))\n                        ","(","([","]))\n                        return\n                    \n                    } else if (","(m)) {\n                        ","(","([","]))\n                        return\n                    }\n                "])),l.isMatching,l.FLOAT_TOKEN,a.setLeft,i,l.readFloatToken,o.$0,l.floats,t(i,n),s.isBang,o.$0,l.floats,t(i,n)),1:hu(a.setRight,i,l)}},core:e=>{let{ns:n}=e;return Hi([$i(n.setLeft,[Ui(n.State,"state"),Ui("Float","value")],"void")(sS||(sS=r(["\n                    state.leftOp = ","\n                "])),i||"value"),$i(n.setRight,[Ui(n.State,"state"),Ui("Float","value")],"void")(lS||(lS=r(["\n                    state.rightOp = ","\n                "])),o||"value")])},dependencies:[Op,...a]}},dS={"+":uS({operationName:"add",generateOperation:e=>"".concat(e,".leftOp + ").concat(e,".rightOp")}),"-":uS({operationName:"sub",generateOperation:e=>"".concat(e,".leftOp - ").concat(e,".rightOp")}),"*":uS({operationName:"mul",generateOperation:e=>"".concat(e,".leftOp * ").concat(e,".rightOp")}),"/":uS({operationName:"div",generateOperation:e=>"".concat(e,".rightOp !== 0 ? ").concat(e,".leftOp / ").concat(e,".rightOp: 0")}),max:uS({operationName:"max",generateOperation:e=>"Math.max(".concat(e,".leftOp, ").concat(e,".rightOp)")}),min:uS({operationName:"min",generateOperation:e=>"Math.min(".concat(e,".leftOp, ").concat(e,".rightOp)")}),mod:uS({operationName:"mod",prepareLeftOp:"value > 0 ? Math.floor(value): Math.ceil(value)",prepareRightOp:"Math.floor(Math.abs(value))",generateOperation:e=>"".concat(e,".rightOp !== 0 ? (").concat(e,".rightOp + (").concat(e,".leftOp % ").concat(e,".rightOp)) % ").concat(e,".rightOp: 0")}),"%":uS({operationName:"modlegacy",generateOperation:e=>"".concat(e,".leftOp % ").concat(e,".rightOp")}),pow:uS({operationName:"pow",generateOperation:(e,n)=>{let{funcs:t}=n;return"".concat(t.pow,"(").concat(e,".leftOp, ").concat(e,".rightOp)")},dependencies:[Hf]}),log:uS({operationName:"log",generateOperation:e=>"Math.log(".concat(e,".leftOp) / Math.log(").concat(e,".rightOp)")}),"||":uS({operationName:"or",prepareLeftOp:"Math.floor(Math.abs(value))",prepareRightOp:"Math.floor(Math.abs(value))",generateOperation:e=>"".concat(e,".leftOp || ").concat(e,".rightOp ? 1: 0")}),"&&":uS({operationName:"and",prepareLeftOp:"Math.floor(Math.abs(value))",prepareRightOp:"Math.floor(Math.abs(value))",generateOperation:e=>"".concat(e,".leftOp && ").concat(e,".rightOp ? 1: 0")}),">":uS({operationName:"gt",generateOperation:e=>"".concat(e,".leftOp > ").concat(e,".rightOp ? 1: 0")}),">=":uS({operationName:"gte",generateOperation:e=>"".concat(e,".leftOp >= ").concat(e,".rightOp ? 1: 0")}),"<":uS({operationName:"lt",generateOperation:e=>"".concat(e,".leftOp < ").concat(e,".rightOp ? 1: 0")}),"<=":uS({operationName:"lte",generateOperation:e=>"".concat(e,".leftOp <= ").concat(e,".rightOp ? 1: 0")}),"==":uS({operationName:"eq",generateOperation:e=>"".concat(e,".leftOp == ").concat(e,".rightOp ? 1: 0")}),"!=":uS({operationName:"neq",generateOperation:e=>"".concat(e,".leftOp != ").concat(e,".rightOp ? 1: 0")})},pS={"+":cS(0),"-":cS(0),"*":cS(1),"/":cS(1),max:cS(0),min:cS(1),mod:cS(0),"%":cS(0),pow:cS(0),log:cS(Math.E),"||":cS(0),"&&":cS(0),">":cS(0),">=":cS(0),"<":cS(0),"<=":cS(0),"==":cS(0),"!=":cS(0)},fS=_r(_r(_r(_r(_r(_r(_r(_r(_r(_r(_r(_r(_r(_r(_r(_r(_r(_r({},eu),Hy),nh),Wp),xv),Tv),dv),Sg),Cb),Cb),Mh),{},{"noise~":{translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"signal",id:"0"}}})},"snapshot~":Zp,"sig~":gu,"samphold~":Kp,"clip~":Vp,"vline~":{translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"signal",id:"0"}}})},"line~":Sf,"dac~":gp,"adc~":vp,"samplerate~":{translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}})},"tabplay~":Bh,"tabwrite~":Ih,"readsf~":Nm,"writesf~":Dm,"vd~":{aliasTo:"delread4~"},"bp~":Hm,"hip~":Nv,"lop~":Lv,"vcf~":$v,"delwrite~":yv,"s~":{aliasTo:"send~"},"r~":{aliasTo:"receive~"}},iy),vy),pS),Ly),Cy),aS),{},{bang:uy,bng:{aliasTo:"bang"},b:{aliasTo:"bang"},list:Sb,symbol:_b,loadbang:{translateArgs:()=>({}),build:()=>({inlets:{},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0})},s:{aliasTo:"send"},r:{aliasTo:"receive"},print:{translateArgs:e=>{let n="print:";return 1===e.args.length&&"-n"===e.args[0]?n="":e.args.length>=1&&(n=e.args.join(" ")+":"),{prefix:n}},build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{}})},trigger:Xb,t:{aliasTo:"trigger"},change:Qb,clip:iw,pipe:Nw,moses:tw,pack:Lw,unpack:zw,spigot:hw,until:{translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}})},random:Sw,route:uw,select:{aliasTo:"route"},sel:{aliasTo:"route"},msg:sb,metro:Ng,timer:Lg,delay:$g,del:{aliasTo:"delay"},line:jf,soundfiler:{translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}}})},tabread:uh,tabwrite:gh,"_mixer~":su,_routemsg:bu,graph:{isNoop:!0},table:{isNoop:!0},array:{isNoop:!0},text:{isNoop:!0},cnv:{isNoop:!0},"block~":{isNoop:!0},openpanel:{isNoop:!0}}),hS=_r(_r(_r(_r(_r(_r(_r(_r(_r(_r(_r(_r(_r(_r(_r(_r({},Gy),eh),Up),kv),Ev),pv),xg),Nb),Ph),{},{"noise~":Yy,"snapshot~":Qp,"sig~":yu,"samphold~":Yp,"clip~":Gp,"vline~":mf,"line~":xf,"dac~":yp,"adc~":bp,"samplerate~":Pp,"tabplay~":Uh,"tabwrite~":_h,"readsf~":Mm,"writesf~":jm,"delwrite~":vv,"bp~":qm,"hip~":Mv,"lop~":Dv,"vcf~":Vv},ay),by),dS),Ny),Ry),rS),{},{bang:dy,list:xb,symbol:Ab,loadbang:Sy,print:zb,trigger:Jb,change:ew,clip:ow,pipe:Mw,moses:rw,pack:Dw,unpack:Bw,spigot:mw,until:vw,route:dw,random:xw,msg:lb,metro:Mg,timer:Dg,delay:Vg,line:zf,tabread:dh,tabwrite:yh,soundfiler:Db,"_mixer~":lu,_routemsg:wu}),mS=(e,n,t)=>{const r=Bc(e);return Object.values(r.nodes).map((e=>{const a=_u(r.id,e.id),i=n[a];return i&&i.type===t?i:null})).filter((e=>null!==e))},gS=(e,n)=>{const t=Hu(e),r=[];return Ku(t,(e=>{if("control"!==e.nodeClass)return;const t=n[e.nodeId];t&&r.push(t)})),r},yS=(e,n,t)=>{const r={pdNodes:{},graph:{},pdGui:[]},a=e.io||{};if(a.messageReceivers||(a.messageReceivers=_r(_r({},((e,n)=>gS(e,n).reduce(((e,n)=>_r(_r({},e),{},{[n.id]:["0"]})),{}))(t,n)),((e,n)=>mS(e,n,"send").reduce(((e,n)=>_r(_r({},e),{},{[n.id]:["0"]})),{}))(t,n))),a.messageSenders||(a.messageSenders=_r(_r({},((e,n)=>gS(e,n).reduce(((e,n)=>_r(_r({},e),{},{[n.id]:["0"]})),{}))(t,n)),((e,n)=>mS(e,n,"receive").reduce(((e,n)=>_r(_r({},e),{},{[n.id]:["0"]})),{}))(t,n))),Object.keys(a.messageReceivers).forEach((e=>{r.graph[e]=n[e]})),Object.keys(a.messageSenders).forEach((e=>{r.graph[e]=n[e]})),t){const e=Hu(t);Ku(e,(e=>{if(r.pdNodes[e.patchId]=r.pdNodes[e.patchId]||{},r.pdNodes[e.patchId][e.pdNodeId]=t.patches[e.patchId].nodes[e.pdNodeId],"control"===e.nodeClass){const t=n[e.nodeId];t&&(r.graph[e.nodeId]=t)}})),r.pdGui=e}return _r(_r({},e),{},{io:a,customMetadata:_r(_r({},e.customMetadata||{}),r)})},vS=async e=>{throw new Pi(e)},bS=async(e,n,t)=>{let{nodeBuilders:r,nodeImplementations:a,audioSettings:i,renderAudioSettings:o,io:s={},abstractionLoader:l}=t,c=[],u=[];switch(n){case"pdJson":const t=Ai(e.pd);return 0===t.status?(e.pdJson=t.pd,{status:0,warnings:SS(t.warnings)}):{status:1,warnings:SS(t.warnings),errors:SS(t.errors)};case"dspGraph":const p=await Eu(e.pdJson,r,l);if(p.abstractionsLoadingWarnings&&(c=Object.entries(p.abstractionsLoadingWarnings).filter((e=>{let[n,t]=e;return!!t.length})).flatMap((e=>{let[n,t]=e;return["Warnings when parsing abstraction ".concat(n," :"),...SS(t)]}))),0===p.status)return e.dspGraph=p,{status:0,warnings:c};{const e=Object.values(p.abstractionsLoadingErrors).filter((e=>!!e.unknownNodeType)).map((e=>e.unknownNodeType));return e.length&&(u=[...u,...wS(new Set(e))]),u=[...u,...Object.entries(p.abstractionsLoadingErrors).filter((e=>{let[n,t]=e;return!!t.parsingErrors})).flatMap((e=>{let[n,t]=e;return["Failed to parse abstraction ".concat(n," :"),...SS(t.parsingErrors)]}))],{status:1,errors:u,warnings:c}}case"javascript":case"assemblyscript":const f=Sc(e.dspGraph.graph,a,n,yS({audio:i,io:s,arrays:e.dspGraph.arrays},e.dspGraph.graph,e.pdJson));return"javascript"===n?e.javascript=f.code:e.assemblyscript=f.code,{status:0,warnings:[]};case"wasm":try{e.wasm=await(async(e,n)=>{if(!Ha)throw new Error("assemblyscript compiler was not set properly. Please use WebPd's setAsc function to initialize it.");const t={optimizeLevel:3,runtime:"incremental",exportRuntime:!0,sourceMap:!0};32===n&&(t.use=["Math=NativeMathf"]);const{error:r,binary:a,stderr:i}=await Ha.compileString(e,t);if(r)throw new Error(i.toString());return a.buffer})(Fi(e,"assemblyscript"),i.bitDepth)}catch(d){return{status:1,errors:[d.message],warnings:[]}}return{status:0,warnings:[]};case"wav":return e.wav=await(async(e,n,t)=>{let r="assemblyscript";if(!n.wasm&&!n.javascript)throw new Error("Need compiled wasm or compiled js to render wav");n.wasm||(r="javascript");const a=await sp(n,r),i=await lp(a,e,t);return op(i,t.sampleRate)})(o.previewDurationSeconds,e,_r(_r({},i),o)),{status:0,warnings:[]};case"app":return e.app=await(async e=>{if(!e.javascript&&!e.wasm)throw new Error("Needs at least javascript or wasm to run");let n,t,r,a;e.javascript?(n="javascript",t="patch.js",r=await Dc("javascript",e.javascript),a=e.javascript):(n="assemblyscript",t="patch.wasm",r=await Dc("assemblyscript",e.wasm),a=e.wasm);const i=r.customMetadata;if(!i.pdGui||!i.graph||!i.pdNodes)throw new Error("Missing data in WebPd metadata");return{[Ju]:"var WebPdRuntime = (function (exports) {\n  'use strict';\n\n  var WEB_PD_WORKLET_PROCESSOR_CODE = \"/*\\n * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\\n *\\n * This file is part of WebPd\\n * (see https://github.com/sebpiq/WebPd).\\n *\\n * This program is free software: you can redistribute it and/or modify\\n * it under the terms of the GNU Lesser General Public License as published by\\n * the Free Software Foundation, either version 3 of the License, or\\n * (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n * GNU Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\\n */\\nconst FS_CALLBACK_NAMES = [\\n    'onReadSoundFile',\\n    'onOpenSoundReadStream',\\n    'onWriteSoundFile',\\n    'onOpenSoundWriteStream',\\n    'onSoundStreamData',\\n    'onCloseSoundStream',\\n];\\nclass WasmWorkletProcessor extends AudioWorkletProcessor {\\n    constructor() {\\n        super();\\n        this.port.onmessage = this.onMessage.bind(this);\\n        this.settings = {\\n            blockSize: null,\\n            sampleRate,\\n        };\\n        this.dspConfigured = false;\\n        this.engine = null;\\n    }\\n    process(inputs, outputs) {\\n        const output = outputs[0];\\n        const input = inputs[0];\\n        if (!this.dspConfigured) {\\n            if (!this.engine) {\\n                return true;\\n            }\\n            this.settings.blockSize = output[0].length;\\n            this.engine.initialize(this.settings.sampleRate, this.settings.blockSize);\\n            this.dspConfigured = true;\\n        }\\n        this.engine.dspLoop(input, output);\\n        return true;\\n    }\\n    onMessage(messageEvent) {\\n        const message = messageEvent.data;\\n        switch (message.type) {\\n            case 'code:WASM':\\n                this.setWasm(message.payload.wasmBuffer);\\n                break;\\n            case 'code:JS':\\n                this.setJsCode(message.payload.jsCode);\\n                break;\\n            case 'io:messageReceiver':\\n                this.engine.io.messageReceivers[message.payload.nodeId][message.payload.portletId](message.payload.message);\\n                break;\\n            case 'fs':\\n                const returned = this.engine.globals.fs[message.payload.functionName].apply(null, message.payload.arguments);\\n                this.port.postMessage({\\n                    type: 'fs',\\n                    payload: {\\n                        functionName: message.payload.functionName + '_return',\\n                        operationId: message.payload.arguments[0],\\n                        returned,\\n                    },\\n                });\\n                break;\\n            case 'destroy':\\n                this.destroy();\\n                break;\\n            default:\\n                new Error(`unknown message type ${message.type}`);\\n        }\\n    }\\n    // TODO : control for channelCount of wasmModule\\n    setWasm(wasmBuffer) {\\n        return AssemblyScriptWasmBindings.createEngine(wasmBuffer).then((engine) => this.setEngine(engine));\\n    }\\n    setJsCode(code) {\\n        const engine = JavaScriptBindings.createEngine(code);\\n        this.setEngine(engine);\\n    }\\n    setEngine(engine) {\\n        if (engine.globals.fs) {\\n            FS_CALLBACK_NAMES.forEach((functionName) => {\\n                engine.globals.fs[functionName] = (...args) => {\\n                    // We don't use transferables, because that would imply reallocating each time new array in the engine.\\n                    this.port.postMessage({\\n                        type: 'fs',\\n                        payload: {\\n                            functionName,\\n                            arguments: args,\\n                        },\\n                    });\\n                };\\n            });\\n        }\\n        Object.entries(engine.metadata.settings.io.messageSenders).forEach(([nodeId, portletIds]) => {\\n            portletIds.forEach((portletId) => {\\n                engine.io.messageSenders[nodeId][portletId] = (message) => {\\n                    this.port.postMessage({\\n                        type: 'io:messageSender',\\n                        payload: {\\n                            nodeId,\\n                            portletId,\\n                            message,\\n                        },\\n                    });\\n                };\\n            });\\n        });\\n        this.engine = engine;\\n        this.dspConfigured = false;\\n    }\\n    destroy() {\\n        this.process = () => false;\\n    }\\n}\\nregisterProcessor('webpd-node', WasmWorkletProcessor);\\n\";\n\n  var ASSEMBLY_SCRIPT_WASM_BINDINGS_CODE = \"var AssemblyScriptWasmBindings = (function (exports) {\\n    'use strict';\\n\\n    const _proxyGetHandlerThrowIfKeyUnknown = (target, key, path) => {\\n        if (!(key in target)) {\\n            if ([\\n                'toJSON',\\n                'Symbol(Symbol.toStringTag)',\\n                'constructor',\\n                '$typeof',\\n                '$$typeof',\\n                '@@__IMMUTABLE_ITERABLE__@@',\\n                '@@__IMMUTABLE_RECORD__@@',\\n                'then',\\n            ].includes(key)) {\\n                return true;\\n            }\\n            throw new Error(`namespace${path ? ` <${path.keys.join('.')}>` : ''} doesn't know key \\\"${String(key)}\\\"`);\\n        }\\n        return false;\\n    };\\n\\n    const getFloatArrayType = (bitDepth) => bitDepth === 64 ? Float64Array : Float32Array;\\n    const proxyAsModuleWithBindings = (rawModule, bindings) => new Proxy({}, {\\n        get: (_, k) => {\\n            if (bindings.hasOwnProperty(k)) {\\n                const key = String(k);\\n                const bindingSpec = bindings[key];\\n                switch (bindingSpec.type) {\\n                    case 'raw':\\n                        if (k in rawModule) {\\n                            return rawModule[key];\\n                        }\\n                        else {\\n                            throw new Error(`Key ${String(key)} doesn't exist in raw module`);\\n                        }\\n                    case 'proxy':\\n                    case 'callback':\\n                        return bindingSpec.value;\\n                }\\n            }\\n            else {\\n                return undefined;\\n            }\\n        },\\n        has: function (_, k) {\\n            return k in bindings;\\n        },\\n        set: (_, k, newValue) => {\\n            if (bindings.hasOwnProperty(String(k))) {\\n                const key = String(k);\\n                const bindingSpec = bindings[key];\\n                if (bindingSpec.type === 'callback') {\\n                    bindingSpec.value = newValue;\\n                }\\n                else {\\n                    throw new Error(`Binding key ${String(key)} is read-only`);\\n                }\\n            }\\n            else {\\n                throw new Error(`Key ${String(k)} is not defined in bindings`);\\n            }\\n            return true;\\n        },\\n    });\\n    const proxyWithEngineNameMapping = (rawModule, variableNamesIndex) => proxyWithNameMapping(rawModule, {\\n        globals: variableNamesIndex.globals,\\n        io: variableNamesIndex.io,\\n    });\\n    const proxyWithNameMapping = (rawModule, variableNamesIndex) => {\\n        if (typeof variableNamesIndex === 'string') {\\n            return rawModule[variableNamesIndex];\\n        }\\n        else if (typeof variableNamesIndex === 'object') {\\n            return new Proxy(rawModule, {\\n                get: (_, k) => {\\n                    const key = String(k);\\n                    if (key in rawModule) {\\n                        return Reflect.get(rawModule, key);\\n                    }\\n                    else if (key in variableNamesIndex) {\\n                        const nextVariableNames = variableNamesIndex[key];\\n                        return proxyWithNameMapping(rawModule, nextVariableNames);\\n                    }\\n                    else if (_proxyGetHandlerThrowIfKeyUnknown(rawModule, key)) {\\n                        return undefined;\\n                    }\\n                },\\n                has: function (_, k) {\\n                    return k in rawModule || k in variableNamesIndex;\\n                },\\n                set: (_, k, value) => {\\n                    const key = String(k);\\n                    if (key in variableNamesIndex) {\\n                        const variableName = variableNamesIndex[key];\\n                        if (typeof variableName !== 'string') {\\n                            throw new Error(`Failed to set value for key ${String(k)}: variable name is not a string`);\\n                        }\\n                        return Reflect.set(rawModule, variableName, value);\\n                    }\\n                    else {\\n                        throw new Error(`Key ${String(k)} is not defined in raw module`);\\n                    }\\n                },\\n            });\\n        }\\n        else {\\n            throw new Error(`Invalid name mapping`);\\n        }\\n    };\\n\\n    const liftString = (rawModule, pointer) => {\\n        if (!pointer) {\\n            throw new Error('Cannot lift a null pointer');\\n        }\\n        pointer = pointer >>> 0;\\n        const end = (pointer +\\n            new Uint32Array(rawModule.memory.buffer)[(pointer - 4) >>> 2]) >>>\\n            1;\\n        const memoryU16 = new Uint16Array(rawModule.memory.buffer);\\n        let start = pointer >>> 1;\\n        let string = '';\\n        while (end - start > 1024) {\\n            string += String.fromCharCode(...memoryU16.subarray(start, (start += 1024)));\\n        }\\n        return string + String.fromCharCode(...memoryU16.subarray(start, end));\\n    };\\n    const lowerString = (rawModule, value) => {\\n        if (value == null) {\\n            throw new Error('Cannot lower a null string');\\n        }\\n        const length = value.length, pointer = rawModule.__new(length << 1, 1) >>> 0, memoryU16 = new Uint16Array(rawModule.memory.buffer);\\n        for (let i = 0; i < length; ++i)\\n            memoryU16[(pointer >>> 1) + i] = value.charCodeAt(i);\\n        return pointer;\\n    };\\n    const readTypedArray = (rawModule, constructor, pointer) => {\\n        if (!pointer) {\\n            throw new Error('Cannot lift a null pointer');\\n        }\\n        const memoryU32 = new Uint32Array(rawModule.memory.buffer);\\n        return new constructor(rawModule.memory.buffer, memoryU32[(pointer + 4) >>> 2], memoryU32[(pointer + 8) >>> 2] / constructor.BYTES_PER_ELEMENT);\\n    };\\n    const lowerFloatArray = (rawModule, bitDepth, data) => {\\n        const arrayType = getFloatArrayType(bitDepth);\\n        const arrayPointer = rawModule.globals.core.createFloatArray(data.length);\\n        const array = readTypedArray(rawModule, arrayType, arrayPointer);\\n        array.set(data);\\n        return { array, arrayPointer };\\n    };\\n    const lowerListOfFloatArrays = (rawModule, bitDepth, data) => {\\n        const arraysPointer = rawModule.globals.core.x_createListOfArrays();\\n        data.forEach((array) => {\\n            const { arrayPointer } = lowerFloatArray(rawModule, bitDepth, array);\\n            rawModule.globals.core.x_pushToListOfArrays(arraysPointer, arrayPointer);\\n        });\\n        return arraysPointer;\\n    };\\n    const readListOfFloatArrays = (rawModule, bitDepth, listOfArraysPointer) => {\\n        const listLength = rawModule.globals.core.x_getListOfArraysLength(listOfArraysPointer);\\n        const arrays = [];\\n        const arrayType = getFloatArrayType(bitDepth);\\n        for (let i = 0; i < listLength; i++) {\\n            const arrayPointer = rawModule.globals.core.x_getListOfArraysElem(listOfArraysPointer, i);\\n            arrays.push(readTypedArray(rawModule, arrayType, arrayPointer));\\n        }\\n        return arrays;\\n    };\\n\\n    const instantiateWasmModule = async (wasmBuffer, wasmImports = {}) => {\\n        const instanceAndModule = await WebAssembly.instantiate(wasmBuffer, {\\n            env: {\\n                abort: (messagePointer, _, lineNumber, columnNumber) => {\\n                    const message = liftString(wasmExports, messagePointer);\\n                    lineNumber = lineNumber;\\n                    columnNumber = columnNumber;\\n                    (() => {\\n                        throw Error(`${message} at ${lineNumber}:${columnNumber}`);\\n                    })();\\n                },\\n                seed: () => {\\n                    return (() => {\\n                        return Date.now() * Math.random();\\n                    })();\\n                },\\n                'console.log': (textPointer) => {\\n                    console.log(liftString(wasmExports, textPointer));\\n                },\\n            },\\n            ...wasmImports,\\n        });\\n        const wasmExports = instanceAndModule.instance\\n            .exports;\\n        return instanceAndModule.instance;\\n    };\\n\\n    const updateWasmInOuts = ({ refs, cache, }) => {\\n        cache.wasmOutput = readTypedArray(refs.rawModule, cache.arrayType, refs.rawModule.globals.core.x_getOutput());\\n        cache.wasmInput = readTypedArray(refs.rawModule, cache.arrayType, refs.rawModule.globals.core.x_getInput());\\n    };\\n    const createEngineLifecycleBindings = (engineContext) => {\\n        const { refs, cache, metadata } = engineContext;\\n        return {\\n            initialize: {\\n                type: 'proxy',\\n                value: (sampleRate, blockSize) => {\\n                    metadata.settings.audio.blockSize = blockSize;\\n                    metadata.settings.audio.sampleRate = sampleRate;\\n                    cache.blockSize = blockSize;\\n                    refs.rawModule.initialize(sampleRate, blockSize);\\n                    updateWasmInOuts(engineContext);\\n                },\\n            },\\n            dspLoop: {\\n                type: 'proxy',\\n                value: (input, output) => {\\n                    for (let channel = 0; channel < input.length; channel++) {\\n                        cache.wasmInput.set(input[channel], channel * cache.blockSize);\\n                    }\\n                    updateWasmInOuts(engineContext);\\n                    refs.rawModule.dspLoop();\\n                    updateWasmInOuts(engineContext);\\n                    for (let channel = 0; channel < output.length; channel++) {\\n                        output[channel].set(cache.wasmOutput.subarray(cache.blockSize * channel, cache.blockSize * (channel + 1)));\\n                    }\\n                },\\n            },\\n        };\\n    };\\n\\n    const createCommonsBindings = (engineContext) => {\\n        const { refs, cache } = engineContext;\\n        return {\\n            getArray: {\\n                type: 'proxy',\\n                value: (arrayName) => {\\n                    const arrayNamePointer = lowerString(refs.rawModule, arrayName);\\n                    const arrayPointer = refs.rawModule.globals.commons.getArray(arrayNamePointer);\\n                    return readTypedArray(refs.rawModule, cache.arrayType, arrayPointer);\\n                },\\n            },\\n            setArray: {\\n                type: 'proxy',\\n                value: (arrayName, array) => {\\n                    const stringPointer = lowerString(refs.rawModule, arrayName);\\n                    const { arrayPointer } = lowerFloatArray(refs.rawModule, cache.bitDepth, array);\\n                    refs.rawModule.globals.commons.setArray(stringPointer, arrayPointer);\\n                    updateWasmInOuts(engineContext);\\n                },\\n            },\\n        };\\n    };\\n\\n    const readMetadata = async (wasmBuffer) => {\\n        const inputImports = {};\\n        const wasmModule = WebAssembly.Module.imports(new WebAssembly.Module(wasmBuffer));\\n        wasmModule\\n            .filter((imprt) => imprt.module === 'input' && imprt.kind === 'function')\\n            .forEach((imprt) => (inputImports[imprt.name] = () => undefined));\\n        const wasmInstance = await instantiateWasmModule(wasmBuffer, {\\n            input: inputImports,\\n        });\\n        const rawModule = wasmInstance.exports;\\n        const stringPointer = rawModule.metadata.valueOf();\\n        const metadataJSON = liftString(rawModule, stringPointer);\\n        return JSON.parse(metadataJSON);\\n    };\\n\\n    const mapArray = (src, func) => {\\n        const dest = {};\\n        src.forEach((srcValue, i) => {\\n            const [key, destValue] = func(srcValue, i);\\n            dest[key] = destValue;\\n        });\\n        return dest;\\n    };\\n\\n    const liftMessage = (rawModule, messagePointer) => {\\n        const messageTokenTypesPointer = rawModule.globals.msg.x_getTokenTypes(messagePointer);\\n        const messageTokenTypes = readTypedArray(rawModule, Int32Array, messageTokenTypesPointer);\\n        const message = [];\\n        messageTokenTypes.forEach((tokenType, tokenIndex) => {\\n            if (tokenType === rawModule.globals.msg.FLOAT_TOKEN.valueOf()) {\\n                message.push(rawModule.globals.msg.readFloatToken(messagePointer, tokenIndex));\\n            }\\n            else if (tokenType === rawModule.globals.msg.STRING_TOKEN.valueOf()) {\\n                const stringPointer = rawModule.globals.msg.readStringToken(messagePointer, tokenIndex);\\n                message.push(liftString(rawModule, stringPointer));\\n            }\\n        });\\n        return message;\\n    };\\n    const lowerMessage = (rawModule, message) => {\\n        const template = message.reduce((template, value) => {\\n            if (typeof value === 'number') {\\n                template.push(rawModule.globals.msg.FLOAT_TOKEN.valueOf());\\n            }\\n            else if (typeof value === 'string') {\\n                template.push(rawModule.globals.msg.STRING_TOKEN.valueOf());\\n                template.push(value.length);\\n            }\\n            else {\\n                throw new Error(`invalid message value ${value}`);\\n            }\\n            return template;\\n        }, []);\\n        const templateArrayPointer = rawModule.globals.msg.x_createTemplate(template.length);\\n        const loweredTemplateArray = readTypedArray(rawModule, Int32Array, templateArrayPointer);\\n        loweredTemplateArray.set(template);\\n        const messagePointer = rawModule.globals.msg.x_create(templateArrayPointer);\\n        message.forEach((value, index) => {\\n            if (typeof value === 'number') {\\n                rawModule.globals.msg.writeFloatToken(messagePointer, index, value);\\n            }\\n            else if (typeof value === 'string') {\\n                const stringPointer = lowerString(rawModule, value);\\n                rawModule.globals.msg.writeStringToken(messagePointer, index, stringPointer);\\n            }\\n        });\\n        return messagePointer;\\n    };\\n\\n    const createIoMessageReceiversBindings = ({ metadata, refs, }) => Object.entries(metadata.settings.io.messageReceivers).reduce((bindings, [nodeId, spec]) => ({\\n        ...bindings,\\n        [nodeId]: {\\n            type: 'proxy',\\n            value: mapArray(spec, (inletId) => [\\n                inletId,\\n                (message) => {\\n                    const messagePointer = lowerMessage(refs.rawModule, message);\\n                    refs.rawModule.io.messageReceivers[nodeId][inletId](messagePointer);\\n                },\\n            ]),\\n        },\\n    }), {});\\n    const createIoMessageSendersBindings = ({ metadata, }) => Object.entries(metadata.settings.io.messageSenders).reduce((bindings, [nodeId, spec]) => ({\\n        ...bindings,\\n        [nodeId]: {\\n            type: 'proxy',\\n            value: mapArray(spec, (outletId) => [\\n                outletId,\\n                (_) => undefined,\\n            ]),\\n        },\\n    }), {});\\n    const ioMsgSendersImports = ({ metadata, refs, }) => {\\n        const wasmImports = {};\\n        const { variableNamesIndex } = metadata.compilation;\\n        Object.entries(metadata.settings.io.messageSenders).forEach(([nodeId, spec]) => {\\n            spec.forEach((outletId) => {\\n                const listenerName = variableNamesIndex.io.messageSenders[nodeId][outletId];\\n                wasmImports[listenerName] = (messagePointer) => {\\n                    const message = liftMessage(refs.rawModule, messagePointer);\\n                    refs.engine.io.messageSenders[nodeId][outletId](message);\\n                };\\n            });\\n        });\\n        return wasmImports;\\n    };\\n\\n    const createFsBindings = (engineContext) => {\\n        const { refs, cache, metadata } = engineContext;\\n        const fsExportedNames = metadata.compilation.variableNamesIndex.globals.fs;\\n        return {\\n            sendReadSoundFileResponse: {\\n                type: 'proxy',\\n                value: 'x_onReadSoundFileResponse' in fsExportedNames\\n                    ? (operationId, status, sound) => {\\n                        let soundPointer = 0;\\n                        if (sound) {\\n                            soundPointer = lowerListOfFloatArrays(refs.rawModule, cache.bitDepth, sound);\\n                        }\\n                        refs.rawModule.globals.fs.x_onReadSoundFileResponse(operationId, status, soundPointer);\\n                        updateWasmInOuts(engineContext);\\n                    }\\n                    : undefined,\\n            },\\n            sendWriteSoundFileResponse: {\\n                type: 'proxy',\\n                value: 'x_onWriteSoundFileResponse' in fsExportedNames\\n                    ? refs.rawModule.globals.fs.x_onWriteSoundFileResponse\\n                    : undefined,\\n            },\\n            sendSoundStreamData: {\\n                type: 'proxy',\\n                value: 'x_onSoundStreamData' in fsExportedNames\\n                    ? (operationId, sound) => {\\n                        const soundPointer = lowerListOfFloatArrays(refs.rawModule, cache.bitDepth, sound);\\n                        const writtenFrameCount = refs.rawModule.globals.fs.x_onSoundStreamData(operationId, soundPointer);\\n                        updateWasmInOuts(engineContext);\\n                        return writtenFrameCount;\\n                    }\\n                    : undefined,\\n            },\\n            closeSoundStream: {\\n                type: 'proxy',\\n                value: 'x_onCloseSoundStream' in fsExportedNames\\n                    ? refs.rawModule.globals.fs.x_onCloseSoundStream\\n                    : undefined,\\n            },\\n            onReadSoundFile: { type: 'callback', value: () => undefined },\\n            onWriteSoundFile: { type: 'callback', value: () => undefined },\\n            onOpenSoundReadStream: { type: 'callback', value: () => undefined },\\n            onOpenSoundWriteStream: { type: 'callback', value: () => undefined },\\n            onSoundStreamData: { type: 'callback', value: () => undefined },\\n            onCloseSoundStream: { type: 'callback', value: () => undefined },\\n        };\\n    };\\n    const createFsImports = (engineContext) => {\\n        const wasmImports = {};\\n        const { cache, metadata, refs } = engineContext;\\n        const exportedNames = metadata.compilation.variableNamesIndex.globals;\\n        if ('fs' in exportedNames) {\\n            const nameMapping = proxyWithNameMapping(wasmImports, exportedNames.fs);\\n            if ('i_readSoundFile' in exportedNames.fs) {\\n                nameMapping.i_readSoundFile = (operationId, urlPointer, infoPointer) => {\\n                    const url = liftString(refs.rawModule, urlPointer);\\n                    const info = liftMessage(refs.rawModule, infoPointer);\\n                    refs.engine.globals.fs.onReadSoundFile(operationId, url, info);\\n                };\\n            }\\n            if ('i_writeSoundFile' in exportedNames.fs) {\\n                nameMapping.i_writeSoundFile = (operationId, soundPointer, urlPointer, infoPointer) => {\\n                    const sound = readListOfFloatArrays(refs.rawModule, cache.bitDepth, soundPointer);\\n                    const url = liftString(refs.rawModule, urlPointer);\\n                    const info = liftMessage(refs.rawModule, infoPointer);\\n                    refs.engine.globals.fs.onWriteSoundFile(operationId, sound, url, info);\\n                };\\n            }\\n            if ('i_openSoundReadStream' in exportedNames.fs) {\\n                nameMapping.i_openSoundReadStream = (operationId, urlPointer, infoPointer) => {\\n                    const url = liftString(refs.rawModule, urlPointer);\\n                    const info = liftMessage(refs.rawModule, infoPointer);\\n                    updateWasmInOuts(engineContext);\\n                    refs.engine.globals.fs.onOpenSoundReadStream(operationId, url, info);\\n                };\\n            }\\n            if ('i_openSoundWriteStream' in exportedNames.fs) {\\n                nameMapping.i_openSoundWriteStream = (operationId, urlPointer, infoPointer) => {\\n                    const url = liftString(refs.rawModule, urlPointer);\\n                    const info = liftMessage(refs.rawModule, infoPointer);\\n                    refs.engine.globals.fs.onOpenSoundWriteStream(operationId, url, info);\\n                };\\n            }\\n            if ('i_sendSoundStreamData' in exportedNames.fs) {\\n                nameMapping.i_sendSoundStreamData = (operationId, blockPointer) => {\\n                    const block = readListOfFloatArrays(refs.rawModule, cache.bitDepth, blockPointer);\\n                    refs.engine.globals.fs.onSoundStreamData(operationId, block);\\n                };\\n            }\\n            if ('i_closeSoundStream' in exportedNames.fs) {\\n                nameMapping.i_closeSoundStream = (...args) => refs.engine.globals.fs.onCloseSoundStream(...args);\\n            }\\n        }\\n        return wasmImports;\\n    };\\n\\n    const createEngine = async (wasmBuffer, additionalBindings) => {\\n        const metadata = await readMetadata(wasmBuffer);\\n        const bitDepth = metadata.settings.audio.bitDepth;\\n        const arrayType = getFloatArrayType(bitDepth);\\n        const engineContext = {\\n            refs: {},\\n            metadata: metadata,\\n            cache: {\\n                wasmOutput: new arrayType(0),\\n                wasmInput: new arrayType(0),\\n                arrayType,\\n                bitDepth,\\n                blockSize: 0,\\n            },\\n        };\\n        const wasmImports = {\\n            ...createFsImports(engineContext),\\n            ...ioMsgSendersImports(engineContext),\\n        };\\n        const wasmInstance = await instantiateWasmModule(wasmBuffer, {\\n            input: wasmImports,\\n        });\\n        engineContext.refs.rawModule = proxyWithEngineNameMapping(wasmInstance.exports, metadata.compilation.variableNamesIndex);\\n        const engineBindings = createEngineBindings(engineContext);\\n        const engine = proxyAsModuleWithBindings(engineContext.refs.rawModule, {\\n            ...engineBindings,\\n            ...(additionalBindings || {}),\\n        });\\n        engineContext.refs.engine = engine;\\n        return engine;\\n    };\\n    const createEngineBindings = (engineContext) => {\\n        const { metadata, refs } = engineContext;\\n        const exportedNames = metadata.compilation.variableNamesIndex.globals;\\n        const io = {\\n            messageReceivers: proxyAsModuleWithBindings(refs.rawModule, createIoMessageReceiversBindings(engineContext)),\\n            messageSenders: proxyAsModuleWithBindings(refs.rawModule, createIoMessageSendersBindings(engineContext)),\\n        };\\n        const globalsBindings = {\\n            commons: {\\n                type: 'proxy',\\n                value: proxyAsModuleWithBindings(refs.rawModule, createCommonsBindings(engineContext)),\\n            },\\n        };\\n        if ('fs' in exportedNames) {\\n            const fs = proxyAsModuleWithBindings(refs.rawModule, createFsBindings(engineContext));\\n            globalsBindings.fs = { type: 'proxy', value: fs };\\n        }\\n        return {\\n            ...createEngineLifecycleBindings(engineContext),\\n            metadata: { type: 'proxy', value: metadata },\\n            globals: {\\n                type: 'proxy',\\n                value: proxyAsModuleWithBindings(refs.rawModule, globalsBindings),\\n            },\\n            io: { type: 'proxy', value: io },\\n        };\\n    };\\n\\n    exports.createEngine = createEngine;\\n    exports.createEngineBindings = createEngineBindings;\\n\\n    return exports;\\n\\n})({});\\n\";\n\n  var JAVA_SCRIPT_BINDINGS_CODE = \"var JavaScriptBindings = (function (exports) {\\n    'use strict';\\n\\n    const _proxyGetHandlerThrowIfKeyUnknown = (target, key, path) => {\\n        if (!(key in target)) {\\n            if ([\\n                'toJSON',\\n                'Symbol(Symbol.toStringTag)',\\n                'constructor',\\n                '$typeof',\\n                '$$typeof',\\n                '@@__IMMUTABLE_ITERABLE__@@',\\n                '@@__IMMUTABLE_RECORD__@@',\\n                'then',\\n            ].includes(key)) {\\n                return true;\\n            }\\n            throw new Error(`namespace${path ? ` <${path.keys.join('.')}>` : ''} doesn't know key \\\"${String(key)}\\\"`);\\n        }\\n        return false;\\n    };\\n\\n    const getFloatArrayType = (bitDepth) => bitDepth === 64 ? Float64Array : Float32Array;\\n    const proxyAsModuleWithBindings = (rawModule, bindings) => new Proxy({}, {\\n        get: (_, k) => {\\n            if (bindings.hasOwnProperty(k)) {\\n                const key = String(k);\\n                const bindingSpec = bindings[key];\\n                switch (bindingSpec.type) {\\n                    case 'raw':\\n                        if (k in rawModule) {\\n                            return rawModule[key];\\n                        }\\n                        else {\\n                            throw new Error(`Key ${String(key)} doesn't exist in raw module`);\\n                        }\\n                    case 'proxy':\\n                    case 'callback':\\n                        return bindingSpec.value;\\n                }\\n            }\\n            else {\\n                return undefined;\\n            }\\n        },\\n        has: function (_, k) {\\n            return k in bindings;\\n        },\\n        set: (_, k, newValue) => {\\n            if (bindings.hasOwnProperty(String(k))) {\\n                const key = String(k);\\n                const bindingSpec = bindings[key];\\n                if (bindingSpec.type === 'callback') {\\n                    bindingSpec.value = newValue;\\n                }\\n                else {\\n                    throw new Error(`Binding key ${String(key)} is read-only`);\\n                }\\n            }\\n            else {\\n                throw new Error(`Key ${String(k)} is not defined in bindings`);\\n            }\\n            return true;\\n        },\\n    });\\n    const proxyWithEngineNameMapping = (rawModule, variableNamesIndex) => proxyWithNameMapping(rawModule, {\\n        globals: variableNamesIndex.globals,\\n        io: variableNamesIndex.io,\\n    });\\n    const proxyWithNameMapping = (rawModule, variableNamesIndex) => {\\n        if (typeof variableNamesIndex === 'string') {\\n            return rawModule[variableNamesIndex];\\n        }\\n        else if (typeof variableNamesIndex === 'object') {\\n            return new Proxy(rawModule, {\\n                get: (_, k) => {\\n                    const key = String(k);\\n                    if (key in rawModule) {\\n                        return Reflect.get(rawModule, key);\\n                    }\\n                    else if (key in variableNamesIndex) {\\n                        const nextVariableNames = variableNamesIndex[key];\\n                        return proxyWithNameMapping(rawModule, nextVariableNames);\\n                    }\\n                    else if (_proxyGetHandlerThrowIfKeyUnknown(rawModule, key)) {\\n                        return undefined;\\n                    }\\n                },\\n                has: function (_, k) {\\n                    return k in rawModule || k in variableNamesIndex;\\n                },\\n                set: (_, k, value) => {\\n                    const key = String(k);\\n                    if (key in variableNamesIndex) {\\n                        const variableName = variableNamesIndex[key];\\n                        if (typeof variableName !== 'string') {\\n                            throw new Error(`Failed to set value for key ${String(k)}: variable name is not a string`);\\n                        }\\n                        return Reflect.set(rawModule, variableName, value);\\n                    }\\n                    else {\\n                        throw new Error(`Key ${String(k)} is not defined in raw module`);\\n                    }\\n                },\\n            });\\n        }\\n        else {\\n            throw new Error(`Invalid name mapping`);\\n        }\\n    };\\n\\n    const createFsModule = (rawModule) => {\\n        const fsExportedNames = rawModule.metadata.compilation.variableNamesIndex.globals.fs;\\n        const fs = proxyAsModuleWithBindings(rawModule, {\\n            onReadSoundFile: { type: 'callback', value: () => undefined },\\n            onWriteSoundFile: { type: 'callback', value: () => undefined },\\n            onOpenSoundReadStream: { type: 'callback', value: () => undefined },\\n            onOpenSoundWriteStream: { type: 'callback', value: () => undefined },\\n            onSoundStreamData: { type: 'callback', value: () => undefined },\\n            onCloseSoundStream: { type: 'callback', value: () => undefined },\\n            sendReadSoundFileResponse: {\\n                type: 'proxy',\\n                value: 'x_onReadSoundFileResponse' in fsExportedNames\\n                    ? rawModule.globals.fs.x_onReadSoundFileResponse\\n                    : undefined,\\n            },\\n            sendWriteSoundFileResponse: {\\n                type: 'proxy',\\n                value: 'x_onWriteSoundFileResponse' in fsExportedNames\\n                    ? rawModule.globals.fs.x_onWriteSoundFileResponse\\n                    : undefined,\\n            },\\n            sendSoundStreamData: {\\n                type: 'proxy',\\n                value: 'x_onSoundStreamData' in fsExportedNames\\n                    ? rawModule.globals.fs.x_onSoundStreamData\\n                    : undefined,\\n            },\\n            closeSoundStream: {\\n                type: 'proxy',\\n                value: 'x_onCloseSoundStream' in fsExportedNames\\n                    ? rawModule.globals.fs.x_onCloseSoundStream\\n                    : undefined,\\n            },\\n        });\\n        if ('i_openSoundWriteStream' in fsExportedNames) {\\n            rawModule.globals.fs.i_openSoundWriteStream = (...args) => fs.onOpenSoundWriteStream(...args);\\n        }\\n        if ('i_sendSoundStreamData' in fsExportedNames) {\\n            rawModule.globals.fs.i_sendSoundStreamData = (...args) => fs.onSoundStreamData(...args);\\n        }\\n        if ('i_openSoundReadStream' in fsExportedNames) {\\n            rawModule.globals.fs.i_openSoundReadStream = (...args) => fs.onOpenSoundReadStream(...args);\\n        }\\n        if ('i_closeSoundStream' in fsExportedNames) {\\n            rawModule.globals.fs.i_closeSoundStream = (...args) => fs.onCloseSoundStream(...args);\\n        }\\n        if ('i_writeSoundFile' in fsExportedNames) {\\n            rawModule.globals.fs.i_writeSoundFile = (...args) => fs.onWriteSoundFile(...args);\\n        }\\n        if ('i_readSoundFile' in fsExportedNames) {\\n            rawModule.globals.fs.i_readSoundFile = (...args) => fs.onReadSoundFile(...args);\\n        }\\n        return fs;\\n    };\\n\\n    const createCommonsModule = (rawModule, metadata) => {\\n        const floatArrayType = getFloatArrayType(metadata.settings.audio.bitDepth);\\n        return proxyAsModuleWithBindings(rawModule, {\\n            getArray: {\\n                type: 'proxy',\\n                value: (arrayName) => rawModule.globals.commons.getArray(arrayName),\\n            },\\n            setArray: {\\n                type: 'proxy',\\n                value: (arrayName, array) => rawModule.globals.commons.setArray(arrayName, new floatArrayType(array)),\\n            },\\n        });\\n    };\\n\\n    const compileRawModule = (code) => new Function(`\\n        ${code}\\n        return exports\\n    `)();\\n    const createEngineBindings = (rawModule) => {\\n        const exportedNames = rawModule.metadata.compilation.variableNamesIndex.globals;\\n        const globalsBindings = {\\n            commons: {\\n                type: 'proxy',\\n                value: createCommonsModule(rawModule, rawModule.metadata),\\n            },\\n        };\\n        if ('fs' in exportedNames) {\\n            globalsBindings.fs = { type: 'proxy', value: createFsModule(rawModule) };\\n        }\\n        return {\\n            metadata: { type: 'raw' },\\n            initialize: { type: 'raw' },\\n            dspLoop: { type: 'raw' },\\n            io: { type: 'raw' },\\n            globals: {\\n                type: 'proxy',\\n                value: proxyAsModuleWithBindings(rawModule, globalsBindings),\\n            },\\n        };\\n    };\\n    const createEngine = (code, additionalBindings) => {\\n        const rawModule = compileRawModule(code);\\n        const rawModuleWithNameMapping = proxyWithEngineNameMapping(rawModule, rawModule.metadata.compilation.variableNamesIndex);\\n        return proxyAsModuleWithBindings(rawModule, {\\n            ...createEngineBindings(rawModuleWithNameMapping),\\n            ...(additionalBindings || {}),\\n        });\\n    };\\n\\n    exports.compileRawModule = compileRawModule;\\n    exports.createEngine = createEngine;\\n    exports.createEngineBindings = createEngineBindings;\\n\\n    return exports;\\n\\n})({});\\n\";\n\n  var fetchRetry$1 = function (fetch, defaults) {\n    defaults = defaults || {};\n    if (typeof fetch !== 'function') {\n      throw new ArgumentError('fetch must be a function');\n    }\n\n    if (typeof defaults !== 'object') {\n      throw new ArgumentError('defaults must be an object');\n    }\n\n    if (defaults.retries !== undefined && !isPositiveInteger(defaults.retries)) {\n      throw new ArgumentError('retries must be a positive integer');\n    }\n\n    if (defaults.retryDelay !== undefined && !isPositiveInteger(defaults.retryDelay) && typeof defaults.retryDelay !== 'function') {\n      throw new ArgumentError('retryDelay must be a positive integer or a function returning a positive integer');\n    }\n\n    if (defaults.retryOn !== undefined && !Array.isArray(defaults.retryOn) && typeof defaults.retryOn !== 'function') {\n      throw new ArgumentError('retryOn property expects an array or function');\n    }\n\n    var baseDefaults = {\n      retries: 3,\n      retryDelay: 1000,\n      retryOn: [],\n    };\n\n    defaults = Object.assign(baseDefaults, defaults);\n\n    return function fetchRetry(input, init) {\n      var retries = defaults.retries;\n      var retryDelay = defaults.retryDelay;\n      var retryOn = defaults.retryOn;\n\n      if (init && init.retries !== undefined) {\n        if (isPositiveInteger(init.retries)) {\n          retries = init.retries;\n        } else {\n          throw new ArgumentError('retries must be a positive integer');\n        }\n      }\n\n      if (init && init.retryDelay !== undefined) {\n        if (isPositiveInteger(init.retryDelay) || (typeof init.retryDelay === 'function')) {\n          retryDelay = init.retryDelay;\n        } else {\n          throw new ArgumentError('retryDelay must be a positive integer or a function returning a positive integer');\n        }\n      }\n\n      if (init && init.retryOn) {\n        if (Array.isArray(init.retryOn) || (typeof init.retryOn === 'function')) {\n          retryOn = init.retryOn;\n        } else {\n          throw new ArgumentError('retryOn property expects an array or function');\n        }\n      }\n\n      // eslint-disable-next-line no-undef\n      return new Promise(function (resolve, reject) {\n        var wrappedFetch = function (attempt) {\n          // As of node 18, this is no longer needed since node comes with native support for fetch:\n          /* istanbul ignore next */\n          var _input =\n            typeof Request !== 'undefined' && input instanceof Request\n              ? input.clone()\n              : input;\n          fetch(_input, init)\n            .then(function (response) {\n              if (Array.isArray(retryOn) && retryOn.indexOf(response.status) === -1) {\n                resolve(response);\n              } else if (typeof retryOn === 'function') {\n                try {\n                  // eslint-disable-next-line no-undef\n                  return Promise.resolve(retryOn(attempt, null, response))\n                    .then(function (retryOnResponse) {\n                      if(retryOnResponse) {\n                        retry(attempt, null, response);\n                      } else {\n                        resolve(response);\n                      }\n                    }).catch(reject);\n                } catch (error) {\n                  reject(error);\n                }\n              } else {\n                if (attempt < retries) {\n                  retry(attempt, null, response);\n                } else {\n                  resolve(response);\n                }\n              }\n            })\n            .catch(function (error) {\n              if (typeof retryOn === 'function') {\n                try {\n                  // eslint-disable-next-line no-undef\n                  Promise.resolve(retryOn(attempt, error, null))\n                    .then(function (retryOnResponse) {\n                      if(retryOnResponse) {\n                        retry(attempt, error, null);\n                      } else {\n                        reject(error);\n                      }\n                    })\n                    .catch(function(error) {\n                      reject(error);\n                    });\n                } catch(error) {\n                  reject(error);\n                }\n              } else if (attempt < retries) {\n                retry(attempt, error, null);\n              } else {\n                reject(error);\n              }\n            });\n        };\n\n        function retry(attempt, error, response) {\n          var delay = (typeof retryDelay === 'function') ?\n            retryDelay(attempt, error, response) : retryDelay;\n          setTimeout(function () {\n            wrappedFetch(++attempt);\n          }, delay);\n        }\n\n        wrappedFetch(0);\n      });\n    };\n  };\n\n  function isPositiveInteger(value) {\n    return Number.isInteger(value) && value >= 0;\n  }\n\n  function ArgumentError(message) {\n    this.name = 'ArgumentError';\n    this.message = message;\n  }\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const fetchRetry = fetchRetry$1(fetch);\n  /**\n   * Note : the audio worklet feature is available only in secure context.\n   * This function will fail when used in insecure context (non-https, etc ...)\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AudioWorklet\n   */\n  const addModule = async (context, processorCode) => {\n      const blob = new Blob([processorCode], { type: 'text/javascript' });\n      const workletProcessorUrl = URL.createObjectURL(blob);\n      return context.audioWorklet.addModule(workletProcessorUrl);\n  };\n  // TODO : testing\n  const fetchFile = async (url) => {\n      let response;\n      try {\n          response = await fetchRetry(url, { retries: 3 });\n      }\n      catch (err) {\n          throw new FileError(response.status, err.toString());\n      }\n      if (!response.ok) {\n          const responseText = await response.text();\n          throw new FileError(response.status, responseText);\n      }\n      return response.arrayBuffer();\n  };\n  const audioBufferToArray = (audioBuffer) => {\n      const sound = [];\n      for (let channel = 0; channel < audioBuffer.numberOfChannels; channel++) {\n          sound.push(audioBuffer.getChannelData(channel));\n      }\n      return sound;\n  };\n  // TODO : testing\n  const fixSoundChannelCount = (sound, targetChannelCount) => {\n      if (sound.length === 0) {\n          throw new Error(`Received empty sound`);\n      }\n      const floatArrayType = sound[0].constructor;\n      const frameCount = sound[0].length;\n      const fixedSound = sound.slice(0, targetChannelCount);\n      while (sound.length < targetChannelCount) {\n          fixedSound.push(new floatArrayType(frameCount));\n      }\n      return fixedSound;\n  };\n  const resolveRelativeUrl = (rootUrl, relativeUrl) => {\n      return new URL(relativeUrl, rootUrl).href;\n  };\n  class FileError extends Error {\n      constructor(status, msg) {\n          super(`Error ${status} : ${msg}`);\n      }\n  }\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  // TODO : manage transferables\n  class WebPdWorkletNode extends AudioWorkletNode {\n      constructor(context) {\n          super(context, 'webpd-node', {\n              numberOfOutputs: 1,\n              outputChannelCount: [2],\n          });\n      }\n      destroy() {\n          this.port.postMessage({\n              type: 'destroy',\n              payload: {},\n          });\n      }\n  }\n  // Concatenate WorkletProcessor code with the Wasm bindings it needs\n  const WEBPD_WORKLET_PROCESSOR_CODE = ASSEMBLY_SCRIPT_WASM_BINDINGS_CODE +\n      ';\\n' +\n      JAVA_SCRIPT_BINDINGS_CODE +\n      ';\\n' +\n      WEB_PD_WORKLET_PROCESSOR_CODE;\n  const registerWebPdWorkletNode = (context) => {\n      return addModule(context, WEBPD_WORKLET_PROCESSOR_CODE);\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const FILES = {};\n  const STREAMS = {};\n  class FakeStream {\n      constructor(url, sound) {\n          this.url = url;\n          this.sound = sound;\n          this.frameCount = sound[0].length;\n          this.readPosition = 0;\n      }\n  }\n  const read = async (url) => {\n      if (FILES[url]) {\n          return FILES[url];\n      }\n      const arrayBuffer = await fetchFile(url);\n      return {\n          type: 'binary',\n          data: arrayBuffer,\n      };\n  };\n  // TODO : testing\n  const readSound = async (url, context) => {\n      let fakeFile = FILES[url] || (await read(url));\n      switch (fakeFile.type) {\n          case 'binary':\n              const audioBuffer = await context.decodeAudioData(fakeFile.data);\n              return audioBufferToArray(audioBuffer);\n          case 'sound':\n              // We copy the data here o it can be manipulated freely by the host.\n              // e.g. if the buffer is sent as transferrable to the node we don't want the original to be transferred.\n              return fakeFile.data.map((array) => array.slice());\n      }\n  };\n  const writeSound = async (sound, url) => {\n      FILES[url] = {\n          type: 'sound',\n          data: sound,\n      };\n  };\n  const readStreamSound = async (operationId, url, channelCount, context) => {\n      const sound = await readSound(url, context);\n      STREAMS[operationId] = new FakeStream(url, fixSoundChannelCount(sound, channelCount));\n      return STREAMS[operationId];\n  };\n  const writeStreamSound = async (operationId, url, channelCount) => {\n      const emptySound = [];\n      for (let channel = 0; channel < channelCount; channel++) {\n          emptySound.push(new Float32Array(0));\n      }\n      STREAMS[operationId] = new FakeStream(url, emptySound);\n      FILES[url] = {\n          type: 'sound',\n          data: emptySound,\n      };\n      return STREAMS[operationId];\n  };\n  const getStream = (operationId) => {\n      return STREAMS[operationId];\n  };\n  const killStream = (operationId) => {\n      console.log('KILL STREAM', operationId);\n      delete STREAMS[operationId];\n  };\n  const pullBlock = (stream, frameCount) => {\n      const block = stream.sound.map((array) => array.slice(stream.readPosition, stream.readPosition + frameCount));\n      stream.readPosition += frameCount;\n      return block;\n  };\n  const pushBlock = (stream, block) => {\n      stream.sound = stream.sound.map((channelData, channel) => {\n          const concatenated = new Float32Array(channelData.length + block[channel].length);\n          concatenated.set(channelData);\n          concatenated.set(block[channel], channelData.length);\n          return concatenated;\n      });\n      stream.frameCount = stream.sound[0].length;\n      FILES[stream.url].data = stream.sound;\n  };\n  var fakeFs = {\n      writeSound,\n      readSound,\n      readStreamSound,\n      writeStreamSound,\n      pullBlock,\n      pushBlock,\n  };\n\n  var closeSoundStream = async (_, payload, __) => {\n      if (payload.functionName === 'onCloseSoundStream') {\n          killStream(payload.arguments[0]);\n      }\n  };\n\n  const _addPath$1 = (parent, key, _path) => {\n      const path = _ensurePath$1(_path);\n      return {\n          keys: [...path.keys, key],\n          parents: [...path.parents, parent],\n      };\n  };\n  const _ensurePath$1 = (path) => path || {\n      keys: [],\n      parents: [],\n  };\n  const _proxySetHandlerReadOnly$1 = () => {\n      throw new Error('This Proxy is read-only.');\n  };\n  const _proxyGetHandlerThrowIfKeyUnknown$1 = (target, key, path) => {\n      if (!(key in target)) {\n          // Whitelist some fields that are undefined but accessed at\n          // some point or another by our code.\n          // TODO : find a better way to do this.\n          if ([\n              'toJSON',\n              'Symbol(Symbol.toStringTag)',\n              'constructor',\n              '$typeof',\n              '$$typeof',\n              '@@__IMMUTABLE_ITERABLE__@@',\n              '@@__IMMUTABLE_RECORD__@@',\n              'then',\n          ].includes(key)) {\n              return true;\n          }\n          throw new Error(`namespace${path ? ` <${path.keys.join('.')}>` : ''} doesn't know key \"${String(key)}\"`);\n      }\n      return false;\n  };\n  const proxyAsAssigner$1 = (spec, _obj, context, _path) => {\n      const path = _path || { keys: [], parents: [] };\n      const obj = proxyAsAssigner$1.ensureValue(_obj, spec, context, path);\n      // If `_path` is provided, assign the new value to the parent object.\n      if (_path) {\n          const parent = _path.parents[_path.parents.length - 1];\n          const key = _path.keys[_path.keys.length - 1];\n          // The only case where we want to overwrite the existing value\n          // is when it was a `null` assigned by `LiteralDefaultNull`, and\n          // we want to set the real value instead.\n          if (!(key in parent) || 'LiteralDefaultNull' in spec) {\n              parent[key] = obj;\n          }\n      }\n      // If the object is a Literal, end of the recursion.\n      if ('Literal' in spec || 'LiteralDefaultNull' in spec) {\n          return obj;\n      }\n      return new Proxy(obj, {\n          get: (_, k) => {\n              const key = String(k);\n              let nextSpec;\n              if ('Index' in spec) {\n                  nextSpec = spec.Index(key, context, path);\n              }\n              else if ('Interface' in spec) {\n                  if (!(key in spec.Interface)) {\n                      throw new Error(`Interface has no entry \"${String(key)}\"`);\n                  }\n                  nextSpec = spec.Interface[key];\n              }\n              else {\n                  throw new Error('no builder');\n              }\n              return proxyAsAssigner$1(nextSpec, \n              // We use this form here instead of `obj[key]` specifically\n              // to allow Assign to play well with `ProtectedIndex`, which\n              // would raise an error if trying to access an undefined key.\n              key in obj ? obj[key] : undefined, context, _addPath$1(obj, key, path));\n          },\n          set: _proxySetHandlerReadOnly$1,\n      });\n  };\n  proxyAsAssigner$1.ensureValue = (_obj, spec, context, _path, _recursionPath) => {\n      if ('Index' in spec) {\n          return (_obj || spec.indexConstructor(context, _ensurePath$1(_path)));\n      }\n      else if ('Interface' in spec) {\n          const obj = (_obj || {});\n          Object.entries(spec.Interface).forEach(([key, nextSpec]) => {\n              obj[key] = proxyAsAssigner$1.ensureValue(obj[key], nextSpec, context, _addPath$1(obj, key, _path), _addPath$1(obj, key, _recursionPath));\n          });\n          return obj;\n      }\n      else if ('Literal' in spec) {\n          return (_obj || spec.Literal(context, _ensurePath$1(_path)));\n      }\n      else if ('LiteralDefaultNull' in spec) {\n          if (!_recursionPath) {\n              return (_obj ||\n                  spec.LiteralDefaultNull(context, _ensurePath$1(_path)));\n          }\n          else {\n              return (_obj || null);\n          }\n      }\n      else {\n          throw new Error('Invalid Assigner');\n      }\n  };\n  proxyAsAssigner$1.Interface = (a) => ({ Interface: a });\n  proxyAsAssigner$1.Index = (f, indexConstructor) => ({\n      Index: f,\n      indexConstructor: indexConstructor || (() => ({})),\n  });\n  proxyAsAssigner$1.Literal = (f) => ({\n      Literal: f,\n  });\n  proxyAsAssigner$1.LiteralDefaultNull = (f) => ({ LiteralDefaultNull: f });\n  // ---------------------------- proxyAsProtectedIndex ---------------------------- //\n  /**\n   * Helper to declare namespace objects enforcing stricter access rules.\n   * Specifically, it forbids :\n   * - reading an unknown property.\n   * - trying to overwrite an existing property.\n   */\n  const proxyAsProtectedIndex$1 = (namespace, path) => {\n      return new Proxy(namespace, {\n          get: (target, k) => {\n              const key = String(k);\n              if (_proxyGetHandlerThrowIfKeyUnknown$1(target, key, path)) {\n                  return undefined;\n              }\n              return target[key];\n          },\n          set: (target, k, newValue) => {\n              const key = _trimDollarKey$1(String(k));\n              if (target.hasOwnProperty(key)) {\n                  throw new Error(`Key \"${String(key)}\" is protected and cannot be overwritten.`);\n              }\n              else {\n                  target[key] = newValue;\n              }\n              return newValue;\n          },\n      });\n  };\n  const _trimDollarKey$1 = (key) => {\n      const match = /\\$(.*)/.exec(key);\n      if (!match) {\n          return key;\n      }\n      else {\n          return match[1];\n      }\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const getNode$1 = (graph, nodeId) => {\n      const node = graph[nodeId];\n      if (node) {\n          return node;\n      }\n      throw new Error(`Node \"${nodeId}\" not found in graph`);\n  };\n\n  /** Helper to get node implementation or throw an error if not implemented. */\n  const getNodeImplementation$1 = (nodeImplementations, nodeType) => {\n      const nodeImplementation = nodeImplementations[nodeType];\n      if (!nodeImplementation) {\n          throw new Error(`node [${nodeType}] is not implemented`);\n      }\n      return {\n          dependencies: [],\n          ...nodeImplementation,\n      };\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  /** Generate an integer series from 0 to `count` (non-inclusive). */\n  const countTo$1 = (count) => {\n      const results = [];\n      for (let i = 0; i < count; i++) {\n          results.push(i);\n      }\n      return results;\n  };\n\n  const Sequence$1 = (content) => ({\n      astType: 'Sequence',\n      content: _processRawContent$1(_intersperse$1(content, countTo$1(content.length - 1).map(() => '\\n'))),\n  });\n  const ast$1 = (strings, ...content) => _preventToString$1({\n      astType: 'Sequence',\n      content: _processRawContent$1(_intersperse$1(strings, content)),\n  });\n  const _processRawContent$1 = (content) => {\n      // 1. Flatten arrays and AstSequence, filter out nulls, and convert numbers to strings\n      // Basically converts input to an Array<AstContent>.\n      const flattenedAndFiltered = content.flatMap((element) => {\n          if (typeof element === 'string') {\n              return [element];\n          }\n          else if (typeof element === 'number') {\n              return [element.toString()];\n          }\n          else {\n              if (element === null) {\n                  return [];\n              }\n              else if (Array.isArray(element)) {\n                  return _processRawContent$1(_intersperse$1(element, countTo$1(element.length - 1).map(() => '\\n')));\n              }\n              else if (typeof element === 'object' &&\n                  element.astType === 'Sequence') {\n                  return element.content;\n              }\n              else {\n                  return [element];\n              }\n          }\n      });\n      // 2. Combine adjacent strings\n      const [combinedContent, remainingString] = flattenedAndFiltered.reduce(([combinedContent, currentString], element) => {\n          if (typeof element === 'string') {\n              return [combinedContent, currentString + element];\n          }\n          else {\n              if (currentString.length) {\n                  return [[...combinedContent, currentString, element], ''];\n              }\n              else {\n                  return [[...combinedContent, element], ''];\n              }\n          }\n      }, [[], '']);\n      if (remainingString.length) {\n          combinedContent.push(remainingString);\n      }\n      return combinedContent;\n  };\n  /**\n   * Intersperse content from array1 with content from array2.\n   * `array1.length` must be equal to `array2.length + 1`.\n   */\n  const _intersperse$1 = (array1, array2) => {\n      if (array1.length === 0) {\n          return [];\n      }\n      return array1.slice(1).reduce((combinedContent, element, i) => {\n          return combinedContent.concat([array2[i], element]);\n      }, [array1[0]]);\n  };\n  /**\n   * Prevents AST elements from being rendered as a string, as this is\n   * most likely an error due to unproper use of `ast`.\n   * Deacivated. Activate for debugging by uncommenting the line below.\n   */\n  const _preventToString$1 = (element) => ({\n      ...element,\n      // Uncomment this to activate\n      // toString: () => { throw new Error(`Rendering element ${elemennt.astType} as string is probably an error`) }\n  });\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  // ---------------------------- VariableNamesIndex ---------------------------- //\n  const NS$1 = {\n      GLOBALS: 'G',\n      NODES: 'N',\n      NODE_TYPES: 'NT',\n      IO: 'IO',\n      COLD: 'COLD',\n  };\n  proxyAsAssigner$1.Interface({\n      nodes: proxyAsAssigner$1.Index((nodeId) => proxyAsAssigner$1.Interface({\n          signalOuts: proxyAsAssigner$1.Index((portletId) => proxyAsAssigner$1.Literal(() => _name$1(NS$1.NODES, nodeId, 'outs', portletId))),\n          messageSenders: proxyAsAssigner$1.Index((portletId) => proxyAsAssigner$1.Literal(() => _name$1(NS$1.NODES, nodeId, 'snds', portletId))),\n          messageReceivers: proxyAsAssigner$1.Index((portletId) => proxyAsAssigner$1.Literal(() => _name$1(NS$1.NODES, nodeId, 'rcvs', portletId))),\n          state: proxyAsAssigner$1.LiteralDefaultNull(() => _name$1(NS$1.NODES, nodeId, 'state')),\n      })),\n      nodeImplementations: proxyAsAssigner$1.Index((nodeType, { nodeImplementations }) => {\n          const nodeImplementation = getNodeImplementation$1(nodeImplementations, nodeType);\n          const nodeTypePrefix = (nodeImplementation.flags\n              ? nodeImplementation.flags.alphaName\n              : null) || nodeType;\n          return proxyAsAssigner$1.Index((name) => proxyAsAssigner$1.Literal(() => _name$1(NS$1.NODE_TYPES, nodeTypePrefix, name)));\n      }),\n      globals: proxyAsAssigner$1.Index((ns) => proxyAsAssigner$1.Index((name) => {\n          if (['fs'].includes(ns)) {\n              return proxyAsAssigner$1.Literal(() => _name$1(NS$1.GLOBALS, ns, name));\n              // We don't prefix stdlib core module, because these are super\n              // basic functions that are always included in the global scope.\n          }\n          else if (ns === 'core') {\n              return proxyAsAssigner$1.Literal(() => name);\n          }\n          else {\n              return proxyAsAssigner$1.Literal(() => _name$1(NS$1.GLOBALS, ns, name));\n          }\n      })),\n      io: proxyAsAssigner$1.Interface({\n          messageReceivers: proxyAsAssigner$1.Index((nodeId) => proxyAsAssigner$1.Index((inletId) => proxyAsAssigner$1.Literal(() => _name$1(NS$1.IO, 'rcv', nodeId, inletId)))),\n          messageSenders: proxyAsAssigner$1.Index((nodeId) => proxyAsAssigner$1.Index((outletId) => proxyAsAssigner$1.Literal(() => _name$1(NS$1.IO, 'snd', nodeId, outletId)))),\n      }),\n      coldDspGroups: proxyAsAssigner$1.Index((groupId) => proxyAsAssigner$1.Literal(() => _name$1(NS$1.COLD, groupId))),\n  });\n  // ---------------------------- PrecompiledCode ---------------------------- //\n  proxyAsAssigner$1.Interface({\n      graph: proxyAsAssigner$1.Literal((_, path) => ({\n          fullTraversal: [],\n          hotDspGroup: {\n              traversal: [],\n              outNodesIds: [],\n          },\n          coldDspGroups: proxyAsProtectedIndex$1({}, path),\n      })),\n      nodeImplementations: proxyAsAssigner$1.Index((nodeType, { nodeImplementations }) => proxyAsAssigner$1.Literal(() => ({\n          nodeImplementation: getNodeImplementation$1(nodeImplementations, nodeType),\n          stateClass: null,\n          core: null,\n      })), (_, path) => proxyAsProtectedIndex$1({}, path)),\n      nodes: proxyAsAssigner$1.Index((nodeId, { graph }) => proxyAsAssigner$1.Literal(() => ({\n          nodeType: getNode$1(graph, nodeId).type,\n          messageReceivers: {},\n          messageSenders: {},\n          signalOuts: {},\n          signalIns: {},\n          initialization: ast$1 ``,\n          dsp: {\n              loop: ast$1 ``,\n              inlets: {},\n          },\n          state: null,\n      })), (_, path) => proxyAsProtectedIndex$1({}, path)),\n      dependencies: proxyAsAssigner$1.Literal(() => ({\n          imports: [],\n          exports: [],\n          ast: Sequence$1([]),\n      })),\n      io: proxyAsAssigner$1.Interface({\n          messageReceivers: proxyAsAssigner$1.Index((_) => proxyAsAssigner$1.Literal((_, path) => proxyAsProtectedIndex$1({}, path)), (_, path) => proxyAsProtectedIndex$1({}, path)),\n          messageSenders: proxyAsAssigner$1.Index((_) => proxyAsAssigner$1.Literal((_, path) => proxyAsProtectedIndex$1({}, path)), (_, path) => proxyAsProtectedIndex$1({}, path)),\n      }),\n  });\n  // ---------------------------- MISC ---------------------------- //\n  const _name$1 = (...parts) => parts.map(assertValidNamePart$1).join('_');\n  const assertValidNamePart$1 = (namePart) => {\n      const isInvalid = !VALID_NAME_PART_REGEXP$1.exec(namePart);\n      if (isInvalid) {\n          throw new Error(`Invalid variable name for code generation \"${namePart}\"`);\n      }\n      return namePart;\n  };\n  const VALID_NAME_PART_REGEXP$1 = /^[a-zA-Z0-9_]+$/;\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const FS_OPERATION_SUCCESS = 0;\n  const FS_OPERATION_FAILURE = 1;\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  var readSoundFile = async (node, payload, settings) => {\n      if (payload.functionName === 'onReadSoundFile') {\n          const [operationId, url, [channelCount]] = payload.arguments;\n          const absoluteUrl = resolveRelativeUrl(settings.rootUrl, url);\n          let operationStatus = FS_OPERATION_SUCCESS;\n          let sound = null;\n          try {\n              sound = await fakeFs.readSound(absoluteUrl, node.context);\n          }\n          catch (err) {\n              operationStatus = FS_OPERATION_FAILURE;\n              console.error(err);\n          }\n          if (sound) {\n              sound = fixSoundChannelCount(sound, channelCount);\n          }\n          node.port.postMessage({\n              type: 'fs',\n              payload: {\n                  functionName: 'sendReadSoundFileResponse',\n                  arguments: [operationId, operationStatus, sound],\n              },\n          }, \n          // Add as transferables to avoid copies between threads\n          sound.map((array) => array.buffer));\n      }\n      else if (payload.functionName === 'sendReadSoundFileResponse_return') ;\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const BUFFER_HIGH = 10 * 44100;\n  const BUFFER_LOW = BUFFER_HIGH / 2;\n  var readSoundStream = async (node, payload, settings) => {\n      if (payload.functionName === 'onOpenSoundReadStream') {\n          const [operationId, url, [channelCount]] = payload.arguments;\n          try {\n              const absoluteUrl = resolveRelativeUrl(settings.rootUrl, url);\n              await fakeFs.readStreamSound(operationId, absoluteUrl, channelCount, node.context);\n          }\n          catch (err) {\n              console.error(err);\n              node.port.postMessage({\n                  type: 'fs',\n                  payload: {\n                      functionName: 'closeSoundStream',\n                      arguments: [operationId, FS_OPERATION_FAILURE],\n                  },\n              });\n              return;\n          }\n          streamLoop(node, operationId, 0);\n      }\n      else if (payload.functionName === 'sendSoundStreamData_return') {\n          const stream = getStream(payload.operationId);\n          if (!stream) {\n              throw new Error(`unknown stream ${payload.operationId}`);\n          }\n          streamLoop(node, payload.operationId, payload.returned);\n      }\n      else if (payload.functionName === 'closeSoundStream_return') {\n          const stream = getStream(payload.operationId);\n          if (stream) {\n              killStream(payload.operationId);\n          }\n      }\n  };\n  const streamLoop = (node, operationId, framesAvailableInEngine) => {\n      const sampleRate = node.context.sampleRate;\n      const secondsToThreshold = Math.max(framesAvailableInEngine - BUFFER_LOW, 10) / sampleRate;\n      const framesToSend = BUFFER_HIGH -\n          (framesAvailableInEngine - secondsToThreshold * sampleRate);\n      setTimeout(() => {\n          const stream = getStream(operationId);\n          if (!stream) {\n              console.log(`stream ${operationId} was maybe closed`);\n              return;\n          }\n          if (stream.readPosition < stream.frameCount) {\n              const block = pullBlock(stream, framesToSend);\n              node.port.postMessage({\n                  type: 'fs',\n                  payload: {\n                      functionName: 'sendSoundStreamData',\n                      arguments: [operationId, block],\n                  },\n              }, \n              // Add as transferables to avoid copies between threads\n              block.map((array) => array.buffer));\n          }\n          else {\n              node.port.postMessage({\n                  type: 'fs',\n                  payload: {\n                      functionName: 'closeSoundStream',\n                      arguments: [operationId, FS_OPERATION_SUCCESS],\n                  },\n              });\n          }\n      }, secondsToThreshold * 1000);\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  var writeSoundFile = async (node, payload, settings) => {\n      if (payload.functionName === 'onWriteSoundFile') {\n          const [operationId, sound, url, [channelCount]] = payload.arguments;\n          const fixedSound = fixSoundChannelCount(sound, channelCount);\n          const absoluteUrl = resolveRelativeUrl(settings.rootUrl, url);\n          await fakeFs.writeSound(fixedSound, absoluteUrl);\n          let operationStatus = FS_OPERATION_SUCCESS;\n          node.port.postMessage({\n              type: 'fs',\n              payload: {\n                  functionName: 'sendWriteSoundFileResponse',\n                  arguments: [operationId, operationStatus],\n              },\n          });\n      }\n      else if (payload.functionName === 'sendWriteSoundFileResponse_return') ;\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  var writeSoundStream = async (_, payload, settings) => {\n      if (payload.functionName === 'onOpenSoundWriteStream') {\n          const [operationId, url, [channelCount]] = payload.arguments;\n          const absoluteUrl = resolveRelativeUrl(settings.rootUrl, url);\n          await fakeFs.writeStreamSound(operationId, absoluteUrl, channelCount);\n      }\n      else if (payload.functionName === 'onSoundStreamData') {\n          const [operationId, sound] = payload.arguments;\n          const stream = getStream(operationId);\n          if (!stream) {\n              throw new Error(`unknown stream ${operationId}`);\n          }\n          pushBlock(stream, sound);\n      }\n      else if (payload.functionName === 'closeSoundStream_return') {\n          const stream = getStream(payload.operationId);\n          if (stream) {\n              killStream(payload.operationId);\n          }\n      }\n  };\n\n  var index = async (node, messageEvent, settings) => {\n      const message = messageEvent.data;\n      if (message.type !== 'fs') {\n          throw new Error(`Unknown message type from node ${message.type}`);\n      }\n      const { payload } = message;\n      if (payload.functionName === 'onReadSoundFile' ||\n          payload.functionName === 'sendReadSoundFileResponse_return') {\n          readSoundFile(node, payload, settings);\n      }\n      else if (payload.functionName === 'onOpenSoundReadStream' ||\n          payload.functionName === 'sendSoundStreamData_return') {\n          readSoundStream(node, payload, settings);\n      }\n      else if (payload.functionName === 'onWriteSoundFile' ||\n          payload.functionName === 'sendWriteSoundFileResponse_return') {\n          writeSoundFile(node, payload, settings);\n      }\n      else if (payload.functionName === 'onOpenSoundWriteStream' ||\n          payload.functionName === 'onSoundStreamData') {\n          writeSoundStream(node, payload, settings);\n      }\n      else if (payload.functionName === 'closeSoundStream_return') {\n          writeSoundStream(node, payload, settings);\n          readSoundStream(node, payload, settings);\n      }\n      else if (payload.functionName === 'onCloseSoundStream') {\n          closeSoundStream(node, payload);\n      }\n      else {\n          throw new Error(`Unknown callback ${payload.functionName}`);\n      }\n  };\n\n  var initialize = (...args) => {\n      return registerWebPdWorkletNode(...args);\n  };\n\n  const urlDirName = (url) => {\n      if (isExternalUrl(url)) {\n          return new URL('.', url).href;\n      }\n      else {\n          return new URL('.', new URL(url, document.URL).href).href;\n      }\n  };\n  const isExternalUrl = (urlString) => {\n      try {\n          const url = new URL(urlString);\n          if (url.origin !== new URL(document.URL, document.baseURI).origin) {\n              return true;\n          }\n      }\n      catch (_e) {\n          new URL(urlString, document.baseURI);\n      }\n      return false;\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  /** Generate an integer series from 0 to `count` (non-inclusive). */\n  const countTo = (count) => {\n      const results = [];\n      for (let i = 0; i < count; i++) {\n          results.push(i);\n      }\n      return results;\n  };\n\n  const Sequence = (content) => ({\n      astType: 'Sequence',\n      content: _processRawContent(_intersperse(content, countTo(content.length - 1).map(() => '\\n'))),\n  });\n  const ast = (strings, ...content) => _preventToString({\n      astType: 'Sequence',\n      content: _processRawContent(_intersperse(strings, content)),\n  });\n  const _processRawContent = (content) => {\n      // 1. Flatten arrays and AstSequence, filter out nulls, and convert numbers to strings\n      // Basically converts input to an Array<AstContent>.\n      const flattenedAndFiltered = content.flatMap((element) => {\n          if (typeof element === 'string') {\n              return [element];\n          }\n          else if (typeof element === 'number') {\n              return [element.toString()];\n          }\n          else {\n              if (element === null) {\n                  return [];\n              }\n              else if (Array.isArray(element)) {\n                  return _processRawContent(_intersperse(element, countTo(element.length - 1).map(() => '\\n')));\n              }\n              else if (typeof element === 'object' &&\n                  element.astType === 'Sequence') {\n                  return element.content;\n              }\n              else {\n                  return [element];\n              }\n          }\n      });\n      // 2. Combine adjacent strings\n      const [combinedContent, remainingString] = flattenedAndFiltered.reduce(([combinedContent, currentString], element) => {\n          if (typeof element === 'string') {\n              return [combinedContent, currentString + element];\n          }\n          else {\n              if (currentString.length) {\n                  return [[...combinedContent, currentString, element], ''];\n              }\n              else {\n                  return [[...combinedContent, element], ''];\n              }\n          }\n      }, [[], '']);\n      if (remainingString.length) {\n          combinedContent.push(remainingString);\n      }\n      return combinedContent;\n  };\n  /**\n   * Intersperse content from array1 with content from array2.\n   * `array1.length` must be equal to `array2.length + 1`.\n   */\n  const _intersperse = (array1, array2) => {\n      if (array1.length === 0) {\n          return [];\n      }\n      return array1.slice(1).reduce((combinedContent, element, i) => {\n          return combinedContent.concat([array2[i], element]);\n      }, [array1[0]]);\n  };\n  /**\n   * Prevents AST elements from being rendered as a string, as this is\n   * most likely an error due to unproper use of `ast`.\n   * Deacivated. Activate for debugging by uncommenting the line below.\n   */\n  const _preventToString = (element) => ({\n      ...element,\n      // Uncomment this to activate\n      // toString: () => { throw new Error(`Rendering element ${elemennt.astType} as string is probably an error`) }\n  });\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const getNode = (graph, nodeId) => {\n      const node = graph[nodeId];\n      if (node) {\n          return node;\n      }\n      throw new Error(`Node \"${nodeId}\" not found in graph`);\n  };\n\n  /** Helper to get node implementation or throw an error if not implemented. */\n  const getNodeImplementation = (nodeImplementations, nodeType) => {\n      const nodeImplementation = nodeImplementations[nodeType];\n      if (!nodeImplementation) {\n          throw new Error(`node [${nodeType}] is not implemented`);\n      }\n      return {\n          dependencies: [],\n          ...nodeImplementation,\n      };\n  };\n\n  const _addPath = (parent, key, _path) => {\n      const path = _ensurePath(_path);\n      return {\n          keys: [...path.keys, key],\n          parents: [...path.parents, parent],\n      };\n  };\n  const _ensurePath = (path) => path || {\n      keys: [],\n      parents: [],\n  };\n  const _proxySetHandlerReadOnly = () => {\n      throw new Error('This Proxy is read-only.');\n  };\n  const _proxyGetHandlerThrowIfKeyUnknown = (target, key, path) => {\n      if (!(key in target)) {\n          // Whitelist some fields that are undefined but accessed at\n          // some point or another by our code.\n          // TODO : find a better way to do this.\n          if ([\n              'toJSON',\n              'Symbol(Symbol.toStringTag)',\n              'constructor',\n              '$typeof',\n              '$$typeof',\n              '@@__IMMUTABLE_ITERABLE__@@',\n              '@@__IMMUTABLE_RECORD__@@',\n              'then',\n          ].includes(key)) {\n              return true;\n          }\n          throw new Error(`namespace${path ? ` <${path.keys.join('.')}>` : ''} doesn't know key \"${String(key)}\"`);\n      }\n      return false;\n  };\n  const proxyAsAssigner = (spec, _obj, context, _path) => {\n      const path = _path || { keys: [], parents: [] };\n      const obj = proxyAsAssigner.ensureValue(_obj, spec, context, path);\n      // If `_path` is provided, assign the new value to the parent object.\n      if (_path) {\n          const parent = _path.parents[_path.parents.length - 1];\n          const key = _path.keys[_path.keys.length - 1];\n          // The only case where we want to overwrite the existing value\n          // is when it was a `null` assigned by `LiteralDefaultNull`, and\n          // we want to set the real value instead.\n          if (!(key in parent) || 'LiteralDefaultNull' in spec) {\n              parent[key] = obj;\n          }\n      }\n      // If the object is a Literal, end of the recursion.\n      if ('Literal' in spec || 'LiteralDefaultNull' in spec) {\n          return obj;\n      }\n      return new Proxy(obj, {\n          get: (_, k) => {\n              const key = String(k);\n              let nextSpec;\n              if ('Index' in spec) {\n                  nextSpec = spec.Index(key, context, path);\n              }\n              else if ('Interface' in spec) {\n                  if (!(key in spec.Interface)) {\n                      throw new Error(`Interface has no entry \"${String(key)}\"`);\n                  }\n                  nextSpec = spec.Interface[key];\n              }\n              else {\n                  throw new Error('no builder');\n              }\n              return proxyAsAssigner(nextSpec, \n              // We use this form here instead of `obj[key]` specifically\n              // to allow Assign to play well with `ProtectedIndex`, which\n              // would raise an error if trying to access an undefined key.\n              key in obj ? obj[key] : undefined, context, _addPath(obj, key, path));\n          },\n          set: _proxySetHandlerReadOnly,\n      });\n  };\n  proxyAsAssigner.ensureValue = (_obj, spec, context, _path, _recursionPath) => {\n      if ('Index' in spec) {\n          return (_obj || spec.indexConstructor(context, _ensurePath(_path)));\n      }\n      else if ('Interface' in spec) {\n          const obj = (_obj || {});\n          Object.entries(spec.Interface).forEach(([key, nextSpec]) => {\n              obj[key] = proxyAsAssigner.ensureValue(obj[key], nextSpec, context, _addPath(obj, key, _path), _addPath(obj, key, _recursionPath));\n          });\n          return obj;\n      }\n      else if ('Literal' in spec) {\n          return (_obj || spec.Literal(context, _ensurePath(_path)));\n      }\n      else if ('LiteralDefaultNull' in spec) {\n          if (!_recursionPath) {\n              return (_obj ||\n                  spec.LiteralDefaultNull(context, _ensurePath(_path)));\n          }\n          else {\n              return (_obj || null);\n          }\n      }\n      else {\n          throw new Error('Invalid Assigner');\n      }\n  };\n  proxyAsAssigner.Interface = (a) => ({ Interface: a });\n  proxyAsAssigner.Index = (f, indexConstructor) => ({\n      Index: f,\n      indexConstructor: indexConstructor || (() => ({})),\n  });\n  proxyAsAssigner.Literal = (f) => ({\n      Literal: f,\n  });\n  proxyAsAssigner.LiteralDefaultNull = (f) => ({ LiteralDefaultNull: f });\n  // ---------------------------- proxyAsProtectedIndex ---------------------------- //\n  /**\n   * Helper to declare namespace objects enforcing stricter access rules.\n   * Specifically, it forbids :\n   * - reading an unknown property.\n   * - trying to overwrite an existing property.\n   */\n  const proxyAsProtectedIndex = (namespace, path) => {\n      return new Proxy(namespace, {\n          get: (target, k) => {\n              const key = String(k);\n              if (_proxyGetHandlerThrowIfKeyUnknown(target, key, path)) {\n                  return undefined;\n              }\n              return target[key];\n          },\n          set: (target, k, newValue) => {\n              const key = _trimDollarKey(String(k));\n              if (target.hasOwnProperty(key)) {\n                  throw new Error(`Key \"${String(key)}\" is protected and cannot be overwritten.`);\n              }\n              else {\n                  target[key] = newValue;\n              }\n              return newValue;\n          },\n      });\n  };\n  const _trimDollarKey = (key) => {\n      const match = /\\$(.*)/.exec(key);\n      if (!match) {\n          return key;\n      }\n      else {\n          return match[1];\n      }\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  // ---------------------------- VariableNamesIndex ---------------------------- //\n  const NS = {\n      GLOBALS: 'G',\n      NODES: 'N',\n      NODE_TYPES: 'NT',\n      IO: 'IO',\n      COLD: 'COLD',\n  };\n  proxyAsAssigner.Interface({\n      nodes: proxyAsAssigner.Index((nodeId) => proxyAsAssigner.Interface({\n          signalOuts: proxyAsAssigner.Index((portletId) => proxyAsAssigner.Literal(() => _name(NS.NODES, nodeId, 'outs', portletId))),\n          messageSenders: proxyAsAssigner.Index((portletId) => proxyAsAssigner.Literal(() => _name(NS.NODES, nodeId, 'snds', portletId))),\n          messageReceivers: proxyAsAssigner.Index((portletId) => proxyAsAssigner.Literal(() => _name(NS.NODES, nodeId, 'rcvs', portletId))),\n          state: proxyAsAssigner.LiteralDefaultNull(() => _name(NS.NODES, nodeId, 'state')),\n      })),\n      nodeImplementations: proxyAsAssigner.Index((nodeType, { nodeImplementations }) => {\n          const nodeImplementation = getNodeImplementation(nodeImplementations, nodeType);\n          const nodeTypePrefix = (nodeImplementation.flags\n              ? nodeImplementation.flags.alphaName\n              : null) || nodeType;\n          return proxyAsAssigner.Index((name) => proxyAsAssigner.Literal(() => _name(NS.NODE_TYPES, nodeTypePrefix, name)));\n      }),\n      globals: proxyAsAssigner.Index((ns) => proxyAsAssigner.Index((name) => {\n          if (['fs'].includes(ns)) {\n              return proxyAsAssigner.Literal(() => _name(NS.GLOBALS, ns, name));\n              // We don't prefix stdlib core module, because these are super\n              // basic functions that are always included in the global scope.\n          }\n          else if (ns === 'core') {\n              return proxyAsAssigner.Literal(() => name);\n          }\n          else {\n              return proxyAsAssigner.Literal(() => _name(NS.GLOBALS, ns, name));\n          }\n      })),\n      io: proxyAsAssigner.Interface({\n          messageReceivers: proxyAsAssigner.Index((nodeId) => proxyAsAssigner.Index((inletId) => proxyAsAssigner.Literal(() => _name(NS.IO, 'rcv', nodeId, inletId)))),\n          messageSenders: proxyAsAssigner.Index((nodeId) => proxyAsAssigner.Index((outletId) => proxyAsAssigner.Literal(() => _name(NS.IO, 'snd', nodeId, outletId)))),\n      }),\n      coldDspGroups: proxyAsAssigner.Index((groupId) => proxyAsAssigner.Literal(() => _name(NS.COLD, groupId))),\n  });\n  // ---------------------------- PrecompiledCode ---------------------------- //\n  proxyAsAssigner.Interface({\n      graph: proxyAsAssigner.Literal((_, path) => ({\n          fullTraversal: [],\n          hotDspGroup: {\n              traversal: [],\n              outNodesIds: [],\n          },\n          coldDspGroups: proxyAsProtectedIndex({}, path),\n      })),\n      nodeImplementations: proxyAsAssigner.Index((nodeType, { nodeImplementations }) => proxyAsAssigner.Literal(() => ({\n          nodeImplementation: getNodeImplementation(nodeImplementations, nodeType),\n          stateClass: null,\n          core: null,\n      })), (_, path) => proxyAsProtectedIndex({}, path)),\n      nodes: proxyAsAssigner.Index((nodeId, { graph }) => proxyAsAssigner.Literal(() => ({\n          nodeType: getNode(graph, nodeId).type,\n          messageReceivers: {},\n          messageSenders: {},\n          signalOuts: {},\n          signalIns: {},\n          initialization: ast ``,\n          dsp: {\n              loop: ast ``,\n              inlets: {},\n          },\n          state: null,\n      })), (_, path) => proxyAsProtectedIndex({}, path)),\n      dependencies: proxyAsAssigner.Literal(() => ({\n          imports: [],\n          exports: [],\n          ast: Sequence([]),\n      })),\n      io: proxyAsAssigner.Interface({\n          messageReceivers: proxyAsAssigner.Index((_) => proxyAsAssigner.Literal((_, path) => proxyAsProtectedIndex({}, path)), (_, path) => proxyAsProtectedIndex({}, path)),\n          messageSenders: proxyAsAssigner.Index((_) => proxyAsAssigner.Literal((_, path) => proxyAsProtectedIndex({}, path)), (_, path) => proxyAsProtectedIndex({}, path)),\n      }),\n  });\n  // ---------------------------- MISC ---------------------------- //\n  const _name = (...parts) => parts.map(assertValidNamePart).join('_');\n  const assertValidNamePart = (namePart) => {\n      const isInvalid = !VALID_NAME_PART_REGEXP.exec(namePart);\n      if (isInvalid) {\n          throw new Error(`Invalid variable name for code generation \"${namePart}\"`);\n      }\n      return namePart;\n  };\n  const VALID_NAME_PART_REGEXP = /^[a-zA-Z0-9_]+$/;\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  // NOTE : not necessarily the most logical place to put this function, but we need it here\n  // cause it's imported by the bindings.\n  const getFloatArrayType = (bitDepth) => bitDepth === 64 ? Float64Array : Float32Array;\n  const proxyAsModuleWithBindings = (rawModule, bindings) => \n  // Use empty object on proxy cause proxy cannot redefine access of member of its target,\n  // which causes issues for example for WebAssembly exports.\n  // See : https://stackoverflow.com/questions/75148897/get-on-proxy-property-items-is-a-read-only-and-non-configurable-data-proper\n  new Proxy({}, {\n      get: (_, k) => {\n          if (bindings.hasOwnProperty(k)) {\n              const key = String(k);\n              const bindingSpec = bindings[key];\n              switch (bindingSpec.type) {\n                  case 'raw':\n                      // Cannot use hasOwnProperty here cause not defined in wasm exports object\n                      if (k in rawModule) {\n                          return rawModule[key];\n                      }\n                      else {\n                          throw new Error(`Key ${String(key)} doesn't exist in raw module`);\n                      }\n                  case 'proxy':\n                  case 'callback':\n                      return bindingSpec.value;\n              }\n              // We need to return undefined here for compatibility with various APIs\n              // which inspect object's attributes.\n          }\n          else {\n              return undefined;\n          }\n      },\n      has: function (_, k) {\n          return k in bindings;\n      },\n      set: (_, k, newValue) => {\n          if (bindings.hasOwnProperty(String(k))) {\n              const key = String(k);\n              const bindingSpec = bindings[key];\n              if (bindingSpec.type === 'callback') {\n                  bindingSpec.value = newValue;\n              }\n              else {\n                  throw new Error(`Binding key ${String(key)} is read-only`);\n              }\n          }\n          else {\n              throw new Error(`Key ${String(k)} is not defined in bindings`);\n          }\n          return true;\n      },\n  });\n  /**\n   * Reverse-maps exported variable names from `rawModule` according to the mapping defined\n   * in `variableNamesIndex`.\n   *\n   * For example with :\n   *\n   * ```\n   * const variableNamesIndex = {\n   *     globals: {\n   *         // ...\n   *         fs: {\n   *             // ...\n   *             readFile: 'g_fs_readFile'\n   *         },\n   *     }\n   * }\n   * ```\n   *\n   * The function `g_fs_readFile` (if it is exported properly by the raw module), will then\n   * be available on the returned object at path `.globals.fs.readFile`.\n   */\n  const proxyWithEngineNameMapping = (rawModule, variableNamesIndex) => proxyWithNameMapping(rawModule, {\n      globals: variableNamesIndex.globals,\n      io: variableNamesIndex.io,\n  });\n  const proxyWithNameMapping = (rawModule, variableNamesIndex) => {\n      if (typeof variableNamesIndex === 'string') {\n          return rawModule[variableNamesIndex];\n      }\n      else if (typeof variableNamesIndex === 'object') {\n          return new Proxy(rawModule, {\n              get: (_, k) => {\n                  const key = String(k);\n                  if (key in rawModule) {\n                      return Reflect.get(rawModule, key);\n                  }\n                  else if (key in variableNamesIndex) {\n                      const nextVariableNames = variableNamesIndex[key];\n                      return proxyWithNameMapping(rawModule, nextVariableNames);\n                  }\n                  else if (_proxyGetHandlerThrowIfKeyUnknown(rawModule, key)) {\n                      return undefined;\n                  }\n              },\n              has: function (_, k) {\n                  return k in rawModule || k in variableNamesIndex;\n              },\n              set: (_, k, value) => {\n                  const key = String(k);\n                  if (key in variableNamesIndex) {\n                      const variableName = variableNamesIndex[key];\n                      if (typeof variableName !== 'string') {\n                          throw new Error(`Failed to set value for key ${String(k)}: variable name is not a string`);\n                      }\n                      return Reflect.set(rawModule, variableName, value);\n                  }\n                  else {\n                      throw new Error(`Key ${String(k)} is not defined in raw module`);\n                  }\n              },\n          });\n      }\n      else {\n          throw new Error(`Invalid name mapping`);\n      }\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  /** @copyright Assemblyscript ESM bindings */\n  const liftString = (rawModule, pointer) => {\n      if (!pointer) {\n          throw new Error('Cannot lift a null pointer');\n      }\n      pointer = pointer >>> 0;\n      const end = (pointer +\n          new Uint32Array(rawModule.memory.buffer)[(pointer - 4) >>> 2]) >>>\n          1;\n      const memoryU16 = new Uint16Array(rawModule.memory.buffer);\n      let start = pointer >>> 1;\n      let string = '';\n      while (end - start > 1024) {\n          string += String.fromCharCode(...memoryU16.subarray(start, (start += 1024)));\n      }\n      return string + String.fromCharCode(...memoryU16.subarray(start, end));\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  // REF : Assemblyscript ESM bindings\n  const instantiateWasmModule = async (wasmBuffer, wasmImports = {}) => {\n      const instanceAndModule = await WebAssembly.instantiate(wasmBuffer, {\n          env: {\n              abort: (messagePointer, \n              // filename, not useful because we compile everything to a single string\n              _, lineNumber, columnNumber) => {\n                  const message = liftString(wasmExports, messagePointer);\n                  lineNumber = lineNumber;\n                  columnNumber = columnNumber;\n                  (() => {\n                      // @external.js\n                      throw Error(`${message} at ${lineNumber}:${columnNumber}`);\n                  })();\n              },\n              seed: () => {\n                  return (() => {\n                      return Date.now() * Math.random();\n                  })();\n              },\n              'console.log': (textPointer) => {\n                  console.log(liftString(wasmExports, textPointer));\n              },\n          },\n          ...wasmImports,\n      });\n      const wasmExports = instanceAndModule.instance\n          .exports;\n      return instanceAndModule.instance;\n  };\n\n  const readMetadata$2 = async (wasmBuffer) => {\n      // In order to read metadata, we need to introspect the module to get the imports\n      const inputImports = {};\n      const wasmModule = WebAssembly.Module.imports(new WebAssembly.Module(wasmBuffer));\n      // Then we generate dummy functions to be able to instantiate the module\n      wasmModule\n          .filter((imprt) => imprt.module === 'input' && imprt.kind === 'function')\n          .forEach((imprt) => (inputImports[imprt.name] = () => undefined));\n      const wasmInstance = await instantiateWasmModule(wasmBuffer, {\n          input: inputImports,\n      });\n      // Finally, once the module instantiated, we read the metadata\n      const rawModule = wasmInstance.exports;\n      const stringPointer = rawModule.metadata.valueOf();\n      const metadataJSON = liftString(rawModule, stringPointer);\n      return JSON.parse(metadataJSON);\n  };\n\n  const createFsModule = (rawModule) => {\n      const fsExportedNames = rawModule.metadata.compilation.variableNamesIndex.globals.fs;\n      const fs = proxyAsModuleWithBindings(rawModule, {\n          onReadSoundFile: { type: 'callback', value: () => undefined },\n          onWriteSoundFile: { type: 'callback', value: () => undefined },\n          onOpenSoundReadStream: { type: 'callback', value: () => undefined },\n          onOpenSoundWriteStream: { type: 'callback', value: () => undefined },\n          onSoundStreamData: { type: 'callback', value: () => undefined },\n          onCloseSoundStream: { type: 'callback', value: () => undefined },\n          sendReadSoundFileResponse: {\n              type: 'proxy',\n              value: 'x_onReadSoundFileResponse' in fsExportedNames\n                  ? rawModule.globals.fs.x_onReadSoundFileResponse\n                  : undefined,\n          },\n          sendWriteSoundFileResponse: {\n              type: 'proxy',\n              value: 'x_onWriteSoundFileResponse' in fsExportedNames\n                  ? rawModule.globals.fs.x_onWriteSoundFileResponse\n                  : undefined,\n          },\n          // should register the operation success { bitDepth: 32, target: 'javascript' }\n          sendSoundStreamData: {\n              type: 'proxy',\n              value: 'x_onSoundStreamData' in fsExportedNames\n                  ? rawModule.globals.fs.x_onSoundStreamData\n                  : undefined,\n          },\n          closeSoundStream: {\n              type: 'proxy',\n              value: 'x_onCloseSoundStream' in fsExportedNames\n                  ? rawModule.globals.fs.x_onCloseSoundStream\n                  : undefined,\n          },\n      });\n      if ('i_openSoundWriteStream' in fsExportedNames) {\n          rawModule.globals.fs.i_openSoundWriteStream = (...args) => fs.onOpenSoundWriteStream(...args);\n      }\n      if ('i_sendSoundStreamData' in fsExportedNames) {\n          rawModule.globals.fs.i_sendSoundStreamData = (...args) => fs.onSoundStreamData(...args);\n      }\n      if ('i_openSoundReadStream' in fsExportedNames) {\n          rawModule.globals.fs.i_openSoundReadStream = (...args) => fs.onOpenSoundReadStream(...args);\n      }\n      if ('i_closeSoundStream' in fsExportedNames) {\n          rawModule.globals.fs.i_closeSoundStream = (...args) => fs.onCloseSoundStream(...args);\n      }\n      if ('i_writeSoundFile' in fsExportedNames) {\n          rawModule.globals.fs.i_writeSoundFile = (...args) => fs.onWriteSoundFile(...args);\n      }\n      if ('i_readSoundFile' in fsExportedNames) {\n          rawModule.globals.fs.i_readSoundFile = (...args) => fs.onReadSoundFile(...args);\n      }\n      return fs;\n  };\n\n  const createCommonsModule = (rawModule, metadata) => {\n      const floatArrayType = getFloatArrayType(metadata.settings.audio.bitDepth);\n      return proxyAsModuleWithBindings(rawModule, {\n          getArray: {\n              type: 'proxy',\n              value: (arrayName) => rawModule.globals.commons.getArray(arrayName),\n          },\n          setArray: {\n              type: 'proxy',\n              value: (arrayName, array) => rawModule.globals.commons.setArray(arrayName, new floatArrayType(array)),\n          },\n      });\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  /**\n   * These bindings enable easier interaction with modules generated with our JavaScript compilation.\n   * For example : instantiation, passing data back and forth, etc ...\n   *\n   * **Warning** : These bindings are compiled with rollup as a standalone JS module for inclusion in other libraries.\n   * In consequence, they are meant to be kept lightweight, and should avoid importing dependencies.\n   *\n   * @module\n   */\n  const compileRawModule = (code) => new Function(`\n        ${code}\n        return exports\n    `)();\n  const createEngineBindings = (rawModule) => {\n      const exportedNames = rawModule.metadata.compilation.variableNamesIndex.globals;\n      const globalsBindings = {\n          commons: {\n              type: 'proxy',\n              value: createCommonsModule(rawModule, rawModule.metadata),\n          },\n      };\n      if ('fs' in exportedNames) {\n          globalsBindings.fs = { type: 'proxy', value: createFsModule(rawModule) };\n      }\n      return {\n          metadata: { type: 'raw' },\n          initialize: { type: 'raw' },\n          dspLoop: { type: 'raw' },\n          io: { type: 'raw' },\n          globals: {\n              type: 'proxy',\n              value: proxyAsModuleWithBindings(rawModule, globalsBindings),\n          },\n      };\n  };\n  const createEngine = (code, additionalBindings) => {\n      const rawModule = compileRawModule(code);\n      const rawModuleWithNameMapping = proxyWithEngineNameMapping(rawModule, rawModule.metadata.compilation.variableNamesIndex);\n      return proxyAsModuleWithBindings(rawModule, {\n          ...createEngineBindings(rawModuleWithNameMapping),\n          ...(additionalBindings || {}),\n      });\n  };\n\n  const readMetadata$1 = async (target, compiled) => {\n      switch (target) {\n          case 'assemblyscript':\n              return readMetadata$2(compiled);\n          case 'javascript':\n              return createEngine(compiled).metadata;\n      }\n  };\n\n  const defaultSettingsForRun = (patchUrl, messageSender) => {\n      const rootUrl = urlDirName(patchUrl);\n      return {\n          messageHandler: (node, messageEvent) => {\n              const message = messageEvent.data;\n              switch (message.type) {\n                  case 'fs':\n                      return index(node, messageEvent, { rootUrl });\n                  case 'io:messageSender':\n                      if (messageSender) {\n                          messageSender(message.payload.nodeId, message.payload.portletId, message.payload.message);\n                      }\n                      return null;\n                  default:\n                      return null;\n              }\n          },\n      };\n  };\n  const readMetadata = (compiledPatch) => {\n      if (typeof compiledPatch === 'string') {\n          return readMetadata$1('javascript', compiledPatch);\n      }\n      else {\n          return readMetadata$1('assemblyscript', compiledPatch);\n      }\n  };\n\n  var run = async (audioContext, compiledPatch, settings) => {\n      const { messageHandler } = settings;\n      const webpdNode = new WebPdWorkletNode(audioContext);\n      webpdNode.port.onmessage = (msg) => messageHandler(webpdNode, msg);\n      if (typeof compiledPatch === 'string') {\n          webpdNode.port.postMessage({\n              type: 'code:JS',\n              payload: {\n                  jsCode: compiledPatch,\n              },\n          });\n      }\n      else {\n          webpdNode.port.postMessage({\n              type: 'code:WASM',\n              payload: {\n                  wasmBuffer: compiledPatch,\n              },\n          });\n      }\n      return webpdNode;\n  };\n\n  exports.defaultSettingsForRun = defaultSettingsForRun;\n  exports.initialize = initialize;\n  exports.readMetadata = readMetadata;\n  exports.run = run;\n\n  return exports;\n\n})({});\n",[t]:a,"index.html":'\n<!DOCTYPE html>\n<html lang="en">\n    <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <meta http-equiv="X-UA-Compatible" content="ie=edge">\n        <title>WebPd boilerplate</title>\n        <style>\n            #start {\n                display: none;\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n            }\n            #loading {\n                width: 100%;\n                height: 100%;\n                position: fixed;\n                top: 50%;\n                transform: translateY(-50%);\n                display: flex;\n                justify-content: center;\n                align-items: center;\n            }\n        </style>\n    </head>\n    <body>\n        <h1>My Web Page</h1>\n        <div>For more info about usage (how to interact with the patch), you can open this HTML file in a code editor.</div>\n        <button id="start"> Start </button>\n        <div id="loading"> Loading ... </div>\n        <script src="'.concat(Ju,"\"><\/script>\n        <script>\n            // SUMMARY\n            // 1. WEB PAGE INITIALIZATION\n            // 2. SENDING MESSAGES FROM JAVASCRIPT TO THE PATCH\n            // 3. SENDING MESSAGES FROM THE PATCH TO JAVASCRIPT\n\n\n            // ------------- 1. WEB PAGE INITIALIZATION\n            const loadingDiv = document.querySelector('#loading')\n            const startButton = document.querySelector('#start')\n            const audioContext = new AudioContext()\n\n            let patch = null\n            let stream = null\n            let webpdNode = null\n\n            const initApp = async () => {\n                // Register the worklet\n                await WebPdRuntime.initialize(audioContext)\n\n                // Fetch the patch code\n                response = await fetch('").concat(t,"')\n                patch = await ").concat("javascript"===n?"response.text()":"response.arrayBuffer()","\n\n                // Comment this if you don't need audio input\n                stream = await navigator.mediaDevices.getUserMedia({ audio: true })\n\n                // Hide loading and show start button\n                loadingDiv.style.display = 'none'\n                startButton.style.display = 'block'\n            }\n\n            const startApp = async () => {\n                // AudioContext needs to be resumed on click to protects users \n                // from being spammed with autoplay.\n                // See : https://github.com/WebAudio/web-audio-api/issues/345\n                if (audioContext.state === 'suspended') {\n                    audioContext.resume()\n                }\n\n                // Setup web audio graph\n                webpdNode = await WebPdRuntime.run(\n                    audioContext, \n                    patch, \n                    WebPdRuntime.defaultSettingsForRun(\n                        './").concat(t,"',\n                        // Comment this if you don't need to receive messages from the patch\n                        receiveMsgFromWebPd,\n                    ),\n                )\n                webpdNode.connect(audioContext.destination)\n\n                // Comment this if you don't need audio input\n                const sourceNode = audioContext.createMediaStreamSource(stream)\n                sourceNode.connect(webpdNode)\n\n                // Hide the start button\n                startButton.style.display = 'none'\n            }\n\n            startButton.onclick = startApp\n\n            initApp().\n                then(() => {\n                    console.log('App initialized')\n                })\n\n            \n            // ------------- 2. SENDING MESSAGES FROM JAVASCRIPT TO THE PATCH\n            // Use the function sendMsgToWebPd to send a message from JavaScript to an object inside your patch.\n            // \n            // Parameters : \n            // - nodeId: the ID of the object you want to send a message to. \n            //          This ID is a string that has been assigned by WebPd at compilation.\n            //          You can find below the list of available IDs with hints to help you \n            //          identify the object you want to interact with.\n            // - portletId : the ID of the object portlet to which the message should be sent. \n            // - message : the message to send. This must be a list of strings and / or numbers.\n            // \n            // Examples :\n            // - sending a message to a bang node of ID 'n_0_1' :\n            //          sendMsgToWebPd('n_0_1', '0', ['bang'])\n            // - sending a message to a number object of ID 'n_0_2' :\n            //          sendMsgToWebPd('n_0_2', '0', [123])\n            // \n            const sendMsgToWebPd = (nodeId, portletId, message) => {\n                webpdNode.port.postMessage({\n                    type: 'io:messageReceiver',\n                    payload: {\n                        nodeId,\n                        portletId,\n                        message,\n                    },\n                })\n            }\n            \n            // Here is an index of objects IDs to which you can send messages, with hints so you can find the right ID.\n            // Note that by default only GUI objects (bangs, sliders, etc ...) are available.").concat(Zu(r.settings.io.messageReceivers,i,((e,n,t)=>'\n            //  - nodeId "'.concat(e.id,'" portletId "').concat(n,'"\n            //      * type "').concat(e.type,'"\n            //      * position ').concat(t.x," ").concat(t.y).concat(t.label?'\n            //      * label "'.concat(t.label,'"'):"","\n            ")),((e,n)=>'\n            //  - nodeId "'.concat(e.id,'" portletId "').concat(n,'"\n            //      * type "send"\n            //      * send "').concat(e.args.busName,'"\n            ')),"\n            // EMPTY (did you place a GUI object or send object in your patch ?)\n"),"\n\n            // ------------- 3. SENDING MESSAGES FROM THE PATCH TO JAVASCRIPT\n            // Use the function receiveMsgFromWebPd to receive a message from an object inside your patch.\n            // \n            // Parameters : \n            // - nodeId: the ID of the object that is sending a message. \n            //          This ID is a string that has been assigned by WebPd at compilation.\n            //          You can find below the list of available IDs with hints to help you \n            //          identify the object you want to interact with.\n            // - portletId : the ID of the object portlet that is sending the message.\n            // - message : the message that was sent. It is a list of strings and / or numbers.\n            const receiveMsgFromWebPd = (nodeId, portletId, message) => {").concat(Zu(r.settings.io.messageSenders,i,((e,n,t)=>'\n                if (nodeId === "'.concat(e.id,'" && portletId === "').concat(n,"\") {\n                    console.log('Message received from :\\n'\n                        + '\t* nodeId \"").concat(e.id,'" portletId "').concat(n,"\"\\n'\n                        + '\t* type \"").concat(e.type,"\"\\n'\n                        + '\t* position ").concat(t.x," ").concat(t.y,"\\n'").concat(t.label?"\n                        + '\t* label \"".concat(t.label,"\"'"):"","\n                    )\n                }")),((e,n)=>'\n                if (nodeId === "'.concat(e.id,'" && portletId === "').concat(n,"\") {\n                    console.log('Message received from :\\n'\n                        + '\t* nodeId \"").concat(e.id,'" portletId "').concat(n,"\"\\n'\n                        + '\t* type \"receive\"\\n'\n                        + '\t* receive \"").concat(e.args.busName,"\"'\n                    )\n                }")),"\n                // /! there seems to be no message senders in the patch. \n                // Add a GUI object or a send object in your patch to be able to receive messages.\n"),"                \n            }\n\n        <\/script>\n    </body>\n</html>")}})(e),{status:0,warnings:[]};default:throw new Error("invalid build step ".concat(n))}},wS=e=>["Unknown object types ".concat(Array.from(e).map((e=>"".concat(e))).join(", "))],SS=e=>e.map((e=>{let{message:n,lineIndex:t}=e;return"line ".concat(t+1," : ").concat(n)}));function xS(e){return Number.isInteger(e)&&e>=0}function kS(e){this.name="ArgumentError",this.message=e}const IS=function(e,n){if(n=n||{},"function"!==typeof e)throw new kS("fetch must be a function");if("object"!==typeof n)throw new kS("defaults must be an object");if(void 0!==n.retries&&!xS(n.retries))throw new kS("retries must be a positive integer");if(void 0!==n.retryDelay&&!xS(n.retryDelay)&&"function"!==typeof n.retryDelay)throw new kS("retryDelay must be a positive integer or a function returning a positive integer");if(void 0!==n.retryOn&&!Array.isArray(n.retryOn)&&"function"!==typeof n.retryOn)throw new kS("retryOn property expects an array or function");return n=Object.assign({retries:3,retryDelay:1e3,retryOn:[]},n),function(t,r){var a=n.retries,i=n.retryDelay,o=n.retryOn;if(r&&void 0!==r.retries){if(!xS(r.retries))throw new kS("retries must be a positive integer");a=r.retries}if(r&&void 0!==r.retryDelay){if(!xS(r.retryDelay)&&"function"!==typeof r.retryDelay)throw new kS("retryDelay must be a positive integer or a function returning a positive integer");i=r.retryDelay}if(r&&r.retryOn){if(!Array.isArray(r.retryOn)&&"function"!==typeof r.retryOn)throw new kS("retryOn property expects an array or function");o=r.retryOn}return new Promise((function(n,s){var l=function(i){var l="undefined"!==typeof Request&&t instanceof Request?t.clone():t;e(l,r).then((function(e){if(Array.isArray(o)&&-1===o.indexOf(e.status))n(e);else if("function"===typeof o)try{return Promise.resolve(o(i,null,e)).then((function(t){t?c(i,null,e):n(e)})).catch(s)}catch(t){s(t)}else i<a?c(i,null,e):n(e)})).catch((function(e){if("function"===typeof o)try{Promise.resolve(o(i,e,null)).then((function(n){n?c(i,e,null):s(e)})).catch((function(e){s(e)}))}catch(e){s(e)}else i<a?c(i,e,null):s(e)}))};function c(e,n,t){var r="function"===typeof i?i(e,n,t):i;setTimeout((function(){l(++e)}),r)}l(0)}))}}(fetch),_S=(e,n)=>{if(0===e.length)throw new Error("Received empty sound");const t=e[0].constructor,r=e[0].length,a=e.slice(0,n);for(;e.length<n;)a.push(new t(r));return a},AS=(e,n)=>new URL(n,e).href;class TS extends Error{constructor(e,n){super("Error ".concat(e," : ").concat(n))}}class ES extends AudioWorkletNode{constructor(e){super(e,"webpd-node",{numberOfOutputs:1,outputChannelCount:[2]})}destroy(){this.port.postMessage({type:"destroy",payload:{}})}}const OS=e=>(async(e,n)=>{const t=new Blob([n],{type:"text/javascript"}),r=URL.createObjectURL(t);return e.audioWorklet.addModule(r)})(e,"var AssemblyScriptWasmBindings = (function (exports) {\n    'use strict';\n\n    const _proxyGetHandlerThrowIfKeyUnknown = (target, key, path) => {\n        if (!(key in target)) {\n            if ([\n                'toJSON',\n                'Symbol(Symbol.toStringTag)',\n                'constructor',\n                '$typeof',\n                '$$typeof',\n                '@@__IMMUTABLE_ITERABLE__@@',\n                '@@__IMMUTABLE_RECORD__@@',\n                'then',\n            ].includes(key)) {\n                return true;\n            }\n            throw new Error(`namespace${path ? ` <${path.keys.join('.')}>` : ''} doesn't know key \"${String(key)}\"`);\n        }\n        return false;\n    };\n\n    const getFloatArrayType = (bitDepth) => bitDepth === 64 ? Float64Array : Float32Array;\n    const proxyAsModuleWithBindings = (rawModule, bindings) => new Proxy({}, {\n        get: (_, k) => {\n            if (bindings.hasOwnProperty(k)) {\n                const key = String(k);\n                const bindingSpec = bindings[key];\n                switch (bindingSpec.type) {\n                    case 'raw':\n                        if (k in rawModule) {\n                            return rawModule[key];\n                        }\n                        else {\n                            throw new Error(`Key ${String(key)} doesn't exist in raw module`);\n                        }\n                    case 'proxy':\n                    case 'callback':\n                        return bindingSpec.value;\n                }\n            }\n            else {\n                return undefined;\n            }\n        },\n        has: function (_, k) {\n            return k in bindings;\n        },\n        set: (_, k, newValue) => {\n            if (bindings.hasOwnProperty(String(k))) {\n                const key = String(k);\n                const bindingSpec = bindings[key];\n                if (bindingSpec.type === 'callback') {\n                    bindingSpec.value = newValue;\n                }\n                else {\n                    throw new Error(`Binding key ${String(key)} is read-only`);\n                }\n            }\n            else {\n                throw new Error(`Key ${String(k)} is not defined in bindings`);\n            }\n            return true;\n        },\n    });\n    const proxyWithEngineNameMapping = (rawModule, variableNamesIndex) => proxyWithNameMapping(rawModule, {\n        globals: variableNamesIndex.globals,\n        io: variableNamesIndex.io,\n    });\n    const proxyWithNameMapping = (rawModule, variableNamesIndex) => {\n        if (typeof variableNamesIndex === 'string') {\n            return rawModule[variableNamesIndex];\n        }\n        else if (typeof variableNamesIndex === 'object') {\n            return new Proxy(rawModule, {\n                get: (_, k) => {\n                    const key = String(k);\n                    if (key in rawModule) {\n                        return Reflect.get(rawModule, key);\n                    }\n                    else if (key in variableNamesIndex) {\n                        const nextVariableNames = variableNamesIndex[key];\n                        return proxyWithNameMapping(rawModule, nextVariableNames);\n                    }\n                    else if (_proxyGetHandlerThrowIfKeyUnknown(rawModule, key)) {\n                        return undefined;\n                    }\n                },\n                has: function (_, k) {\n                    return k in rawModule || k in variableNamesIndex;\n                },\n                set: (_, k, value) => {\n                    const key = String(k);\n                    if (key in variableNamesIndex) {\n                        const variableName = variableNamesIndex[key];\n                        if (typeof variableName !== 'string') {\n                            throw new Error(`Failed to set value for key ${String(k)}: variable name is not a string`);\n                        }\n                        return Reflect.set(rawModule, variableName, value);\n                    }\n                    else {\n                        throw new Error(`Key ${String(k)} is not defined in raw module`);\n                    }\n                },\n            });\n        }\n        else {\n            throw new Error(`Invalid name mapping`);\n        }\n    };\n\n    const liftString = (rawModule, pointer) => {\n        if (!pointer) {\n            throw new Error('Cannot lift a null pointer');\n        }\n        pointer = pointer >>> 0;\n        const end = (pointer +\n            new Uint32Array(rawModule.memory.buffer)[(pointer - 4) >>> 2]) >>>\n            1;\n        const memoryU16 = new Uint16Array(rawModule.memory.buffer);\n        let start = pointer >>> 1;\n        let string = '';\n        while (end - start > 1024) {\n            string += String.fromCharCode(...memoryU16.subarray(start, (start += 1024)));\n        }\n        return string + String.fromCharCode(...memoryU16.subarray(start, end));\n    };\n    const lowerString = (rawModule, value) => {\n        if (value == null) {\n            throw new Error('Cannot lower a null string');\n        }\n        const length = value.length, pointer = rawModule.__new(length << 1, 1) >>> 0, memoryU16 = new Uint16Array(rawModule.memory.buffer);\n        for (let i = 0; i < length; ++i)\n            memoryU16[(pointer >>> 1) + i] = value.charCodeAt(i);\n        return pointer;\n    };\n    const readTypedArray = (rawModule, constructor, pointer) => {\n        if (!pointer) {\n            throw new Error('Cannot lift a null pointer');\n        }\n        const memoryU32 = new Uint32Array(rawModule.memory.buffer);\n        return new constructor(rawModule.memory.buffer, memoryU32[(pointer + 4) >>> 2], memoryU32[(pointer + 8) >>> 2] / constructor.BYTES_PER_ELEMENT);\n    };\n    const lowerFloatArray = (rawModule, bitDepth, data) => {\n        const arrayType = getFloatArrayType(bitDepth);\n        const arrayPointer = rawModule.globals.core.createFloatArray(data.length);\n        const array = readTypedArray(rawModule, arrayType, arrayPointer);\n        array.set(data);\n        return { array, arrayPointer };\n    };\n    const lowerListOfFloatArrays = (rawModule, bitDepth, data) => {\n        const arraysPointer = rawModule.globals.core.x_createListOfArrays();\n        data.forEach((array) => {\n            const { arrayPointer } = lowerFloatArray(rawModule, bitDepth, array);\n            rawModule.globals.core.x_pushToListOfArrays(arraysPointer, arrayPointer);\n        });\n        return arraysPointer;\n    };\n    const readListOfFloatArrays = (rawModule, bitDepth, listOfArraysPointer) => {\n        const listLength = rawModule.globals.core.x_getListOfArraysLength(listOfArraysPointer);\n        const arrays = [];\n        const arrayType = getFloatArrayType(bitDepth);\n        for (let i = 0; i < listLength; i++) {\n            const arrayPointer = rawModule.globals.core.x_getListOfArraysElem(listOfArraysPointer, i);\n            arrays.push(readTypedArray(rawModule, arrayType, arrayPointer));\n        }\n        return arrays;\n    };\n\n    const instantiateWasmModule = async (wasmBuffer, wasmImports = {}) => {\n        const instanceAndModule = await WebAssembly.instantiate(wasmBuffer, {\n            env: {\n                abort: (messagePointer, _, lineNumber, columnNumber) => {\n                    const message = liftString(wasmExports, messagePointer);\n                    lineNumber = lineNumber;\n                    columnNumber = columnNumber;\n                    (() => {\n                        throw Error(`${message} at ${lineNumber}:${columnNumber}`);\n                    })();\n                },\n                seed: () => {\n                    return (() => {\n                        return Date.now() * Math.random();\n                    })();\n                },\n                'console.log': (textPointer) => {\n                    console.log(liftString(wasmExports, textPointer));\n                },\n            },\n            ...wasmImports,\n        });\n        const wasmExports = instanceAndModule.instance\n            .exports;\n        return instanceAndModule.instance;\n    };\n\n    const updateWasmInOuts = ({ refs, cache, }) => {\n        cache.wasmOutput = readTypedArray(refs.rawModule, cache.arrayType, refs.rawModule.globals.core.x_getOutput());\n        cache.wasmInput = readTypedArray(refs.rawModule, cache.arrayType, refs.rawModule.globals.core.x_getInput());\n    };\n    const createEngineLifecycleBindings = (engineContext) => {\n        const { refs, cache, metadata } = engineContext;\n        return {\n            initialize: {\n                type: 'proxy',\n                value: (sampleRate, blockSize) => {\n                    metadata.settings.audio.blockSize = blockSize;\n                    metadata.settings.audio.sampleRate = sampleRate;\n                    cache.blockSize = blockSize;\n                    refs.rawModule.initialize(sampleRate, blockSize);\n                    updateWasmInOuts(engineContext);\n                },\n            },\n            dspLoop: {\n                type: 'proxy',\n                value: (input, output) => {\n                    for (let channel = 0; channel < input.length; channel++) {\n                        cache.wasmInput.set(input[channel], channel * cache.blockSize);\n                    }\n                    updateWasmInOuts(engineContext);\n                    refs.rawModule.dspLoop();\n                    updateWasmInOuts(engineContext);\n                    for (let channel = 0; channel < output.length; channel++) {\n                        output[channel].set(cache.wasmOutput.subarray(cache.blockSize * channel, cache.blockSize * (channel + 1)));\n                    }\n                },\n            },\n        };\n    };\n\n    const createCommonsBindings = (engineContext) => {\n        const { refs, cache } = engineContext;\n        return {\n            getArray: {\n                type: 'proxy',\n                value: (arrayName) => {\n                    const arrayNamePointer = lowerString(refs.rawModule, arrayName);\n                    const arrayPointer = refs.rawModule.globals.commons.getArray(arrayNamePointer);\n                    return readTypedArray(refs.rawModule, cache.arrayType, arrayPointer);\n                },\n            },\n            setArray: {\n                type: 'proxy',\n                value: (arrayName, array) => {\n                    const stringPointer = lowerString(refs.rawModule, arrayName);\n                    const { arrayPointer } = lowerFloatArray(refs.rawModule, cache.bitDepth, array);\n                    refs.rawModule.globals.commons.setArray(stringPointer, arrayPointer);\n                    updateWasmInOuts(engineContext);\n                },\n            },\n        };\n    };\n\n    const readMetadata = async (wasmBuffer) => {\n        const inputImports = {};\n        const wasmModule = WebAssembly.Module.imports(new WebAssembly.Module(wasmBuffer));\n        wasmModule\n            .filter((imprt) => imprt.module === 'input' && imprt.kind === 'function')\n            .forEach((imprt) => (inputImports[imprt.name] = () => undefined));\n        const wasmInstance = await instantiateWasmModule(wasmBuffer, {\n            input: inputImports,\n        });\n        const rawModule = wasmInstance.exports;\n        const stringPointer = rawModule.metadata.valueOf();\n        const metadataJSON = liftString(rawModule, stringPointer);\n        return JSON.parse(metadataJSON);\n    };\n\n    const mapArray = (src, func) => {\n        const dest = {};\n        src.forEach((srcValue, i) => {\n            const [key, destValue] = func(srcValue, i);\n            dest[key] = destValue;\n        });\n        return dest;\n    };\n\n    const liftMessage = (rawModule, messagePointer) => {\n        const messageTokenTypesPointer = rawModule.globals.msg.x_getTokenTypes(messagePointer);\n        const messageTokenTypes = readTypedArray(rawModule, Int32Array, messageTokenTypesPointer);\n        const message = [];\n        messageTokenTypes.forEach((tokenType, tokenIndex) => {\n            if (tokenType === rawModule.globals.msg.FLOAT_TOKEN.valueOf()) {\n                message.push(rawModule.globals.msg.readFloatToken(messagePointer, tokenIndex));\n            }\n            else if (tokenType === rawModule.globals.msg.STRING_TOKEN.valueOf()) {\n                const stringPointer = rawModule.globals.msg.readStringToken(messagePointer, tokenIndex);\n                message.push(liftString(rawModule, stringPointer));\n            }\n        });\n        return message;\n    };\n    const lowerMessage = (rawModule, message) => {\n        const template = message.reduce((template, value) => {\n            if (typeof value === 'number') {\n                template.push(rawModule.globals.msg.FLOAT_TOKEN.valueOf());\n            }\n            else if (typeof value === 'string') {\n                template.push(rawModule.globals.msg.STRING_TOKEN.valueOf());\n                template.push(value.length);\n            }\n            else {\n                throw new Error(`invalid message value ${value}`);\n            }\n            return template;\n        }, []);\n        const templateArrayPointer = rawModule.globals.msg.x_createTemplate(template.length);\n        const loweredTemplateArray = readTypedArray(rawModule, Int32Array, templateArrayPointer);\n        loweredTemplateArray.set(template);\n        const messagePointer = rawModule.globals.msg.x_create(templateArrayPointer);\n        message.forEach((value, index) => {\n            if (typeof value === 'number') {\n                rawModule.globals.msg.writeFloatToken(messagePointer, index, value);\n            }\n            else if (typeof value === 'string') {\n                const stringPointer = lowerString(rawModule, value);\n                rawModule.globals.msg.writeStringToken(messagePointer, index, stringPointer);\n            }\n        });\n        return messagePointer;\n    };\n\n    const createIoMessageReceiversBindings = ({ metadata, refs, }) => Object.entries(metadata.settings.io.messageReceivers).reduce((bindings, [nodeId, spec]) => ({\n        ...bindings,\n        [nodeId]: {\n            type: 'proxy',\n            value: mapArray(spec, (inletId) => [\n                inletId,\n                (message) => {\n                    const messagePointer = lowerMessage(refs.rawModule, message);\n                    refs.rawModule.io.messageReceivers[nodeId][inletId](messagePointer);\n                },\n            ]),\n        },\n    }), {});\n    const createIoMessageSendersBindings = ({ metadata, }) => Object.entries(metadata.settings.io.messageSenders).reduce((bindings, [nodeId, spec]) => ({\n        ...bindings,\n        [nodeId]: {\n            type: 'proxy',\n            value: mapArray(spec, (outletId) => [\n                outletId,\n                (_) => undefined,\n            ]),\n        },\n    }), {});\n    const ioMsgSendersImports = ({ metadata, refs, }) => {\n        const wasmImports = {};\n        const { variableNamesIndex } = metadata.compilation;\n        Object.entries(metadata.settings.io.messageSenders).forEach(([nodeId, spec]) => {\n            spec.forEach((outletId) => {\n                const listenerName = variableNamesIndex.io.messageSenders[nodeId][outletId];\n                wasmImports[listenerName] = (messagePointer) => {\n                    const message = liftMessage(refs.rawModule, messagePointer);\n                    refs.engine.io.messageSenders[nodeId][outletId](message);\n                };\n            });\n        });\n        return wasmImports;\n    };\n\n    const createFsBindings = (engineContext) => {\n        const { refs, cache, metadata } = engineContext;\n        const fsExportedNames = metadata.compilation.variableNamesIndex.globals.fs;\n        return {\n            sendReadSoundFileResponse: {\n                type: 'proxy',\n                value: 'x_onReadSoundFileResponse' in fsExportedNames\n                    ? (operationId, status, sound) => {\n                        let soundPointer = 0;\n                        if (sound) {\n                            soundPointer = lowerListOfFloatArrays(refs.rawModule, cache.bitDepth, sound);\n                        }\n                        refs.rawModule.globals.fs.x_onReadSoundFileResponse(operationId, status, soundPointer);\n                        updateWasmInOuts(engineContext);\n                    }\n                    : undefined,\n            },\n            sendWriteSoundFileResponse: {\n                type: 'proxy',\n                value: 'x_onWriteSoundFileResponse' in fsExportedNames\n                    ? refs.rawModule.globals.fs.x_onWriteSoundFileResponse\n                    : undefined,\n            },\n            sendSoundStreamData: {\n                type: 'proxy',\n                value: 'x_onSoundStreamData' in fsExportedNames\n                    ? (operationId, sound) => {\n                        const soundPointer = lowerListOfFloatArrays(refs.rawModule, cache.bitDepth, sound);\n                        const writtenFrameCount = refs.rawModule.globals.fs.x_onSoundStreamData(operationId, soundPointer);\n                        updateWasmInOuts(engineContext);\n                        return writtenFrameCount;\n                    }\n                    : undefined,\n            },\n            closeSoundStream: {\n                type: 'proxy',\n                value: 'x_onCloseSoundStream' in fsExportedNames\n                    ? refs.rawModule.globals.fs.x_onCloseSoundStream\n                    : undefined,\n            },\n            onReadSoundFile: { type: 'callback', value: () => undefined },\n            onWriteSoundFile: { type: 'callback', value: () => undefined },\n            onOpenSoundReadStream: { type: 'callback', value: () => undefined },\n            onOpenSoundWriteStream: { type: 'callback', value: () => undefined },\n            onSoundStreamData: { type: 'callback', value: () => undefined },\n            onCloseSoundStream: { type: 'callback', value: () => undefined },\n        };\n    };\n    const createFsImports = (engineContext) => {\n        const wasmImports = {};\n        const { cache, metadata, refs } = engineContext;\n        const exportedNames = metadata.compilation.variableNamesIndex.globals;\n        if ('fs' in exportedNames) {\n            const nameMapping = proxyWithNameMapping(wasmImports, exportedNames.fs);\n            if ('i_readSoundFile' in exportedNames.fs) {\n                nameMapping.i_readSoundFile = (operationId, urlPointer, infoPointer) => {\n                    const url = liftString(refs.rawModule, urlPointer);\n                    const info = liftMessage(refs.rawModule, infoPointer);\n                    refs.engine.globals.fs.onReadSoundFile(operationId, url, info);\n                };\n            }\n            if ('i_writeSoundFile' in exportedNames.fs) {\n                nameMapping.i_writeSoundFile = (operationId, soundPointer, urlPointer, infoPointer) => {\n                    const sound = readListOfFloatArrays(refs.rawModule, cache.bitDepth, soundPointer);\n                    const url = liftString(refs.rawModule, urlPointer);\n                    const info = liftMessage(refs.rawModule, infoPointer);\n                    refs.engine.globals.fs.onWriteSoundFile(operationId, sound, url, info);\n                };\n            }\n            if ('i_openSoundReadStream' in exportedNames.fs) {\n                nameMapping.i_openSoundReadStream = (operationId, urlPointer, infoPointer) => {\n                    const url = liftString(refs.rawModule, urlPointer);\n                    const info = liftMessage(refs.rawModule, infoPointer);\n                    updateWasmInOuts(engineContext);\n                    refs.engine.globals.fs.onOpenSoundReadStream(operationId, url, info);\n                };\n            }\n            if ('i_openSoundWriteStream' in exportedNames.fs) {\n                nameMapping.i_openSoundWriteStream = (operationId, urlPointer, infoPointer) => {\n                    const url = liftString(refs.rawModule, urlPointer);\n                    const info = liftMessage(refs.rawModule, infoPointer);\n                    refs.engine.globals.fs.onOpenSoundWriteStream(operationId, url, info);\n                };\n            }\n            if ('i_sendSoundStreamData' in exportedNames.fs) {\n                nameMapping.i_sendSoundStreamData = (operationId, blockPointer) => {\n                    const block = readListOfFloatArrays(refs.rawModule, cache.bitDepth, blockPointer);\n                    refs.engine.globals.fs.onSoundStreamData(operationId, block);\n                };\n            }\n            if ('i_closeSoundStream' in exportedNames.fs) {\n                nameMapping.i_closeSoundStream = (...args) => refs.engine.globals.fs.onCloseSoundStream(...args);\n            }\n        }\n        return wasmImports;\n    };\n\n    const createEngine = async (wasmBuffer, additionalBindings) => {\n        const metadata = await readMetadata(wasmBuffer);\n        const bitDepth = metadata.settings.audio.bitDepth;\n        const arrayType = getFloatArrayType(bitDepth);\n        const engineContext = {\n            refs: {},\n            metadata: metadata,\n            cache: {\n                wasmOutput: new arrayType(0),\n                wasmInput: new arrayType(0),\n                arrayType,\n                bitDepth,\n                blockSize: 0,\n            },\n        };\n        const wasmImports = {\n            ...createFsImports(engineContext),\n            ...ioMsgSendersImports(engineContext),\n        };\n        const wasmInstance = await instantiateWasmModule(wasmBuffer, {\n            input: wasmImports,\n        });\n        engineContext.refs.rawModule = proxyWithEngineNameMapping(wasmInstance.exports, metadata.compilation.variableNamesIndex);\n        const engineBindings = createEngineBindings(engineContext);\n        const engine = proxyAsModuleWithBindings(engineContext.refs.rawModule, {\n            ...engineBindings,\n            ...(additionalBindings || {}),\n        });\n        engineContext.refs.engine = engine;\n        return engine;\n    };\n    const createEngineBindings = (engineContext) => {\n        const { metadata, refs } = engineContext;\n        const exportedNames = metadata.compilation.variableNamesIndex.globals;\n        const io = {\n            messageReceivers: proxyAsModuleWithBindings(refs.rawModule, createIoMessageReceiversBindings(engineContext)),\n            messageSenders: proxyAsModuleWithBindings(refs.rawModule, createIoMessageSendersBindings(engineContext)),\n        };\n        const globalsBindings = {\n            commons: {\n                type: 'proxy',\n                value: proxyAsModuleWithBindings(refs.rawModule, createCommonsBindings(engineContext)),\n            },\n        };\n        if ('fs' in exportedNames) {\n            const fs = proxyAsModuleWithBindings(refs.rawModule, createFsBindings(engineContext));\n            globalsBindings.fs = { type: 'proxy', value: fs };\n        }\n        return {\n            ...createEngineLifecycleBindings(engineContext),\n            metadata: { type: 'proxy', value: metadata },\n            globals: {\n                type: 'proxy',\n                value: proxyAsModuleWithBindings(refs.rawModule, globalsBindings),\n            },\n            io: { type: 'proxy', value: io },\n        };\n    };\n\n    exports.createEngine = createEngine;\n    exports.createEngineBindings = createEngineBindings;\n\n    return exports;\n\n})({});\n;\nvar JavaScriptBindings = (function (exports) {\n    'use strict';\n\n    const _proxyGetHandlerThrowIfKeyUnknown = (target, key, path) => {\n        if (!(key in target)) {\n            if ([\n                'toJSON',\n                'Symbol(Symbol.toStringTag)',\n                'constructor',\n                '$typeof',\n                '$$typeof',\n                '@@__IMMUTABLE_ITERABLE__@@',\n                '@@__IMMUTABLE_RECORD__@@',\n                'then',\n            ].includes(key)) {\n                return true;\n            }\n            throw new Error(`namespace${path ? ` <${path.keys.join('.')}>` : ''} doesn't know key \"${String(key)}\"`);\n        }\n        return false;\n    };\n\n    const getFloatArrayType = (bitDepth) => bitDepth === 64 ? Float64Array : Float32Array;\n    const proxyAsModuleWithBindings = (rawModule, bindings) => new Proxy({}, {\n        get: (_, k) => {\n            if (bindings.hasOwnProperty(k)) {\n                const key = String(k);\n                const bindingSpec = bindings[key];\n                switch (bindingSpec.type) {\n                    case 'raw':\n                        if (k in rawModule) {\n                            return rawModule[key];\n                        }\n                        else {\n                            throw new Error(`Key ${String(key)} doesn't exist in raw module`);\n                        }\n                    case 'proxy':\n                    case 'callback':\n                        return bindingSpec.value;\n                }\n            }\n            else {\n                return undefined;\n            }\n        },\n        has: function (_, k) {\n            return k in bindings;\n        },\n        set: (_, k, newValue) => {\n            if (bindings.hasOwnProperty(String(k))) {\n                const key = String(k);\n                const bindingSpec = bindings[key];\n                if (bindingSpec.type === 'callback') {\n                    bindingSpec.value = newValue;\n                }\n                else {\n                    throw new Error(`Binding key ${String(key)} is read-only`);\n                }\n            }\n            else {\n                throw new Error(`Key ${String(k)} is not defined in bindings`);\n            }\n            return true;\n        },\n    });\n    const proxyWithEngineNameMapping = (rawModule, variableNamesIndex) => proxyWithNameMapping(rawModule, {\n        globals: variableNamesIndex.globals,\n        io: variableNamesIndex.io,\n    });\n    const proxyWithNameMapping = (rawModule, variableNamesIndex) => {\n        if (typeof variableNamesIndex === 'string') {\n            return rawModule[variableNamesIndex];\n        }\n        else if (typeof variableNamesIndex === 'object') {\n            return new Proxy(rawModule, {\n                get: (_, k) => {\n                    const key = String(k);\n                    if (key in rawModule) {\n                        return Reflect.get(rawModule, key);\n                    }\n                    else if (key in variableNamesIndex) {\n                        const nextVariableNames = variableNamesIndex[key];\n                        return proxyWithNameMapping(rawModule, nextVariableNames);\n                    }\n                    else if (_proxyGetHandlerThrowIfKeyUnknown(rawModule, key)) {\n                        return undefined;\n                    }\n                },\n                has: function (_, k) {\n                    return k in rawModule || k in variableNamesIndex;\n                },\n                set: (_, k, value) => {\n                    const key = String(k);\n                    if (key in variableNamesIndex) {\n                        const variableName = variableNamesIndex[key];\n                        if (typeof variableName !== 'string') {\n                            throw new Error(`Failed to set value for key ${String(k)}: variable name is not a string`);\n                        }\n                        return Reflect.set(rawModule, variableName, value);\n                    }\n                    else {\n                        throw new Error(`Key ${String(k)} is not defined in raw module`);\n                    }\n                },\n            });\n        }\n        else {\n            throw new Error(`Invalid name mapping`);\n        }\n    };\n\n    const createFsModule = (rawModule) => {\n        const fsExportedNames = rawModule.metadata.compilation.variableNamesIndex.globals.fs;\n        const fs = proxyAsModuleWithBindings(rawModule, {\n            onReadSoundFile: { type: 'callback', value: () => undefined },\n            onWriteSoundFile: { type: 'callback', value: () => undefined },\n            onOpenSoundReadStream: { type: 'callback', value: () => undefined },\n            onOpenSoundWriteStream: { type: 'callback', value: () => undefined },\n            onSoundStreamData: { type: 'callback', value: () => undefined },\n            onCloseSoundStream: { type: 'callback', value: () => undefined },\n            sendReadSoundFileResponse: {\n                type: 'proxy',\n                value: 'x_onReadSoundFileResponse' in fsExportedNames\n                    ? rawModule.globals.fs.x_onReadSoundFileResponse\n                    : undefined,\n            },\n            sendWriteSoundFileResponse: {\n                type: 'proxy',\n                value: 'x_onWriteSoundFileResponse' in fsExportedNames\n                    ? rawModule.globals.fs.x_onWriteSoundFileResponse\n                    : undefined,\n            },\n            sendSoundStreamData: {\n                type: 'proxy',\n                value: 'x_onSoundStreamData' in fsExportedNames\n                    ? rawModule.globals.fs.x_onSoundStreamData\n                    : undefined,\n            },\n            closeSoundStream: {\n                type: 'proxy',\n                value: 'x_onCloseSoundStream' in fsExportedNames\n                    ? rawModule.globals.fs.x_onCloseSoundStream\n                    : undefined,\n            },\n        });\n        if ('i_openSoundWriteStream' in fsExportedNames) {\n            rawModule.globals.fs.i_openSoundWriteStream = (...args) => fs.onOpenSoundWriteStream(...args);\n        }\n        if ('i_sendSoundStreamData' in fsExportedNames) {\n            rawModule.globals.fs.i_sendSoundStreamData = (...args) => fs.onSoundStreamData(...args);\n        }\n        if ('i_openSoundReadStream' in fsExportedNames) {\n            rawModule.globals.fs.i_openSoundReadStream = (...args) => fs.onOpenSoundReadStream(...args);\n        }\n        if ('i_closeSoundStream' in fsExportedNames) {\n            rawModule.globals.fs.i_closeSoundStream = (...args) => fs.onCloseSoundStream(...args);\n        }\n        if ('i_writeSoundFile' in fsExportedNames) {\n            rawModule.globals.fs.i_writeSoundFile = (...args) => fs.onWriteSoundFile(...args);\n        }\n        if ('i_readSoundFile' in fsExportedNames) {\n            rawModule.globals.fs.i_readSoundFile = (...args) => fs.onReadSoundFile(...args);\n        }\n        return fs;\n    };\n\n    const createCommonsModule = (rawModule, metadata) => {\n        const floatArrayType = getFloatArrayType(metadata.settings.audio.bitDepth);\n        return proxyAsModuleWithBindings(rawModule, {\n            getArray: {\n                type: 'proxy',\n                value: (arrayName) => rawModule.globals.commons.getArray(arrayName),\n            },\n            setArray: {\n                type: 'proxy',\n                value: (arrayName, array) => rawModule.globals.commons.setArray(arrayName, new floatArrayType(array)),\n            },\n        });\n    };\n\n    const compileRawModule = (code) => new Function(`\n        ${code}\n        return exports\n    `)();\n    const createEngineBindings = (rawModule) => {\n        const exportedNames = rawModule.metadata.compilation.variableNamesIndex.globals;\n        const globalsBindings = {\n            commons: {\n                type: 'proxy',\n                value: createCommonsModule(rawModule, rawModule.metadata),\n            },\n        };\n        if ('fs' in exportedNames) {\n            globalsBindings.fs = { type: 'proxy', value: createFsModule(rawModule) };\n        }\n        return {\n            metadata: { type: 'raw' },\n            initialize: { type: 'raw' },\n            dspLoop: { type: 'raw' },\n            io: { type: 'raw' },\n            globals: {\n                type: 'proxy',\n                value: proxyAsModuleWithBindings(rawModule, globalsBindings),\n            },\n        };\n    };\n    const createEngine = (code, additionalBindings) => {\n        const rawModule = compileRawModule(code);\n        const rawModuleWithNameMapping = proxyWithEngineNameMapping(rawModule, rawModule.metadata.compilation.variableNamesIndex);\n        return proxyAsModuleWithBindings(rawModule, {\n            ...createEngineBindings(rawModuleWithNameMapping),\n            ...(additionalBindings || {}),\n        });\n    };\n\n    exports.compileRawModule = compileRawModule;\n    exports.createEngine = createEngine;\n    exports.createEngineBindings = createEngineBindings;\n\n    return exports;\n\n})({});\n;\n/*\n * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n *\n * This file is part of WebPd\n * (see https://github.com/sebpiq/WebPd).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst FS_CALLBACK_NAMES = [\n    'onReadSoundFile',\n    'onOpenSoundReadStream',\n    'onWriteSoundFile',\n    'onOpenSoundWriteStream',\n    'onSoundStreamData',\n    'onCloseSoundStream',\n];\nclass WasmWorkletProcessor extends AudioWorkletProcessor {\n    constructor() {\n        super();\n        this.port.onmessage = this.onMessage.bind(this);\n        this.settings = {\n            blockSize: null,\n            sampleRate,\n        };\n        this.dspConfigured = false;\n        this.engine = null;\n    }\n    process(inputs, outputs) {\n        const output = outputs[0];\n        const input = inputs[0];\n        if (!this.dspConfigured) {\n            if (!this.engine) {\n                return true;\n            }\n            this.settings.blockSize = output[0].length;\n            this.engine.initialize(this.settings.sampleRate, this.settings.blockSize);\n            this.dspConfigured = true;\n        }\n        this.engine.dspLoop(input, output);\n        return true;\n    }\n    onMessage(messageEvent) {\n        const message = messageEvent.data;\n        switch (message.type) {\n            case 'code:WASM':\n                this.setWasm(message.payload.wasmBuffer);\n                break;\n            case 'code:JS':\n                this.setJsCode(message.payload.jsCode);\n                break;\n            case 'io:messageReceiver':\n                this.engine.io.messageReceivers[message.payload.nodeId][message.payload.portletId](message.payload.message);\n                break;\n            case 'fs':\n                const returned = this.engine.globals.fs[message.payload.functionName].apply(null, message.payload.arguments);\n                this.port.postMessage({\n                    type: 'fs',\n                    payload: {\n                        functionName: message.payload.functionName + '_return',\n                        operationId: message.payload.arguments[0],\n                        returned,\n                    },\n                });\n                break;\n            case 'destroy':\n                this.destroy();\n                break;\n            default:\n                new Error(`unknown message type ${message.type}`);\n        }\n    }\n    // TODO : control for channelCount of wasmModule\n    setWasm(wasmBuffer) {\n        return AssemblyScriptWasmBindings.createEngine(wasmBuffer).then((engine) => this.setEngine(engine));\n    }\n    setJsCode(code) {\n        const engine = JavaScriptBindings.createEngine(code);\n        this.setEngine(engine);\n    }\n    setEngine(engine) {\n        if (engine.globals.fs) {\n            FS_CALLBACK_NAMES.forEach((functionName) => {\n                engine.globals.fs[functionName] = (...args) => {\n                    // We don't use transferables, because that would imply reallocating each time new array in the engine.\n                    this.port.postMessage({\n                        type: 'fs',\n                        payload: {\n                            functionName,\n                            arguments: args,\n                        },\n                    });\n                };\n            });\n        }\n        Object.entries(engine.metadata.settings.io.messageSenders).forEach(([nodeId, portletIds]) => {\n            portletIds.forEach((portletId) => {\n                engine.io.messageSenders[nodeId][portletId] = (message) => {\n                    this.port.postMessage({\n                        type: 'io:messageSender',\n                        payload: {\n                            nodeId,\n                            portletId,\n                            message,\n                        },\n                    });\n                };\n            });\n        });\n        this.engine = engine;\n        this.dspConfigured = false;\n    }\n    destroy() {\n        this.process = () => false;\n    }\n}\nregisterProcessor('webpd-node', WasmWorkletProcessor);\n"),CS=(e,n,t)=>{const r=NS(t);return{keys:[...r.keys,n],parents:[...r.parents,e]}},NS=e=>e||{keys:[],parents:[]},MS=()=>{throw new Error("This Proxy is read-only.")},PS=(e,n,t,r)=>{const a=r||{keys:[],parents:[]},i=PS.ensureValue(n,e,t,a);if(r){const n=r.parents[r.parents.length-1],t=r.keys[r.keys.length-1];t in n&&!("LiteralDefaultNull"in e)||(n[t]=i)}return"Literal"in e||"LiteralDefaultNull"in e?i:new Proxy(i,{get:(n,r)=>{const o=String(r);let s;if("Index"in e)s=e.Index(o,t,a);else{if(!("Interface"in e))throw new Error("no builder");if(!(o in e.Interface))throw new Error('Interface has no entry "'.concat(String(o),'"'));s=e.Interface[o]}return PS(s,o in i?i[o]:void 0,t,CS(i,o,a))},set:MS})};PS.ensureValue=(e,n,t,r,a)=>{if("Index"in n)return e||n.indexConstructor(t,NS(r));if("Interface"in n){const i=e||{};return Object.entries(n.Interface).forEach((e=>{let[n,o]=e;i[n]=PS.ensureValue(i[n],o,t,CS(i,n,r),CS(i,n,a))})),i}if("Literal"in n)return e||n.Literal(t,NS(r));if("LiteralDefaultNull"in n)return a?e||null:e||n.LiteralDefaultNull(t,NS(r));throw new Error("Invalid Assigner")},PS.Interface=e=>({Interface:e}),PS.Index=(e,n)=>({Index:e,indexConstructor:n||(()=>({}))}),PS.Literal=e=>({Literal:e}),PS.LiteralDefaultNull=e=>({LiteralDefaultNull:e});const FS=(e,n)=>new Proxy(e,{get:(e,t)=>{const r=String(t);if(!((e,n,t)=>{if(!(n in e)){if(["toJSON","Symbol(Symbol.toStringTag)","constructor","$typeof","$$typeof","@@__IMMUTABLE_ITERABLE__@@","@@__IMMUTABLE_RECORD__@@","then"].includes(n))return!0;throw new Error("namespace".concat(t?" <".concat(t.keys.join("."),">"):""," doesn't know key \"").concat(String(n),'"'))}return!1})(e,r,n))return e[r]},set:(e,n,t)=>{const r=RS(String(n));if(e.hasOwnProperty(r))throw new Error('Key "'.concat(String(r),'" is protected and cannot be overwritten.'));return e[r]=t,t}}),RS=e=>{const n=/\$(.*)/.exec(e);return n?n[1]:e},LS=(e,n)=>{const t=e[n];if(t)return t;throw new Error('Node "'.concat(n,'" not found in graph'))},DS=(e,n)=>{const t=e[n];if(!t)throw new Error("node [".concat(n,"] is not implemented"));return _r({dependencies:[]},t)},jS=e=>{const n=[];for(let t=0;t<e;t++)n.push(t);return n},zS=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return WS({astType:"Sequence",content:BS(US(e,t))})},BS=e=>{const n=e.flatMap((e=>"string"===typeof e?[e]:"number"===typeof e?[e.toString()]:null===e?[]:Array.isArray(e)?BS(US(e,jS(e.length-1).map((()=>"\n")))):"object"===typeof e&&"Sequence"===e.astType?e.content:[e])),[t,r]=n.reduce(((e,n)=>{let[t,r]=e;return"string"===typeof n?[t,r+n]:r.length?[[...t,r,n],""]:[[...t,n],""]}),[[],""]);return r.length&&t.push(r),t},US=(e,n)=>0===e.length?[]:e.slice(1).reduce(((e,t,r)=>e.concat([n[r],t])),[e[0]]),WS=e=>_r({},e);var $S,VS;const GS="G",HS="N",qS="NT",KS="IO",YS="COLD";PS.Interface({nodes:PS.Index((e=>PS.Interface({signalOuts:PS.Index((n=>PS.Literal((()=>XS(HS,e,"outs",n))))),messageSenders:PS.Index((n=>PS.Literal((()=>XS(HS,e,"snds",n))))),messageReceivers:PS.Index((n=>PS.Literal((()=>XS(HS,e,"rcvs",n))))),state:PS.LiteralDefaultNull((()=>XS(HS,e,"state")))}))),nodeImplementations:PS.Index(((e,n)=>{let{nodeImplementations:t}=n;const r=DS(t,e),a=(r.flags?r.flags.alphaName:null)||e;return PS.Index((e=>PS.Literal((()=>XS(qS,a,e)))))})),globals:PS.Index((e=>PS.Index((n=>["fs"].includes(e)?PS.Literal((()=>XS(GS,e,n))):"core"===e?PS.Literal((()=>n)):PS.Literal((()=>XS(GS,e,n))))))),io:PS.Interface({messageReceivers:PS.Index((e=>PS.Index((n=>PS.Literal((()=>XS(KS,"rcv",e,n))))))),messageSenders:PS.Index((e=>PS.Index((n=>PS.Literal((()=>XS(KS,"snd",e,n)))))))}),coldDspGroups:PS.Index((e=>PS.Literal((()=>XS(YS,e)))))}),PS.Interface({graph:PS.Literal(((e,n)=>({fullTraversal:[],hotDspGroup:{traversal:[],outNodesIds:[]},coldDspGroups:FS({},n)}))),nodeImplementations:PS.Index(((e,n)=>{let{nodeImplementations:t}=n;return PS.Literal((()=>({nodeImplementation:DS(t,e),stateClass:null,core:null})))}),((e,n)=>FS({},n))),nodes:PS.Index(((e,n)=>{let{graph:t}=n;return PS.Literal((()=>({nodeType:LS(t,e).type,messageReceivers:{},messageSenders:{},signalOuts:{},signalIns:{},initialization:zS($S||($S=r([""]))),dsp:{loop:zS(VS||(VS=r([""]))),inlets:{}},state:null})))}),((e,n)=>FS({},n))),dependencies:PS.Literal((()=>{return{imports:[],exports:[],ast:(e=[],{astType:"Sequence",content:BS(US(e,jS(e.length-1).map((()=>"\n"))))})};var e})),io:PS.Interface({messageReceivers:PS.Index((e=>PS.Literal(((e,n)=>FS({},n)))),((e,n)=>FS({},n))),messageSenders:PS.Index((e=>PS.Literal(((e,n)=>FS({},n)))),((e,n)=>FS({},n)))})});const XS=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.map(JS).join("_")},JS=e=>{if(!ZS.exec(e))throw new Error('Invalid variable name for code generation "'.concat(e,'"'));return e},ZS=/^[a-zA-Z0-9_]+$/;const QS=e=>_r(_r({},{audioSettings:{channelCount:{in:2,out:2},bitDepth:64},renderAudioSettings:{sampleRate:44100,blockSize:4096,previewDurationSeconds:30},abstractionLoader:vS,nodeBuilders:fS,nodeImplementations:hS}),{},{abstractionLoader:ex(e)}),ex=e=>Mi((async n=>{const t="".concat(e,"/").concat(n.endsWith(".pd")?n:"".concat(n,".pd")),r=await fetch(t);if(!r.ok)throw new Pi(n);return await r.text()}));const nx={},tx={};class rx{constructor(e,n){this.url=e,this.sound=n,this.frameCount=n[0].length,this.readPosition=0}}const ax=async e=>{if(nx[e])return nx[e];const n=await(async e=>{let n;try{n=await IS(e,{retries:3})}catch(t){throw new TS(n.status,t.toString())}if(!n.ok){const e=await n.text();throw new TS(n.status,e)}return n.arrayBuffer()})(e);return{type:"binary",data:n}},ix=async(e,n)=>{let t=nx[e]||await ax(e);switch(t.type){case"binary":return(e=>{const n=[];for(let t=0;t<e.numberOfChannels;t++)n.push(e.getChannelData(t));return n})(await n.decodeAudioData(t.data));case"sound":return t.data.map((e=>e.slice()))}},ox=e=>tx[e],sx=e=>{console.log("KILL STREAM",e),delete tx[e]},lx=(e,n)=>{const t=e.sound.map((t=>t.slice(e.readPosition,e.readPosition+n)));return e.readPosition+=n,t},cx=(e,n)=>{e.sound=e.sound.map(((e,t)=>{const r=new Float32Array(e.length+n[t].length);return r.set(e),r.set(n[t],e.length),r})),e.frameCount=e.sound[0].length,nx[e.url].data=e.sound};var ux=async(e,n)=>{nx[n]={type:"sound",data:e}},dx=ix,px=async(e,n,t,r)=>{const a=await ix(n,r);return tx[e]=new rx(n,_S(a,t)),tx[e]},fx=async(e,n,t)=>{const r=[];for(let a=0;a<t;a++)r.push(new Float32Array(0));return tx[e]=new rx(n,r),nx[n]={type:"sound",data:r},tx[e]};const hx=441e3;var mx=async(e,n,t)=>{if("onOpenSoundReadStream"===n.functionName){const[a,i,[o]]=n.arguments;try{const n=AS(t.rootUrl,i);await px(a,n,o,e.context)}catch(r){return console.error(r),void e.port.postMessage({type:"fs",payload:{functionName:"closeSoundStream",arguments:[a,1]}})}gx(e,a,0)}else if("sendSoundStreamData_return"===n.functionName){if(!ox(n.operationId))throw new Error("unknown stream ".concat(n.operationId));gx(e,n.operationId,n.returned)}else if("closeSoundStream_return"===n.functionName){ox(n.operationId)&&sx(n.operationId)}};const gx=(e,n,t)=>{const r=e.context.sampleRate,a=Math.max(t-220500,10)/r,i=hx-(t-a*r);setTimeout((()=>{const t=ox(n);if(t)if(t.readPosition<t.frameCount){const r=lx(t,i);e.port.postMessage({type:"fs",payload:{functionName:"sendSoundStreamData",arguments:[n,r]}},r.map((e=>e.buffer)))}else e.port.postMessage({type:"fs",payload:{functionName:"closeSoundStream",arguments:[n,0]}});else console.log("stream ".concat(n," was maybe closed"))}),1e3*a)};var yx=async(e,n,t)=>{if("onOpenSoundWriteStream"===n.functionName){const[e,r,[a]]=n.arguments,i=AS(t.rootUrl,r);await fx(e,i,a)}else if("onSoundStreamData"===n.functionName){const[e,t]=n.arguments,r=ox(e);if(!r)throw new Error("unknown stream ".concat(e));cx(r,t)}else if("closeSoundStream_return"===n.functionName){ox(n.operationId)&&sx(n.operationId)}},vx=async(e,n,t)=>{const r=n.data;if("fs"!==r.type)throw new Error("Unknown message type from node ".concat(r.type));const{payload:a}=r;if("onReadSoundFile"===a.functionName||"sendReadSoundFileResponse_return"===a.functionName)(async(e,n,t)=>{if("onReadSoundFile"===n.functionName){const[a,i,[o]]=n.arguments,s=AS(t.rootUrl,i);let l=0,c=null;try{c=await dx(s,e.context)}catch(r){l=1,console.error(r)}c&&(c=_S(c,o)),e.port.postMessage({type:"fs",payload:{functionName:"sendReadSoundFileResponse",arguments:[a,l,c]}},c.map((e=>e.buffer)))}else n.functionName})(e,a,t);else if("onOpenSoundReadStream"===a.functionName||"sendSoundStreamData_return"===a.functionName)mx(e,a,t);else if("onWriteSoundFile"===a.functionName||"sendWriteSoundFileResponse_return"===a.functionName)(async(e,n,t)=>{if("onWriteSoundFile"===n.functionName){const[r,a,i,[o]]=n.arguments,s=_S(a,o),l=AS(t.rootUrl,i);await ux(s,l);let c=0;e.port.postMessage({type:"fs",payload:{functionName:"sendWriteSoundFileResponse",arguments:[r,c]}})}else n.functionName})(e,a,t);else if("onOpenSoundWriteStream"===a.functionName||"onSoundStreamData"===a.functionName)yx(0,a,t);else if("closeSoundStream_return"===a.functionName)yx(0,a,t),mx(e,a,t);else{if("onCloseSoundStream"!==a.functionName)throw new Error("Unknown callback ".concat(a.functionName));(async(e,n)=>{"onCloseSoundStream"===n.functionName&&sx(n.arguments[0])})(0,a)}};const bx=e=>wx(e)?new URL(".",e).href:new URL(".",new URL(e,document.URL).href).href,wx=e=>{try{if(new URL(e).origin!==new URL(document.URL,document.baseURI).origin)return!0}catch(ye){new URL(e,document.baseURI)}return!1},Sx=Qr("shared/clean"),xx=1,kx=2,Ix=3,_x={artefacts:{}},Ax={buildStatus:0,step:null},Tx=ia({name:"buildOutput",initialState:Ax,reducers:{startBuild:e=>{e.buildStatus=xx},buildSuccess:(e,n)=>{_x.artefacts=n.payload.artefacts,e.buildStatus=kx},startStep:(e,n)=>{e.step=n.payload},stepComplete:(e,n)=>{_x.artefacts=n.payload.artefacts,1===n.payload.status&&(e.buildStatus=Ix)}},extraReducers(e){const n=()=>(_x.artefacts={},Ax);e.addCase(Sx,n),e.addCase(Ga.actions.setFormat,n),e.addCase(Wa.actions.setLocalFile,n),e.addCase(Wa.actions.fetchUrlSuccess,n)}}),Ex={warnings:null,errors:null},Ox=ia({name:"console",initialState:Ex,reducers:{setState:(e,n)=>n.payload},extraReducers(e){e.addCase(Tx.actions.startBuild,(()=>Ex)),e.addCase(Tx.actions.stepComplete,((e,n)=>{n.payload.warnings&&(e.warnings=[...e.warnings||[],...n.payload.warnings],0===e.warnings.length&&(e.warnings=null)),n.payload.errors&&(e.errors=[...e.errors||[],...n.payload.errors])})),e.addCase(Wa.actions.setUrl,(()=>Ex)),e.addCase(Wa.actions.setLocalFile,(()=>Ex)),e.addCase(Wa.actions.clear,(()=>Ex)),e.addCase(Ga.actions.setFormat,(()=>Ex)),e.addCase(Wa.actions.fetchUrlError,((e,n)=>{e.errors=[n.payload]}))}}),Cx=ia({name:"app",initialState:{isInitialized:!1,willBuildOnLoad:!1,debug:!1},reducers:{setWillBuildOnLoad:(e,n)=>{e.willBuildOnLoad=n.payload},initializationDone:e=>{e.isInitialized=!0},setDebug:(e,n)=>{e.debug=n.payload},pointerUp:()=>{}},extraReducers:e=>{e.addCase(Tx.actions.buildSuccess,(e=>{e.willBuildOnLoad=!0}))}});var Nx=t(868),Mx="NOT_FOUND";var Px=function(e,n){return e===n};function Fx(e,n){var t="object"===typeof n?n:{equalityCheck:n},r=t.equalityCheck,a=void 0===r?Px:r,i=t.maxSize,o=void 0===i?1:i,s=t.resultEqualityCheck,l=function(e){return function(n,t){if(null===n||null===t||n.length!==t.length)return!1;for(var r=n.length,a=0;a<r;a++)if(!e(n[a],t[a]))return!1;return!0}}(a),c=1===o?function(e){var n;return{get:function(t){return n&&e(n.key,t)?n.value:Mx},put:function(e,t){n={key:e,value:t}},getEntries:function(){return n?[n]:[]},clear:function(){n=void 0}}}(l):function(e,n){var t=[];function r(e){var r=t.findIndex((function(t){return n(e,t.key)}));if(r>-1){var a=t[r];return r>0&&(t.splice(r,1),t.unshift(a)),a.value}return Mx}return{get:r,put:function(n,a){r(n)===Mx&&(t.unshift({key:n,value:a}),t.length>e&&t.pop())},getEntries:function(){return t},clear:function(){t=[]}}}(o,l);function u(){var n=c.get(arguments);if(n===Mx){if(n=e.apply(null,arguments),s){var t=c.getEntries().find((function(e){return s(e.value,n)}));t&&(n=t.value)}c.put(arguments,n)}return n}return u.clearCache=function(){return c.clear()},u}function Rx(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var i,o=0,s={memoizeOptions:void 0},l=r.pop();if("object"===typeof l&&(s=l,l=r.pop()),"function"!==typeof l)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var c=s.memoizeOptions,u=void 0===c?t:c,d=Array.isArray(u)?u:[u],p=function(e){var n=Array.isArray(e[0])?e[0]:e;if(!n.every((function(e){return"function"===typeof e}))){var t=n.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+t+"]")}return n}(r),f=e.apply(void 0,[function(){return o++,l.apply(null,arguments)}].concat(d)),h=e((function(){for(var e=[],n=p.length,t=0;t<n;t++)e.push(p[t].apply(null,arguments));return i=f.apply(null,e)}));return Object.assign(h,{resultFunc:l,memoizedResultFunc:f,dependencies:p,lastResult:function(){return i},recomputations:function(){return o},resetRecomputations:function(){return o=0}}),h}}var Lx=Rx(Fx);const Dx=e=>e.buildInput.url,jx=e=>e.buildInput.filepath,zx=e=>e.buildInput.arrayBuffer,Bx=Lx(Dx,jx,((e,n)=>{let t=e||n;return t?pp(t)||"pd":null})),Ux=Lx(Bx,zx,((e,n)=>null===e||null===n?null:((e,n,t)=>{switch(t){case"pd":return _r(_r({},e),{},{pd:Ri(n)});case"pdJson":return _r(_r({},e),{},{pdJson:JSON.parse(Ri(n))});case"dspGraph":return _r(_r({},e),{},{dspGraph:JSON.parse(Ri(n))});case"javascript":return _r(_r({},e),{},{javascript:Ri(n)});case"assemblyscript":return _r(_r({},e),{},{assemblyscript:Ri(n)});case"wasm":return _r(_r({},e),{},{wasm:n});case"wav":return _r(_r({},e),{},{wav:new Uint8Array(n)});default:throw new Error("Unexpected format for preloading ".concat(t))}})({},n,e))),Wx=e=>e.buildOutput.format,$x=e=>e.buildOutput.codeTarget,Vx=e=>e.buildOutput.previewDurationSeconds,Gx=Lx(Bx,(e=>{const n=(e=>new Set(mp(dp,[]).filter((n=>n.includes(e))).map((n=>n.slice(n.indexOf(e)+1))).flat()))(e=e||"pd");return["patchPlayer",...$a.filter((e=>n.has(e)))]}));var Hx=function(e){return"@@redux-saga/"+e},qx=Hx("CANCEL_PROMISE"),Kx=Hx("CHANNEL_END"),Yx=Hx("IO"),Xx=Hx("MATCH"),Jx=Hx("MULTICAST"),Zx=Hx("SAGA_ACTION"),Qx=Hx("SELF_CANCELLATION"),ek=Hx("TASK"),nk=Hx("TASK_CANCEL"),tk=Hx("TERMINATE"),rk=Hx("LOCATION"),ak=t(168),ik=function(e){return null===e||void 0===e},ok=function(e){return null!==e&&void 0!==e},sk=function(e){return"function"===typeof e},lk=function(e){return"string"===typeof e},ck=Array.isArray,uk=function(e){return e&&sk(e.then)},dk=function(e){return e&&sk(e.next)&&sk(e.throw)},pk=function e(n){return n&&(lk(n)||mk(n)||sk(n)||ck(n)&&n.every(e))},fk=function(e){return e&&sk(e.take)&&sk(e.close)},hk=function(e){return sk(e)&&e.hasOwnProperty("toString")},mk=function(e){return Boolean(e)&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype};const gk=function(e,n){var t;void 0===n&&(n=!0);var r=new Promise((function(r){t=setTimeout(r,Math.min(2147483647,e),n)}));return r[qx]=function(){clearTimeout(t)},r};var yk=function(e){return function(){return e}},vk=yk(!0),bk=function(){};var wk=function(e){return e};"function"===typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var Sk=function(e,n){(0,ak.A)(e,n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(n).forEach((function(t){e[t]=n[t]}))};function xk(e,n){var t=e.indexOf(n);t>=0&&e.splice(t,1)}var kk=function(e){throw e},Ik=function(e){return{value:e,done:!0}};function _k(e,n,t){void 0===n&&(n=kk),void 0===t&&(t="iterator");var r={meta:{name:t},next:e,throw:n,return:Ik,isSagaIterator:!0};return"undefined"!==typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function Ak(e,n){var t=n.sagaStack;console.error(e),console.error(t)}var Tk=function(e){return Array.apply(null,new Array(e))},Ek=function(e){return function(n){return e(Object.defineProperty(n,Zx,{value:!0}))}},Ok=function(e){return e===tk},Ck=function(e){return e===nk},Nk=function(e){return Ok(e)||Ck(e)};function Mk(e,n){var t=Object.keys(e),r=t.length;var a,i=0,o=ck(e)?Tk(r):{},s={};return t.forEach((function(e){var t=function(t,s){a||(s||Nk(t)?(n.cancel(),n(t,s)):(o[e]=t,++i===r&&(a=!0,n(o))))};t.cancel=bk,s[e]=t})),n.cancel=function(){a||(a=!0,t.forEach((function(e){return s[e].cancel()})))},s}function Pk(e){return{name:e.name||"anonymous",location:Fk(e)}}function Fk(e){return e[rk]}function Rk(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return 0===n.length?function(e){return e}:1===n.length?n[0]:n.reduce((function(e,n){return function(){return e(n.apply(void 0,arguments))}}))}function Lk(e,n){void 0===e&&(e=10);var t=new Array(e),r=0,a=0,i=0,o=function(n){t[a]=n,a=(a+1)%e,r++},s=function(){if(0!=r){var n=t[i];return t[i]=null,r--,i=(i+1)%e,n}},l=function(){for(var e=[];r;)e.push(s());return e};return{isEmpty:function(){return 0==r},put:function(s){var c;if(r<e)o(s);else switch(n){case 1:throw new Error("Channel's Buffer overflow!");case 3:t[a]=s,i=a=(a+1)%e;break;case 4:c=2*e,t=l(),r=t.length,a=t.length,i=0,t.length=c,e=c,o(s)}},take:s,flush:l}}var Dk=function(e){return Lk(e,4)},jk="TAKE",zk="PUT",Bk="ALL",Uk="RACE",Wk="CALL",$k="CPS",Vk="FORK",Gk="JOIN",Hk="CANCEL",qk="SELECT",Kk="ACTION_CHANNEL",Yk="CANCELLED",Xk="FLUSH",Jk="GET_CONTEXT",Zk="SET_CONTEXT",Qk=function(e,n){var t;return(t={})[Yx]=!0,t.combinator=!1,t.type=e,t.payload=n,t};function eI(e,n){return void 0===e&&(e="*"),pk(e)?(ok(n)&&console.warn("take(pattern) takes one argument but two were provided. Consider passing an array for listening to several action types"),Qk(jk,{pattern:e})):fk(t=e)&&t[Jx]&&ok(n)&&pk(n)?Qk(jk,{channel:e,pattern:n}):fk(e)?(ok(n)&&console.warn("take(channel) takes one argument but two were provided. Second argument is ignored."),Qk(jk,{channel:e})):void 0;var t}function nI(e,n){return ik(n)&&(n=e,e=void 0),Qk(zk,{channel:e,action:n})}function tI(e,n){var t,r=null;return sk(e)?t=e:(ck(e)?(r=e[0],t=e[1]):(r=e.context,t=e.fn),r&&lk(t)&&sk(r[t])&&(t=r[t])),{context:r,fn:t,args:n}}function rI(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return Qk(Wk,tI(e,t))}function aI(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return Qk(Vk,tI(e,t))}function iI(e){void 0===e&&(e=wk);for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return Qk(qk,{selector:e,args:t})}var oI=rI.bind(null,gk);function sI(){var e={};return e.promise=new Promise((function(n,t){e.resolve=n,e.reject=t})),e}const lI=sI;var cI=[],uI=0;function dI(e){try{hI(),e()}finally{mI()}}function pI(e){cI.push(e),uI||(hI(),gI())}function fI(e){try{return hI(),e()}finally{gI()}}function hI(){uI++}function mI(){uI--}function gI(){var e;for(mI();!uI&&void 0!==(e=cI.shift());)dI(e)}var yI=function(e){return function(n){return e.some((function(e){return xI(e)(n)}))}},vI=function(e){return function(n){return e(n)}},bI=function(e){return function(n){return n.type===String(e)}},wI=function(e){return function(n){return n.type===e}},SI=function(){return vk};function xI(e){var n="*"===e?SI:lk(e)?bI:ck(e)?yI:hk(e)?bI:sk(e)?vI:mk(e)?wI:null;if(null===n)throw new Error("invalid pattern: "+e);return n(e)}var kI={type:Kx},II=function(e){return e&&e.type===Kx};function _I(e){void 0===e&&(e=Dk());var n=!1,t=[];return{take:function(r){n&&e.isEmpty()?r(kI):e.isEmpty()?(t.push(r),r.cancel=function(){xk(t,r)}):r(e.take())},put:function(r){if(!n){if(0===t.length)return e.put(r);t.shift()(r)}},flush:function(t){n&&e.isEmpty()?t(kI):t(e.flush())},close:function(){if(!n){n=!0;var e=t;t=[];for(var r=0,a=e.length;r<a;r++){(0,e[r])(kI)}}}}}function AI(){var e=function(){var e,n=!1,t=[],r=t,a=function(){r===t&&(r=t.slice())},i=function(){n=!0;var e=t=r;r=[],e.forEach((function(e){e(kI)}))};return(e={})[Jx]=!0,e.put=function(e){if(!n)if(II(e))i();else for(var a=t=r,o=0,s=a.length;o<s;o++){var l=a[o];l[Xx](e)&&(l.cancel(),l(e))}},e.take=function(e,t){void 0===t&&(t=SI),n?e(kI):(e[Xx]=t,a(),r.push(e),e.cancel=function(e){var n=!1;return function(){n||(n=!0,e())}}((function(){a(),xk(r,e)})))},e.close=i,e}(),n=e.put;return e.put=function(e){e[Zx]?n(e):pI((function(){n(e)}))},e}function TI(e,n){var t=e[qx];sk(t)&&(n.cancel=t),e.then(n,(function(e){n(e,!0)}))}var EI,OI=0,CI=function(){return++OI};function NI(e){e.isRunning()&&e.cancel()}var MI=((EI={})[jk]=function(e,n,t){var r=n.channel,a=void 0===r?e.channel:r,i=n.pattern,o=n.maybe,s=function(e){e instanceof Error?t(e,!0):!II(e)||o?t(e):t(tk)};try{a.take(s,ok(i)?xI(i):null)}catch(l){return void t(l,!0)}t.cancel=s.cancel},EI[zk]=function(e,n,t){var r=n.channel,a=n.action,i=n.resolve;pI((function(){var n;try{n=(r?r.put:e.dispatch)(a)}catch(o){return void t(o,!0)}i&&uk(n)?TI(n,t):t(n)}))},EI[Bk]=function(e,n,t,r){var a=r.digestEffect,i=OI,o=Object.keys(n);if(0!==o.length){var s=Mk(n,t);o.forEach((function(e){a(n[e],i,s[e],e)}))}else t(ck(n)?[]:{})},EI[Uk]=function(e,n,t,r){var a=r.digestEffect,i=OI,o=Object.keys(n),s=ck(n)?Tk(o.length):{},l={},c=!1;o.forEach((function(e){var n=function(n,r){c||(r||Nk(n)?(t.cancel(),t(n,r)):(t.cancel(),c=!0,s[e]=n,t(s)))};n.cancel=bk,l[e]=n})),t.cancel=function(){c||(c=!0,o.forEach((function(e){return l[e].cancel()})))},o.forEach((function(e){c||a(n[e],i,l[e],e)}))},EI[Wk]=function(e,n,t,r){var a=n.context,i=n.fn,o=n.args,s=r.task;try{var l=i.apply(a,o);if(uk(l))return void TI(l,t);if(dk(l))return void $I(e,l,s.context,OI,Pk(i),!1,t);t(l)}catch(c){t(c,!0)}},EI[$k]=function(e,n,t){var r=n.context,a=n.fn,i=n.args;try{var o=function(e,n){ik(e)?t(n):t(e,!0)};a.apply(r,i.concat(o)),o.cancel&&(t.cancel=o.cancel)}catch(s){t(s,!0)}},EI[Vk]=function(e,n,t,r){var a=n.context,i=n.fn,o=n.args,s=n.detached,l=r.task,c=function(e){var n=e.context,t=e.fn,r=e.args;try{var a=t.apply(n,r);if(dk(a))return a;var i=!1;return _k((function(e){return i?{value:e,done:!0}:(i=!0,{value:a,done:!uk(a)})}))}catch(o){return _k((function(){throw o}))}}({context:a,fn:i,args:o}),u=function(e,n){return e.isSagaIterator?{name:e.meta.name}:Pk(n)}(c,i);fI((function(){var n=$I(e,c,l.context,OI,u,s,void 0);s?t(n):n.isRunning()?(l.queue.addTask(n),t(n)):n.isAborted()?l.queue.abort(n.error()):t(n)}))},EI[Gk]=function(e,n,t,r){var a=r.task,i=function(e,n){if(e.isRunning()){var t={task:a,cb:n};n.cancel=function(){e.isRunning()&&xk(e.joiners,t)},e.joiners.push(t)}else e.isAborted()?n(e.error(),!0):n(e.result())};if(ck(n)){if(0===n.length)return void t([]);var o=Mk(n,t);n.forEach((function(e,n){i(e,o[n])}))}else i(n,t)},EI[Hk]=function(e,n,t,r){var a=r.task;n===Qx?NI(a):ck(n)?n.forEach(NI):NI(n),t()},EI[qk]=function(e,n,t){var r=n.selector,a=n.args;try{t(r.apply(void 0,[e.getState()].concat(a)))}catch(i){t(i,!0)}},EI[Kk]=function(e,n,t){var r=n.pattern,a=_I(n.buffer),i=xI(r),o=function n(t){II(t)||e.channel.take(n,i),a.put(t)},s=a.close;a.close=function(){o.cancel(),s()},e.channel.take(o,i),t(a)},EI[Yk]=function(e,n,t,r){t(r.task.isCancelled())},EI[Xk]=function(e,n,t){n.flush(t)},EI[Jk]=function(e,n,t,r){t(r.task.context[n])},EI[Zk]=function(e,n,t,r){var a=r.task;Sk(a.context,n),t()},EI);function PI(e,n){return e+"?"+n}function FI(e){var n=e.name,t=e.location;return t?n+"  "+PI(t.fileName,t.lineNumber):n}function RI(e){var n=function(e,n){var t;return(t=[]).concat.apply(t,n.map(e))}((function(e){return e.cancelledTasks}),e);return n.length?["Tasks cancelled due to error:"].concat(n).join("\n"):""}var LI=null,DI=[],jI=function(e){e.crashedEffect=LI,DI.push(e)},zI=function(){LI=null,DI.length=0},BI=function(e){LI=e},UI=function(){var e=DI[0],n=DI.slice(1),t=e.crashedEffect?function(e){var n=Fk(e);return n?n.code+"  "+PI(n.fileName,n.lineNumber):""}(e.crashedEffect):null;return["The above error occurred in task "+FI(e.meta)+(t?" \n when executing effect "+t:"")].concat(n.map((function(e){return"    created by "+FI(e.meta)})),[RI(DI)]).join("\n")};function WI(e,n,t,r,a,i,o){var s;void 0===o&&(o=bk);var l,c,u=0,d=null,p=[],f=Object.create(t),h=function(e,n,t){var r,a=[],i=!1;function o(e){n(),l(),t(e,!0)}function s(n){a.push(n),n.cont=function(s,l){i||(xk(a,n),n.cont=bk,l?o(s):(n===e&&(r=s),a.length||(i=!0,t(r))))}}function l(){i||(i=!0,a.forEach((function(e){e.cont=bk,e.cancel()})),a=[])}return s(e),{addTask:s,cancelAll:l,abort:o,getTasks:function(){return a}}}(n,(function(){p.push.apply(p,h.getTasks().map((function(e){return e.meta.name})))}),m);function m(n,t){if(t){if(u=2,jI({meta:a,cancelledTasks:p}),g.isRoot){var r=UI();zI(),e.onError(n,{sagaStack:r})}c=n,d&&d.reject(n)}else n===nk?u=1:1!==u&&(u=3),l=n,d&&d.resolve(n);g.cont(n,t),g.joiners.forEach((function(e){e.cb(n,t)})),g.joiners=null}var g=((s={})[ek]=!0,s.id=r,s.meta=a,s.isRoot=i,s.context=f,s.joiners=[],s.queue=h,s.cancel=function(){0===u&&(u=1,h.cancelAll(),m(nk,!1))},s.cont=o,s.end=m,s.setContext=function(e){Sk(f,e)},s.toPromise=function(){return d||(d=lI(),2===u?d.reject(c):0!==u&&d.resolve(l)),d.promise},s.isRunning=function(){return 0===u},s.isCancelled=function(){return 1===u||0===u&&1===n.status},s.isAborted=function(){return 2===u},s.result=function(){return l},s.error=function(){return c},s);return g}function $I(e,n,t,r,a,i,o){var s=e.finalizeRunEffect((function(n,t,r){if(uk(n))TI(n,r);else if(dk(n))$I(e,n,c.context,t,a,!1,r);else if(n&&n[Yx]){(0,MI[n.type])(e,n.payload,r,u)}else r(n)}));d.cancel=bk;var l={meta:a,cancel:function(){0===l.status&&(l.status=1,d(nk))},status:0},c=WI(e,l,t,r,a,i,o),u={task:c,digestEffect:p};return o&&(o.cancel=c.cancel),d(),c;function d(e,t){try{var a;t?(a=n.throw(e),zI()):Ck(e)?(l.status=1,d.cancel(),a=sk(n.return)?n.return(nk):{done:!0,value:nk}):a=Ok(e)?sk(n.return)?n.return():{done:!0}:n.next(e),a.done?(1!==l.status&&(l.status=3),l.cont(a.value)):p(a.value,r,d)}catch(i){if(1===l.status)throw i;l.status=2,l.cont(i,!0)}}function p(n,t,r,a){void 0===a&&(a="");var i,o=CI();function l(t,a){i||(i=!0,r.cancel=bk,e.sagaMonitor&&(a?e.sagaMonitor.effectRejected(o,t):e.sagaMonitor.effectResolved(o,t)),a&&BI(n),r(t,a))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:o,parentEffectId:t,label:a,effect:n}),l.cancel=bk,r.cancel=function(){i||(i=!0,l.cancel(),l.cancel=bk,e.sagaMonitor&&e.sagaMonitor.effectCancelled(o))},s(n,o,l)}}function VI(e,n){var t=e.channel,r=void 0===t?AI():t,a=e.dispatch,i=e.getState,o=e.context,s=void 0===o?{}:o,l=e.sagaMonitor,c=e.effectMiddlewares,u=e.onError,d=void 0===u?Ak:u;for(var p=arguments.length,f=new Array(p>2?p-2:0),h=2;h<p;h++)f[h-2]=arguments[h];var m=n.apply(void 0,f);var g,y=CI();if(l&&(l.rootSagaStarted=l.rootSagaStarted||bk,l.effectTriggered=l.effectTriggered||bk,l.effectResolved=l.effectResolved||bk,l.effectRejected=l.effectRejected||bk,l.effectCancelled=l.effectCancelled||bk,l.actionDispatched=l.actionDispatched||bk,l.rootSagaStarted({effectId:y,saga:n,args:f})),c){var v=Rk.apply(void 0,c);g=function(e){return function(n,t,r){return v((function(n){return e(n,t,r)}))(n)}}}else g=wk;var b={channel:r,dispatch:Ek(a),getState:i,sagaMonitor:l,onError:d,finalizeRunEffect:g};return fI((function(){var e=$I(b,m,s,y,Pk(n),!0,void 0);return l&&l.effectResolved(y,e),e}))}const GI=function(e){var n,t=void 0===e?{}:e,r=t.context,a=void 0===r?{}:r,i=t.channel,o=void 0===i?AI():i,s=t.sagaMonitor,l=Hc(t,["context","channel","sagaMonitor"]);function c(e){var t=e.getState,r=e.dispatch;return n=VI.bind(null,(0,ak.A)({},l,{context:a,channel:o,dispatch:r,getState:t,sagaMonitor:s})),function(e){return function(n){s&&s.actionDispatched&&s.actionDispatched(n);var t=e(n);return o.put(n),t}}}return c.run=function(){return n.apply(void 0,arguments)},c.setContext=function(e){Sk(a,e)},c},HI=GI;var qI=function(e){return{done:!0,value:e}},KI={};function YI(e){return fk(e)?"channel":hk(e)?String(e):sk(e)?e.name:String(e)}function XI(e,n,t){var r,a,i,o=n;function s(n,t){if(o===KI)return qI(n);if(t&&!a)throw o=KI,t;r&&r(n);var s=t?e[a](t):e[o]();return o=s.nextState,i=s.effect,r=s.stateUpdater,a=s.errorState,o===KI?qI(n):i}return _k(s,(function(e){return s(null,e)}),t)}function JI(e,n){for(var t=arguments.length,r=new Array(t>2?t-2:0),a=2;a<t;a++)r[a-2]=arguments[a];var i,o,s={done:!1,value:eI(e)},l=function(e){return{done:!1,value:aI.apply(void 0,[n].concat(r,[e]))}},c=function(e){return{done:!1,value:(n=e,void 0===n&&(n=Qx),Qk(Hk,n))};var n},u=function(e){return i=e},d=function(e){return o=e};return XI({q1:function(){return{nextState:"q2",effect:s,stateUpdater:d}},q2:function(){return i?{nextState:"q3",effect:c(i)}:{nextState:"q1",effect:l(o),stateUpdater:u}},q3:function(){return{nextState:"q1",effect:l(o),stateUpdater:u}}},"q1","takeLatest("+YI(e)+", "+n.name+")")}function ZI(e,n){for(var t=arguments.length,r=new Array(t>2?t-2:0),a=2;a<t;a++)r[a-2]=arguments[a];return aI.apply(void 0,[JI,e,n].concat(r))}function*QI(){yield ZI(Wa.actions.setLocalFile.type,e_)}function*e_(e){const n=pp(e.payload.filepath);null!==n&&Ba.includes(n)||(yield nI(Wa.actions.clear()),yield nI(Ox.actions.setState({errors:["Invalid file input ".concat(e.payload.filepath)],warnings:[]})))}function*n_(){yield ZI(Wa.actions.setUrl.type,t_)}function*t_(e){const n=e.payload;try{const e=yield rI(r_,n);yield nI(Wa.actions.fetchUrlSuccess({arrayBuffer:e,url:n}))}catch(t){yield nI(Wa.actions.fetchUrlError(t.message))}}const r_=async e=>{const n=await fetch(e);if(!n.ok)throw new a_("Failed to load ".concat(e));return await n.arrayBuffer()};class a_ extends Error{}const i_=(e,n)=>({x:e.x+n.x,y:e.y+n.y}),o_=e=>e.reduce(((e,n)=>{let{topLeft:t,bottomRight:r}=e;return{topLeft:{x:Math.min(n.x,t.x),y:Math.min(n.y,t.y)},bottomRight:{x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)}}}),{topLeft:{x:1/0,y:1/0},bottomRight:{x:-1/0,y:-1/0}}),s_=e=>({x:e.bottomRight.x-e.topLeft.x,y:e.bottomRight.y-e.topLeft.y}),l_=()=>new Promise((e=>setTimeout(e,1))),c_=(e,n)=>{if(!e)throw new Error(n||"expected ".concat(e," to be defined"));return e},u_=(e,n)=>{const{nodeId:t,pdNode:r,nexusElem:a}=n;let i=e=>e;switch(r.type){case"bng":i=e=>!0===e.state?"bang":null;break;case"msg":i=e=>!0===e?"bang":null;break;case"tgl":i=e=>+e}let o=()=>{};switch(r.type){case"hsl":case"vsl":case"nbx":case"floatatom":o=(e,n)=>{e.value=n};break;case"hradio":case"vradio":o=(e,n)=>{e.select(n)};break;case"bng":case"msg":o=e=>{var n;e.turnOn(!1),(n=50,new Promise((e=>setTimeout(e,n)))).then((()=>e.turnOff(!1)))};break;case"tgl":o=(e,n)=>{1===n?e.turnOn(!1):e.turnOff(!1)}}e.controller.functions[t]={convertNexusValue:i,onMessageFromWebPd:o},a.on("change",(function(n){!0===("RadioButton"===a.type?a.buttons[n]?a.buttons[n].clicked:void 0:a.clicked)&&d_(e,t,n)})),a._isBeingChangedByUser=!1;("RadioButton"===a.type?a.buttons:[a]).forEach((e=>{e.on("click",(function(){e._isBeingChangedByUser=!0})),e.on("release",(function(){e._isBeingChangedByUser=!1}))}))},d_=(e,n,t)=>{const r=h_(e,n).convertNexusValue(t);null!==r&&(e.controller.values[n]=r,e.settings.valuesUpdatedCallback&&p_(e),f_(e,n,[r]))},p_=((e,n)=>{let t=null;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];t&&clearTimeout(t),t=setTimeout((()=>n(...a)),e)}})(300,(e=>{const n={};Object.entries(e.controller.values).forEach((e=>{let[t,r]=e;n[t]="number"===typeof r?function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const t=Math.round(e*Math.pow(10,n))/Math.pow(10,n);return 0===t?0:t}(r):r})),e.settings.valuesUpdatedCallback(n)})),f_=(e,n,t)=>{e.webpdNode.port.postMessage({type:"io:messageReceiver",payload:{nodeId:n,portletId:"0",message:t}})},h_=(e,n)=>{const t=e.controller.functions[n];if(!t)throw new Error("no value transform for ".concat(n));return t},m_={x:7,y:12},g_=(e,n)=>e.filter((e=>"text"!==e.nodeClass)).map((e=>{const t=n.pdNodes[e.patchId][e.pdNodeId];if(!t)throw console.log("CUSTOM METADATA",n),new Error("no pd node ".concat(e.pdNodeId," for patch ").concat(e.patchId));switch(e.nodeClass){case"subpatch":if("subpatch"!==t.nodeClass)throw new Error("unexpected pdNode class ".concat(t.nodeClass));const r=k_(g_(e.children,n)),a={type:"container",label:"string"===typeof t.args[0]?t.args[0]:null,dimensions:i_(m_,s_(o_([...r.map((e=>e.position)),...r.map((e=>i_(e.position,e.dimensions)))]))),children:r,position:{x:A_(t.layout.x),y:A_(t.layout.y)}};return a;case"control":if("control"!==t.nodeClass)throw new Error("unexpected pdNode class ".concat(t.nodeClass));return{type:"control",label:t.layout.label||"",pdNode:t,nodeId:e.nodeId,nexusElem:null,dimensions:I_(t),position:{x:A_(t.layout.x),y:A_(t.layout.y)}};default:throw new Error("unexpected control type ".concat(e.type))}})),y_=e=>{const n={};return v_(e.filter((e=>"comment"!==e.type)),n),n},v_=(e,n)=>{e.forEach((e=>{"control"===e.type?n[e.nodeId]=e:v_(e.children,n)}))},b_=e=>e.map((e=>{switch(e.type){case"container":return e;case"control":return{type:"container",label:null,children:[_r(_r({},e),{},{position:{x:0,y:0}})],dimensions:i_(m_,e.dimensions),position:e.position};default:throw new Error("unexpected view type ".concat(e.type))}})),w_=e=>e.pdGui.filter((e=>"text"===e.nodeClass)).map((n=>{var t;const r=T_(e,n.patchId,n.pdNodeId);return{type:"comment",text:(null===(t=r.args[0])||void 0===t?void 0:t.toString())||"",position:{x:A_(r.layout.x),y:A_(r.layout.y)}}})),S_=e=>{const n=o_([...e.map((e=>e.position)),...e.map((e=>i_(e.position,e.dimensions)))]);return((e,n)=>({x:e.x*n,y:e.y*n}))(n.topLeft,-1)},x_=(e,n)=>e.map((e=>_r(_r({},e),{},{position:i_(e.position,n)}))),k_=e=>x_(e,S_(e)),I_=e=>{if("control"!==e.nodeClass)throw new Error("Can only get dimension for control node");switch(e.type){case"floatatom":case"symbolatom":return{x:A_(7*(e.layout.widthInChars||3)),y:A_(15)};case"bng":case"tgl":return{x:A_(e.layout.size),y:A_(e.layout.size)};case"nbx":return{x:A_(7*(e.layout.widthInChars||3)),y:A_(e.layout.height)};case"vradio":return{x:A_(e.layout.size),y:A_(__(e.args[0])*__(e.layout.size))};case"hradio":return{x:A_(__(e.args[0])*__(e.layout.size)),y:A_(e.layout.size)};case"vsl":case"hsl":return{x:A_(e.layout.width),y:A_(e.layout.height)};case"msg":return{x:A_(7*e.args.join(" ").length),y:A_(15)};case"cnv":return{x:0,y:0};default:throw new Error("unsupported type ".concat(e.type))}},__=e=>{if("number"!==typeof e)throw new Error("Expected ".concat(e," to be a number"));return e},A_=e=>1*Math.round(__(e)/1),T_=(e,n,t)=>{const r=e.pdNodes[n];if(!r)throw console.log("CUSTOM METADATA",e),new Error("no pd patch found fo ".concat(n));const a=r[t];if(!a)throw console.log("CUSTOM METADATA",e),new Error("no pd node found for patch ".concat(n," node ").concat(t));return a},E_=(e,n,t,r)=>{t.forEach((t=>{if("comment"===t.type)C_(e,n,t);else if("container"===t.type){const r=O_(e,n,t);E_(e,r,t.children,t)}else"control"===t.type&&N_(e,n,t,R_(!!r&&L_(r)))}))},O_=(e,n,t)=>{const r=document.createElement("div");r.classList.add("controls-container");const a=R_(L_(t));return r.style.left="".concat(F_(t.position.x),"px"),r.style.top="".concat(F_(t.position.y),"px"),r.style.width="".concat(F_(t.dimensions.x),"px"),r.style.height="".concat(F_(t.dimensions.y),"px"),r.style.paddingTop="".concat(F_(a.top),"px"),r.style.paddingBottom="".concat(F_(a.bottom),"px"),r.style.paddingRight="".concat(F_(a.right),"px"),r.style.paddingLeft="".concat(F_(a.left),"px"),L_(t)&&M_(r,t.label),n.appendChild(r),r},C_=(e,n,t)=>{const r=document.createElement("div");return r.classList.add("comment"),r.innerHTML=t.text,n.appendChild(r),r.style.left="".concat(F_(t.position.x),"px"),r.style.top="".concat(F_(t.position.y),"px"),r},N_=(e,n,t,r)=>{const{nodeId:a,pdNode:i}=t,o=e.settings.colorScheme.next(),s=document.createElement("div");if(s.classList.add("control"),s.classList.add(i.type),s.id="control-".concat(a),s.style.left="".concat(F_(t.position.x+r.left),"px"),s.style.top="".concat(F_(t.position.y+r.top),"px"),s.style.width="".concat(F_(t.dimensions.x),"px"),s.style.height="".concat(F_(t.dimensions.y),"px"),n.appendChild(s),L_(t)){M_(s,t.label||"").style.color=o}const l=document.createElement("div");s.appendChild(l);const c={x:F_(t.dimensions.x),y:F_(t.dimensions.y-(L_(t)?5:0))},u=P_(e,l,t,c);return u.colorize("accent",o),u.colorize("fill","black"),u.colorize("dark",o),u.colorize("mediumDark","#222"),u.colorize("mediumLight","#333"),u.element.style.fontFamily="Rajdhani",s},M_=(e,n)=>{const t=document.createElement("div");return t.classList.add("label"),t.innerHTML=n,t.style.height="".concat(F_(5),"px"),e.appendChild(t),t},P_=(e,n,t,r)=>{let{x:a,y:i}=r;const{pdNode:o,nodeId:s}=t,l=((e,n)=>e.controller.values[n])(e,s);let c,u={};switch(o.type){case"hsl":case"vsl":"hsl"===o.type?i*=1.2:a*=1.2,c=new Nexus.Add.Slider(n,{min:o.args[0],max:o.args[1],value:void 0!==l?l:o.args[3],size:[a,i]});break;case"hradio":case"vradio":c=new Nexus.RadioButton(n,{numberOfButtons:o.args[0],active:void 0!==l?l:o.args[2],size:[a,i]});break;case"bng":c=new Nexus.Button(n,{size:[i,i]});break;case"msg":c=new Nexus.TextButton(n,{size:[a,i],text:o.args.join(" ")});break;case"nbx":case"floatatom":o.args[0]<o.args[1]&&(u.min=Math.max(o.args[0],-1e15),u.max=Math.min(o.args[1],1e15)),c=new Nexus.Number(n,_r({value:void 0!==l?l:"nbx"===o.type?o.args[3]:0,size:[a,i]},u));break;case"tgl":c=new Nexus.Button(n,{mode:"toggle",state:void 0!==l?l:!!o.args[2],size:[a,i]});break;case"symbolatom":c=new Nexus.TextButton(n,{size:[a,i],state:!1,text:"SYMBOLATOM NOT SUPPORTED"});break;case"cnv":c=new Nexus.TextButton(n,{size:[a,i],state:!1,text:"CNV NOT SUPPORTED"});break;default:throw new Error("Not supported ".concat(o.type))}return t.nexusElem=c,u_(e,t),c},F_=e=>3*e,R_=e=>({top:e?m_.y-m_.x/2:m_.y/2,left:m_.x/2,right:m_.x/2,bottom:e?m_.x/2:m_.y/2}),L_=e=>!(!e.label||!e.label.length),D_=async(e,n)=>{const t=c_(e.javascript||e.wasm,"artefacts.javascript or artefacts.wasm should be defined"),r=await(e=>Dc("string"===typeof e?"javascript":"assemblyscript",e))(t),a=(e=>{const n=g_(e.pdGui,e),t=b_(n),r=S_(t);return x_([...t,...w_(e)],r)})(r.customMetadata),i=new AudioContext;return i.suspend(),{rootElem:null,patchUrl:n,audioContext:i,webpdNode:null,controller:{values:{},functions:{}},views:{root:a,indexed:y_(a)},settings:null}},j_=async(e,n,t)=>{const r=_r(_r({},n),{},{controller:_r(_r({},n.controller),{},{values:t.initialValues?_r({},t.initialValues):{}}),settings:t}),a=document.createElement("div");r.settings.container.appendChild(a);const i=(e=>(e.innerHTML='\n    <div id="splash-container">\n        <div id="loading"></div>\n        <button id="start">START</button>\n    </div>\n\n    <div id="patch-controls">\n        <div id="views-root"></div>\n    </div>\n\n    <div id="credits">\n        <button>Credits</button>\n        <div class="content">\n        <div>Sound made using <a href="https://github.com/sebpiq/WebPd/" target="_blank" rel="noopener noreferrer" >WebPd</a>.</div>\n        <div>UI made using <a href="https://nexus-js.github.io/ui/" target="_blank" rel="noopener noreferrer" >NexusUI</a>.</div>\n        <div>Demo source code available <a href="https://github.com/sebpiq/WebPd_demos/" target="_blank" rel="noopener noreferrer" >here</a>.</div>\n        <div>Patch ginger2.pd by <a href="http://www.martin-brinkmann.de/pd-patches.html" target="_blank" rel="noopener noreferrer" >Martin Brinkmann</a>.</div>\n        </div>\n    </div>\n',{viewsRoot:c_(e.querySelector("#views-root"),"viewsRoot not found"),startButton:c_(e.querySelector("#start"),"startButton not found"),loadingLabel:c_(e.querySelector("#loading"),"loadingLabel not found"),loadingContainer:c_(e.querySelector("#splash-container"),"loadingContainer not found"),creditsButton:c_(e.querySelector("#credits button"),"creditsButton not found"),creditsContainer:c_(e.querySelector("#credits"),"creditsContainer not found")}))(a);!0!==r.settings.showCredits&&(i.creditsButton.style.display="none"),i.creditsButton.onclick=()=>{i.creditsContainer.classList.contains("expanded")?i.creditsContainer.classList.remove("expanded"):i.creditsContainer.classList.add("expanded")},i.startButton.style.display="none",i.startButton.onclick=()=>{i.loadingContainer.style.display="none",B_(r)},i.loadingLabel.innerHTML="loading assemblyscript compiler ...",console.log("PatchPlayer START"),await function(){return OS(...arguments)}(r.audioContext),i.loadingLabel.innerHTML="generating GUI ...",await l_(),((e,n)=>{E_(e,n,e.views.root,null)})(r,i.viewsRoot),await l_();let o=null;try{o=await navigator.mediaDevices.getUserMedia({audio:!0})}catch(s){console.error("Failed to get microphone stream ".concat(s))}return r.webpdNode=await z_(r,o,e),r.rootElem=a,i.loadingLabel.style.display="none",i.startButton.style.display="block",r},z_=async(e,n,t)=>{if(!t.javascript&&!t.wasm)throw new Error("Missing artefacts for creating the engine");const r=await(async(e,n,t)=>{const{messageHandler:r}=t,a=new ES(e);return a.port.onmessage=e=>r(a,e),"string"===typeof n?a.port.postMessage({type:"code:JS",payload:{jsCode:n}}):a.port.postMessage({type:"code:WASM",payload:{wasmBuffer:n}}),a})(e.audioContext,t.javascript||t.wasm,((e,n)=>{const t=bx(e);return{messageHandler:(e,r)=>{const a=r.data;switch(a.type){case"fs":return vx(e,r,{rootUrl:t});case"io:messageSender":return n&&n(a.payload.nodeId,a.payload.portletId,a.payload.message),null;default:return null}}}})(e.patchUrl||".",(function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return((e,n,t,r)=>{e.controller.values[n]=r[0];const a=e.views.indexed[n];if(a.nexusElem._isBeingChangedByUser)return;h_(e,n).onMessageFromWebPd(a.nexusElem,r[0])})(e,...t)})));if(n){e.audioContext.createMediaStreamSource(n).connect(r)}return r.connect(e.audioContext.destination),r},B_=e=>{"suspended"===e.audioContext.state&&e.audioContext.resume(),(e=>{Object.entries(e.controller.values).forEach((n=>{let[t,r]=n;f_(e,t,[r])}))})(e)},U_=Lx(Bx,Wx,$x,((e,n,t)=>{if(console.log("selectBuildSteps CODE TARGET",t),!e||!n)return null;if("patchPlayer"===n)switch(t){case"JavaScript":n="javascript";break;case"WebAssembly":n="wasm"}return["wav","app"].includes(n)&&["pd","pdJson","dspGraph"].includes(e)?fp(e,n,"JavaScript"===t?"javascript":"wasm"):fp(e,n)})),W_={WebAssembly:{display:"Web Assembly",info:"Web Assembly is slower to build, but provides a higher performance when running. Good for when your patch is stable and you want to take it elsewhere."},JavaScript:{display:"JavaScript",info:"JavaScript is fast to build, but slower when running. Good if you want to test things fast."}},$_=e=>e.app.isInitialized,V_=e=>e.app.willBuildOnLoad,G_=e=>e.app.debug,H_=async(e,n,t)=>{const r=_r(_r({},QS(t.rootUrl||"")),{},{audioSettings:t.audioSettings,renderAudioSettings:t.renderAudioSettings,abstractionLoader:t.rootUrl?ex(t.rootUrl):q_});return bS(e,n,r)},q_=Mi((async e=>{throw new Pi(e)}));function*K_(){yield ZI(Tx.actions.startBuild.type,X_)}function Y_(e,n){return new Promise((t=>{e.onmessage=e=>{t(e.data)},e.postMessage(n)}))}function*X_(){const e=new Worker("js/build.worker.js"),n=yield iI(Ux),t=yield iI(U_),r=yield iI(Wx),a=yield iI(Dx),i=yield iI(Vx),o=yield iI(G_);if(!n||!t)return void(yield nI(Tx.actions.buildSuccess({artefacts:n||{},patchPlayer:null})));yield oI(1);let s=_r({},n),l=null;for(let u of t){console.log("BUILD STEP START",u,s),yield nI(Tx.actions.startStep(u));try{const n={audioSettings:{channelCount:{in:2,out:2},bitDepth:64},renderAudioSettings:{sampleRate:44100,blockSize:4096,previewDurationSeconds:i||30},rootUrl:a?bx(a):null},t={artefacts:s,step:u,settings:n};let r;if("wasm"===u)r=yield rI(H_,s,u,n);else{const n=yield rI(Y_,e,t);r=n.result,s=n.artefacts}const o=1===r.status?r.errors:void 0;if(yield nI(Tx.actions.stepComplete({status:r.status,artefacts:s,errors:o,warnings:r.warnings})),1===r.status)return}catch(c){if(yield nI(Tx.actions.stepComplete({status:1,artefacts:s,errors:[c.message],warnings:[]})),o)throw c;return}"javascript"!==u&&"wasm"!==u||"patchPlayer"!==r||(l=yield rI(D_,s,a||null))}yield nI(Tx.actions.buildSuccess({artefacts:s,patchPlayer:l}))}function*J_(){for(;!window.asc;)yield oI(100);var e;e=window.asc,Ha=e;const n=yield iI(Dx),t=yield iI(zx);if(n&&!t){if((yield eI([Wa.actions.fetchUrlSuccess,Wa.actions.fetchUrlError])).type===Wa.actions.fetchUrlError.type)return void console.log("INIT FAILED ERROR")}(yield iI(V_))&&(yield nI(Tx.actions.startBuild())),yield nI(Cx.actions.initializationDone())}const Z_={patchPlayer:null},Q_={values:{}},eA=ia({name:"patchPlayer",initialState:Q_,reducers:{valuesChanged:(e,n)=>{e.values=n.payload}},extraReducers:e=>{e.addCase(Tx.actions.buildSuccess,((e,n)=>{Z_.patchPlayer=n.payload.patchPlayer})),e.addCase(Sx,(()=>(Z_.patchPlayer=null,Q_)))}}),nA=e=>e.patchPlayer.values,tA=()=>Z_.patchPlayer,rA=HI(),aA=function(e){var n,t=ra(),r=e||{},a=r.reducer,i=void 0===a?void 0:a,o=r.middleware,s=void 0===o?t():o,l=r.devTools,c=void 0===l||l,u=r.preloadedState,d=void 0===u?void 0:u,p=r.enhancers,f=void 0===p?void 0:p;if("function"===typeof i)n=i;else{if(!Zr(i))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');n=Mr(i)}var h=s;"function"===typeof h&&(h=h(t));var m=Fr.apply(void 0,h),g=Pr;c&&(g=Jr(Kr({trace:!1},"object"===typeof c&&c)));var y=new na(m),v=y;return Array.isArray(f)?v=Br([m],f):"function"===typeof f&&(v=f(y)),Nr(n,d,g.apply(void 0,v))}({reducer:{app:Cx.reducer,buildInput:Wa.reducer,buildOutput:Ga.reducer,artefacts:Tx.reducer,console:Ox.reducer,patchPlayer:eA.reducer},middleware:e=>e({serializableCheck:!1}).concat([rA])}),iA=ja,oA=Oa;rA.run((function*(){yield function(e){var n=Qk(Bk,e);return n.combinator=!0,n}([J_(),n_(),QI(),K_()])}));const sA=e=>"1"===e,lA=e=>e?"1":"0";var cA,uA;(0,Nx.A)({store:aA,params:{jsOrAs:{selector:$x,action:Ga.actions.setCodeTarget,defaultValue:Ga.getInitialState().codeTarget},target:{selector:Wx,action:Ga.actions.setFormat,defaultValue:Ga.getInitialState().format},url:{selector:Dx,action:Wa.actions.setUrl,defaultValue:Wa.getInitialState().url},build:{selector:V_,action:Cx.actions.setWillBuildOnLoad,defaultValue:Cx.getInitialState().willBuildOnLoad,stringToValue:sA,valueToString:lA},debug:{selector:G_,action:Cx.actions.setDebug,defaultValue:Cx.getInitialState().debug,stringToValue:sA,valueToString:lA},pp:{selector:nA,action:eA.actions.valuesChanged,defaultValue:eA.getInitialState().values,stringToValue:e=>JSON.parse(e),valueToString:e=>JSON.stringify(e)}},replaceState:!0,initialTruth:"location"});const dA={hillageizer:{display:"Andy Farnell - hillageizer",url:"./patches/Andy-Farnell-hillageizer.pd"},ginger2:{display:"Martin Brinkmann - ginger2",url:"./patches/Martin-Brinkmann-ginger2.pd"},randomperc1:{display:"Martin Brinkmann - randomperc1",url:"./patches/Martin-Brinkmann-randomperc1.pd"},uiDemo:{display:"WebPd website UI demo",url:"./patches/WebPd-website-UI-demo.pd"}},pA=Re.form(cA||(cA=r(["\n    display: inline;\n"]))),fA=Re(ln)(uA||(uA=r(["\n    padding-left: 0;\n    padding-top: ",";\n    text-overflow: ellipsis;\n    @media (max-width: ","px) {\n        width: 100%;\n        background-color: transparent;\n        text-align: center;\n    }\n"])),De.spacings.space0p1,De.devices.mobile.maxWidth),hA=()=>{const e=iA();return(0,Qe.jsx)(pA,{children:(0,Qe.jsxs)(fA,{onChange:n=>{const t=n.currentTarget.value;e(Wa.actions.setUrl(dA[t].url))},children:[(0,Qe.jsx)("option",{value:"",children:"Load one of the following examples"}),Object.entries(dA).map((e=>{let[n,t]=e;return(0,Qe.jsx)("option",{value:n,children:t.display},n)}))]})})};var mA=t(173),gA=t.n(mA);function yA(e,n,t,r){return new(t||(t=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(n){i(n)}}function s(e){try{l(r.throw(e))}catch(n){i(n)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,s)}l((r=r.apply(e,n||[])).next())}))}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const vA=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function bA(e,n,t){const r=function(e){const{name:n}=e;if(n&&-1!==n.lastIndexOf(".")&&!e.type){const t=n.split(".").pop().toLowerCase(),r=vA.get(t);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e),{webkitRelativePath:a}=e,i="string"===typeof n?n:"string"===typeof a&&a.length>0?a:"./".concat(e.name);return"string"!==typeof r.path&&wA(r,"path",i),void 0!==t&&Object.defineProperty(r,"handle",{value:t,writable:!1,configurable:!1,enumerable:!0}),wA(r,"relativePath",i),r}function wA(e,n,t){Object.defineProperty(e,n,{value:t,writable:!1,configurable:!1,enumerable:!0})}const SA=[".DS_Store","Thumbs.db"];function xA(e){return"object"===typeof e&&null!==e}function kA(e){return e.filter((e=>-1===SA.indexOf(e.name)))}function IA(e){if(null===e)return[];const n=[];for(let t=0;t<e.length;t++){const r=e[t];n.push(r)}return n}function _A(e){if("function"!==typeof e.webkitGetAsEntry)return TA(e);const n=e.webkitGetAsEntry();return n&&n.isDirectory?OA(n):TA(e,n)}function AA(e){return e.reduce(((e,n)=>[...e,...Array.isArray(n)?AA(n):[n]]),[])}function TA(e,n){return yA(this,void 0,void 0,(function*(){var t;if(globalThis.isSecureContext&&"function"===typeof e.getAsFileSystemHandle){const n=yield e.getAsFileSystemHandle();if(null===n)throw new Error("".concat(e," is not a File"));if(void 0!==n){const e=yield n.getFile();return e.handle=n,bA(e)}}const r=e.getAsFile();if(!r)throw new Error("".concat(e," is not a File"));return bA(r,null!==(t=null===n||void 0===n?void 0:n.fullPath)&&void 0!==t?t:void 0)}))}function EA(e){return yA(this,void 0,void 0,(function*(){return e.isDirectory?OA(e):function(e){return yA(this,void 0,void 0,(function*(){return new Promise(((n,t)=>{e.file((t=>{const r=bA(t,e.fullPath);n(r)}),(e=>{t(e)}))}))}))}(e)}))}function OA(e){const n=e.createReader();return new Promise(((e,t)=>{const r=[];!function a(){n.readEntries((n=>yA(this,void 0,void 0,(function*(){if(n.length){const e=Promise.all(n.map(EA));r.push(e),a()}else try{const n=yield Promise.all(r);e(n)}catch(i){t(i)}}))),(e=>{t(e)}))}()}))}var CA=t(628);function NA(e){return function(e){if(Array.isArray(e))return DA(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||LA(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function MA(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function PA(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?MA(Object(t),!0).forEach((function(n){FA(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):MA(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function FA(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function RA(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,a,i=[],o=!0,s=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);o=!0);}catch(l){s=!0,a=l}finally{try{o||null==t.return||t.return()}finally{if(s)throw a}}return i}(e,n)||LA(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LA(e,n){if(e){if("string"===typeof e)return DA(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?DA(e,n):void 0}}function DA(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var jA="function"===typeof CA.A?CA.A:CA.A.default,zA="file-invalid-type",BA="file-too-large",UA="file-too-small",WA="too-many-files",$A=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(","),n=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:zA,message:"File type must be ".concat(n)}},VA=function(e){return{code:BA,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},GA=function(e){return{code:UA,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},HA={code:WA,message:"Too many files"};function qA(e,n){var t="application/x-moz-file"===e.type||jA(e,n);return[t,t?null:$A(n)]}function KA(e,n,t){if(YA(e.size))if(YA(n)&&YA(t)){if(e.size>t)return[!1,VA(t)];if(e.size<n)return[!1,GA(n)]}else{if(YA(n)&&e.size<n)return[!1,GA(n)];if(YA(t)&&e.size>t)return[!1,VA(t)]}return[!0,null]}function YA(e){return void 0!==e&&null!==e}function XA(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function JA(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function ZA(e){e.preventDefault()}function QA(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return n.some((function(n){return!XA(e)&&n&&n.apply(void 0,[e].concat(r)),XA(e)}))}}function eT(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||"application/*"===e||/\w+\/[-+.\w]+/g.test(e)}function nT(e){return/^.*\.[\w]+$/.test(e)}var tT=["children"],rT=["open"],aT=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],iT=["refKey","onChange","onClick"];function oT(e){return function(e){if(Array.isArray(e))return cT(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||lT(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sT(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,a,i=[],o=!0,s=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);o=!0);}catch(l){s=!0,a=l}finally{try{o||null==t.return||t.return()}finally{if(s)throw a}}return i}(e,n)||lT(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lT(e,n){if(e){if("string"===typeof e)return cT(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?cT(e,n):void 0}}function cT(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function uT(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function dT(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?uT(Object(t),!0).forEach((function(n){pT(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):uT(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function pT(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function fT(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var hT=(0,e.forwardRef)((function(n,t){var r=n.children,a=bT(fT(n,tT)),i=a.open,o=fT(a,rT);return(0,e.useImperativeHandle)(t,(function(){return{open:i}}),[i]),e.createElement(e.Fragment,null,r(dT(dT({},o),{},{open:i})))}));hT.displayName="Dropzone";var mT={disabled:!1,getFilesFromEvent:function(e){return yA(this,void 0,void 0,(function*(){return xA(e)&&xA(e.dataTransfer)?function(e,n){return yA(this,void 0,void 0,(function*(){if(e.items){const t=IA(e.items).filter((e=>"file"===e.kind));if("drop"!==n)return t;return kA(AA(yield Promise.all(t.map(_A))))}return kA(IA(e.files).map((e=>bA(e))))}))}(e.dataTransfer,e.type):function(e){return xA(e)&&xA(e.target)}(e)?function(e){return IA(e.target.files).map((e=>bA(e)))}(e):Array.isArray(e)&&e.every((e=>"getFile"in e&&"function"===typeof e.getFile))?function(e){return yA(this,void 0,void 0,(function*(){const n=yield Promise.all(e.map((e=>e.getFile())));return n.map((e=>bA(e)))}))}(e):[]}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};hT.defaultProps=mT,hT.propTypes={children:gA().func,accept:gA().objectOf(gA().arrayOf(gA().string)),multiple:gA().bool,preventDropOnDocument:gA().bool,noClick:gA().bool,noKeyboard:gA().bool,noDrag:gA().bool,noDragEventsBubbling:gA().bool,minSize:gA().number,maxSize:gA().number,maxFiles:gA().number,disabled:gA().bool,getFilesFromEvent:gA().func,onFileDialogCancel:gA().func,onFileDialogOpen:gA().func,useFsAccessApi:gA().bool,autoFocus:gA().bool,onDragEnter:gA().func,onDragLeave:gA().func,onDragOver:gA().func,onDrop:gA().func,onDropAccepted:gA().func,onDropRejected:gA().func,onError:gA().func,validator:gA().func};var gT,yT,vT={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function bT(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=dT(dT({},mT),n),r=t.accept,a=t.disabled,i=t.getFilesFromEvent,o=t.maxSize,s=t.minSize,l=t.multiple,c=t.maxFiles,u=t.onDragEnter,d=t.onDragLeave,p=t.onDragOver,f=t.onDrop,h=t.onDropAccepted,m=t.onDropRejected,g=t.onFileDialogCancel,y=t.onFileDialogOpen,v=t.useFsAccessApi,b=t.autoFocus,w=t.preventDropOnDocument,S=t.noClick,x=t.noKeyboard,k=t.noDrag,I=t.noDragEventsBubbling,_=t.onError,A=t.validator,T=(0,e.useMemo)((function(){return function(e){if(YA(e))return Object.entries(e).reduce((function(e,n){var t=RA(n,2),r=t[0],a=t[1];return[].concat(NA(e),[r],NA(a))}),[]).filter((function(e){return eT(e)||nT(e)})).join(",")}(r)}),[r]),E=(0,e.useMemo)((function(){return function(e){return YA(e)?[{description:"Files",accept:Object.entries(e).filter((function(e){var n=RA(e,2),t=n[0],r=n[1],a=!0;return eT(t)||(console.warn('Skipped "'.concat(t,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),a=!1),Array.isArray(r)&&r.every(nT)||(console.warn('Skipped "'.concat(t,'" because an invalid file extension was provided.')),a=!1),a})).reduce((function(e,n){var t=RA(n,2),r=t[0],a=t[1];return PA(PA({},e),{},FA({},r,a))}),{})}]:e}(r)}),[r]),O=(0,e.useMemo)((function(){return"function"===typeof y?y:ST}),[y]),C=(0,e.useMemo)((function(){return"function"===typeof g?g:ST}),[g]),N=(0,e.useRef)(null),M=(0,e.useRef)(null),P=sT((0,e.useReducer)(wT,vT),2),F=P[0],R=P[1],L=F.isFocused,D=F.isFileDialogActive,j=(0,e.useRef)("undefined"!==typeof window&&window.isSecureContext&&v&&"showOpenFilePicker"in window),z=function(){!j.current&&D&&setTimeout((function(){M.current&&(M.current.files.length||(R({type:"closeDialog"}),C()))}),300)};(0,e.useEffect)((function(){return window.addEventListener("focus",z,!1),function(){window.removeEventListener("focus",z,!1)}}),[M,D,C,j]);var B=(0,e.useRef)([]),U=function(e){N.current&&N.current.contains(e.target)||(e.preventDefault(),B.current=[])};(0,e.useEffect)((function(){return w&&(document.addEventListener("dragover",ZA,!1),document.addEventListener("drop",U,!1)),function(){w&&(document.removeEventListener("dragover",ZA),document.removeEventListener("drop",U))}}),[N,w]),(0,e.useEffect)((function(){return!a&&b&&N.current&&N.current.focus(),function(){}}),[N,b,a]);var W=(0,e.useCallback)((function(e){_?_(e):console.error(e)}),[_]),$=(0,e.useCallback)((function(e){e.preventDefault(),e.persist(),te(e),B.current=[].concat(oT(B.current),[e.target]),JA(e)&&Promise.resolve(i(e)).then((function(n){if(!XA(e)||I){var t=n.length,r=t>0&&function(e){var n=e.files,t=e.accept,r=e.minSize,a=e.maxSize,i=e.multiple,o=e.maxFiles,s=e.validator;return!(!i&&n.length>1||i&&o>=1&&n.length>o)&&n.every((function(e){var n=RA(qA(e,t),1)[0],i=RA(KA(e,r,a),1)[0],o=s?s(e):null;return n&&i&&!o}))}({files:n,accept:T,minSize:s,maxSize:o,multiple:l,maxFiles:c,validator:A});R({isDragAccept:r,isDragReject:t>0&&!r,isDragActive:!0,type:"setDraggedFiles"}),u&&u(e)}})).catch((function(e){return W(e)}))}),[i,u,W,I,T,s,o,l,c,A]),V=(0,e.useCallback)((function(e){e.preventDefault(),e.persist(),te(e);var n=JA(e);if(n&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(t){}return n&&p&&p(e),!1}),[p,I]),G=(0,e.useCallback)((function(e){e.preventDefault(),e.persist(),te(e);var n=B.current.filter((function(e){return N.current&&N.current.contains(e)})),t=n.indexOf(e.target);-1!==t&&n.splice(t,1),B.current=n,n.length>0||(R({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),JA(e)&&d&&d(e))}),[N,d,I]),H=(0,e.useCallback)((function(e,n){var t=[],r=[];e.forEach((function(e){var n=sT(qA(e,T),2),a=n[0],i=n[1],l=sT(KA(e,s,o),2),c=l[0],u=l[1],d=A?A(e):null;if(a&&c&&!d)t.push(e);else{var p=[i,u];d&&(p=p.concat(d)),r.push({file:e,errors:p.filter((function(e){return e}))})}})),(!l&&t.length>1||l&&c>=1&&t.length>c)&&(t.forEach((function(e){r.push({file:e,errors:[HA]})})),t.splice(0)),R({acceptedFiles:t,fileRejections:r,isDragReject:r.length>0,type:"setFiles"}),f&&f(t,r,n),r.length>0&&m&&m(r,n),t.length>0&&h&&h(t,n)}),[R,l,T,s,o,c,f,h,m,A]),q=(0,e.useCallback)((function(e){e.preventDefault(),e.persist(),te(e),B.current=[],JA(e)&&Promise.resolve(i(e)).then((function(n){XA(e)&&!I||H(n,e)})).catch((function(e){return W(e)})),R({type:"reset"})}),[i,H,W,I]),K=(0,e.useCallback)((function(){if(j.current){R({type:"openDialog"}),O();var e={multiple:l,types:E};window.showOpenFilePicker(e).then((function(e){return i(e)})).then((function(e){H(e,null),R({type:"closeDialog"})})).catch((function(e){!function(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}(e)?!function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?W(e):(j.current=!1,M.current?(M.current.value=null,M.current.click()):W(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):(C(e),R({type:"closeDialog"}))}))}else M.current&&(R({type:"openDialog"}),O(),M.current.value=null,M.current.click())}),[R,O,C,v,H,W,E,l]),Y=(0,e.useCallback)((function(e){N.current&&N.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),K()))}),[N,K]),X=(0,e.useCallback)((function(){R({type:"focus"})}),[]),J=(0,e.useCallback)((function(){R({type:"blur"})}),[]),Z=(0,e.useCallback)((function(){S||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?K():setTimeout(K,0))}),[S,K]),Q=function(e){return a?null:e},ee=function(e){return x?null:Q(e)},ne=function(e){return k?null:Q(e)},te=function(e){I&&e.stopPropagation()},re=(0,e.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.refKey,t=void 0===n?"ref":n,r=e.role,i=e.onKeyDown,o=e.onFocus,s=e.onBlur,l=e.onClick,c=e.onDragEnter,u=e.onDragOver,d=e.onDragLeave,p=e.onDrop,f=fT(e,aT);return dT(dT(pT({onKeyDown:ee(QA(i,Y)),onFocus:ee(QA(o,X)),onBlur:ee(QA(s,J)),onClick:Q(QA(l,Z)),onDragEnter:ne(QA(c,$)),onDragOver:ne(QA(u,V)),onDragLeave:ne(QA(d,G)),onDrop:ne(QA(p,q)),role:"string"===typeof r&&""!==r?r:"presentation"},t,N),a||x?{}:{tabIndex:0}),f)}}),[N,Y,X,J,Z,$,V,G,q,x,k,a]),ae=(0,e.useCallback)((function(e){e.stopPropagation()}),[]),ie=(0,e.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.refKey,t=void 0===n?"ref":n,r=e.onChange,a=e.onClick,i=fT(e,iT);return dT(dT({},pT({accept:T,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Q(QA(r,q)),onClick:Q(QA(a,ae)),tabIndex:-1},t,M)),i)}}),[M,r,l,q,a]);return dT(dT({},F),{},{isFocused:L&&!a,getRootProps:re,getInputProps:ie,rootRef:N,inputRef:M,open:Q(K)})}function wT(e,n){switch(n.type){case"focus":return dT(dT({},e),{},{isFocused:!0});case"blur":return dT(dT({},e),{},{isFocused:!1});case"openDialog":return dT(dT({},vT),{},{isFileDialogActive:!0});case"closeDialog":return dT(dT({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return dT(dT({},e),{},{isDragActive:n.isDragActive,isDragAccept:n.isDragAccept,isDragReject:n.isDragReject});case"setFiles":return dT(dT({},e),{},{acceptedFiles:n.acceptedFiles,fileRejections:n.fileRejections,isDragReject:n.isDragReject});case"reset":return dT({},vT);default:return e}}function ST(){}const xT=Re.span(gT||(gT=r(["\n    padding: "," 0;\n    cursor: pointer;\n"])),De.spacings.space0p1),kT=Re.span(yT||(yT=r(["\n    color: ",";\n"])),De.colors.fg1),IT=()=>{const n=oA(jx),t=iA(),r=(0,e.useCallback)((e=>{const n=e[0],r=new FileReader;r.onabort=()=>console.log("file reading was aborted"),r.onerror=()=>console.log("file reading has failed"),r.onload=()=>{t(Wa.actions.setLocalFile({arrayBuffer:r.result,filepath:n.name}))},r.readAsArrayBuffer(n)}),[]),{getRootProps:a,getInputProps:i,isDragActive:o}=bT({onDrop:r});return(0,Qe.jsxs)(xT,_r(_r({},a()),{},{children:[(0,Qe.jsx)("input",_r({},i())),o?(0,Qe.jsx)(kT,{children:"Drop the file here ..."}):(0,Qe.jsx)(kT,{children:n?"Choose a different file":"Upload a file from your device"})]}))};var _T,AT,TT;const ET=Re.form(_T||(_T=r(["\n    display: inline;\n"]))),OT=Re.input(AT||(AT=r(["\n    padding: "," 0;\n    color: ",";\n    ::placeholder,\n    ::-webkit-input-placeholder {\n        color: ",";\n        opacity: 1;\n    }\n    :-ms-input-placeholder {\n        color: ",";\n        opacity: 1;\n    }\n    @media (max-width: ","px) {\n        background-color: transparent;\n        text-align: center;\n    }\n"])),De.spacings.space0p1,De.colors.fg1,De.colors.fg1,De.colors.fg1,De.devices.mobile.maxWidth),CT=Re(on)(TT||(TT=r(["\n    margin-left: ",";\n"])),De.spacings.space1),NT=()=>{const n=iA(),t=oA(Dx),[r,a]=(0,e.useState)(t||"");return(0,Qe.jsxs)(ET,{onSubmit:e=>{e.preventDefault(),n(Wa.actions.setUrl(r))},children:[(0,Qe.jsx)(OT,{value:r,onChange:e=>{a(e.target.value),n(Wa.actions.setFocusOn("url"))},placeholder:"Load a file from a URL"}),r.length?(0,Qe.jsx)(CT,{children:"Load"}):null]})};var MT,PT;const FT=Re(gn)(MT||(MT=r(["\n    position: relative;\n"]))),RT=Re.div(PT||(PT=r(["\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    flex: auto;\n    & > * {\n        display: inline-block;\n        @media (max-width: ","px) {\n            /* Match all objects except Or */\n            &:nth-child(2n+1) {\n                width: 100%;\n                text-align: center;\n                background-color: ",";\n            }\n        }\n    }\n"])),De.devices.mobile.maxWidth,De.colors.bg1),LT=()=>{const e=iA(),n=oA(jx),t=oA(Dx),r=oA(Bx),a=oA(Ux);return(0,Qe.jsxs)(FT,{children:[(0,Qe.jsx)(yn,{children:(0,Qe.jsx)(nn,{children:"\u2192 input"})}),(0,Qe.jsx)(vn,{children:r&&a?(0,Qe.jsx)(Qe.Fragment,{children:(0,Qe.jsx)(bt,{format:r,artefacts:a,filename:n||t||void 0,extraButtons:[(0,Qe.jsx)(on,{onClick:()=>{e(Wa.actions.clear())},children:"clear"},"clear")]})}):(0,Qe.jsxs)(RT,{children:[(0,Qe.jsx)(IT,{})," ",(0,Qe.jsx)(hn,{children:"OR"})," ",(0,Qe.jsx)(NT,{})," ",(0,Qe.jsx)(hn,{children:"OR"})," ",(0,Qe.jsx)(hA,{})]})})]})},DT=_r(_r({},up),{},{patchPlayer:{description:"Patch player"},wav:{description:"Audio preview"},app:{description:"Complete web app"}}),jT={pd:{info:"A Pure Data file (.pd) in text format."},pdJson:{info:"Will compile a JSON representation of a pure data file."},dspGraph:{info:"Will compile a DSP graph that is used internally by the WebPd compiler to generate the audio output."},javascript:{info:"Will compile a JavaScript function for generating audio."},assemblyscript:{info:"Will compile an AssemblyScript function which can then be compiled to Web Assembly."},wasm:{info:"Will generate a Web Assembly module from your patch. This module can be loaded again here at a later time to play your patch."},wav:{info:"Will generate an audio preview of your patch."},patchPlayer:{info:"Will render a interactive interface allowing to play your patch online."},app:{info:"Will generate a bare bones web page embedding your patch. A good starter to build an audio web site of your own."}},zT=Re.div.withConfig({displayName:"OutputSelector__Container",componentId:"sc-1qpzo58-0"})([""]),BT=Re.div.withConfig({displayName:"OutputSelector__FormatSelector",componentId:"sc-1qpzo58-1"})(["width:100%;display:flex;flex-direction:row;justify-content:space-between;@media (max-width:","px){flex-direction:column;align-items:initial;","{text-align:center;}}"],De.devices.mobile.maxWidth,hn),UT=Re(mn).withConfig({displayName:"OutputSelector__FormatHint",componentId:"sc-1qpzo58-2"})(["margin-top:",";"],De.spacings.space0p1),WT=Re(on).withConfig({displayName:"OutputSelector__ButtonInit",componentId:"sc-1qpzo58-3"})([""]),$T=Re(on).withConfig({displayName:"OutputSelector__ButtonActive",componentId:"sc-1qpzo58-4"})(["color:",";background-color:",";"],De.colors.colorScheme.next(),De.colors.bg1p5),VT=Re(on).withConfig({displayName:"OutputSelector__ButtonInactive",componentId:"sc-1qpzo58-5"})(["color:",";background-color:",";"],De.colors.fg1,De.colors.bg1p5),GT=()=>{const e=iA(),n=oA(Wx),t=Array.from(oA(Gx));return(0,Qe.jsxs)(zT,{children:[(0,Qe.jsx)(BT,{children:t.flatMap(((r,a)=>{const i=r===n?$T:n?VT:WT;return[(0,Qe.jsx)(i,{onClick:()=>e(Ga.actions.setFormat(r)),children:DT[r].description},r),a<t.length-1?(0,Qe.jsx)(hn,{children:"OR"},r+"OR"):null]}))}),n?(0,Qe.jsx)(UT,{children:jT[n].info}):null]})};var HT,qT,KT;const YT=Re.div(HT||(HT=r(["\n    margin-top: ",";\n"])),De.spacings.space2),XT=Re(ln)(qT||(qT=r(["\n    min-width: 8em;\n    margin-left: ",";\n"])),De.spacings.space0p1),JT=Re(mn)(KT||(KT=r(["\n    margin-top: ",";\n"])),De.spacings.space0p1),ZT=()=>{const e=oA($x),n=iA();return(0,Qe.jsxs)(YT,{children:[(0,Qe.jsx)("label",{children:"Compilation target"}),(0,Qe.jsx)(XT,{value:e,onChange:e=>n(Ga.actions.setCodeTarget(e.currentTarget.value)),children:Object.entries(W_).map((e=>{let[n,{display:t}]=e;return(0,Qe.jsx)("option",{value:n,children:t},n)}))}),(0,Qe.jsx)(JT,{children:W_[e].info})]})},QT=()=>_x.artefacts,eE=e=>e.artefacts.buildStatus,nE=e=>e.artefacts.step,tE=e=>e.console.errors,rE=e=>e.console.warnings;var aE,iE;const oE=Re.div(aE||(aE=r(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    background-color: ",";\n"])),De.colors.bg1),sE=Re(on)(iE||(iE=r(["\n    position: fixed;\n    right: ",";\n    top: ",";\n    z-index: ",";\n"])),De.spacings.space1,De.spacings.space1,De.zIndexes.closeButton),lE=n=>{let{artefacts:t}=n;const r=(0,e.useRef)(null),a=iA(),i=oA(tA),o=oA(nA);(0,e.useEffect)((()=>{if(!i)return;const e=j_(t,i,{container:r.current,colorScheme:De.colors.colorScheme,showCredits:!1,initialValues:o,valuesUpdatedCallback:e=>{a(eA.actions.valuesChanged(e))}});return()=>{console.log("DESTROY"),e.then((e=>(e=>{e.rootElem&&(e.rootElem.innerHTML="",e.rootElem.remove(),console.log("DESTROY PATCH PLAYER",e.rootElem)),e.webpdNode.disconnect(),e.audioContext.suspend()})(e)))}}),[t,i]);return(0,Qe.jsx)(oE,{id:"PatchPlayer",ref:r,children:(0,Qe.jsx)(sE,{onClick:()=>{a(Sx())},children:"Close"})})};var cE;const uE=Re.div(cE||(cE=r([""]))),dE=()=>{const e=iA(),n=oA(Wx),t=oA(QT),r=oA(tE),a=oA(nE),i=oA(eE);return!n||r||i!==kx?null:(0,Qe.jsxs)(uE,{children:[i===xx&&(0,Qe.jsxs)(nn,{children:["Building ",a," ..."]}),i===kx?"patchPlayer"!==n?(0,Qe.jsx)(bt,{artefacts:t,format:n,filename:"app"!==n?"output."+n:void 0,showDownloadButton:!0,extraButtons:[(0,Qe.jsx)(on,{onClick:()=>{e(Ga.actions.clear())},children:"clear"},"clear")]}):(0,Qe.jsx)(lE,{artefacts:t}):null]})};var pE,fE;const hE=Re.div(pE||(pE=r(["\n    margin-top: ",";\n"])),De.spacings.space2),mE=Re.input(fE||(fE=r(["\n    margin-left: ",";\n    background-color: ",";\n    width: 2em;\n"])),De.spacings.space0p1,De.colors.bg1p5),gE=()=>{const e=oA(Vx),n=iA();return(0,Qe.jsxs)(hE,{children:[(0,Qe.jsx)("label",{children:"Duration of preview in seconds"}),(0,Qe.jsx)(mE,{value:e||"",onChange:e=>{if(""===e.currentTarget.value)return void n(Ga.actions.setPreviewDurationSeconds(null));const t=Number.parseInt(e.currentTarget.value);isNaN(t)||n(Ga.actions.setPreviewDurationSeconds(t))}})]})};var yE,vE,bE,wE;const SE=Re(gn)(yE||(yE=r([""]))),xE=Re(mn)(vE||(vE=r(["\n    margin-top: ",";\n"])),De.spacings.space2),kE=Re.div(bE||(bE=r(["\n    margin-top: ",";\n"])),De.spacings.space2),IE=Re(sn)(wE||(wE=r(["\n    font-size: 150%;\n    padding: 0.1em 0.5em;\n"]))),_E=()=>{const e=iA(),n=oA(Ux),t=oA(Bx),r=oA(Wx),a=oA(eE),i=t&&r&&["pd","pdJson","dspGraph"].includes(t)&&["wav","patchPlayer","app"].includes(r),o=oA(tE);return n?(0,Qe.jsxs)(SE,{children:[(0,Qe.jsx)(yn,{children:(0,Qe.jsx)(nn,{children:"\u2190 output"})}),(0,Qe.jsx)(vn,{children:r&&!o&&a===kx?(0,Qe.jsx)(dE,{}):(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)(GT,{}),r&&i?(0,Qe.jsx)(ZT,{}):null,"wav"===r?(0,Qe.jsx)(gE,{}):null,r?(0,Qe.jsx)(kE,{children:(0,Qe.jsx)(IE,{onClick:()=>{e(Tx.actions.startBuild())},children:"Go !"})}):null,(0,Qe.jsxs)(xE,{children:["For more compilation options"," ",(0,Qe.jsx)("a",{href:"https://github.com/sebpiq/WebPd/#using-the-cli",target:"_blank",rel:"noreferrer",children:"you can use the CLI"}),"."]})]})})]}):null};var AE=t(814),TE=t.n(AE),EE=new URL(t(631),t.b);const OE='<p align="center">\n  <img src="'+TE()(EE)+'" />\n</p>\n\n\x3c!-- intro start --\x3e\n\n<p><strong>WebPd</strong> is a compiler for the <a href="https://puredata.info/">Pure Data</a> audio programming language allowing to run <strong>.pd</strong> patches in web pages.</p>\n<p><strong>WebPd is highly modular and takes a white-box approach to audio programming</strong>. It converts the audio graph and processing objects from a patch into plain human-readable JavaScript or <a href="https://www.assemblyscript.org/">AssemblyScript</a> (*). The pure audio generated code can be then integrated directly in any web application without using WebPd or Pure Data ever again \ud83c\udf08.</p>\n\x3c!-- intro end --\x3e\n\n<p><a href="https://github.com/sponsors/sebpiq"><img src="https://img.shields.io/static/v1?label=Sponsor&message=%E2%9D%A4&logo=GitHub&color=%23ed00d9" alt=""></a></p>\n<p><em>(*) AssemblyScript is a TypeScript-style language which compiles to WebAssembly.</em></p>\n<h2 id="usecase-examples">Usecase examples</h2>\n<ul>\n<li>Publish generative musical works on the web</li>\n<li>Execute, tweak and share patches collectively on any machine</li>\n<li>Produce, filter and playback sound and music data in realtime from web based applications and games</li>\n</ul>\n<h2 id="integration-and-scope">Integration and scope</h2>\n<p>There are plenty of good JavaScript libraries to build interactive visual interfaces such as <a href="https://threejs.org/">Three.js</a>, <a href="https://p5js.org/">p5.js</a>, good old JavaScript / HTML / CSS, etc. Integrating them with a WebPd patch should be fairly easy. An example of such integration is the <em>patch player</em> demo, available through <a href="#using-the-web-compiler">the web compiler</a>.</p>\n<p>WebPd is <strong>not</strong>, in itself, a complete editor and a live performance platform like Pure Data. The Pure Data graphical interface, as well as GEM, are out of the scope of WebPd. WebPd isn&#39;t either a simple executor like libpd. It is rather a lean audio compiler, which generates high-performance, human-readable and easily integrable audio code with no bloat.</p>\n<h2 id="usage">Usage</h2>\n<p><span id="using-the-web-compiler"><span></p>\n<h3 id="web-compiler-and-player">Web compiler and player</h3>\n<p><strong>The web compiler and a patch player are live at the following address: <a href="https://sebpiq.github.io/WebPd_website">https://sebpiq.github.io/WebPd_website</a></strong></p>\n<p>Just upload or give a URL(*) of a patch, compile it just in time and generate an interface allowing to play that patch in realtime in your browser. Once the compilation succeeds, you can copy and share with others the resulting URL from the player(**). This URL contains all the modified parameters of the patch you have played with, so that it is shared completely in its <em>current</em> state.</p>\n<p><em>(*)You can use any public URL of a patch found in the wild (on github, Pure Data forums, etc.).</em></p>\n<p><em>(**)Sharing a compiled patch doesn&#39;t work if you used local files for compilation.</em></p>\n<p><span id="using-the-cli"><span></p>\n<h3 id="command-line-interface">Command line interface</h3>\n<p><em>NOTE : Running the CLI requires node.js version 18 or higher.</em></p>\n<p>The command-line interface (CLI) offers more customization options, including the ability to generate a fully-functional (but bare bones) web page embedding your patch.</p>\n<p>Open a terminal and install the CLI with <a href="https://nodejs.org/">node / npm</a> by running the following command:</p>\n<pre><code>npm install -g webpd\n</code></pre>\n<p>Verify that installation worked by running:</p>\n<pre><code>webpd --help\n</code></pre>\n<p>This should output help for the CLI and will hopefully get you started.</p>\n<h3 id="advices-for-writing-webpd-compatible-patches">Advices for writing WebPd compatible patches</h3>\n<ul>\n<li>Make sure that you only use <a href="https://github.com/sebpiq/WebPd/blob/main/ROADMAP.md">supported features</a>.</li>\n<li>Always use <code>[trigger]</code> objects to make messages send order explicit (including in initialization with <code>[loadbang]</code> and when loading soundfiles). Indeed, due to different constraints, Pd and WebPd&#39;s message sequencing order might be different.</li>\n<li>Use [samplerate~] object instead of hard-coding sample rate with a fixed value.</li>\n</ul>\n<h3 id="getting-help">Getting help</h3>\n<p>If you feel stuck, there&#39;s <a href="https://puredata.info/community">plenty of places</a> where you can ask for help. I recommend in particular <a href="https://discord.gg/AZ43djV">the discord server</a> where you can get help quickly and find support from the community.</p>\n<p>If you feel you might have stumbled upon a bug, please report it following <a href="#reporting-a-bug">these simple guidelines</a>.</p>\n<h3 id="you-are-using-webpd">You are using WebPd?</h3>\n<p>Great \ud83c\udf31 ! It helps a lot with motivation to hear that people are using it. Don&#39;t hesitate to let me know by pinging me on twitter <a href="https://twitter.com/sebpiq">@sebpiq</a>, or <a href="https://second-hander.com/">writing me directly by email</a>.</p>\n<p>If you can afford it, you can also <a href="https://opencollective.com/webpd">donate</a> to help move development forward.</p>\n<h2 id="development">Development</h2>\n<h3 id="status--roadmap">Status &amp; roadmap</h3>\n<p>WebPd is currently under heavy development, but it is still a work in progress. A list of implemented objects, features and the roadmap are <a href="https://github.com/sebpiq/WebPd/blob/main/ROADMAP.md">here</a>.</p>\n<p>The project is currently in <em>alpha release state</em> which means that many of your patches will <em>not</em> work out of the box. Many objects and features are indeed still missing. If you feel there is a bug, thanks for reporting it following <a href="#reporting-a-bug">these simple guidelines</a>. If you feel you could develop an object that is missing in WebPd to play a specific patch, see <a href="#contributing">contributing</a>.</p>\n<p><span id="reporting-a-bug"><span></p>\n<h3 id="reporting-a-bug">Reporting a bug</h3>\n<p>If you wish to report a bug:</p>\n<ul>\n<li>First narrow it down. Remove all objects in your patch that are not related with the bug. Try to find the simplest patch with which this bug can be reproduced.</li>\n<li>Then submit a bug report <a href="https://github.com/sebpiq/WebPd/issues">in github</a> with the following template :</li>\n</ul>\n<pre><code>Patch and description -&gt; Upload your minimal patch\n\nCurrent behavior -&gt; Describe shortly how it is working at the moment\n\nExpected behavior -&gt; Describe shortly how it should work instead\n</code></pre>\n<p><span id="contributing"><span></p>\n<h3 id="contributing">Contributing</h3>\n<p>One-time contributions or regular work on the library are more than welcome! Contribution guidelines are coming, meanwhile if you have time and would really like to get involved please get in touch on the issue tracker on GitHub. I would be pleased to help you getting started for contributing.</p>\n<p>In case you would like to try developping a new object, here are some good examples to start with:</p>\n<ul>\n<li><a href="https://github.com/sebpiq/WebPd/blob/develop/src/nodes/nodes/clip.ts">clip.ts</a></li>\n<li><a href="https://github.com/sebpiq/WebPd/blob/develop/src/nodes/nodes/clip~.ts">clip~.ts</a></li>\n</ul>\n<p>If you want to dig deeper into the code, WebPd is built in several sub-packages in addition to this one which combines them all : </p>\n<ul>\n<li>Pd file parser : <a href="https://github.com/sebpiq/WebPd_pd-parser">https://github.com/sebpiq/WebPd_pd-parser</a></li>\n<li>WebPd compiler : <a href="https://github.com/sebpiq/WebPd_compiler">https://github.com/sebpiq/WebPd_compiler</a></li>\n<li>WebPd runtime : <a href="https://github.com/sebpiq/WebPd_runtime">https://github.com/sebpiq/WebPd_runtime</a></li>\n</ul>\n<h2 id="license">License</h2>\n<p>WebPd is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License version 3 as published by the Free Software Foundation.</p>\n<p>WebPd is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\nGNU Lesser General Public License or read the <a href="https://github.com/sebpiq/WebPd/blob/main/COPYING.LESSER">COPYING.LESSER</a> file for more details.</p>\n<h2 id="authors">Authors</h2>\n<ul>\n<li>S\xe9bastien Piquemal <a href="mailto:&#115;&#101;&#x62;&#112;&#105;&#113;&#64;&#x70;&#114;&#x6f;&#116;&#x6f;&#110;&#109;&#x61;&#x69;&#x6c;&#x2e;&#99;&#x6f;&#x6d;">&#115;&#101;&#x62;&#112;&#105;&#113;&#64;&#x70;&#114;&#x6f;&#116;&#x6f;&#110;&#109;&#x61;&#x69;&#x6c;&#x2e;&#99;&#x6f;&#x6d;</a></li>\n<li>Chris McCormick</li>\n<li>Brandon James</li>\n<li>mgsx-dev</li>\n<li>Atul Varma</li>\n<li>Ulric Wilfred</li>\n<li>Paul Money</li>\n</ul>\n<h2 id="acknowledgment-and-sponsors">Acknowledgment and sponsors</h2>\n<p>This project has been sponsored by the <a href="https://dafneplus.eu/">DAFNE+</a> european research project funded by the European Union within the &quot;Horizon Europe&quot; program (Grant Agreement 101061548) and <a href="https://www.ircam.fr">IRCAM</a> within the WAM team from december 2022 to march 2023.</p>\n';var CE;const NE=["title","titleId"];function ME(){return ME=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ME.apply(null,arguments)}function PE(n,t){let{title:r,titleId:a}=n,i=function(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==n.indexOf(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],-1===n.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}(n,NE);return e.createElement("svg",ME({width:98,height:96,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),r?e.createElement("title",{id:a},r):null,CE||(CE=e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z",fill:"#24292f"})))}const FE=e.forwardRef(PE),RE=(t.p,["title","titleId"]);function LE(){return LE=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},LE.apply(null,arguments)}function DE(n,t){let{title:r,titleId:a}=n,i=function(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==n.indexOf(r))continue;t[r]=e[r]}return t}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],-1===n.indexOf(t)&&{}.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}(n,RE);return e.createElement("svg",LE({width:700,height:736,viewBox:"0 0 525 552",id:"svg2647",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},i),r?e.createElement("title",{id:a},r):null,e.createElement("path",{d:"M 110.52407,0.01240603 V 27.644204 H 55.25943 V 55.276003 L 27.631798,55.27194 V 82.903738 H 0 V 193.433 h 27.631798 v 55.26464 l 27.627632,-0.008 v 27.6318 h 27.631798 v 27.6318 h 27.631802 v 27.63179 h 27.63179 v 27.6318 h 27.6318 v 27.6318 h 27.6318 v 55.26464 h 27.6318 v 55.26464 h 27.6318 v 55.26463 h 27.6318 v -55.26463 h 27.63179 v -55.26464 h 27.6318 V 386.8483 h 27.6318 v -27.6318 h 27.6318 v -27.6318 h 27.6318 v -27.63179 h 27.6318 v -27.6318 h 27.63179 v -27.6318 h 27.6318 V 193.42467 H 525 V 82.895395 H 497.3682 V 55.263596 H 469.7364 V 27.631798 H 414.47177 V 0 h -55.26464 v 27.631798 h -55.26464 v 27.631798 h -27.6318 v 27.631799 h -27.6318 V 55.263596 h -27.6318 V 27.631798 l -27.63596,0.01221 h -27.6318 V 0.01220812 Z",id:"path2645",style:{strokeWidth:1.04165}}))}const jE=e.forwardRef(DE);t.p;var zE,BE,UE,WE,$E,VE;const GE="\x3c!-- intro start --\x3e",HE=OE.slice(OE.indexOf(GE)+20,OE.indexOf("\x3c!-- intro end --\x3e")),qE=Re(tn)(zE||(zE=r(["\n    background: linear-gradient(\n        180deg,\n        rgba(0, 0, 0, 0) 10%,\n        "," 50%,\n        "," 67%\n    );\n"])),De.colors.bg2,De.colors.bg2),KE=Re.h1(BE||(BE=r(["\n    position: relative;\n    bottom: 0.15em;\n    font-size: 600%;\n    font-family: ",";\n    color: ",";\n    margin: 0;\n    padding: 0;\n    margin-bottom: ",";\n    line-height: 100%;\n    letter-spacing: 0.3em;\n    text-align: center;\n    @media (max-width: 700px) {\n        font-size: 450%;\n    }\n    @media (max-width: 400px) {\n        font-size: 350%;\n    }\n"])),De.fonts.title,De.colors.colorScheme.next(),De.spacings.space2),YE=Re.div(UE||(UE=r(["\n    & > *:last-child {\n        margin-bottom: 0;\n    }\n"]))),XE=Re.div(WE||(WE=r(["\n    margin-top: ",";\n    display: flex;\n    flex-direction: row;\n"])),De.spacings.space1),JE="\n    font-family: ".concat(De.fonts.title,";\n    font-size: 85%;\n    text-decoration: underline;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    width: fit-content;\n\n    svg {\n        height: 1em;\n        width: 1em;\n        display: inline;\n        margin-left: 0.5em;\n        path {\n            fill: ").concat(De.colors.fg1,";\n        }\n    }\n"),ZE=Re.a($E||($E=r(["\n    ","\n"])),JE),QE=Re.a(VE||(VE=r(["\n    ","\n    margin-left: ",";\n"])),JE,De.spacings.space1),eO=()=>(0,Qe.jsxs)(qE,{children:[(0,Qe.jsx)(KE,{children:"WebPd"}),(0,Qe.jsx)(YE,{dangerouslySetInnerHTML:{__html:HE}}),(0,Qe.jsxs)(XE,{children:[(0,Qe.jsxs)(ZE,{href:"https://github.com/sebpiq/WebPd",target:"_blank",rel:"noopener",children:["Read more",(0,Qe.jsx)(FE,{viewBox:"0 0 97.627 96"})]}),(0,Qe.jsxs)(QE,{href:"https://opencollective.com/webpd",target:"_blank",rel:"noopener",children:["Donate",(0,Qe.jsx)(jE,{})]})]})]});var nO,tO,rO,aO,iO;const oO=Re(tn)(nO||(nO=r([""]))),sO=Re.pre(tO||(tO=r(["\n    overflow: auto;\n    margin: 0;\n"]))),lO=Re.pre(rO||(rO=r(["\n    overflow: auto;\n    margin: 0;\n    color: ",";\n"])),De.colors.colorScheme.next()),cO=Re.div(aO||(aO=r(["\n    margin-top: ",";\n"])),De.spacings.space1),uO=Re(mn)(iO||(iO=r(["\n    margin-top: ",";\n"])),De.spacings.space2),dO=()=>{const e=oA(tE),n=oA(rE),t=e&&e.length,r=n&&n.length;if(!t&&!r)return null;const a=(0,Qe.jsxs)(Qe.Fragment,{children:["WebPd is still in alpha release and many patches will likely not work (for now). You can find the list of implemented objects ",(0,Qe.jsx)("a",{href:"https://github.com/sebpiq/WebPd/blob/main/ROADMAP.md",target:"_blank",rel:"noreferrer",children:"here"}),". If failure was caused by a missing feature, you can either"," ",(0,Qe.jsx)("a",{href:"https://opencollective.com/webpd",target:"_blank",rel:"noreferrer",children:"donate"})," ","to speed up its implementation, or you can directly"," ",(0,Qe.jsx)("a",{href:"https://github.com/sebpiq/WebPd/#contributing",target:"_blank",rel:"noreferrer",children:"contribute to development"}),". If, on the other hand, this looks like a bug, thanks for"," ",(0,Qe.jsx)("a",{href:"https://github.com/sebpiq/WebPd/#reporting-a-bug",target:"_blank",rel:"noreferrer",children:"reporting it here."})]});return(0,Qe.jsxs)(oO,{children:[(0,Qe.jsx)(nn,{children:"Compilation output :"}),(0,Qe.jsxs)(cO,{children:[r?n.map(((e,n)=>(0,Qe.jsxs)(sO,{children:["WARNING : ",e]},n))):null,t?e.map(((e,n)=>(0,Qe.jsxs)(lO,{children:["ERROR : ",e]},n))):null]}),t||r?(0,Qe.jsxs)(uO,{children:[t?"It seems like your compilation failed \ud83d\ude22.":"It seems like your compilation succeeded but with warnings \ud83d\ude05.",(0,Qe.jsx)("br",{}),a]}):null]})};var pO;const fO=Re(tn)(pO||(pO=r(["\n    text-align: center;\n"]))),hO=()=>(0,Qe.jsx)(fO,{children:(0,Qe.jsx)(en,{children:"\u2193 Online compiler \u2193"})});var mO,gO,yO,vO;const bO=Re(tn)(mO||(mO=r(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    & * {\n        font-size: 90%;\n    }\n    background: linear-gradient(\n        180deg,\n        "," 33%,\n        "," 60%,\n        rgba(0, 0, 0, 0) 100%\n    );\n    padding-bottom: calc("," * 2);\n"])),De.colors.bg2,De.colors.bg2,De.spacings.space2),wO=Re.div(gO||(gO=r(["\n    color: ",";\n    margin-right: 1em;\n"])),De.colors.fg2),SO=Re.div(yO||(yO=r(["\n    display: flex;\n    flex-direction: row;\n    @media (min-width: ","px) {\n        min-width: 10em;\n    }\n    @media (max-width: ","px) {\n        flex-direction: column;\n        min-width: 5em;\n    }\n"])),De.devices.mobile.maxWidth,De.devices.mobile.maxWidth),xO=Re.a(vO||(vO=r(["\n    text-align: right;\n    color: ",";\n\n    svg {\n        height: 1em;\n        width: 1em;\n        display: inline;\n        position: relative;\n        top: 0.2em;\n        margin-left: 0.5em;\n        path {\n            fill: ",";\n        }\n    }\n\n    @media (min-width: ","px) {\n        width: 10em;\n    }\n\n    @media (max-width: ","px) {\n        margin-bottom: ",";\n        &:last-child {\n            margin-bottom: 0;\n        }\n    }\n"])),De.colors.fg2,De.colors.fg2,De.devices.mobile.maxWidth,De.devices.mobile.maxWidth,De.spacings.space1),kO=()=>(0,Qe.jsxs)(bO,{children:[(0,Qe.jsx)(wO,{children:"WebPd is an open-source project released under the LGPL v3.0. Files uploaded on this web site are not stored on any server."}),(0,Qe.jsxs)(SO,{children:[(0,Qe.jsxs)(xO,{href:"https://github.com/sebpiq/WebPd",target:"_blank",rel:"noopener",children:["GitHub",(0,Qe.jsx)(FE,{viewBox:"0 0 97.627 96"})]}),(0,Qe.jsxs)(xO,{href:"https://opencollective.com/webpd",target:"_blank",rel:"noopener",children:["Donate",(0,Qe.jsx)(jE,{})]})]})]});var IO,_O;const AO=Re(tn)(IO||(IO=r([""]))),TO=Re.pre(_O||(_O=r(["\n    max-height: 25vh;\n    overflow: auto;\n"]))),EO=()=>{const e=oA(QT);return(0,Qe.jsxs)(AO,{children:[(0,Qe.jsx)(en,{children:"Debugging"}),e.pdJson?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)(nn,{children:["Pd JSON"," ",(0,Qe.jsx)(on,{onClick:()=>{En("debug.pd.json",JSON.stringify(e.pdJson,null,2),"application/json")},children:"Download"})]}),(0,Qe.jsx)(TO,{children:JSON.stringify(e.pdJson,null,2)})]}):null,e.dspGraph?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)(nn,{children:["DSP Graph"," ",(0,Qe.jsx)(on,{onClick:()=>{En("debug.dsp-graph.json",JSON.stringify(e.dspGraph,null,2),"application/json")},children:"Download"})]}),(0,Qe.jsx)(TO,{children:JSON.stringify(e.dspGraph,null,2)})]}):null,e.javascript?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)(nn,{children:["Compiled JS"," ",(0,Qe.jsx)(on,{onClick:()=>{En("debug.code.js",e.javascript,"application/javascript")},children:"Download"})]}),(0,Qe.jsx)(TO,{children:e.javascript})]}):null,e.assemblyscript?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)(nn,{children:["Compiled ASC"," ",(0,Qe.jsx)(on,{onClick:()=>{En("debug.code.asc",e.assemblyscript,"application/assemblyscript")},children:"Download"})]}),(0,Qe.jsx)(TO,{children:e.assemblyscript})]}):null]})};var OO,CO,NO,MO,PO;const FO=function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var i=be.apply(void 0,[n].concat(r)),o="sc-global-"+Ie(JSON.stringify(i)),s=new Fe(i,o);function l(n){var t=se(),r=le(),a=(0,e.useContext)(Ce),i=(0,e.useRef)(t.allocateGSInstance(o)).current;return t.server&&c(i,n,t,a,r),(0,e.useLayoutEffect)((function(){if(!t.server)return c(i,n,t,a,r),function(){return s.removeStyles(i,t)}}),[i,n,t,a,r]),null}function c(e,n,t,r,a){if(s.isStatic)s.renderStyles(e,_,t,a);else{var i=h({},n,{theme:we(n,r,l.defaultProps)});s.renderStyles(e,i,t,a)}}return e.memo(l)}(OO||(OO=r(["\n    @font-face {\n        font-family: 'Rajdhani';\n        src: local('Rajdhani'),\n            url('./fonts/Rajdhani/Rajdhani-Medium.ttf') format('woff');\n    }\n\n    @font-face {\n        font-family: 'Silkscreen';\n        src: local('Silkscreen'),\n            url('./fonts/Silkscreen/Silkscreen-Regular.ttf') format('woff');\n    }\n\n    body, html {\n        padding: 0;\n        margin: 0;\n        background-color: ",";\n    }\n\n    * { \n        box-sizing: border-box;\n        /* To enable flex items shrink : https://stackoverflow.com/questions/36247140/why-dont-flex-items-shrink-past-content-size */\n        min-width: 0; \n        min-height: 0;\n        font-size: ","px;\n        @media (max-width: ","px) {\n            font-size: ","px;\n        }\n        font-family: ",";\n        color: ",";\n        scrollbar-width: thin;\n        &::-webkit-scrollbar {\n            width: calc("," / 4);\n            height: calc("," / 4);\n        }\n        &::-webkit-scrollbar-track {\n            background: transparent;\n        }\n        &::-webkit-scrollbar-thumb {\n            background-color: ",";\n            border-radius: 20px;\n        }\n    }\n\n    input {\n        background-color: ",";\n        border: none;\n        font-size: 100%;\n    }\n\n    textarea:focus, input:focus{\n        outline: "," solid 1px;\n    }\n"])),De.colors.bg1,De.devices.desktop.fontSize,De.devices.mobile.maxWidth,De.devices.mobile.fontSize,De.fonts.default,De.colors.fg1,De.spacings.space1,De.spacings.space1,De.colors.fg2,De.colors.bg2,De.colors.fg2),RO=Re.div(CO||(CO=r(["\n    display: flex;\n    flex-direction: column;\n    min-height: 100vh;\n    & > *:last-child {\n        flex: auto;\n    }\n"]))),LO=Re.div(NO||(NO=r(["\n    position: relative;\n"]))),DO=Re.div(MO||(MO=r(["\n    margin: auto;\n    width: 100%;\n    position: absolute;\n    height: 100%;\n    z-index: 3;\n"]))),jO=Re((e=>{let{text:n,className:t}=e;return(0,Qe.jsx)(bn,{className:t,children:n})}))(PO||(PO=r(["\n    max-width: ",";\n    width: 100%;\n    margin: 0 auto;\n    height: 100%;\n    z-index: ",";\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: ","ee;\n    font-size: 200%;\n"])),De.dimensions.maxContentWidth,De.zIndexes.spinner,De.colors.bg2),zO=()=>{const e=oA($_),n=oA(eE)===xx,t=oA(G_);return e?(0,Qe.jsxs)(RO,{children:[(0,Qe.jsx)(eO,{}),(0,Qe.jsx)(hO,{}),(0,Qe.jsxs)(LO,{children:[n?(0,Qe.jsx)(DO,{children:(0,Qe.jsx)(jO,{text:"building..."})}):null,(0,Qe.jsx)(LT,{}),(0,Qe.jsx)(_E,{}),t?(0,Qe.jsx)(EO,{}):null,(0,Qe.jsx)(dO,{})]}),(0,Qe.jsx)(kO,{})]}):(0,Qe.jsx)(Qe.Fragment,{children:(0,Qe.jsx)(eO,{})})},BO=()=>(0,Qe.jsxs)(Fa,{store:aA,children:[(0,Qe.jsx)(FO,{}),(0,Qe.jsx)(zO,{})]}),UO=e=>{e&&e instanceof Function&&t.e(453).then(t.bind(t,453)).then((n=>{let{getCLS:t,getFID:r,getFCP:a,getLCP:i,getTTFB:o}=n;t(e),r(e),a(e),i(e),o(e)}))};n.createRoot(document.getElementById("root")).render((0,Qe.jsx)(BO,{})),UO()})()})();
//# sourceMappingURL=main.8f08e819.js.map