/*! For license information please see main.fcd86f13.js.LICENSE.txt */
(()=>{var e={936:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>a});var r={};try{!function(e,n){if(new e("q=%2B").get("q")!==n||new e({q:n}).get("q")!==n||new e([["q",n]]).get("q")!==n||"q=%0A"!==new e("q=\n").toString()||"q=+%26"!==new e({q:" &"}).toString()||"q=%25zx"!==new e({q:"%zx"}).toString())throw e;r.URLSearchParams=e}(URLSearchParams,"+")}catch(URLSearchParams){!function(e,n,t){var a=e.create,s=e.defineProperty,o=/[!'\(\)~]|%20|%00/g,i=/%(?![0-9a-fA-F]{2})/g,l=/\+/g,u={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},c={append:function(e,n){h(this._ungap,e,n)},delete:function(e){delete this._ungap[e]},get:function(e){return this.has(e)?this._ungap[e][0]:null},getAll:function(e){return this.has(e)?this._ungap[e].slice(0):[]},has:function(e){return e in this._ungap},set:function(e,t){this._ungap[e]=[n(t)]},forEach:function(e,t){var r=this;for(var a in r._ungap)r._ungap[a].forEach(s,a);function s(s){e.call(t,s,n(a),r)}},toJSON:function(){return{}},toString:function(){var e=[];for(var n in this._ungap)for(var t=g(n),r=0,a=this._ungap[n];r<a.length;r++)e.push(t+"="+g(a[r]));return e.join("&")}};for(var d in c)s(f.prototype,d,{configurable:!0,writable:!0,value:c[d]});function f(e){var n=a(null);switch(s(this,"_ungap",{value:n}),!0){case!e:break;case"string"===typeof e:"?"===e.charAt(0)&&(e=e.slice(1));for(var r=e.split("&"),o=0,i=r.length;o<i;o++){var l=(u=r[o]).indexOf("=");-1<l?h(n,m(u.slice(0,l)),m(u.slice(l+1))):u.length&&h(n,m(u),"")}break;case t(e):for(o=0,i=e.length;o<i;o++){var u;h(n,(u=e[o])[0],u[1])}break;case"forEach"in e:e.forEach(p,n);break;default:for(var c in e)h(n,c,e[c])}}function p(e,n){h(this,n,e)}function h(e,n,r){var a=t(r)?r.join(","):r;n in e?e[n].push(a):e[n]=[a]}function m(e){return decodeURIComponent(e.replace(i,"%25").replace(l," "))}function g(e){return encodeURIComponent(e).replace(o,y)}function y(e){return u[e]}r.URLSearchParams=f}(Object,String,Array.isArray)}!function(e){var n=!1;try{n=!!Symbol.iterator}catch(r){}function t(e,t){var r=[];return e.forEach(t,r),n?r[Symbol.iterator]():{next:function(){var e=r.shift();return{done:void 0===e,value:e}}}}"forEach"in e||(e.forEach=function(e,n){var t=this,r=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach((function(a){a.length&&!(a in r)&&(r[a]=t.getAll(a)).forEach((function(r){e.call(n,r,a,t)}))}))}),"keys"in e||(e.keys=function(){return t(this,(function(e,n){this.push(n)}))}),"values"in e||(e.values=function(){return t(this,(function(e,n){this.push(e)}))}),"entries"in e||(e.entries=function(){return t(this,(function(e,n){this.push([n,e])}))}),n&&!(Symbol.iterator in e)&&(e[Symbol.iterator]=e.entries),"sort"in e||(e.sort=function(){for(var e,n,t,r=this.entries(),a=r.next(),s=a.done,o=[],i=Object.create(null);!s;)n=(t=a.value)[0],o.push(n),n in i||(i[n]=[]),i[n].push(t[1]),s=(a=r.next()).done;for(o.sort(),e=0;e<o.length;e++)this.delete(o[e]);for(e=0;e<o.length;e++)n=o[e],this.append(n,i[n].shift())}),function(n){var t=n.defineProperty,r=n.getOwnPropertyDescriptor,a=function(n){var t=n.append;n.append=e.append,URLSearchParams.call(n,n._usp.search.slice(1)),n.append=t},s=function(e,n){if(!(e instanceof n))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+n.name)},o=function(o){var i,l,u=o.prototype,c=r(u,"searchParams"),d=r(u,"href"),f=r(u,"search");!c&&f&&f.set&&(l=function(n){function r(t,r){e.append.call(this,t,r),t=this.toString(),n.set.call(this._usp,t?"?"+t:"")}function a(t){e.delete.call(this,t),t=this.toString(),n.set.call(this._usp,t?"?"+t:"")}function s(t,r){e.set.call(this,t,r),t=this.toString(),n.set.call(this._usp,t?"?"+t:"")}return function(e,n){return e.append=r,e.delete=a,e.set=s,t(e,"_usp",{configurable:!0,writable:!0,value:n})}}(f),i=function(e,n){return t(e,"_searchParams",{configurable:!0,writable:!0,value:l(n,e)}),n},n.defineProperties(u,{href:{get:function(){return d.get.call(this)},set:function(e){var n=this._searchParams;d.set.call(this,e),n&&a(n)}},search:{get:function(){return f.get.call(this)},set:function(e){var n=this._searchParams;f.set.call(this,e),n&&a(n)}},searchParams:{get:function(){return s(this,o),this._searchParams||i(this,new URLSearchParams(this.search.slice(1)))},set:function(e){s(this,o),i(this,e)}}}))};try{o(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&o(URL)}catch(i){}}(Object)}(r.URLSearchParams.prototype);const a=r.URLSearchParams},998:(e,n)=>{"use strict";n.Z=function(e,n){if(e&&n){var t=Array.isArray(n)?n:n.split(","),r=e.name||"",a=(e.type||"").toLowerCase(),s=a.replace(/\/.*$/,"");return t.some((function(e){var n=e.trim().toLowerCase();return"."===n.charAt(0)?r.toLowerCase().endsWith(n):n.endsWith("/*")?s===n.replace(/\/.*$/,""):a===n}))}return!0}},588:(e,n,t)=>{"use strict";t.r(n),t.d(n,{createBrowserHistory:()=>x,createHashHistory:()=>F,createLocation:()=>b,createMemoryHistory:()=>N,createPath:()=>y,locationsAreEqual:()=>v,parsePath:()=>g});var r=t(462);function a(e){return"/"===e.charAt(0)}function s(e,n){for(var t=n,r=t+1,a=e.length;r<a;t+=1,r+=1)e[t]=e[r];e.pop()}const o=function(e,n){void 0===n&&(n="");var t,r=e&&e.split("/")||[],o=n&&n.split("/")||[],i=e&&a(e),l=n&&a(n),u=i||l;if(e&&a(e)?o=r:r.length&&(o.pop(),o=o.concat(r)),!o.length)return"/";if(o.length){var c=o[o.length-1];t="."===c||".."===c||""===c}else t=!1;for(var d=0,f=o.length;f>=0;f--){var p=o[f];"."===p?s(o,f):".."===p?(s(o,f),d++):d&&(s(o,f),d--)}if(!u)for(;d--;d)o.unshift("..");!u||""===o[0]||o[0]&&a(o[0])||o.unshift("");var h=o.join("/");return t&&"/"!==h.substr(-1)&&(h+="/"),h};function i(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}const l=function e(n,t){if(n===t)return!0;if(null==n||null==t)return!1;if(Array.isArray(n))return Array.isArray(t)&&n.length===t.length&&n.every((function(n,r){return e(n,t[r])}));if("object"===typeof n||"object"===typeof t){var r=i(n),a=i(t);return r!==n||a!==t?e(r,a):Object.keys(Object.assign({},n,t)).every((function(r){return e(n[r],t[r])}))}return!1};var u=!0,c="Invariant failed";function d(e,n){if(!e){if(u)throw new Error(c);var t="function"===typeof n?n():n,r=t?"".concat(c,": ").concat(t):c;throw new Error(r)}}function f(e){return"/"===e.charAt(0)?e:"/"+e}function p(e){return"/"===e.charAt(0)?e.substr(1):e}function h(e,n){return function(e,n){return 0===e.toLowerCase().indexOf(n.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(n.length))}(e,n)?e.substr(n.length):e}function m(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function g(e){var n=e||"/",t="",r="",a=n.indexOf("#");-1!==a&&(r=n.substr(a),n=n.substr(0,a));var s=n.indexOf("?");return-1!==s&&(t=n.substr(s),n=n.substr(0,s)),{pathname:n,search:"?"===t?"":t,hash:"#"===r?"":r}}function y(e){var n=e.pathname,t=e.search,r=e.hash,a=n||"/";return t&&"?"!==t&&(a+="?"===t.charAt(0)?t:"?"+t),r&&"#"!==r&&(a+="#"===r.charAt(0)?r:"#"+r),a}function b(e,n,t,a){var s;"string"===typeof e?(s=g(e)).state=n:(void 0===(s=(0,r.Z)({},e)).pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search="?"+s.search):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash="#"+s.hash):s.hash="",void 0!==n&&void 0===s.state&&(s.state=n));try{s.pathname=decodeURI(s.pathname)}catch(i){throw i instanceof URIError?new URIError('Pathname "'+s.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):i}return t&&(s.key=t),a?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=o(s.pathname,a.pathname)):s.pathname=a.pathname:s.pathname||(s.pathname="/"),s}function v(e,n){return e.pathname===n.pathname&&e.search===n.search&&e.hash===n.hash&&e.key===n.key&&l(e.state,n.state)}function _(){var e=null;var n=[];return{setPrompt:function(n){return e=n,function(){e===n&&(e=null)}},confirmTransitionTo:function(n,t,r,a){if(null!=e){var s="function"===typeof e?e(n,t):e;"string"===typeof s?"function"===typeof r?r(s,a):a(!0):a(!1!==s)}else a(!0)},appendListener:function(e){var t=!0;function r(){t&&e.apply(void 0,arguments)}return n.push(r),function(){t=!1,n=n.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.forEach((function(e){return e.apply(void 0,t)}))}}}var S=!("undefined"===typeof window||!window.document||!window.document.createElement);function w(e,n){n(window.confirm(e))}var k="popstate",I="hashchange";function T(){try{return window.history.state||{}}catch(e){return{}}}function x(e){void 0===e&&(e={}),S||d(!1);var n=window.history,t=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),a=!(-1===window.navigator.userAgent.indexOf("Trident")),s=e,o=s.forceRefresh,i=void 0!==o&&o,l=s.getUserConfirmation,u=void 0===l?w:l,c=s.keyLength,p=void 0===c?6:c,g=e.basename?m(f(e.basename)):"";function v(e){var n=e||{},t=n.key,r=n.state,a=window.location,s=a.pathname+a.search+a.hash;return g&&(s=h(s,g)),b(s,r,t)}function x(){return Math.random().toString(36).substr(2,p)}var A=_();function E(e){(0,r.Z)(j,e),j.length=n.length,A.notifyListeners(j.location,j.action)}function O(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||F(v(e.state))}function C(){F(v(T()))}var M=!1;function F(e){if(M)M=!1,E();else{A.confirmTransitionTo(e,"POP",u,(function(n){n?E({action:"POP",location:e}):function(e){var n=j.location,t=N.indexOf(n.key);-1===t&&(t=0);var r=N.indexOf(e.key);-1===r&&(r=0);var a=t-r;a&&(M=!0,L(a))}(e)}))}}var P=v(T()),N=[P.key];function R(e){return g+y(e)}function L(e){n.go(e)}var D=0;function z(e){1===(D+=e)&&1===e?(window.addEventListener(k,O),a&&window.addEventListener(I,C)):0===D&&(window.removeEventListener(k,O),a&&window.removeEventListener(I,C))}var U=!1;var j={length:n.length,action:"POP",location:P,createHref:R,push:function(e,r){var a="PUSH",s=b(e,r,x(),j.location);A.confirmTransitionTo(s,a,u,(function(e){if(e){var r=R(s),o=s.key,l=s.state;if(t)if(n.pushState({key:o,state:l},null,r),i)window.location.href=r;else{var u=N.indexOf(j.location.key),c=N.slice(0,u+1);c.push(s.key),N=c,E({action:a,location:s})}else window.location.href=r}}))},replace:function(e,r){var a="REPLACE",s=b(e,r,x(),j.location);A.confirmTransitionTo(s,a,u,(function(e){if(e){var r=R(s),o=s.key,l=s.state;if(t)if(n.replaceState({key:o,state:l},null,r),i)window.location.replace(r);else{var u=N.indexOf(j.location.key);-1!==u&&(N[u]=s.key),E({action:a,location:s})}else window.location.replace(r)}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var n=A.setPrompt(e);return U||(z(1),U=!0),function(){return U&&(U=!1,z(-1)),n()}},listen:function(e){var n=A.appendListener(e);return z(1),function(){z(-1),n()}}};return j}var A="hashchange",E={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+p(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:p,decodePath:f},slash:{encodePath:f,decodePath:f}};function O(e){var n=e.indexOf("#");return-1===n?e:e.slice(0,n)}function C(){var e=window.location.href,n=e.indexOf("#");return-1===n?"":e.substring(n+1)}function M(e){window.location.replace(O(window.location.href)+"#"+e)}function F(e){void 0===e&&(e={}),S||d(!1);var n=window.history,t=(window.navigator.userAgent.indexOf("Firefox"),e),a=t.getUserConfirmation,s=void 0===a?w:a,o=t.hashType,i=void 0===o?"slash":o,l=e.basename?m(f(e.basename)):"",u=E[i],c=u.encodePath,p=u.decodePath;function g(){var e=p(C());return l&&(e=h(e,l)),b(e)}var v=_();function k(e){(0,r.Z)(j,e),j.length=n.length,v.notifyListeners(j.location,j.action)}var I=!1,T=null;function x(){var e,n,t=C(),r=c(t);if(t!==r)M(r);else{var a=g(),o=j.location;if(!I&&(n=a,(e=o).pathname===n.pathname&&e.search===n.search&&e.hash===n.hash))return;if(T===y(a))return;T=null,function(e){if(I)I=!1,k();else{var n="POP";v.confirmTransitionTo(e,n,s,(function(t){t?k({action:n,location:e}):function(e){var n=j.location,t=R.lastIndexOf(y(n));-1===t&&(t=0);var r=R.lastIndexOf(y(e));-1===r&&(r=0);var a=t-r;a&&(I=!0,L(a))}(e)}))}}(a)}}var F=C(),P=c(F);F!==P&&M(P);var N=g(),R=[y(N)];function L(e){n.go(e)}var D=0;function z(e){1===(D+=e)&&1===e?window.addEventListener(A,x):0===D&&window.removeEventListener(A,x)}var U=!1;var j={length:n.length,action:"POP",location:N,createHref:function(e){var n=document.querySelector("base"),t="";return n&&n.getAttribute("href")&&(t=O(window.location.href)),t+"#"+c(l+y(e))},push:function(e,n){var t="PUSH",r=b(e,void 0,void 0,j.location);v.confirmTransitionTo(r,t,s,(function(e){if(e){var n=y(r),a=c(l+n);if(C()!==a){T=n,function(e){window.location.hash=e}(a);var s=R.lastIndexOf(y(j.location)),o=R.slice(0,s+1);o.push(n),R=o,k({action:t,location:r})}else k()}}))},replace:function(e,n){var t="REPLACE",r=b(e,void 0,void 0,j.location);v.confirmTransitionTo(r,t,s,(function(e){if(e){var n=y(r),a=c(l+n);C()!==a&&(T=n,M(a));var s=R.indexOf(y(j.location));-1!==s&&(R[s]=n),k({action:t,location:r})}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var n=v.setPrompt(e);return U||(z(1),U=!0),function(){return U&&(U=!1,z(-1)),n()}},listen:function(e){var n=v.appendListener(e);return z(1),function(){z(-1),n()}}};return j}function P(e,n,t){return Math.min(Math.max(e,n),t)}function N(e){void 0===e&&(e={});var n=e,t=n.getUserConfirmation,a=n.initialEntries,s=void 0===a?["/"]:a,o=n.initialIndex,i=void 0===o?0:o,l=n.keyLength,u=void 0===l?6:l,c=_();function d(e){(0,r.Z)(v,e),v.length=v.entries.length,c.notifyListeners(v.location,v.action)}function f(){return Math.random().toString(36).substr(2,u)}var p=P(i,0,s.length-1),h=s.map((function(e){return b(e,void 0,"string"===typeof e?f():e.key||f())})),m=y;function g(e){var n=P(v.index+e,0,v.entries.length-1),r=v.entries[n];c.confirmTransitionTo(r,"POP",t,(function(e){e?d({action:"POP",location:r,index:n}):d()}))}var v={length:h.length,action:"POP",location:h[p],index:p,entries:h,createHref:m,push:function(e,n){var r="PUSH",a=b(e,n,f(),v.location);c.confirmTransitionTo(a,r,t,(function(e){if(e){var n=v.index+1,t=v.entries.slice(0);t.length>n?t.splice(n,t.length-n,a):t.push(a),d({action:r,location:a,index:n,entries:t})}}))},replace:function(e,n){var r="REPLACE",a=b(e,n,f(),v.location);c.confirmTransitionTo(a,r,t,(function(e){e&&(v.entries[v.index]=a,d({action:r,location:a}))}))},go:g,goBack:function(){g(-1)},goForward:function(){g(1)},canGo:function(e){var n=v.index+e;return n>=0&&n<v.entries.length},block:function(e){return void 0===e&&(e=!1),c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return v}},110:(e,n,t)=>{"use strict";var r=t(309),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};function l(e){return r.isMemo(e)?o:i[e.$$typeof]||a}i[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},i[r.Memo]=o;var u=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(n,t,r){if("string"!==typeof t){if(h){var a=p(t);a&&a!==h&&e(n,a,r)}var o=c(t);d&&(o=o.concat(d(t)));for(var i=l(n),m=l(t),g=0;g<o.length;++g){var y=o[g];if(!s[y]&&(!r||!r[y])&&(!m||!m[y])&&(!i||!i[y])){var b=f(t,y);try{u(n,y,b)}catch(v){}}}}return n}},746:(e,n)=>{"use strict";var t="function"===typeof Symbol&&Symbol.for,r=t?Symbol.for("react.element"):60103,a=t?Symbol.for("react.portal"):60106,s=t?Symbol.for("react.fragment"):60107,o=t?Symbol.for("react.strict_mode"):60108,i=t?Symbol.for("react.profiler"):60114,l=t?Symbol.for("react.provider"):60109,u=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,f=t?Symbol.for("react.forward_ref"):60112,p=t?Symbol.for("react.suspense"):60113,h=t?Symbol.for("react.suspense_list"):60120,m=t?Symbol.for("react.memo"):60115,g=t?Symbol.for("react.lazy"):60116,y=t?Symbol.for("react.block"):60121,b=t?Symbol.for("react.fundamental"):60117,v=t?Symbol.for("react.responder"):60118,_=t?Symbol.for("react.scope"):60119;function S(e){if("object"===typeof e&&null!==e){var n=e.$$typeof;switch(n){case r:switch(e=e.type){case c:case d:case s:case i:case o:case p:return e;default:switch(e=e&&e.$$typeof){case u:case f:case g:case m:case l:return e;default:return n}}case a:return n}}}function w(e){return S(e)===d}n.AsyncMode=c,n.ConcurrentMode=d,n.ContextConsumer=u,n.ContextProvider=l,n.Element=r,n.ForwardRef=f,n.Fragment=s,n.Lazy=g,n.Memo=m,n.Portal=a,n.Profiler=i,n.StrictMode=o,n.Suspense=p,n.isAsyncMode=function(e){return w(e)||S(e)===c},n.isConcurrentMode=w,n.isContextConsumer=function(e){return S(e)===u},n.isContextProvider=function(e){return S(e)===l},n.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},n.isForwardRef=function(e){return S(e)===f},n.isFragment=function(e){return S(e)===s},n.isLazy=function(e){return S(e)===g},n.isMemo=function(e){return S(e)===m},n.isPortal=function(e){return S(e)===a},n.isProfiler=function(e){return S(e)===i},n.isStrictMode=function(e){return S(e)===o},n.isSuspense=function(e){return S(e)===p},n.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===d||e===i||e===o||e===p||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===u||e.$$typeof===f||e.$$typeof===b||e.$$typeof===v||e.$$typeof===_||e.$$typeof===y)},n.typeOf=S},309:(e,n,t)=>{"use strict";e.exports=t(746)},481:e=>{"use strict";e.exports=function(e,n){return n||(n={}),e?(e=String(e.__esModule?e.default:e),n.hash&&(e+=n.hash),n.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},587:(e,n,t)=>{e.exports=function e(n,t,r){function a(o,i){if(!t[o]){if(!n[o]){if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=t[o]={exports:{}};n[o][0].call(u.exports,(function(e){return a(n[o][1][e]||e)}),u,u.exports,e,n,t,r)}return t[o].exports}for(var s=void 0,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,n,t){"use strict";var r=e("./utils"),a=e("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(e){for(var n,t,a,o,i,l,u,c=[],d=0,f=e.length,p=f,h="string"!==r.getTypeOf(e);d<e.length;)p=f-d,a=h?(n=e[d++],t=d<f?e[d++]:0,d<f?e[d++]:0):(n=e.charCodeAt(d++),t=d<f?e.charCodeAt(d++):0,d<f?e.charCodeAt(d++):0),o=n>>2,i=(3&n)<<4|t>>4,l=1<p?(15&t)<<2|a>>6:64,u=2<p?63&a:64,c.push(s.charAt(o)+s.charAt(i)+s.charAt(l)+s.charAt(u));return c.join("")},t.decode=function(e){var n,t,r,o,i,l,u=0,c=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var f,p=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===s.charAt(64)&&p--,e.charAt(e.length-2)===s.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(f=a.uint8array?new Uint8Array(0|p):new Array(0|p);u<e.length;)n=s.indexOf(e.charAt(u++))<<2|(o=s.indexOf(e.charAt(u++)))>>4,t=(15&o)<<4|(i=s.indexOf(e.charAt(u++)))>>2,r=(3&i)<<6|(l=s.indexOf(e.charAt(u++))),f[c++]=n,64!==i&&(f[c++]=t),64!==l&&(f[c++]=r);return f}},{"./support":30,"./utils":32}],2:[function(e,n,t){"use strict";var r=e("./external"),a=e("./stream/DataWorker"),s=e("./stream/Crc32Probe"),o=e("./stream/DataLengthProbe");function i(e,n,t,r,a){this.compressedSize=e,this.uncompressedSize=n,this.crc32=t,this.compression=r,this.compressedContent=a}i.prototype={getContentWorker:function(){var e=new a(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),n=this;return e.on("end",(function(){if(this.streamInfo.data_length!==n.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new a(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},i.createWorkerFrom=function(e,n,t){return e.pipe(new s).pipe(new o("uncompressedSize")).pipe(n.compressWorker(t)).pipe(new o("compressedSize")).withStreamInfo("compression",n)},n.exports=i},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,n,t){"use strict";var r=e("./stream/GenericWorker");t.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},t.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,n,t){"use strict";var r=e("./utils"),a=function(){for(var e,n=[],t=0;t<256;t++){e=t;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;n[t]=e}return n}();n.exports=function(e,n){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,n,t,r){var s=a,o=r+t;e^=-1;for(var i=r;i<o;i++)e=e>>>8^s[255&(e^n[i])];return-1^e}(0|n,e,e.length,0):function(e,n,t,r){var s=a,o=r+t;e^=-1;for(var i=r;i<o;i++)e=e>>>8^s[255&(e^n.charCodeAt(i))];return-1^e}(0|n,e,e.length,0):0}},{"./utils":32}],5:[function(e,n,t){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},{}],6:[function(e,n,t){"use strict";var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),n.exports={Promise:r}},{lie:37}],7:[function(e,n,t){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,a=e("pako"),s=e("./utils"),o=e("./stream/GenericWorker"),i=r?"uint8array":"array";function l(e,n){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=n,this.meta={}}t.magic="\b\0",s.inherits(l,o),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(i,e.data),!1)},l.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(n){e.push({data:n,meta:e.meta})}},t.compressWorker=function(e){return new l("Deflate",e)},t.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,n,t){"use strict";function r(e,n){var t,r="";for(t=0;t<n;t++)r+=String.fromCharCode(255&e),e>>>=8;return r}function a(e,n,t,a,o,c){var d,f,p=e.file,h=e.compression,m=c!==i.utf8encode,g=s.transformTo("string",c(p.name)),y=s.transformTo("string",i.utf8encode(p.name)),b=p.comment,v=s.transformTo("string",c(b)),_=s.transformTo("string",i.utf8encode(b)),S=y.length!==p.name.length,w=_.length!==b.length,k="",I="",T="",x=p.dir,A=p.date,E={crc32:0,compressedSize:0,uncompressedSize:0};n&&!t||(E.crc32=e.crc32,E.compressedSize=e.compressedSize,E.uncompressedSize=e.uncompressedSize);var O=0;n&&(O|=8),m||!S&&!w||(O|=2048);var C=0,M=0;x&&(C|=16),"UNIX"===o?(M=798,C|=function(e,n){var t=e;return e||(t=n?16893:33204),(65535&t)<<16}(p.unixPermissions,x)):(M=20,C|=function(e){return 63&(e||0)}(p.dosPermissions)),d=A.getUTCHours(),d<<=6,d|=A.getUTCMinutes(),d<<=5,d|=A.getUTCSeconds()/2,f=A.getUTCFullYear()-1980,f<<=4,f|=A.getUTCMonth()+1,f<<=5,f|=A.getUTCDate(),S&&(I=r(1,1)+r(l(g),4)+y,k+="up"+r(I.length,2)+I),w&&(T=r(1,1)+r(l(v),4)+_,k+="uc"+r(T.length,2)+T);var F="";return F+="\n\0",F+=r(O,2),F+=h.magic,F+=r(d,2),F+=r(f,2),F+=r(E.crc32,4),F+=r(E.compressedSize,4),F+=r(E.uncompressedSize,4),F+=r(g.length,2),F+=r(k.length,2),{fileRecord:u.LOCAL_FILE_HEADER+F+g+k,dirRecord:u.CENTRAL_FILE_HEADER+r(M,2)+F+r(v.length,2)+"\0\0\0\0"+r(C,4)+r(a,4)+g+k+v}}var s=e("../utils"),o=e("../stream/GenericWorker"),i=e("../utf8"),l=e("../crc32"),u=e("../signature");function c(e,n,t,r){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=n,this.zipPlatform=t,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(c,o),c.prototype.push=function(e){var n=e.meta.percent||0,t=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:t?(n+100*(t-r-1))/t:100}}))},c.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var n=this.streamFiles&&!e.file.dir;if(n){var t=a(e,n,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:t.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(e){this.accumulate=!1;var n=this.streamFiles&&!e.file.dir,t=a(e,n,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(t.dirRecord),n)this.push({data:function(e){return u.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:t.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var e=this.bytesWritten,n=0;n<this.dirRecords.length;n++)this.push({data:this.dirRecords[n],meta:{percent:100}});var t=this.bytesWritten-e,a=function(e,n,t,a,o){var i=s.transformTo("string",o(a));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(n,4)+r(t,4)+r(i.length,2)+i}(this.dirRecords.length,t,e,this.zipComment,this.encodeFileName);this.push({data:a,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(e){this._sources.push(e);var n=this;return e.on("data",(function(e){n.processChunk(e)})),e.on("end",(function(){n.closedSource(n.previous.streamInfo),n._sources.length?n.prepareNextSource():n.end()})),e.on("error",(function(e){n.error(e)})),this},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(e){var n=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var t=0;t<n.length;t++)try{n[t].error(e)}catch(e){}return!0},c.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,n=0;n<e.length;n++)e[n].lock()},n.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,n,t){"use strict";var r=e("../compressions"),a=e("./ZipFileWorker");t.generateWorker=function(e,n,t){var s=new a(n.streamFiles,t,n.platform,n.encodeFileName),o=0;try{e.forEach((function(e,t){o++;var a=function(e,n){var t=e||n,a=r[t];if(!a)throw new Error(t+" is not a valid compression method !");return a}(t.options.compression,n.compression),i=t.options.compressionOptions||n.compressionOptions||{},l=t.dir,u=t.date;t._compressWorker(a,i).withStreamInfo("file",{name:e,dir:l,date:u,comment:t.comment||"",unixPermissions:t.unixPermissions,dosPermissions:t.dosPermissions}).pipe(s)})),s.entriesCount=o}catch(e){s.error(e)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,n,t){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var n in this)"function"!=typeof this[n]&&(e[n]=this[n]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,n){return(new r).loadAsync(e,n)},r.external=e("./external"),n.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,n,t){"use strict";var r=e("./utils"),a=e("./external"),s=e("./utf8"),o=e("./zipEntries"),i=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function u(e){return new a.Promise((function(n,t){var r=e.decompressed.getContentWorker().pipe(new i);r.on("error",(function(e){t(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?t(new Error("Corrupted zip : CRC32 mismatch")):n()})).resume()}))}n.exports=function(e,n){var t=this;return n=r.extend(n||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),l.isNode&&l.isStream(e)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,n.optimizedBinaryString,n.base64).then((function(e){var t=new o(n);return t.load(e),t})).then((function(e){var t=[a.Promise.resolve(e)],r=e.files;if(n.checkCRC32)for(var s=0;s<r.length;s++)t.push(u(r[s]));return a.Promise.all(t)})).then((function(e){for(var a=e.shift(),s=a.files,o=0;o<s.length;o++){var i=s[o],l=i.fileNameStr,u=r.resolve(i.fileNameStr);t.file(u,i.decompressed,{binary:!0,optimizedBinaryString:!0,date:i.date,dir:i.dir,comment:i.fileCommentStr.length?i.fileCommentStr:null,unixPermissions:i.unixPermissions,dosPermissions:i.dosPermissions,createFolders:n.createFolders}),i.dir||(t.file(u).unsafeOriginalName=l)}return a.zipComment.length&&(t.comment=a.zipComment),t}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,n,t){"use strict";var r=e("../utils"),a=e("../stream/GenericWorker");function s(e,n){a.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(n)}r.inherits(s,a),s.prototype._bindStream=function(e){var n=this;(this._stream=e).pause(),e.on("data",(function(e){n.push({data:e,meta:{percent:0}})})).on("error",(function(e){n.isPaused?this.generatedError=e:n.error(e)})).on("end",(function(){n.isPaused?n._upstreamEnded=!0:n.end()}))},s.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,n,t){"use strict";var r=e("readable-stream").Readable;function a(e,n,t){r.call(this,n),this._helper=e;var a=this;e.on("data",(function(e,n){a.push(e)||a._helper.pause(),t&&t(n)})).on("error",(function(e){a.emit("error",e)})).on("end",(function(){a.push(null)}))}e("../utils").inherits(a,r),a.prototype._read=function(){this._helper.resume()},n.exports=a},{"../utils":32,"readable-stream":16}],14:[function(e,n,t){"use strict";n.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,n){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,n);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,n)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var n=new Buffer(e);return n.fill(0),n},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,n,t){"use strict";function r(e,n,t){var r,a=s.getTypeOf(n),i=s.extend(t||{},l);i.date=i.date||new Date,null!==i.compression&&(i.compression=i.compression.toUpperCase()),"string"==typeof i.unixPermissions&&(i.unixPermissions=parseInt(i.unixPermissions,8)),i.unixPermissions&&16384&i.unixPermissions&&(i.dir=!0),i.dosPermissions&&16&i.dosPermissions&&(i.dir=!0),i.dir&&(e=m(e)),i.createFolders&&(r=h(e))&&g.call(this,r,!0);var d="string"===a&&!1===i.binary&&!1===i.base64;t&&void 0!==t.binary||(i.binary=!d),(n instanceof u&&0===n.uncompressedSize||i.dir||!n||0===n.length)&&(i.base64=!1,i.binary=!0,n="",i.compression="STORE",a="string");var y=null;y=n instanceof u||n instanceof o?n:f.isNode&&f.isStream(n)?new p(e,n):s.prepareContent(e,n,i.binary,i.optimizedBinaryString,i.base64);var b=new c(e,y,i);this.files[e]=b}var a=e("./utf8"),s=e("./utils"),o=e("./stream/GenericWorker"),i=e("./stream/StreamHelper"),l=e("./defaults"),u=e("./compressedObject"),c=e("./zipObject"),d=e("./generate"),f=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),h=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var n=e.lastIndexOf("/");return 0<n?e.substring(0,n):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,n){return n=void 0!==n?n:l.createFolders,e=m(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:n}),this.files[e]};function y(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var n,t,r;for(n in this.files)r=this.files[n],(t=n.slice(this.root.length,n.length))&&n.slice(0,this.root.length)===this.root&&e(t,r)},filter:function(e){var n=[];return this.forEach((function(t,r){e(t,r)&&n.push(r)})),n},file:function(e,n,t){if(1!==arguments.length)return e=this.root+e,r.call(this,e,n,t),this;if(y(e)){var a=e;return this.filter((function(e,n){return!n.dir&&a.test(e)}))}var s=this.files[this.root+e];return s&&!s.dir?s:null},folder:function(e){if(!e)return this;if(y(e))return this.filter((function(n,t){return t.dir&&e.test(n)}));var n=this.root+e,t=g.call(this,n),r=this.clone();return r.root=t.name,r},remove:function(e){e=this.root+e;var n=this.files[e];if(n||("/"!==e.slice(-1)&&(e+="/"),n=this.files[e]),n&&!n.dir)delete this.files[e];else for(var t=this.filter((function(n,t){return t.name.slice(0,e.length)===e})),r=0;r<t.length;r++)delete this.files[t[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var n,t={};try{if((t=s.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=t.type.toLowerCase(),t.compression=t.compression.toUpperCase(),"binarystring"===t.type&&(t.type="string"),!t.type)throw new Error("No output type specified.");s.checkSupport(t.type),"darwin"!==t.platform&&"freebsd"!==t.platform&&"linux"!==t.platform&&"sunos"!==t.platform||(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var r=t.comment||this.comment||"";n=d.generateWorker(this,t,r)}catch(e){(n=new o("error")).error(e)}return new i(n,t.type||"string",t.mimeType)},generateAsync:function(e,n){return this.generateInternalStream(e).accumulate(n)},generateNodeStream:function(e,n){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(n)}};n.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,n,t){"use strict";n.exports=e("stream")},{stream:void 0}],17:[function(e,n,t){"use strict";var r=e("./DataReader");function a(e){r.call(this,e);for(var n=0;n<this.data.length;n++)e[n]=255&e[n]}e("../utils").inherits(a,r),a.prototype.byteAt=function(e){return this.data[this.zero+e]},a.prototype.lastIndexOfSignature=function(e){for(var n=e.charCodeAt(0),t=e.charCodeAt(1),r=e.charCodeAt(2),a=e.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===n&&this.data[s+1]===t&&this.data[s+2]===r&&this.data[s+3]===a)return s-this.zero;return-1},a.prototype.readAndCheckSignature=function(e){var n=e.charCodeAt(0),t=e.charCodeAt(1),r=e.charCodeAt(2),a=e.charCodeAt(3),s=this.readData(4);return n===s[0]&&t===s[1]&&r===s[2]&&a===s[3]},a.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=a},{"../utils":32,"./DataReader":18}],18:[function(e,n,t){"use strict";var r=e("../utils");function a(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var n,t=0;for(this.checkOffset(e),n=this.index+e-1;n>=this.index;n--)t=(t<<8)+this.byteAt(n);return this.index+=e,t},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},n.exports=a},{"../utils":32}],19:[function(e,n,t){"use strict";var r=e("./Uint8ArrayReader");function a(e){r.call(this,e)}e("../utils").inherits(a,r),a.prototype.readData=function(e){this.checkOffset(e);var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,n,t){"use strict";var r=e("./DataReader");function a(e){r.call(this,e)}e("../utils").inherits(a,r),a.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},a.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},a.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},a.prototype.readData=function(e){this.checkOffset(e);var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=a},{"../utils":32,"./DataReader":18}],21:[function(e,n,t){"use strict";var r=e("./ArrayReader");function a(e){r.call(this,e)}e("../utils").inherits(a,r),a.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var n=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(e,n,t){"use strict";var r=e("../utils"),a=e("../support"),s=e("./ArrayReader"),o=e("./StringReader"),i=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");n.exports=function(e){var n=r.getTypeOf(e);return r.checkSupport(n),"string"!==n||a.uint8array?"nodebuffer"===n?new i(e):a.uint8array?new l(r.transformTo("uint8array",e)):new s(r.transformTo("array",e)):new o(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,n,t){"use strict";t.LOCAL_FILE_HEADER="PK\x03\x04",t.CENTRAL_FILE_HEADER="PK\x01\x02",t.CENTRAL_DIRECTORY_END="PK\x05\x06",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",t.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",t.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,n,t){"use strict";var r=e("./GenericWorker"),a=e("../utils");function s(e){r.call(this,"ConvertWorker to "+e),this.destType=e}a.inherits(s,r),s.prototype.processChunk=function(e){this.push({data:a.transformTo(this.destType,e.data),meta:e.meta})},n.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(e,n,t){"use strict";var r=e("./GenericWorker"),a=e("../crc32");function s(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(s,r),s.prototype.processChunk=function(e){this.streamInfo.crc32=a(e.data,this.streamInfo.crc32||0),this.push(e)},n.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,n,t){"use strict";var r=e("../utils"),a=e("./GenericWorker");function s(e){a.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(s,a),s.prototype.processChunk=function(e){if(e){var n=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=n+e.data.length}a.prototype.processChunk.call(this,e)},n.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(e,n,t){"use strict";var r=e("../utils"),a=e("./GenericWorker");function s(e){a.call(this,"DataWorker");var n=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){n.dataIsReady=!0,n.data=e,n.max=e&&e.length||0,n.type=r.getTypeOf(e),n.isPaused||n._tickAndRepeat()}),(function(e){n.error(e)}))}r.inherits(s,a),s.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,n=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,n);break;case"uint8array":e=this.data.subarray(this.index,n);break;case"array":case"nodebuffer":e=this.data.slice(this.index,n)}return this.index=n,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(e,n,t){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,n){return this._listeners[e].push(n),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,n){if(this._listeners[e])for(var t=0;t<this._listeners[e].length;t++)this._listeners[e][t].call(this,n)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var n=this;return e.on("data",(function(e){n.processChunk(e)})),e.on("end",(function(){n.end()})),e.on("error",(function(e){n.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,n){return this.extraStreamInfo[e]=n,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},n.exports=r},{}],29:[function(e,n,t){"use strict";var r=e("../utils"),a=e("./ConvertWorker"),s=e("./GenericWorker"),o=e("../base64"),i=e("../support"),l=e("../external"),u=null;if(i.nodestream)try{u=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function c(e,n){return new l.Promise((function(t,a){var s=[],i=e._internalType,l=e._outputType,u=e._mimeType;e.on("data",(function(e,t){s.push(e),n&&n(t)})).on("error",(function(e){s=[],a(e)})).on("end",(function(){try{var e=function(e,n,t){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",n),t);case"base64":return o.encode(n);default:return r.transformTo(e,n)}}(l,function(e,n){var t,r=0,a=null,s=0;for(t=0;t<n.length;t++)s+=n[t].length;switch(e){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(a=new Uint8Array(s),t=0;t<n.length;t++)a.set(n[t],r),r+=n[t].length;return a;case"nodebuffer":return Buffer.concat(n);default:throw new Error("concat : unsupported type '"+e+"'")}}(i,s),u);t(e)}catch(e){a(e)}s=[]})).resume()}))}function d(e,n,t){var o=n;switch(n){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=n,this._mimeType=t,r.checkSupport(o),this._worker=e.pipe(new a(o)),e.lock()}catch(e){this._worker=new s("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return c(this,e)},on:function(e,n){var t=this;return"data"===e?this._worker.on(e,(function(e){n.call(t,e.data,e.meta)})):this._worker.on(e,(function(){r.delay(n,arguments,t)})),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},e)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,t){"use strict";if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,t.nodebuffer="undefined"!=typeof Buffer,t.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)t.blob=!1;else{var r=new ArrayBuffer(0);try{t.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(r),t.blob=0===a.getBlob("application/zip").size}catch(e){t.blob=!1}}}try{t.nodestream=!!e("readable-stream").Readable}catch(e){t.nodestream=!1}},{"readable-stream":16}],31:[function(e,n,t){"use strict";for(var r=e("./utils"),a=e("./support"),s=e("./nodejsUtils"),o=e("./stream/GenericWorker"),i=new Array(256),l=0;l<256;l++)i[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function u(){o.call(this,"utf-8 decode"),this.leftOver=null}function c(){o.call(this,"utf-8 encode")}i[254]=i[254]=1,t.utf8encode=function(e){return a.nodebuffer?s.newBufferFrom(e,"utf-8"):function(e){var n,t,r,s,o,i=e.length,l=0;for(s=0;s<i;s++)55296==(64512&(t=e.charCodeAt(s)))&&s+1<i&&56320==(64512&(r=e.charCodeAt(s+1)))&&(t=65536+(t-55296<<10)+(r-56320),s++),l+=t<128?1:t<2048?2:t<65536?3:4;for(n=a.uint8array?new Uint8Array(l):new Array(l),s=o=0;o<l;s++)55296==(64512&(t=e.charCodeAt(s)))&&s+1<i&&56320==(64512&(r=e.charCodeAt(s+1)))&&(t=65536+(t-55296<<10)+(r-56320),s++),t<128?n[o++]=t:(t<2048?n[o++]=192|t>>>6:(t<65536?n[o++]=224|t>>>12:(n[o++]=240|t>>>18,n[o++]=128|t>>>12&63),n[o++]=128|t>>>6&63),n[o++]=128|63&t);return n}(e)},t.utf8decode=function(e){return a.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var n,t,a,s,o=e.length,l=new Array(2*o);for(n=t=0;n<o;)if((a=e[n++])<128)l[t++]=a;else if(4<(s=i[a]))l[t++]=65533,n+=s-1;else{for(a&=2===s?31:3===s?15:7;1<s&&n<o;)a=a<<6|63&e[n++],s--;1<s?l[t++]=65533:a<65536?l[t++]=a:(a-=65536,l[t++]=55296|a>>10&1023,l[t++]=56320|1023&a)}return l.length!==t&&(l.subarray?l=l.subarray(0,t):l.length=t),r.applyFromCharCode(l)}(e=r.transformTo(a.uint8array?"uint8array":"array",e))},r.inherits(u,o),u.prototype.processChunk=function(e){var n=r.transformTo(a.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var s=n;(n=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),n.set(s,this.leftOver.length)}else n=this.leftOver.concat(n);this.leftOver=null}var o=function(e,n){var t;for((n=n||e.length)>e.length&&(n=e.length),t=n-1;0<=t&&128==(192&e[t]);)t--;return t<0||0===t?n:t+i[e[t]]>n?t:n}(n),l=n;o!==n.length&&(a.uint8array?(l=n.subarray(0,o),this.leftOver=n.subarray(o,n.length)):(l=n.slice(0,o),this.leftOver=n.slice(o,n.length))),this.push({data:t.utf8decode(l),meta:e.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=u,r.inherits(c,o),c.prototype.processChunk=function(e){this.push({data:t.utf8encode(e.data),meta:e.meta})},t.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,n,t){"use strict";var r=e("./support"),a=e("./base64"),s=e("./nodejsUtils"),o=e("./external");function i(e){return e}function l(e,n){for(var t=0;t<e.length;++t)n[t]=255&e.charCodeAt(t);return n}e("setimmediate"),t.newBlob=function(n,r){t.checkSupport("blob");try{return new Blob([n],{type:r})}catch(e){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return a.append(n),a.getBlob(r)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(e,n,t){var r=[],a=0,s=e.length;if(s<=t)return String.fromCharCode.apply(null,e);for(;a<s;)"array"===n||"nodebuffer"===n?r.push(String.fromCharCode.apply(null,e.slice(a,Math.min(a+t,s)))):r.push(String.fromCharCode.apply(null,e.subarray(a,Math.min(a+t,s)))),a+=t;return r.join("")},stringifyByChar:function(e){for(var n="",t=0;t<e.length;t++)n+=String.fromCharCode(e[t]);return n},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(e){return!1}}()}};function c(e){var n=65536,r=t.getTypeOf(e),a=!0;if("uint8array"===r?a=u.applyCanBeUsed.uint8array:"nodebuffer"===r&&(a=u.applyCanBeUsed.nodebuffer),a)for(;1<n;)try{return u.stringifyByChunk(e,r,n)}catch(e){n=Math.floor(n/2)}return u.stringifyByChar(e)}function d(e,n){for(var t=0;t<e.length;t++)n[t]=e[t];return n}t.applyFromCharCode=c;var f={};f.string={string:i,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return f.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,s.allocBuffer(e.length))}},f.array={string:c,array:i,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(e)}},f.arraybuffer={string:function(e){return c(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:i,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(new Uint8Array(e))}},f.uint8array={string:c,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:i,nodebuffer:function(e){return s.newBufferFrom(e)}},f.nodebuffer={string:c,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return f.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:i},t.transformTo=function(e,n){if(n=n||"",!e)return n;t.checkSupport(e);var r=t.getTypeOf(n);return f[r][e](n)},t.resolve=function(e){for(var n=e.split("/"),t=[],r=0;r<n.length;r++){var a=n[r];"."===a||""===a&&0!==r&&r!==n.length-1||(".."===a?t.pop():t.push(a))}return t.join("/")},t.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&s.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(e){var n,t,r="";for(t=0;t<(e||"").length;t++)r+="\\x"+((n=e.charCodeAt(t))<16?"0":"")+n.toString(16).toUpperCase();return r},t.delay=function(e,n,t){setImmediate((function(){e.apply(t||null,n||[])}))},t.inherits=function(e,n){function t(){}t.prototype=n.prototype,e.prototype=new t},t.extend=function(){var e,n,t={};for(e=0;e<arguments.length;e++)for(n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&void 0===t[n]&&(t[n]=arguments[e][n]);return t},t.prepareContent=function(e,n,s,i,u){return o.Promise.resolve(n).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise((function(n,t){var r=new FileReader;r.onload=function(e){n(e.target.result)},r.onerror=function(e){t(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(n){var c=t.getTypeOf(n);return c?("arraybuffer"===c?n=t.transformTo("uint8array",n):"string"===c&&(u?n=a.decode(n):s&&!0!==i&&(n=function(e){return l(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(n))),n):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,n,t){"use strict";var r=e("./reader/readerFor"),a=e("./utils"),s=e("./signature"),o=e("./zipEntry"),i=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var n=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(n)+", expected "+a.pretty(e)+")")}},isSignature:function(e,n){var t=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===n;return this.reader.setIndex(t),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),n=i.uint8array?"uint8array":"array",t=a.transformTo(n,e);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,n,t,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),n=this.reader.readInt(4),t=this.reader.readData(n),this.zip64ExtensibleData[e]={id:e,length:n,value:t}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,n;for(e=0;e<this.files.length;e++)n=this.files[e],this.reader.setIndex(n.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),n.readLocalPart(this.reader),n.handleUTF8(),n.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var n=e;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var t=this.centralDirOffset+this.centralDirSize;this.zip64&&(t+=20,t+=12+this.zip64EndOfCentralSize);var r=n-t;if(0<r)this.isSignature(n,s.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,n,t){"use strict";var r=e("./reader/readerFor"),a=e("./utils"),s=e("./compressedObject"),o=e("./crc32"),i=e("./utf8"),l=e("./compressions"),u=e("./support");function c(e,n){this.options=e,this.loadOptions=n}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var n,t;if(e.skip(22),this.fileNameLength=e.readInt(2),t=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(t),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(n=function(e){for(var n in l)if(Object.prototype.hasOwnProperty.call(l,n)&&l[n].magic===e)return l[n];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,n,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var n=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(n),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var n,t,r,a=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<a;)n=e.readInt(2),t=e.readInt(2),r=e.readData(t),this.extraFields[n]={id:n,length:t,value:r};e.setIndex(a)},handleUTF8:function(){var e=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=i.utf8decode(this.fileName),this.fileCommentStr=i.utf8decode(this.fileComment);else{var n=this.findExtraFieldUnicodePath();if(null!==n)this.fileNameStr=n;else{var t=a.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(t)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var s=a.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var n=r(e.value);return 1!==n.readInt(1)||o(this.fileName)!==n.readInt(4)?null:i.utf8decode(n.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var n=r(e.value);return 1!==n.readInt(1)||o(this.fileComment)!==n.readInt(4)?null:i.utf8decode(n.readData(e.length-5))}return null}},n.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,n,t){"use strict";function r(e,n,t){this.name=e,this.dir=t.dir,this.date=t.date,this.comment=t.comment,this.unixPermissions=t.unixPermissions,this.dosPermissions=t.dosPermissions,this._data=n,this._dataBinary=t.binary,this.options={compression:t.compression,compressionOptions:t.compressionOptions}}var a=e("./stream/StreamHelper"),s=e("./stream/DataWorker"),o=e("./utf8"),i=e("./compressedObject"),l=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var n=null,t="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(t=e.toLowerCase())||"text"===t;"binarystring"!==t&&"text"!==t||(t="string"),n=this._decompressWorker();var s=!this._dataBinary;s&&!r&&(n=n.pipe(new o.Utf8EncodeWorker)),!s&&r&&(n=n.pipe(new o.Utf8DecodeWorker))}catch(e){(n=new l("error")).error(e)}return new a(n,t,"")},async:function(e,n){return this.internalStream(e).accumulate(n)},nodeStream:function(e,n){return this.internalStream(e||"nodebuffer").toNodejsStream(n)},_compressWorker:function(e,n){if(this._data instanceof i&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var t=this._decompressWorker();return this._dataBinary||(t=t.pipe(new o.Utf8EncodeWorker)),i.createWorkerFrom(t,e,n)},_decompressWorker:function(){return this._data instanceof i?this._data.getContentWorker():this._data instanceof l?this._data:new s(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<u.length;d++)r.prototype[u[d]]=c;n.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,r){(function(e){"use strict";var t,r,a=e.MutationObserver||e.WebKitMutationObserver;if(a){var s=0,o=new a(c),i=e.document.createTextNode("");o.observe(i,{characterData:!0}),t=function(){i.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var n=e.document.createElement("script");n.onreadystatechange=function(){c(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n)}:function(){setTimeout(c,0)};else{var l=new e.MessageChannel;l.port1.onmessage=c,t=function(){l.port2.postMessage(0)}}var u=[];function c(){var e,n;r=!0;for(var t=u.length;t;){for(n=u,u=[],e=-1;++e<t;)n[e]();t=u.length}r=!1}n.exports=function(e){1!==u.push(e)||r||t()}}).call(this,"undefined"!=typeof t.g?t.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,n,t){"use strict";var r=e("immediate");function a(){}var s={},o=["REJECTED"],i=["FULFILLED"],l=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==a&&p(this,e)}function c(e,n,t){this.promise=e,"function"==typeof n&&(this.onFulfilled=n,this.callFulfilled=this.otherCallFulfilled),"function"==typeof t&&(this.onRejected=t,this.callRejected=this.otherCallRejected)}function d(e,n,t){r((function(){var r;try{r=n(t)}catch(r){return s.reject(e,r)}r===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,r)}))}function f(e){var n=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof n)return function(){n.apply(e,arguments)}}function p(e,n){var t=!1;function r(n){t||(t=!0,s.reject(e,n))}function a(n){t||(t=!0,s.resolve(e,n))}var o=h((function(){n(a,r)}));"error"===o.status&&r(o.value)}function h(e,n){var t={};try{t.value=e(n),t.status="success"}catch(e){t.status="error",t.value=e}return t}(n.exports=u).prototype.finally=function(e){if("function"!=typeof e)return this;var n=this.constructor;return this.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))}))},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,n){if("function"!=typeof e&&this.state===i||"function"!=typeof n&&this.state===o)return this;var t=new this.constructor(a);return this.state!==l?d(t,this.state===i?e:n,this.outcome):this.queue.push(new c(t,e,n)),t},c.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){s.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},s.resolve=function(e,n){var t=h(f,n);if("error"===t.status)return s.reject(e,t.value);var r=t.value;if(r)p(e,r);else{e.state=i,e.outcome=n;for(var a=-1,o=e.queue.length;++a<o;)e.queue[a].callFulfilled(n)}return e},s.reject=function(e,n){e.state=o,e.outcome=n;for(var t=-1,r=e.queue.length;++t<r;)e.queue[t].callRejected(n);return e},u.resolve=function(e){return e instanceof this?e:s.resolve(new this(a),e)},u.reject=function(e){var n=new this(a);return s.reject(n,e)},u.all=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var o=new Array(t),i=0,l=-1,u=new this(a);++l<t;)c(e[l],l);return u;function c(e,a){n.resolve(e).then((function(e){o[a]=e,++i!==t||r||(r=!0,s.resolve(u,o))}),(function(e){r||(r=!0,s.reject(u,e))}))}},u.race=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var o,i=-1,l=new this(a);++i<t;)o=e[i],n.resolve(o).then((function(e){r||(r=!0,s.resolve(l,e))}),(function(e){r||(r=!0,s.reject(l,e))}));return l}},{immediate:36}],38:[function(e,n,t){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),n.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,n,t){"use strict";var r=e("./zlib/deflate"),a=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/messages"),i=e("./zlib/zstream"),l=Object.prototype.toString,u=0,c=-1,d=0,f=8;function p(e){if(!(this instanceof p))return new p(e);this.options=a.assign({level:c,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var n=this.options;n.raw&&0<n.windowBits?n.windowBits=-n.windowBits:n.gzip&&0<n.windowBits&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var t=r.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(t!==u)throw new Error(o[t]);if(n.header&&r.deflateSetHeader(this.strm,n.header),n.dictionary){var h;if(h="string"==typeof n.dictionary?s.string2buf(n.dictionary):"[object ArrayBuffer]"===l.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,(t=r.deflateSetDictionary(this.strm,h))!==u)throw new Error(o[t]);this._dict_set=!0}}function h(e,n){var t=new p(n);if(t.push(e,!0),t.err)throw t.msg||o[t.err];return t.result}p.prototype.push=function(e,n){var t,o,i=this.strm,c=this.options.chunkSize;if(this.ended)return!1;o=n===~~n?n:!0===n?4:0,"string"==typeof e?i.input=s.string2buf(e):"[object ArrayBuffer]"===l.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new a.Buf8(c),i.next_out=0,i.avail_out=c),1!==(t=r.deflate(i,o))&&t!==u)return this.onEnd(t),!(this.ended=!0);0!==i.avail_out&&(0!==i.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(s.buf2binstring(a.shrinkBuf(i.output,i.next_out))):this.onData(a.shrinkBuf(i.output,i.next_out)))}while((0<i.avail_in||0===i.avail_out)&&1!==t);return 4===o?(t=r.deflateEnd(this.strm),this.onEnd(t),this.ended=!0,t===u):2!==o||(this.onEnd(u),!(i.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=p,t.deflate=h,t.deflateRaw=function(e,n){return(n=n||{}).raw=!0,h(e,n)},t.gzip=function(e,n){return(n=n||{}).gzip=!0,h(e,n)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,n,t){"use strict";var r=e("./zlib/inflate"),a=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/constants"),i=e("./zlib/messages"),l=e("./zlib/zstream"),u=e("./zlib/gzheader"),c=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var n=this.options;n.raw&&0<=n.windowBits&&n.windowBits<16&&(n.windowBits=-n.windowBits,0===n.windowBits&&(n.windowBits=-15)),!(0<=n.windowBits&&n.windowBits<16)||e&&e.windowBits||(n.windowBits+=32),15<n.windowBits&&n.windowBits<48&&0==(15&n.windowBits)&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var t=r.inflateInit2(this.strm,n.windowBits);if(t!==o.Z_OK)throw new Error(i[t]);this.header=new u,r.inflateGetHeader(this.strm,this.header)}function f(e,n){var t=new d(n);if(t.push(e,!0),t.err)throw t.msg||i[t.err];return t.result}d.prototype.push=function(e,n){var t,i,l,u,d,f,p=this.strm,h=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;i=n===~~n?n:!0===n?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?p.input=s.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new a.Buf8(h),p.next_out=0,p.avail_out=h),(t=r.inflate(p,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&m&&(f="string"==typeof m?s.string2buf(m):"[object ArrayBuffer]"===c.call(m)?new Uint8Array(m):m,t=r.inflateSetDictionary(this.strm,f)),t===o.Z_BUF_ERROR&&!0===g&&(t=o.Z_OK,g=!1),t!==o.Z_STREAM_END&&t!==o.Z_OK)return this.onEnd(t),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&t!==o.Z_STREAM_END&&(0!==p.avail_in||i!==o.Z_FINISH&&i!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(l=s.utf8border(p.output,p.next_out),u=p.next_out-l,d=s.buf2string(p.output,l),p.next_out=u,p.avail_out=h-u,u&&a.arraySet(p.output,p.output,l,u,0),this.onData(d)):this.onData(a.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(g=!0)}while((0<p.avail_in||0===p.avail_out)&&t!==o.Z_STREAM_END);return t===o.Z_STREAM_END&&(i=o.Z_FINISH),i===o.Z_FINISH?(t=r.inflateEnd(this.strm),this.onEnd(t),this.ended=!0,t===o.Z_OK):i!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(p.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=d,t.inflate=f,t.inflateRaw=function(e,n){return(n=n||{}).raw=!0,f(e,n)},t.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,n,t){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var t=n.shift();if(t){if("object"!=typeof t)throw new TypeError(t+"must be non-object");for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}}return e},t.shrinkBuf=function(e,n){return e.length===n?e:e.subarray?e.subarray(0,n):(e.length=n,e)};var a={arraySet:function(e,n,t,r,a){if(n.subarray&&e.subarray)e.set(n.subarray(t,t+r),a);else for(var s=0;s<r;s++)e[a+s]=n[t+s]},flattenChunks:function(e){var n,t,r,a,s,o;for(n=r=0,t=e.length;n<t;n++)r+=e[n].length;for(o=new Uint8Array(r),n=a=0,t=e.length;n<t;n++)s=e[n],o.set(s,a),a+=s.length;return o}},s={arraySet:function(e,n,t,r,a){for(var s=0;s<r;s++)e[a+s]=n[t+s]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(r)},{}],42:[function(e,n,t){"use strict";var r=e("./common"),a=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var o=new r.Buf8(256),i=0;i<256;i++)o[i]=252<=i?6:248<=i?5:240<=i?4:224<=i?3:192<=i?2:1;function l(e,n){if(n<65537&&(e.subarray&&s||!e.subarray&&a))return String.fromCharCode.apply(null,r.shrinkBuf(e,n));for(var t="",o=0;o<n;o++)t+=String.fromCharCode(e[o]);return t}o[254]=o[254]=1,t.string2buf=function(e){var n,t,a,s,o,i=e.length,l=0;for(s=0;s<i;s++)55296==(64512&(t=e.charCodeAt(s)))&&s+1<i&&56320==(64512&(a=e.charCodeAt(s+1)))&&(t=65536+(t-55296<<10)+(a-56320),s++),l+=t<128?1:t<2048?2:t<65536?3:4;for(n=new r.Buf8(l),s=o=0;o<l;s++)55296==(64512&(t=e.charCodeAt(s)))&&s+1<i&&56320==(64512&(a=e.charCodeAt(s+1)))&&(t=65536+(t-55296<<10)+(a-56320),s++),t<128?n[o++]=t:(t<2048?n[o++]=192|t>>>6:(t<65536?n[o++]=224|t>>>12:(n[o++]=240|t>>>18,n[o++]=128|t>>>12&63),n[o++]=128|t>>>6&63),n[o++]=128|63&t);return n},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var n=new r.Buf8(e.length),t=0,a=n.length;t<a;t++)n[t]=e.charCodeAt(t);return n},t.buf2string=function(e,n){var t,r,a,s,i=n||e.length,u=new Array(2*i);for(t=r=0;t<i;)if((a=e[t++])<128)u[r++]=a;else if(4<(s=o[a]))u[r++]=65533,t+=s-1;else{for(a&=2===s?31:3===s?15:7;1<s&&t<i;)a=a<<6|63&e[t++],s--;1<s?u[r++]=65533:a<65536?u[r++]=a:(a-=65536,u[r++]=55296|a>>10&1023,u[r++]=56320|1023&a)}return l(u,r)},t.utf8border=function(e,n){var t;for((n=n||e.length)>e.length&&(n=e.length),t=n-1;0<=t&&128==(192&e[t]);)t--;return t<0||0===t?n:t+o[e[t]]>n?t:n}},{"./common":41}],43:[function(e,n,t){"use strict";n.exports=function(e,n,t,r){for(var a=65535&e|0,s=e>>>16&65535|0,o=0;0!==t;){for(t-=o=2e3<t?2e3:t;s=s+(a=a+n[r++]|0)|0,--o;);a%=65521,s%=65521}return a|s<<16|0}},{}],44:[function(e,n,t){"use strict";n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,n,t){"use strict";var r=function(){for(var e,n=[],t=0;t<256;t++){e=t;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;n[t]=e}return n}();n.exports=function(e,n,t,a){var s=r,o=a+t;e^=-1;for(var i=a;i<o;i++)e=e>>>8^s[255&(e^n[i])];return-1^e}},{}],46:[function(e,n,t){"use strict";var r,a=e("../utils/common"),s=e("./trees"),o=e("./adler32"),i=e("./crc32"),l=e("./messages"),u=0,c=4,d=0,f=-2,p=-1,h=4,m=2,g=8,y=9,b=286,v=30,_=19,S=2*b+1,w=15,k=3,I=258,T=I+k+1,x=42,A=113,E=1,O=2,C=3,M=4;function F(e,n){return e.msg=l[n],n}function P(e){return(e<<1)-(4<e?9:0)}function N(e){for(var n=e.length;0<=--n;)e[n]=0}function R(e){var n=e.state,t=n.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(a.arraySet(e.output,n.pending_buf,n.pending_out,t,e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,0===n.pending&&(n.pending_out=0))}function L(e,n){s._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,R(e.strm)}function D(e,n){e.pending_buf[e.pending++]=n}function z(e,n){e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=255&n}function U(e,n){var t,r,a=e.max_chain_length,s=e.strstart,o=e.prev_length,i=e.nice_match,l=e.strstart>e.w_size-T?e.strstart-(e.w_size-T):0,u=e.window,c=e.w_mask,d=e.prev,f=e.strstart+I,p=u[s+o-1],h=u[s+o];e.prev_length>=e.good_match&&(a>>=2),i>e.lookahead&&(i=e.lookahead);do{if(u[(t=n)+o]===h&&u[t+o-1]===p&&u[t]===u[s]&&u[++t]===u[s+1]){s+=2,t++;do{}while(u[++s]===u[++t]&&u[++s]===u[++t]&&u[++s]===u[++t]&&u[++s]===u[++t]&&u[++s]===u[++t]&&u[++s]===u[++t]&&u[++s]===u[++t]&&u[++s]===u[++t]&&s<f);if(r=I-(f-s),s=f-I,o<r){if(e.match_start=n,i<=(o=r))break;p=u[s+o-1],h=u[s+o]}}}while((n=d[n&c])>l&&0!=--a);return o<=e.lookahead?o:e.lookahead}function j(e){var n,t,r,s,l,u,c,d,f,p,h=e.w_size;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=h+(h-T)){for(a.arraySet(e.window,e.window,h,h,0),e.match_start-=h,e.strstart-=h,e.block_start-=h,n=t=e.hash_size;r=e.head[--n],e.head[n]=h<=r?r-h:0,--t;);for(n=t=h;r=e.prev[--n],e.prev[n]=h<=r?r-h:0,--t;);s+=h}if(0===e.strm.avail_in)break;if(u=e.strm,c=e.window,d=e.strstart+e.lookahead,p=void 0,(f=s)<(p=u.avail_in)&&(p=f),t=0===p?0:(u.avail_in-=p,a.arraySet(c,u.input,u.next_in,p,d),1===u.state.wrap?u.adler=o(u.adler,c,p,d):2===u.state.wrap&&(u.adler=i(u.adler,c,p,d)),u.next_in+=p,u.total_in+=p,p),e.lookahead+=t,e.lookahead+e.insert>=k)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+k-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<k)););}while(e.lookahead<T&&0!==e.strm.avail_in)}function B(e,n){for(var t,r;;){if(e.lookahead<T){if(j(e),e.lookahead<T&&n===u)return E;if(0===e.lookahead)break}if(t=0,e.lookahead>=k&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==t&&e.strstart-t<=e.w_size-T&&(e.match_length=U(e,t)),e.match_length>=k)if(r=s._tr_tally(e,e.strstart-e.match_start,e.match_length-k),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=k){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(L(e,!1),0===e.strm.avail_out))return E}return e.insert=e.strstart<k-1?e.strstart:k-1,n===c?(L(e,!0),0===e.strm.avail_out?C:M):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?E:O}function V(e,n){for(var t,r,a;;){if(e.lookahead<T){if(j(e),e.lookahead<T&&n===u)return E;if(0===e.lookahead)break}if(t=0,e.lookahead>=k&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=k-1,0!==t&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-T&&(e.match_length=U(e,t),e.match_length<=5&&(1===e.strategy||e.match_length===k&&4096<e.strstart-e.match_start)&&(e.match_length=k-1)),e.prev_length>=k&&e.match_length<=e.prev_length){for(a=e.strstart+e.lookahead-k,r=s._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-k),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+k-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=k-1,e.strstart++,r&&(L(e,!1),0===e.strm.avail_out))return E}else if(e.match_available){if((r=s._tr_tally(e,0,e.window[e.strstart-1]))&&L(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return E}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=s._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<k-1?e.strstart:k-1,n===c?(L(e,!0),0===e.strm.avail_out?C:M):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?E:O}function G(e,n,t,r,a){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=r,this.func=a}function W(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*S),this.dyn_dtree=new a.Buf16(2*(2*v+1)),this.bl_tree=new a.Buf16(2*(2*_+1)),N(this.dyn_ltree),N(this.dyn_dtree),N(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(w+1),this.heap=new a.Buf16(2*b+1),N(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*b+1),N(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function $(e){var n;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=m,(n=e.state).pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?x:A,e.adler=2===n.wrap?0:1,n.last_flush=u,s._tr_init(n),d):F(e,f)}function H(e){var n=$(e);return n===d&&function(e){e.window_size=2*e.w_size,N(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=k-1,e.match_available=0,e.ins_h=0}(e.state),n}function K(e,n,t,r,s,o){if(!e)return f;var i=1;if(n===p&&(n=6),r<0?(i=0,r=-r):15<r&&(i=2,r-=16),s<1||y<s||t!==g||r<8||15<r||n<0||9<n||o<0||h<o)return F(e,f);8===r&&(r=9);var l=new W;return(e.state=l).strm=e,l.wrap=i,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=s+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+k-1)/k),l.window=new a.Buf8(2*l.w_size),l.head=new a.Buf16(l.hash_size),l.prev=new a.Buf16(l.w_size),l.lit_bufsize=1<<s+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new a.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=n,l.strategy=o,l.method=t,H(e)}r=[new G(0,0,0,0,(function(e,n){var t=65535;for(t>e.pending_buf_size-5&&(t=e.pending_buf_size-5);;){if(e.lookahead<=1){if(j(e),0===e.lookahead&&n===u)return E;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+t;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,L(e,!1),0===e.strm.avail_out))return E;if(e.strstart-e.block_start>=e.w_size-T&&(L(e,!1),0===e.strm.avail_out))return E}return e.insert=0,n===c?(L(e,!0),0===e.strm.avail_out?C:M):(e.strstart>e.block_start&&(L(e,!1),e.strm.avail_out),E)})),new G(4,4,8,4,B),new G(4,5,16,8,B),new G(4,6,32,32,B),new G(4,4,16,16,V),new G(8,16,32,32,V),new G(8,16,128,128,V),new G(8,32,128,256,V),new G(32,128,258,1024,V),new G(32,258,258,4096,V)],t.deflateInit=function(e,n){return K(e,n,g,15,8,0)},t.deflateInit2=K,t.deflateReset=H,t.deflateResetKeep=$,t.deflateSetHeader=function(e,n){return e&&e.state?2!==e.state.wrap?f:(e.state.gzhead=n,d):f},t.deflate=function(e,n){var t,a,o,l;if(!e||!e.state||5<n||n<0)return e?F(e,f):f;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||666===a.status&&n!==c)return F(e,0===e.avail_out?-5:f);if(a.strm=e,t=a.last_flush,a.last_flush=n,a.status===x)if(2===a.wrap)e.adler=0,D(a,31),D(a,139),D(a,8),a.gzhead?(D(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),D(a,255&a.gzhead.time),D(a,a.gzhead.time>>8&255),D(a,a.gzhead.time>>16&255),D(a,a.gzhead.time>>24&255),D(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),D(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(D(a,255&a.gzhead.extra.length),D(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=i(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(D(a,0),D(a,0),D(a,0),D(a,0),D(a,0),D(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),D(a,3),a.status=A);else{var p=g+(a.w_bits-8<<4)<<8;p|=(2<=a.strategy||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(p|=32),p+=31-p%31,a.status=A,z(a,p),0!==a.strstart&&(z(a,e.adler>>>16),z(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(o=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>o&&(e.adler=i(e.adler,a.pending_buf,a.pending-o,o)),R(e),o=a.pending,a.pending!==a.pending_buf_size));)D(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>o&&(e.adler=i(e.adler,a.pending_buf,a.pending-o,o)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){o=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>o&&(e.adler=i(e.adler,a.pending_buf,a.pending-o,o)),R(e),o=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,D(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>o&&(e.adler=i(e.adler,a.pending_buf,a.pending-o,o)),0===l&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){o=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>o&&(e.adler=i(e.adler,a.pending_buf,a.pending-o,o)),R(e),o=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,D(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>o&&(e.adler=i(e.adler,a.pending_buf,a.pending-o,o)),0===l&&(a.status=103)}else a.status=103;if(103===a.status&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&R(e),a.pending+2<=a.pending_buf_size&&(D(a,255&e.adler),D(a,e.adler>>8&255),e.adler=0,a.status=A)):a.status=A),0!==a.pending){if(R(e),0===e.avail_out)return a.last_flush=-1,d}else if(0===e.avail_in&&P(n)<=P(t)&&n!==c)return F(e,-5);if(666===a.status&&0!==e.avail_in)return F(e,-5);if(0!==e.avail_in||0!==a.lookahead||n!==u&&666!==a.status){var h=2===a.strategy?function(e,n){for(var t;;){if(0===e.lookahead&&(j(e),0===e.lookahead)){if(n===u)return E;break}if(e.match_length=0,t=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(L(e,!1),0===e.strm.avail_out))return E}return e.insert=0,n===c?(L(e,!0),0===e.strm.avail_out?C:M):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?E:O}(a,n):3===a.strategy?function(e,n){for(var t,r,a,o,i=e.window;;){if(e.lookahead<=I){if(j(e),e.lookahead<=I&&n===u)return E;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=k&&0<e.strstart&&(r=i[a=e.strstart-1])===i[++a]&&r===i[++a]&&r===i[++a]){o=e.strstart+I;do{}while(r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&r===i[++a]&&a<o);e.match_length=I-(o-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=k?(t=s._tr_tally(e,1,e.match_length-k),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(L(e,!1),0===e.strm.avail_out))return E}return e.insert=0,n===c?(L(e,!0),0===e.strm.avail_out?C:M):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?E:O}(a,n):r[a.level].func(a,n);if(h!==C&&h!==M||(a.status=666),h===E||h===C)return 0===e.avail_out&&(a.last_flush=-1),d;if(h===O&&(1===n?s._tr_align(a):5!==n&&(s._tr_stored_block(a,0,0,!1),3===n&&(N(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),R(e),0===e.avail_out))return a.last_flush=-1,d}return n!==c?d:a.wrap<=0?1:(2===a.wrap?(D(a,255&e.adler),D(a,e.adler>>8&255),D(a,e.adler>>16&255),D(a,e.adler>>24&255),D(a,255&e.total_in),D(a,e.total_in>>8&255),D(a,e.total_in>>16&255),D(a,e.total_in>>24&255)):(z(a,e.adler>>>16),z(a,65535&e.adler)),R(e),0<a.wrap&&(a.wrap=-a.wrap),0!==a.pending?d:1)},t.deflateEnd=function(e){var n;return e&&e.state?(n=e.state.status)!==x&&69!==n&&73!==n&&91!==n&&103!==n&&n!==A&&666!==n?F(e,f):(e.state=null,n===A?F(e,-3):d):f},t.deflateSetDictionary=function(e,n){var t,r,s,i,l,u,c,p,h=n.length;if(!e||!e.state)return f;if(2===(i=(t=e.state).wrap)||1===i&&t.status!==x||t.lookahead)return f;for(1===i&&(e.adler=o(e.adler,n,h,0)),t.wrap=0,h>=t.w_size&&(0===i&&(N(t.head),t.strstart=0,t.block_start=0,t.insert=0),p=new a.Buf8(t.w_size),a.arraySet(p,n,h-t.w_size,t.w_size,0),n=p,h=t.w_size),l=e.avail_in,u=e.next_in,c=e.input,e.avail_in=h,e.next_in=0,e.input=n,j(t);t.lookahead>=k;){for(r=t.strstart,s=t.lookahead-(k-1);t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+k-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,--s;);t.strstart=r,t.lookahead=k-1,j(t)}return t.strstart+=t.lookahead,t.block_start=t.strstart,t.insert=t.lookahead,t.lookahead=0,t.match_length=t.prev_length=k-1,t.match_available=0,e.next_in=u,e.input=c,e.avail_in=l,t.wrap=i,d},t.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,n,t){"use strict";n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,n,t){"use strict";n.exports=function(e,n){var t,r,a,s,o,i,l,u,c,d,f,p,h,m,g,y,b,v,_,S,w,k,I,T,x;t=e.state,r=e.next_in,T=e.input,a=r+(e.avail_in-5),s=e.next_out,x=e.output,o=s-(n-e.avail_out),i=s+(e.avail_out-257),l=t.dmax,u=t.wsize,c=t.whave,d=t.wnext,f=t.window,p=t.hold,h=t.bits,m=t.lencode,g=t.distcode,y=(1<<t.lenbits)-1,b=(1<<t.distbits)-1;e:do{h<15&&(p+=T[r++]<<h,h+=8,p+=T[r++]<<h,h+=8),v=m[p&y];n:for(;;){if(p>>>=_=v>>>24,h-=_,0===(_=v>>>16&255))x[s++]=65535&v;else{if(!(16&_)){if(0==(64&_)){v=m[(65535&v)+(p&(1<<_)-1)];continue n}if(32&_){t.mode=12;break e}e.msg="invalid literal/length code",t.mode=30;break e}S=65535&v,(_&=15)&&(h<_&&(p+=T[r++]<<h,h+=8),S+=p&(1<<_)-1,p>>>=_,h-=_),h<15&&(p+=T[r++]<<h,h+=8,p+=T[r++]<<h,h+=8),v=g[p&b];t:for(;;){if(p>>>=_=v>>>24,h-=_,!(16&(_=v>>>16&255))){if(0==(64&_)){v=g[(65535&v)+(p&(1<<_)-1)];continue t}e.msg="invalid distance code",t.mode=30;break e}if(w=65535&v,h<(_&=15)&&(p+=T[r++]<<h,(h+=8)<_&&(p+=T[r++]<<h,h+=8)),l<(w+=p&(1<<_)-1)){e.msg="invalid distance too far back",t.mode=30;break e}if(p>>>=_,h-=_,(_=s-o)<w){if(c<(_=w-_)&&t.sane){e.msg="invalid distance too far back",t.mode=30;break e}if(I=f,(k=0)===d){if(k+=u-_,_<S){for(S-=_;x[s++]=f[k++],--_;);k=s-w,I=x}}else if(d<_){if(k+=u+d-_,(_-=d)<S){for(S-=_;x[s++]=f[k++],--_;);if(k=0,d<S){for(S-=_=d;x[s++]=f[k++],--_;);k=s-w,I=x}}}else if(k+=d-_,_<S){for(S-=_;x[s++]=f[k++],--_;);k=s-w,I=x}for(;2<S;)x[s++]=I[k++],x[s++]=I[k++],x[s++]=I[k++],S-=3;S&&(x[s++]=I[k++],1<S&&(x[s++]=I[k++]))}else{for(k=s-w;x[s++]=x[k++],x[s++]=x[k++],x[s++]=x[k++],2<(S-=3););S&&(x[s++]=x[k++],1<S&&(x[s++]=x[k++]))}break}}break}}while(r<a&&s<i);r-=S=h>>3,p&=(1<<(h-=S<<3))-1,e.next_in=r,e.next_out=s,e.avail_in=r<a?a-r+5:5-(r-a),e.avail_out=s<i?i-s+257:257-(s-i),t.hold=p,t.bits=h}},{}],49:[function(e,n,t){"use strict";var r=e("../utils/common"),a=e("./adler32"),s=e("./crc32"),o=e("./inffast"),i=e("./inftrees"),l=1,u=2,c=0,d=-2,f=1,p=852,h=592;function m(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(e){var n;return e&&e.state?(n=e.state,e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=1&n.wrap),n.mode=f,n.last=0,n.havedict=0,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new r.Buf32(p),n.distcode=n.distdyn=new r.Buf32(h),n.sane=1,n.back=-1,c):d}function b(e){var n;return e&&e.state?((n=e.state).wsize=0,n.whave=0,n.wnext=0,y(e)):d}function v(e,n){var t,r;return e&&e.state?(r=e.state,n<0?(t=0,n=-n):(t=1+(n>>4),n<48&&(n&=15)),n&&(n<8||15<n)?d:(null!==r.window&&r.wbits!==n&&(r.window=null),r.wrap=t,r.wbits=n,b(e))):d}function _(e,n){var t,r;return e?(r=new g,(e.state=r).window=null,(t=v(e,n))!==c&&(e.state=null),t):d}var S,w,k=!0;function I(e){if(k){var n;for(S=new r.Buf32(512),w=new r.Buf32(32),n=0;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(i(l,e.lens,0,288,S,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;i(u,e.lens,0,32,w,0,e.work,{bits:5}),k=!1}e.lencode=S,e.lenbits=9,e.distcode=w,e.distbits=5}function T(e,n,t,a){var s,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),a>=o.wsize?(r.arraySet(o.window,n,t-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(a<(s=o.wsize-o.wnext)&&(s=a),r.arraySet(o.window,n,t-a,s,o.wnext),(a-=s)?(r.arraySet(o.window,n,t-a,a,0),o.wnext=a,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}t.inflateReset=b,t.inflateReset2=v,t.inflateResetKeep=y,t.inflateInit=function(e){return _(e,15)},t.inflateInit2=_,t.inflate=function(e,n){var t,p,h,g,y,b,v,_,S,w,k,x,A,E,O,C,M,F,P,N,R,L,D,z,U=0,j=new r.Buf8(4),B=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;12===(t=e.state).mode&&(t.mode=13),y=e.next_out,h=e.output,v=e.avail_out,g=e.next_in,p=e.input,b=e.avail_in,_=t.hold,S=t.bits,w=b,k=v,L=c;e:for(;;)switch(t.mode){case f:if(0===t.wrap){t.mode=13;break}for(;S<16;){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}if(2&t.wrap&&35615===_){j[t.check=0]=255&_,j[1]=_>>>8&255,t.check=s(t.check,j,2,0),S=_=0,t.mode=2;break}if(t.flags=0,t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&_)<<8)+(_>>8))%31){e.msg="incorrect header check",t.mode=30;break}if(8!=(15&_)){e.msg="unknown compression method",t.mode=30;break}if(S-=4,R=8+(15&(_>>>=4)),0===t.wbits)t.wbits=R;else if(R>t.wbits){e.msg="invalid window size",t.mode=30;break}t.dmax=1<<R,e.adler=t.check=1,t.mode=512&_?10:12,S=_=0;break;case 2:for(;S<16;){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}if(t.flags=_,8!=(255&t.flags)){e.msg="unknown compression method",t.mode=30;break}if(57344&t.flags){e.msg="unknown header flags set",t.mode=30;break}t.head&&(t.head.text=_>>8&1),512&t.flags&&(j[0]=255&_,j[1]=_>>>8&255,t.check=s(t.check,j,2,0)),S=_=0,t.mode=3;case 3:for(;S<32;){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}t.head&&(t.head.time=_),512&t.flags&&(j[0]=255&_,j[1]=_>>>8&255,j[2]=_>>>16&255,j[3]=_>>>24&255,t.check=s(t.check,j,4,0)),S=_=0,t.mode=4;case 4:for(;S<16;){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}t.head&&(t.head.xflags=255&_,t.head.os=_>>8),512&t.flags&&(j[0]=255&_,j[1]=_>>>8&255,t.check=s(t.check,j,2,0)),S=_=0,t.mode=5;case 5:if(1024&t.flags){for(;S<16;){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}t.length=_,t.head&&(t.head.extra_len=_),512&t.flags&&(j[0]=255&_,j[1]=_>>>8&255,t.check=s(t.check,j,2,0)),S=_=0}else t.head&&(t.head.extra=null);t.mode=6;case 6:if(1024&t.flags&&(b<(x=t.length)&&(x=b),x&&(t.head&&(R=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),r.arraySet(t.head.extra,p,g,x,R)),512&t.flags&&(t.check=s(t.check,p,x,g)),b-=x,g+=x,t.length-=x),t.length))break e;t.length=0,t.mode=7;case 7:if(2048&t.flags){if(0===b)break e;for(x=0;R=p[g+x++],t.head&&R&&t.length<65536&&(t.head.name+=String.fromCharCode(R)),R&&x<b;);if(512&t.flags&&(t.check=s(t.check,p,x,g)),b-=x,g+=x,R)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=8;case 8:if(4096&t.flags){if(0===b)break e;for(x=0;R=p[g+x++],t.head&&R&&t.length<65536&&(t.head.comment+=String.fromCharCode(R)),R&&x<b;);if(512&t.flags&&(t.check=s(t.check,p,x,g)),b-=x,g+=x,R)break e}else t.head&&(t.head.comment=null);t.mode=9;case 9:if(512&t.flags){for(;S<16;){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}if(_!==(65535&t.check)){e.msg="header crc mismatch",t.mode=30;break}S=_=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=12;break;case 10:for(;S<32;){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}e.adler=t.check=m(_),S=_=0,t.mode=11;case 11:if(0===t.havedict)return e.next_out=y,e.avail_out=v,e.next_in=g,e.avail_in=b,t.hold=_,t.bits=S,2;e.adler=t.check=1,t.mode=12;case 12:if(5===n||6===n)break e;case 13:if(t.last){_>>>=7&S,S-=7&S,t.mode=27;break}for(;S<3;){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}switch(t.last=1&_,S-=1,3&(_>>>=1)){case 0:t.mode=14;break;case 1:if(I(t),t.mode=20,6!==n)break;_>>>=2,S-=2;break e;case 2:t.mode=17;break;case 3:e.msg="invalid block type",t.mode=30}_>>>=2,S-=2;break;case 14:for(_>>>=7&S,S-=7&S;S<32;){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}if((65535&_)!=(_>>>16^65535)){e.msg="invalid stored block lengths",t.mode=30;break}if(t.length=65535&_,S=_=0,t.mode=15,6===n)break e;case 15:t.mode=16;case 16:if(x=t.length){if(b<x&&(x=b),v<x&&(x=v),0===x)break e;r.arraySet(h,p,g,x,y),b-=x,g+=x,v-=x,y+=x,t.length-=x;break}t.mode=12;break;case 17:for(;S<14;){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}if(t.nlen=257+(31&_),_>>>=5,S-=5,t.ndist=1+(31&_),_>>>=5,S-=5,t.ncode=4+(15&_),_>>>=4,S-=4,286<t.nlen||30<t.ndist){e.msg="too many length or distance symbols",t.mode=30;break}t.have=0,t.mode=18;case 18:for(;t.have<t.ncode;){for(;S<3;){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}t.lens[B[t.have++]]=7&_,_>>>=3,S-=3}for(;t.have<19;)t.lens[B[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,D={bits:t.lenbits},L=i(0,t.lens,0,19,t.lencode,0,t.work,D),t.lenbits=D.bits,L){e.msg="invalid code lengths set",t.mode=30;break}t.have=0,t.mode=19;case 19:for(;t.have<t.nlen+t.ndist;){for(;C=(U=t.lencode[_&(1<<t.lenbits)-1])>>>16&255,M=65535&U,!((O=U>>>24)<=S);){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}if(M<16)_>>>=O,S-=O,t.lens[t.have++]=M;else{if(16===M){for(z=O+2;S<z;){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}if(_>>>=O,S-=O,0===t.have){e.msg="invalid bit length repeat",t.mode=30;break}R=t.lens[t.have-1],x=3+(3&_),_>>>=2,S-=2}else if(17===M){for(z=O+3;S<z;){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}S-=O,R=0,x=3+(7&(_>>>=O)),_>>>=3,S-=3}else{for(z=O+7;S<z;){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}S-=O,R=0,x=11+(127&(_>>>=O)),_>>>=7,S-=7}if(t.have+x>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=30;break}for(;x--;)t.lens[t.have++]=R}}if(30===t.mode)break;if(0===t.lens[256]){e.msg="invalid code -- missing end-of-block",t.mode=30;break}if(t.lenbits=9,D={bits:t.lenbits},L=i(l,t.lens,0,t.nlen,t.lencode,0,t.work,D),t.lenbits=D.bits,L){e.msg="invalid literal/lengths set",t.mode=30;break}if(t.distbits=6,t.distcode=t.distdyn,D={bits:t.distbits},L=i(u,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,D),t.distbits=D.bits,L){e.msg="invalid distances set",t.mode=30;break}if(t.mode=20,6===n)break e;case 20:t.mode=21;case 21:if(6<=b&&258<=v){e.next_out=y,e.avail_out=v,e.next_in=g,e.avail_in=b,t.hold=_,t.bits=S,o(e,k),y=e.next_out,h=e.output,v=e.avail_out,g=e.next_in,p=e.input,b=e.avail_in,_=t.hold,S=t.bits,12===t.mode&&(t.back=-1);break}for(t.back=0;C=(U=t.lencode[_&(1<<t.lenbits)-1])>>>16&255,M=65535&U,!((O=U>>>24)<=S);){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}if(C&&0==(240&C)){for(F=O,P=C,N=M;C=(U=t.lencode[N+((_&(1<<F+P)-1)>>F)])>>>16&255,M=65535&U,!(F+(O=U>>>24)<=S);){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}_>>>=F,S-=F,t.back+=F}if(_>>>=O,S-=O,t.back+=O,t.length=M,0===C){t.mode=26;break}if(32&C){t.back=-1,t.mode=12;break}if(64&C){e.msg="invalid literal/length code",t.mode=30;break}t.extra=15&C,t.mode=22;case 22:if(t.extra){for(z=t.extra;S<z;){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}t.length+=_&(1<<t.extra)-1,_>>>=t.extra,S-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=23;case 23:for(;C=(U=t.distcode[_&(1<<t.distbits)-1])>>>16&255,M=65535&U,!((O=U>>>24)<=S);){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}if(0==(240&C)){for(F=O,P=C,N=M;C=(U=t.distcode[N+((_&(1<<F+P)-1)>>F)])>>>16&255,M=65535&U,!(F+(O=U>>>24)<=S);){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}_>>>=F,S-=F,t.back+=F}if(_>>>=O,S-=O,t.back+=O,64&C){e.msg="invalid distance code",t.mode=30;break}t.offset=M,t.extra=15&C,t.mode=24;case 24:if(t.extra){for(z=t.extra;S<z;){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}t.offset+=_&(1<<t.extra)-1,_>>>=t.extra,S-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=30;break}t.mode=25;case 25:if(0===v)break e;if(x=k-v,t.offset>x){if((x=t.offset-x)>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=30;break}A=x>t.wnext?(x-=t.wnext,t.wsize-x):t.wnext-x,x>t.length&&(x=t.length),E=t.window}else E=h,A=y-t.offset,x=t.length;for(v<x&&(x=v),v-=x,t.length-=x;h[y++]=E[A++],--x;);0===t.length&&(t.mode=21);break;case 26:if(0===v)break e;h[y++]=t.length,v--,t.mode=21;break;case 27:if(t.wrap){for(;S<32;){if(0===b)break e;b--,_|=p[g++]<<S,S+=8}if(k-=v,e.total_out+=k,t.total+=k,k&&(e.adler=t.check=t.flags?s(t.check,h,k,y-k):a(t.check,h,k,y-k)),k=v,(t.flags?_:m(_))!==t.check){e.msg="incorrect data check",t.mode=30;break}S=_=0}t.mode=28;case 28:if(t.wrap&&t.flags){for(;S<32;){if(0===b)break e;b--,_+=p[g++]<<S,S+=8}if(_!==(4294967295&t.total)){e.msg="incorrect length check",t.mode=30;break}S=_=0}t.mode=29;case 29:L=1;break e;case 30:L=-3;break e;case 31:return-4;default:return d}return e.next_out=y,e.avail_out=v,e.next_in=g,e.avail_in=b,t.hold=_,t.bits=S,(t.wsize||k!==e.avail_out&&t.mode<30&&(t.mode<27||4!==n))&&T(e,e.output,e.next_out,k-e.avail_out)?(t.mode=31,-4):(w-=e.avail_in,k-=e.avail_out,e.total_in+=w,e.total_out+=k,t.total+=k,t.wrap&&k&&(e.adler=t.check=t.flags?s(t.check,h,k,e.next_out-k):a(t.check,h,k,e.next_out-k)),e.data_type=t.bits+(t.last?64:0)+(12===t.mode?128:0)+(20===t.mode||15===t.mode?256:0),(0==w&&0===k||4===n)&&L===c&&(L=-5),L)},t.inflateEnd=function(e){if(!e||!e.state)return d;var n=e.state;return n.window&&(n.window=null),e.state=null,c},t.inflateGetHeader=function(e,n){var t;return e&&e.state?0==(2&(t=e.state).wrap)?d:((t.head=n).done=!1,c):d},t.inflateSetDictionary=function(e,n){var t,r=n.length;return e&&e.state?0!==(t=e.state).wrap&&11!==t.mode?d:11===t.mode&&a(1,n,r,0)!==t.check?-3:T(e,n,r,r)?(t.mode=31,-4):(t.havedict=1,c):d},t.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,n,t){"use strict";var r=e("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],i=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(e,n,t,l,u,c,d,f){var p,h,m,g,y,b,v,_,S,w=f.bits,k=0,I=0,T=0,x=0,A=0,E=0,O=0,C=0,M=0,F=0,P=null,N=0,R=new r.Buf16(16),L=new r.Buf16(16),D=null,z=0;for(k=0;k<=15;k++)R[k]=0;for(I=0;I<l;I++)R[n[t+I]]++;for(A=w,x=15;1<=x&&0===R[x];x--);if(x<A&&(A=x),0===x)return u[c++]=20971520,u[c++]=20971520,f.bits=1,0;for(T=1;T<x&&0===R[T];T++);for(A<T&&(A=T),k=C=1;k<=15;k++)if(C<<=1,(C-=R[k])<0)return-1;if(0<C&&(0===e||1!==x))return-1;for(L[1]=0,k=1;k<15;k++)L[k+1]=L[k]+R[k];for(I=0;I<l;I++)0!==n[t+I]&&(d[L[n[t+I]]++]=I);if(b=0===e?(P=D=d,19):1===e?(P=a,N-=257,D=s,z-=257,256):(P=o,D=i,-1),k=T,y=c,O=I=F=0,m=-1,g=(M=1<<(E=A))-1,1===e&&852<M||2===e&&592<M)return 1;for(;;){for(v=k-O,S=d[I]<b?(_=0,d[I]):d[I]>b?(_=D[z+d[I]],P[N+d[I]]):(_=96,0),p=1<<k-O,T=h=1<<E;u[y+(F>>O)+(h-=p)]=v<<24|_<<16|S|0,0!==h;);for(p=1<<k-1;F&p;)p>>=1;if(0!==p?(F&=p-1,F+=p):F=0,I++,0==--R[k]){if(k===x)break;k=n[t+d[I]]}if(A<k&&(F&g)!==m){for(0===O&&(O=A),y+=T,C=1<<(E=k-O);E+O<x&&!((C-=R[E+O])<=0);)E++,C<<=1;if(M+=1<<E,1===e&&852<M||2===e&&592<M)return 1;u[m=F&g]=A<<24|E<<16|y-c|0}}return 0!==F&&(u[y+F]=k-O<<24|64<<16|0),f.bits=A,0}},{"../utils/common":41}],51:[function(e,n,t){"use strict";n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,n,t){"use strict";var r=e("../utils/common"),a=0,s=1;function o(e){for(var n=e.length;0<=--n;)e[n]=0}var i=0,l=29,u=256,c=u+1+l,d=30,f=19,p=2*c+1,h=15,m=16,g=7,y=256,b=16,v=17,_=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],w=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],T=new Array(2*(c+2));o(T);var x=new Array(2*d);o(x);var A=new Array(512);o(A);var E=new Array(256);o(E);var O=new Array(l);o(O);var C,M,F,P=new Array(d);function N(e,n,t,r,a){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function R(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}function L(e){return e<256?A[e]:A[256+(e>>>7)]}function D(e,n){e.pending_buf[e.pending++]=255&n,e.pending_buf[e.pending++]=n>>>8&255}function z(e,n,t){e.bi_valid>m-t?(e.bi_buf|=n<<e.bi_valid&65535,D(e,e.bi_buf),e.bi_buf=n>>m-e.bi_valid,e.bi_valid+=t-m):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)}function U(e,n,t){z(e,t[2*n],t[2*n+1])}function j(e,n){for(var t=0;t|=1&e,e>>>=1,t<<=1,0<--n;);return t>>>1}function B(e,n,t){var r,a,s=new Array(h+1),o=0;for(r=1;r<=h;r++)s[r]=o=o+t[r-1]<<1;for(a=0;a<=n;a++){var i=e[2*a+1];0!==i&&(e[2*a]=j(s[i]++,i))}}function V(e){var n;for(n=0;n<c;n++)e.dyn_ltree[2*n]=0;for(n=0;n<d;n++)e.dyn_dtree[2*n]=0;for(n=0;n<f;n++)e.bl_tree[2*n]=0;e.dyn_ltree[2*y]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function G(e){8<e.bi_valid?D(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function W(e,n,t,r){var a=2*n,s=2*t;return e[a]<e[s]||e[a]===e[s]&&r[n]<=r[t]}function $(e,n,t){for(var r=e.heap[t],a=t<<1;a<=e.heap_len&&(a<e.heap_len&&W(n,e.heap[a+1],e.heap[a],e.depth)&&a++,!W(n,r,e.heap[a],e.depth));)e.heap[t]=e.heap[a],t=a,a<<=1;e.heap[t]=r}function H(e,n,t){var r,a,s,o,i=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*i]<<8|e.pending_buf[e.d_buf+2*i+1],a=e.pending_buf[e.l_buf+i],i++,0===r?U(e,a,n):(U(e,(s=E[a])+u+1,n),0!==(o=S[s])&&z(e,a-=O[s],o),U(e,s=L(--r),t),0!==(o=w[s])&&z(e,r-=P[s],o)),i<e.last_lit;);U(e,y,n)}function K(e,n){var t,r,a,s=n.dyn_tree,o=n.stat_desc.static_tree,i=n.stat_desc.has_stree,l=n.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=p,t=0;t<l;t++)0!==s[2*t]?(e.heap[++e.heap_len]=u=t,e.depth[t]=0):s[2*t+1]=0;for(;e.heap_len<2;)s[2*(a=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[a]=0,e.opt_len--,i&&(e.static_len-=o[2*a+1]);for(n.max_code=u,t=e.heap_len>>1;1<=t;t--)$(e,s,t);for(a=l;t=e.heap[1],e.heap[1]=e.heap[e.heap_len--],$(e,s,1),r=e.heap[1],e.heap[--e.heap_max]=t,e.heap[--e.heap_max]=r,s[2*a]=s[2*t]+s[2*r],e.depth[a]=(e.depth[t]>=e.depth[r]?e.depth[t]:e.depth[r])+1,s[2*t+1]=s[2*r+1]=a,e.heap[1]=a++,$(e,s,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,n){var t,r,a,s,o,i,l=n.dyn_tree,u=n.max_code,c=n.stat_desc.static_tree,d=n.stat_desc.has_stree,f=n.stat_desc.extra_bits,m=n.stat_desc.extra_base,g=n.stat_desc.max_length,y=0;for(s=0;s<=h;s++)e.bl_count[s]=0;for(l[2*e.heap[e.heap_max]+1]=0,t=e.heap_max+1;t<p;t++)g<(s=l[2*l[2*(r=e.heap[t])+1]+1]+1)&&(s=g,y++),l[2*r+1]=s,u<r||(e.bl_count[s]++,o=0,m<=r&&(o=f[r-m]),i=l[2*r],e.opt_len+=i*(s+o),d&&(e.static_len+=i*(c[2*r+1]+o)));if(0!==y){do{for(s=g-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[g]--,y-=2}while(0<y);for(s=g;0!==s;s--)for(r=e.bl_count[s];0!==r;)u<(a=e.heap[--t])||(l[2*a+1]!==s&&(e.opt_len+=(s-l[2*a+1])*l[2*a],l[2*a+1]=s),r--)}}(e,n),B(s,u,e.bl_count)}function q(e,n,t){var r,a,s=-1,o=n[1],i=0,l=7,u=4;for(0===o&&(l=138,u=3),n[2*(t+1)+1]=65535,r=0;r<=t;r++)a=o,o=n[2*(r+1)+1],++i<l&&a===o||(i<u?e.bl_tree[2*a]+=i:0!==a?(a!==s&&e.bl_tree[2*a]++,e.bl_tree[2*b]++):i<=10?e.bl_tree[2*v]++:e.bl_tree[2*_]++,s=a,u=(i=0)===o?(l=138,3):a===o?(l=6,3):(l=7,4))}function Y(e,n,t){var r,a,s=-1,o=n[1],i=0,l=7,u=4;for(0===o&&(l=138,u=3),r=0;r<=t;r++)if(a=o,o=n[2*(r+1)+1],!(++i<l&&a===o)){if(i<u)for(;U(e,a,e.bl_tree),0!=--i;);else 0!==a?(a!==s&&(U(e,a,e.bl_tree),i--),U(e,b,e.bl_tree),z(e,i-3,2)):i<=10?(U(e,v,e.bl_tree),z(e,i-3,3)):(U(e,_,e.bl_tree),z(e,i-11,7));s=a,u=(i=0)===o?(l=138,3):a===o?(l=6,3):(l=7,4)}}o(P);var X=!1;function J(e,n,t,a){z(e,(i<<1)+(a?1:0),3),function(e,n,t,a){G(e),a&&(D(e,t),D(e,~t)),r.arraySet(e.pending_buf,e.window,n,t,e.pending),e.pending+=t}(e,n,t,!0)}t._tr_init=function(e){X||(function(){var e,n,t,r,a,s=new Array(h+1);for(r=t=0;r<l-1;r++)for(O[r]=t,e=0;e<1<<S[r];e++)E[t++]=r;for(E[t-1]=r,r=a=0;r<16;r++)for(P[r]=a,e=0;e<1<<w[r];e++)A[a++]=r;for(a>>=7;r<d;r++)for(P[r]=a<<7,e=0;e<1<<w[r]-7;e++)A[256+a++]=r;for(n=0;n<=h;n++)s[n]=0;for(e=0;e<=143;)T[2*e+1]=8,e++,s[8]++;for(;e<=255;)T[2*e+1]=9,e++,s[9]++;for(;e<=279;)T[2*e+1]=7,e++,s[7]++;for(;e<=287;)T[2*e+1]=8,e++,s[8]++;for(B(T,c+1,s),e=0;e<d;e++)x[2*e+1]=5,x[2*e]=j(e,5);C=new N(T,S,u+1,c,h),M=new N(x,w,0,d,h),F=new N(new Array(0),k,0,f,g)}(),X=!0),e.l_desc=new R(e.dyn_ltree,C),e.d_desc=new R(e.dyn_dtree,M),e.bl_desc=new R(e.bl_tree,F),e.bi_buf=0,e.bi_valid=0,V(e)},t._tr_stored_block=J,t._tr_flush_block=function(e,n,t,r){var o,i,l=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var n,t=4093624447;for(n=0;n<=31;n++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*n])return a;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return s;for(n=32;n<u;n++)if(0!==e.dyn_ltree[2*n])return s;return a}(e)),K(e,e.l_desc),K(e,e.d_desc),l=function(e){var n;for(q(e,e.dyn_ltree,e.l_desc.max_code),q(e,e.dyn_dtree,e.d_desc.max_code),K(e,e.bl_desc),n=f-1;3<=n&&0===e.bl_tree[2*I[n]+1];n--);return e.opt_len+=3*(n+1)+5+5+4,n}(e),o=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=o&&(o=i)):o=i=t+5,t+4<=o&&-1!==n?J(e,n,t,r):4===e.strategy||i===o?(z(e,2+(r?1:0),3),H(e,T,x)):(z(e,4+(r?1:0),3),function(e,n,t,r){var a;for(z(e,n-257,5),z(e,t-1,5),z(e,r-4,4),a=0;a<r;a++)z(e,e.bl_tree[2*I[a]+1],3);Y(e,e.dyn_ltree,n-1),Y(e,e.dyn_dtree,t-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),H(e,e.dyn_ltree,e.dyn_dtree)),V(e),r&&G(e)},t._tr_tally=function(e,n,t){return e.pending_buf[e.d_buf+2*e.last_lit]=n>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&n,e.pending_buf[e.l_buf+e.last_lit]=255&t,e.last_lit++,0===n?e.dyn_ltree[2*t]++:(e.matches++,n--,e.dyn_ltree[2*(E[t]+u+1)]++,e.dyn_dtree[2*L(n)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){z(e,2,3),U(e,y,T),function(e){16===e.bi_valid?(D(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,n,t){"use strict";n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,n,r){(function(e){!function(e,n){"use strict";if(!e.setImmediate){var t,r,a,s,o=1,i={},l=!1,u=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,t="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){f(e)}))}:function(){if(e.postMessage&&!e.importScripts){var n=!0,t=e.onmessage;return e.onmessage=function(){n=!1},e.postMessage("","*"),e.onmessage=t,n}}()?(s="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",p,!1):e.attachEvent("onmessage",p),function(n){e.postMessage(s+n,"*")}):e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){f(e.data)},function(e){a.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,function(e){var n=u.createElement("script");n.onreadystatechange=function(){f(e),n.onreadystatechange=null,r.removeChild(n),n=null},r.appendChild(n)}):function(e){setTimeout(f,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var n=new Array(arguments.length-1),r=0;r<n.length;r++)n[r]=arguments[r+1];var a={callback:e,args:n};return i[o]=a,t(o),o++},c.clearImmediate=d}function d(e){delete i[e]}function f(e){if(l)setTimeout(f,0,e);else{var t=i[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{d(e),l=!1}}}}function p(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(s)&&f(+n.data.slice(s.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,"undefined"!=typeof t.g?t.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},888:(e,n,t)=>{"use strict";var r=t(47);function a(){}function s(){}s.resetWarningCache=a,e.exports=function(){function e(e,n,t,a,s,o){if(o!==r){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function n(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:s,resetWarningCache:a};return t.PropTypes=t,t}},7:(e,n,t)=>{e.exports=t(888)()},47:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:(e,n,t)=>{"use strict";var r=t(791),a=t(296);function s(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,i={};function l(e,n){u(e,n),u(e+"Capture",n)}function u(e,n){for(i[e]=n,e=0;e<n.length;e++)o.add(n[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},h={};function m(e,n,t,r,a,s,o){this.acceptsBooleans=2===n||3===n||4===n,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var n=e[0];g[n]=new m(n,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,n,t,r){var a=g.hasOwnProperty(n)?g[n]:null;(null!==a?0!==a.type:r||!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&(function(e,n,t,r){if(null===n||"undefined"===typeof n||function(e,n,t,r){if(null!==t&&0===t.type)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==t?!t.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,n,t,r))return!0;if(r)return!1;if(null!==t)switch(t.type){case 3:return!n;case 4:return!1===n;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}(n,t,a,r)&&(t=null),r||null===a?function(e){return!!d.call(h,e)||!d.call(p,e)&&(f.test(e)?h[e]=!0:(p[e]=!0,!1))}(n)&&(null===t?e.removeAttribute(n):e.setAttribute(n,""+t)):a.mustUseProperty?e[a.propertyName]=null===t?3!==a.type&&"":t:(n=a.attributeName,r=a.attributeNamespace,null===t?e.removeAttribute(n):(t=3===(a=a.type)||4===a&&!0===t?"":""+t,r?e.setAttributeNS(r,n,t):e.setAttribute(n,t))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var n=e.replace(y,b);g[n]=new m(n,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var n=e.replace(y,b);g[n]=new m(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var n=e.replace(y,b);g[n]=new m(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),w=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),A=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),F=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var L,D=Object.assign;function z(e){if(void 0===L)try{throw Error()}catch(t){var n=t.stack.trim().match(/\n( *(at )?)/);L=n&&n[1]||""}return"\n"+L+e}var U=!1;function j(e,n){if(!e||U)return"";U=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(u){var r=u}Reflect.construct(e,[],n)}else{try{n.call()}catch(u){r=u}e.call(n.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var a=u.stack.split("\n"),s=r.stack.split("\n"),o=a.length-1,i=s.length-1;1<=o&&0<=i&&a[o]!==s[i];)i--;for(;1<=o&&0<=i;o--,i--)if(a[o]!==s[i]){if(1!==o||1!==i)do{if(o--,0>--i||a[o]!==s[i]){var l="\n"+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=i);break}}}finally{U=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?z(e):""}function B(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case w:return"Portal";case T:return"Profiler";case I:return"StrictMode";case O:return"Suspense";case C:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case x:return(e._context.displayName||"Context")+".Provider";case E:var n=e.render;return(e=e.displayName)||(e=""!==(e=n.displayName||n.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(n=e.displayName||null)?n:V(e.type)||"Memo";case F:n=e._payload,e=e._init;try{return V(e(n))}catch(t){}}return null}function G(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=n.render).displayName||e.name||"",n.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(n);case 8:return n===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof n)return n.displayName||n.name||null;if("string"===typeof n)return n}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function $(e){var n=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===n||"radio"===n)}function H(e){e._valueTracker||(e._valueTracker=function(e){var n=$(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),r=""+e[n];if(!e.hasOwnProperty(n)&&"undefined"!==typeof t&&"function"===typeof t.get&&"function"===typeof t.set){var a=t.get,s=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}(e))}function K(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==t&&(n.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(n){return e.body}}function Y(e,n){var t=n.checked;return D({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=t?t:e._wrapperState.initialChecked})}function X(e,n){var t=null==n.defaultValue?"":n.defaultValue,r=null!=n.checked?n.checked:n.defaultChecked;t=W(null!=n.value?n.value:t),e._wrapperState={initialChecked:r,initialValue:t,controlled:"checkbox"===n.type||"radio"===n.type?null!=n.checked:null!=n.value}}function J(e,n){null!=(n=n.checked)&&v(e,"checked",n,!1)}function Z(e,n){J(e,n);var t=W(n.value),r=n.type;if(null!=t)"number"===r?(0===t&&""===e.value||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");n.hasOwnProperty("value")?ee(e,n.type,t):n.hasOwnProperty("defaultValue")&&ee(e,n.type,W(n.defaultValue)),null==n.checked&&null!=n.defaultChecked&&(e.defaultChecked=!!n.defaultChecked)}function Q(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var r=n.type;if(!("submit"!==r&&"reset"!==r||void 0!==n.value&&null!==n.value))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==t&&(e.name=t)}function ee(e,n,t){"number"===n&&q(e.ownerDocument)===e||(null==t?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var ne=Array.isArray;function te(e,n,t,r){if(e=e.options,n){n={};for(var a=0;a<t.length;a++)n["$"+t[a]]=!0;for(t=0;t<e.length;t++)a=n.hasOwnProperty("$"+e[t].value),e[t].selected!==a&&(e[t].selected=a),a&&r&&(e[t].defaultSelected=!0)}else{for(t=""+W(t),n=null,a=0;a<e.length;a++){if(e[a].value===t)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==n||e[a].disabled||(n=e[a])}null!==n&&(n.selected=!0)}}function re(e,n){if(null!=n.dangerouslySetInnerHTML)throw Error(s(91));return D({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,n){var t=n.value;if(null==t){if(t=n.children,n=n.defaultValue,null!=t){if(null!=n)throw Error(s(92));if(ne(t)){if(1<t.length)throw Error(s(93));t=t[0]}n=t}null==n&&(n=""),t=n}e._wrapperState={initialValue:W(t)}}function se(e,n){var t=W(n.value),r=W(n.defaultValue);null!=t&&((t=""+t)!==e.value&&(e.value=t),null==n.defaultValue&&e.defaultValue!==t&&(e.defaultValue=t)),null!=r&&(e.defaultValue=""+r)}function oe(e){var n=e.textContent;n===e._wrapperState.initialValue&&""!==n&&null!==n&&(e.value=n)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,n){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(n):"http://www.w3.org/2000/svg"===e&&"foreignObject"===n?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,n){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=n;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,t,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,n)}))}:ce);function fe(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&3===t.nodeType)return void(t.nodeValue=n)}e.textContent=n}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function me(e,n,t){return null==n||"boolean"===typeof n||""===n?"":t||"number"!==typeof n||0===n||pe.hasOwnProperty(e)&&pe[e]?(""+n).trim():n+"px"}function ge(e,n){for(var t in e=e.style,n)if(n.hasOwnProperty(t)){var r=0===t.indexOf("--"),a=me(t,n[t],r);"float"===t&&(t="cssFloat"),r?e.setProperty(t,a):e[t]=a}}Object.keys(pe).forEach((function(e){he.forEach((function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),pe[n]=pe[e]}))}));var ye=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,n){if(n){if(ye[e]&&(null!=n.children||null!=n.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=n.dangerouslySetInnerHTML){if(null!=n.children)throw Error(s(60));if("object"!==typeof n.dangerouslySetInnerHTML||!("__html"in n.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=n.style&&"object"!==typeof n.style)throw Error(s(62))}}function ve(e,n){if(-1===e.indexOf("-"))return"string"===typeof n.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,ke=null,Ie=null;function Te(e){if(e=va(e)){if("function"!==typeof we)throw Error(s(280));var n=e.stateNode;n&&(n=Sa(n),we(e.stateNode,e.type,n))}}function xe(e){ke?Ie?Ie.push(e):Ie=[e]:ke=e}function Ae(){if(ke){var e=ke,n=Ie;if(Ie=ke=null,Te(e),n)for(e=0;e<n.length;e++)Te(n[e])}}function Ee(e,n){return e(n)}function Oe(){}var Ce=!1;function Me(e,n,t){if(Ce)return e(n,t);Ce=!0;try{return Ee(e,n,t)}finally{Ce=!1,(null!==ke||null!==Ie)&&(Oe(),Ae())}}function Fe(e,n){var t=e.stateNode;if(null===t)return null;var r=Sa(t);if(null===r)return null;t=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(t&&"function"!==typeof t)throw Error(s(231,n,typeof t));return t}var Pe=!1;if(c)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(ce){Pe=!1}function Re(e,n,t,r,a,s,o,i,l){var u=Array.prototype.slice.call(arguments,3);try{n.apply(t,u)}catch(c){this.onError(c)}}var Le=!1,De=null,ze=!1,Ue=null,je={onError:function(e){Le=!0,De=e}};function Be(e,n,t,r,a,s,o,i,l){Le=!1,De=null,Re.apply(je,arguments)}function Ve(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do{0!==(4098&(n=e).flags)&&(t=n.return),e=n.return}while(e)}return 3===n.tag?t:null}function Ge(e){if(13===e.tag){var n=e.memoizedState;if(null===n&&(null!==(e=e.alternate)&&(n=e.memoizedState)),null!==n)return n.dehydrated}return null}function We(e){if(Ve(e)!==e)throw Error(s(188))}function $e(e){return null!==(e=function(e){var n=e.alternate;if(!n){if(null===(n=Ve(e)))throw Error(s(188));return n!==e?null:e}for(var t=e,r=n;;){var a=t.return;if(null===a)break;var o=a.alternate;if(null===o){if(null!==(r=a.return)){t=r;continue}break}if(a.child===o.child){for(o=a.child;o;){if(o===t)return We(a),e;if(o===r)return We(a),n;o=o.sibling}throw Error(s(188))}if(t.return!==r.return)t=a,r=o;else{for(var i=!1,l=a.child;l;){if(l===t){i=!0,t=a,r=o;break}if(l===r){i=!0,r=a,t=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===t){i=!0,t=o,r=a;break}if(l===r){i=!0,r=o,t=a;break}l=l.sibling}if(!i)throw Error(s(189))}}if(t.alternate!==r)throw Error(s(190))}if(3!==t.tag)throw Error(s(188));return t.stateNode.current===t?e:n}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var n=He(e);if(null!==n)return n;e=e.sibling}return null}var Ke=a.unstable_scheduleCallback,qe=a.unstable_cancelCallback,Ye=a.unstable_shouldYield,Xe=a.unstable_requestPaint,Je=a.unstable_now,Ze=a.unstable_getCurrentPriorityLevel,Qe=a.unstable_ImmediatePriority,en=a.unstable_UserBlockingPriority,nn=a.unstable_NormalPriority,tn=a.unstable_LowPriority,rn=a.unstable_IdlePriority,an=null,sn=null;var on=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ln(e)/un|0)|0},ln=Math.log,un=Math.LN2;var cn=64,dn=4194304;function fn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pn(e,n){var t=e.pendingLanes;if(0===t)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,o=268435455&t;if(0!==o){var i=o&~a;0!==i?r=fn(i):0!==(s&=o)&&(r=fn(s))}else 0!==(o=t&~a)?r=fn(o):0!==s&&(r=fn(s));if(0===r)return 0;if(0!==n&&n!==r&&0===(n&a)&&((a=r&-r)>=(s=n&-n)||16===a&&0!==(4194240&s)))return n;if(0!==(4&r)&&(r|=16&t),0!==(n=e.entangledLanes))for(e=e.entanglements,n&=r;0<n;)a=1<<(t=31-on(n)),r|=e[t],n&=~a;return r}function hn(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;default:return-1}}function mn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gn(){var e=cn;return 0===(4194240&(cn<<=1))&&(cn=64),e}function yn(e){for(var n=[],t=0;31>t;t++)n.push(e);return n}function bn(e,n,t){e.pendingLanes|=n,536870912!==n&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[n=31-on(n)]=t}function vn(e,n){var t=e.entangledLanes|=n;for(e=e.entanglements;t;){var r=31-on(t),a=1<<r;a&n|e[r]&n&&(e[r]|=n),t&=~a}}var _n=0;function Sn(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wn,kn,In,Tn,xn,An=!1,En=[],On=null,Cn=null,Mn=null,Fn=new Map,Pn=new Map,Nn=[],Rn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ln(e,n){switch(e){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":Mn=null;break;case"pointerover":case"pointerout":Fn.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pn.delete(n.pointerId)}}function Dn(e,n,t,r,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:n,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},null!==n&&(null!==(n=va(n))&&kn(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,null!==a&&-1===n.indexOf(a)&&n.push(a),e)}function zn(e){var n=ba(e.target);if(null!==n){var t=Ve(n);if(null!==t)if(13===(n=t.tag)){if(null!==(n=Ge(t)))return e.blockedOn=n,void xn(e.priority,(function(){In(t)}))}else if(3===n&&t.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===t.tag?t.stateNode.containerInfo:null)}e.blockedOn=null}function Un(e){if(null!==e.blockedOn)return!1;for(var n=e.targetContainers;0<n.length;){var t=Xn(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(null!==t)return null!==(n=va(t))&&kn(n),e.blockedOn=t,!1;var r=new(t=e.nativeEvent).constructor(t.type,t);_e=r,t.target.dispatchEvent(r),_e=null,n.shift()}return!0}function jn(e,n,t){Un(e)&&t.delete(n)}function Bn(){An=!1,null!==On&&Un(On)&&(On=null),null!==Cn&&Un(Cn)&&(Cn=null),null!==Mn&&Un(Mn)&&(Mn=null),Fn.forEach(jn),Pn.forEach(jn)}function Vn(e,n){e.blockedOn===n&&(e.blockedOn=null,An||(An=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Bn)))}function Gn(e){function n(n){return Vn(n,e)}if(0<En.length){Vn(En[0],e);for(var t=1;t<En.length;t++){var r=En[t];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==On&&Vn(On,e),null!==Cn&&Vn(Cn,e),null!==Mn&&Vn(Mn,e),Fn.forEach(n),Pn.forEach(n),t=0;t<Nn.length;t++)(r=Nn[t]).blockedOn===e&&(r.blockedOn=null);for(;0<Nn.length&&null===(t=Nn[0]).blockedOn;)zn(t),null===t.blockedOn&&Nn.shift()}var Wn=_.ReactCurrentBatchConfig,$n=!0;function Hn(e,n,t,r){var a=_n,s=Wn.transition;Wn.transition=null;try{_n=1,qn(e,n,t,r)}finally{_n=a,Wn.transition=s}}function Kn(e,n,t,r){var a=_n,s=Wn.transition;Wn.transition=null;try{_n=4,qn(e,n,t,r)}finally{_n=a,Wn.transition=s}}function qn(e,n,t,r){if($n){var a=Xn(e,n,t,r);if(null===a)Wr(e,n,r,Yn,t),Ln(e,r);else if(function(e,n,t,r,a){switch(n){case"focusin":return On=Dn(On,e,n,t,r,a),!0;case"dragenter":return Cn=Dn(Cn,e,n,t,r,a),!0;case"mouseover":return Mn=Dn(Mn,e,n,t,r,a),!0;case"pointerover":var s=a.pointerId;return Fn.set(s,Dn(Fn.get(s)||null,e,n,t,r,a)),!0;case"gotpointercapture":return s=a.pointerId,Pn.set(s,Dn(Pn.get(s)||null,e,n,t,r,a)),!0}return!1}(a,e,n,t,r))r.stopPropagation();else if(Ln(e,r),4&n&&-1<Rn.indexOf(e)){for(;null!==a;){var s=va(a);if(null!==s&&wn(s),null===(s=Xn(e,n,t,r))&&Wr(e,n,r,Yn,t),s===a)break;a=s}null!==a&&r.stopPropagation()}else Wr(e,n,r,null,t)}}var Yn=null;function Xn(e,n,t,r){if(Yn=null,null!==(e=ba(e=Se(r))))if(null===(n=Ve(e)))e=null;else if(13===(t=n.tag)){if(null!==(e=Ge(n)))return e;e=null}else if(3===t){if(n.stateNode.current.memoizedState.isDehydrated)return 3===n.tag?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Yn=e,null}function Jn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Qe:return 1;case en:return 4;case nn:case tn:return 16;case rn:return 536870912;default:return 16}default:return 16}}var Zn=null,Qn=null,et=null;function nt(){if(et)return et;var e,n,t=Qn,r=t.length,a="value"in Zn?Zn.value:Zn.textContent,s=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[s-n];n++);return et=a.slice(e,1<n?1-n:void 0)}function tt(e){var n=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===n&&(e=13):e=n,10===e&&(e=13),32<=e||13===e?e:0}function rt(){return!0}function at(){return!1}function st(e){function n(n,t,r,a,s){for(var o in this._reactName=n,this._targetInst=r,this.type=t,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rt:at,this.isPropagationStopped=at,this}return D(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rt)},persist:function(){},isPersistent:rt}),n}var ot,it,lt,ut={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ct=st(ut),dt=D({},ut,{view:0,detail:0}),ft=st(dt),pt=D({},dt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tt,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lt&&(lt&&"mousemove"===e.type?(ot=e.screenX-lt.screenX,it=e.screenY-lt.screenY):it=ot=0,lt=e),ot)},movementY:function(e){return"movementY"in e?e.movementY:it}}),ht=st(pt),mt=st(D({},pt,{dataTransfer:0})),gt=st(D({},dt,{relatedTarget:0})),yt=st(D({},ut,{animationName:0,elapsedTime:0,pseudoElement:0})),bt=D({},ut,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vt=st(bt),_t=st(D({},ut,{data:0})),St={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function It(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):!!(e=kt[e])&&!!n[e]}function Tt(){return It}var xt=D({},dt,{key:function(e){if(e.key){var n=St[e.key]||e.key;if("Unidentified"!==n)return n}return"keypress"===e.type?13===(e=tt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tt,charCode:function(e){return"keypress"===e.type?tt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),At=st(xt),Et=st(D({},pt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ot=st(D({},dt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tt})),Ct=st(D({},ut,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mt=D({},pt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ft=st(Mt),Pt=[9,13,27,32],Nt=c&&"CompositionEvent"in window,Rt=null;c&&"documentMode"in document&&(Rt=document.documentMode);var Lt=c&&"TextEvent"in window&&!Rt,Dt=c&&(!Nt||Rt&&8<Rt&&11>=Rt),zt=String.fromCharCode(32),Ut=!1;function jt(e,n){switch(e){case"keyup":return-1!==Pt.indexOf(n.keyCode);case"keydown":return 229!==n.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bt(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vt=!1;var Gt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wt(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===n?!!Gt[e.type]:"textarea"===n}function $t(e,n,t,r){xe(r),0<(n=Hr(n,"onChange")).length&&(t=new ct("onChange","change",null,t,r),e.push({event:t,listeners:n}))}var Ht=null,Kt=null;function qt(e){zr(e,0)}function Yt(e){if(K(_a(e)))return e}function Xt(e,n){if("change"===e)return n}var Jt=!1;if(c){var Zt;if(c){var Qt="oninput"in document;if(!Qt){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qt="function"===typeof er.oninput}Zt=Qt}else Zt=!1;Jt=Zt&&(!document.documentMode||9<document.documentMode)}function nr(){Ht&&(Ht.detachEvent("onpropertychange",tr),Kt=Ht=null)}function tr(e){if("value"===e.propertyName&&Yt(Kt)){var n=[];$t(n,Kt,e,Se(e)),Me(qt,n)}}function rr(e,n,t){"focusin"===e?(nr(),Kt=t,(Ht=n).attachEvent("onpropertychange",tr)):"focusout"===e&&nr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yt(Kt)}function sr(e,n){if("click"===e)return Yt(n)}function or(e,n){if("input"===e||"change"===e)return Yt(n)}var ir="function"===typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e===1/n)||e!==e&&n!==n};function lr(e,n){if(ir(e,n))return!0;if("object"!==typeof e||null===e||"object"!==typeof n||null===n)return!1;var t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var a=t[r];if(!d.call(n,a)||!ir(e[a],n[a]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,n){var t,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(t=e+r.textContent.length,e<=n&&t>=n)return{node:r,offset:n-e};e=t}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?dr(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}function fr(){for(var e=window,n=q();n instanceof e.HTMLIFrameElement;){try{var t="string"===typeof n.contentWindow.location.href}catch(r){t=!1}if(!t)break;n=q((e=n.contentWindow).document)}return n}function pr(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&("input"===n&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===n||"true"===e.contentEditable)}function hr(e){var n=fr(),t=e.focusedElem,r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&dr(t.ownerDocument.documentElement,t)){if(null!==r&&pr(t))if(n=r.start,void 0===(e=r.end)&&(e=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(e,t.value.length);else if((e=(n=t.ownerDocument||document)&&n.defaultView||window).getSelection){e=e.getSelection();var a=t.textContent.length,s=Math.min(r.start,a);r=void 0===r.end?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=cr(t,s);var o=cr(t,r);a&&o&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((n=n.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(n),e.extend(o.node,o.offset)):(n.setEnd(o.node,o.offset),e.addRange(n)))}for(n=[],e=t;e=e.parentNode;)1===e.nodeType&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<n.length;t++)(e=n[t]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,br=null,vr=!1;function _r(e,n,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;vr||null==gr||gr!==q(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Hr(yr,"onSelect")).length&&(n=new ct("onSelect","select",null,n,t),e.push({event:n,listeners:r}),n.target=gr)))}function Sr(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var wr={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionend:Sr("Transition","TransitionEnd")},kr={},Ir={};function Tr(e){if(kr[e])return kr[e];if(!wr[e])return e;var n,t=wr[e];for(n in t)if(t.hasOwnProperty(n)&&n in Ir)return kr[e]=t[n];return e}c&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var xr=Tr("animationend"),Ar=Tr("animationiteration"),Er=Tr("animationstart"),Or=Tr("transitionend"),Cr=new Map,Mr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fr(e,n){Cr.set(e,n),l(n,[e])}for(var Pr=0;Pr<Mr.length;Pr++){var Nr=Mr[Pr];Fr(Nr.toLowerCase(),"on"+(Nr[0].toUpperCase()+Nr.slice(1)))}Fr(xr,"onAnimationEnd"),Fr(Ar,"onAnimationIteration"),Fr(Er,"onAnimationStart"),Fr("dblclick","onDoubleClick"),Fr("focusin","onFocus"),Fr("focusout","onBlur"),Fr(Or,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Dr(e,n,t){var r=e.type||"unknown-event";e.currentTarget=t,function(e,n,t,r,a,o,i,l,u){if(Be.apply(this,arguments),Le){if(!Le)throw Error(s(198));var c=De;Le=!1,De=null,ze||(ze=!0,Ue=c)}}(r,n,void 0,e),e.currentTarget=null}function zr(e,n){n=0!==(4&n);for(var t=0;t<e.length;t++){var r=e[t],a=r.event;r=r.listeners;e:{var s=void 0;if(n)for(var o=r.length-1;0<=o;o--){var i=r[o],l=i.instance,u=i.currentTarget;if(i=i.listener,l!==s&&a.isPropagationStopped())break e;Dr(a,i,u),s=l}else for(o=0;o<r.length;o++){if(l=(i=r[o]).instance,u=i.currentTarget,i=i.listener,l!==s&&a.isPropagationStopped())break e;Dr(a,i,u),s=l}}}if(ze)throw e=Ue,ze=!1,Ue=null,e}function Ur(e,n){var t=n[ma];void 0===t&&(t=n[ma]=new Set);var r=e+"__bubble";t.has(r)||(Gr(n,e,2,!1),t.add(r))}function jr(e,n,t){var r=0;n&&(r|=4),Gr(t,e,r,n)}var Br="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(n){"selectionchange"!==n&&(Lr.has(n)||jr(n,!1,e),jr(n,!0,e))}));var n=9===e.nodeType?e:e.ownerDocument;null===n||n[Br]||(n[Br]=!0,jr("selectionchange",!1,n))}}function Gr(e,n,t,r){switch(Jn(n)){case 1:var a=Hn;break;case 4:a=Kn;break;default:a=qn}t=a.bind(null,n,t,e),a=void 0,!Pe||"touchstart"!==n&&"touchmove"!==n&&"wheel"!==n||(a=!0),r?void 0!==a?e.addEventListener(n,t,{capture:!0,passive:a}):e.addEventListener(n,t,!0):void 0!==a?e.addEventListener(n,t,{passive:a}):e.addEventListener(n,t,!1)}function Wr(e,n,t,r,a){var s=r;if(0===(1&n)&&0===(2&n)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var i=r.stateNode.containerInfo;if(i===a||8===i.nodeType&&i.parentNode===a)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;o=o.return}for(;null!==i;){if(null===(o=ba(i)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}i=i.parentNode}}r=r.return}Me((function(){var r=s,a=Se(t),o=[];e:{var i=Cr.get(e);if(void 0!==i){var l=ct,u=e;switch(e){case"keypress":if(0===tt(t))break e;case"keydown":case"keyup":l=At;break;case"focusin":u="focus",l=gt;break;case"focusout":u="blur",l=gt;break;case"beforeblur":case"afterblur":l=gt;break;case"click":if(2===t.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ht;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ot;break;case xr:case Ar:case Er:l=yt;break;case Or:l=Ct;break;case"scroll":l=ft;break;case"wheel":l=Ft;break;case"copy":case"cut":case"paste":l=vt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Et}var c=0!==(4&n),d=!c&&"scroll"===e,f=c?null!==i?i+"Capture":null:i;c=[];for(var p,h=r;null!==h;){var m=(p=h).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==f&&(null!=(m=Fe(h,f))&&c.push($r(h,m,p)))),d)break;h=h.return}0<c.length&&(i=new l(i,u,null,t,a),o.push({event:i,listeners:c}))}}if(0===(7&n)){if(l="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||t===_e||!(u=t.relatedTarget||t.fromElement)||!ba(u)&&!u[ha])&&(l||i)&&(i=a.window===a?a:(i=a.ownerDocument)?i.defaultView||i.parentWindow:window,l?(l=r,null!==(u=(u=t.relatedTarget||t.toElement)?ba(u):null)&&(u!==(d=Ve(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=ht,m="onMouseLeave",f="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(c=Et,m="onPointerLeave",f="onPointerEnter",h="pointer"),d=null==l?i:_a(l),p=null==u?i:_a(u),(i=new c(m,h+"leave",l,t,a)).target=d,i.relatedTarget=p,m=null,ba(a)===r&&((c=new c(f,h+"enter",u,t,a)).target=p,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(f=u,h=0,p=c=l;p;p=Kr(p))h++;for(p=0,m=f;m;m=Kr(m))p++;for(;0<h-p;)c=Kr(c),h--;for(;0<p-h;)f=Kr(f),p--;for(;h--;){if(c===f||null!==f&&c===f.alternate)break e;c=Kr(c),f=Kr(f)}c=null}else c=null;null!==l&&qr(o,i,l,c,!1),null!==u&&null!==d&&qr(o,d,u,c,!0)}if("select"===(l=(i=r?_a(r):window).nodeName&&i.nodeName.toLowerCase())||"input"===l&&"file"===i.type)var g=Xt;else if(Wt(i))if(Jt)g=or;else{g=ar;var y=rr}else(l=i.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(g=sr);switch(g&&(g=g(e,r))?$t(o,g,t,a):(y&&y(e,i,r),"focusout"===e&&(y=i._wrapperState)&&y.controlled&&"number"===i.type&&ee(i,"number",i.value)),y=r?_a(r):window,e){case"focusin":(Wt(y)||"true"===y.contentEditable)&&(gr=y,yr=r,br=null);break;case"focusout":br=yr=gr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,_r(o,t,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":_r(o,t,a)}var b;if(Nt)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Vt?jt(e,t)&&(v="onCompositionEnd"):"keydown"===e&&229===t.keyCode&&(v="onCompositionStart");v&&(Dt&&"ko"!==t.locale&&(Vt||"onCompositionStart"!==v?"onCompositionEnd"===v&&Vt&&(b=nt()):(Qn="value"in(Zn=a)?Zn.value:Zn.textContent,Vt=!0)),0<(y=Hr(r,v)).length&&(v=new _t(v,e,null,t,a),o.push({event:v,listeners:y}),b?v.data=b:null!==(b=Bt(t))&&(v.data=b))),(b=Lt?function(e,n){switch(e){case"compositionend":return Bt(n);case"keypress":return 32!==n.which?null:(Ut=!0,zt);case"textInput":return(e=n.data)===zt&&Ut?null:e;default:return null}}(e,t):function(e,n){if(Vt)return"compositionend"===e||!Nt&&jt(e,n)?(e=nt(),et=Qn=Zn=null,Vt=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Dt&&"ko"!==n.locale?null:n.data}}(e,t))&&(0<(r=Hr(r,"onBeforeInput")).length&&(a=new _t("onBeforeInput","beforeinput",null,t,a),o.push({event:a,listeners:r}),a.data=b))}zr(o,n)}))}function $r(e,n,t){return{instance:e,listener:n,currentTarget:t}}function Hr(e,n){for(var t=n+"Capture",r=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Fe(e,t))&&r.unshift($r(e,s,a)),null!=(s=Fe(e,n))&&r.push($r(e,s,a))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,n,t,r,a){for(var s=n._reactName,o=[];null!==t&&t!==r;){var i=t,l=i.alternate,u=i.stateNode;if(null!==l&&l===r)break;5===i.tag&&null!==u&&(i=u,a?null!=(l=Fe(t,s))&&o.unshift($r(t,l,i)):a||null!=(l=Fe(t,s))&&o.push($r(t,l,i))),t=t.return}0!==o.length&&e.push({event:n,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Zr(e,n,t){if(n=Jr(n),Jr(e)!==n&&t)throw Error(s(425))}function Qr(){}var ea=null,na=null;function ta(e,n){return"textarea"===e||"noscript"===e||"string"===typeof n.children||"number"===typeof n.children||"object"===typeof n.dangerouslySetInnerHTML&&null!==n.dangerouslySetInnerHTML&&null!=n.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,oa="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(ia)}:ra;function ia(e){setTimeout((function(){throw e}))}function la(e,n){var t=n,r=0;do{var a=t.nextSibling;if(e.removeChild(t),a&&8===a.nodeType)if("/$"===(t=a.data)){if(0===r)return e.removeChild(a),void Gn(n);r--}else"$"!==t&&"$?"!==t&&"$!"!==t||r++;t=a}while(t);Gn(n)}function ua(e){for(;null!=e;e=e.nextSibling){var n=e.nodeType;if(1===n||3===n)break;if(8===n){if("$"===(n=e.data)||"$!"===n||"$?"===n)break;if("/$"===n)return null}}return e}function ca(e){e=e.previousSibling;for(var n=0;e;){if(8===e.nodeType){var t=e.data;if("$"===t||"$!"===t||"$?"===t){if(0===n)return e;n--}else"/$"===t&&n++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),fa="__reactFiber$"+da,pa="__reactProps$"+da,ha="__reactContainer$"+da,ma="__reactEvents$"+da,ga="__reactListeners$"+da,ya="__reactHandles$"+da;function ba(e){var n=e[fa];if(n)return n;for(var t=e.parentNode;t;){if(n=t[ha]||t[fa]){if(t=n.alternate,null!==n.child||null!==t&&null!==t.child)for(e=ca(e);null!==e;){if(t=e[fa])return t;e=ca(e)}return n}t=(e=t).parentNode}return null}function va(e){return!(e=e[fa]||e[ha])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _a(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function Sa(e){return e[pa]||null}var wa=[],ka=-1;function Ia(e){return{current:e}}function Ta(e){0>ka||(e.current=wa[ka],wa[ka]=null,ka--)}function xa(e,n){ka++,wa[ka]=e.current,e.current=n}var Aa={},Ea=Ia(Aa),Oa=Ia(!1),Ca=Aa;function Ma(e,n){var t=e.type.contextTypes;if(!t)return Aa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in t)s[a]=n[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=s),s}function Fa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pa(){Ta(Oa),Ta(Ea)}function Na(e,n,t){if(Ea.current!==Aa)throw Error(s(168));xa(Ea,n),xa(Oa,t)}function Ra(e,n,t){var r=e.stateNode;if(n=n.childContextTypes,"function"!==typeof r.getChildContext)return t;for(var a in r=r.getChildContext())if(!(a in n))throw Error(s(108,G(e)||"Unknown",a));return D({},t,r)}function La(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Aa,Ca=Ea.current,xa(Ea,e),xa(Oa,Oa.current),!0}function Da(e,n,t){var r=e.stateNode;if(!r)throw Error(s(169));t?(e=Ra(e,n,Ca),r.__reactInternalMemoizedMergedChildContext=e,Ta(Oa),Ta(Ea),xa(Ea,e)):Ta(Oa),xa(Oa,t)}var za=null,Ua=!1,ja=!1;function Ba(e){null===za?za=[e]:za.push(e)}function Va(){if(!ja&&null!==za){ja=!0;var e=0,n=_n;try{var t=za;for(_n=1;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}za=null,Ua=!1}catch(a){throw null!==za&&(za=za.slice(e+1)),Ke(Qe,Va),a}finally{_n=n,ja=!1}}return null}var Ga=[],Wa=0,$a=null,Ha=0,Ka=[],qa=0,Ya=null,Xa=1,Ja="";function Za(e,n){Ga[Wa++]=Ha,Ga[Wa++]=$a,$a=e,Ha=n}function Qa(e,n,t){Ka[qa++]=Xa,Ka[qa++]=Ja,Ka[qa++]=Ya,Ya=e;var r=Xa;e=Ja;var a=32-on(r)-1;r&=~(1<<a),t+=1;var s=32-on(n)+a;if(30<s){var o=a-a%5;s=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Xa=1<<32-on(n)+a|t<<a|r,Ja=s+e}else Xa=1<<s|t<<a|r,Ja=e}function es(e){null!==e.return&&(Za(e,1),Qa(e,1,0))}function ns(e){for(;e===$a;)$a=Ga[--Wa],Ga[Wa]=null,Ha=Ga[--Wa],Ga[Wa]=null;for(;e===Ya;)Ya=Ka[--qa],Ka[qa]=null,Ja=Ka[--qa],Ka[qa]=null,Xa=Ka[--qa],Ka[qa]=null}var ts=null,rs=null,as=!1,ss=null;function os(e,n){var t=Fu(5,null,null,0);t.elementType="DELETED",t.stateNode=n,t.return=e,null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)}function is(e,n){switch(e.tag){case 5:var t=e.type;return null!==(n=1!==n.nodeType||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n)&&(e.stateNode=n,ts=e,rs=ua(n.firstChild),!0);case 6:return null!==(n=""===e.pendingProps||3!==n.nodeType?null:n)&&(e.stateNode=n,ts=e,rs=null,!0);case 13:return null!==(n=8!==n.nodeType?null:n)&&(t=null!==Ya?{id:Xa,overflow:Ja}:null,e.memoizedState={dehydrated:n,treeContext:t,retryLane:1073741824},(t=Fu(18,null,null,0)).stateNode=n,t.return=e,e.child=t,ts=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function us(e){if(as){var n=rs;if(n){var t=n;if(!is(e,n)){if(ls(e))throw Error(s(418));n=ua(t.nextSibling);var r=ts;n&&is(e,n)?os(r,t):(e.flags=-4097&e.flags|2,as=!1,ts=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,as=!1,ts=e}}}function cs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ts=e}function ds(e){if(e!==ts)return!1;if(!as)return cs(e),as=!0,!1;var n;if((n=3!==e.tag)&&!(n=5!==e.tag)&&(n="head"!==(n=e.type)&&"body"!==n&&!ta(e.type,e.memoizedProps)),n&&(n=rs)){if(ls(e))throw fs(),Error(s(418));for(;n;)os(e,n),n=ua(n.nextSibling)}if(cs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType){var t=e.data;if("/$"===t){if(0===n){rs=ua(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++}e=e.nextSibling}rs=null}}else rs=ts?ua(e.stateNode.nextSibling):null;return!0}function fs(){for(var e=rs;e;)e=ua(e.nextSibling)}function ps(){rs=ts=null,as=!1}function hs(e){null===ss?ss=[e]:ss.push(e)}var ms=_.ReactCurrentBatchConfig;function gs(e,n){if(e&&e.defaultProps){for(var t in n=D({},n),e=e.defaultProps)void 0===n[t]&&(n[t]=e[t]);return n}return n}var ys=Ia(null),bs=null,vs=null,_s=null;function Ss(){_s=vs=bs=null}function ws(e){var n=ys.current;Ta(ys),e._currentValue=n}function ks(e,n,t){for(;null!==e;){var r=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,null!==r&&(r.childLanes|=n)):null!==r&&(r.childLanes&n)!==n&&(r.childLanes|=n),e===t)break;e=e.return}}function Is(e,n){bs=e,_s=vs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&n)&&(_i=!0),e.firstContext=null)}function Ts(e){var n=e._currentValue;if(_s!==e)if(e={context:e,memoizedValue:n,next:null},null===vs){if(null===bs)throw Error(s(308));vs=e,bs.dependencies={lanes:0,firstContext:e}}else vs=vs.next=e;return n}var xs=null;function As(e){null===xs?xs=[e]:xs.push(e)}function Es(e,n,t,r){var a=n.interleaved;return null===a?(t.next=t,As(n)):(t.next=a.next,a.next=t),n.interleaved=t,Os(e,r)}function Os(e,n){e.lanes|=n;var t=e.alternate;for(null!==t&&(t.lanes|=n),t=e,e=e.return;null!==e;)e.childLanes|=n,null!==(t=e.alternate)&&(t.childLanes|=n),t=e,e=e.return;return 3===t.tag?t.stateNode:null}var Cs=!1;function Ms(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fs(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ps(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Ns(e,n,t){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ol)){var a=r.pending;return null===a?n.next=n:(n.next=a.next,a.next=n),r.pending=n,Os(e,t)}return null===(a=r.interleaved)?(n.next=n,As(r)):(n.next=a.next,a.next=n),r.interleaved=n,Os(e,t)}function Rs(e,n,t){if(null!==(n=n.updateQueue)&&(n=n.shared,0!==(4194240&t))){var r=n.lanes;t|=r&=e.pendingLanes,n.lanes=t,vn(e,t)}}function Ls(e,n){var t=e.updateQueue,r=e.alternate;if(null!==r&&t===(r=r.updateQueue)){var a=null,s=null;if(null!==(t=t.firstBaseUpdate)){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};null===s?a=s=o:s=s.next=o,t=t.next}while(null!==t);null===s?a=s=n:s=s.next=n}else a=s=n;return t={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=t)}null===(e=t.lastBaseUpdate)?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function Ds(e,n,t,r){var a=e.updateQueue;Cs=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,i=a.shared.pending;if(null!==i){a.shared.pending=null;var l=i,u=l.next;l.next=null,null===o?s=u:o.next=u,o=l;var c=e.alternate;null!==c&&((i=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===i?c.firstBaseUpdate=u:i.next=u,c.lastBaseUpdate=l))}if(null!==s){var d=a.baseState;for(o=0,c=u=l=null,i=s;;){var f=i.lane,p=i.eventTime;if((r&f)===f){null!==c&&(c=c.next={eventTime:p,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var h=e,m=i;switch(f=n,p=t,m.tag){case 1:if("function"===typeof(h=m.payload)){d=h.call(p,d,f);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(f="function"===typeof(h=m.payload)?h.call(p,d,f):h)||void 0===f)break e;d=D({},d,f);break e;case 2:Cs=!0}}null!==i.callback&&0!==i.lane&&(e.flags|=64,null===(f=a.effects)?a.effects=[i]:f.push(i))}else p={eventTime:p,lane:f,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,o|=f;if(null===(i=i.next)){if(null===(i=a.shared.pending))break;i=(f=i).next,f.next=null,a.lastBaseUpdate=f,a.shared.pending=null}}if(null===c&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,null!==(n=a.shared.interleaved)){a=n;do{o|=a.lane,a=a.next}while(a!==n)}else null===s&&(a.shared.lanes=0);Dl|=o,e.lanes=o,e.memoizedState=d}}function zs(e,n,t){if(e=n.effects,n.effects=null,null!==e)for(n=0;n<e.length;n++){var r=e[n],a=r.callback;if(null!==a){if(r.callback=null,r=t,"function"!==typeof a)throw Error(s(191,a));a.call(r)}}}var Us=(new r.Component).refs;function js(e,n,t,r){t=null===(t=t(r,n=e.memoizedState))||void 0===t?n:D({},n,t),e.memoizedState=t,0===e.lanes&&(e.updateQueue.baseState=t)}var Bs={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,n,t){e=e._reactInternals;var r=nu(),a=tu(e),s=Ps(r,a);s.payload=n,void 0!==t&&null!==t&&(s.callback=t),null!==(n=Ns(e,s,a))&&(ru(n,e,a,r),Rs(n,e,a))},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var r=nu(),a=tu(e),s=Ps(r,a);s.tag=1,s.payload=n,void 0!==t&&null!==t&&(s.callback=t),null!==(n=Ns(e,s,a))&&(ru(n,e,a,r),Rs(n,e,a))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=nu(),r=tu(e),a=Ps(t,r);a.tag=2,void 0!==n&&null!==n&&(a.callback=n),null!==(n=Ns(e,a,r))&&(ru(n,e,r,t),Rs(n,e,r))}};function Vs(e,n,t,r,a,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!n.prototype||!n.prototype.isPureReactComponent||(!lr(t,r)||!lr(a,s))}function Gs(e,n,t){var r=!1,a=Aa,s=n.contextType;return"object"===typeof s&&null!==s?s=Ts(s):(a=Fa(n)?Ca:Ea.current,s=(r=null!==(r=n.contextTypes)&&void 0!==r)?Ma(e,a):Aa),n=new n(t,s),e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,n.updater=Bs,e.stateNode=n,n._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),n}function Ws(e,n,t,r){e=n.state,"function"===typeof n.componentWillReceiveProps&&n.componentWillReceiveProps(t,r),"function"===typeof n.UNSAFE_componentWillReceiveProps&&n.UNSAFE_componentWillReceiveProps(t,r),n.state!==e&&Bs.enqueueReplaceState(n,n.state,null)}function $s(e,n,t,r){var a=e.stateNode;a.props=t,a.state=e.memoizedState,a.refs=Us,Ms(e);var s=n.contextType;"object"===typeof s&&null!==s?a.context=Ts(s):(s=Fa(n)?Ca:Ea.current,a.context=Ma(e,s)),a.state=e.memoizedState,"function"===typeof(s=n.getDerivedStateFromProps)&&(js(e,n,s,t),a.state=e.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(n=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),n!==a.state&&Bs.enqueueReplaceState(a,a.state,null),Ds(e,t,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Hs(e,n,t){if(null!==(e=t.ref)&&"function"!==typeof e&&"object"!==typeof e){if(t._owner){if(t=t._owner){if(1!==t.tag)throw Error(s(309));var r=t.stateNode}if(!r)throw Error(s(147,e));var a=r,o=""+e;return null!==n&&null!==n.ref&&"function"===typeof n.ref&&n.ref._stringRef===o?n.ref:(n=function(e){var n=a.refs;n===Us&&(n=a.refs={}),null===e?delete n[o]:n[o]=e},n._stringRef=o,n)}if("string"!==typeof e)throw Error(s(284));if(!t._owner)throw Error(s(290,e))}return e}function Ks(e,n){throw e=Object.prototype.toString.call(n),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function qs(e){return(0,e._init)(e._payload)}function Ys(e){function n(n,t){if(e){var r=n.deletions;null===r?(n.deletions=[t],n.flags|=16):r.push(t)}}function t(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function r(e,n){for(e=new Map;null!==n;)null!==n.key?e.set(n.key,n):e.set(n.index,n),n=n.sibling;return e}function a(e,n){return(e=Nu(e,n)).index=0,e.sibling=null,e}function o(n,t,r){return n.index=r,e?null!==(r=n.alternate)?(r=r.index)<t?(n.flags|=2,t):r:(n.flags|=2,t):(n.flags|=1048576,t)}function i(n){return e&&null===n.alternate&&(n.flags|=2),n}function l(e,n,t,r){return null===n||6!==n.tag?((n=zu(t,e.mode,r)).return=e,n):((n=a(n,t)).return=e,n)}function u(e,n,t,r){var s=t.type;return s===k?d(e,n,t.props.children,r,t.key):null!==n&&(n.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===F&&qs(s)===n.type)?((r=a(n,t.props)).ref=Hs(e,n,t),r.return=e,r):((r=Ru(t.type,t.key,t.props,null,e.mode,r)).ref=Hs(e,n,t),r.return=e,r)}function c(e,n,t,r){return null===n||4!==n.tag||n.stateNode.containerInfo!==t.containerInfo||n.stateNode.implementation!==t.implementation?((n=Uu(t,e.mode,r)).return=e,n):((n=a(n,t.children||[])).return=e,n)}function d(e,n,t,r,s){return null===n||7!==n.tag?((n=Lu(t,e.mode,r,s)).return=e,n):((n=a(n,t)).return=e,n)}function f(e,n,t){if("string"===typeof n&&""!==n||"number"===typeof n)return(n=zu(""+n,e.mode,t)).return=e,n;if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return(t=Ru(n.type,n.key,n.props,null,e.mode,t)).ref=Hs(e,null,n),t.return=e,t;case w:return(n=Uu(n,e.mode,t)).return=e,n;case F:return f(e,(0,n._init)(n._payload),t)}if(ne(n)||R(n))return(n=Lu(n,e.mode,t,null)).return=e,n;Ks(e,n)}return null}function p(e,n,t,r){var a=null!==n?n.key:null;if("string"===typeof t&&""!==t||"number"===typeof t)return null!==a?null:l(e,n,""+t,r);if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return t.key===a?u(e,n,t,r):null;case w:return t.key===a?c(e,n,t,r):null;case F:return p(e,n,(a=t._init)(t._payload),r)}if(ne(t)||R(t))return null!==a?null:d(e,n,t,r,null);Ks(e,t)}return null}function h(e,n,t,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(n,e=e.get(t)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case S:return u(n,e=e.get(null===r.key?t:r.key)||null,r,a);case w:return c(n,e=e.get(null===r.key?t:r.key)||null,r,a);case F:return h(e,n,t,(0,r._init)(r._payload),a)}if(ne(r)||R(r))return d(n,e=e.get(t)||null,r,a,null);Ks(n,r)}return null}function m(a,s,i,l){for(var u=null,c=null,d=s,m=s=0,g=null;null!==d&&m<i.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=p(a,d,i[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&n(a,d),s=o(y,s,m),null===c?u=y:c.sibling=y,c=y,d=g}if(m===i.length)return t(a,d),as&&Za(a,m),u;if(null===d){for(;m<i.length;m++)null!==(d=f(a,i[m],l))&&(s=o(d,s,m),null===c?u=d:c.sibling=d,c=d);return as&&Za(a,m),u}for(d=r(a,d);m<i.length;m++)null!==(g=h(d,a,m,i[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return n(a,e)})),as&&Za(a,m),u}function g(a,i,l,u){var c=R(l);if("function"!==typeof c)throw Error(s(150));if(null==(l=c.call(l)))throw Error(s(151));for(var d=c=null,m=i,g=i=0,y=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var v=p(a,m,b.value,u);if(null===v){null===m&&(m=y);break}e&&m&&null===v.alternate&&n(a,m),i=o(v,i,g),null===d?c=v:d.sibling=v,d=v,m=y}if(b.done)return t(a,m),as&&Za(a,g),c;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=f(a,b.value,u))&&(i=o(b,i,g),null===d?c=b:d.sibling=b,d=b);return as&&Za(a,g),c}for(m=r(a,m);!b.done;g++,b=l.next())null!==(b=h(m,a,g,b.value,u))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),i=o(b,i,g),null===d?c=b:d.sibling=b,d=b);return e&&m.forEach((function(e){return n(a,e)})),as&&Za(a,g),c}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case S:e:{for(var u=o.key,c=s;null!==c;){if(c.key===u){if((u=o.type)===k){if(7===c.tag){t(r,c.sibling),(s=a(c,o.props.children)).return=r,r=s;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===F&&qs(u)===c.type){t(r,c.sibling),(s=a(c,o.props)).ref=Hs(r,c,o),s.return=r,r=s;break e}t(r,c);break}n(r,c),c=c.sibling}o.type===k?((s=Lu(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Ru(o.type,o.key,o.props,null,r.mode,l)).ref=Hs(r,s,o),l.return=r,r=l)}return i(r);case w:e:{for(c=o.key;null!==s;){if(s.key===c){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){t(r,s.sibling),(s=a(s,o.children||[])).return=r,r=s;break e}t(r,s);break}n(r,s),s=s.sibling}(s=Uu(o,r.mode,l)).return=r,r=s}return i(r);case F:return e(r,s,(c=o._init)(o._payload),l)}if(ne(o))return m(r,s,o,l);if(R(o))return g(r,s,o,l);Ks(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(t(r,s.sibling),(s=a(s,o)).return=r,r=s):(t(r,s),(s=zu(o,r.mode,l)).return=r,r=s),i(r)):t(r,s)}}var Xs=Ys(!0),Js=Ys(!1),Zs={},Qs=Ia(Zs),eo=Ia(Zs),no=Ia(Zs);function to(e){if(e===Zs)throw Error(s(174));return e}function ro(e,n){switch(xa(no,n),xa(eo,e),xa(Qs,Zs),e=n.nodeType){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:le(null,"");break;default:n=le(n=(e=8===e?n.parentNode:n).namespaceURI||null,e=e.tagName)}Ta(Qs),xa(Qs,n)}function ao(){Ta(Qs),Ta(eo),Ta(no)}function so(e){to(no.current);var n=to(Qs.current),t=le(n,e.type);n!==t&&(xa(eo,e),xa(Qs,t))}function oo(e){eo.current===e&&(Ta(Qs),Ta(eo))}var io=Ia(0);function lo(e){for(var n=e;null!==n;){if(13===n.tag){var t=n.memoizedState;if(null!==t&&(null===(t=t.dehydrated)||"$?"===t.data||"$!"===t.data))return n}else if(19===n.tag&&void 0!==n.memoizedProps.revealOrder){if(0!==(128&n.flags))return n}else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var uo=[];function co(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var fo=_.ReactCurrentDispatcher,po=_.ReactCurrentBatchConfig,ho=0,mo=null,go=null,yo=null,bo=!1,vo=!1,_o=0,So=0;function wo(){throw Error(s(321))}function ko(e,n){if(null===n)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!ir(e[t],n[t]))return!1;return!0}function Io(e,n,t,r,a,o){if(ho=o,mo=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,fo.current=null===e||null===e.memoizedState?ii:li,e=t(r,a),vo){o=0;do{if(vo=!1,_o=0,25<=o)throw Error(s(301));o+=1,yo=go=null,n.updateQueue=null,fo.current=ui,e=t(r,a)}while(vo)}if(fo.current=oi,n=null!==go&&null!==go.next,ho=0,yo=go=mo=null,bo=!1,n)throw Error(s(300));return e}function To(){var e=0!==_o;return _o=0,e}function xo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?mo.memoizedState=yo=e:yo=yo.next=e,yo}function Ao(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var n=null===yo?mo.memoizedState:yo.next;if(null!==n)yo=n,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===yo?mo.memoizedState=yo=e:yo=yo.next=e}return yo}function Eo(e,n){return"function"===typeof n?n(e):n}function Oo(e){var n=Ao(),t=n.queue;if(null===t)throw Error(s(311));t.lastRenderedReducer=e;var r=go,a=r.baseQueue,o=t.pending;if(null!==o){if(null!==a){var i=a.next;a.next=o.next,o.next=i}r.baseQueue=a=o,t.pending=null}if(null!==a){o=a.next,r=r.baseState;var l=i=null,u=null,c=o;do{var d=c.lane;if((ho&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=f,i=r):u=u.next=f,mo.lanes|=d,Dl|=d}c=c.next}while(null!==c&&c!==o);null===u?i=r:u.next=l,ir(r,n.memoizedState)||(_i=!0),n.memoizedState=r,n.baseState=i,n.baseQueue=u,t.lastRenderedState=r}if(null!==(e=t.interleaved)){a=e;do{o=a.lane,mo.lanes|=o,Dl|=o,a=a.next}while(a!==e)}else null===a&&(t.lanes=0);return[n.memoizedState,t.dispatch]}function Co(e){var n=Ao(),t=n.queue;if(null===t)throw Error(s(311));t.lastRenderedReducer=e;var r=t.dispatch,a=t.pending,o=n.memoizedState;if(null!==a){t.pending=null;var i=a=a.next;do{o=e(o,i.action),i=i.next}while(i!==a);ir(o,n.memoizedState)||(_i=!0),n.memoizedState=o,null===n.baseQueue&&(n.baseState=o),t.lastRenderedState=o}return[o,r]}function Mo(){}function Fo(e,n){var t=mo,r=Ao(),a=n(),o=!ir(r.memoizedState,a);if(o&&(r.memoizedState=a,_i=!0),r=r.queue,Wo(Ro.bind(null,t,r,e),[e]),r.getSnapshot!==n||o||null!==yo&&1&yo.memoizedState.tag){if(t.flags|=2048,Uo(9,No.bind(null,t,r,a,n),void 0,null),null===Cl)throw Error(s(349));0!==(30&ho)||Po(t,n,a)}return a}function Po(e,n,t){e.flags|=16384,e={getSnapshot:n,value:t},null===(n=mo.updateQueue)?(n={lastEffect:null,stores:null},mo.updateQueue=n,n.stores=[e]):null===(t=n.stores)?n.stores=[e]:t.push(e)}function No(e,n,t,r){n.value=t,n.getSnapshot=r,Lo(n)&&Do(e)}function Ro(e,n,t){return t((function(){Lo(n)&&Do(e)}))}function Lo(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!ir(e,t)}catch(r){return!0}}function Do(e){var n=Os(e,1);null!==n&&ru(n,e,1,-1)}function zo(e){var n=xo();return"function"===typeof e&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:e},n.queue=e,e=e.dispatch=ti.bind(null,mo,e),[n.memoizedState,e]}function Uo(e,n,t,r){return e={tag:e,create:n,destroy:t,deps:r,next:null},null===(n=mo.updateQueue)?(n={lastEffect:null,stores:null},mo.updateQueue=n,n.lastEffect=e.next=e):null===(t=n.lastEffect)?n.lastEffect=e.next=e:(r=t.next,t.next=e,e.next=r,n.lastEffect=e),e}function jo(){return Ao().memoizedState}function Bo(e,n,t,r){var a=xo();mo.flags|=e,a.memoizedState=Uo(1|n,t,void 0,void 0===r?null:r)}function Vo(e,n,t,r){var a=Ao();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&ko(r,o.deps))return void(a.memoizedState=Uo(n,t,s,r))}mo.flags|=e,a.memoizedState=Uo(1|n,t,s,r)}function Go(e,n){return Bo(8390656,8,e,n)}function Wo(e,n){return Vo(2048,8,e,n)}function $o(e,n){return Vo(4,2,e,n)}function Ho(e,n){return Vo(4,4,e,n)}function Ko(e,n){return"function"===typeof n?(e=e(),n(e),function(){n(null)}):null!==n&&void 0!==n?(e=e(),n.current=e,function(){n.current=null}):void 0}function qo(e,n,t){return t=null!==t&&void 0!==t?t.concat([e]):null,Vo(4,4,Ko.bind(null,n,e),t)}function Yo(){}function Xo(e,n){var t=Ao();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&ko(n,r[1])?r[0]:(t.memoizedState=[e,n],e)}function Jo(e,n){var t=Ao();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&ko(n,r[1])?r[0]:(e=e(),t.memoizedState=[e,n],e)}function Zo(e,n,t){return 0===(21&ho)?(e.baseState&&(e.baseState=!1,_i=!0),e.memoizedState=t):(ir(t,n)||(t=gn(),mo.lanes|=t,Dl|=t,e.baseState=!0),n)}function Qo(e,n){var t=_n;_n=0!==t&&4>t?t:4,e(!0);var r=po.transition;po.transition={};try{e(!1),n()}finally{_n=t,po.transition=r}}function ei(){return Ao().memoizedState}function ni(e,n,t){var r=tu(e);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},ri(e))ai(n,t);else if(null!==(t=Es(e,n,t,r))){ru(t,e,r,nu()),si(t,n,r)}}function ti(e,n,t){var r=tu(e),a={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(ri(e))ai(n,a);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=n.lastRenderedReducer))try{var o=n.lastRenderedState,i=s(o,t);if(a.hasEagerState=!0,a.eagerState=i,ir(i,o)){var l=n.interleaved;return null===l?(a.next=a,As(n)):(a.next=l.next,l.next=a),void(n.interleaved=a)}}catch(u){}null!==(t=Es(e,n,a,r))&&(ru(t,e,r,a=nu()),si(t,n,r))}}function ri(e){var n=e.alternate;return e===mo||null!==n&&n===mo}function ai(e,n){vo=bo=!0;var t=e.pending;null===t?n.next=n:(n.next=t.next,t.next=n),e.pending=n}function si(e,n,t){if(0!==(4194240&t)){var r=n.lanes;t|=r&=e.pendingLanes,n.lanes=t,vn(e,t)}}var oi={readContext:Ts,useCallback:wo,useContext:wo,useEffect:wo,useImperativeHandle:wo,useInsertionEffect:wo,useLayoutEffect:wo,useMemo:wo,useReducer:wo,useRef:wo,useState:wo,useDebugValue:wo,useDeferredValue:wo,useTransition:wo,useMutableSource:wo,useSyncExternalStore:wo,useId:wo,unstable_isNewReconciler:!1},ii={readContext:Ts,useCallback:function(e,n){return xo().memoizedState=[e,void 0===n?null:n],e},useContext:Ts,useEffect:Go,useImperativeHandle:function(e,n,t){return t=null!==t&&void 0!==t?t.concat([e]):null,Bo(4194308,4,Ko.bind(null,n,e),t)},useLayoutEffect:function(e,n){return Bo(4194308,4,e,n)},useInsertionEffect:function(e,n){return Bo(4,2,e,n)},useMemo:function(e,n){var t=xo();return n=void 0===n?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var r=xo();return n=void 0!==t?t(n):n,r.memoizedState=r.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},r.queue=e,e=e.dispatch=ni.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},xo().memoizedState=e},useState:zo,useDebugValue:Yo,useDeferredValue:function(e){return xo().memoizedState=e},useTransition:function(){var e=zo(!1),n=e[0];return e=Qo.bind(null,e[1]),xo().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,t){var r=mo,a=xo();if(as){if(void 0===t)throw Error(s(407));t=t()}else{if(t=n(),null===Cl)throw Error(s(349));0!==(30&ho)||Po(r,n,t)}a.memoizedState=t;var o={value:t,getSnapshot:n};return a.queue=o,Go(Ro.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,No.bind(null,r,o,t,n),void 0,null),t},useId:function(){var e=xo(),n=Cl.identifierPrefix;if(as){var t=Ja;n=":"+n+"R"+(t=(Xa&~(1<<32-on(Xa)-1)).toString(32)+t),0<(t=_o++)&&(n+="H"+t.toString(32)),n+=":"}else n=":"+n+"r"+(t=So++).toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},li={readContext:Ts,useCallback:Xo,useContext:Ts,useEffect:Wo,useImperativeHandle:qo,useInsertionEffect:$o,useLayoutEffect:Ho,useMemo:Jo,useReducer:Oo,useRef:jo,useState:function(){return Oo(Eo)},useDebugValue:Yo,useDeferredValue:function(e){return Zo(Ao(),go.memoizedState,e)},useTransition:function(){return[Oo(Eo)[0],Ao().memoizedState]},useMutableSource:Mo,useSyncExternalStore:Fo,useId:ei,unstable_isNewReconciler:!1},ui={readContext:Ts,useCallback:Xo,useContext:Ts,useEffect:Wo,useImperativeHandle:qo,useInsertionEffect:$o,useLayoutEffect:Ho,useMemo:Jo,useReducer:Co,useRef:jo,useState:function(){return Co(Eo)},useDebugValue:Yo,useDeferredValue:function(e){var n=Ao();return null===go?n.memoizedState=e:Zo(n,go.memoizedState,e)},useTransition:function(){return[Co(Eo)[0],Ao().memoizedState]},useMutableSource:Mo,useSyncExternalStore:Fo,useId:ei,unstable_isNewReconciler:!1};function ci(e,n){try{var t="",r=n;do{t+=B(r),r=r.return}while(r);var a=t}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:n,stack:a,digest:null}}function di(e,n,t){return{value:e,source:null,stack:null!=t?t:null,digest:null!=n?n:null}}function fi(e,n){try{console.error(n.value)}catch(t){setTimeout((function(){throw t}))}}var pi="function"===typeof WeakMap?WeakMap:Map;function hi(e,n,t){(t=Ps(-1,t)).tag=3,t.payload={element:null};var r=n.value;return t.callback=function(){$l||($l=!0,Hl=r),fi(0,n)},t}function mi(e,n,t){(t=Ps(-1,t)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=n.value;t.payload=function(){return r(a)},t.callback=function(){fi(0,n)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(t.callback=function(){fi(0,n),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})}),t}function gi(e,n,t){var r=e.pingCache;if(null===r){r=e.pingCache=new pi;var a=new Set;r.set(n,a)}else void 0===(a=r.get(n))&&(a=new Set,r.set(n,a));a.has(t)||(a.add(t),e=xu.bind(null,e,n,t),n.then(e,e))}function yi(e){do{var n;if((n=13===e.tag)&&(n=null===(n=e.memoizedState)||null!==n.dehydrated),n)return e;e=e.return}while(null!==e);return null}function bi(e,n,t,r,a){return 0===(1&e.mode)?(e===n?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,1===t.tag&&(null===t.alternate?t.tag=17:((n=Ps(-1,1)).tag=2,Ns(t,n,1))),t.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var vi=_.ReactCurrentOwner,_i=!1;function Si(e,n,t,r){n.child=null===e?Js(n,null,t,r):Xs(n,e.child,t,r)}function wi(e,n,t,r,a){t=t.render;var s=n.ref;return Is(n,a),r=Io(e,n,t,r,s,a),t=To(),null===e||_i?(as&&t&&es(n),n.flags|=1,Si(e,n,r,a),n.child):(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,$i(e,n,a))}function ki(e,n,t,r,a){if(null===e){var s=t.type;return"function"!==typeof s||Pu(s)||void 0!==s.defaultProps||null!==t.compare||void 0!==t.defaultProps?((e=Ru(t.type,null,r,n,n.mode,a)).ref=n.ref,e.return=n,n.child=e):(n.tag=15,n.type=s,Ii(e,n,s,r,a))}if(s=e.child,0===(e.lanes&a)){var o=s.memoizedProps;if((t=null!==(t=t.compare)?t:lr)(o,r)&&e.ref===n.ref)return $i(e,n,a)}return n.flags|=1,(e=Nu(s,r)).ref=n.ref,e.return=n,n.child=e}function Ii(e,n,t,r,a){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===n.ref){if(_i=!1,n.pendingProps=r=s,0===(e.lanes&a))return n.lanes=e.lanes,$i(e,n,a);0!==(131072&e.flags)&&(_i=!0)}}return Ai(e,n,t,r,a)}function Ti(e,n,t){var r=n.pendingProps,a=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&n.mode))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},xa(Nl,Pl),Pl|=t;else{if(0===(1073741824&t))return e=null!==s?s.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,xa(Nl,Pl),Pl|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:t,xa(Nl,Pl),Pl|=r}else null!==s?(r=s.baseLanes|t,n.memoizedState=null):r=t,xa(Nl,Pl),Pl|=r;return Si(e,n,a,t),n.child}function xi(e,n){var t=n.ref;(null===e&&null!==t||null!==e&&e.ref!==t)&&(n.flags|=512,n.flags|=2097152)}function Ai(e,n,t,r,a){var s=Fa(t)?Ca:Ea.current;return s=Ma(n,s),Is(n,a),t=Io(e,n,t,r,s,a),r=To(),null===e||_i?(as&&r&&es(n),n.flags|=1,Si(e,n,t,a),n.child):(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,$i(e,n,a))}function Ei(e,n,t,r,a){if(Fa(t)){var s=!0;La(n)}else s=!1;if(Is(n,a),null===n.stateNode)Wi(e,n),Gs(n,t,r),$s(n,t,r,a),r=!0;else if(null===e){var o=n.stateNode,i=n.memoizedProps;o.props=i;var l=o.context,u=t.contextType;"object"===typeof u&&null!==u?u=Ts(u):u=Ma(n,u=Fa(t)?Ca:Ea.current);var c=t.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(i!==r||l!==u)&&Ws(n,o,r,u),Cs=!1;var f=n.memoizedState;o.state=f,Ds(n,r,o,a),l=n.memoizedState,i!==r||f!==l||Oa.current||Cs?("function"===typeof c&&(js(n,t,c,r),l=n.memoizedState),(i=Cs||Vs(n,t,i,r,f,l,u))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(n.flags|=4194308)):("function"===typeof o.componentDidMount&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=l),o.props=r,o.state=l,o.context=u,r=i):("function"===typeof o.componentDidMount&&(n.flags|=4194308),r=!1)}else{o=n.stateNode,Fs(e,n),i=n.memoizedProps,u=n.type===n.elementType?i:gs(n.type,i),o.props=u,d=n.pendingProps,f=o.context,"object"===typeof(l=t.contextType)&&null!==l?l=Ts(l):l=Ma(n,l=Fa(t)?Ca:Ea.current);var p=t.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(i!==d||f!==l)&&Ws(n,o,r,l),Cs=!1,f=n.memoizedState,o.state=f,Ds(n,r,o,a);var h=n.memoizedState;i!==d||f!==h||Oa.current||Cs?("function"===typeof p&&(js(n,t,p,r),h=n.memoizedState),(u=Cs||Vs(n,t,u,r,f,h,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,h,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,h,l)),"function"===typeof o.componentDidUpdate&&(n.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(n.flags|=1024)):("function"!==typeof o.componentDidUpdate||i===e.memoizedProps&&f===e.memoizedState||(n.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&f===e.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=h),o.props=r,o.state=h,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||i===e.memoizedProps&&f===e.memoizedState||(n.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||i===e.memoizedProps&&f===e.memoizedState||(n.flags|=1024),r=!1)}return Oi(e,n,t,r,s,a)}function Oi(e,n,t,r,a,s){xi(e,n);var o=0!==(128&n.flags);if(!r&&!o)return a&&Da(n,t,!1),$i(e,n,s);r=n.stateNode,vi.current=n;var i=o&&"function"!==typeof t.getDerivedStateFromError?null:r.render();return n.flags|=1,null!==e&&o?(n.child=Xs(n,e.child,null,s),n.child=Xs(n,null,i,s)):Si(e,n,i,s),n.memoizedState=r.state,a&&Da(n,t,!0),n.child}function Ci(e){var n=e.stateNode;n.pendingContext?Na(0,n.pendingContext,n.pendingContext!==n.context):n.context&&Na(0,n.context,!1),ro(e,n.containerInfo)}function Mi(e,n,t,r,a){return ps(),hs(a),n.flags|=256,Si(e,n,t,r),n.child}var Fi,Pi,Ni,Ri,Li={dehydrated:null,treeContext:null,retryLane:0};function Di(e){return{baseLanes:e,cachePool:null,transitions:null}}function zi(e,n,t){var r,a=n.pendingProps,o=io.current,i=!1,l=0!==(128&n.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(i=!0,n.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),xa(io,1&o),null===e)return us(n),null!==(e=n.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&n.mode)?n.lanes=1:"$!"===e.data?n.lanes=8:n.lanes=1073741824,null):(l=a.children,e=a.fallback,i?(a=n.mode,i=n.child,l={mode:"hidden",children:l},0===(1&a)&&null!==i?(i.childLanes=0,i.pendingProps=l):i=Du(l,a,0,null),e=Lu(e,a,t,null),i.return=n,e.return=n,i.sibling=e,n.child=i,n.child.memoizedState=Di(t),n.memoizedState=Li,e):Ui(n,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,n,t,r,a,o,i){if(t)return 256&n.flags?(n.flags&=-257,ji(e,n,i,r=di(Error(s(422))))):null!==n.memoizedState?(n.child=e.child,n.flags|=128,null):(o=r.fallback,a=n.mode,r=Du({mode:"visible",children:r.children},a,0,null),(o=Lu(o,a,i,null)).flags|=2,r.return=n,o.return=n,r.sibling=o,n.child=r,0!==(1&n.mode)&&Xs(n,e.child,null,i),n.child.memoizedState=Di(i),n.memoizedState=Li,o);if(0===(1&n.mode))return ji(e,n,i,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,ji(e,n,i,r=di(o=Error(s(419)),r,void 0))}if(l=0!==(i&e.childLanes),_i||l){if(null!==(r=Cl)){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|i))?0:a)&&a!==o.retryLane&&(o.retryLane=a,Os(e,a),ru(r,e,a,-1))}return gu(),ji(e,n,i,r=di(Error(s(421))))}return"$?"===a.data?(n.flags|=128,n.child=e.child,n=Eu.bind(null,e),a._reactRetry=n,null):(e=o.treeContext,rs=ua(a.nextSibling),ts=n,as=!0,ss=null,null!==e&&(Ka[qa++]=Xa,Ka[qa++]=Ja,Ka[qa++]=Ya,Xa=e.id,Ja=e.overflow,Ya=n),n=Ui(n,r.children),n.flags|=4096,n)}(e,n,l,a,r,o,t);if(i){i=a.fallback,l=n.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:a.children};return 0===(1&l)&&n.child!==o?((a=n.child).childLanes=0,a.pendingProps=u,n.deletions=null):(a=Nu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?i=Nu(r,i):(i=Lu(i,l,t,null)).flags|=2,i.return=n,a.return=n,a.sibling=i,n.child=a,a=i,i=n.child,l=null===(l=e.child.memoizedState)?Di(t):{baseLanes:l.baseLanes|t,cachePool:null,transitions:l.transitions},i.memoizedState=l,i.childLanes=e.childLanes&~t,n.memoizedState=Li,a}return e=(i=e.child).sibling,a=Nu(i,{mode:"visible",children:a.children}),0===(1&n.mode)&&(a.lanes=t),a.return=n,a.sibling=null,null!==e&&(null===(t=n.deletions)?(n.deletions=[e],n.flags|=16):t.push(e)),n.child=a,n.memoizedState=null,a}function Ui(e,n){return(n=Du({mode:"visible",children:n},e.mode,0,null)).return=e,e.child=n}function ji(e,n,t,r){return null!==r&&hs(r),Xs(n,e.child,null,t),(e=Ui(n,n.pendingProps.children)).flags|=2,n.memoizedState=null,e}function Bi(e,n,t){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n),ks(e.return,n,t)}function Vi(e,n,t,r,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:a}:(s.isBackwards=n,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=a)}function Gi(e,n,t){var r=n.pendingProps,a=r.revealOrder,s=r.tail;if(Si(e,n,r.children,t),0!==(2&(r=io.current)))r=1&r|2,n.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=n.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bi(e,t,n);else if(19===e.tag)Bi(e,t,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(xa(io,r),0===(1&n.mode))n.memoizedState=null;else switch(a){case"forwards":for(t=n.child,a=null;null!==t;)null!==(e=t.alternate)&&null===lo(e)&&(a=t),t=t.sibling;null===(t=a)?(a=n.child,n.child=null):(a=t.sibling,t.sibling=null),Vi(n,!1,a,t,s);break;case"backwards":for(t=null,a=n.child,n.child=null;null!==a;){if(null!==(e=a.alternate)&&null===lo(e)){n.child=a;break}e=a.sibling,a.sibling=t,t=a,a=e}Vi(n,!0,t,null,s);break;case"together":Vi(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Wi(e,n){0===(1&n.mode)&&null!==e&&(e.alternate=null,n.alternate=null,n.flags|=2)}function $i(e,n,t){if(null!==e&&(n.dependencies=e.dependencies),Dl|=n.lanes,0===(t&n.childLanes))return null;if(null!==e&&n.child!==e.child)throw Error(s(153));if(null!==n.child){for(t=Nu(e=n.child,e.pendingProps),n.child=t,t.return=n;null!==e.sibling;)e=e.sibling,(t=t.sibling=Nu(e,e.pendingProps)).return=n;t.sibling=null}return n.child}function Hi(e,n){if(!as)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;null!==n;)null!==n.alternate&&(t=n),n=n.sibling;null===t?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?n||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ki(e){var n=null!==e.alternate&&e.alternate.child===e.child,t=0,r=0;if(n)for(var a=e.child;null!==a;)t|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)t|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=t,n}function qi(e,n,t){var r=n.pendingProps;switch(ns(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ki(n),null;case 1:case 17:return Fa(n.type)&&Pa(),Ki(n),null;case 3:return r=n.stateNode,ao(),Ta(Oa),Ta(Ea),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(n)?n.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&n.flags)||(n.flags|=1024,null!==ss&&(iu(ss),ss=null))),Pi(e,n),Ki(n),null;case 5:oo(n);var a=to(no.current);if(t=n.type,null!==e&&null!=n.stateNode)Ni(e,n,t,r,a),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!r){if(null===n.stateNode)throw Error(s(166));return Ki(n),null}if(e=to(Qs.current),ds(n)){r=n.stateNode,t=n.type;var o=n.memoizedProps;switch(r[fa]=n,r[pa]=o,e=0!==(1&n.mode),t){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(a=0;a<Rr.length;a++)Ur(Rr[a],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ae(r,o),Ur("invalid",r)}for(var l in be(t,o),a=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,u,e),a=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,u,e),a=["children",""+u]):i.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Ur("scroll",r)}switch(t){case"input":H(r),Q(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Qr)}r=a,n.updateQueue=r,null!==r&&(n.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(t)),"http://www.w3.org/1999/xhtml"===e?"script"===t?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(t,{is:r.is}):(e=l.createElement(t),"select"===t&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,t),e[fa]=n,e[pa]=r,Fi(e,n,!1,!1),n.stateNode=e;e:{switch(l=ve(t,r),t){case"dialog":Ur("cancel",e),Ur("close",e),a=r;break;case"iframe":case"object":case"embed":Ur("load",e),a=r;break;case"video":case"audio":for(a=0;a<Rr.length;a++)Ur(Rr[a],e);a=r;break;case"source":Ur("error",e),a=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),a=r;break;case"details":Ur("toggle",e),a=r;break;case"input":X(e,r),a=Y(e,r),Ur("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=D({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Ur("invalid",e)}for(o in be(t,a),u=a)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===o?"string"===typeof c?("textarea"!==t||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(i.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Ur("scroll",e):null!=c&&v(e,o,c,l))}switch(t){case"input":H(e),Q(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?te(e,!!r.multiple,o,!1):null!=r.defaultValue&&te(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Qr)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(n.flags|=4)}null!==n.ref&&(n.flags|=512,n.flags|=2097152)}return Ki(n),null;case 6:if(e&&null!=n.stateNode)Ri(e,n,e.memoizedProps,r);else{if("string"!==typeof r&&null===n.stateNode)throw Error(s(166));if(t=to(no.current),to(Qs.current),ds(n)){if(r=n.stateNode,t=n.memoizedProps,r[fa]=n,(o=r.nodeValue!==t)&&null!==(e=ts))switch(e.tag){case 3:Zr(r.nodeValue,t,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,t,0!==(1&e.mode))}o&&(n.flags|=4)}else(r=(9===t.nodeType?t:t.ownerDocument).createTextNode(r))[fa]=n,n.stateNode=r}return Ki(n),null;case 13:if(Ta(io),r=n.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(as&&null!==rs&&0!==(1&n.mode)&&0===(128&n.flags))fs(),ps(),n.flags|=98560,o=!1;else if(o=ds(n),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=n.memoizedState)?o.dehydrated:null))throw Error(s(317));o[fa]=n}else ps(),0===(128&n.flags)&&(n.memoizedState=null),n.flags|=4;Ki(n),o=!1}else null!==ss&&(iu(ss),ss=null),o=!0;if(!o)return 65536&n.flags?n:null}return 0!==(128&n.flags)?(n.lanes=t,n):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(n.child.flags|=8192,0!==(1&n.mode)&&(null===e||0!==(1&io.current)?0===Rl&&(Rl=3):gu())),null!==n.updateQueue&&(n.flags|=4),Ki(n),null);case 4:return ao(),Pi(e,n),null===e&&Vr(n.stateNode.containerInfo),Ki(n),null;case 10:return ws(n.type._context),Ki(n),null;case 19:if(Ta(io),null===(o=n.memoizedState))return Ki(n),null;if(r=0!==(128&n.flags),null===(l=o.rendering))if(r)Hi(o,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=n.child;null!==e;){if(null!==(l=lo(e))){for(n.flags|=128,Hi(o,!1),null!==(r=l.updateQueue)&&(n.updateQueue=r,n.flags|=4),n.subtreeFlags=0,r=t,t=n.child;null!==t;)e=r,(o=t).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return xa(io,1&io.current|2),n.child}e=e.sibling}null!==o.tail&&Je()>Gl&&(n.flags|=128,r=!0,Hi(o,!1),n.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(n.flags|=128,r=!0,null!==(t=e.updateQueue)&&(n.updateQueue=t,n.flags|=4),Hi(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!as)return Ki(n),null}else 2*Je()-o.renderingStartTime>Gl&&1073741824!==t&&(n.flags|=128,r=!0,Hi(o,!1),n.lanes=4194304);o.isBackwards?(l.sibling=n.child,n.child=l):(null!==(t=o.last)?t.sibling=l:n.child=l,o.last=l)}return null!==o.tail?(n=o.tail,o.rendering=n,o.tail=n.sibling,o.renderingStartTime=Je(),n.sibling=null,t=io.current,xa(io,r?1&t|2:1&t),n):(Ki(n),null);case 22:case 23:return fu(),r=null!==n.memoizedState,null!==e&&null!==e.memoizedState!==r&&(n.flags|=8192),r&&0!==(1&n.mode)?0!==(1073741824&Pl)&&(Ki(n),6&n.subtreeFlags&&(n.flags|=8192)):Ki(n),null;case 24:case 25:return null}throw Error(s(156,n.tag))}function Yi(e,n){switch(ns(n),n.tag){case 1:return Fa(n.type)&&Pa(),65536&(e=n.flags)?(n.flags=-65537&e|128,n):null;case 3:return ao(),Ta(Oa),Ta(Ea),co(),0!==(65536&(e=n.flags))&&0===(128&e)?(n.flags=-65537&e|128,n):null;case 5:return oo(n),null;case 13:if(Ta(io),null!==(e=n.memoizedState)&&null!==e.dehydrated){if(null===n.alternate)throw Error(s(340));ps()}return 65536&(e=n.flags)?(n.flags=-65537&e|128,n):null;case 19:return Ta(io),null;case 4:return ao(),null;case 10:return ws(n.type._context),null;case 22:case 23:return fu(),null;default:return null}}Fi=function(e,n){for(var t=n.child;null!==t;){if(5===t.tag||6===t.tag)e.appendChild(t.stateNode);else if(4!==t.tag&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}},Pi=function(){},Ni=function(e,n,t,r){var a=e.memoizedProps;if(a!==r){e=n.stateNode,to(Qs.current);var s,o=null;switch(t){case"input":a=Y(e,a),r=Y(e,r),o=[];break;case"select":a=D({},a,{value:void 0}),r=D({},r,{value:void 0}),o=[];break;case"textarea":a=re(e,a),r=re(e,r),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(c in be(t,r),t=null,a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var l=a[c];for(s in l)l.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(i.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=a?a[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(s in l)!l.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in u)u.hasOwnProperty(s)&&l[s]!==u[s]&&(t||(t={}),t[s]=u[s])}else t||(o||(o=[]),o.push(c,t)),t=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(i.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Ur("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}t&&(o=o||[]).push("style",t);var c=o;(n.updateQueue=c)&&(n.flags|=4)}},Ri=function(e,n,t,r){t!==r&&(n.flags|=4)};var Xi=!1,Ji=!1,Zi="function"===typeof WeakSet?WeakSet:Set,Qi=null;function el(e,n){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(r){Tu(e,n,r)}else t.current=null}function nl(e,n,t){try{t()}catch(r){Tu(e,n,r)}}var tl=!1;function rl(e,n,t){var r=n.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&nl(n,t,s)}a=a.next}while(a!==r)}}function al(e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var t=n=n.next;do{if((t.tag&e)===e){var r=t.create;t.destroy=r()}t=t.next}while(t!==n)}}function sl(e){var n=e.ref;if(null!==n){var t=e.stateNode;e.tag,e=t,"function"===typeof n?n(e):n.current=e}}function ol(e){var n=e.alternate;null!==n&&(e.alternate=null,ol(n)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(n=e.stateNode)&&(delete n[fa],delete n[pa],delete n[ma],delete n[ga],delete n[ya])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,n,t){var r=e.tag;if(5===r||6===r)e=e.stateNode,n?8===t.nodeType?t.parentNode.insertBefore(e,n):t.insertBefore(e,n):(8===t.nodeType?(n=t.parentNode).insertBefore(e,t):(n=t).appendChild(e),null!==(t=t._reactRootContainer)&&void 0!==t||null!==n.onclick||(n.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(ul(e,n,t),e=e.sibling;null!==e;)ul(e,n,t),e=e.sibling}function cl(e,n,t){var r=e.tag;if(5===r||6===r)e=e.stateNode,n?t.insertBefore(e,n):t.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,n,t),e=e.sibling;null!==e;)cl(e,n,t),e=e.sibling}var dl=null,fl=!1;function pl(e,n,t){for(t=t.child;null!==t;)hl(e,n,t),t=t.sibling}function hl(e,n,t){if(sn&&"function"===typeof sn.onCommitFiberUnmount)try{sn.onCommitFiberUnmount(an,t)}catch(i){}switch(t.tag){case 5:Ji||el(t,n);case 6:var r=dl,a=fl;dl=null,pl(e,n,t),fl=a,null!==(dl=r)&&(fl?(e=dl,t=t.stateNode,8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)):dl.removeChild(t.stateNode));break;case 18:null!==dl&&(fl?(e=dl,t=t.stateNode,8===e.nodeType?la(e.parentNode,t):1===e.nodeType&&la(e,t),Gn(e)):la(dl,t.stateNode));break;case 4:r=dl,a=fl,dl=t.stateNode.containerInfo,fl=!0,pl(e,n,t),dl=r,fl=a;break;case 0:case 11:case 14:case 15:if(!Ji&&(null!==(r=t.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var s=a,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&nl(t,n,o),a=a.next}while(a!==r)}pl(e,n,t);break;case 1:if(!Ji&&(el(t,n),"function"===typeof(r=t.stateNode).componentWillUnmount))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(i){Tu(t,n,i)}pl(e,n,t);break;case 21:pl(e,n,t);break;case 22:1&t.mode?(Ji=(r=Ji)||null!==t.memoizedState,pl(e,n,t),Ji=r):pl(e,n,t);break;default:pl(e,n,t)}}function ml(e){var n=e.updateQueue;if(null!==n){e.updateQueue=null;var t=e.stateNode;null===t&&(t=e.stateNode=new Zi),n.forEach((function(n){var r=Ou.bind(null,e,n);t.has(n)||(t.add(n),n.then(r,r))}))}}function gl(e,n){var t=n.deletions;if(null!==t)for(var r=0;r<t.length;r++){var a=t[r];try{var o=e,i=n,l=i;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,fl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,fl=!0;break e}l=l.return}if(null===dl)throw Error(s(160));hl(o,i,a),dl=null,fl=!1;var u=a.alternate;null!==u&&(u.return=null),a.return=null}catch(c){Tu(a,n,c)}}if(12854&n.subtreeFlags)for(n=n.child;null!==n;)yl(n,e),n=n.sibling}function yl(e,n){var t=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(n,e),bl(e),4&r){try{rl(3,e,e.return),al(3,e)}catch(g){Tu(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Tu(e,e.return,g)}}break;case 1:gl(n,e),bl(e),512&r&&null!==t&&el(t,t.return);break;case 5:if(gl(n,e),bl(e),512&r&&null!==t&&el(t,t.return),32&e.flags){var a=e.stateNode;try{fe(a,"")}catch(g){Tu(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var o=e.memoizedProps,i=null!==t?t.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(a,o),ve(l,i);var c=ve(l,o);for(i=0;i<u.length;i+=2){var d=u[i],f=u[i+1];"style"===d?ge(a,f):"dangerouslySetInnerHTML"===d?de(a,f):"children"===d?fe(a,f):v(a,d,f,c)}switch(l){case"input":Z(a,o);break;case"textarea":se(a,o);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!o.multiple;var h=o.value;null!=h?te(a,!!o.multiple,h,!1):p!==!!o.multiple&&(null!=o.defaultValue?te(a,!!o.multiple,o.defaultValue,!0):te(a,!!o.multiple,o.multiple?[]:"",!1))}a[pa]=o}catch(g){Tu(e,e.return,g)}}break;case 6:if(gl(n,e),bl(e),4&r){if(null===e.stateNode)throw Error(s(162));a=e.stateNode,o=e.memoizedProps;try{a.nodeValue=o}catch(g){Tu(e,e.return,g)}}break;case 3:if(gl(n,e),bl(e),4&r&&null!==t&&t.memoizedState.isDehydrated)try{Gn(n.containerInfo)}catch(g){Tu(e,e.return,g)}break;case 4:default:gl(n,e),bl(e);break;case 13:gl(n,e),bl(e),8192&(a=e.child).flags&&(o=null!==a.memoizedState,a.stateNode.isHidden=o,!o||null!==a.alternate&&null!==a.alternate.memoizedState||(Vl=Je())),4&r&&ml(e);break;case 22:if(d=null!==t&&null!==t.memoizedState,1&e.mode?(Ji=(c=Ji)||d,gl(n,e),Ji=c):gl(n,e),bl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Qi=e,d=e.child;null!==d;){for(f=Qi=d;null!==Qi;){switch(h=(p=Qi).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:el(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,t=p.return;try{n=r,m.props=n.memoizedProps,m.state=n.memoizedState,m.componentWillUnmount()}catch(g){Tu(r,t,g)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){wl(f);continue}}null!==h?(h.return=p,Qi=h):wl(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{a=f.stateNode,c?"function"===typeof(o=a.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=f.stateNode,i=void 0!==(u=f.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",i))}catch(g){Tu(e,e.return,g)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(g){Tu(e,e.return,g)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:gl(n,e),bl(e),4&r&&ml(e);case 21:}}function bl(e){var n=e.flags;if(2&n){try{e:{for(var t=e.return;null!==t;){if(il(t)){var r=t;break e}t=t.return}throw Error(s(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(fe(a,""),r.flags&=-33),cl(e,ll(e),a);break;case 3:case 4:var o=r.stateNode.containerInfo;ul(e,ll(e),o);break;default:throw Error(s(161))}}catch(i){Tu(e,e.return,i)}e.flags&=-3}4096&n&&(e.flags&=-4097)}function vl(e,n,t){Qi=e,_l(e,n,t)}function _l(e,n,t){for(var r=0!==(1&e.mode);null!==Qi;){var a=Qi,s=a.child;if(22===a.tag&&r){var o=null!==a.memoizedState||Xi;if(!o){var i=a.alternate,l=null!==i&&null!==i.memoizedState||Ji;i=Xi;var u=Ji;if(Xi=o,(Ji=l)&&!u)for(Qi=a;null!==Qi;)l=(o=Qi).child,22===o.tag&&null!==o.memoizedState?kl(a):null!==l?(l.return=o,Qi=l):kl(a);for(;null!==s;)Qi=s,_l(s,n,t),s=s.sibling;Qi=a,Xi=i,Ji=u}Sl(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Qi=s):Sl(e)}}function Sl(e){for(;null!==Qi;){var n=Qi;if(0!==(8772&n.flags)){var t=n.alternate;try{if(0!==(8772&n.flags))switch(n.tag){case 0:case 11:case 15:Ji||al(5,n);break;case 1:var r=n.stateNode;if(4&n.flags&&!Ji)if(null===t)r.componentDidMount();else{var a=n.elementType===n.type?t.memoizedProps:gs(n.type,t.memoizedProps);r.componentDidUpdate(a,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=n.updateQueue;null!==o&&zs(n,o,r);break;case 3:var i=n.updateQueue;if(null!==i){if(t=null,null!==n.child)switch(n.child.tag){case 5:case 1:t=n.child.stateNode}zs(n,i,t)}break;case 5:var l=n.stateNode;if(null===t&&4&n.flags){t=l;var u=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===n.memoizedState){var c=n.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var f=d.dehydrated;null!==f&&Gn(f)}}}break;default:throw Error(s(163))}Ji||512&n.flags&&sl(n)}catch(p){Tu(n,n.return,p)}}if(n===e){Qi=null;break}if(null!==(t=n.sibling)){t.return=n.return,Qi=t;break}Qi=n.return}}function wl(e){for(;null!==Qi;){var n=Qi;if(n===e){Qi=null;break}var t=n.sibling;if(null!==t){t.return=n.return,Qi=t;break}Qi=n.return}}function kl(e){for(;null!==Qi;){var n=Qi;try{switch(n.tag){case 0:case 11:case 15:var t=n.return;try{al(4,n)}catch(l){Tu(n,t,l)}break;case 1:var r=n.stateNode;if("function"===typeof r.componentDidMount){var a=n.return;try{r.componentDidMount()}catch(l){Tu(n,a,l)}}var s=n.return;try{sl(n)}catch(l){Tu(n,s,l)}break;case 5:var o=n.return;try{sl(n)}catch(l){Tu(n,o,l)}}}catch(l){Tu(n,n.return,l)}if(n===e){Qi=null;break}var i=n.sibling;if(null!==i){i.return=n.return,Qi=i;break}Qi=n.return}}var Il,Tl=Math.ceil,xl=_.ReactCurrentDispatcher,Al=_.ReactCurrentOwner,El=_.ReactCurrentBatchConfig,Ol=0,Cl=null,Ml=null,Fl=0,Pl=0,Nl=Ia(0),Rl=0,Ll=null,Dl=0,zl=0,Ul=0,jl=null,Bl=null,Vl=0,Gl=1/0,Wl=null,$l=!1,Hl=null,Kl=null,ql=!1,Yl=null,Xl=0,Jl=0,Zl=null,Ql=-1,eu=0;function nu(){return 0!==(6&Ol)?Je():-1!==Ql?Ql:Ql=Je()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Ol)&&0!==Fl?Fl&-Fl:null!==ms.transition?(0===eu&&(eu=gn()),eu):0!==(e=_n)?e:e=void 0===(e=window.event)?16:Jn(e.type)}function ru(e,n,t,r){if(50<Jl)throw Jl=0,Zl=null,Error(s(185));bn(e,t,r),0!==(2&Ol)&&e===Cl||(e===Cl&&(0===(2&Ol)&&(zl|=t),4===Rl&&lu(e,Fl)),au(e,r),1===t&&0===Ol&&0===(1&n.mode)&&(Gl=Je()+500,Ua&&Va()))}function au(e,n){var t=e.callbackNode;!function(e,n){for(var t=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-on(s),i=1<<o,l=a[o];-1===l?0!==(i&t)&&0===(i&r)||(a[o]=hn(i,n)):l<=n&&(e.expiredLanes|=i),s&=~i}}(e,n);var r=pn(e,e===Cl?Fl:0);if(0===r)null!==t&&qe(t),e.callbackNode=null,e.callbackPriority=0;else if(n=r&-r,e.callbackPriority!==n){if(null!=t&&qe(t),1===n)0===e.tag?function(e){Ua=!0,Ba(e)}(uu.bind(null,e)):Ba(uu.bind(null,e)),oa((function(){0===(6&Ol)&&Va()})),t=null;else{switch(Sn(r)){case 1:t=Qe;break;case 4:t=en;break;case 16:default:t=nn;break;case 536870912:t=rn}t=Cu(t,su.bind(null,e))}e.callbackPriority=n,e.callbackNode=t}}function su(e,n){if(Ql=-1,eu=0,0!==(6&Ol))throw Error(s(327));var t=e.callbackNode;if(ku()&&e.callbackNode!==t)return null;var r=pn(e,e===Cl?Fl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||n)n=yu(e,r);else{n=r;var a=Ol;Ol|=2;var o=mu();for(Cl===e&&Fl===n||(Wl=null,Gl=Je()+500,pu(e,n));;)try{vu();break}catch(l){hu(e,l)}Ss(),xl.current=o,Ol=a,null!==Ml?n=0:(Cl=null,Fl=0,n=Rl)}if(0!==n){if(2===n&&(0!==(a=mn(e))&&(r=a,n=ou(e,a))),1===n)throw t=Ll,pu(e,0),lu(e,r),au(e,Je()),t;if(6===n)lu(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var n=e;;){if(16384&n.flags){var t=n.updateQueue;if(null!==t&&null!==(t=t.stores))for(var r=0;r<t.length;r++){var a=t[r],s=a.getSnapshot;a=a.value;try{if(!ir(s(),a))return!1}catch(i){return!1}}}if(t=n.child,16384&n.subtreeFlags&&null!==t)t.return=n,n=t;else{if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}(a)&&(2===(n=yu(e,r))&&(0!==(o=mn(e))&&(r=o,n=ou(e,o))),1===n))throw t=Ll,pu(e,0),lu(e,r),au(e,Je()),t;switch(e.finishedWork=a,e.finishedLanes=r,n){case 0:case 1:throw Error(s(345));case 2:case 5:wu(e,Bl,Wl);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(n=Vl+500-Je())){if(0!==pn(e,0))break;if(((a=e.suspendedLanes)&r)!==r){nu(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(wu.bind(null,e,Bl,Wl),n);break}wu(e,Bl,Wl);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(n=e.eventTimes,a=-1;0<r;){var i=31-on(r);o=1<<i,(i=n[i])>a&&(a=i),r&=~o}if(r=a,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ra(wu.bind(null,e,Bl,Wl),r);break}wu(e,Bl,Wl);break;default:throw Error(s(329))}}}return au(e,Je()),e.callbackNode===t?su.bind(null,e):null}function ou(e,n){var t=jl;return e.current.memoizedState.isDehydrated&&(pu(e,n).flags|=256),2!==(e=yu(e,n))&&(n=Bl,Bl=t,null!==n&&iu(n)),e}function iu(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lu(e,n){for(n&=~Ul,n&=~zl,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-on(n),r=1<<t;e[t]=-1,n&=~r}}function uu(e){if(0!==(6&Ol))throw Error(s(327));ku();var n=pn(e,0);if(0===(1&n))return au(e,Je()),null;var t=yu(e,n);if(0!==e.tag&&2===t){var r=mn(e);0!==r&&(n=r,t=ou(e,r))}if(1===t)throw t=Ll,pu(e,0),lu(e,n),au(e,Je()),t;if(6===t)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,wu(e,Bl,Wl),au(e,Je()),null}function cu(e,n){var t=Ol;Ol|=1;try{return e(n)}finally{0===(Ol=t)&&(Gl=Je()+500,Ua&&Va())}}function du(e){null!==Yl&&0===Yl.tag&&0===(6&Ol)&&ku();var n=Ol;Ol|=1;var t=El.transition,r=_n;try{if(El.transition=null,_n=1,e)return e()}finally{_n=r,El.transition=t,0===(6&(Ol=n))&&Va()}}function fu(){Pl=Nl.current,Ta(Nl)}function pu(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(-1!==t&&(e.timeoutHandle=-1,aa(t)),null!==Ml)for(t=Ml.return;null!==t;){var r=t;switch(ns(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pa();break;case 3:ao(),Ta(Oa),Ta(Ea),co();break;case 5:oo(r);break;case 4:ao();break;case 13:case 19:Ta(io);break;case 10:ws(r.type._context);break;case 22:case 23:fu()}t=t.return}if(Cl=e,Ml=e=Nu(e.current,null),Fl=Pl=n,Rl=0,Ll=null,Ul=zl=Dl=0,Bl=jl=null,null!==xs){for(n=0;n<xs.length;n++)if(null!==(r=(t=xs[n]).interleaved)){t.interleaved=null;var a=r.next,s=t.pending;if(null!==s){var o=s.next;s.next=a,r.next=o}t.pending=r}xs=null}return e}function hu(e,n){for(;;){var t=Ml;try{if(Ss(),fo.current=oi,bo){for(var r=mo.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}bo=!1}if(ho=0,yo=go=mo=null,vo=!1,_o=0,Al.current=null,null===t||null===t.return){Rl=1,Ll=n,Ml=null;break}e:{var o=e,i=t.return,l=t,u=n;if(n=Fl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,f=d.tag;if(0===(1&d.mode)&&(0===f||11===f||15===f)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=yi(i);if(null!==h){h.flags&=-257,bi(h,i,l,0,n),1&h.mode&&gi(o,c,n),u=c;var m=(n=h).updateQueue;if(null===m){var g=new Set;g.add(u),n.updateQueue=g}else m.add(u);break e}if(0===(1&n)){gi(o,c,n),gu();break e}u=Error(s(426))}else if(as&&1&l.mode){var y=yi(i);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),bi(y,i,l,0,n),hs(ci(u,l));break e}}o=u=ci(u,l),4!==Rl&&(Rl=2),null===jl?jl=[o]:jl.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,n&=-n,o.lanes|=n,Ls(o,hi(0,u,n));break e;case 1:l=u;var b=o.type,v=o.stateNode;if(0===(128&o.flags)&&("function"===typeof b.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Kl||!Kl.has(v)))){o.flags|=65536,n&=-n,o.lanes|=n,Ls(o,mi(o,l,n));break e}}o=o.return}while(null!==o)}Su(t)}catch(_){n=_,Ml===t&&null!==t&&(Ml=t=t.return);continue}break}}function mu(){var e=xl.current;return xl.current=oi,null===e?oi:e}function gu(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Cl||0===(268435455&Dl)&&0===(268435455&zl)||lu(Cl,Fl)}function yu(e,n){var t=Ol;Ol|=2;var r=mu();for(Cl===e&&Fl===n||(Wl=null,pu(e,n));;)try{bu();break}catch(a){hu(e,a)}if(Ss(),Ol=t,xl.current=r,null!==Ml)throw Error(s(261));return Cl=null,Fl=0,Rl}function bu(){for(;null!==Ml;)_u(Ml)}function vu(){for(;null!==Ml&&!Ye();)_u(Ml)}function _u(e){var n=Il(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===n?Su(e):Ml=n,Al.current=null}function Su(e){var n=e;do{var t=n.alternate;if(e=n.return,0===(32768&n.flags)){if(null!==(t=qi(t,n,Pl)))return void(Ml=t)}else{if(null!==(t=Yi(t,n)))return t.flags&=32767,void(Ml=t);if(null===e)return Rl=6,void(Ml=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(n=n.sibling))return void(Ml=n);Ml=n=e}while(null!==n);0===Rl&&(Rl=5)}function wu(e,n,t){var r=_n,a=El.transition;try{El.transition=null,_n=1,function(e,n,t,r){do{ku()}while(null!==Yl);if(0!==(6&Ol))throw Error(s(327));t=e.finishedWork;var a=e.finishedLanes;if(null===t)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=t.lanes|t.childLanes;if(function(e,n){var t=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<t;){var a=31-on(t),s=1<<a;n[a]=0,r[a]=-1,e[a]=-1,t&=~s}}(e,o),e===Cl&&(Ml=Cl=null,Fl=0),0===(2064&t.subtreeFlags)&&0===(2064&t.flags)||ql||(ql=!0,Cu(nn,(function(){return ku(),null}))),o=0!==(15990&t.flags),0!==(15990&t.subtreeFlags)||o){o=El.transition,El.transition=null;var i=_n;_n=1;var l=Ol;Ol|=4,Al.current=null,function(e,n){if(ea=$n,pr(e=fr())){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(r&&0!==r.rangeCount){t=r.anchorNode;var a=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{t.nodeType,o.nodeType}catch(S){t=null;break e}var i=0,l=-1,u=-1,c=0,d=0,f=e,p=null;n:for(;;){for(var h;f!==t||0!==a&&3!==f.nodeType||(l=i+a),f!==o||0!==r&&3!==f.nodeType||(u=i+r),3===f.nodeType&&(i+=f.nodeValue.length),null!==(h=f.firstChild);)p=f,f=h;for(;;){if(f===e)break n;if(p===t&&++c===a&&(l=i),p===o&&++d===r&&(u=i),null!==(h=f.nextSibling))break;p=(f=p).parentNode}f=h}t=-1===l||-1===u?null:{start:l,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(na={focusedElem:e,selectionRange:t},$n=!1,Qi=n;null!==Qi;)if(e=(n=Qi).child,0!==(1028&n.subtreeFlags)&&null!==e)e.return=n,Qi=e;else for(;null!==Qi;){n=Qi;try{var m=n.alternate;if(0!==(1024&n.flags))switch(n.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,b=n.stateNode,v=b.getSnapshotBeforeUpdate(n.elementType===n.type?g:gs(n.type,g),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=n.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(s(163))}}catch(S){Tu(n,n.return,S)}if(null!==(e=n.sibling)){e.return=n.return,Qi=e;break}Qi=n.return}m=tl,tl=!1}(e,t),yl(t,e),hr(na),$n=!!ea,na=ea=null,e.current=t,vl(t,e,a),Xe(),Ol=l,_n=i,El.transition=o}else e.current=t;if(ql&&(ql=!1,Yl=e,Xl=a),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(sn&&"function"===typeof sn.onCommitFiberRoot)try{sn.onCommitFiberRoot(an,e,void 0,128===(128&e.current.flags))}catch(n){}}(t.stateNode),au(e,Je()),null!==n)for(r=e.onRecoverableError,t=0;t<n.length;t++)a=n[t],r(a.value,{componentStack:a.stack,digest:a.digest});if($l)throw $l=!1,e=Hl,Hl=null,e;0!==(1&Xl)&&0!==e.tag&&ku(),o=e.pendingLanes,0!==(1&o)?e===Zl?Jl++:(Jl=0,Zl=e):Jl=0,Va()}(e,n,t,r)}finally{El.transition=a,_n=r}return null}function ku(){if(null!==Yl){var e=Sn(Xl),n=El.transition,t=_n;try{if(El.transition=null,_n=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&Ol))throw Error(s(331));var a=Ol;for(Ol|=4,Qi=e.current;null!==Qi;){var o=Qi,i=o.child;if(0!==(16&Qi.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Qi=c;null!==Qi;){var d=Qi;switch(d.tag){case 0:case 11:case 15:rl(8,d,o)}var f=d.child;if(null!==f)f.return=d,Qi=f;else for(;null!==Qi;){var p=(d=Qi).sibling,h=d.return;if(ol(d),d===c){Qi=null;break}if(null!==p){p.return=h,Qi=p;break}Qi=h}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Qi=o}}if(0!==(2064&o.subtreeFlags)&&null!==i)i.return=o,Qi=i;else e:for(;null!==Qi;){if(0!==(2048&(o=Qi).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var b=o.sibling;if(null!==b){b.return=o.return,Qi=b;break e}Qi=o.return}}var v=e.current;for(Qi=v;null!==Qi;){var _=(i=Qi).child;if(0!==(2064&i.subtreeFlags)&&null!==_)_.return=i,Qi=_;else e:for(i=v;null!==Qi;){if(0!==(2048&(l=Qi).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(w){Tu(l,l.return,w)}if(l===i){Qi=null;break e}var S=l.sibling;if(null!==S){S.return=l.return,Qi=S;break e}Qi=l.return}}if(Ol=a,Va(),sn&&"function"===typeof sn.onPostCommitFiberRoot)try{sn.onPostCommitFiberRoot(an,e)}catch(w){}r=!0}return r}finally{_n=t,El.transition=n}}return!1}function Iu(e,n,t){e=Ns(e,n=hi(0,n=ci(t,n),1),1),n=nu(),null!==e&&(bn(e,1,n),au(e,n))}function Tu(e,n,t){if(3===e.tag)Iu(e,e,t);else for(;null!==n;){if(3===n.tag){Iu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){n=Ns(n,e=mi(n,e=ci(t,e),1),1),e=nu(),null!==n&&(bn(n,1,e),au(n,e));break}}n=n.return}}function xu(e,n,t){var r=e.pingCache;null!==r&&r.delete(n),n=nu(),e.pingedLanes|=e.suspendedLanes&t,Cl===e&&(Fl&t)===t&&(4===Rl||3===Rl&&(130023424&Fl)===Fl&&500>Je()-Vl?pu(e,0):Ul|=t),au(e,n)}function Au(e,n){0===n&&(0===(1&e.mode)?n=1:(n=dn,0===(130023424&(dn<<=1))&&(dn=4194304)));var t=nu();null!==(e=Os(e,n))&&(bn(e,n,t),au(e,t))}function Eu(e){var n=e.memoizedState,t=0;null!==n&&(t=n.retryLane),Au(e,t)}function Ou(e,n){var t=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(t=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(n),Au(e,t)}function Cu(e,n){return Ke(e,n)}function Mu(e,n,t,r){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fu(e,n,t,r){return new Mu(e,n,t,r)}function Pu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nu(e,n){var t=e.alternate;return null===t?((t=Fu(e.tag,n,e.key,e.mode)).elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=14680064&e.flags,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function Ru(e,n,t,r,a,o){var i=2;if(r=e,"function"===typeof e)Pu(e)&&(i=1);else if("string"===typeof e)i=5;else e:switch(e){case k:return Lu(t.children,a,o,n);case I:i=8,a|=8;break;case T:return(e=Fu(12,t,n,2|a)).elementType=T,e.lanes=o,e;case O:return(e=Fu(13,t,n,a)).elementType=O,e.lanes=o,e;case C:return(e=Fu(19,t,n,a)).elementType=C,e.lanes=o,e;case P:return Du(t,a,o,n);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case x:i=10;break e;case A:i=9;break e;case E:i=11;break e;case M:i=14;break e;case F:i=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(n=Fu(i,t,n,a)).elementType=e,n.type=r,n.lanes=o,n}function Lu(e,n,t,r){return(e=Fu(7,e,r,n)).lanes=t,e}function Du(e,n,t,r){return(e=Fu(22,e,r,n)).elementType=P,e.lanes=t,e.stateNode={isHidden:!1},e}function zu(e,n,t){return(e=Fu(6,e,null,n)).lanes=t,e}function Uu(e,n,t){return(n=Fu(4,null!==e.children?e.children:[],e.key,n)).lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function ju(e,n,t,r,a){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yn(0),this.expirationTimes=yn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yn(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Bu(e,n,t,r,a,s,o,i,l){return e=new ju(e,n,t,i,l),1===n?(n=1,!0===s&&(n|=8)):n=0,s=Fu(3,null,null,n),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ms(s),e}function Vu(e){if(!e)return Aa;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Fa(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(null!==n);throw Error(s(171))}if(1===e.tag){var t=e.type;if(Fa(t))return Ra(e,t,n)}return n}function Gu(e,n,t,r,a,s,o,i,l){return(e=Bu(t,r,!0,e,0,s,0,i,l)).context=Vu(null),t=e.current,(s=Ps(r=nu(),a=tu(t))).callback=void 0!==n&&null!==n?n:null,Ns(t,s,a),e.current.lanes=a,bn(e,a,r),au(e,r),e}function Wu(e,n,t,r){var a=n.current,s=nu(),o=tu(a);return t=Vu(t),null===n.context?n.context=t:n.pendingContext=t,(n=Ps(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(n.callback=r),null!==(e=Ns(a,n,o))&&(ru(e,a,o,s),Rs(e,a,o)),o}function $u(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hu(e,n){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var t=e.retryLane;e.retryLane=0!==t&&t<n?t:n}}function Ku(e,n){Hu(e,n),(e=e.alternate)&&Hu(e,n)}Il=function(e,n,t){if(null!==e)if(e.memoizedProps!==n.pendingProps||Oa.current)_i=!0;else{if(0===(e.lanes&t)&&0===(128&n.flags))return _i=!1,function(e,n,t){switch(n.tag){case 3:Ci(n),ps();break;case 5:so(n);break;case 1:Fa(n.type)&&La(n);break;case 4:ro(n,n.stateNode.containerInfo);break;case 10:var r=n.type._context,a=n.memoizedProps.value;xa(ys,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=n.memoizedState))return null!==r.dehydrated?(xa(io,1&io.current),n.flags|=128,null):0!==(t&n.child.childLanes)?zi(e,n,t):(xa(io,1&io.current),null!==(e=$i(e,n,t))?e.sibling:null);xa(io,1&io.current);break;case 19:if(r=0!==(t&n.childLanes),0!==(128&e.flags)){if(r)return Gi(e,n,t);n.flags|=128}if(null!==(a=n.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),xa(io,io.current),r)break;return null;case 22:case 23:return n.lanes=0,Ti(e,n,t)}return $i(e,n,t)}(e,n,t);_i=0!==(131072&e.flags)}else _i=!1,as&&0!==(1048576&n.flags)&&Qa(n,Ha,n.index);switch(n.lanes=0,n.tag){case 2:var r=n.type;Wi(e,n),e=n.pendingProps;var a=Ma(n,Ea.current);Is(n,t),a=Io(null,n,r,e,a,t);var o=To();return n.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Fa(r)?(o=!0,La(n)):o=!1,n.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Ms(n),a.updater=Bs,n.stateNode=a,a._reactInternals=n,$s(n,r,e,t),n=Oi(null,n,r,!0,o,t)):(n.tag=0,as&&o&&es(n),Si(null,n,a,t),n=n.child),n;case 16:r=n.elementType;e:{switch(Wi(e,n),e=n.pendingProps,r=(a=r._init)(r._payload),n.type=r,a=n.tag=function(e){if("function"===typeof e)return Pu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===M)return 14}return 2}(r),e=gs(r,e),a){case 0:n=Ai(null,n,r,e,t);break e;case 1:n=Ei(null,n,r,e,t);break e;case 11:n=wi(null,n,r,e,t);break e;case 14:n=ki(null,n,r,gs(r.type,e),t);break e}throw Error(s(306,r,""))}return n;case 0:return r=n.type,a=n.pendingProps,Ai(e,n,r,a=n.elementType===r?a:gs(r,a),t);case 1:return r=n.type,a=n.pendingProps,Ei(e,n,r,a=n.elementType===r?a:gs(r,a),t);case 3:e:{if(Ci(n),null===e)throw Error(s(387));r=n.pendingProps,a=(o=n.memoizedState).element,Fs(e,n),Ds(n,r,null,t);var i=n.memoizedState;if(r=i.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},n.updateQueue.baseState=o,n.memoizedState=o,256&n.flags){n=Mi(e,n,r,t,a=ci(Error(s(423)),n));break e}if(r!==a){n=Mi(e,n,r,t,a=ci(Error(s(424)),n));break e}for(rs=ua(n.stateNode.containerInfo.firstChild),ts=n,as=!0,ss=null,t=Js(n,null,r,t),n.child=t;t;)t.flags=-3&t.flags|4096,t=t.sibling}else{if(ps(),r===a){n=$i(e,n,t);break e}Si(e,n,r,t)}n=n.child}return n;case 5:return so(n),null===e&&us(n),r=n.type,a=n.pendingProps,o=null!==e?e.memoizedProps:null,i=a.children,ta(r,a)?i=null:null!==o&&ta(r,o)&&(n.flags|=32),xi(e,n),Si(e,n,i,t),n.child;case 6:return null===e&&us(n),null;case 13:return zi(e,n,t);case 4:return ro(n,n.stateNode.containerInfo),r=n.pendingProps,null===e?n.child=Xs(n,null,r,t):Si(e,n,r,t),n.child;case 11:return r=n.type,a=n.pendingProps,wi(e,n,r,a=n.elementType===r?a:gs(r,a),t);case 7:return Si(e,n,n.pendingProps,t),n.child;case 8:case 12:return Si(e,n,n.pendingProps.children,t),n.child;case 10:e:{if(r=n.type._context,a=n.pendingProps,o=n.memoizedProps,i=a.value,xa(ys,r._currentValue),r._currentValue=i,null!==o)if(ir(o.value,i)){if(o.children===a.children&&!Oa.current){n=$i(e,n,t);break e}}else for(null!==(o=n.child)&&(o.return=n);null!==o;){var l=o.dependencies;if(null!==l){i=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Ps(-1,t&-t)).tag=2;var c=o.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}o.lanes|=t,null!==(u=o.alternate)&&(u.lanes|=t),ks(o.return,t,n),l.lanes|=t;break}u=u.next}}else if(10===o.tag)i=o.type===n.type?null:o.child;else if(18===o.tag){if(null===(i=o.return))throw Error(s(341));i.lanes|=t,null!==(l=i.alternate)&&(l.lanes|=t),ks(i,t,n),i=o.sibling}else i=o.child;if(null!==i)i.return=o;else for(i=o;null!==i;){if(i===n){i=null;break}if(null!==(o=i.sibling)){o.return=i.return,i=o;break}i=i.return}o=i}Si(e,n,a.children,t),n=n.child}return n;case 9:return a=n.type,r=n.pendingProps.children,Is(n,t),r=r(a=Ts(a)),n.flags|=1,Si(e,n,r,t),n.child;case 14:return a=gs(r=n.type,n.pendingProps),ki(e,n,r,a=gs(r.type,a),t);case 15:return Ii(e,n,n.type,n.pendingProps,t);case 17:return r=n.type,a=n.pendingProps,a=n.elementType===r?a:gs(r,a),Wi(e,n),n.tag=1,Fa(r)?(e=!0,La(n)):e=!1,Is(n,t),Gs(n,r,a),$s(n,r,a,t),Oi(null,n,r,!0,e,t);case 19:return Gi(e,n,t);case 22:return Ti(e,n,t)}throw Error(s(156,n.tag))};var qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}function Xu(e){this._internalRoot=e}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qu(){}function ec(e,n,t,r,a){var s=t._reactRootContainer;if(s){var o=s;if("function"===typeof a){var i=a;a=function(){var e=$u(o);i.call(e)}}Wu(n,o,e,a)}else o=function(e,n,t,r,a){if(a){if("function"===typeof r){var s=r;r=function(){var e=$u(o);s.call(e)}}var o=Gu(n,r,e,0,null,!1,0,"",Qu);return e._reactRootContainer=o,e[ha]=o.current,Vr(8===e.nodeType?e.parentNode:e),du(),o}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var i=r;r=function(){var e=$u(l);i.call(e)}}var l=Bu(e,0,!1,null,0,!1,0,"",Qu);return e._reactRootContainer=l,e[ha]=l.current,Vr(8===e.nodeType?e.parentNode:e),du((function(){Wu(n,l,t,r)})),l}(t,n,e,a,r);return $u(o)}Xu.prototype.render=Yu.prototype.render=function(e){var n=this._internalRoot;if(null===n)throw Error(s(409));Wu(e,n,null,null)},Xu.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var n=e.containerInfo;du((function(){Wu(null,e,null,null)})),n[ha]=null}},Xu.prototype.unstable_scheduleHydration=function(e){if(e){var n=Tn();e={blockedOn:null,target:e,priority:n};for(var t=0;t<Nn.length&&0!==n&&n<Nn[t].priority;t++);Nn.splice(t,0,e),0===t&&zn(e)}},wn=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var t=fn(n.pendingLanes);0!==t&&(vn(n,1|t),au(n,Je()),0===(6&Ol)&&(Gl=Je()+500,Va()))}break;case 13:du((function(){var n=Os(e,1);if(null!==n){var t=nu();ru(n,e,1,t)}})),Ku(e,1)}},kn=function(e){if(13===e.tag){var n=Os(e,134217728);if(null!==n)ru(n,e,134217728,nu());Ku(e,134217728)}},In=function(e){if(13===e.tag){var n=tu(e),t=Os(e,n);if(null!==t)ru(t,e,n,nu());Ku(e,n)}},Tn=function(){return _n},xn=function(e,n){var t=_n;try{return _n=e,n()}finally{_n=t}},we=function(e,n,t){switch(n){case"input":if(Z(e,t),n=t.name,"radio"===t.type&&null!=n){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<t.length;n++){var r=t[n];if(r!==e&&r.form===e.form){var a=Sa(r);if(!a)throw Error(s(90));K(r),Z(r,a)}}}break;case"textarea":se(e,t);break;case"select":null!=(n=t.value)&&te(e,!!t.multiple,n,!1)}},Ee=cu,Oe=du;var nc={usingClientEntryPoint:!1,Events:[va,_a,Sa,xe,Ae,cu]},tc={findFiberByHostInstance:ba,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{an=ac.inject(rc),sn=ac}catch(ce){}}n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nc,n.createPortal=function(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(n))throw Error(s(200));return function(e,n,t){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:n,implementation:t}}(e,n,null,t)},n.createRoot=function(e,n){if(!Ju(e))throw Error(s(299));var t=!1,r="",a=qu;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(t=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),n=Bu(e,1,!1,null,0,t,0,r,a),e[ha]=n.current,Vr(8===e.nodeType?e.parentNode:e),new Yu(n)},n.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var n=e._reactInternals;if(void 0===n){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=$e(n))?null:e.stateNode},n.flushSync=function(e){return du(e)},n.hydrate=function(e,n,t){if(!Zu(n))throw Error(s(200));return ec(null,e,n,!0,t)},n.hydrateRoot=function(e,n,t){if(!Ju(e))throw Error(s(405));var r=null!=t&&t.hydratedSources||null,a=!1,o="",i=qu;if(null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(a=!0),void 0!==t.identifierPrefix&&(o=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),n=Gu(n,null,e,1,null!=t?t:null,a,0,o,i),e[ha]=n.current,Vr(e),r)for(e=0;e<r.length;e++)a=(a=(t=r[e])._getVersion)(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a);return new Xu(n)},n.render=function(e,n,t){if(!Zu(n))throw Error(s(200));return ec(null,e,n,!1,t)},n.unmountComponentAtNode=function(e){if(!Zu(e))throw Error(s(40));return!!e._reactRootContainer&&(du((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[ha]=null}))})),!0)},n.unstable_batchedUpdates=cu,n.unstable_renderSubtreeIntoContainer=function(e,n,t,r){if(!Zu(t))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return ec(e,n,t,!1,r)},n.version="18.2.0-next-9e3b772b8-20220608"},250:(e,n,t)=>{"use strict";var r=t(164);n.createRoot=r.createRoot,n.hydrateRoot=r.hydrateRoot},164:(e,n,t)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}(),e.exports=t(463)},372:(e,n)=>{"use strict";var t,r=Symbol.for("react.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var n=e.$$typeof;switch(n){case r:switch(e=e.type){case s:case i:case o:case f:case p:return e;default:switch(e=e&&e.$$typeof){case c:case u:case d:case m:case h:case l:return e;default:return n}}case a:return n}}}t=Symbol.for("react.module.reference"),n.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===i||e===o||e===f||e===p||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===h||e.$$typeof===l||e.$$typeof===u||e.$$typeof===d||e.$$typeof===t||void 0!==e.getModuleId)},n.typeOf=y},441:(e,n,t)=>{"use strict";e.exports=t(372)},374:(e,n,t)=>{"use strict";var r=t(791),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,n,t){var r,s={},u=null,c=null;for(r in void 0!==t&&(u=""+t),void 0!==n.key&&(u=""+n.key),void 0!==n.ref&&(c=n.ref),n)o.call(n,r)&&!l.hasOwnProperty(r)&&(s[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps)void 0===s[r]&&(s[r]=n[r]);return{$$typeof:a,type:e,key:u,ref:c,props:s,_owner:i.current}}n.Fragment=s,n.jsx=u,n.jsxs=u},117:(e,n)=>{"use strict";var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),p=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,n,t){this.props=e,this.context=n,this.refs=g,this.updater=t||h}function b(){}function v(e,n,t){this.props=e,this.context=n,this.refs=g,this.updater=t||h}y.prototype.isReactComponent={},y.prototype.setState=function(e,n){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var _=v.prototype=new b;_.constructor=v,m(_,y.prototype),_.isPureReactComponent=!0;var S=Array.isArray,w=Object.prototype.hasOwnProperty,k={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function T(e,n,r){var a,s={},o=null,i=null;if(null!=n)for(a in void 0!==n.ref&&(i=n.ref),void 0!==n.key&&(o=""+n.key),n)w.call(n,a)&&!I.hasOwnProperty(a)&&(s[a]=n[a]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===s[a]&&(s[a]=l[a]);return{$$typeof:t,type:e,key:o,ref:i,props:s,_owner:k.current}}function x(e){return"object"===typeof e&&null!==e&&e.$$typeof===t}var A=/\/+/g;function E(e,n){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return n[e]}))}(""+e.key):n.toString(36)}function O(e,n,a,s,o){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var l=!1;if(null===e)l=!0;else switch(i){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case t:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+E(l,0):s,S(o)?(a="",null!=e&&(a=e.replace(A,"$&/")+"/"),O(o,n,a,"",(function(e){return e}))):null!=o&&(x(o)&&(o=function(e,n){return{$$typeof:t,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}(o,a+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(A,"$&/")+"/")+e)),n.push(o)),1;if(l=0,s=""===s?".":s+":",S(e))for(var u=0;u<e.length;u++){var c=s+E(i=e[u],u);l+=O(i,n,a,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(i=e.next()).done;)l+=O(i=i.value,n,a,c=s+E(i,u++),o);else if("object"===i)throw n=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return l}function C(e,n,t){if(null==e)return e;var r=[],a=0;return O(e,r,"","",(function(e){return n.call(t,e,a++)})),r}function M(e){if(-1===e._status){var n=e._result;(n=n()).then((function(n){0!==e._status&&-1!==e._status||(e._status=1,e._result=n)}),(function(n){0!==e._status&&-1!==e._status||(e._status=2,e._result=n)})),-1===e._status&&(e._status=0,e._result=n)}if(1===e._status)return e._result.default;throw e._result}var F={current:null},P={transition:null},N={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:P,ReactCurrentOwner:k};n.Children={map:C,forEach:function(e,n,t){C(e,(function(){n.apply(this,arguments)}),t)},count:function(e){var n=0;return C(e,(function(){n++})),n},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!x(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},n.Component=y,n.Fragment=a,n.Profiler=o,n.PureComponent=v,n.StrictMode=s,n.Suspense=c,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,n.cloneElement=function(e,n,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),s=e.key,o=e.ref,i=e._owner;if(null!=n){if(void 0!==n.ref&&(o=n.ref,i=k.current),void 0!==n.key&&(s=""+n.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in n)w.call(n,u)&&!I.hasOwnProperty(u)&&(a[u]=void 0===n[u]&&void 0!==l?l[u]:n[u])}var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}return{$$typeof:t,type:e.type,key:s,ref:o,props:a,_owner:i}},n.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},n.createElement=T,n.createFactory=function(e){var n=T.bind(null,e);return n.type=e,n},n.createRef=function(){return{current:null}},n.forwardRef=function(e){return{$$typeof:u,render:e}},n.isValidElement=x,n.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:M}},n.memo=function(e,n){return{$$typeof:d,type:e,compare:void 0===n?null:n}},n.startTransition=function(e){var n=P.transition;P.transition={};try{e()}finally{P.transition=n}},n.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},n.useCallback=function(e,n){return F.current.useCallback(e,n)},n.useContext=function(e){return F.current.useContext(e)},n.useDebugValue=function(){},n.useDeferredValue=function(e){return F.current.useDeferredValue(e)},n.useEffect=function(e,n){return F.current.useEffect(e,n)},n.useId=function(){return F.current.useId()},n.useImperativeHandle=function(e,n,t){return F.current.useImperativeHandle(e,n,t)},n.useInsertionEffect=function(e,n){return F.current.useInsertionEffect(e,n)},n.useLayoutEffect=function(e,n){return F.current.useLayoutEffect(e,n)},n.useMemo=function(e,n){return F.current.useMemo(e,n)},n.useReducer=function(e,n,t){return F.current.useReducer(e,n,t)},n.useRef=function(e){return F.current.useRef(e)},n.useState=function(e){return F.current.useState(e)},n.useSyncExternalStore=function(e,n,t){return F.current.useSyncExternalStore(e,n,t)},n.useTransition=function(){return F.current.useTransition()},n.version="18.2.0"},791:(e,n,t)=>{"use strict";e.exports=t(117)},184:(e,n,t)=>{"use strict";e.exports=t(374)},457:(e,n,t)=>{"use strict";n.Z=void 0;var r,a=t(588),s=(r=t(936))&&r.__esModule?r:{default:r};function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e){var n,t=e.store,r=e.params,o=e.replaceState,i=e.initialTruth,l=e.history,u=void 0===l?(0,a.createBrowserHistory)():l,c=t.dispatch,d=!1,f=!1;function p(e){return Object.hasOwnProperty.call(e,"location")?e.location:Object.hasOwnProperty.call(e,"getCurrentLocation")?e.getCurrentLocation():void 0}function h(e){var n=new s.default(e.search),t={};return Object.keys(r).forEach((function(e){var a=r[e],s=a.defaultValue,o=a.stringToValue,i=void 0===o?function(e){return e}:o,l=n.get(e),u=null===l?s:i(l);t[e]=u})),t}function m(e){if(void 0!==e.location&&(e=e.location),!d){var a=t.getState(),s=h(e),o=[];Object.keys(s).forEach((function(e){var t=s[e];if(void 0===n||n[e]!==t){var i=r[e],l=i.selector,u=i.action;l(a)!==t&&o.push(u(t))}})),n=s,f=!0,o.forEach((function(e){c(e)})),f=!1,g({replaceState:!0})}}function g(e){var a=e.replaceState;if(!f){var o=t.getState(),i=p(u),l=new s.default(i.search);Object.keys(r).forEach((function(e){var t=r[e],a=t.selector,s=t.defaultValue,i=t.valueToString,u=void 0===i?function(e){return"".concat(e)}:i,c=a(o);c===s?l.delete(e):l.set(e,u(c)),n[e]=c}));var c="?".concat(l);if(c!==(i.search||"?")){d=!0;var h={pathname:i.pathname,search:c,hash:i.hash,state:i.state};a?u.replace(h):u.push(h),d=!1}}}var y=u.listen(m),b=t.subscribe((function(){return g({replaceState:o})}));return"location"===i?m(p(u)):n=h(p(u)),"store"===i&&g({replaceState:!0}),function(){y(),b()}}l.enhancer=function(e){return function(n){return function(t,r,a){var s=n(t,r,a);return l(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(t,!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({store:s},e)),s}}};var u=l;n.Z=u},813:(e,n)=>{"use strict";function t(e,n){var t=e.length;e.push(n);e:for(;0<t;){var r=t-1>>>1,a=e[r];if(!(0<s(a,n)))break e;e[r]=n,e[t]=a,t=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var n=e[0],t=e.pop();if(t!==n){e[0]=t;e:for(var r=0,a=e.length,o=a>>>1;r<o;){var i=2*(r+1)-1,l=e[i],u=i+1,c=e[u];if(0>s(l,t))u<a&&0>s(c,l)?(e[r]=c,e[u]=t,r=u):(e[r]=l,e[i]=t,r=i);else{if(!(u<a&&0>s(c,t)))break e;e[r]=c,e[u]=t,r=u}}}return n}function s(e,n){var t=e.sortIndex-n.sortIndex;return 0!==t?t:e.id-n.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;n.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();n.unstable_now=function(){return i.now()-l}}var u=[],c=[],d=1,f=null,p=3,h=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var n=r(c);null!==n;){if(null===n.callback)a(c);else{if(!(n.startTime<=e))break;a(c),n.sortIndex=n.expirationTime,t(u,n)}n=r(c)}}function S(e){if(g=!1,_(e),!m)if(null!==r(u))m=!0,P(w);else{var n=r(c);null!==n&&N(S,n.startTime-e)}}function w(e,t){m=!1,g&&(g=!1,b(x),x=-1),h=!0;var s=p;try{for(_(t),f=r(u);null!==f&&(!(f.expirationTime>t)||e&&!O());){var o=f.callback;if("function"===typeof o){f.callback=null,p=f.priorityLevel;var i=o(f.expirationTime<=t);t=n.unstable_now(),"function"===typeof i?f.callback=i:f===r(u)&&a(u),_(t)}else a(u);f=r(u)}if(null!==f)var l=!0;else{var d=r(c);null!==d&&N(S,d.startTime-t),l=!1}return l}finally{f=null,p=s,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,I=!1,T=null,x=-1,A=5,E=-1;function O(){return!(n.unstable_now()-E<A)}function C(){if(null!==T){var e=n.unstable_now();E=e;var t=!0;try{t=T(!0,e)}finally{t?k():(I=!1,T=null)}}else I=!1}if("function"===typeof v)k=function(){v(C)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,F=M.port2;M.port1.onmessage=C,k=function(){F.postMessage(null)}}else k=function(){y(C,0)};function P(e){T=e,I||(I=!0,k())}function N(e,t){x=y((function(){e(n.unstable_now())}),t)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(e){e.callback=null},n.unstable_continueExecution=function(){m||h||(m=!0,P(w))},n.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return r(u)},n.unstable_next=function(e){switch(p){case 1:case 2:case 3:var n=3;break;default:n=p}var t=p;p=n;try{return e()}finally{p=t}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var t=p;p=e;try{return n()}finally{p=t}},n.unstable_scheduleCallback=function(e,a,s){var o=n.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:s,expirationTime:i=s+i,sortIndex:-1},s>o?(e.sortIndex=s,t(c,e),null===r(u)&&e===r(c)&&(g?(b(x),x=-1):g=!0,N(S,s-o))):(e.sortIndex=i,t(u,e),m||h||(m=!0,P(w))),e},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(e){var n=p;return function(){var t=p;p=n;try{return e.apply(this,arguments)}finally{p=t}}}},296:(e,n,t)=>{"use strict";e.exports=t(813)},613:e=>{e.exports=function(e,n,t,r){var a=t?t.call(r,e,n):void 0;if(void 0!==a)return!!a;if(e===n)return!0;if("object"!==typeof e||!e||"object"!==typeof n||!n)return!1;var s=Object.keys(e),o=Object.keys(n);if(s.length!==o.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(n),l=0;l<s.length;l++){var u=s[l];if(!i(u))return!1;var c=e[u],d=n[u];if(!1===(a=t?t.call(r,c,d,u):void 0)||void 0===a&&c!==d)return!1}return!0}},561:(e,n,t)=>{"use strict";var r=t(791);var a="function"===typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e===1/n)||e!==e&&n!==n},s=r.useState,o=r.useEffect,i=r.useLayoutEffect,l=r.useDebugValue;function u(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!a(e,t)}catch(r){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,n){return n()}:function(e,n){var t=n(),r=s({inst:{value:t,getSnapshot:n}}),a=r[0].inst,c=r[1];return i((function(){a.value=t,a.getSnapshot=n,u(a)&&c({inst:a})}),[e,t,n]),o((function(){return u(a)&&c({inst:a}),e((function(){u(a)&&c({inst:a})}))}),[e]),l(t),t};n.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},595:(e,n,t)=>{"use strict";var r=t(791),a=t(248);var s="function"===typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e===1/n)||e!==e&&n!==n},o=a.useSyncExternalStore,i=r.useRef,l=r.useEffect,u=r.useMemo,c=r.useDebugValue;n.useSyncExternalStoreWithSelector=function(e,n,t,r,a){var d=i(null);if(null===d.current){var f={hasValue:!1,value:null};d.current=f}else f=d.current;d=u((function(){function e(e){if(!l){if(l=!0,o=e,e=r(e),void 0!==a&&f.hasValue){var n=f.value;if(a(n,e))return i=n}return i=e}if(n=i,s(o,e))return n;var t=r(e);return void 0!==a&&a(n,t)?n:(o=e,i=t)}var o,i,l=!1,u=void 0===t?null:t;return[function(){return e(n())},null===u?void 0:function(){return e(u())}]}),[n,t,r,a]);var p=o(e,d[0],d[1]);return l((function(){f.hasValue=!0,f.value=p}),[p]),c(p),p}},248:(e,n,t)=>{"use strict";e.exports=t(561)},327:(e,n,t)=>{"use strict";e.exports=t(595)},305:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfEAAABTCAYAAACPkT4sAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAABGRJREFUeJzt3b2LpWcdxvHrPjsYk0IlWARTpFhlTmwkWmhnLIyBWDwklYhV8K1KlZkJmGYRnBlsgghGgoJJBAvjIyiolfGlFDW+7BxICgNbicKKLyjJ3P4FSnafM3PPL/v59PM71zzDme9wmmmbHPQs87396eThhTeG+9K8+7FV2o+W3Gjpn9ubNk9va9NZOJzXP23Jh0fvWKqlf3xv2vxw9I7/52i+9+WkXx69Y6me1fsOpj++NHrHWTqedx/qaT8YvWOpnrx4MJ3cP3rHWTuc1z9uyQOjdyzV0h7Zm66+sOTGaltjAIDzJeIAUJSIA0BRIg4ARYk4ABQl4gBQlIgDQFEiDgBFiTgAFCXiAFCUiANAUSIOAEWJOAAUJeIAUJSIA0BRO6MHJMnh/N6PrHL6niU3ruWt33hq+s1r29rE//TvpH9r9IjXk1dHbzh77a/J6XfHbljd19IfOZ7XH7rZCz25vj+dfGebqy6onyV9M3JAS/vg8bz+zLIb/ZePT5s/bGvTBfVa0r85dkK7fJr+0eN5/c4lVy5ExFc5fbQnn1xy4878/fkkIn7GWvLPvWmz6JcEb1S/tj/4WR/O6ydbcqUvutJeSXIrRPzZ/WnzzMgBR/P6zz15etmV1WNJ3tQR78l/Dga/t47n9SeSfHvZe8vH6QBQlogDQFEiDgBFiTgAFCXiAFCUiANAUSIOAEWJOAAUJeIAUJSIA0BRIg4ARYk4ABQl4gBQlIgDQFEiDgBFXYj/J04dPXnb4bz7q9E7WvLY/rT5xegdZ+zdo591S+4a+frFfOFw3v384A2vnCYPLjmwk7y6rTGcPRHnRl1qae8fPaKlv330hnNw+0V41rxh97S0e0YO6MmLT0wnw//I5vz4OB0AihJxAChKxAGgKBEHgKJEHACKEnEAKErEAaAoEQeAokQcAIoScQAoSsQBoCgRB4CiRBwAihJxACjKvyLlRr3e0387ekSS66MHnIN/9fSrIwe0tLuSvGvkhkL+1NP/MnJAS9uMfH3On4hzQ1ryt/1p84HRO24RLx8MftaH8/rJllwZuaGQLx5Mm2dGj+DW4uN0AChKxAGgKBEHgKJEHACKEnEAKErEAaAoEQeAokQcAIoScQAoSsQBoCgRB4CiRBwAihJxAChKxAGgKBEHgKJ2WvLZJQdO095xNO9+fcmNnv77lrZox23Z+fLRvHvp5jfk+tJnkfSfL/v6i68ndyz9eW/DafKVJ6bN70bvOFvt7vHPut2X5EpLv3azF3r69S0OgsVa8pbR762eXO7J11bJr5fc2dmbThZ9I8fzvQ/3tKMlN3r6p/ank+eW3Dic1/9I2h0LTvxkbzp5fMmGW8RtSfv06BGX0r+f5E0e8X7n+Gfd07N6dH+6+tLYHbBVO+PfW8kq7at709UXlt0AAEoScQAoSsQBoCgRB4CiRBwAihJxAChKxAGgKBEHgKJEHACKEnEAKErEAaAoEQeAokQcAIoScQAoSsQBoKj/ApGS0l+mZnzQAAAAAElFTkSuQmCC"},462:(e,n,t)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},r.apply(this,arguments)}t.d(n,{Z:()=>r})}},n={};function t(r){var a=n[r];if(void 0!==a)return a.exports;var s=n[r]={exports:{}};return e[r](s,s.exports,t),s.exports}t.m=e,t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.f={},t.e=e=>Promise.all(Object.keys(t.f).reduce(((n,r)=>(t.f[r](e,n),n)),[])),t.u=e=>"static/js/"+e+".4f652202.chunk.js",t.miniCssF=e=>{},t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={},n="webpd_website:";t.l=(r,a,s,o)=>{if(e[r])e[r].push(a);else{var i,l;if(void 0!==s)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==n+s){i=d;break}}i||(l=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,t.nc&&i.setAttribute("nonce",t.nc),i.setAttribute("data-webpack",n+s),i.src=r),e[r]=[a];var f=(n,t)=>{i.onerror=i.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],i.parentNode&&i.parentNode.removeChild(i),a&&a.forEach((e=>e(t))),n)return n(t)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=f.bind(null,i.onerror),i.onload=f.bind(null,i.onload),l&&document.head.appendChild(i)}}})(),t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.p="./",(()=>{t.b=document.baseURI||self.location.href;var e={179:0};t.f.j=(n,r)=>{var a=t.o(e,n)?e[n]:void 0;if(0!==a)if(a)r.push(a[2]);else{var s=new Promise(((t,r)=>a=e[n]=[t,r]));r.push(a[2]=s);var o=t.p+t.u(n),i=new Error;t.l(o,(r=>{if(t.o(e,n)&&(0!==(a=e[n])&&(e[n]=void 0),a)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;i.message="Loading chunk "+n+" failed.\n("+s+": "+o+")",i.name="ChunkLoadError",i.type=s,i.request=o,a[1](i)}}),"chunk-"+n,n)}};var n=(n,r)=>{var a,s,o=r[0],i=r[1],l=r[2],u=0;if(o.some((n=>0!==e[n]))){for(a in i)t.o(i,a)&&(t.m[a]=i[a]);if(l)l(t)}for(n&&n(r);u<o.length;u++)s=o[u],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkwebpd_website=self.webpackChunkwebpd_website||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))})(),t.nc=void 0,(()=>{"use strict";var e=t(791),n=t(250);function r(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var a=t(441),s=t(613),o=t.n(s);const i=function(e){function n(e,r,l,u,f){for(var p,h,m,g,_,w=0,k=0,I=0,T=0,x=0,F=0,N=m=p=0,L=0,D=0,z=0,U=0,j=l.length,B=j-1,V="",G="",W="",$="";L<j;){if(h=l.charCodeAt(L),L===B&&0!==k+T+I+w&&(0!==k&&(h=47===k?10:47),T=I=w=0,j++,B++),0===k+T+I+w){if(L===B&&(0<D&&(V=V.replace(d,"")),0<V.trim().length)){switch(h){case 32:case 9:case 59:case 13:case 10:break;default:V+=l.charAt(L)}h=59}switch(h){case 123:for(p=(V=V.trim()).charCodeAt(0),m=1,U=++L;L<j;){switch(h=l.charCodeAt(L)){case 123:m++;break;case 125:m--;break;case 47:switch(h=l.charCodeAt(L+1)){case 42:case 47:e:{for(N=L+1;N<B;++N)switch(l.charCodeAt(N)){case 47:if(42===h&&42===l.charCodeAt(N-1)&&L+2!==N){L=N+1;break e}break;case 10:if(47===h){L=N+1;break e}}L=N}}break;case 91:h++;case 40:h++;case 34:case 39:for(;L++<B&&l.charCodeAt(L)!==h;);}if(0===m)break;L++}if(m=l.substring(U,L),0===p&&(p=(V=V.replace(c,"").trim()).charCodeAt(0)),64===p){switch(0<D&&(V=V.replace(d,"")),h=V.charCodeAt(1)){case 100:case 109:case 115:case 45:D=r;break;default:D=M}if(U=(m=n(r,D,m,h,f+1)).length,0<P&&(_=i(3,m,D=t(M,V,z),r,E,A,U,h,f,u),V=D.join(""),void 0!==_&&0===(U=(m=_.trim()).length)&&(h=0,m="")),0<U)switch(h){case 115:V=V.replace(S,o);case 100:case 109:case 45:m=V+"{"+m+"}";break;case 107:m=(V=V.replace(y,"$1 $2"))+"{"+m+"}",m=1===C||2===C&&s("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=V+m,112===u&&(G+=m,m="")}else m=""}else m=n(r,t(r,V,z),m,u,f+1);W+=m,m=z=D=N=p=0,V="",h=l.charCodeAt(++L);break;case 125:case 59:if(1<(U=(V=(0<D?V.replace(d,""):V).trim()).length))switch(0===N&&(p=V.charCodeAt(0),45===p||96<p&&123>p)&&(U=(V=V.replace(" ",":")).length),0<P&&void 0!==(_=i(1,V,r,e,E,A,G.length,u,f,u))&&0===(U=(V=_.trim()).length)&&(V="\0\0"),p=V.charCodeAt(0),h=V.charCodeAt(1),p){case 0:break;case 64:if(105===h||99===h){$+=V+l.charAt(L);break}default:58!==V.charCodeAt(U-1)&&(G+=a(V,p,h,V.charCodeAt(2)))}z=D=N=p=0,V="",h=l.charCodeAt(++L)}}switch(h){case 13:case 10:47===k?k=0:0===1+p&&107!==u&&0<V.length&&(D=1,V+="\0"),0<P*R&&i(0,V,r,e,E,A,G.length,u,f,u),A=1,E++;break;case 59:case 125:if(0===k+T+I+w){A++;break}default:switch(A++,g=l.charAt(L),h){case 9:case 32:if(0===T+w+k)switch(x){case 44:case 58:case 9:case 32:g="";break;default:32!==h&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===T+k+w&&(D=z=1,g="\f"+g);break;case 108:if(0===T+k+w+O&&0<N)switch(L-N){case 2:112===x&&58===l.charCodeAt(L-3)&&(O=x);case 8:111===F&&(O=F)}break;case 58:0===T+k+w&&(N=L);break;case 44:0===k+I+T+w&&(D=1,g+="\r");break;case 34:case 39:0===k&&(T=T===h?0:0===T?h:T);break;case 91:0===T+k+I&&w++;break;case 93:0===T+k+I&&w--;break;case 41:0===T+k+w&&I--;break;case 40:if(0===T+k+w){if(0===p)if(2*x+3*F===533);else p=1;I++}break;case 64:0===k+I+T+w+N+m&&(m=1);break;case 42:case 47:if(!(0<T+w+I))switch(k){case 0:switch(2*h+3*l.charCodeAt(L+1)){case 235:k=47;break;case 220:U=L,k=42}break;case 42:47===h&&42===x&&U+2!==L&&(33===l.charCodeAt(U+2)&&(G+=l.substring(U,L+1)),g="",k=0)}}0===k&&(V+=g)}F=x,x=h,L++}if(0<(U=G.length)){if(D=r,0<P&&(void 0!==(_=i(2,G,D,e,E,A,U,u,f,u))&&0===(G=_).length))return $+G+W;if(G=D.join(",")+"{"+G+"}",0!==C*O){switch(2!==C||s(G,2)||(O=0),O){case 111:G=G.replace(v,":-moz-$1")+G;break;case 112:G=G.replace(b,"::-webkit-input-$1")+G.replace(b,"::-moz-$1")+G.replace(b,":-ms-input-$1")+G}O=0}}return $+G+W}function t(e,n,t){var a=n.trim().split(m);n=a;var s=a.length,o=e.length;switch(o){case 0:case 1:var i=0;for(e=0===o?"":e[0]+" ";i<s;++i)n[i]=r(e,n[i],t).trim();break;default:var l=i=0;for(n=[];i<s;++i)for(var u=0;u<o;++u)n[l++]=r(e[u]+" ",a[i],t).trim()}return n}function r(e,n,t){var r=n.charCodeAt(0);switch(33>r&&(r=(n=n.trim()).charCodeAt(0)),r){case 38:return n.replace(g,"$1"+e.trim());case 58:return e.trim()+n.replace(g,"$1"+e.trim());default:if(0<1*t&&0<n.indexOf("\f"))return n.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+n}function a(e,n,t,r){var o=e+";",i=2*n+3*t+4*r;if(944===i){e=o.indexOf(":",9)+1;var l=o.substring(e,o.length-1).trim();return l=o.substring(0,e).trim()+l+";",1===C||2===C&&s(l,1)?"-webkit-"+l+l:l}if(0===C||2===C&&!s(o,1))return o;switch(i){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(x,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(l=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+l+o;case 1005:return p.test(o)?o.replace(f,":-webkit-")+o.replace(f,":-moz-")+o:o;case 1e3:switch(n=(l=o.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(n)){case 226:l=o.replace(_,"tb");break;case 232:l=o.replace(_,"tb-rl");break;case 220:l=o.replace(_,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+l+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(n=(o=e).length-10,i=(l=(33===o.charCodeAt(n)?o.substring(0,n):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:o=o.replace(l,"-webkit-"+l)+";"+o;break;case 207:case 102:o=o.replace(l,"-webkit-"+(102<i?"inline-":"")+"box")+";"+o.replace(l,"-webkit-"+l)+";"+o.replace(l,"-ms-"+l+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return l=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+l+"-ms-flex-"+l+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(k,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(k,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===T.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?a(e.replace("stretch","fill-available"),n,t,r).replace(":fill-available",":stretch"):o.replace(l,"-webkit-"+l)+o.replace(l,"-moz-"+l.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===t+r&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(h,"$1-webkit-$2")+o}return o}function s(e,n){var t=e.indexOf(1===n?":":"{"),r=e.substring(0,3!==n?t:10);return t=e.substring(t+1,e.length-1),N(2!==n?r:r.replace(I,"$1"),t,n)}function o(e,n){var t=a(n,n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2));return t!==n+";"?t.replace(w," or ($1)").substring(4):"("+n+")"}function i(e,n,t,r,a,s,o,i,l,c){for(var d,f=0,p=n;f<P;++f)switch(d=F[f].call(u,e,p,t,r,a,s,o,i,l,c)){case void 0:case!1:case!0:case null:break;default:p=d}if(p!==n)return p}function l(e){return void 0!==(e=e.prefix)&&(N=null,e?"function"!==typeof e?C=1:(C=2,N=e):C=0),l}function u(e,t){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<P){var a=i(-1,t,r,r,E,A,0,0,0,0);void 0!==a&&"string"===typeof a&&(t=a)}var s=n(M,r,t,0,0);return 0<P&&(void 0!==(a=i(-2,s,r,r,E,A,s.length,0,0,0))&&(s=a)),"",O=0,A=E=1,s}var c=/^\0+/g,d=/[\0\r\f]/g,f=/: */g,p=/zoo|gra/,h=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,y=/@(k\w+)\s*(\S*)\s*/,b=/::(place)/g,v=/:(read-only)/g,_=/[svh]\w+-[tblr]{2}/,S=/\(\s*(.*)\s*\)/g,w=/([\s\S]*?);/g,k=/-self|flex-/g,I=/[^]*?(:[rp][el]a[\w-]+)[^]*/,T=/stretch|:\s*\w+\-(?:conte|avail)/,x=/([^-])(image-set\()/,A=1,E=1,O=0,C=1,M=[],F=[],P=0,N=null,R=0;return u.use=function e(n){switch(n){case void 0:case null:P=F.length=0;break;default:if("function"===typeof n)F[P++]=n;else if("object"===typeof n)for(var t=0,r=n.length;t<r;++t)e(n[t]);else R=0|!!n}return e},u.set=l,void 0!==e&&l(e),u};const l={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function u(e){var n=Object.create(null);return function(t){return void 0===n[t]&&(n[t]=e(t)),n[t]}}var c=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,d=u((function(e){return c.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),f=t(110),p=t.n(f);function h(){return(h=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var m=function(e,n){for(var t=[e[0]],r=0,a=n.length;r<a;r+=1)t.push(n[r],e[r+1]);return t},g=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,a.typeOf)(e)},y=Object.freeze([]),b=Object.freeze({});function v(e){return"function"==typeof e}function _(e){return e.displayName||e.name||"Component"}function S(e){return e&&"string"==typeof e.styledComponentId}var w="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",k="undefined"!=typeof window&&"HTMLElement"in window,I=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&(void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY))),T={};function x(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(t.length>0?" Args: "+t.join(", "):""))}var A=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var n=e.prototype;return n.indexOfGroup=function(e){for(var n=0,t=0;t<e;t++)n+=this.groupSizes[t];return n},n.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var t=this.groupSizes,r=t.length,a=r;e>=a;)(a<<=1)<0&&x(16,""+e);this.groupSizes=new Uint32Array(a),this.groupSizes.set(t),this.length=a;for(var s=r;s<a;s++)this.groupSizes[s]=0}for(var o=this.indexOfGroup(e+1),i=0,l=n.length;i<l;i++)this.tag.insertRule(o,n[i])&&(this.groupSizes[e]++,o++)},n.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],t=this.indexOfGroup(e),r=t+n;this.groupSizes[e]=0;for(var a=t;a<r;a++)this.tag.deleteRule(t)}},n.getGroup=function(e){var n="";if(e>=this.length||0===this.groupSizes[e])return n;for(var t=this.groupSizes[e],r=this.indexOfGroup(e),a=r+t,s=r;s<a;s++)n+=this.tag.getRule(s)+"/*!sc*/\n";return n},e}(),E=new Map,O=new Map,C=1,M=function(e){if(E.has(e))return E.get(e);for(;O.has(C);)C++;var n=C++;return E.set(e,n),O.set(n,e),n},F=function(e){return O.get(e)},P=function(e,n){n>=C&&(C=n+1),E.set(e,n),O.set(n,e)},N="style["+w+'][data-styled-version="5.3.11"]',R=new RegExp("^"+w+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),L=function(e,n,t){for(var r,a=t.split(","),s=0,o=a.length;s<o;s++)(r=a[s])&&e.registerName(n,r)},D=function(e,n){for(var t=(n.textContent||"").split("/*!sc*/\n"),r=[],a=0,s=t.length;a<s;a++){var o=t[a].trim();if(o){var i=o.match(R);if(i){var l=0|parseInt(i[1],10),u=i[2];0!==l&&(P(u,l),L(e,u,i[3]),e.getTag().insertRules(l,r)),r.length=0}else r.push(o)}}},z=function(){return t.nc},U=function(e){var n=document.head,t=e||n,r=document.createElement("style"),a=function(e){for(var n=e.childNodes,t=n.length;t>=0;t--){var r=n[t];if(r&&1===r.nodeType&&r.hasAttribute(w))return r}}(t),s=void 0!==a?a.nextSibling:null;r.setAttribute(w,"active"),r.setAttribute("data-styled-version","5.3.11");var o=z();return o&&r.setAttribute("nonce",o),t.insertBefore(r,s),r},j=function(){function e(e){var n=this.element=U(e);n.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var n=document.styleSheets,t=0,r=n.length;t<r;t++){var a=n[t];if(a.ownerNode===e)return a}x(17)}(n),this.length=0}var n=e.prototype;return n.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch(e){return!1}},n.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},n.getRule=function(e){var n=this.sheet.cssRules[e];return void 0!==n&&"string"==typeof n.cssText?n.cssText:""},e}(),B=function(){function e(e){var n=this.element=U(e);this.nodes=n.childNodes,this.length=0}var n=e.prototype;return n.insertRule=function(e,n){if(e<=this.length&&e>=0){var t=document.createTextNode(n),r=this.nodes[e];return this.element.insertBefore(t,r||null),this.length++,!0}return!1},n.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},n.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),V=function(){function e(e){this.rules=[],this.length=0}var n=e.prototype;return n.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},n.deleteRule=function(e){this.rules.splice(e,1),this.length--},n.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),G=k,W={isServer:!k,useCSSOMInjection:!I},$=function(){function e(e,n,t){void 0===e&&(e=b),void 0===n&&(n={}),this.options=h({},W,{},e),this.gs=n,this.names=new Map(t),this.server=!!e.isServer,!this.server&&k&&G&&(G=!1,function(e){for(var n=document.querySelectorAll(N),t=0,r=n.length;t<r;t++){var a=n[t];a&&"active"!==a.getAttribute(w)&&(D(e,a),a.parentNode&&a.parentNode.removeChild(a))}}(this))}e.registerId=function(e){return M(e)};var n=e.prototype;return n.reconstructWithOptions=function(n,t){return void 0===t&&(t=!0),new e(h({},this.options,{},n),this.gs,t&&this.names||void 0)},n.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},n.getTag=function(){return this.tag||(this.tag=(t=(n=this.options).isServer,r=n.useCSSOMInjection,a=n.target,e=t?new V(a):r?new j(a):new B(a),new A(e)));var e,n,t,r,a},n.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},n.registerName=function(e,n){if(M(e),this.names.has(e))this.names.get(e).add(n);else{var t=new Set;t.add(n),this.names.set(e,t)}},n.insertRules=function(e,n,t){this.registerName(e,n),this.getTag().insertRules(M(e),t)},n.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},n.clearRules=function(e){this.getTag().clearGroup(M(e)),this.clearNames(e)},n.clearTag=function(){this.tag=void 0},n.toString=function(){return function(e){for(var n=e.getTag(),t=n.length,r="",a=0;a<t;a++){var s=F(a);if(void 0!==s){var o=e.names.get(s),i=n.getGroup(a);if(o&&i&&o.size){var l=w+".g"+a+'[id="'+s+'"]',u="";void 0!==o&&o.forEach((function(e){e.length>0&&(u+=e+",")})),r+=""+i+l+'{content:"'+u+'"}/*!sc*/\n'}}}return r}(this)},e}(),H=/(a)(d)/gi,K=function(e){return String.fromCharCode(e+(e>25?39:97))};function q(e){var n,t="";for(n=Math.abs(e);n>52;n=n/52|0)t=K(n%52)+t;return(K(n%52)+t).replace(H,"$1-$2")}var Y=function(e,n){for(var t=n.length;t;)e=33*e^n.charCodeAt(--t);return e},X=function(e){return Y(5381,e)};function J(e){for(var n=0;n<e.length;n+=1){var t=e[n];if(v(t)&&!S(t))return!1}return!0}var Z=X("5.3.11"),Q=function(){function e(e,n,t){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===t||t.isStatic)&&J(e),this.componentId=n,this.baseHash=Y(Z,n),this.baseStyle=t,$.registerId(n)}return e.prototype.generateAndInjectStyles=function(e,n,t){var r=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(e,n,t)),this.isStatic&&!t.hash)if(this.staticRulesId&&n.hasNameForId(r,this.staticRulesId))a.push(this.staticRulesId);else{var s=ye(this.rules,e,n,t).join(""),o=q(Y(this.baseHash,s)>>>0);if(!n.hasNameForId(r,o)){var i=t(s,"."+o,void 0,r);n.insertRules(r,o,i)}a.push(o),this.staticRulesId=o}else{for(var l=this.rules.length,u=Y(this.baseHash,t.hash),c="",d=0;d<l;d++){var f=this.rules[d];if("string"==typeof f)c+=f;else if(f){var p=ye(f,e,n,t),h=Array.isArray(p)?p.join(""):p;u=Y(u,h+d),c+=h}}if(c){var m=q(u>>>0);if(!n.hasNameForId(r,m)){var g=t(c,"."+m,void 0,r);n.insertRules(r,m,g)}a.push(m)}}return a.join(" ")},e}(),ee=/^\s*\/\/.*$/gm,ne=[":","[",".","#"];function te(e){var n,t,r,a,s=void 0===e?b:e,o=s.options,l=void 0===o?b:o,u=s.plugins,c=void 0===u?y:u,d=new i(l),f=[],p=function(e){function n(n){if(n)try{e(n+"}")}catch(e){}}return function(t,r,a,s,o,i,l,u,c,d){switch(t){case 1:if(0===c&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===u)return r+"/*|*/";break;case 3:switch(u){case 102:case 112:return e(a[0]+r),"";default:return r+(0===d?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(n)}}}((function(e){f.push(e)})),h=function(e,r,s){return 0===r&&-1!==ne.indexOf(s[t.length])||s.match(a)?e:"."+n};function m(e,s,o,i){void 0===i&&(i="&");var l=e.replace(ee,""),u=s&&o?o+" "+s+" { "+l+" }":l;return n=i,t=s,r=new RegExp("\\"+t+"\\b","g"),a=new RegExp("(\\"+t+"\\b){2,}"),d(o||!s?"":s,u)}return d.use([].concat(c,[function(e,n,a){2===e&&a.length&&a[0].lastIndexOf(t)>0&&(a[0]=a[0].replace(r,h))},p,function(e){if(-2===e){var n=f;return f=[],n}}])),m.hash=c.length?c.reduce((function(e,n){return n.name||x(15),Y(e,n.name)}),5381).toString():"",m}var re=e.createContext(),ae=(re.Consumer,e.createContext()),se=(ae.Consumer,new $),oe=te();function ie(){return(0,e.useContext)(re)||se}function le(){return(0,e.useContext)(ae)||oe}function ue(n){var t=(0,e.useState)(n.stylisPlugins),r=t[0],a=t[1],s=ie(),i=(0,e.useMemo)((function(){var e=s;return n.sheet?e=n.sheet:n.target&&(e=e.reconstructWithOptions({target:n.target},!1)),n.disableCSSOMInjection&&(e=e.reconstructWithOptions({useCSSOMInjection:!1})),e}),[n.disableCSSOMInjection,n.sheet,n.target]),l=(0,e.useMemo)((function(){return te({options:{prefix:!n.disableVendorPrefixes},plugins:r})}),[n.disableVendorPrefixes,r]);return(0,e.useEffect)((function(){o()(r,n.stylisPlugins)||a(n.stylisPlugins)}),[n.stylisPlugins]),e.createElement(re.Provider,{value:i},e.createElement(ae.Provider,{value:l},n.children))}var ce=function(){function e(e,n){var t=this;this.inject=function(e,n){void 0===n&&(n=oe);var r=t.name+n.hash;e.hasNameForId(t.id,r)||e.insertRules(t.id,r,n(t.rules,r,"@keyframes"))},this.toString=function(){return x(12,String(t.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=n}return e.prototype.getName=function(e){return void 0===e&&(e=oe),this.name+e.hash},e}(),de=/([A-Z])/,fe=/([A-Z])/g,pe=/^ms-/,he=function(e){return"-"+e.toLowerCase()};function me(e){return de.test(e)?e.replace(fe,he).replace(pe,"-ms-"):e}var ge=function(e){return null==e||!1===e||""===e};function ye(e,n,t,r){if(Array.isArray(e)){for(var a,s=[],o=0,i=e.length;o<i;o+=1)""!==(a=ye(e[o],n,t,r))&&(Array.isArray(a)?s.push.apply(s,a):s.push(a));return s}return ge(e)?"":S(e)?"."+e.styledComponentId:v(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!n?e:ye(e(n),n,t,r):e instanceof ce?t?(e.inject(t,r),e.getName(r)):e:g(e)?function e(n,t){var r,a,s=[];for(var o in n)n.hasOwnProperty(o)&&!ge(n[o])&&(Array.isArray(n[o])&&n[o].isCss||v(n[o])?s.push(me(o)+":",n[o],";"):g(n[o])?s.push.apply(s,e(n[o],o)):s.push(me(o)+": "+(r=o,(null==(a=n[o])||"boolean"==typeof a||""===a?"":"number"!=typeof a||0===a||r in l||r.startsWith("--")?String(a).trim():a+"px")+";")));return t?[t+" {"].concat(s,["}"]):s}(e):e.toString();var u}var be=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function ve(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return v(e)||g(e)?be(ye(m(y,[e].concat(t)))):0===t.length&&1===e.length&&"string"==typeof e[0]?e:be(ye(m(e,t)))}new Set;var _e=function(e,n,t){return void 0===t&&(t=b),e.theme!==t.theme&&e.theme||n||t.theme},Se=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,we=/(^-|-$)/g;function ke(e){return e.replace(Se,"-").replace(we,"")}var Ie=function(e){return q(X(e)>>>0)};function Te(e){return"string"==typeof e&&!0}var xe=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Ae=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Ee(e,n,t){var r=e[t];xe(n)&&xe(r)?Oe(r,n):e[t]=n}function Oe(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];for(var a=0,s=t;a<s.length;a++){var o=s[a];if(xe(o))for(var i in o)Ae(i)&&Ee(e,o[i],i)}return e}var Ce=e.createContext();Ce.Consumer;var Me={};function Fe(n,t,r){var a=S(n),s=!Te(n),o=t.attrs,i=void 0===o?y:o,l=t.componentId,u=void 0===l?function(e,n){var t="string"!=typeof e?"sc":ke(e);Me[t]=(Me[t]||0)+1;var r=t+"-"+Ie("5.3.11"+t+Me[t]);return n?n+"-"+r:r}(t.displayName,t.parentComponentId):l,c=t.displayName,f=void 0===c?function(e){return Te(e)?"styled."+e:"Styled("+_(e)+")"}(n):c,m=t.displayName&&t.componentId?ke(t.displayName)+"-"+t.componentId:t.componentId||u,g=a&&n.attrs?Array.prototype.concat(n.attrs,i).filter(Boolean):i,w=t.shouldForwardProp;a&&n.shouldForwardProp&&(w=t.shouldForwardProp?function(e,r,a){return n.shouldForwardProp(e,r,a)&&t.shouldForwardProp(e,r,a)}:n.shouldForwardProp);var k,I=new Q(r,m,a?n.componentStyle:void 0),T=I.isStatic&&0===i.length,x=function(n,t){return function(n,t,r,a){var s=n.attrs,o=n.componentStyle,i=n.defaultProps,l=n.foldedComponentIds,u=n.shouldForwardProp,c=n.styledComponentId,f=n.target,p=function(e,n,t){void 0===e&&(e=b);var r=h({},n,{theme:e}),a={};return t.forEach((function(e){var n,t,s,o=e;for(n in v(o)&&(o=o(r)),o)r[n]=a[n]="className"===n?(t=a[n],s=o[n],t&&s?t+" "+s:t||s):o[n]})),[r,a]}(_e(t,(0,e.useContext)(Ce),i)||b,t,s),m=p[0],g=p[1],y=function(e,n,t,r){var a=ie(),s=le();return n?e.generateAndInjectStyles(b,a,s):e.generateAndInjectStyles(t,a,s)}(o,a,m),_=r,S=g.$as||t.$as||g.as||t.as||f,w=Te(S),k=g!==t?h({},t,{},g):t,I={};for(var T in k)"$"!==T[0]&&"as"!==T&&("forwardedAs"===T?I.as=k[T]:(u?u(T,d,S):!w||d(T))&&(I[T]=k[T]));return t.style&&g.style!==t.style&&(I.style=h({},t.style,{},g.style)),I.className=Array.prototype.concat(l,c,y!==c?y:null,t.className,g.className).filter(Boolean).join(" "),I.ref=_,(0,e.createElement)(S,I)}(k,n,t,T)};return x.displayName=f,(k=e.forwardRef(x)).attrs=g,k.componentStyle=I,k.displayName=f,k.shouldForwardProp=w,k.foldedComponentIds=a?Array.prototype.concat(n.foldedComponentIds,n.styledComponentId):y,k.styledComponentId=m,k.target=a?n.target:n,k.withComponent=function(e){var n=t.componentId,a=function(e,n){if(null==e)return{};var t,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(t,["componentId"]),s=n&&n+"-"+(Te(e)?e:ke(_(e)));return Fe(e,h({},a,{attrs:g,componentId:s}),r)},Object.defineProperty(k,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=a?Oe({},n.defaultProps,e):e}}),Object.defineProperty(k,"toString",{value:function(){return"."+k.styledComponentId}}),s&&p()(k,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),k}var Pe=function(e){return function e(n,t,r){if(void 0===r&&(r=b),!(0,a.isValidElementType)(t))return x(1,String(t));var s=function(){return n(t,r,ve.apply(void 0,arguments))};return s.withConfig=function(a){return e(n,t,h({},r,{},a))},s.attrs=function(a){return e(n,t,h({},r,{attrs:Array.prototype.concat(r.attrs,a).filter(Boolean)}))},s}(Fe,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Pe[e]=Pe(e)}));var Ne=function(){function e(e,n){this.rules=e,this.componentId=n,this.isStatic=J(e),$.registerId(this.componentId+1)}var n=e.prototype;return n.createStyles=function(e,n,t,r){var a=r(ye(this.rules,n,t,r).join(""),""),s=this.componentId+e;t.insertRules(s,s,a)},n.removeStyles=function(e,n){n.clearRules(this.componentId+e)},n.renderStyles=function(e,n,t,r){e>2&&$.registerId(this.componentId+e),this.removeStyles(e,t),this.createStyles(e,n,t,r)},e}();!function(){function n(){var n=this;this._emitSheetCSS=function(){var e=n.instance.toString();if(!e)return"";var t=z();return"<style "+[t&&'nonce="'+t+'"',w+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+e+"</style>"},this.getStyleTags=function(){return n.sealed?x(2):n._emitSheetCSS()},this.getStyleElement=function(){var t;if(n.sealed)return x(2);var r=((t={})[w]="",t["data-styled-version"]="5.3.11",t.dangerouslySetInnerHTML={__html:n.instance.toString()},t),a=z();return a&&(r.nonce=a),[e.createElement("style",h({},r,{key:"sc-0-0"}))]},this.seal=function(){n.sealed=!0},this.instance=new $({isServer:!0}),this.sealed=!1}var t=n.prototype;t.collectStyles=function(n){return this.sealed?x(2):e.createElement(ue,{sheet:this.instance},n)},t.interleaveWithNodeStream=function(e){return x(3)}}();const Re=Pe,Le=(e=>{const n=[],t=10;switch(e%2){case 0:for(let e=0;e<t;e++){const r=0,a=180+60*(t-e)/t,s=100+150*e/t;n.push("rgba(".concat(Math.round(r),", ").concat(Math.round(a),", ").concat(Math.round(s),")"))}break;case 1:for(let e=0;e<t;e++){const r=160+95*e/t,a=80+100*(t-e)/t,s=0;n.push("rgba(".concat(Math.round(r),", ").concat(Math.round(s),", ").concat(Math.round(a),")"))}}return{colors:n,counter:0,next(){return n[this.counter++%n.length]}}})(1);Le.counter=5;const De={devices:{desktop:{fontSize:20},mobile:{fontSize:16,maxWidth:600}},dimensions:{maxContentWidth:"900px"},fonts:{title:"Silkscreen",default:"Rajdhani"},fontSizes:{h1:"300%",h2:"140%"},colors:{bg1:"#333333",bg1p5:"#222222",bg2:"#1a1a1a",bg3:"#444444",fg1:"#d1d1d1",fg1p5:"#a1a1a1",fg2:"#555555",colorScheme:Le},spacings:{space1:"1rem",space2:"2rem",space0p1:"0.25rem"},controls:{gridSize:50},zIndexes:{closeButton:2,spinner:3}};var ze,Ue,je,Be,Ve,Ge,We,$e,He,Ke,qe,Ye,Xe,Je,Ze,Qe=t(184);const en=Re.h2(ze||(ze=r(["\n    font-family: ",";\n    font-size: 140%;\n    color: ",";\n    margin: 0;\n    padding: 0;\n"])),De.fonts.title,De.colors.colorScheme.next()),nn=Re.h3(Ue||(Ue=r(["\n    text-transform: uppercase;\n    font-weight: bold;\n    font-family: ",";\n    margin: 0;\n    padding: 0;\n"])),De.fonts.title),tn=Re.div(je||(je=r(["\n    background-color: ",";\n    margin: "," auto 0 auto;\n    padding: ",";\n    width: 100%;\n    max-width: ",";\n"])),De.colors.bg2,De.spacings.space1,De.spacings.space1,De.dimensions.maxContentWidth),rn="\n    border: none;\n    cursor: pointer;\n    background-color: ".concat(De.colors.bg3,";\n"),an="\n    font-family: ".concat(De.fonts.title,";\n"),sn=Re.button(Be||(Be=r(["\n    ","\n"])),rn),on=Re(sn)(Ve||(Ve=r(["\n    ","\n    background-color: ",";\n"])),an,(()=>De.colors.colorScheme.next())),ln=Re.select(Ge||(Ge=r(["\n    border: none;\n    background-color: ",";\n    cursor: pointer;\n"])),De.colors.bg1p5),un=Re.span(We||(We=r(["\n    position: absolute;\n    bottom: ",";\n    right: ",";\n    color: ",";\n"])),De.spacings.space0p1,De.spacings.space0p1,De.colors.fg1p5),cn=e=>{let{filename:n}=e;const t=n.split("/").slice(-1)[0]||null;return(0,Qe.jsx)(un,{children:t})},dn=Re.span($e||($e=r(["\n    position: absolute;\n    bottom: ",";\n    left: ",";\n    color: ",";\n"])),De.spacings.space0p1,De.spacings.space0p1,De.colors.fg1p5),fn="\n    height: 20vh;\n    max-height: 10em;\n    user-select: none;\n",pn="\n    letter-spacing: 0.1em;\n    opacity: 0.3;\n    user-select: none;\n",hn=Re.span(He||(He=r(["\n    font-size: 120%;\n    font-weight: bold;\n    color: ",";\n    min-width: 1.5em;\n    @media (max-width: ","px) {\n        text-align: center;\n    }\n"])),De.colors.fg2,De.devices.mobile.maxWidth),mn=Re.div(Ke||(Ke=r(["\n    color: ",";\n    ::before {\n        content: '\u2192 ';\n    }\n    a {\n        color: ",";\n    }\n"])),De.colors.fg2,De.colors.fg2),gn=Re(tn)(qe||(qe=r(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n"]))),yn=Re.div(Ye||(Ye=r(["\n    min-width: 6.5rem;\n    transform: translateX(-20%);\n"]))),bn=Re.div(Xe||(Xe=r(["\n    flex: auto;\n"]))),vn=Re.div(Je||(Je=r(["\n    font-family: ",";\n    color: ",";\n"])),De.fonts.title,De.colors.colorScheme.next()),_n=Re.div(Ze||(Ze=r(["\n& > * {\n    font-size: 90%;\n    margin-right: ",";\n    &:last-child {\n        margin-right: 0;\n    }\n}\n"])),De.spacings.space0p1);var Sn,wn,kn;const In=Re.div(Sn||(Sn=r(["\n    position: relative;\n    background-color: ",";\n"])),De.colors.bg1p5),Tn=Re.pre(wn||(wn=r(["\n    ","\n    ","\n    overflow: auto;\n    margin: 0;\n    padding: 0;\n"])),fn,pn),xn=Re(_n)(kn||(kn=r(["\n    position: absolute;\n    top: calc(",");\n    right: calc(",");\n"])),De.spacings.space0p1,De.spacings.space0p1),An=e=>{let{pd:n,filename:t,extraButtons:r}=e;return(0,Qe.jsxs)(In,{children:[(0,Qe.jsx)(Tn,{children:n}),t?(0,Qe.jsx)(cn,{filename:t}):null,r?(0,Qe.jsx)(xn,{children:r}):null]})},En=(e,n,t)=>{const r=new Blob([n],{type:t});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(r,e);else{const n=window.document.createElement("a");n.href=window.URL.createObjectURL(r),n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}},On="array",Cn="bit",Mn="bits",Fn="byte",Pn="bytes",Nn="",Rn="exponent",Ln="function",Dn="iec",zn="Invalid number",Un="Invalid rounding method",jn="jedec",Bn="object",Vn=".",Gn="round",Wn="s",$n="si",Hn="kbit",Kn="kB",qn=" ",Yn="string",Xn="0",Jn={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function Zn(e){let{bits:n=!1,pad:t=!1,base:r=-1,round:a=2,locale:s=Nn,localeOptions:o={},separator:i=Nn,spacer:l=qn,symbols:u={},standard:c=Nn,output:d=Yn,fullform:f=!1,fullforms:p=[],exponent:h=-1,roundingMethod:m=Gn,precision:g=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},y=h,b=Number(e),v=[],_=0,S=Nn;c===$n?(r=10,c=jn):c===Dn||c===jn?r=2:2===r?c=Dn:(r=10,c=jn);const w=10===r?1e3:1024,k=!0===f,I=b<0,T=Math[m];if("bigint"!==typeof e&&isNaN(e))throw new TypeError(zn);if(typeof T!==Ln)throw new TypeError(Un);if(I&&(b=-b),(-1===y||isNaN(y))&&(y=Math.floor(Math.log(b)/Math.log(w)),y<0&&(y=0)),y>8&&(g>0&&(g+=8-y),y=8),d===Rn)return y;if(0===b)v[0]=0,S=v[1]=Jn.symbol[c][n?Mn:Pn][y];else{_=b/(2===r?Math.pow(2,10*y):Math.pow(1e3,y)),n&&(_*=8,_>=w&&y<8&&(_/=w,y++));const e=Math.pow(10,y>0?a:0);v[0]=T(_*e)/e,v[0]===w&&y<8&&-1===h&&(v[0]=1,y++),S=v[1]=10===r&&1===y?n?Hn:Kn:Jn.symbol[c][n?Mn:Pn][y]}if(I&&(v[0]=-v[0]),g>0&&(v[0]=v[0].toPrecision(g)),v[1]=u[v[1]]||v[1],!0===s?v[0]=v[0].toLocaleString():s.length>0?v[0]=v[0].toLocaleString(s,o):i.length>0&&(v[0]=v[0].toString().replace(Vn,i)),t&&!1===Number.isInteger(v[0])&&a>0){const e=i||Vn,n=v[0].toString().split(e),t=n[1]||Nn,r=t.length,s=a-r;v[0]="".concat(n[0]).concat(e).concat(t.padEnd(r+s,Xn))}return k&&(v[1]=p[y]?p[y]:Jn.fullform[c][y]+(n?Cn:Fn)+(1===v[0]?Nn:Wn)),d===On?v:d===Bn?{value:v[0],symbol:v[1],exponent:y,unit:S}:v.join(l)}var Qn,et,nt;const tt=["\u2591","\u2592","\u2593","\u2594","\u2599","\u259a","\u259b","\u259c","\u259d","\u259e","\u259f"],rt=Re.div(Qn||(Qn=r(["\n    position: relative;\n"]))),at=Re.div(et||(et=r(["\n    ","\n    word-break: break-all;\n    overflow: hidden;\n    opacity: 0.1;\n    text-align: justify;\n"])),fn),st=Re(_n)(nt||(nt=r(["\n    position: absolute;\n    top: calc(",");\n    right: calc(",");\n"])),De.spacings.space0p1,De.spacings.space0p1),ot=n=>{let{wasm:t,filename:r,showDownloadButton:a,showFileSize:s,extraButtons:o}=n;if(a){const e=()=>{En(r,t,"application/wasm")};o=[...o||[],(0,Qe.jsx)(sn,{onClick:e,children:"download"},"download")]}const i=(0,e.useMemo)((()=>Array.from(new Uint8Array(t))),[t]),l=Zn(t.byteLength);return(0,Qe.jsxs)(rt,{children:[r?(0,Qe.jsx)(cn,{filename:r}):null,s?(0,Qe.jsx)(dn,{children:l}):null,(0,Qe.jsx)(at,{children:i.slice(0,1e3).map(((e,n)=>(0,Qe.jsxs)("span",{children:[tt[e%tt.length]," "]},n)))}),o?(0,Qe.jsx)(st,{children:o}):null]})};var it,lt,ut,ct,dt,ft,pt;const ht=e=>{const n=Math.floor(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return Math.floor(e*Math.pow(10,n))/Math.pow(10,n)}(e,2));return"".concat(n.toString().padStart(3,"0"))},mt=Re.div(it||(it=r(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    @media (max-width: ","px) {\n        flex-direction: column-reverse;\n        align-items: flex-end;\n    }\n"])),De.devices.mobile.maxWidth),gt=Re.div(lt||(lt=r(["\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    min-width: 4em;\n    margin: 0 ",";\n    font-size: ",";\n    @media (max-width: ","px) {\n        font-size: 120%;\n    }\n    & > span {\n        font-size: 100%;\n    }\n    & > span:nth-child(1) {\n        text-align: right;\n    }\n    & > span:nth-child(2) {\n        text-align: center;\n    }\n"])),De.spacings.space1,De.fontSizes.h2,De.devices.mobile.maxWidth),yt=Re.div(ut||(ut=r(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    flex: auto;\n    margin-right: ",";\n    @media (max-width: ","px) {\n        align-self: stretch;\n        margin-right: 0;\n    }\n    @media (max-width: 400px) {\n        font-size: 50%;\n    }\n\n"])),De.spacings.space1,De.devices.mobile.maxWidth),bt=Re(on)(ct||(ct=r(["\n    min-width: 4.5em;\n    align-self: stretch;\n    @media (max-width: 700px) {\n        font-size: 80%;\n    }\n"]))),vt=Re.div(dt||(dt=r(["\n    display: flex;\n    flex-direction: row;\n    align-self: stretch;\n"]))),_t=Re(on)(ft||(ft=r(["\n    min-width: 3em;\n    @media (max-width: 700px) {\n        font-size: 80%;\n    }\n"]))),St=Re(_n)(pt||(pt=r(["\n    align-self: stretch;\n    display: flex;\n    align-items: stretch;\n    @media (max-width: ","px) {\n        justify-content: flex-end;\n        margin-bottom: ",";\n    }\n"])),De.devices.mobile.maxWidth,De.spacings.space1),wt=n=>{let{wav:t,showDownloadButton:r,extraButtons:a}=n;const[s,o]=(0,e.useState)(!1),[,i]=(0,e.useState)(0),l=(0,e.useMemo)((()=>{const e=new Audio(URL.createObjectURL(new Blob([t],{type:"audio/wav"})));return e.onplay=()=>{o(!0)},e.onpause=()=>{o(!1)},e.onended=()=>{o(!1)},e}),[t]);(0,e.useEffect)((()=>{if(!s)return;const e=setInterval((()=>{i(l.currentTime)}),100);return()=>clearInterval(e)}),[s]);return(0,Qe.jsxs)(mt,{children:[(0,Qe.jsxs)(yt,{children:[s?(0,Qe.jsx)(bt,{onClick:()=>{l.paused&&o(!1),l.pause()},children:"Pause"}):(0,Qe.jsx)(bt,{onClick:()=>{l.paused||o(!0),l.play()},children:"Play"}),(0,Qe.jsxs)(gt,{children:[(0,Qe.jsx)("span",{children:ht(l.currentTime)}),(0,Qe.jsx)("span",{children:"/"}),(0,Qe.jsx)("span",{children:isNaN(l.duration)?ht(0):ht(l.duration)})]}),(0,Qe.jsxs)(vt,{children:[(0,Qe.jsx)(_t,{onClick:()=>{l.volume=Math.max(l.volume-.1,0)},children:"-"}),(0,Qe.jsx)(_t,{onClick:()=>{l.volume=Math.min(l.volume+.1,1)},children:"+"})]})]}),(0,Qe.jsxs)(St,{children:[a||null,r?(0,Qe.jsx)(sn,{onClick:()=>{En("audio.webpd.wav",t,"audio/wav")},children:"download"}):null]})]})};var kt,It,Tt,xt,At=t(587),Et=t.n(At);const Ot=Re.div(kt||(kt=r(["\n    position: relative;\n    background-color: ",";\n"])),De.colors.bg1p5),Ct=Re.div(It||(It=r(["\n    ","\n    font-weight: bold;\n    margin: 0;\n    padding: 0;\n"])),pn),Mt=Re.table(Tt||(Tt=r(["\n    ","\n    word-break: break-all;\n    overflow: hidden;\n    text-align: justify;\n    padding-left: 0.5em;\n\n    & td {\n        padding-right: 0.5em;\n    }\n"])),pn),Ft=Re(_n)(xt||(xt=r(["\n    position: absolute;\n    top: calc(",");\n    right: calc(",");\n"])),De.spacings.space0p1,De.spacings.space0p1),Pt=e=>{let{app:n,filename:t,showDownloadButton:r,extraButtons:a}=e;if(r){const e=()=>{var e=new(Et());Object.entries(n).forEach((n=>{let[t,r]=n;e.file(t,r)})),e.generateAsync({type:"arraybuffer"}).then((e=>{En(t,e,"application/zip")}))};a=[...a||[],(0,Qe.jsx)(sn,{onClick:e,children:"download"},"download")]}return(0,Qe.jsxs)(Ot,{children:[(0,Qe.jsx)(Ct,{children:t}),(0,Qe.jsx)(Mt,{children:(0,Qe.jsx)("tbody",{children:Object.entries(n).map((e=>{let[n,t]=e;return(0,Qe.jsxs)("tr",{children:[(0,Qe.jsxs)("td",{children:[" \u221f ",n]}),(0,Qe.jsx)("td",{children:Zn("string"===typeof t?(r=t,new Blob([r]).size):t.byteLength)})]},n);var r}))})}),a?(0,Qe.jsx)(Ft,{children:a}):null]})},Nt=e=>{let{format:n,artefacts:t,filename:r,showDownloadButton:a,extraButtons:s}=e;switch(n){case"pd":return t.pd?(0,Qe.jsx)(An,{pd:t.pd,filename:r,extraButtons:s}):null;case"wasm":return t.wasm?(0,Qe.jsx)(ot,{wasm:t.wasm,filename:r||"patch.wasm",showDownloadButton:a,extraButtons:s,showFileSize:!0}):null;case"wav":return t.wav?(0,Qe.jsx)(wt,{wav:t.wav,showDownloadButton:a,extraButtons:s}):null;case"app":return t.app?(0,Qe.jsx)(Pt,{app:t.app,filename:r||"app.zip",extraButtons:s,showDownloadButton:a}):null}return null};function Rt(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(t.length?" "+t.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Lt(e){return!!e&&!!e[Tr]}function Dt(e){var n;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var n=Object.getPrototypeOf(e);if(null===n)return!0;var t=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return t===Object||"function"==typeof t&&Function.toString.call(t)===xr}(e)||Array.isArray(e)||!!e[Ir]||!!(null===(n=e.constructor)||void 0===n?void 0:n[Ir])||Wt(e)||$t(e))}function zt(e,n,t){void 0===t&&(t=!1),0===Ut(e)?(t?Object.keys:Ar)(e).forEach((function(r){t&&"symbol"==typeof r||n(r,e[r],e)})):e.forEach((function(t,r){return n(r,t,e)}))}function Ut(e){var n=e[Tr];return n?n.i>3?n.i-4:n.i:Array.isArray(e)?1:Wt(e)?2:$t(e)?3:0}function jt(e,n){return 2===Ut(e)?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function Bt(e,n){return 2===Ut(e)?e.get(n):e[n]}function Vt(e,n,t){var r=Ut(e);2===r?e.set(n,t):3===r?e.add(t):e[n]=t}function Gt(e,n){return e===n?0!==e||1/e==1/n:e!=e&&n!=n}function Wt(e){return _r&&e instanceof Map}function $t(e){return Sr&&e instanceof Set}function Ht(e){return e.o||e.t}function Kt(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var n=Er(e);delete n[Tr];for(var t=Ar(n),r=0;r<t.length;r++){var a=t[r],s=n[a];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(n[a]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),n)}function qt(e,n){return void 0===n&&(n=!1),Xt(e)||Lt(e)||!Dt(e)||(Ut(e)>1&&(e.set=e.add=e.clear=e.delete=Yt),Object.freeze(e),n&&zt(e,(function(e,n){return qt(n,!0)}),!0)),e}function Yt(){Rt(2)}function Xt(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Jt(e){var n=Or[e];return n||Rt(18,e),n}function Zt(e,n){Or[e]||(Or[e]=n)}function Qt(){return br}function er(e,n){n&&(Jt("Patches"),e.u=[],e.s=[],e.v=n)}function nr(e){tr(e),e.p.forEach(ar),e.p=null}function tr(e){e===br&&(br=e.l)}function rr(e){return br={p:[],l:br,h:e,m:!0,_:0}}function ar(e){var n=e[Tr];0===n.i||1===n.i?n.j():n.g=!0}function sr(e,n){n._=n.p.length;var t=n.p[0],r=void 0!==e&&e!==t;return n.h.O||Jt("ES5").S(n,e,r),r?(t[Tr].P&&(nr(n),Rt(4)),Dt(e)&&(e=or(n,e),n.l||lr(n,e)),n.u&&Jt("Patches").M(t[Tr].t,e,n.u,n.s)):e=or(n,t,[]),nr(n),n.u&&n.v(n.u,n.s),e!==kr?e:void 0}function or(e,n,t){if(Xt(n))return n;var r=n[Tr];if(!r)return zt(n,(function(a,s){return ir(e,r,n,a,s,t)}),!0),n;if(r.A!==e)return n;if(!r.P)return lr(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var a=4===r.i||5===r.i?r.o=Kt(r.k):r.o,s=a,o=!1;3===r.i&&(s=new Set(a),a.clear(),o=!0),zt(s,(function(n,s){return ir(e,r,a,n,s,t,o)})),lr(e,a,!1),t&&e.u&&Jt("Patches").N(r,t,e.u,e.s)}return r.o}function ir(e,n,t,r,a,s,o){if(Lt(a)){var i=or(e,a,s&&n&&3!==n.i&&!jt(n.R,r)?s.concat(r):void 0);if(Vt(t,r,i),!Lt(i))return;e.m=!1}else o&&t.add(a);if(Dt(a)&&!Xt(a)){if(!e.h.D&&e._<1)return;or(e,a),n&&n.A.l||lr(e,a)}}function lr(e,n,t){void 0===t&&(t=!1),!e.l&&e.h.D&&e.m&&qt(n,t)}function ur(e,n){var t=e[Tr];return(t?Ht(t):e)[n]}function cr(e,n){if(n in e)for(var t=Object.getPrototypeOf(e);t;){var r=Object.getOwnPropertyDescriptor(t,n);if(r)return r;t=Object.getPrototypeOf(t)}}function dr(e){e.P||(e.P=!0,e.l&&dr(e.l))}function fr(e){e.o||(e.o=Kt(e.t))}function pr(e,n,t){var r=Wt(n)?Jt("MapSet").F(n,t):$t(n)?Jt("MapSet").T(n,t):e.O?function(e,n){var t=Array.isArray(e),r={i:t?1:0,A:n?n.A:Qt(),P:!1,I:!1,R:{},l:n,t:e,k:null,o:null,j:null,C:!1},a=r,s=Cr;t&&(a=[r],s=Mr);var o=Proxy.revocable(a,s),i=o.revoke,l=o.proxy;return r.k=l,r.j=i,l}(n,t):Jt("ES5").J(n,t);return(t?t.A:Qt()).p.push(r),r}function hr(e){return Lt(e)||Rt(22,e),function e(n){if(!Dt(n))return n;var t,r=n[Tr],a=Ut(n);if(r){if(!r.P&&(r.i<4||!Jt("ES5").K(r)))return r.t;r.I=!0,t=mr(n,a),r.I=!1}else t=mr(n,a);return zt(t,(function(n,a){r&&Bt(r.t,n)===a||Vt(t,n,e(a))})),3===a?new Set(t):t}(e)}function mr(e,n){switch(n){case 2:return new Map(e);case 3:return Array.from(e)}return Kt(e)}function gr(){function e(e,n){var t=a[e];return t?t.enumerable=n:a[e]=t={configurable:!0,enumerable:n,get:function(){var n=this[Tr];return Cr.get(n,e)},set:function(n){var t=this[Tr];Cr.set(t,e,n)}},t}function n(e){for(var n=e.length-1;n>=0;n--){var a=e[n][Tr];if(!a.P)switch(a.i){case 5:r(a)&&dr(a);break;case 4:t(a)&&dr(a)}}}function t(e){for(var n=e.t,t=e.k,r=Ar(t),a=r.length-1;a>=0;a--){var s=r[a];if(s!==Tr){var o=n[s];if(void 0===o&&!jt(n,s))return!0;var i=t[s],l=i&&i[Tr];if(l?l.t!==o:!Gt(i,o))return!0}}var u=!!n[Tr];return r.length!==Ar(n).length+(u?0:1)}function r(e){var n=e.k;if(n.length!==e.t.length)return!0;var t=Object.getOwnPropertyDescriptor(n,n.length-1);if(t&&!t.get)return!0;for(var r=0;r<n.length;r++)if(!n.hasOwnProperty(r))return!0;return!1}var a={};Zt("ES5",{J:function(n,t){var r=Array.isArray(n),a=function(n,t){if(n){for(var r=Array(t.length),a=0;a<t.length;a++)Object.defineProperty(r,""+a,e(a,!0));return r}var s=Er(t);delete s[Tr];for(var o=Ar(s),i=0;i<o.length;i++){var l=o[i];s[l]=e(l,n||!!s[l].enumerable)}return Object.create(Object.getPrototypeOf(t),s)}(r,n),s={i:r?5:4,A:t?t.A:Qt(),P:!1,I:!1,R:{},l:t,t:n,k:a,o:null,g:!1,C:!1};return Object.defineProperty(a,Tr,{value:s,writable:!0}),a},S:function(e,t,a){a?Lt(t)&&t[Tr].A===e&&n(e.p):(e.u&&function e(n){if(n&&"object"==typeof n){var t=n[Tr];if(t){var a=t.t,s=t.k,o=t.R,i=t.i;if(4===i)zt(s,(function(n){n!==Tr&&(void 0!==a[n]||jt(a,n)?o[n]||e(s[n]):(o[n]=!0,dr(t)))})),zt(a,(function(e){void 0!==s[e]||jt(s,e)||(o[e]=!1,dr(t))}));else if(5===i){if(r(t)&&(dr(t),o.length=!0),s.length<a.length)for(var l=s.length;l<a.length;l++)o[l]=!1;else for(var u=a.length;u<s.length;u++)o[u]=!0;for(var c=Math.min(s.length,a.length),d=0;d<c;d++)s.hasOwnProperty(d)||(o[d]=!0),void 0===o[d]&&e(s[d])}}}}(e.p[0]),n(e.p))},K:function(e){return 4===e.i?t(e):r(e)}})}var yr,br,vr="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),_r="undefined"!=typeof Map,Sr="undefined"!=typeof Set,wr="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,kr=vr?Symbol.for("immer-nothing"):((yr={})["immer-nothing"]=!0,yr),Ir=vr?Symbol.for("immer-draftable"):"__$immer_draftable",Tr=vr?Symbol.for("immer-state"):"__$immer_state",xr=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Ar="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Er=Object.getOwnPropertyDescriptors||function(e){var n={};return Ar(e).forEach((function(t){n[t]=Object.getOwnPropertyDescriptor(e,t)})),n},Or={},Cr={get:function(e,n){if(n===Tr)return e;var t=Ht(e);if(!jt(t,n))return function(e,n,t){var r,a=cr(n,t);return a?"value"in a?a.value:null===(r=a.get)||void 0===r?void 0:r.call(e.k):void 0}(e,t,n);var r=t[n];return e.I||!Dt(r)?r:r===ur(e.t,n)?(fr(e),e.o[n]=pr(e.A.h,r,e)):r},has:function(e,n){return n in Ht(e)},ownKeys:function(e){return Reflect.ownKeys(Ht(e))},set:function(e,n,t){var r=cr(Ht(e),n);if(null==r?void 0:r.set)return r.set.call(e.k,t),!0;if(!e.P){var a=ur(Ht(e),n),s=null==a?void 0:a[Tr];if(s&&s.t===t)return e.o[n]=t,e.R[n]=!1,!0;if(Gt(t,a)&&(void 0!==t||jt(e.t,n)))return!0;fr(e),dr(e)}return e.o[n]===t&&(void 0!==t||n in e.o)||Number.isNaN(t)&&Number.isNaN(e.o[n])||(e.o[n]=t,e.R[n]=!0),!0},deleteProperty:function(e,n){return void 0!==ur(e.t,n)||n in e.t?(e.R[n]=!1,fr(e),dr(e)):delete e.R[n],e.o&&delete e.o[n],!0},getOwnPropertyDescriptor:function(e,n){var t=Ht(e),r=Reflect.getOwnPropertyDescriptor(t,n);return r?{writable:!0,configurable:1!==e.i||"length"!==n,enumerable:r.enumerable,value:t[n]}:r},defineProperty:function(){Rt(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Rt(12)}},Mr={};zt(Cr,(function(e,n){Mr[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}})),Mr.deleteProperty=function(e,n){return Mr.set.call(this,e,n,void 0)},Mr.set=function(e,n,t){return Cr.set.call(this,e[0],n,t,e[0])};var Fr=function(){function e(e){var n=this;this.O=wr,this.D=!0,this.produce=function(e,t,r){if("function"==typeof e&&"function"!=typeof t){var a=t;t=e;var s=n;return function(e){var n=this;void 0===e&&(e=a);for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return s.produce(e,(function(e){var r;return(r=t).call.apply(r,[n,e].concat(o))}))}}var o;if("function"!=typeof t&&Rt(6),void 0!==r&&"function"!=typeof r&&Rt(7),Dt(e)){var i=rr(n),l=pr(n,e,void 0),u=!0;try{o=t(l),u=!1}finally{u?nr(i):tr(i)}return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return er(i,r),sr(e,i)}),(function(e){throw nr(i),e})):(er(i,r),sr(o,i))}if(!e||"object"!=typeof e){if(void 0===(o=t(e))&&(o=e),o===kr&&(o=void 0),n.D&&qt(o,!0),r){var c=[],d=[];Jt("Patches").M(e,o,c,d),r(c,d)}return o}Rt(21,e)},this.produceWithPatches=function(e,t){if("function"==typeof e)return function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return n.produceWithPatches(t,(function(n){return e.apply(void 0,[n].concat(a))}))};var r,a,s=n.produce(e,t,(function(e,n){r=e,a=n}));return"undefined"!=typeof Promise&&s instanceof Promise?s.then((function(e){return[e,r,a]})):[s,r,a]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var n=e.prototype;return n.createDraft=function(e){Dt(e)||Rt(8),Lt(e)&&(e=hr(e));var n=rr(this),t=pr(this,e,void 0);return t[Tr].C=!0,tr(n),t},n.finishDraft=function(e,n){var t=(e&&e[Tr]).A;return er(t,n),sr(void 0,t)},n.setAutoFreeze=function(e){this.D=e},n.setUseProxies=function(e){e&&!wr&&Rt(20),this.O=e},n.applyPatches=function(e,n){var t;for(t=n.length-1;t>=0;t--){var r=n[t];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}t>-1&&(n=n.slice(t+1));var a=Jt("Patches").$;return Lt(e)?a(e,n):this.produce(e,(function(e){return a(e,n)}))},e}(),Pr=new Fr,Nr=Pr.produce;Pr.produceWithPatches.bind(Pr),Pr.setAutoFreeze.bind(Pr),Pr.setUseProxies.bind(Pr),Pr.applyPatches.bind(Pr),Pr.createDraft.bind(Pr),Pr.finishDraft.bind(Pr);const Rr=Nr;function Lr(e){return Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lr(e)}function Dr(e){var n=function(e,n){if("object"!=Lr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=Lr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==Lr(n)?n:String(n)}function zr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ur(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?zr(Object(t),!0).forEach((function(n){var r,a,s;r=e,a=n,s=t[n],(a=Dr(a))in r?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):zr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function jr(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Br="function"===typeof Symbol&&Symbol.observable||"@@observable",Vr=function(){return Math.random().toString(36).substring(7).split("").join(".")},Gr={INIT:"@@redux/INIT"+Vr(),REPLACE:"@@redux/REPLACE"+Vr(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Vr()}};function Wr(e){if("object"!==typeof e||null===e)return!1;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}function $r(e,n,t){var r;if("function"===typeof n&&"function"===typeof t||"function"===typeof t&&"function"===typeof arguments[3])throw new Error(jr(0));if("function"===typeof n&&"undefined"===typeof t&&(t=n,n=void 0),"undefined"!==typeof t){if("function"!==typeof t)throw new Error(jr(1));return t($r)(e,n)}if("function"!==typeof e)throw new Error(jr(2));var a=e,s=n,o=[],i=o,l=!1;function u(){i===o&&(i=o.slice())}function c(){if(l)throw new Error(jr(3));return s}function d(e){if("function"!==typeof e)throw new Error(jr(4));if(l)throw new Error(jr(5));var n=!0;return u(),i.push(e),function(){if(n){if(l)throw new Error(jr(6));n=!1,u();var t=i.indexOf(e);i.splice(t,1),o=null}}}function f(e){if(!Wr(e))throw new Error(jr(7));if("undefined"===typeof e.type)throw new Error(jr(8));if(l)throw new Error(jr(9));try{l=!0,s=a(s,e)}finally{l=!1}for(var n=o=i,t=0;t<n.length;t++){(0,n[t])()}return e}return f({type:Gr.INIT}),(r={dispatch:f,subscribe:d,getState:c,replaceReducer:function(e){if("function"!==typeof e)throw new Error(jr(10));a=e,f({type:Gr.REPLACE})}})[Br]=function(){var e,n=d;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(jr(11));function t(){e.next&&e.next(c())}return t(),{unsubscribe:n(t)}}})[Br]=function(){return this},e},r}function Hr(e){for(var n=Object.keys(e),t={},r=0;r<n.length;r++){var a=n[r];0,"function"===typeof e[a]&&(t[a]=e[a])}var s,o=Object.keys(t);try{!function(e){Object.keys(e).forEach((function(n){var t=e[n];if("undefined"===typeof t(void 0,{type:Gr.INIT}))throw new Error(jr(12));if("undefined"===typeof t(void 0,{type:Gr.PROBE_UNKNOWN_ACTION()}))throw new Error(jr(13))}))}(t)}catch(i){s=i}return function(e,n){if(void 0===e&&(e={}),s)throw s;for(var r=!1,a={},i=0;i<o.length;i++){var l=o[i],u=t[l],c=e[l],d=u(c,n);if("undefined"===typeof d){n&&n.type;throw new Error(jr(14))}a[l]=d,r=r||d!==c}return(r=r||o.length!==Object.keys(e).length)?a:e}}function Kr(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return 0===n.length?function(e){return e}:1===n.length?n[0]:n.reduce((function(e,n){return function(){return e(n.apply(void 0,arguments))}}))}function qr(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){return function(){var t=e.apply(void 0,arguments),r=function(){throw new Error(jr(15))},a={getState:t.getState,dispatch:function(){return r.apply(void 0,arguments)}},s=n.map((function(e){return e(a)}));return r=Kr.apply(void 0,s)(t.dispatch),Ur(Ur({},t),{},{dispatch:r})}}}function Yr(e){return function(n){var t=n.dispatch,r=n.getState;return function(n){return function(a){return"function"===typeof a?a(t,r,e):n(a)}}}}var Xr=Yr();Xr.withExtraArgument=Yr;const Jr=Xr;var Zr=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qr=function(e,n){var t,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(s){return function(i){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=n.call(e,o)}catch(i){s=[6,i],r=0}finally{t=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,i])}}},ea=function(e,n){for(var t=0,r=n.length,a=e.length;t<r;t++,a++)e[a]=n[t];return e},na=Object.defineProperty,ta=Object.defineProperties,ra=Object.getOwnPropertyDescriptors,aa=Object.getOwnPropertySymbols,sa=Object.prototype.hasOwnProperty,oa=Object.prototype.propertyIsEnumerable,ia=function(e,n,t){return n in e?na(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t},la=function(e,n){for(var t in n||(n={}))sa.call(n,t)&&ia(e,t,n[t]);if(aa)for(var r=0,a=aa(n);r<a.length;r++){t=a[r];oa.call(n,t)&&ia(e,t,n[t])}return e},ua=function(e,n){return ta(e,ra(n))},ca=function(e,n,t){return new Promise((function(r,a){var s=function(e){try{i(t.next(e))}catch(n){a(n)}},o=function(e){try{i(t.throw(e))}catch(n){a(n)}},i=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(s,o)};i((t=t.apply(e,n)).next())}))},da="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Kr:Kr.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function fa(e){if("object"!==typeof e||null===e)return!1;var n=Object.getPrototypeOf(e);if(null===n)return!0;for(var t=n;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return n===t}function pa(e,n){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(n){var a=n.apply(void 0,t);if(!a)throw new Error("prepareAction did not return an object");return la(la({type:e,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:e,payload:t[0]}}return t.toString=function(){return""+e},t.type=e,t.match=function(n){return n.type===e},t}var ha=function(e){function n(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=e.apply(this,t)||this;return Object.setPrototypeOf(a,n.prototype),a}return Zr(n,e),Object.defineProperty(n,Symbol.species,{get:function(){return n},enumerable:!1,configurable:!0}),n.prototype.concat=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.prototype.concat.apply(this,n)},n.prototype.prepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length&&Array.isArray(e[0])?new(n.bind.apply(n,ea([void 0],e[0].concat(this)))):new(n.bind.apply(n,ea([void 0],e.concat(this))))},n}(Array),ma=function(e){function n(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=e.apply(this,t)||this;return Object.setPrototypeOf(a,n.prototype),a}return Zr(n,e),Object.defineProperty(n,Symbol.species,{get:function(){return n},enumerable:!1,configurable:!0}),n.prototype.concat=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.prototype.concat.apply(this,n)},n.prototype.prepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length&&Array.isArray(e[0])?new(n.bind.apply(n,ea([void 0],e[0].concat(this)))):new(n.bind.apply(n,ea([void 0],e.concat(this))))},n}(Array);function ga(e){return Dt(e)?Rr(e,(function(){})):e}function ya(){return function(e){return function(e){void 0===e&&(e={});var n=e.thunk,t=void 0===n||n,r=(e.immutableCheck,e.serializableCheck,e.actionCreatorCheck,new ha);t&&(!function(e){return"boolean"===typeof e}(t)?r.push(Jr.withExtraArgument(t.extraArgument)):r.push(Jr));0;return r}(e)}}function ba(e){var n,t={},r=[],a={addCase:function(e,n){var r="string"===typeof e?e:e.type;if(!r)throw new Error("`builder.addCase` cannot be called with an empty action type");if(r in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[r]=n,a},addMatcher:function(e,n){return r.push({matcher:e,reducer:n}),a},addDefaultCase:function(e){return n=e,a}};return e(a),[t,r,n]}function va(e){var n=e.name;if(!n)throw new Error("`name` is a required option for createSlice");var t,r="function"==typeof e.initialState?e.initialState:ga(e.initialState),a=e.reducers||{},s=Object.keys(a),o={},i={},l={};function u(){var n="function"===typeof e.extraReducers?ba(e.extraReducers):[e.extraReducers],t=n[0],a=void 0===t?{}:t,s=n[1],o=void 0===s?[]:s,l=n[2],u=void 0===l?void 0:l,c=la(la({},a),i);return function(e,n,t,r){void 0===t&&(t=[]);var a,s="function"===typeof n?ba(n):[n,t,r],o=s[0],i=s[1],l=s[2];if(function(e){return"function"===typeof e}(e))a=function(){return ga(e())};else{var u=ga(e);a=function(){return u}}function c(e,n){void 0===e&&(e=a());var t=ea([o[n.type]],i.filter((function(e){return(0,e.matcher)(n)})).map((function(e){return e.reducer})));return 0===t.filter((function(e){return!!e})).length&&(t=[l]),t.reduce((function(e,t){if(t){var r;if(Lt(e))return void 0===(r=t(e,n))?e:r;if(Dt(e))return Rr(e,(function(e){return t(e,n)}));if(void 0===(r=t(e,n))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return c.getInitialState=a,c}(r,(function(e){for(var n in c)e.addCase(n,c[n]);for(var t=0,r=o;t<r.length;t++){var a=r[t];e.addMatcher(a.matcher,a.reducer)}u&&e.addDefaultCase(u)}))}return s.forEach((function(e){var t,r,s=a[e],u=n+"/"+e;"reducer"in s?(t=s.reducer,r=s.prepare):t=s,o[e]=t,i[u]=t,l[e]=r?pa(u,r):pa(u)})),{name:n,reducer:function(e,n){return t||(t=u()),t(e,n)},actions:l,caseReducers:o,getInitialState:function(){return t||(t=u()),t.getInitialState()}}}var _a=function(e){void 0===e&&(e=21);for(var n="",t=e;t--;)n+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return n},Sa=["name","message","stack","code"],wa=function(e,n){this.payload=e,this.meta=n},ka=function(e,n){this.payload=e,this.meta=n},Ia=function(e){if("object"===typeof e&&null!==e){for(var n={},t=0,r=Sa;t<r.length;t++){var a=r[t];"string"===typeof e[a]&&(n[a]=e[a])}return n}return{message:String(e)}};!function(){function e(e,n,t){var r=pa(e+"/fulfilled",(function(e,n,t,r){return{payload:e,meta:ua(la({},r||{}),{arg:t,requestId:n,requestStatus:"fulfilled"})}})),a=pa(e+"/pending",(function(e,n,t){return{payload:void 0,meta:ua(la({},t||{}),{arg:n,requestId:e,requestStatus:"pending"})}})),s=pa(e+"/rejected",(function(e,n,r,a,s){return{payload:a,error:(t&&t.serializeError||Ia)(e||"Rejected"),meta:ua(la({},s||{}),{arg:r,requestId:n,rejectedWithValue:!!a,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(i,l,u){var c,d=(null==t?void 0:t.idGenerator)?t.idGenerator(e):_a(),f=new o;function p(e){c=e,f.abort()}var h=function(){return ca(this,null,(function(){var o,h,m,g,y,b;return Qr(this,(function(v){switch(v.label){case 0:return v.trys.push([0,4,,5]),g=null==(o=null==t?void 0:t.condition)?void 0:o.call(t,e,{getState:l,extra:u}),null===(_=g)||"object"!==typeof _||"function"!==typeof _.then?[3,2]:[4,g];case 1:g=v.sent(),v.label=2;case 2:if(!1===g||f.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,y=new Promise((function(e,n){return f.signal.addEventListener("abort",(function(){return n({name:"AbortError",message:c||"Aborted"})}))})),i(a(d,e,null==(h=null==t?void 0:t.getPendingMeta)?void 0:h.call(t,{requestId:d,arg:e},{getState:l,extra:u}))),[4,Promise.race([y,Promise.resolve(n(e,{dispatch:i,getState:l,extra:u,requestId:d,signal:f.signal,abort:p,rejectWithValue:function(e,n){return new wa(e,n)},fulfillWithValue:function(e,n){return new ka(e,n)}})).then((function(n){if(n instanceof wa)throw n;return n instanceof ka?r(n.payload,d,e,n.meta):r(n,d,e)}))])];case 3:return m=v.sent(),[3,5];case 4:return b=v.sent(),m=b instanceof wa?s(null,d,e,b.payload,b.meta):s(b,d,e),[3,5];case 5:return t&&!t.dispatchConditionRejection&&s.match(m)&&m.meta.condition||i(m),[2,m]}var _}))}))}();return Object.assign(h,{abort:p,requestId:d,arg:e,unwrap:function(){return h.then(Ta)}})}}),{pending:a,rejected:s,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}();function Ta(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var xa="listenerMiddleware";pa(xa+"/add"),pa(xa+"/removeAll"),pa(xa+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof t.g?t.g:globalThis);var Aa,Ea=function(e){return function(n){setTimeout(n,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Ea(10);gr();var Oa=t(248),Ca=t(327),Ma=t(164);let Fa=function(e){e()};const Pa=()=>Fa,Na=Symbol.for("react-redux-context"),Ra="undefined"!==typeof globalThis?globalThis:{};function La(){var n;if(!e.createContext)return{};const t=null!=(n=Ra[Na])?n:Ra[Na]=new Map;let r=t.get(e.createContext);return r||(r=e.createContext(null),t.set(e.createContext,r)),r}const Da=La();function za(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Da;return function(){return(0,e.useContext)(n)}}const Ua=za();let ja=()=>{throw new Error("uSES not initialized!")};const Ba=(e,n)=>e===n;function Va(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Da;const t=n===Da?Ua:za(n);return function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:a=Ba,stabilityCheck:s,noopCheck:o}="function"===typeof r?{equalityFn:r}:r;const{store:i,subscription:l,getServerState:u,stabilityCheck:c,noopCheck:d}=t(),f=((0,e.useRef)(!0),(0,e.useCallback)({[n.name]:e=>n(e)}[n.name],[n,c,s])),p=ja(l.addNestedSub,i.getState,u||i.getState,f,a);return(0,e.useDebugValue)(p),p}}const Ga=Va();const Wa={notify(){},get:()=>[]};function $a(e,n){let t,r=Wa,a=0,s=!1;function o(){u.onStateChange&&u.onStateChange()}function i(){a++,t||(t=n?n.addNestedSub(o):e.subscribe(o),r=function(){const e=Pa();let n=null,t=null;return{clear(){n=null,t=null},notify(){e((()=>{let e=n;for(;e;)e.callback(),e=e.next}))},get(){let e=[],t=n;for(;t;)e.push(t),t=t.next;return e},subscribe(e){let r=!0,a=t={callback:e,next:null,prev:t};return a.prev?a.prev.next=a:n=a,function(){r&&null!==n&&(r=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:n=a.next)}}}}())}function l(){a--,t&&0===a&&(t(),t=void 0,r.clear(),r=Wa)}const u={addNestedSub:function(e){i();const n=r.subscribe(e);let t=!1;return()=>{t||(t=!0,n(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,i())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>r};return u}const Ha=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?e.useLayoutEffect:e.useEffect;let Ka=null;const qa=function(n){let{store:t,context:r,children:a,serverState:s,stabilityCheck:o="once",noopCheck:i="once"}=n;const l=e.useMemo((()=>{const e=$a(t);return{store:t,subscription:e,getServerState:s?()=>s:void 0,stabilityCheck:o,noopCheck:i}}),[t,s,o,i]),u=e.useMemo((()=>t.getState()),[t]);Ha((()=>{const{subscription:e}=l;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[l,u]);const c=r||Da;return e.createElement(c.Provider,{value:l},a)};function Ya(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Da;const n=e===Da?Ua:za(e);return function(){const{store:e}=n();return e}}const Xa=Ya();function Ja(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Da;const n=e===Da?Xa:Ya(e);return function(){return n().dispatch}}const Za=Ja();var Qa;(e=>{ja=e})(Ca.useSyncExternalStoreWithSelector),(e=>{Ka=e})(Oa.useSyncExternalStore),Qa=Ma.unstable_batchedUpdates,Fa=Qa;const es=["pd","wasm"],ns={url:null,filepath:null,arrayBuffer:null,focusOn:"local"},ts=va({name:"buildInput",initialState:ns,reducers:{setUrl:(e,n)=>{e.url=n.payload,e.focusOn="url"},fetchUrlError:(e,n)=>{},fetchUrlSuccess:(e,n)=>{e.filepath=null,e.url=n.payload.url,e.arrayBuffer=n.payload.arrayBuffer},setLocalFile:(e,n)=>{e.url=null,e.filepath=n.payload.filepath,e.arrayBuffer=n.payload.arrayBuffer,e.focusOn="local"},setFocusOn:(e,n)=>{e.focusOn=n.payload},clear:()=>ns}}),rs=["wav","app"],as={format:null,codeTarget:"JavaScript",previewDurationSeconds:30},ss=va({name:"buildOutput",initialState:as,reducers:{setFormat:(e,n)=>{e.format=n.payload},setCodeTarget:(e,n)=>{e.codeTarget=n.payload},setPreviewDurationSeconds:(e,n)=>{e.previewDurationSeconds=n.payload},clear:()=>as},extraReducers(e){e.addCase(ts.actions.setFocusOn,(e=>{e.format=null}))}});let os=null;const is=/\\(\$\d+)/g,ls=/\\\\\\,/g,us=/\\\\\\;/g,cs=e=>{try{return ds(e)}catch(n){if(!(n instanceof ms))throw n}try{return hs(e)}catch(n){if(!(n instanceof ms))throw n}throw new ms("Not a valid arg ".concat(e))},ds=e=>{if(gs(e))return e;if(ys(e)){const n=Number(e);if(isNaN(n))throw new ms("Not a valid number arg ".concat(e));return n}throw new ms("Not a valid number arg ".concat(e))},fs=e=>{if(void 0===e)throw new ms("Received undefined");const n=parseInt(e,10);if(isNaN(n))throw new ms("Invalid int received");return n},ps=e=>{const n=ds(e);if(0===n||1===n)return n;throw new ms("Should be 0 or 1")},hs=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!ys(e))throw new ms("Not a valid string arg ".concat(e));if(null!==n&&e===n)return"";let t,r=e.replace(ls,",").replace(us,";");for(;t=is.exec(r);)r=r.replace(t[0],t[1]);return r};class ms extends Error{}const gs=e=>Number.isFinite(e),ys=e=>"string"===typeof e,bs=(e,n)=>{let{tokens:t}=n;const r=hs(t[2]),a=cs(t[3]),s=fs(t[5]);return{id:e,args:[r,a,s%2],data:null,layout:{drawAs:["polygon","points","bezier"][s>>>1]}}},vs=(e,n)=>{let{tokens:t}=n;const r=t[4],a=[];if("pd"!==r&&"graph"!==r&&"table"!==r)throw new Error("unknown canvasType : ".concat(r));return"pd"===r&&void 0!==t[5]&&a.push(hs(t[5])),{id:e,type:r,patchId:hs(t[1]),nodeClass:"subpatch",args:a,layout:{x:fs(t[2]),y:fs(t[3])}}},_s=(e,n)=>{let{tokens:t}=n;return{id:e,args:[],type:"array",nodeClass:"array",arrayId:hs(t[1])}},Ss=(e,n)=>{const t=n[1];let r,a="";return"obj"===t?(a=hs(n[4]),r=n.slice(5)):(a=hs(t),r=n.slice(4)),"text"===t&&(r=[n.slice(4).join(" ")]),{id:e,type:a,args:r,layout:{x:ds(n[2]),y:ds(n[3])}}},ws=e=>{let{tokens:n}=e;return{source:{nodeId:hs(n[2]),portletId:fs(n[3])},sink:{nodeId:hs(n[4]),portletId:fs(n[5])}}},ks=e=>{const n={...e,nodeClass:"generic"};return n.args=n.args.map(cs),n},Is=e=>{const n=e.args,t={...e,type:e.type,nodeClass:"control"};if("floatatom"===t.type||"symbolatom"===t.type||"listbox"===t.type)t.layout={...t.layout,widthInChars:ds(n[0]),labelPos:ds(n[3]),label:hs(n[4],"-")},t.args=[ds(n[1]),ds(n[2]),hs(n[5],"-"),hs(n[6],"-")];else if("msg"===t.type)t.args=t.args.map(cs);else if("bng"===t.type)t.layout={...t.layout,size:ds(n[0]),hold:ds(n[1]),interrupt:ds(n[2]),label:hs(n[6],"empty"),labelX:ds(n[7]),labelY:ds(n[8]),labelFont:n[9],labelFontSize:ds(n[10]),bgColor:n[11],fgColor:n[12],labelColor:n[13]},t.args=[ps(n[3]),hs(n[5],"empty"),hs(n[4],"empty")];else if("tgl"===t.type)t.layout={...t.layout,size:ds(n[0]),label:hs(n[4],"empty"),labelX:ds(n[5]),labelY:ds(n[6]),labelFont:n[7],labelFontSize:ds(n[8]),bgColor:n[9],fgColor:n[10],labelColor:n[11]},t.args=[ds(n[13]),ps(n[1]),ds(n[12]),hs(n[3],"empty"),hs(n[2],"empty")];else if("nbx"===t.type)t.layout={...t.layout,widthInChars:ds(n[0]),height:ds(n[1]),log:ds(n[4]),label:hs(n[8],"empty"),labelX:ds(n[9]),labelY:ds(n[10]),labelFont:n[11],labelFontSize:ds(n[12]),bgColor:n[13],fgColor:n[14],labelColor:n[15],logHeight:n[17]},t.args=[ds(n[2]),ds(n[3]),ps(n[5]),ds(n[16]),hs(n[7],"empty"),hs(n[6],"empty")];else if("vsl"===t.type||"hsl"===t.type){t.layout={...t.layout,width:ds(n[0]),height:ds(n[1]),log:ds(n[4]),label:hs(n[8],"empty"),labelX:ds(n[9]),labelY:ds(n[10]),labelFont:n[11],labelFontSize:ds(n[12]),bgColor:n[13],fgColor:n[14],labelColor:n[15],steadyOnClick:n[17]};const e=ds(n[2]),r=ds(n[3]),a=ps(n[4]),s=ds(n[16]),o="hsl"===t.type?t.layout.width:t.layout.height;let i=0;if(a){const n=Math.log(r/e)/(o-1);i=e*Math.exp(n*s*.01)}else i=e+(r-e)*s/(100*(o-1));t.args=[e,r,ps(n[5]),i,hs(n[7],"empty"),hs(n[6],"empty")]}else if("vradio"===t.type||"hradio"===t.type)t.layout={...t.layout,size:ds(n[0]),label:hs(n[6],"empty"),labelX:ds(n[7]),labelY:ds(n[8]),labelFont:n[9],labelFontSize:ds(n[10]),bgColor:n[11],fgColor:n[12],labelColor:n[13]},t.args=[ds(n[3]),ps(n[2]),ds(n[14]),hs(n[5],"empty"),hs(n[4],"empty"),ps(n[2])];else if("vu"===t.type)t.layout={...t.layout,width:ds(n[0]),height:ds(n[1]),label:hs(n[3],"empty"),labelX:ds(n[4]),labelY:ds(n[5]),labelFont:n[6],labelFontSize:ds(n[7]),bgColor:n[8],labelColor:n[9],log:ds(n[10])},t.args=[hs(n[2],"empty"),hs(n[11])];else{if("cnv"!==t.type)throw new Error("Unexpected control node ".concat(t.type));t.layout={...t.layout,size:ds(n[0]),width:ds(n[1]),height:ds(n[2]),label:hs(n[5],"empty"),labelX:ds(n[6]),labelY:ds(n[7]),labelFont:n[8],labelFontSize:ds(n[9]),bgColor:n[10],labelColor:n[11]},t.args=[hs(n[4],"empty"),hs(n[3],"empty"),hs(n[12])]}return t};function Ts(e,n){if(n){const t=n;for(;t.length;){"f"===t.shift()&&(e.layout.width=ds(t.shift()))}}return e}const xs=/(?<comma>((?<!\\)\s*)((?<!\\\\)\\,)((?<!\\)\s*))|(?<semi>((?<!\\)\s*)((?<!\\\\)\\;)((?<!\\)\s*))|((?<!\\)\s)+|\r\n?|\n/,As=/,(?!\\)/,Es=/(#((.|\r|\n)*?)[^\\\\])\r{0,1}\n{0,1};\r{0,1}(\n|$)/gi,Os=e=>e.split("").reverse().join("");const Cs=e=>{const n=Array.from(e.matchAll(new RegExp(xs,"g"))),t=[];n.forEach(((r,a)=>{const s=0===a?0:n[a-1].index+n[a-1][0].length,o=r.index,i=e.slice(s,o);i.length&&t.push(i),r[1]?t.push(","):r[5]&&t.push(";")}));const r=n.slice(-1)[0];return r&&t.push(e.slice(r.index+r[0].length)),t},Ms={floatatom:"floatatom",symbolatom:"symbolatom",listbox:"listbox",bng:"bng",tgl:"tgl",nbx:"nbx",vsl:"vsl",hsl:"hsl",vradio:"vradio",hradio:"hradio",vu:"vu",cnv:"cnv",msg:"msg"},Fs=["obj","floatatom","symbolatom","listbox","msg","text"],Ps=()=>"".concat(++Ps.counter);Ps.counter=-1;const Ns=()=>"".concat(++Ns.counter);Ns.counter=-1;const Rs=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return t.every(((n,t)=>n===e[t]))};var Ls=e=>{let n=(e=>{const n=[];Es.lastIndex=0;let t=null;for(;t=Es.exec(e);){const r=Os(t[1]).split(As).reverse().map(Os),a=e.slice(0,t.index).split("\n").length-1;n.push({tokens:Cs(r[0]),lineAfterComma:r[1]?Cs(r[1]):void 0,lineIndex:a})}return n})(e);const t={pd:{rootPatchId:"0",patches:{},arrays:{}},errors:[],warnings:[],tokenizedLines:n,patchTokenizedLinesMap:{}};return Ds(t,!0),Object.keys(t.pd.patches).forEach((e=>{Us(t,e),js(t,e),zs(t,e),t.patchTokenizedLinesMap[e].length&&t.patchTokenizedLinesMap[e].forEach((e=>{let{tokens:n,lineIndex:r}=e;t.errors.push({message:'"'.concat(n[0]," ").concat(n[1],'" unexpected chunk'),lineIndex:r})}))})),t.errors.length?{status:1,warnings:t.warnings,errors:t.errors}:{status:0,warnings:t.warnings,pd:t.pd}};const Ds=(e,n)=>{const t=Ps(),r=[];let a=null,s=null,o=-1,i=!0,l=e.tokenizedLines[0]?e.tokenizedLines[0].lineIndex:-1;for(;e.tokenizedLines.length&&i;){const{tokens:n,lineIndex:l}=e.tokenizedLines[0];Rs(n,"#N","struct")||Rs(n,"#X","declare")||Rs(n,"#X","scalar")||Rs(n,"#X","f")?(e.warnings.push({message:'"'.concat(n[0]," ").concat(n[1],'" chunk is not supported'),lineIndex:l}),e.tokenizedLines.shift()):(o++,Bs(e,l,(()=>{if(Rs(n,"#N","canvas")&&0===o)a=e.tokenizedLines.shift();else if(Rs(n,"#N","canvas"))Ds(e,!1);else if(Rs(n,"#X","obj",n[2],n[3],"table")){const n=e.tokenizedLines.shift().tokens;e.tokenizedLines=[{tokens:["#N","canvas","0","0","100","100","(subpatch)","0"],lineIndex:l},{tokens:["#N","canvas","0","0","100","100","(subpatch)","0"],lineIndex:l},{tokens:["#X","array",hs(n[5]),n[6]||100..toString(),"float","0"],lineIndex:l},{tokens:["#X","restore","0","0","graph"],lineIndex:l},{tokens:["#X","restore",n[2],n[3],"table"],lineIndex:l},...e.tokenizedLines],Ds(e,!1)}else Rs(n,"#X","coords")?s=e.tokenizedLines.shift():Rs(n,"#X","restore")?(e.tokenizedLines[0].tokens=["PATCH",t,...e.tokenizedLines[0].tokens.slice(2)],i=!1):r.push(e.tokenizedLines.shift())})))}null!==a?(n&&(e.pd.rootPatchId=t),e.pd.patches[t]=((e,n,t,r)=>{const{tokens:a}=t,s=r?r.tokens:null;let o={windowX:fs(a[2]),windowY:fs(a[3]),windowWidth:fs(a[4]),windowHeight:fs(a[5])};if("undefined"!==typeof a[7]&&(o.openOnLoad=ps(a[7])),s&&"undefined"!==typeof s[8]){const e=ds(s[8]);o.graphOnParent=e>0?1:0,1===o.graphOnParent&&(o={...o,hideObjectNameAndArguments:2===e?1:0,viewportX:s[9]?fs(s[9]):0,viewportY:s[10]?fs(s[10]):0,viewportWidth:fs(s[6]),viewportHeight:fs(s[7])})}return{id:e,isRoot:n,layout:o,args:[],nodes:{},connections:[],inlets:[],outlets:[]}})(t,n,a,s),e.patchTokenizedLinesMap[t]=r):e.errors.push({message:"Parsing failed #canvas missing",lineIndex:l})},zs=(e,n)=>{const t=e.pd.patches[n],r=(e,n)=>parseFloat(e.id)-parseFloat(n.id),a=(e,n)=>e.layout.x-n.layout.x,s=Object.values(t.nodes).filter((e=>["inlet","inlet~"].includes(e.type))),o=s.every((e=>!!e.layout))?a:r;s.sort(o);const i=Object.values(t.nodes).filter((e=>["outlet","outlet~"].includes(e.type))),l=i.every((e=>!!e.layout))?a:r;i.sort(l),e.pd.patches[n]={...t,inlets:s.map((e=>e.id)),outlets:i.map((e=>e.id))}},Us=(e,n)=>{const t=e.patchTokenizedLinesMap[n],r=[];let a=null;for(;t.length;){const{tokens:n,lineIndex:s}=t[0];Bs(e,s,(()=>{if(Rs(n,"#X","array"))a=bs(Ns(),t.shift()),e.pd.arrays[a.id]=a,r.push({tokens:["ARRAY",a.id],lineAfterComma:[],lineIndex:s});else if(Rs(n,"#A")){if(!a)throw new Error("line ".concat(s,": Unsupported data chunk #A."));if(0===a.args[2])throw new Error("got array data for an array that doesn't save contents.");const e=a.data||[];a.data=e;const r=ds(n[1]);n.slice(2).forEach(((n,t)=>{const a=ds(n);Number.isFinite(a)&&(e[r+t]=a)})),t.shift()}else r.push(t.shift())}))}e.patchTokenizedLinesMap[n]=r},js=(e,n)=>{const t=e.pd.patches[n],r=e.patchTokenizedLinesMap[n],a=[];let s=-1;const o=()=>"".concat(++s);for(;r.length;){const{tokens:n,lineIndex:s}=r[0];Bs(e,s,(()=>{let e=null;if(Rs(n,"PATCH"))e=vs(o(),r.shift());else if(Rs(n,"ARRAY"))e=_s(o(),r.shift());else if(Fs.some((e=>Rs(n,"#X",e)))){const n=r.shift(),t=Ss(o(),n.tokens);Object.keys(Ms).includes(t.type)?(e=Is(t),e=Ts(e,n.lineAfterComma)):(e=ks(t),e=Ts(e,n.lineAfterComma))}e?t.nodes[e.id]=e:Rs(n,"#X","connect")?t.connections.push(ws(r.shift())):a.push(r.shift())}))}e.patchTokenizedLinesMap[n]=a},Bs=(e,n,t)=>{try{t()}catch(r){if(!(r instanceof ms))throw r;e.errors.push({message:r.message,lineIndex:n})}},Vs=e=>async n=>{let t=null;try{t=await e(n)}catch(a){if(a instanceof Gs)return{status:1,unknownNodeType:n};throw a}const r=Ls(t);return 0===r.status?{status:0,pd:r.pd,parsingWarnings:r.warnings}:{status:1,parsingErrors:r.errors,parsingWarnings:r.warnings}};class Gs extends Error{}const Ws=(e,n)=>{const t=e[n];if(!t)throw new Error("no artefact was generated for ".concat(n));return t},$s=e=>(new TextDecoder).decode(e);var Hs="0.1.0";const Ks=e=>{let{variableNamesIndex:n,settings:{audio:t,io:r}}=e;return{libVersion:Hs,audioSettings:{...t,sampleRate:0,blockSize:0},compilation:{io:r,variableNamesIndex:{io:n.io}}}},qs=e=>{const n=[];for(let t=0;t<e;t++)n.push(t);return n},Ys=(e,n)=>{const t={};return e.forEach(((e,r)=>{const[a,s]=n(e,r);t[a]=s})),t},Xs=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];const r=n.find((e=>{let[n]=e;return n}));if(!r)throw new Error("no route found");return r[1]},Js=(e,n,t)=>oo({astType:"Var",name:n,type:e,value:void 0!==t?io(t):void 0}),Zs=(e,n,t)=>oo({astType:"ConstVar",name:n,type:e,value:io(t)}),Qs=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"void";return function(r){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return oo({astType:"Func",name:e,args:n,returnType:t,body:ro(r,...s)})}},eo=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"void";return function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return oo({astType:"Func",name:null,args:e,returnType:n,body:ro(t,...a)})}},no=(e,n)=>oo({astType:"Class",name:e,members:n}),to=e=>({astType:"Sequence",content:ao(so(e,qs(e.length-1).map((()=>"\n"))))}),ro=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return oo({astType:"Sequence",content:ao(so(e,t))})},ao=e=>{const n=e.flatMap((e=>"string"===typeof e?[e]:"number"===typeof e?[e.toString()]:null===e?[]:Array.isArray(e)?ao(so(e,qs(e.length-1).map((()=>"\n")))):"object"===typeof e&&"Sequence"===e.astType?e.content:[e])),[t,r]=n.reduce(((e,n)=>{let[t,r]=e;return"string"===typeof n?[t,r+n]:r.length?[[...t,r,n],""]:[[...t,n],""]}),[[],""]);return r.length&&t.push(r),t},so=(e,n)=>0===e.length?[]:e.slice(1).reduce(((e,t,r)=>e.concat([n[r],t])),[e[0]]),oo=e=>({...e}),io=e=>"number"===typeof e?to([e.toString()]):"string"===typeof e?to([e]):e,lo=(e,n)=>{const t=e[n];if(t)return t;throw new Error('Node "'.concat(n,'" not found in graph'))},uo=(e,n)=>{const t=e.inlets[n];if(t)return t;throw new Error('Inlet "'.concat(n,'" not found in node ').concat(e.id," of type ").concat(e.type))},co=(e,n)=>{const t=e.outlets[n];if(t)return t;throw new Error('Outlet "'.concat(n,'" not found in node ').concat(e.id," of type ").concat(e.type))},fo=(e,n)=>e.sinks[n]||[],po=(e,n)=>e.sources[n]||[],ho=(e,n)=>n.map((n=>lo(e,n))),mo=(e,n,t)=>bo(n.sinks,co,e,n,t),go=(e,n)=>yo(e.sinks,co,e,n),yo=(e,n,t,r)=>Object.entries(e).reduce(((e,a)=>{let[s,o]=a;const i={portletId:s,nodeId:t.id};return n(t,s).type===r||void 0===r?[...e,...o.map((e=>[i,e]))]:e}),[]),bo=(e,n,t,r,a)=>yo(e,n,r,a).reduce(((e,n)=>{let[t,r]=n;return e.includes(r.nodeId)?e:[...e,r.nodeId]}),[]).map((e=>lo(t,e))),vo=(e,n,t)=>{const r=[];return n.forEach((n=>_o(r,[],e,n,t))),r},_o=(e,n,t,r,a)=>{if(a&&!a(r))return;const s=[...n,r.id];((e,n,t)=>bo(n.sources,uo,e,n,t))(t,r,"signal").forEach((r=>{-1===n.indexOf(r.id)&&_o(e,s,t,r,a)})),-1===e.indexOf(r.id)&&e.push(r.id)},So=(e,n)=>{const t=[];return n.forEach((n=>{wo(t,e,n)})),t},wo=(e,n,t)=>{-1===e.indexOf(t.id)&&(e.push(t.id),mo(n,t,"message").forEach((t=>{wo(e,n,t)})))},ko=(e,n)=>{const t={};return Object.entries(e).forEach((e=>{let[r,a]=e;const s=a.filter((e=>{let{nodeId:t}=e;return n.includes(t)}));s.length&&(t[r]=s)})),t},Io=(e,n)=>{const t={};return Object.entries(e).forEach((e=>{let[r,a]=e;const s=a.filter((e=>{let{nodeId:t}=e;return n.includes(t)}));s.length&&(t[r]=s)})),t},To=function(e){return{id:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DUMMY",args:{},sources:{},sinks:{},inlets:{},outlets:{}}},xo=(e,n)=>e.portletId===n.portletId&&e.nodeId===n.nodeId,Ao={Var:(e,n)=>"let ".concat(e.name).concat(n?" = ".concat(n):""),ConstVar:(e,n)=>"const ".concat(e.name," = ").concat(n),Func:(e,n,t)=>"function ".concat(null!==e.name?e.name:"","(").concat(e.args.map(((e,t)=>n[t]?"".concat(e.name,"=").concat(n[t]):e.name)).join(", "),") {").concat(t,"}"),Class:()=>""},Eo={Var:(e,n)=>"let ".concat(e.name,": ").concat(e.type).concat(n?" = ".concat(n):""),ConstVar:(e,n)=>"const ".concat(e.name,": ").concat(e.type," = ").concat(n),Func:(e,n,t)=>"function ".concat(null!==e.name?e.name:"","(").concat(e.args.map(((e,t)=>"".concat(e.name,": ").concat(e.type).concat(n[t]?"=".concat(n[t]):""))).join(", "),"): ").concat(e.returnType," {").concat(t,"}"),Class:e=>"class ".concat(e.name," {\n").concat(e.members.map((e=>"".concat(e.name,": ").concat(e.type))).join("\n"),"\n}")},Oo=(e,n)=>{const t=e[n];if(!t)throw new Error("node [".concat(n,"] is not implemented"));return{dependencies:[],...t}},Co=e=>{const n=Object.values(e).filter((e=>!!e.isPullingSignal)),t=Object.values(e).filter((e=>!!e.isPushingMessages));return Array.from(new Set([...So(e,t),...vo(e,n)]))},Mo=e=>vo(e,Fo(e)),Fo=e=>Object.values(e).filter((e=>!!e.isPullingSignal)),Po=e=>!("function"===typeof e),No=(e,n)=>ho(e.graph,n.traversal).reduce(((n,t)=>{if(!Do(e,t)||mo(e.graph,t,"signal").every((n=>Do(e,n))))return n;let r=!0;const a={outNodesIds:[t.id],traversal:vo(e.graph,[t],(n=>(r=r&&Do(e,n),r)))};return r?[...n,a]:n}),[]),Ro=(e,n)=>ho(e,n.outNodesIds).flatMap((e=>go(e,"signal"))),Lo=(e,n)=>e.filter((e=>!n.includes(e))),Do=(e,n)=>{let{precompiledCodeAssigner:t}=e;const r=t.nodes[n.id],a=t.nodeImplementations[r.nodeType];return!!a.nodeImplementation.flags&&!!a.nodeImplementation.flags.isPureFunction},zo=(e,n)=>{let{precompiledCodeAssigner:t}=e;const r=go(n,"signal").map((e=>{let[n,t]=e;return t})).reduce(((e,n)=>e.every((e=>!xo(e,n)))?[...e,n]:e),[]),a=t.nodes[n.id],s=t.nodeImplementations[a.nodeType];return!!s.nodeImplementation.flags&&!!s.nodeImplementation.flags.isDspInline&&1===r.length};var Uo,jo,Bo,Vo,Go,Wo,$o,Ho;var Ko=e=>{let{globs:n}=e;return to([Js("Int",n.iterFrame,"0"),Js("Int",n.frame,"0"),Js("Int",n.blockSize,"0"),Js("Float",n.sampleRate,"0"),Js("Float",n.nullSignal,"0"),Qs(n.nullMessageReceiver,[Js("Message","m")],"void")(Uo||(Uo=r([""]))),Js("Message",n.emptyMessage,"msg_create([])")])},qo=e=>{let{precompiledCode:n}=e;return n.dependencies.ast},Yo=e=>{let{settings:{arrays:n}}=e;return to(Object.entries(n).map((e=>{let[n,t]=e;return to(['commons_setArray("'.concat(n,'", createFloatArray(').concat(t.length,"))"),'commons_getArray("'.concat(n,'").set(').concat(JSON.stringify(Array.from(t)),")")])})))},Xo=e=>{let{precompiledCode:{nodeImplementations:n}}=e;return to(Object.values(n).map((e=>[e.stateClass,e.core])))},Jo=e=>{let{precompiledCode:{graph:n,nodes:t,nodeImplementations:a}}=e;return to([n.fullTraversal.reduce(((e,n)=>{const s=t[n],o=a[s.nodeType];if(s.state){if(!o.stateClass)throw new Error('Node "'.concat(n,'" of type ').concat(s.nodeType," has a state but no state class"));return[...e,Zs(o.stateClass.name,s.state.name,ro(jo||(jo=r(["{\n                                ","\n                            }"])),Object.entries(s.state.initialization).map((e=>{let[n,t]=e;return ro(Bo||(Bo=r(["",": ",","])),n,t)}))))]}return e}),[])])},Zo=e=>{let{precompiledCode:{graph:n,nodes:t}}=e;return to([n.fullTraversal.map((e=>t[e].initialization))])},Qo=e=>{let{precompiledCode:{io:n}}=e;return to(Object.values(n.messageReceivers).map((e=>Object.values(e).map((e=>Qs(e.functionName,[Js("Message","m")],"void")(Vo||(Vo=r(["\n                    ","(m)\n                "])),e.getSinkFunctionName()))))))},ei=(e,n)=>{let{precompiledCode:t}=e;return to(Object.entries(t.io.messageSenders).map((e=>{let[t,r]=e;return Object.entries(r).map((e=>{let[r,a]=e;return n(a.functionName,t,r)}))})))},ni=e=>{let{precompiledCode:{graph:n,nodes:t},settings:{debug:a}}=e;return to([n.fullTraversal.map((e=>[t[e],e])).map((e=>{let[n,t]=e;return[Object.values(n.signalOuts).map((e=>Js("Float",e,"0"))),Object.entries(n.messageReceivers).map((e=>{let[n,s]=e;return Qs(s.name,s.args,s.returnType)(Go||(Go=r(["\n                            ","\n                            throw new Error('Node \"",'", inlet "',"\", unsupported message : ' + msg_display(",")",")\n                        "])),s.body,t,n,s.args[0].name,a?" + '\\nDEBUG : remember, you must return from message receiver'":"")}))]})),n.fullTraversal.flatMap((e=>Object.values(t[e].messageSenders))).filter((e=>{let{sinkFunctionNames:n}=e;return n.length>0})).map((e=>{let{messageSenderName:n,sinkFunctionNames:t}=e;return Qs(n,[Js("Message","m")],"void")(Wo||(Wo=r(["\n                        ","\n                    "])),t.map((e=>"".concat(e,"(m)"))))}))])},ti=e=>{let{globs:n,precompiledCode:{nodes:t,graph:{hotDspGroup:a,coldDspGroups:s}}}=e;return ro($o||($o=r(["\n        for ("," = 0; "," < ","; ","++) {\n            _commons_emitFrame(",")\n            ","\n            ","++\n        }\n    "])),n.iterFrame,n.iterFrame,n.blockSize,n.iterFrame,n.frame,a.traversal.map((e=>[...Object.entries(t[e].dsp.inlets).filter((n=>{let[t]=n;return void 0===(r=s,a={nodeId:e,portletId:t},Object.values(r).find((e=>{let{sinkConnections:n}=e;return n.find((e=>{let[n,t]=e;return xo(t,a)}))})));var r,a})).map((e=>{let[n,t]=e;return t})),t[e].dsp.loop])),n.frame)},ri=e=>{let{globs:n,precompiledCode:{graph:t}}=e;return to(Object.values(t.coldDspGroups).map((e=>{let{functionName:t}=e;return"".concat(t,"(").concat(n.emptyMessage,")")})))},ai=e=>{let{precompiledCode:{graph:{coldDspGroups:n},nodes:t}}=e;return to(Object.values(n).map((e=>{let{dspGroup:n,sinkConnections:a,functionName:s}=e;return Qs(s,[Js("Message","m")],"void")(Ho||(Ho=r(["\n                    ","\n                    ","\n                "])),n.traversal.map((e=>t[e].dsp.loop)),a.filter((e=>{let[n,r]=e;return r.portletId in t[r.nodeId].dsp.inlets})).map((e=>{let[n,r]=e;return t[r.nodeId].dsp.inlets[r.portletId]})))})))},si=(e,n,t)=>{let{precompiledCode:{dependencies:r}}=e;return to([r.imports.map(n),r.exports.map(t)])};const oi=(e,n)=>{if("string"===typeof n)return n;if("Var"===n.astType)return n.value?e.Var(n,oi(e,n.value)):e.Var(n);if("ConstVar"===n.astType){if(!n.value)throw new Error("ConstVar ".concat(n.name," must have an initial value"));return e.ConstVar(n,oi(e,n.value))}if("Func"===n.astType)return e.Func(n,n.args.map((n=>n.value?oi(e,n.value):null)),oi(e,n.body));if("Class"===n.astType)return e.Class(n);if("Sequence"===n.astType)return n.content.map((n=>oi(e,n))).join("");throw new Error("Unexpected element in AST ".concat(n))};var ii,li,ui,ci,di,fi,pi,hi,mi,gi;const yi=(e,n,t)=>{const r=bi(t);return{keys:[...r.keys,n],parents:[...r.parents,e]}},bi=e=>e||{keys:[],parents:[]},vi=()=>{throw new Error("This Proxy is read-only.")},_i=(e,n,t)=>{if(!e.hasOwnProperty(n)){if(["toJSON","Symbol(Symbol.toStringTag)","constructor","$typeof","$$typeof","@@__IMMUTABLE_ITERABLE__@@","@@__IMMUTABLE_RECORD__@@"].includes(n))return!0;throw new Error("namespace".concat(t?" <".concat(t.keys.join("."),">"):""," doesn't know key \"").concat(String(n),'"'))}return!1},Si=(e,n,t,r)=>{const a=r||{keys:[],parents:[]},s=Si.ensureValue(n,e,t,a);if(r){const n=r.parents[r.parents.length-1],t=r.keys[r.keys.length-1];t in n&&!("LiteralDefaultNull"in e)||(n[t]=s)}return"Literal"in e||"LiteralDefaultNull"in e?s:new Proxy(s,{get:(n,r)=>{const o=String(r);let i;if("Index"in e)i=e.Index(o,t,a);else{if(!("Interface"in e))throw new Error("no builder");if(!(o in e.Interface))throw new Error('Interface has no entry "'.concat(String(o),'"'));i=e.Interface[o]}return Si(i,o in s?s[o]:void 0,t,yi(s,o,a))},set:vi})};Si.ensureValue=(e,n,t,r,a)=>{if("Index"in n)return e||n.indexConstructor(t,bi(r));if("Interface"in n){const s=e||{};return Object.entries(n.Interface).forEach((e=>{let[n,o]=e;s[n]=Si.ensureValue(s[n],o,t,yi(s,n,r),yi(s,n,a))})),s}if("Literal"in n)return e||n.Literal(t,bi(r));if("LiteralDefaultNull"in n)return a?e||null:e||n.LiteralDefaultNull(t,bi(r));throw new Error("Invalid Assigner")},Si.Interface=e=>({Interface:e}),Si.Index=(e,n)=>({Index:e,indexConstructor:n||(()=>({}))}),Si.Literal=e=>({Literal:e}),Si.LiteralDefaultNull=e=>({LiteralDefaultNull:e});const wi=(e,n)=>new Proxy(e,{get:(e,t)=>{const r=String(t);if(!_i(e,r,n))return e[r]},set:(e,n,t)=>{const r=Ii(String(n));if(e.hasOwnProperty(r))throw new Error('Key "'.concat(String(r),'" is protected and cannot be overwritten.'));return e[r]=t,t}}),ki=(e,n,t)=>new Proxy(e,{get:(e,r)=>{const a=Ii(String(r));if(!_i(e,a,{parents:[e],keys:[n,t]}))return e[a]},set:vi}),Ii=e=>{const n=/\$(.*)/.exec(e);return n?n[1]:e};var Ti,xi;const Ai=e=>{let{input:n,variableNamesIndex:t}=e;return Si(Ei,t,n)},Ei=Si.Interface({nodes:Si.Index((e=>Si.Interface({signalOuts:Si.Index((n=>Si.Literal((()=>Mi("N",e,"outs",n))))),messageSenders:Si.Index((n=>Si.Literal((()=>Mi("N",e,"snds",n))))),messageReceivers:Si.Index((n=>Si.Literal((()=>Mi("N",e,"rcvs",n))))),state:Si.LiteralDefaultNull((()=>Mi("N",e,"state")))}))),nodeImplementations:Si.Index(((e,n)=>{let{nodeImplementations:t}=n;const r=Oo(t,e),a=(r.flags?r.flags.alphaName:null)||e;return Si.Index((e=>Si.Literal((()=>Mi("NT",a,e)))))})),globs:Si.Literal((()=>({iterFrame:"F",frame:"FRAME",blockSize:"BLOCK_SIZE",sampleRate:"SAMPLE_RATE",output:"OUTPUT",input:"INPUT",nullMessageReceiver:"SND_TO_NULL",nullSignal:"NULL_SIGNAL",emptyMessage:"EMPTY_MESSAGE"}))),globalCode:Si.Index((e=>Si.Index((n=>Si.Literal((()=>Mi("G",e,n))))))),io:Si.Interface({messageReceivers:Si.Index((e=>Si.Index((n=>Si.Literal((()=>Mi("IORCV",e,n))))))),messageSenders:Si.Index((e=>Si.Index((n=>Si.Literal((()=>Mi("IOSND",e,n)))))))}),coldDspGroups:Si.Index((e=>Si.Literal((()=>Mi("COLD",e)))))}),Oi=e=>{let{input:n,precompiledCode:t}=e;return Si(Ci,t,n)},Ci=Si.Interface({graph:Si.Literal(((e,n)=>({fullTraversal:[],hotDspGroup:{traversal:[],outNodesIds:[]},coldDspGroups:wi({},n)}))),nodeImplementations:Si.Index(((e,n)=>{let{nodeImplementations:t}=n;return Si.Literal((()=>({nodeImplementation:Oo(t,e),stateClass:null,core:null})))}),((e,n)=>wi({},n))),nodes:Si.Index(((e,n)=>{let{graph:t}=n;return Si.Literal((()=>({nodeType:lo(t,e).type,messageReceivers:{},messageSenders:{},signalOuts:{},signalIns:{},initialization:ro(Ti||(Ti=r([""]))),dsp:{loop:ro(xi||(xi=r([""]))),inlets:{}},state:null})))}),((e,n)=>wi({},n))),dependencies:Si.Literal((()=>({imports:[],exports:[],ast:to([])}))),io:Si.Interface({messageReceivers:Si.Index((e=>Si.Literal(((e,n)=>wi({},n)))),((e,n)=>wi({},n))),messageSenders:Si.Index((e=>Si.Literal(((e,n)=>wi({},n)))),((e,n)=>wi({},n)))})}),Mi=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.map(Fi).join("_")},Fi=e=>{if(!Pi.exec(e))throw new Error('Invalid variable name for code generation "'.concat(e,'"'));return e},Pi=/^[a-zA-Z0-9_]+$/;var Ni,Ri,Li,Di,zi,Ui,ji,Bi;const Vi=e=>{let{settings:{target:n}}=e;const t=[];return"assemblyscript"===n&&t.push("\n            type SkedCallback = (event: SkedEvent) => void\n            type SkedId = Int\n            type SkedMode = Int\n            type SkedEvent = string\n        "),to([...t,Zs("SkedId","SKED_ID_NULL","-1"),Zs("SkedId","SKED_ID_COUNTER_INIT","1"),Zs("Int","_SKED_WAIT_IN_PROGRESS","0"),Zs("Int","_SKED_WAIT_OVER","1"),Zs("Int","_SKED_MODE_WAIT","0"),Zs("Int","_SKED_MODE_SUBSCRIBE","1"),no("SkedRequest",[Js("SkedId","id"),Js("SkedMode","mode"),Js("SkedCallback","callback")]),no("Skeduler",[Js("Map<SkedEvent, Array<SkedId>>","events"),Js("Map<SkedId, SkedRequest>","requests"),Js("boolean","isLoggingEvents"),Js("Set<SkedEvent>","eventLog"),Js("SkedId","idCounter")]),Qs("sked_create",[Js("boolean","isLoggingEvents")],"Skeduler")(Ni||(Ni=r(["\n            return {\n                eventLog: new Set(),\n                events: new Map(),\n                requests: new Map(),\n                idCounter: SKED_ID_COUNTER_INIT,\n                isLoggingEvents,\n            }\n        "]))),Qs("sked_wait",[Js("Skeduler","skeduler"),Js("SkedEvent","event"),Js("SkedCallback","callback")],"SkedId")(Ri||(Ri=r(['\n            if (skeduler.isLoggingEvents === false) {\n                throw new Error("Please activate skeduler\'s isLoggingEvents")\n            }\n\n            if (skeduler.eventLog.has(event)) {\n                callback(event)\n                return SKED_ID_NULL\n            } else {\n                return _sked_createRequest(skeduler, event, callback, _SKED_MODE_WAIT)\n            }\n        ']))),Qs("sked_wait_future",[Js("Skeduler","skeduler"),Js("SkedEvent","event"),Js("SkedCallback","callback")],"SkedId")(Li||(Li=r(["\n            return _sked_createRequest(skeduler, event, callback, _SKED_MODE_WAIT)\n        "]))),Qs("sked_subscribe",[Js("Skeduler","skeduler"),Js("SkedEvent","event"),Js("SkedCallback","callback")],"SkedId")(Di||(Di=r(["\n            return _sked_createRequest(skeduler, event, callback, _SKED_MODE_SUBSCRIBE)\n        "]))),Qs("sked_emit",[Js("Skeduler","skeduler"),Js("SkedEvent","event")],"void")(zi||(zi=r(["\n            if (skeduler.isLoggingEvents === true) {\n                skeduler.eventLog.add(event)\n            }\n            if (skeduler.events.has(event)) {\n                ","\n                ","\n                for (","; i < skedIds.length; i++) {\n                    if (skeduler.requests.has(skedIds[i])) {\n                        ","\n                        request.callback(event)\n                        if (request.mode === _SKED_MODE_WAIT) {\n                            skeduler.requests.delete(request.id)\n                        } else {\n                            skedIdsStaying.push(request.id)\n                        }\n                    }\n                }\n                skeduler.events.set(event, skedIdsStaying)\n            }\n        "])),Zs("Array<SkedId>","skedIds","skeduler.events.get(event)"),Zs("Array<SkedId>","skedIdsStaying","[]"),Js("Int","i","0"),Zs("SkedRequest","request","skeduler.requests.get(skedIds[i])")),Qs("sked_cancel",[Js("Skeduler","skeduler"),Js("SkedId","id")],"void")(Ui||(Ui=r(["\n            skeduler.requests.delete(id)\n        "]))),Qs("_sked_createRequest",[Js("Skeduler","skeduler"),Js("SkedEvent","event"),Js("SkedCallback","callback"),Js("SkedMode","mode")],"SkedId")(ji||(ji=r(["\n            ","\n            ","\n            skeduler.requests.set(id, request)\n            if (!skeduler.events.has(event)) {\n                skeduler.events.set(event, [id])    \n            } else {\n                skeduler.events.get(event).push(id)\n            }\n            return id\n        "])),Zs("SkedId","id","_sked_nextId(skeduler)"),Zs("SkedRequest","request","{\n                id, \n                mode, \n                callback,\n            }")),Qs("_sked_nextId",[Js("Skeduler","skeduler")],"SkedId")(Bi||(Bi=r(["\n            return skeduler.idCounter++\n        "])))])};var Gi,Wi,$i,Hi,Ki,qi,Yi,Xi;const Ji={codeGenerator:()=>to([Zs("Map<string, FloatArray>","_commons_ARRAYS","new Map()"),Zs("Skeduler","_commons_ARRAYS_SKEDULER","sked_create(false)"),Qs("commons_getArray",[Js("string","arrayName")],"FloatArray")(Gi||(Gi=r(["\n            if (!_commons_ARRAYS.has(arrayName)) {\n                throw new Error('Unknown array ' + arrayName)\n            }\n            return _commons_ARRAYS.get(arrayName)\n        "]))),Qs("commons_hasArray",[Js("string","arrayName")],"boolean")(Wi||(Wi=r(["\n            return _commons_ARRAYS.has(arrayName)\n        "]))),Qs("commons_setArray",[Js("string","arrayName"),Js("FloatArray","array")],"void")($i||($i=r(["\n            _commons_ARRAYS.set(arrayName, array)\n            sked_emit(_commons_ARRAYS_SKEDULER, arrayName)\n        "]))),Qs("commons_subscribeArrayChanges",[Js("string","arrayName"),Js("SkedCallback","callback")],"SkedId")(Hi||(Hi=r(["\n            const id = sked_subscribe(_commons_ARRAYS_SKEDULER, arrayName, callback)\n            if (_commons_ARRAYS.has(arrayName)) {\n                callback(arrayName)\n            }\n            return id\n        "]))),Qs("commons_cancelArrayChangesSubscription",[Js("SkedId","id")],"void")(Ki||(Ki=r(["\n            sked_cancel(_commons_ARRAYS_SKEDULER, id)\n        "])))]),exports:[{name:"commons_getArray"},{name:"commons_setArray"}]},Zi={codeGenerator:()=>to([Zs("Skeduler","_commons_FRAME_SKEDULER","sked_create(false)"),Qs("_commons_emitFrame",[Js("Int","frame")],"void")(qi||(qi=r(["\n            sked_emit(_commons_FRAME_SKEDULER, frame.toString())\n        "]))),Qs("commons_waitFrame",[Js("Int","frame"),Js("SkedCallback","callback")],"SkedId")(Yi||(Yi=r(["\n            return sked_wait_future(_commons_FRAME_SKEDULER, frame.toString(), callback)\n        "]))),Qs("commons_cancelWaitFrame",[Js("SkedId","id")],"void")(Xi||(Xi=r(["\n            sked_cancel(_commons_FRAME_SKEDULER, id)\n        "])))]),dependencies:[Vi]};var Qi,el,nl,tl,rl,al,sl,ol,il,ll,ul,cl,dl,fl;const pl={codeGenerator:e=>{let{settings:{target:n,audio:{bitDepth:t}}}=e;const a=32===t?"f32":"f64",s=32===t?"Float32Array":"Float64Array",o=32===t?"getFloat32":"getFloat64",i=32===t?"setFloat32":"setFloat64",l={toInt:Qs("toInt",[Js("Float","v")],"Int"),toFloat:Qs("toFloat",[Js("Int","v")],"Float"),createFloatArray:Qs("createFloatArray",[Js("Int","length")],"FloatArray"),setFloatDataView:Qs("setFloatDataView",[Js("DataView","dataView"),Js("Int","position"),Js("Float","value")],"void"),getFloatDataView:Qs("getFloatDataView",[Js("DataView","dataView"),Js("Int","position")],"Float")};if("assemblyscript"===n)return to(["\n                type FloatArray = ".concat(s,"\n                type Float = ").concat(a,"\n                type Int = ").concat("i32","\n                "),l.toInt(Qi||(Qi=r(["\n                    return ","(v)\n                "])),"i32"),l.toFloat(el||(el=r(["\n                    return ","(v)\n                "])),a),l.createFloatArray(nl||(nl=r(["\n                    return new ","(length)\n                "])),s),l.setFloatDataView(tl||(tl=r(["\n                    dataView.","(position, value)\n                "])),i),l.getFloatDataView(rl||(rl=r(["\n                    return dataView.","(position)\n                "])),o),Qs("x_core_createListOfArrays",[],"FloatArray[]")(al||(al=r(["\n                    const arrays: FloatArray[] = []\n                    return arrays\n                "]))),Qs("x_core_pushToListOfArrays",[Js("FloatArray[]","arrays"),Js("FloatArray","array")],"void")(sl||(sl=r(["\n                    arrays.push(array)\n                "]))),Qs("x_core_getListOfArraysLength",[Js("FloatArray[]","arrays")],"Int")(ol||(ol=r(["\n                    return arrays.length\n                "]))),Qs("x_core_getListOfArraysElem",[Js("FloatArray[]","arrays"),Js("Int","index")],"FloatArray")(il||(il=r(["\n                    return arrays[index]\n                "])))]);if("javascript"===n)return to(["\n                const i32 = (v) => v\n                const f32 = i32\n                const f64 = i32\n                ",l.toInt(ll||(ll=r(["\n                    return v\n                "]))),l.toFloat(ul||(ul=r(["\n                    return v\n                "]))),l.createFloatArray(cl||(cl=r(["\n                    return new ","(length)\n                "])),s),l.setFloatDataView(dl||(dl=r(["\n                    dataView.","(position, value)\n                "])),i),l.getFloatDataView(fl||(fl=r(["\n                    return dataView.","(position)\n                "])),o)]);throw new Error("Unexpected target: ".concat(n))},exports:[{name:"x_core_createListOfArrays",targets:["assemblyscript"]},{name:"x_core_pushToListOfArrays",targets:["assemblyscript"]},{name:"x_core_getListOfArraysLength",targets:["assemblyscript"]},{name:"x_core_getListOfArraysElem",targets:["assemblyscript"]},{name:"createFloatArray",targets:["assemblyscript"]}]};var hl,ml,gl,yl,bl,vl;const _l=()=>to([no("buf_SoundBuffer",[Js("FloatArray","data"),Js("Int","length"),Js("Int","writeCursor"),Js("Int","pullAvailableLength")]),Qs("buf_clear",[Js("buf_SoundBuffer","buffer")],"void")(hl||(hl=r(["\n        buffer.data.fill(0)\n    "]))),Qs("buf_create",[Js("Int","length")],"buf_SoundBuffer")(ml||(ml=r(["\n        return {\n            data: createFloatArray(length),\n            length: length,\n            writeCursor: 0,\n            pullAvailableLength: 0,\n        }\n    "])))]),Sl={codeGenerator:()=>to([Qs("buf_pushBlock",[Js("buf_SoundBuffer","buffer"),Js("FloatArray","block")],"Int")(gl||(gl=r(["\n            if (buffer.pullAvailableLength + block.length > buffer.length) {\n                throw new Error('buffer full')\n            }\n\n            ","\n            while (left > 0) {\n                ","\n                buffer.data.set(\n                    block.subarray(\n                        block.length - left, \n                        block.length - left + lengthToWrite\n                    ), \n                    buffer.writeCursor\n                )\n                left -= lengthToWrite\n                buffer.writeCursor = (buffer.writeCursor + lengthToWrite) % buffer.length\n                buffer.pullAvailableLength += lengthToWrite\n            }\n            return buffer.pullAvailableLength\n        "])),Js("Int","left","block.length"),Zs("Int","lengthToWrite","toInt(Math.min(\n                    toFloat(buffer.length - buffer.writeCursor), \n                    toFloat(left),\n                ))")),Qs("buf_pullSample",[Js("buf_SoundBuffer","buffer")],"Float")(yl||(yl=r(["\n            if (buffer.pullAvailableLength <= 0) {\n                return 0\n            }\n            ","\n            buffer.pullAvailableLength -= 1\n            return buffer.data[readCursor >= 0 ? readCursor : buffer.length + readCursor]\n        "])),Zs("Int","readCursor","buffer.writeCursor - buffer.pullAvailableLength"))]),dependencies:[_l]},wl={codeGenerator:()=>to([Qs("buf_writeSample",[Js("buf_SoundBuffer","buffer"),Js("Float","value")],"void")(bl||(bl=r(["\n            buffer.data[buffer.writeCursor] = value\n            buffer.writeCursor = (buffer.writeCursor + 1) % buffer.length\n        "]))),Qs("buf_readSample",[Js("buf_SoundBuffer","buffer"),Js("Int","offset")],"Float")(vl||(vl=r(["\n            // R = (buffer.writeCursor - 1 - offset) -> ideal read position\n            // W = R % buffer.length -> wrap it so that its within buffer length bounds (but could be negative)\n            // (W + buffer.length) % buffer.length -> if W negative, (W + buffer.length) shifts it back to positive.\n            return buffer.data[(buffer.length + ((buffer.writeCursor - 1 - offset) % buffer.length)) % buffer.length]\n        "])))]),dependencies:[_l]};var kl,Il,Tl,xl,Al,El,Ol,Cl,Ml,Fl,Pl,Nl,Rl,Ll,Dl,zl,Ul,jl,Bl,Vl,Gl,Wl,$l,Hl,Kl,ql,Yl,Xl,Jl,Zl,Ql,eu,nu,tu;const ru={codeGenerator:e=>{let{settings:{target:n}}=e;const t={msg_create:Qs("msg_create",[Js("MessageTemplate","template")],"Message"),msg_writeStringToken:Qs("msg_writeStringToken",[Js("Message","message"),Js("Int","tokenIndex"),Js("string","value")],"void"),msg_writeFloatToken:Qs("msg_writeFloatToken",[Js("Message","message"),Js("Int","tokenIndex"),Js("MessageFloatToken","value")],"void"),msg_readStringToken:Qs("msg_readStringToken",[Js("Message","message"),Js("Int","tokenIndex")],"string"),msg_readFloatToken:Qs("msg_readFloatToken",[Js("Message","message"),Js("Int","tokenIndex")],"MessageFloatToken"),msg_getLength:Qs("msg_getLength",[Js("Message","message")],"Int"),msg_getTokenType:Qs("msg_getTokenType",[Js("Message","message"),Js("Int","tokenIndex")],"Int"),msg_isStringToken:Qs("msg_isStringToken",[Js("Message","message"),Js("Int","tokenIndex")],"boolean"),msg_isFloatToken:Qs("msg_isFloatToken",[Js("Message","message"),Js("Int","tokenIndex")],"boolean"),msg_isMatching:Qs("msg_isMatching",[Js("Message","message"),Js("Array<MessageHeaderEntry>","tokenTypes")],"boolean"),msg_floats:Qs("msg_floats",[Js("Array<Float>","values")],"Message"),msg_strings:Qs("msg_strings",[Js("Array<string>","values")],"Message"),msg_display:Qs("msg_display",[Js("Message","message")],"string")};if("assemblyscript"===n)return to(["\n                type MessageFloatToken = Float\n                type MessageCharToken = Int\n\n                type MessageTemplate = Array<Int>\n                type MessageHeaderEntry = Int\n                type MessageHeader = Int32Array\n\n                type MessageHandler = (m: Message) => void\n                ",Zs("MessageHeaderEntry","MSG_FLOAT_TOKEN","0"),Zs("MessageHeaderEntry","MSG_STRING_TOKEN","1"),Qs("x_msg_create",[Js("Int32Array","templateTypedArray")],"Message")(kl||(kl=r(["\n                    const template: MessageTemplate = new Array<Int>(templateTypedArray.length)\n                    for (let i: Int = 0; i < templateTypedArray.length; i++) {\n                        template[i] = templateTypedArray[i]\n                    }\n                    return msg_create(template)\n                "]))),Qs("x_msg_getTokenTypes",[Js("Message","message")],"MessageHeader")(Il||(Il=r(["\n                    return message.tokenTypes\n                "]))),Qs("x_msg_createTemplate",[Js("i32","length")],"Int32Array")(Tl||(Tl=r(["\n                    return new Int32Array(length)\n                "]))),t.msg_create(xl||(xl=r(['\n                    let i: Int = 0\n                    let byteCount: Int = 0\n                    let tokenTypes: Array<MessageHeaderEntry> = []\n                    let tokenPositions: Array<MessageHeaderEntry> = []\n\n                    i = 0\n                    while (i < template.length) {\n                        switch(template[i]) {\n                            case MSG_FLOAT_TOKEN:\n                                byteCount += sizeof<MessageFloatToken>()\n                                tokenTypes.push(MSG_FLOAT_TOKEN)\n                                tokenPositions.push(byteCount)\n                                i += 1\n                                break\n                            case MSG_STRING_TOKEN:\n                                byteCount += sizeof<MessageCharToken>() * template[i + 1]\n                                tokenTypes.push(MSG_STRING_TOKEN)\n                                tokenPositions.push(byteCount)\n                                i += 2\n                                break\n                            default:\n                                throw new Error("unknown token type : " + template[i].toString())\n                        }\n                    }\n\n                    const tokenCount = tokenTypes.length\n                    const headerByteCount = _msg_computeHeaderLength(tokenCount) * sizeof<MessageHeaderEntry>()\n                    byteCount += headerByteCount\n\n                    const buffer = new ArrayBuffer(byteCount)\n                    const dataView = new DataView(buffer)\n                    let writePosition: Int = 0\n                    \n                    dataView.setInt32(writePosition, tokenCount)\n                    writePosition += sizeof<MessageHeaderEntry>()\n\n                    for (i = 0; i < tokenCount; i++) {\n                        dataView.setInt32(writePosition, tokenTypes[i])\n                        writePosition += sizeof<MessageHeaderEntry>()\n                    }\n\n                    dataView.setInt32(writePosition, headerByteCount)\n                    writePosition += sizeof<MessageHeaderEntry>()\n                    for (i = 0; i < tokenCount; i++) {\n                        dataView.setInt32(writePosition, headerByteCount + tokenPositions[i])\n                        writePosition += sizeof<MessageHeaderEntry>()\n                    }\n\n                    const header = _msg_unpackHeader(dataView, tokenCount)\n                    return {\n                        dataView,\n                        tokenCount,\n                        header,\n                        tokenTypes: _msg_unpackTokenTypes(header),\n                        tokenPositions: _msg_unpackTokenPositions(header),\n                    }\n                ']))),t.msg_writeStringToken(Al||(Al=r(["\n                    const startPosition = message.tokenPositions[tokenIndex]\n                    const endPosition = message.tokenPositions[tokenIndex + 1]\n                    const expectedStringLength: Int = (endPosition - startPosition) / sizeof<MessageCharToken>()\n                    if (value.length !== expectedStringLength) {\n                        throw new Error('Invalid string size, specified ' + expectedStringLength.toString() + ', received ' + value.length.toString())\n                    }\n\n                    for (let i = 0; i < value.length; i++) {\n                        message.dataView.setInt32(\n                            startPosition + i * sizeof<MessageCharToken>(), \n                            value.codePointAt(i)\n                        )\n                    }\n                "]))),t.msg_writeFloatToken(El||(El=r(["\n                    setFloatDataView(message.dataView, message.tokenPositions[tokenIndex], value)\n                "]))),t.msg_readStringToken(Ol||(Ol=r(["\n                    const startPosition = message.tokenPositions[tokenIndex]\n                    const endPosition = message.tokenPositions[tokenIndex + 1]\n                    const stringLength: Int = (endPosition - startPosition) / sizeof<MessageCharToken>()\n                    let value: string = ''\n                    for (let i = 0; i < stringLength; i++) {\n                        value += String.fromCodePoint(message.dataView.getInt32(startPosition + sizeof<MessageCharToken>() * i))\n                    }\n                    return value\n                "]))),t.msg_readFloatToken(Cl||(Cl=r(["\n                    return getFloatDataView(message.dataView, message.tokenPositions[tokenIndex])\n                "]))),t.msg_getLength(Ml||(Ml=r(["\n                    return message.tokenTypes.length\n                "]))),t.msg_getTokenType(Fl||(Fl=r(["\n                    return message.tokenTypes[tokenIndex]\n                "]))),t.msg_isStringToken(Pl||(Pl=r(["\n                    return msg_getTokenType(message, tokenIndex) === MSG_STRING_TOKEN\n                "]))),t.msg_isFloatToken(Nl||(Nl=r(["\n                    return msg_getTokenType(message, tokenIndex) === MSG_FLOAT_TOKEN\n                "]))),t.msg_isMatching(Rl||(Rl=r(["\n                    if (message.tokenTypes.length !== tokenTypes.length) {\n                        return false\n                    }\n                    for (let i: Int = 0; i < tokenTypes.length; i++) {\n                        if (message.tokenTypes[i] !== tokenTypes[i]) {\n                            return false\n                        }\n                    }\n                    return true\n                "]))),t.msg_floats(Ll||(Ll=r(["\n                    const message: Message = msg_create(values.map<MessageHeaderEntry>(v => MSG_FLOAT_TOKEN))\n                    for (let i: Int = 0; i < values.length; i++) {\n                        msg_writeFloatToken(message, i, values[i])\n                    }\n                    return message\n                "]))),t.msg_strings(Dl||(Dl=r(["\n                    const template: MessageTemplate = []\n                    for (let i: Int = 0; i < values.length; i++) {\n                        template.push(MSG_STRING_TOKEN)\n                        template.push(values[i].length)\n                    }\n                    const message: Message = msg_create(template)\n                    for (let i: Int = 0; i < values.length; i++) {\n                        msg_writeStringToken(message, i, values[i])\n                    }\n                    return message\n                "]))),t.msg_display(zl||(zl=r(["\n                    let displayArray: Array<string> = []\n                    for (let i: Int = 0; i < msg_getLength(message); i++) {\n                        if (msg_isFloatToken(message, i)) {\n                            displayArray.push(msg_readFloatToken(message, i).toString())\n                        } else {\n                            displayArray.push('\"' + msg_readStringToken(message, i) + '\"')\n                        }\n                    }\n                    return '[' + displayArray.join(', ') + ']'\n                "]))),no("Message",[Js("DataView","dataView"),Js("MessageHeader","header"),Js("MessageHeaderEntry","tokenCount"),Js("MessageHeader","tokenTypes"),Js("MessageHeader","tokenPositions")]),Qs("_msg_computeHeaderLength",[Js("Int","tokenCount")],"Int")(Ul||(Ul=r(["\n                    return 1 + tokenCount * 2 + 1\n                "]))),Qs("_msg_unpackTokenCount",[Js("DataView","messageDataView")],"MessageHeaderEntry")(jl||(jl=r(["\n                    return messageDataView.getInt32(0)\n                "]))),Qs("_msg_unpackHeader",[Js("DataView","messageDataView"),Js("MessageHeaderEntry","tokenCount")],"MessageHeader")(Bl||(Bl=r(["\n                    const headerLength = _msg_computeHeaderLength(tokenCount)\n                    // TODO : why is this `wrap` not working ?\n                    // return Int32Array.wrap(messageDataView.buffer, 0, headerLength)\n                    const messageHeader = new Int32Array(headerLength)\n                    for (let i = 0; i < headerLength; i++) {\n                        messageHeader[i] = messageDataView.getInt32(sizeof<MessageHeaderEntry>() * i)\n                    }\n                    return messageHeader\n                "],["\n                    const headerLength = _msg_computeHeaderLength(tokenCount)\n                    // TODO : why is this \\`wrap\\` not working ?\n                    // return Int32Array.wrap(messageDataView.buffer, 0, headerLength)\n                    const messageHeader = new Int32Array(headerLength)\n                    for (let i = 0; i < headerLength; i++) {\n                        messageHeader[i] = messageDataView.getInt32(sizeof<MessageHeaderEntry>() * i)\n                    }\n                    return messageHeader\n                "]))),Qs("_msg_unpackTokenTypes",[Js("MessageHeader","header")],"MessageHeader")(Vl||(Vl=r(["\n                    return header.slice(1, 1 + header[0])\n                "]))),Qs("_msg_unpackTokenPositions",[Js("MessageHeader","header")],"MessageHeader")(Gl||(Gl=r(["\n                    return header.slice(1 + header[0])\n                "])))]);if("javascript"===n)return to([Zs("string","MSG_FLOAT_TOKEN",'"number"'),Zs("string","MSG_STRING_TOKEN",'"string"'),t.msg_create(Wl||(Wl=r(["\n                    const m = []\n                    let i = 0\n                    while (i < template.length) {\n                        if (template[i] === MSG_STRING_TOKEN) {\n                            m.push('')\n                            i += 2\n                        } else if (template[i] === MSG_FLOAT_TOKEN) {\n                            m.push(0)\n                            i += 1\n                        }\n                    }\n                    return m\n                "]))),t.msg_getLength($l||($l=r(["\n                    return message.length\n                "]))),t.msg_getTokenType(Hl||(Hl=r(["\n                    return typeof message[tokenIndex]\n                "]))),t.msg_isStringToken(Kl||(Kl=r(["\n                    return msg_getTokenType(message, tokenIndex) === 'string'\n                "]))),t.msg_isFloatToken(ql||(ql=r(["\n                    return msg_getTokenType(message, tokenIndex) === 'number'\n                "]))),t.msg_isMatching(Yl||(Yl=r(["\n                    return (message.length === tokenTypes.length) \n                        && message.every((v, i) => msg_getTokenType(message, i) === tokenTypes[i])\n                "]))),t.msg_writeFloatToken(Xl||(Xl=r(["\n                    message[tokenIndex] = value\n                "]))),t.msg_writeStringToken(Jl||(Jl=r(["\n                    message[tokenIndex] = value\n                "]))),t.msg_readFloatToken(Zl||(Zl=r(["\n                    return message[tokenIndex]\n                "]))),t.msg_readStringToken(Ql||(Ql=r(["\n                    return message[tokenIndex]\n                "]))),t.msg_floats(eu||(eu=r(["\n                    return values\n                "]))),t.msg_strings(nu||(nu=r(["\n                    return values\n                "]))),t.msg_display(tu||(tu=r(["\n                    return '[' + message\n                        .map(t => typeof t === 'string' ? '\"' + t + '\"' : t.toString())\n                        .join(', ') + ']'\n                "])))]);throw new Error("Unexpected target: ".concat(n))},exports:[{name:"x_msg_create",targets:["assemblyscript"]},{name:"x_msg_getTokenTypes",targets:["assemblyscript"]},{name:"x_msg_createTemplate",targets:["assemblyscript"]},{name:"msg_writeStringToken",targets:["assemblyscript"]},{name:"msg_writeFloatToken",targets:["assemblyscript"]},{name:"msg_readStringToken",targets:["assemblyscript"]},{name:"msg_readFloatToken",targets:["assemblyscript"]},{name:"MSG_FLOAT_TOKEN",targets:["assemblyscript"]},{name:"MSG_STRING_TOKEN",targets:["assemblyscript"]}]};var au,su,ou,iu,lu,uu,cu,du,fu,pu,hu,mu,gu,yu,bu,vu,_u,Su,wu;const ku={codeGenerator:e=>{let{settings:{target:n}}=e;const t=[];return"assemblyscript"===n&&t.push("\n                type fs_OperationId = Int\n                type fs_OperationStatus = Int\n                type fs_OperationCallback = (id: fs_OperationId, status: fs_OperationStatus) => void\n                type fs_OperationSoundCallback = (id: fs_OperationId, status: fs_OperationStatus, sound: FloatArray[]) => void\n                type fs_Url = string\n            "),to([...t,Zs("Int","FS_OPERATION_SUCCESS",(0).toString()),Zs("Int","FS_OPERATION_FAILURE",1..toString()),Zs("Set<fs_OperationId>","_FS_OPERATIONS_IDS","new Set()"),Zs("Map<fs_OperationId, fs_OperationCallback>","_FS_OPERATIONS_CALLBACKS","new Map()"),Zs("Map<fs_OperationId, fs_OperationSoundCallback>","_FS_OPERATIONS_SOUND_CALLBACKS","new Map()"),Js("Int","_FS_OPERATION_COUNTER","1"),no("fs_SoundInfo",[Js("Int","channelCount"),Js("Int","sampleRate"),Js("Int","bitDepth"),Js("string","encodingFormat"),Js("string","endianness"),Js("string","extraOptions")]),Qs("fs_soundInfoToMessage",[Js("fs_SoundInfo","soundInfo")],"Message")(au||(au=r(["\n                ","\n                msg_writeFloatToken(info, 0, toFloat(soundInfo.channelCount))\n                msg_writeFloatToken(info, 1, toFloat(soundInfo.sampleRate))\n                msg_writeFloatToken(info, 2, toFloat(soundInfo.bitDepth))\n                msg_writeStringToken(info, 3, soundInfo.encodingFormat)\n                msg_writeStringToken(info, 4, soundInfo.endianness)\n                msg_writeStringToken(info, 5, soundInfo.extraOptions)\n                return info\n            "])),Zs("Message","info","msg_create([\n                    MSG_FLOAT_TOKEN,\n                    MSG_FLOAT_TOKEN,\n                    MSG_FLOAT_TOKEN,\n                    MSG_STRING_TOKEN,\n                    soundInfo.encodingFormat.length,\n                    MSG_STRING_TOKEN,\n                    soundInfo.endianness.length,\n                    MSG_STRING_TOKEN,\n                    soundInfo.extraOptions.length\n                ])")),Qs("_fs_assertOperationExists",[Js("fs_OperationId","id"),Js("string","operationName")],"void")(su||(su=r(["\n                if (!_FS_OPERATIONS_IDS.has(id)) {\n                    throw new Error(operationName + ' operation unknown : ' + id.toString())\n                }\n            "]))),Qs("_fs_createOperationId",[],"fs_OperationId")(ou||(ou=r(["\n                ","\n                _FS_OPERATIONS_IDS.add(id)\n                return id\n            "])),Zs("fs_OperationId","id","_FS_OPERATION_COUNTER++"))])},dependencies:[ru]},Iu={codeGenerator:()=>to([Qs("fs_readSoundFile",[Js("fs_Url","url"),Js("fs_SoundInfo","soundInfo"),Js("fs_OperationSoundCallback","callback")],"fs_OperationId")(iu||(iu=r(["\n            ","\n            _FS_OPERATIONS_SOUND_CALLBACKS.set(id, callback)\n            i_fs_readSoundFile(id, url, fs_soundInfoToMessage(soundInfo))\n            return id\n        "])),Zs("fs_OperationId","id","_fs_createOperationId()")),Qs("x_fs_onReadSoundFileResponse",[Js("fs_OperationId","id"),Js("fs_OperationStatus","status"),Js("FloatArray[]","sound")],"void")(lu||(lu=r(["\n            _fs_assertOperationExists(id, 'x_fs_onReadSoundFileResponse')\n            _FS_OPERATIONS_IDS.delete(id)\n            // Finish cleaning before calling the callback in case it would throw an error.\n            const callback = _FS_OPERATIONS_SOUND_CALLBACKS.get(id)\n            callback(id, status, sound)\n            _FS_OPERATIONS_SOUND_CALLBACKS.delete(id)\n        "])))]),exports:[{name:"x_fs_onReadSoundFileResponse"}],imports:[Qs("i_fs_readSoundFile",[Js("fs_OperationId","id"),Js("fs_Url","url"),Js("Message","info")],"void")(uu||(uu=r([""])))],dependencies:[ku]},Tu={codeGenerator:()=>to([Qs("fs_writeSoundFile",[Js("FloatArray[]","sound"),Js("fs_Url","url"),Js("fs_SoundInfo","soundInfo"),Js("fs_OperationCallback","callback")],"fs_OperationId")(cu||(cu=r(["\n            ","\n            _FS_OPERATIONS_CALLBACKS.set(id, callback)\n            i_fs_writeSoundFile(id, sound, url, fs_soundInfoToMessage(soundInfo))\n            return id\n        "])),Zs("fs_OperationId","id","_fs_createOperationId()")),Qs("x_fs_onWriteSoundFileResponse",[Js("fs_OperationId","id"),Js("fs_OperationStatus","status")],"void")(du||(du=r(["\n            _fs_assertOperationExists(id, 'x_fs_onWriteSoundFileResponse')\n            _FS_OPERATIONS_IDS.delete(id)\n            // Finish cleaning before calling the callback in case it would throw an error.\n            ","\n            callback(id, status)\n            _FS_OPERATIONS_CALLBACKS.delete(id)\n        "])),Zs("fs_OperationCallback","callback","_FS_OPERATIONS_CALLBACKS.get(id)"))]),exports:[{name:"x_fs_onWriteSoundFileResponse"}],imports:[Qs("i_fs_writeSoundFile",[Js("fs_OperationId","id"),Js("FloatArray[]","sound"),Js("fs_Url","url"),Js("Message","info")],"void")(fu||(fu=r([""])))],dependencies:[ku]},xu={codeGenerator:()=>to([Zs("Map<fs_OperationId, Array<buf_SoundBuffer>>","_FS_SOUND_STREAM_BUFFERS","new Map()"),Zs("Int","_FS_SOUND_BUFFER_LENGTH","20 * 44100"),Qs("fs_closeSoundStream",[Js("fs_OperationId","id"),Js("fs_OperationStatus","status")],"void")(pu||(pu=r(["\n            if (!_FS_OPERATIONS_IDS.has(id)) {\n                return\n            }\n            _FS_OPERATIONS_IDS.delete(id)\n            _FS_OPERATIONS_CALLBACKS.get(id)(id, status)\n            _FS_OPERATIONS_CALLBACKS.delete(id)\n            // Delete this last, to give the callback \n            // a chance to save a reference to the buffer\n            // If write stream, there won't be a buffer\n            if (_FS_SOUND_STREAM_BUFFERS.has(id)) {\n                _FS_SOUND_STREAM_BUFFERS.delete(id)\n            }\n            i_fs_closeSoundStream(id, status)\n        "]))),Qs("x_fs_onCloseSoundStream",[Js("fs_OperationId","id"),Js("fs_OperationStatus","status")],"void")(hu||(hu=r(["\n            fs_closeSoundStream(id, status)\n        "])))]),exports:[{name:"x_fs_onCloseSoundStream"}],imports:[Qs("i_fs_closeSoundStream",[Js("fs_OperationId","id"),Js("fs_OperationStatus","status")],"void")(mu||(mu=r([""])))],dependencies:[_l,ku]},Au={codeGenerator:()=>to([Qs("fs_openSoundReadStream",[Js("fs_Url","url"),Js("fs_SoundInfo","soundInfo"),Js("fs_OperationCallback","callback")],"fs_OperationId")(gu||(gu=r(["\n            ","\n            ","\n            for (","; channel < soundInfo.channelCount; channel++) {\n                buffers.push(buf_create(_FS_SOUND_BUFFER_LENGTH))\n            }\n            _FS_SOUND_STREAM_BUFFERS.set(id, buffers)\n            _FS_OPERATIONS_CALLBACKS.set(id, callback)\n            i_fs_openSoundReadStream(id, url, fs_soundInfoToMessage(soundInfo))\n            return id\n        "])),Zs("fs_OperationId","id","_fs_createOperationId()"),Zs("Array<buf_SoundBuffer>","buffers","[]"),Js("Int","channel","0")),Qs("x_fs_onSoundStreamData",[Js("fs_OperationId","id"),Js("FloatArray[]","block")],"Int")(yu||(yu=r(["\n            _fs_assertOperationExists(id, 'x_fs_onSoundStreamData')\n            const buffers = _FS_SOUND_STREAM_BUFFERS.get(id)\n            for (","; i < buffers.length; i++) {\n                buf_pushBlock(buffers[i], block[i])\n            }\n            return buffers[0].pullAvailableLength\n        "])),Js("Int","i","0"))]),exports:[{name:"x_fs_onSoundStreamData"}],imports:[Qs("i_fs_openSoundReadStream",[Js("fs_OperationId","id"),Js("fs_Url","url"),Js("Message","info")],"void")(bu||(bu=r([""])))],dependencies:[xu,Sl]},Eu={codeGenerator:()=>to([Qs("fs_openSoundWriteStream",[Js("fs_Url","url"),Js("fs_SoundInfo","soundInfo"),Js("fs_OperationCallback","callback")],"fs_OperationId")(vu||(vu=r(["\n            const id = _fs_createOperationId()\n            _FS_SOUND_STREAM_BUFFERS.set(id, [])\n            _FS_OPERATIONS_CALLBACKS.set(id, callback)\n            i_fs_openSoundWriteStream(id, url, fs_soundInfoToMessage(soundInfo))\n            return id\n        "]))),Qs("fs_sendSoundStreamData",[Js("fs_OperationId","id"),Js("FloatArray[]","block")],"void")(_u||(_u=r(["\n            _fs_assertOperationExists(id, 'fs_sendSoundStreamData')\n            i_fs_sendSoundStreamData(id, block)\n        "])))]),imports:[Qs("i_fs_openSoundWriteStream",[Js("fs_OperationId","id"),Js("fs_Url","url"),Js("Message","info")],"void")(Su||(Su=r([""]))),Qs("i_fs_sendSoundStreamData",[Js("fs_OperationId","id"),Js("FloatArray[]","block")],"void")(wu||(wu=r([""])))],dependencies:[xu]};const Ou=(e,n,t)=>{const r={settings:e,globs:t};return to(n.map((e=>Po(e)?e.codeGenerator(r):e(r))).reduce(((e,n)=>e.every((e=>!Ru(e,n)))?[...e,n]:e),[]))},Cu=()=>[pl,Zi,ru],Mu=(e,n)=>n.filter(Po).reduce(((n,t)=>t.exports?[...n,...t.exports.filter((t=>(!t.targets||t.targets.includes(e))&&n.every((e=>t.name!==e.name))))]:n),[]),Fu=e=>e.filter(Po).reduce(((e,n)=>n.imports?[...e,...n.imports.filter((n=>e.every((e=>n.name!==e.name))))]:e),[]),Pu=e=>e.flatMap((e=>Po(e)&&e.dependencies?[...Pu(e.dependencies),e]:[e])),Nu=e=>{let{graph:n,precompiledCodeAssigner:t}=e;return ho(n,t.graph.fullTraversal).reduce(((e,n)=>{const r=t.nodes[n.id];return[...e,...t.nodeImplementations[r.nodeType].nodeImplementation.dependencies||[]]}),[])},Ru=(e,n)=>JSON.stringify(e)===JSON.stringify(n),Lu=e=>"(".concat(e.args.map((e=>"".concat(e.name,": ").concat(e.type))).join(", "),") => ").concat(e.returnType),Du="State";var zu,Uu,ju;const Bu=eo([Js("Message","m")],"void")(zu||(zu=r([""]))),Vu=(e,n)=>{let{settings:t,variableNamesAssigner:r,precompiledCodeAssigner:a}=e;const s=a.nodes[n.id],o=a.nodeImplementations[s.nodeType],{state:i,snds:l,ns:u}=Gu(n.id,s,r),c=ki(o.nodeImplementation.messageReceivers?o.nodeImplementation.messageReceivers({globs:r.globs,ns:u,state:i,snds:l,node:n,settings:t}):{},n.id,"messageReceivers");Object.keys(s.messageReceivers).forEach((e=>{const t=c[e];((e,n)=>{if("object"!==typeof e||"Func"!==e.astType)throw new Error("Expected an ast Func, got : ".concat(e));if(e.args.length!==n.args.length||e.args.some(((e,t)=>{const r=n.args[t];return!r||e.type!==r.type}))||e.returnType!==n.returnType)throw new Error("Func should be have signature ".concat(Lu(n))+" got instead ".concat(Lu(e)))})(t,Bu);const a=s.messageReceivers[e];a.name=r.nodes[n.id].messageReceivers[e],a.args=t.args,a.body=t.body,a.returnType=t.returnType}))},Gu=(e,n,t)=>{return{ns:(r=t.nodeImplementations[n.nodeType],new Proxy(r,{get:(e,n)=>{const t=String(n);if(!_i(e,t,a))return e[t]},set:vi})),state:n.state?n.state.name:"",ins:ki(n.signalIns,e,"ins"),outs:ki(n.signalOuts,e,"outs"),snds:ki(Object.entries(n.messageSenders).reduce(((e,n)=>{let[t,{messageSenderName:r}]=n;return{...e,[t]:r}}),{}),e,"snds"),rcvs:ki(Object.entries(n.messageReceivers).reduce(((e,n)=>{let[t,r]=n;return{...e,[t]:r.name}}),{}),e,"rcvs")};var r,a},Wu=(e,n)=>{const t=lo(e,n.outNodesIds[0]);return Object.entries(t.sinks).find((e=>{let[n]=e;return"signal"===co(t,n).type}))[1][0]};var $u;const Hu=(e,n)=>{if(e[n.id])throw new Error('Node "'.concat(n.id,'" already exists'));return e[n.id]=n,e[n.id]},Ku=(e,n,t)=>{const r=lo(e,t.nodeId),a=lo(e,n.nodeId),s=po(r,t.portletId),o=fo(a,n.portletId),i=co(a,n.portletId),l=uo(r,t.portletId);if(!o.some((e=>xo(t,e)))){if(!i)throw new Error("Undefined outlet ".concat(n.nodeId,":").concat(n.portletId));if(!l)throw new Error("Undefined inlet ".concat(t.nodeId,":").concat(t.portletId));if(i.type!==l.type)throw new Error("Incompatible portlets types ".concat(n.nodeId," | ").concat(n.portletId," (").concat(i.type,") -> ").concat(t.nodeId," | ").concat(t.portletId," (").concat(l.type,")"));if("signal"===l.type&&s.length)throw new Error("Signal inlets can have only one connection");Yu(r.sources,t.portletId).push(n),Yu(a.sinks,n.portletId).push(t)}},qu=(e,n,t)=>{const r=lo(e,n),a=lo(e,t);Object.entries(a.sources).forEach((e=>{let[t,r]=e;return a.sources[t]=r.filter((e=>e.nodeId!==n))})),Object.entries(r.sinks).forEach((e=>{let[n,a]=e;return r.sinks[n]=a.filter((e=>e.nodeId!==t))}))},Yu=(e,n)=>e[n]=e[n]||[];var Xu;const Ju="_messageReceiver",Zu={},Qu="_messageSender",ec={messageReceivers:e=>{let{node:{args:n}}=e;return{0:eo([Js("Message","m")])(Xu||(Xu=r(["\n                ","(m)\n                return\n            "])),n.messageSenderName)}}},nc=(e,n,t,r)=>{const a="n_io".concat("messageReceiver"===n?"Rcv":"Snd","_").concat(t,"_").concat(r);if(e[a])throw new Error("Node id ".concat(a," already exists in graph"));return a};var tc=e=>{const n=rc(e);var t,a;(e=>{if(e[Ju])throw new Error("Reserved node type '".concat(Ju,"' already exists. Please use a different name."));if(e[Qu])throw new Error("Reserved node type '".concat(Qu,"' already exists. Please use a different name."));e[Ju]=Zu,e[Qu]=ec})(n.nodeImplementations),Object.entries(e.settings.io.messageReceivers).forEach((e=>{let[t,r]=e;r.portletIds.forEach((e=>{((e,n,t)=>{let{precompiledCode:r,graph:a,variableNamesAssigner:s,precompiledCodeAssigner:o}=e;const i=nc(a,"messageReceiver",n,t),l={...To(i,Ju),isPushingMessages:!0,outlets:{0:{id:"0",type:"message"}}};Hu(a,l),Ku(a,{nodeId:i,portletId:"0"},{nodeId:n,portletId:t}),o.io.messageReceivers[n][t]={functionName:s.io.messageReceivers[n][t],getSinkFunctionName:()=>r.nodes[i].messageSenders[0].messageSenderName}})(n,t,e)}))})),Object.entries(e.settings.io.messageSenders).forEach((e=>{let[t,r]=e;r.portletIds.forEach((e=>{((e,n,t)=>{let{graph:r,variableNamesAssigner:a,precompiledCodeAssigner:s}=e;const o=nc(r,"messageSender",n,t),i=a.io.messageSenders[n][t],l={...To(o,Qu),args:{messageSenderName:i},inlets:{0:{id:"0",type:"message"}}};Hu(r,l),Ku(r,{nodeId:n,portletId:t},{nodeId:o,portletId:"0"}),s.io.messageSenders[n][t]={functionName:i}})(n,t,e)}))})),n.graph=(t=n.graph,a=Co(n.graph),Ys(Object.values(t).filter((e=>a.includes(e.id))),(e=>[e.id,{...e,sources:Io(e.sources,a),sinks:ko(e.sinks,a)}]))),n.nodeImplementations=((e,n)=>Object.values(e).reduce(((e,t)=>t.type in e?e:{...e,[t.type]:Oo(n,t.type)}),{}))(n.graph,n.nodeImplementations),n.precompiledCode.graph.fullTraversal=Co(n.graph);const s=ho(n.graph,n.precompiledCode.graph.fullTraversal);Object.keys(n.nodeImplementations).forEach((e=>{((e,n)=>{let{graph:t,settings:r,variableNamesAssigner:a,precompiledCodeAssigner:s}=e;const o=s.nodeImplementations[n];if(o.nodeImplementation.state){const e=Object.values(t).find((e=>e.type===n));if(!e)throw new Error('No node of type "'.concat(n,'" exists in the graph.'));const s=a.nodeImplementations[n],i=o.nodeImplementation.state({globs:a.globs,node:e,settings:r,ns:s});o.stateClass={...i,members:i.members.map((e=>({...e,value:void 0})))}}})(n,e),((e,n)=>{let{settings:t,variableNamesAssigner:r,precompiledCodeAssigner:a}=e;const s=a.nodeImplementations[n],o=s.nodeImplementation;if(o.core){const e=r.nodeImplementations[n];s.core=o.core({settings:t,globs:r.globs,ns:e})}})(n,e)})),s.forEach((e=>{((e,n)=>{let{settings:t,variableNamesAssigner:r,precompiledCodeAssigner:a}=e;const s=a.nodes[n.id],o=a.nodeImplementations[s.nodeType];if(o.nodeImplementation.state){const e=n.type;if(!(Du in r.nodeImplementations[e]))throw new Error("No ".concat(Du," defined for ").concat(e));const a=r.nodeImplementations[e],i=o.nodeImplementation.state({globs:r.globs,ns:a,node:n,settings:t});s.state={name:r.nodes[n.id].state,initialization:i.members.reduce(((e,n)=>({...e,[n.name]:n.value})),{})}}})(n,e)}));const o={traversal:Mo(n.graph),outNodesIds:Fo(n.graph).map((e=>e.id))},i=((e,n)=>No(e,n).reduce(((e,n)=>{const t=e.find((e=>e.traversal.some((e=>n.traversal.includes(e)))));return t?[...e.filter((e=>e!==t)),{traversal:[...t.traversal,...n.traversal],outNodesIds:[...t.outNodesIds,...n.outNodesIds]}]:[...e,n]}),[]).map((n=>({traversal:vo(e.graph,ho(e.graph,n.outNodesIds)),outNodesIds:n.outNodesIds}))))(n,o),l=((e,n,t)=>{let{graph:r}=e;return{traversal:t.reduce(((e,n)=>Lo(e,n.traversal)),Mo(r)),outNodesIds:n.outNodesIds}})(n,o,i),u=[l,...i],c=u.flatMap((e=>{const t=((e,n)=>ho(e.graph,n.traversal).reduce(((t,r)=>{const a=mo(e.graph,r,"signal");return!zo(e,r)||n.outNodesIds.includes(r.id)||zo(e,a[0])&&!n.outNodesIds.includes(a[0].id)?t:[...t,{traversal:vo(e.graph,[r],(n=>zo(e,n))),outNodesIds:[r.id]}]}),[]))(n,e);return e.traversal=Lo(e.traversal,t.flatMap((e=>e.traversal))),t}));return n.precompiledCode.graph.hotDspGroup=l,i.forEach(((e,t)=>{((e,n,t)=>{let{graph:r,variableNamesAssigner:a,precompiledCodeAssigner:s}=e;s.graph.coldDspGroups[t]={functionName:a.coldDspGroups[t],dspGroup:n,sinkConnections:Ro(r,n)}})(n,e,"".concat(t))})),s.forEach((e=>{Object.values(e.inlets).forEach((t=>{"signal"===t.type?0===po(e,t.id).length&&((e,n,t)=>{let{variableNamesAssigner:r,precompiledCodeAssigner:a}=e;a.nodes[n.id].signalIns[t]=r.globs.nullSignal})(n,e,t.id):"message"===t.type&&((e,n,t)=>{let{variableNamesAssigner:a,precompiledCodeAssigner:s}=e;const o=s.nodes[n.id];if(po(n,t).length>=1){const e=a.nodes[n.id].messageReceivers[t];o.messageReceivers[t]=Qs(e,[Js("Message","m")],"void")($u||($u=r(['throw new Error("This placeholder should have been replaced during precompilation")'])))}})(n,e,t.id)}))})),s.forEach((e=>{Object.values(e.outlets).filter((e=>"message"===e.type)).forEach((t=>{((e,n,t)=>{let{variableNamesAssigner:r,precompiledCodeAssigner:a}=e;const s=fo(n,t),o=a.nodes[n.id],i=[...s.map((e=>{let{nodeId:n,portletId:t}=e;return r.nodes[n].messageReceivers[t]})),...s.reduce(((e,n)=>[...e,...Object.entries(a.graph.coldDspGroups).filter((e=>{let[t,{dspGroup:r}]=e;return((e,n)=>e.traversal.includes(n))(r,n.nodeId)})).map((e=>{let[n]=e;return n})).map((e=>r.coldDspGroups[e]))]),[])];o.messageSenders[t]=i.length>1?{messageSenderName:r.nodes[n.id].messageSenders[t],sinkFunctionNames:i}:1===i.length?{messageSenderName:i[0],sinkFunctionNames:[]}:{messageSenderName:r.globs.nullMessageReceiver,sinkFunctionNames:[]}})(n,e,t.id)}))})),u.forEach((e=>{ho(n.graph,e.traversal).forEach((e=>{Object.values(e.outlets).forEach((t=>{((e,n,t)=>{const{variableNamesAssigner:r,precompiledCodeAssigner:a}=e,s=fo(n,t),o=r.nodes[n.id].signalOuts[t];a.nodes[n.id].signalOuts[t]=o,s.forEach((e=>{let{portletId:n,nodeId:t}=e;a.nodes[t].signalIns[n]=o}))})(n,e,t.id)}))}))})),c.forEach((e=>{((e,n)=>{let{graph:t,settings:r,variableNamesAssigner:a,precompiledCodeAssigner:s}=e;const o=n.traversal.reduce(((e,o)=>{const i=s.nodes[o],l=s.nodeImplementations[i.nodeType],{ins:u,outs:c,snds:d,state:f,ns:p}=Gu(o,i,a),h=lo(t,o),m=Ys(Object.values(h.inlets).map((e=>[e,po(h,e.id)])).filter((e=>{let[t,r]=e;return"signal"===t.type&&r.length>0&&n.traversal.includes(r[0].nodeId)})),(n=>{let[t,r]=n;const a=r[0];if(!(a.nodeId in e))throw new Error("Unexpected error : inlining failed, missing inlined source ".concat(a.nodeId));return[t.id,e[a.nodeId]]}));if(!l.nodeImplementation.dsp)throw new Error("No dsp to generate for node ".concat(h.type,":").concat(h.id));const g=l.nodeImplementation.dsp({globs:a.globs,ns:p,state:f,ins:ki({...u,...m},o,"ins"),outs:c,snds:d,node:h,settings:r});if(!("astType"in g))throw new Error("Inlined dsp can only be an AstSequence");return{...e,[o]:"("+oi((y=r.target,{javascript:Ao,assemblyscript:Eo}[y]),g)+")"};var y}),{}),i=Wu(t,n);s.nodes[i.nodeId].signalIns[i.portletId]=o[n.outNodesIds[0]]})(n,e)})),u.forEach((e=>{ho(n.graph,e.traversal).forEach((e=>{((e,n)=>{let{settings:t,variableNamesAssigner:a,precompiledCodeAssigner:s}=e;const o=s.nodes[n.id],i=s.nodeImplementations[o.nodeType],{outs:l,ins:u,snds:c,state:d,ns:f}=Gu(n.id,o,a);if(!i.nodeImplementation.dsp)throw new Error("No dsp to generate for node ".concat(n.type,":").concat(n.id));const p=i.nodeImplementation.dsp({globs:a.globs,ns:f,node:n,state:d,ins:u,outs:l,snds:c,settings:t});if(i.nodeImplementation.flags&&i.nodeImplementation.flags.isDspInline){if("loop"in p)throw new Error("Invalid dsp definition for inlinable node ".concat(n.type,":").concat(n.id));const e=Object.keys(n.outlets)[0];o.dsp.loop=ro(ju||(ju=r([""," = ",""])),a.nodes[n.id].signalOuts[e],p)}else"loop"in p?(o.dsp.loop=p.loop,Object.entries(p.inlets).forEach((e=>{let[n,t]=e;o.dsp.inlets[n]=t}))):o.dsp.loop=p})(n,e)}))})),s.forEach((e=>{((e,n)=>{let{settings:t,variableNamesAssigner:a,precompiledCodeAssigner:s}=e;const o=s.nodes[n.id],i=s.nodeImplementations[o.nodeType],{state:l,snds:u,ns:c}=Gu(n.id,o,a);o.initialization=i.nodeImplementation.initialization?i.nodeImplementation.initialization({globs:a.globs,ns:c,state:l,snds:u,node:n,settings:t}):ro(Uu||(Uu=r([""])))})(n,e),Vu(n,e)})),(e=>{const{settings:n,variableNamesAssigner:t,precompiledCodeAssigner:r}=e,a=Pu([...Cu(),...Nu(e)]);r.dependencies.ast=Ou(n,a,t.globs),r.dependencies.exports=Mu(n.target,a),r.dependencies.imports=Fu(a)})(n),n};const rc=e=>{const n={graph:{...e.graph},nodeImplementations:{...e.nodeImplementations},settings:e.settings},t=(e=>Si.ensureValue({},Ci,e))(n),r=(e=>Si.ensureValue({},Ei,e))(n);return{...n,precompiledCode:t,variableNamesIndex:r,variableNamesAssigner:Ai({variableNamesIndex:r,input:n}),precompiledCodeAssigner:Oi({precompiledCode:t,input:n})}};class ac extends Error{}var sc=(e,n,t,a)=>{const s=((e,n)=>{const t=e.arrays||{},r={messageReceivers:(e.io||{}).messageReceivers||{},messageSenders:(e.io||{}).messageSenders||{}},a=e.debug||!1,s=e.audio||{channelCount:{in:2,out:2},bitDepth:64};if(![32,64].includes(s.bitDepth))throw new ac('"bitDepth" can be only 32 or 64');return{audio:s,arrays:t,io:r,debug:a,target:n}})(a,t),{precompiledCode:o,variableNamesIndex:i}=tc({graph:e,nodeImplementations:n,settings:s});let l;if("javascript"===t)l=(e=>{const{precompiledCode:n,settings:t,variableNamesIndex:a}=e,s=a.globs,o={settings:t,globs:s,precompiledCode:n},i=Ks(e);return oi(Ao,ro(ii||(ii=r(["\n        ","\n        ","\n\n        ","\n\n        ","\n\n        ","\n        ","\n\n        ","\n        ","\n        ","\n\n        const exports = {\n            metadata: ",",\n            initialize: (sampleRate, blockSize) => {\n                exports.metadata.audioSettings.sampleRate = sampleRate\n                exports.metadata.audioSettings.blockSize = blockSize\n                "," = sampleRate\n                "," = blockSize\n\n                ","\n                ","\n            },\n            dspLoop: (",", ",") => {\n                ","\n            },\n            io: {\n                messageReceivers: {\n                    ","\n                },\n                messageSenders: {\n                    ","\n                },\n            }\n        }\n\n        ","\n    "])),qo(o),Xo(o),Ko(o),Yo(o),Jo(o),ni(o),ai(o),Qo(o),ei(o,((e,n,t)=>ro(li||(li=r(["const "," = (m) => {exports.io.messageSenders['","']['","'].onMessage(m)}"])),e,n,t))),JSON.stringify(i),s.sampleRate,s.blockSize,Zo(o),ri(o),s.input,s.output,ti(o),Object.entries(n.io.messageReceivers).map((e=>{let[n,t]=e;return ro(ui||(ui=r(["",": {\n                            ","\n                        },"])),n,Object.entries(t).map((e=>{let[n,{functionName:t}]=e;return'"'.concat(n,'": ').concat(t,",")})))})),Object.entries(t.io.messageSenders).map((e=>{let[n,t]=e;return ro(ci||(ci=r(["",": {\n                            ","\n                        },"])),n,t.portletIds.map((e=>'"'.concat(e,'": {onMessage: () => undefined},'))))})),si(o,(e=>{let{name:n}=e;return ro(di||(di=r(["\n                exports."," = () => { throw new Error('import for "," not provided') }\n                const "," = (...args) => exports.","(...args)\n            "])),n,n,n,n)}),(e=>{let{name:n}=e;return ro(fi||(fi=r(["exports."," = ",""])),n,n)}))))})({precompiledCode:o,settings:s,variableNamesIndex:i});else{if("assemblyscript"!==t)throw new Error("Invalid target ".concat(t));l=(e=>{const{precompiledCode:n,settings:t,variableNamesIndex:a}=e,s={settings:t,globs:a.globs,precompiledCode:n},{channelCount:o}=t.audio,i=a.globs,l=Ks(e);return oi(Eo,ro(pi||(pi=r(["\n        const metadata: string = '","'\n\n        ","\n        ","\n\n        ","\n        let ",": FloatArray = createFloatArray(0)\n        let ",": FloatArray = createFloatArray(0)\n\n        ","\n\n        ","\n        ","\n\n        ","\n        ","\n        ","\n\n        export function initialize(sampleRate: Float, blockSize: Int): void {\n            "," = createFloatArray(blockSize * ",")\n            "," = createFloatArray(blockSize * ",")\n            "," = sampleRate\n            "," = blockSize\n\n            ","\n            ","\n        }\n\n        export function getInput(): FloatArray { return "," }\n\n        export function getOutput(): FloatArray { return "," }\n\n        export function dspLoop(): void {\n            ","\n        }\n\n        export {\n            metadata,\n            ","\n        }\n\n        ","\n    "])),JSON.stringify(l),qo(s),Xo(s),Ko(s),i.input,i.output,Yo(s),Jo(s),ni(s),ai(s),Qo(s),ei(s,(e=>ro(hi||(hi=r(["export declare function ","(m: Message): void"])),e))),i.input,o.in.toString(),i.output,o.out.toString(),i.sampleRate,i.blockSize,Zo(s),ri(s),i.input,i.output,ti(s),Object.values(n.io.messageReceivers).map((e=>Object.values(e).map((e=>{let{functionName:n}=e;return n+","})))),si(s,(e=>{let{name:n,args:t,returnType:a}=e;return ro(mi||(mi=r(["export declare function "," (","): ",""])),n,t.map((e=>"".concat(e.name,": ").concat(e.type))).join(","),a)}),(e=>{let{name:n}=e;return ro(gi||(gi=r(["export { "," }"])),n)}))))})({precompiledCode:o,settings:s,variableNamesIndex:i})}return{status:0,code:l}};const oc="webpd-runtime.js";const ic=e=>{const n=e.patches[e.rootPatchId];return{controls:lc(e,n),comments:Object.values(e.patches[e.rootPatchId].nodes).filter((e=>"text"===e.type)).map((e=>({type:"comment",patch:n,node:e,text:e.args[0].toString()})))}},lc=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===t&&(t={topLeft:{x:-1/0,y:-1/0},bottomRight:{x:1/0,y:1/0}});const r=[];return Object.values(n.nodes).forEach((a=>{if("pd"===a.type&&"subpatch"===a.nodeClass){const s=e.patches[a.patchId],o=hc(a.layout);if(!s.layout.graphOnParent)return;const i=mc(s.layout),l=cc({x:o.x,y:o.y},{x:i.viewportX,y:i.viewportY}),u={topLeft:l(t.topLeft),bottomRight:l(t.bottomRight)},c={x:i.viewportX,y:i.viewportY},d={topLeft:c,bottomRight:dc(c,{x:i.viewportWidth,y:i.viewportHeight})},f=fc(u,d);if(null===f)return;const p=lc(e,s,f),h={type:"container",patch:n,node:a,children:p};r.push(h)}else if(a.type in Ms&&"control"===a.nodeClass){const e=hc(a.layout);if(!pc({x:e.x,y:e.y},t))return;const s={type:"control",patch:n,node:a};r.push(s)}})),r},uc=(e,n)=>{e.forEach((e=>{"container"===e.type?uc(e.children,n):"control"===e.type&&n(e)}))},cc=(e,n)=>{const t=n.x-e.x,r=n.y-e.y;return e=>({x:e.x+t,y:e.y+r})},dc=(e,n)=>({x:e.x+n.x,y:e.y+n.y}),fc=(e,n)=>{const t={x:Math.max(e.topLeft.x,n.topLeft.x),y:Math.max(e.topLeft.y,n.topLeft.y)},r={x:Math.min(e.bottomRight.x,n.bottomRight.x),y:Math.min(e.bottomRight.y,n.bottomRight.y)};return r.x<=t.x||r.y<=t.y?null:{topLeft:t,bottomRight:r}},pc=(e,n)=>n.topLeft.x<=e.x&&e.x<=n.bottomRight.x&&n.topLeft.y<=e.y&&e.y<=n.bottomRight.y,hc=e=>{if(!e)throw new Error("Missing node layout");const n=e.x,t=e.y;if("number"!==typeof n||"number"!==typeof t)throw new Error("Missing node layout attributes");return{x:n,y:t}},mc=e=>{if(!e)throw new Error("Missing patch layout");const n=e.viewportX,t=e.viewportY,r=e.viewportWidth,a=e.viewportHeight;if("number"!==typeof n||"number"!==typeof t||"number"!==typeof r||"number"!==typeof a)throw new Error("Missing patch layout attributes");return{viewportX:n,viewportY:t,viewportWidth:r,viewportHeight:a}},gc=/\$(\d+)/,yc=(e,n)=>{const t=e.patches[n];if(!t)throw new Error("Patch ".concat(n," not found"));return t},bc=(e,n)=>{const t=e.nodes[n];if(!t)throw new Error("Pd node ".concat(n," not found in patch ").concat(e.id));return t},vc=(e,n)=>{const t=e[n];return t?t.aliasTo?vc(e,t.aliasTo):{nodeBuilder:t,nodeType:n}:null},_c=(e,n)=>{const t=parseInt(n.id);if(isNaN(t))throw new Error("Invalid patch id");const r=[t,...n.args],a=new RegExp(gc,"g");let s;for(;s=a.exec(e);){const n=parseInt(s[1],10),t=0<=n&&n<r.length;if(s[0]===e)return t?r[n]:void 0;t&&(e=e.replace(s[0],r[n].toString()))}return e},Sc=(e,n)=>{const t=_c(n[0],e),r="string"===typeof n[1]?_c(n[1],e):n[1];return[(void 0===t?"":t).toString(),void 0===r?0:r,n[2]]},wc=(e,n)=>n.map((n=>"string"===typeof n?_c(n,e):n));const kc=async(e,n,t,r)=>{const{pd:a,abstractionLoader:s,errors:o,warnings:i}=e;t.nodes={...t.nodes};for(let l of Object.values(t.nodes)){if(o.hasOwnProperty(l.type))continue;if("subpatch"===l.nodeClass){l=t.nodes[l.id]={...l,patchId:xc(r.patches,l.patchId)},await kc(e,n,yc(a,l.patchId),r);continue}if("array"===l.nodeClass){l=t.nodes[l.id]={...l,arrayId:xc(r.arrays,l.arrayId)};continue}if(null!==vc(e.nodeBuilders,l.type))continue;const u=await Tc(e,l.type,s);if(u.parsingWarnings&&(i[l.type]=u.parsingWarnings),1===u.status){const{status:e,parsingWarnings:n,...t}=u;o[l.type]=t;continue}const[c,d]=Ac(a,u.pd),f=Ic(d);l=t.nodes[l.id]={...l,args:wc(n,l.args),nodeClass:"subpatch",patchId:f.id,type:"pd"},f.args=l.args,Object.values(d.arrays).forEach((e=>e.args=Sc(f,e.args))),a.patches={...a.patches,...d.patches},a.arrays={...a.arrays,...d.arrays},await kc(e,f,f,c)}},Ic=e=>{const n=e.patches[e.rootPatchId];if(!n)throw new Error("Could not resolve root patch");return n},Tc=async(e,n,t)=>{if(!e.abstractions[n]){const r=await t(n);return 0===r.status&&(e.abstractions[n]=r.pd),r}return{status:0,pd:e.abstractions[n]}},xc=(e,n)=>{const t=e.get(n);if(void 0===t)throw new Error("Could not resolve ".concat(n));return t},Ac=(e,n)=>{const t={patches:{},arrays:{},rootPatchId:n.rootPatchId},r={patches:new Map,arrays:new Map};let a=Object.keys(e.patches);a=a.length?a:["-1"];let s=Object.keys(e.arrays);s=s.length?s:["-1"];let o=Math.max(...a.map((e=>parseInt(e))))+1,i=Math.max(...s.map((e=>parseInt(e))))+1;return Object.entries(n.patches).forEach((e=>{let[n,a]=e;const s="".concat(o++);r.patches.set(n,s),t.patches[s]={...a,id:s}})),Object.entries(n.arrays).forEach((e=>{let[n,a]=e;const s="".concat(i++);r.arrays.set(n,s),t.arrays[s]={...a,id:s}})),t.rootPatchId=xc(r.patches,t.rootPatchId),[r,t]},Ec={translateArgs:()=>({}),build:()=>({inlets:{},outlets:{}})},Oc={pd:Ec,inlet:Ec,outlet:Ec,"inlet~":Ec,"outlet~":Ec},Cc=e=>{if("number"!==typeof e)throw new Nc("".concat(e," is not a number"));return e},Mc=e=>{if("string"!==typeof e)throw new Nc("".concat(e," is not a string"));return e},Fc=e=>void 0!==e?Cc(e):void 0,Pc=e=>void 0!==e?Mc(e):void 0;class Nc extends Error{}var Rc;const Lc={translateArgs:e=>({channelCount:Cc(e.args[0])}),build:e=>({inlets:Ys(qs(e.channelCount),(e=>["".concat(e),{type:"signal",id:"".concat(e)}])),outlets:{0:{type:"signal",id:"0"}}})},Dc={flags:{isPureFunction:!0,isDspInline:!0,alphaName:"_mixer_t"},dsp:e=>{let{node:n,ins:t}=e;return ro(Rc||(Rc=r(["",""])),Object.keys(n.inlets).map((e=>t[e])).join(" + "))}};var zc,Uc,jc;const Bc=e=>eo([Js("Message","m")])(zc||(zc=r(["\n        if (msg_isMatching(m, [MSG_FLOAT_TOKEN])) {\n            "," = msg_readFloatToken(m, 0)\n            return\n        }\n    "])),e),Vc=(e,n)=>eo([Js("Message","m")])(jc||(jc=r(["\n        if (msg_isMatching(m, [MSG_FLOAT_TOKEN])) {\n            ","(",", msg_readFloatToken(m, 0))\n            return\n        }\n    "])),e,n);var Gc;const Wc={translateArgs:e=>{let{args:n}=e;return{initValue:Fc(n[0])||0}},build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"signal",id:"0"}}})},$c={flags:{isPureFunction:!0,isDspInline:!0,alphaName:"sig_t"},state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("Float","currentValue",n.initValue)])},dsp:e=>{let{state:n}=e;return ro(Gc||(Gc=r(["",".currentValue"])),n)},messageReceivers:e=>{let{state:n}=e;return{0:Bc("".concat(n,".currentValue"))}}};var Hc;const Kc={translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}}})},qc={messageReceivers:e=>{let{snds:n}=e;return{0:eo([Js("Message","m")])(Hc||(Hc=r(["\n            if (msg_isMatching(m, [MSG_FLOAT_TOKEN])) {\n                ","(m)\n                return\n            } else {\n                ","(m)\n                return\n            }\n        "])),n.$0,n.$1)}}},Yc="_mixer~",Xc="_routemsg",Jc="sig~";var Zc;!function(e){e.PD="n",e.IMPLICIT_NODE="m"}(Zc||(Zc={}));const Qc=(e,n)=>"".concat(Zc.PD,"_").concat(e,"_").concat(n),ed=e=>e.toString(10),nd=(e,n)=>(n=n.replaceAll(/[^a-zA-Z0-9_]/g,""),"".concat(Zc.IMPLICIT_NODE,"_").concat(e.nodeId,"_").concat(e.portletId,"_").concat(n));var td=async function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:async e=>({status:1,unknownNodeType:e});const r=await(async(e,n,t)=>{const[r,a]=Ac({patches:{},arrays:{},rootPatchId:e.rootPatchId},e),s={pd:a,nodeBuilders:n,abstractions:{},errors:{},warnings:{},abstractionLoader:t},o=Ic(s.pd);return Object.values(s.pd.arrays).forEach((e=>e.args=Sc(o,e.args))),await kc(s,o,o,r),Object.keys(s.errors).length?{status:1,pd:s.pd,errors:s.errors,warnings:s.warnings}:{status:0,pd:s.pd,abstractions:s.abstractions,warnings:s.warnings}})(e,n,t),a=Object.keys(r.warnings);if(1===r.status)return{status:1,abstractionsLoadingErrors:r.errors,abstractionsLoadingWarnings:a?r.warnings:void 0};const{pd:s}=r,o={pd:s,nodeBuilders:n,graph:{}},i=gd(s);fd(o,[i],rd),sd(o,[i]),Object.values(o.graph).forEach((e=>{Object.keys(Oc).includes(e.type)&&((e,n)=>{const t=e[n];t&&(Object.values(t.sources).forEach((t=>t.slice(0).forEach((t=>qu(e,t.nodeId,n))))),Object.values(t.sinks).forEach((t=>t.slice(0).forEach((t=>qu(e,n,t.nodeId))))),delete e[n])})(o.graph,e.id)}));const l=Object.values(o.pd.arrays).reduce(((e,n)=>(e[n.args[0]]=n.data?new Float32Array(n.data):new Float32Array(n.args[1]),e)),{});return{status:0,graph:o.graph,pd:o.pd,arrays:l,abstractionsLoadingWarnings:a?r.warnings:void 0}};const rd=(e,n)=>{const t=pd(n),r=md(n);Object.values(t.nodes).forEach((n=>{const a=Qc(t.id,n.id);ad(e,r,t,n,a)}))},ad=(e,n,t,r,a)=>{const s=vc(e.nodeBuilders,r.type);if(null===s)throw new Error("unknown node type ".concat(r.type));const{nodeBuilder:o,nodeType:i}=s;if(!0===o.isNoop)return null;o.skipDollarArgsResolution||(r={...r,args:wc(n,r.args)});const l=o.translateArgs(r,t,e.pd),u=o.build(l);return Hu(e.graph,{...To(a,i),args:l,...u})},sd=(e,n)=>{const{graph:t}=e;let r=[];fd(e,n,((e,n)=>{ud(e,n,r)}));const a=ld(e,r);Object.values(t).forEach((n=>{Object.values(n.inlets).forEach((r=>{const s={nodeId:n.id,portletId:r.id},o=(a[n.id]?a[n.id][r.id]:void 0)||{signalSources:[],messageSources:[]};if("signal"===r.type){const{nodeBuilder:r}=vc(e.nodeBuilders,n.type),a=r.configureMessageToSignalConnection?r.configureMessageToSignalConnection(s.portletId,n.args):void 0;id(t,o.signalSources,o.messageSources,s,a)}else{if(0!==o.signalSources.length)throw new Error("Unexpected signal connection to node id ".concat(s.nodeId,", inlet ").concat(s.portletId));od(t,o.messageSources,s)}}))}))},od=(e,n,t)=>n.forEach((n=>{Ku(e,n,t)})),id=(e,n,t,r,a)=>{let s=null;if(1===n.length)Ku(e,n[0],r);else if(n.length>1){const t={channelCount:n.length},a=Hu(e,{...To(nd(r,Yc),Yc),args:t,...Lc.build(t)});Ku(e,{nodeId:a.id,portletId:"0"},r),n.forEach(((n,t)=>{Ku(e,n,{nodeId:a.id,portletId:ed(t)})}))}else{const n={initValue:a?a.initialSignalValue:0};s=Hu(e,{...To(nd(r,Jc),Jc),args:n,...Wc.build(n)}),Ku(e,{nodeId:s.id,portletId:"0"},r)}if(t.length){const n={},o=Hu(e,{...To(nd(r,Xc),Xc),args:n,...Kc.build(n)});let i=!1;s&&(Ku(e,{nodeId:o.id,portletId:"0"},{nodeId:s.id,portletId:"0"}),i=!0),a&&void 0!==a.reroutedMessageInletId&&(Ku(e,{nodeId:o.id,portletId:"1"},{nodeId:r.nodeId,portletId:a.reroutedMessageInletId}),i=!0),i&&t.forEach((n=>{Ku(e,n,{nodeId:o.id,portletId:"0"})}))}},ld=(e,n)=>{const{graph:t}=e,r={};return n.forEach((e=>{const[a,s]=e,[o,i]=s,l=Qc(pd(o).id,i.nodeId);r[l]=r[l]||{};const u=ed(i.portletId);if(r[l][u])return;let c=[];n.forEach((e=>{const[n,t]=e;_d(s,t)&&c.push(n)}));const d=[],f=[];c.forEach((e=>{let[n,r]=e;const a=pd(n),s={nodeId:Qc(a.id,r.nodeId),portletId:ed(r.portletId)},o=lo(t,s.nodeId);"signal"===co(o,s.portletId).type?d.push(s):f.push(s)})),r[l][u]={signalSources:d,messageSources:f}})),r},ud=(e,n,t)=>{const{graph:r}=e,a=pd(n);a.connections.filter((e=>{let{source:n,sink:t}=e;const s=Qc(a.id,n.nodeId),o=Qc(a.id,t.nodeId);return!(!r[s]||!r[o])})).forEach((r=>{let{source:a,sink:s}=r;const o=cd(e,[n,a]),i=dd(e,n,s);o.forEach((e=>i.forEach((n=>{t.some((t=>{let[r,a]=t;return _d(e,r)&&_d(n,a)}))||t.push([e,n])}))))}))},cd=(e,n)=>{let[t,r]=n;const{pd:a}=e,s=pd(t),o=bc(s,r.nodeId);if("inlet"===o.type||"inlet~"===o.type){const n=hd(t);if(!n)return[];const r=vd(n,s.id),a=bd(s.inlets,o.id);return n.connections.filter((e=>{let{sink:n}=e;return n.nodeId===r.id&&n.portletId===a})).flatMap((n=>{let{source:r}=n;return cd(e,[[...t.slice(0,-1)],r])}))}if("subpatch"===o.nodeClass){const n=yc(a,o.patchId),s=yd(n.outlets,r.portletId);return n.connections.filter((e=>{let{sink:n}=e;return n.nodeId===s&&0===n.portletId})).flatMap((r=>{let{source:a}=r;return cd(e,[[...t,n],a])}))}return[[t,r]]},dd=(e,n,t)=>{const{pd:r}=e,a=pd(n),s=bc(a,t.nodeId);if("outlet"===s.type||"outlet~"===s.type){const t=hd(n);if(!t)return[];const r=vd(t,a.id),o=bd(a.outlets,s.id);return t.connections.filter((e=>{let{source:n}=e;return n.nodeId===r.id&&n.portletId===o})).flatMap((t=>{let{sink:r}=t;return dd(e,[...n.slice(0,-1)],r)}))}if("subpatch"===s.nodeClass){const a=yc(r,s.patchId),o=yd(a.inlets,t.portletId);return a.connections.filter((e=>{let{source:n}=e;return n.nodeId===o&&0===n.portletId})).flatMap((t=>{let{sink:r}=t;return dd(e,[...n,a],r)}))}return[[n,t]]},fd=(e,n,t)=>{const r=pd(n);t(e,n),Object.values(r.nodes).forEach((r=>{if("subpatch"===r.nodeClass){const a=yc(e.pd,r.patchId);fd(e,[...n,a],t)}}))},pd=e=>{const n=e.slice(-1)[0];if(!n)throw new Error("patchPath empty !");return n},hd=e=>e.length<2?null:e.slice(-2)[0],md=e=>{const n=e.slice(0).reverse().find((e=>e.isRoot));if(!n)throw new Error("Could not resolve root patch from path");return n},gd=e=>{const n=e.patches[e.rootPatchId];if(!n)throw new Error("Could not resolve root patch");return n},yd=(e,n)=>{const t=e[n];if(void 0===t)throw new Error("Portlet ".concat(n," is undefined in patch.outlets/patch.inlets"));return t},bd=(e,n)=>e.findIndex((e=>e===n)),vd=(e,n)=>{const t=Object.values(e.nodes).find((e=>"subpatch"===e.nodeClass&&e.patchId===n));if(void 0===t)throw new Error("could not find subpatch node with patchId=".concat(n," inside patch ").concat(e.id));return t},_d=(e,n)=>{let[t,r]=e,[a,s]=n;return pd(t).id===pd(a).id&&r.nodeId===s.nodeId&&r.portletId===s.portletId};var Sd,wd,kd;const Id="empty",Td=()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0}),xd=e=>to([Qs(e.setReceiveBusName,[Js(e.State,"state"),Js("string","busName")],"void")(Sd||(Sd=r(['\n            if (state.receiveBusName !== "','") {\n                msgBusUnsubscribe(state.receiveBusName, state.messageReceiver)\n            }\n            state.receiveBusName = busName\n            if (state.receiveBusName !== "','") {\n                msgBusSubscribe(state.receiveBusName, state.messageReceiver)\n            }\n        '])),Id,Id),Qs(e.setSendReceiveFromMessage,[Js(e.State,"state"),Js("Message","m")],"boolean")(wd||(wd=r(["\n            if (\n                msg_isMatching(m, [MSG_STRING_TOKEN, MSG_STRING_TOKEN])\n                && msg_readStringToken(m, 0) === 'receive'\n            ) {\n                ","(state, msg_readStringToken(m, 1))\n                return true\n\n            } else if (\n                msg_isMatching(m, [MSG_STRING_TOKEN, MSG_STRING_TOKEN])\n                && msg_readStringToken(m, 0) === 'send'\n            ) {\n                state.sendBusName = msg_readStringToken(m, 1)\n                return true\n            }\n            return false\n        "])),e.setReceiveBusName),Qs(e.defaultMessageHandler,[Js("Message","m")],"void")(kd||(kd=r([""])))]);var Ad,Ed,Od,Cd,Md,Fd,Pd;const Nd=()=>to([Zs("Map<string, Float>","SIGNAL_BUSES","new Map()"),"SIGNAL_BUSES.set('', 0)",Qs("addAssignSignalBus",[Js("string","busName"),Js("Float","value")],"Float")(Ad||(Ad=r(["\n            ","\n            SIGNAL_BUSES.set(\n                busName,\n                newValue,\n            )\n            return newValue\n        "])),Zs("Float","newValue","SIGNAL_BUSES.get(busName) + value")),Qs("setSignalBus",[Js("string","busName"),Js("Float","value")],"void")(Ed||(Ed=r(["\n            SIGNAL_BUSES.set(\n                busName,\n                value,\n            )\n        "]))),Qs("resetSignalBus",[Js("string","busName")],"void")(Od||(Od=r(["\n            SIGNAL_BUSES.set(busName, 0)\n        "]))),Qs("readSignalBus",[Js("string","busName")],"Float")(Cd||(Cd=r(["\n            return SIGNAL_BUSES.get(busName)\n        "])))]),Rd={codeGenerator:()=>to([Zs("Map<string, Array<MessageHandler>>","MSG_BUSES","new Map()"),Qs("msgBusPublish",[Js("string","busName"),Js("Message","message")],"void")(Md||(Md=r(["\n            ","\n            ","\n            for (i = 0; i < callbacks.length; i++) {\n                callbacks[i](message)\n            }\n        "])),Js("Int","i","0"),Zs("Array<MessageHandler>","callbacks","MSG_BUSES.has(busName) ? MSG_BUSES.get(busName): []")),Qs("msgBusSubscribe",[Js("string","busName"),Js("MessageHandler","callback")],"void")(Fd||(Fd=r(["\n            if (!MSG_BUSES.has(busName)) {\n                MSG_BUSES.set(busName, [])\n            }\n            MSG_BUSES.get(busName).push(callback)\n        "]))),Qs("msgBusUnsubscribe",[Js("string","busName"),Js("MessageHandler","callback")],"void")(Pd||(Pd=r(["\n            if (!MSG_BUSES.has(busName)) {\n                return\n            }\n            ","\n            ","\n            if (found !== -1) {\n                callbacks.splice(found, 1)\n            }\n        "])),Zs("Array<MessageHandler>","callbacks","MSG_BUSES.get(busName)"),Zs("Int","found","callbacks.indexOf(callback) !== -1"))]),dependencies:[ru]};var Ld,Dd,zd,Ud,jd,Bd,Vd,Gd,Wd;const $d={codeGenerator:()=>to([Qs("msg_isBang",[Js("Message","message")],"boolean")(Ld||(Ld=r(["\n            return (\n                msg_isStringToken(message, 0) \n                && msg_readStringToken(message, 0) === 'bang'\n            )\n        "]))),Qs("msg_bang",[],"Message")(Dd||(Dd=r(["\n            ","\n            msg_writeStringToken(message, 0, 'bang')\n            return message\n        "])),Zs("Message","message","msg_create([MSG_STRING_TOKEN, 4])")),Qs("msg_emptyToBang",[Js("Message","message")],"Message")(zd||(zd=r(["\n            if (msg_getLength(message) === 0) {\n                return msg_bang()\n            } else {\n                return message\n            }\n        "])))]),dependencies:[ru]},Hd={codeGenerator:()=>to([Qs("msg_copyTemplate",[Js("Message","src"),Js("Int","start"),Js("Int","end")],"MessageTemplate")(Ud||(Ud=r(["\n            ","\n            for (","; i < end; i++) {\n                ","\n                template.push(tokenType)\n                if (tokenType === MSG_STRING_TOKEN) {\n                    template.push(msg_readStringToken(src, i).length)\n                }\n            }\n            return template\n        "])),Zs("MessageTemplate","template","[]"),Js("Int","i","start"),Zs("Int","tokenType","msg_getTokenType(src, i)")),Qs("msg_copyMessage",[Js("Message","src"),Js("Message","dest"),Js("Int","srcStart"),Js("Int","srcEnd"),Js("Int","destStart")],"void")(jd||(jd=r(["\n            ","\n            ","\n            for (i, j; i < srcEnd; i++, j++) {\n                if (msg_getTokenType(src, i) === MSG_STRING_TOKEN) {\n                    msg_writeStringToken(dest, j, msg_readStringToken(src, i))\n                } else {\n                    msg_writeFloatToken(dest, j, msg_readFloatToken(src, i))\n                }\n            }\n        "])),Js("Int","i","srcStart"),Js("Int","j","destStart")),Qs("msg_slice",[Js("Message","message"),Js("Int","start"),Js("Int","end")],"Message")(Bd||(Bd=r(["\n            if (msg_getLength(message) <= start) {\n                throw new Error('message empty')\n            }\n            ","\n            ","\n            msg_copyMessage(message, newMessage, start, end, 0)\n            return newMessage\n        "])),Zs("MessageTemplate","template","msg_copyTemplate(message, start, end)"),Zs("Message","newMessage","msg_create(template)")),Qs("msg_concat",[Js("Message","message1"),Js("Message","message2")],"Message")(Vd||(Vd=r(["\n            ","\n            msg_copyMessage(message1, newMessage, 0, msg_getLength(message1), 0)\n            msg_copyMessage(message2, newMessage, 0, msg_getLength(message2), msg_getLength(message1))\n            return newMessage\n        "])),Zs("Message","newMessage","msg_create(msg_copyTemplate(message1, 0, msg_getLength(message1)).concat(msg_copyTemplate(message2, 0, msg_getLength(message2))))")),Qs("msg_shift",[Js("Message","message")],"Message")(Gd||(Gd=r(["\n            switch (msg_getLength(message)) {\n                case 0:\n                    throw new Error('message empty')\n                case 1:\n                    return msg_create([])\n                default:\n                    return msg_slice(message, 1, msg_getLength(message))\n            }\n        "])))]),dependencies:[ru]},Kd={codeGenerator:()=>to([Qs("msg_isAction",[Js("Message","message"),Js("string","action")],"boolean")(Wd||(Wd=r(["\n            return msg_isMatching(message, [MSG_STRING_TOKEN])\n                && msg_readStringToken(message, 0) === action\n        "])))]),dependencies:[ru]};var qd,Yd,Xd,Jd;const Zd={translateArgs:e=>{let{args:[n,t,r,a,s,o]}=e;return{minValue:Cc(n),maxValue:Cc(t),sendBusName:Pc(o)||Id,receiveBusName:Pc(s)||Id,initValue:1===r?Cc(a):0,outputOnLoad:!!r}},build:Td},Qd={translateArgs:e=>{let{args:[n,t,r,a,s]}=e;return{minValue:0,maxValue:Cc(n),sendBusName:Pc(s)||Id,receiveBusName:Pc(a)||Id,initValue:1===t?Cc(r):0,outputOnLoad:!!t}},build:Td},ef=e=>{let{prepareStoreValue:n,prepareStoreValueBang:t,name:a}=e;return{state:e=>{let{ns:n,node:{args:t}}=e;return no(n.State,[Js("Float","minValue",t.minValue),Js("Float","maxValue",t.maxValue),Js("Float","valueFloat",t.initValue),Js("Message","value","msg_create([])"),Js("string","receiveBusName",'"'.concat(t.receiveBusName,'"')),Js("string","sendBusName",'"'.concat(t.sendBusName,'"')),Js("MessageHandler","messageReceiver",n.defaultMessageHandler),Js("MessageHandler","messageSender",n.defaultMessageHandler)])},initialization:e=>{let{ns:n,state:t,snds:a,node:{args:s}}=e;return ro(qd||(qd=r(["\n                ",".messageSender = ","\n                ",".messageReceiver = ","\n                ","(",', "','")\n    \n                ',"\n            "])),t,a.$0,t,eo([Js("Message","m")])(Yd||(Yd=r(["\n                    ","(",", m)\n                "])),n.receiveMessage,t),n.setReceiveBusName,t,s.receiveBusName,s.outputOnLoad?"commons_waitFrame(0, () => ".concat(a.$0,"(msg_floats([").concat(t,".valueFloat])))"):null)},messageReceivers:e=>{let{ns:n,state:t}=e;return{0:eo([Js("Message","m")])(Xd||(Xd=r(["\n                ","(",", m)\n                return\n            "])),n.receiveMessage,t)}},core:e=>{let{ns:a}=e;return to([xd(a),Qs(a.receiveMessage,[Js(a.State,"state"),Js("Message","m")],"void")(Jd||(Jd=r(["\n                    if (msg_isMatching(m, [MSG_FLOAT_TOKEN])) {\n                        ","\n                        ",'\n                        state.messageSender(outMessage)\n                        if (state.sendBusName !== "','") {\n                            msgBusPublish(state.sendBusName, outMessage)\n                        }\n                        return\n        \n                    } else if (msg_isBang(m)) {\n                        ',"\n                        ",'\n                        state.messageSender(outMessage)\n                        if (state.sendBusName !== "',"\") {\n                            msgBusPublish(state.sendBusName, outMessage)\n                        }\n                        return\n        \n                    } else if (\n                        msg_isMatching(m, [MSG_STRING_TOKEN, MSG_FLOAT_TOKEN]) \n                        && msg_readStringToken(m, 0) === 'set'\n                    ) {\n                        ","\n                        return\n                    \n                    } else if (","(state, m) === true) {\n                        return\n                    }\n                "])),n?"state.valueFloat = ".concat(n("msg_readFloatToken(m, 0)")):"state.valueFloat = msg_readFloatToken(m, 0)",Zs("Message","outMessage","msg_floats([state.valueFloat])"),Id,t?"state.valueFloat = ".concat(t("state.valueFloat")):null,Zs("Message","outMessage","msg_floats([state.valueFloat])"),Id,n?"state.valueFloat = ".concat(n("msg_readFloatToken(m, 1)")):"state.valueFloat = msg_readFloatToken(m, 1)",a.setSendReceiveFromMessage)])},dependencies:[$d,Rd,Zi]}},nf={tgl:ef({name:"tgl",prepareStoreValueBang:e=>"".concat(e," === 0 ? state.maxValue: 0")}),nbx:ef({name:"nbx",prepareStoreValue:e=>"Math.min(Math.max(".concat(e,",state.minValue),state.maxValue)")}),hsl:ef({name:"hsl"}),vsl:ef({name:"vsl"}),hradio:ef({name:"hradio"}),vradio:ef({name:"vradio"})},tf={tgl:Qd,nbx:Zd,hsl:Zd,vsl:Zd,hradio:Qd,vradio:Qd},rf=[...Object.keys(tf),"floatatom"],af=(e,n)=>{const t=e.patches[e.rootPatchId],r={};return Object.values(t.nodes).forEach((e=>{const a=Qc(t.id,e.id),s=n[a];if("send"===e.type&&s){if(!r[a]){const n=e.layout||{},t={group:"send",name:s.args.busName,position:void 0!==n.x&&void 0!==n.y?[n.x,n.y]:void 0};r[a]={portletIds:[],metadata:t}}r[a].portletIds.push("0")}})),r},sf=(e,n)=>{const t={};return uc(e,(e=>{const r=Qc(e.patch.id,e.node.id);if(!t[r]){const a=n[r];if(!a)return;const s=e.node.layout||{};let o={group:"control",type:e.node.type,label:s.label,position:void 0!==s.x&&void 0!==s.y?[s.x,s.y]:void 0};rf.includes(e.node.type)&&(o={...o,group:"control:float",initValue:a.args.initValue,minValue:a.args.minValue,maxValue:a.args.maxValue}),t[r]={portletIds:[],metadata:o}}t[r].portletIds.push("0")})),t},of=e=>64===e?Float64Array:Float32Array,lf=(e,n)=>new Proxy({},{get:(t,r)=>{if(n.hasOwnProperty(r)){const t=String(r),a=n[t];switch(a.type){case"raw":if(r in e)return e[t];throw new Error("Key ".concat(String(t)," doesn't exist in raw module"));case"proxy":case"callback":return a.value}}},set:(e,t,r)=>{if(!n.hasOwnProperty(String(t)))throw new Error("Key ".concat(String(t)," is not defined in bindings"));{const e=String(t),a=n[e];if("callback"!==a.type)throw new Error("Binding key ".concat(String(e)," is read-only"));a.value=r}return!0}}),uf=(e,n)=>{if(!n)throw new Error("Cannot lift a null pointer");const t=(n>>>=0)+new Uint32Array(e.memory.buffer)[n-4>>>2]>>>1,r=new Uint16Array(e.memory.buffer);let a=n>>>1,s="";for(;t-a>1024;)s+=String.fromCharCode(...r.subarray(a,a+=1024));return s+String.fromCharCode(...r.subarray(a,t))},cf=(e,n)=>{if(null==n)throw new Error("Cannot lower a null string");const t=n.length,r=e.__new(t<<1,1)>>>0,a=new Uint16Array(e.memory.buffer);for(let s=0;s<t;++s)a[(r>>>1)+s]=n.charCodeAt(s);return r},df=(e,n,t)=>{if(!t)throw new Error("Cannot lift a null pointer");const r=new Uint32Array(e.memory.buffer);return new n(e.memory.buffer,r[t+4>>>2],r[t+8>>>2]/n.BYTES_PER_ELEMENT)},ff=(e,n,t)=>{const r=of(n),a=e.createFloatArray(t.length),s=df(e,r,a);return s.set(t),{array:s,arrayPointer:a}},pf=(e,n,t)=>{const r=e.x_core_createListOfArrays();return t.forEach((t=>{const{arrayPointer:a}=ff(e,n,t);e.x_core_pushToListOfArrays(r,a)})),r},hf=(e,n,t)=>{const r=e.x_core_getListOfArraysLength(t),a=[],s=of(n);for(let o=0;o<r;o++){const n=e.x_core_getListOfArraysElem(t,o);a.push(df(e,s,n))}return a},mf=(e,n)=>{const t=e.x_msg_getTokenTypes(n),r=df(e,Int32Array,t),a=[];return r.forEach(((t,r)=>{if(t===e.MSG_FLOAT_TOKEN.valueOf())a.push(e.msg_readFloatToken(n,r));else if(t===e.MSG_STRING_TOKEN.valueOf()){const t=e.msg_readStringToken(n,r);a.push(uf(e,t))}})),a},gf=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const t=await WebAssembly.instantiate(e,{env:{abort:(e,n,t,a)=>{const s=uf(r,e);(()=>{throw Error("".concat(s," at ").concat(t,":").concat(a))})()},seed:()=>Date.now()*Math.random(),"console.log":e=>{console.log(uf(r,e))}},...n}),r=t.instance.exports;return t.instance},yf=(e,n)=>{n.wasmOutput=df(e,n.arrayType,e.getOutput()),n.wasmInput=df(e,n.arrayType,e.getInput())},bf=(e,n)=>({initialize:{type:"proxy",value:(t,r)=>{n.metadata.audioSettings.blockSize=r,n.metadata.audioSettings.sampleRate=t,n.blockSize=r,e.initialize(t,r),yf(e,n)}},dspLoop:{type:"proxy",value:(t,r)=>{for(let e=0;e<t.length;e++)n.wasmInput.set(t[e],e*n.blockSize);yf(e,n),e.dspLoop(),yf(e,n);for(let e=0;e<r.length;e++)r[e].set(n.wasmOutput.subarray(n.blockSize*e,n.blockSize*(e+1)))}}}),vf=(e,n)=>Object.entries(n.metadata.compilation.io.messageReceivers).reduce(((t,r)=>{let[a,s]=r;return{...t,[a]:{type:"proxy",value:Ys(s.portletIds,(t=>[t,r=>{const s=((e,n)=>{const t=n.reduce(((n,t)=>{if("number"===typeof t)n.push(e.MSG_FLOAT_TOKEN.valueOf());else{if("string"!==typeof t)throw new Error("invalid message value ".concat(t));n.push(e.MSG_STRING_TOKEN.valueOf()),n.push(t.length)}return n}),[]),r=e.x_msg_createTemplate(t.length);df(e,Int32Array,r).set(t);const a=e.x_msg_create(r);return n.forEach(((n,t)=>{if("number"===typeof n)e.msg_writeFloatToken(a,t,n);else if("string"===typeof n){const r=cf(e,n);e.msg_writeStringToken(a,t,r)}})),a})(e,r);e[n.metadata.compilation.variableNamesIndex.io.messageReceivers[a][t]](s)}]))}}}),{}),_f=(e,n)=>Object.entries(n.metadata.compilation.io.messageSenders).reduce(((e,n)=>{let[t,r]=n;return{...e,[t]:{type:"proxy",value:Ys(r.portletIds,(e=>[e,{onMessage:()=>{}}]))}}}),{}),Sf=(e,n)=>{const t={},{variableNamesIndex:r}=n.compilation;return Object.entries(n.compilation.io.messageSenders).forEach((n=>{let[a,s]=n;s.portletIds.forEach((n=>{const s=r.io.messageSenders[a][n];t[s]=t=>{const r=mf(e.rawModule,t);e.modules.io.messageSenders[a][n].onMessage(r)}}))})),t},wf=async e=>{const n={};WebAssembly.Module.imports(new WebAssembly.Module(e)).filter((e=>"input"===e.module&&"function"===e.kind)).forEach((e=>n[e.name]=()=>{}));const t=(await gf(e,{input:n})).exports,r=t.metadata.valueOf(),a=uf(t,r);return JSON.parse(a)},kf=e=>({i_fs_readSoundFile:(n,t,r)=>{const a=uf(e.rawModule,t),s=mf(e.rawModule,r);e.modules.fs.onReadSoundFile(n,a,s)},i_fs_writeSoundFile:(n,t,r,a)=>{const s=hf(e.rawModule,e.engineData.bitDepth,t),o=uf(e.rawModule,r),i=mf(e.rawModule,a);e.modules.fs.onWriteSoundFile(n,s,o,i)},i_fs_openSoundReadStream:(n,t,r)=>{const a=uf(e.rawModule,t),s=mf(e.rawModule,r);yf(e.rawModule,e.engineData),e.modules.fs.onOpenSoundReadStream(n,a,s)},i_fs_openSoundWriteStream:(n,t,r)=>{const a=uf(e.rawModule,t),s=mf(e.rawModule,r);e.modules.fs.onOpenSoundWriteStream(n,a,s)},i_fs_sendSoundStreamData:(n,t)=>{const r=hf(e.rawModule,e.engineData.bitDepth,t);e.modules.fs.onSoundStreamData(n,r)},i_fs_closeSoundStream:function(){return e.modules.fs.onCloseSoundStream(...arguments)}}),If=async e=>{const n=await wf(e),t={modules:{}},r={...kf(t),...Sf(t,n)},a=n.audioSettings.bitDepth,s=of(a),o={metadata:n,wasmOutput:new s(0),wasmInput:new s(0),arrayType:s,bitDepth:a,blockSize:0};return{rawModule:(await gf(e,{input:r})).exports,engineData:o,forwardReferences:t}},Tf=async(e,n,t)=>{const r=lf(e,((e,n)=>({getArray:{type:"proxy",value:t=>{const r=cf(e,t),a=e.commons_getArray(r);return df(e,n.arrayType,a)}},setArray:{type:"proxy",value:(t,r)=>{const a=cf(e,t),{arrayPointer:s}=ff(e,n.bitDepth,r);e.commons_setArray(a,s),yf(e,n)}}}))(e,n)),a=lf(e,((e,n)=>({sendReadSoundFileResponse:{type:"proxy",value:(t,r,a)=>{let s=0;a&&(s=pf(e,n.bitDepth,a)),e.x_fs_onReadSoundFileResponse(t,r,s),yf(e,n)}},sendWriteSoundFileResponse:{type:"proxy",value:e.x_fs_onWriteSoundFileResponse},sendSoundStreamData:{type:"proxy",value:(t,r)=>{const a=pf(e,n.bitDepth,r),s=e.x_fs_onSoundStreamData(t,a);return yf(e,n),s}},closeSoundStream:{type:"proxy",value:e.x_fs_onCloseSoundStream},onReadSoundFile:{type:"callback",value:()=>{}},onWriteSoundFile:{type:"callback",value:()=>{}},onOpenSoundReadStream:{type:"callback",value:()=>{}},onOpenSoundWriteStream:{type:"callback",value:()=>{}},onSoundStreamData:{type:"callback",value:()=>{}},onCloseSoundStream:{type:"callback",value:()=>{}}}))(e,n)),s={messageReceivers:lf(e,vf(e,n)),messageSenders:lf(e,_f(0,n))};return t.modules.fs=a,t.modules.io=s,t.engineData=n,t.rawModule=e,{...bf(e,n),metadata:{type:"proxy",value:n.metadata},commons:{type:"proxy",value:r},fs:{type:"proxy",value:a},io:{type:"proxy",value:s}}},xf=e=>{const n=(e=>new Function("\n        ".concat(e,"\n        return exports\n    "))())(e);return lf(n,(e=>({fs:{type:"proxy",value:Af(e)},metadata:{type:"raw"},initialize:{type:"raw"},dspLoop:{type:"raw"},io:{type:"raw"},commons:{type:"proxy",value:Ef(e,e.metadata.audioSettings.bitDepth)}}))(n))},Af=e=>{const n=lf(e,{onReadSoundFile:{type:"callback",value:()=>{}},onWriteSoundFile:{type:"callback",value:()=>{}},onOpenSoundReadStream:{type:"callback",value:()=>{}},onOpenSoundWriteStream:{type:"callback",value:()=>{}},onSoundStreamData:{type:"callback",value:()=>{}},onCloseSoundStream:{type:"callback",value:()=>{}},sendReadSoundFileResponse:{type:"proxy",value:e.x_fs_onReadSoundFileResponse},sendWriteSoundFileResponse:{type:"proxy",value:e.x_fs_onWriteSoundFileResponse},sendSoundStreamData:{type:"proxy",value:e.x_fs_onSoundStreamData},closeSoundStream:{type:"proxy",value:e.x_fs_onCloseSoundStream}});return e.i_fs_openSoundWriteStream=function(){return n.onOpenSoundWriteStream(...arguments)},e.i_fs_sendSoundStreamData=function(){return n.onSoundStreamData(...arguments)},e.i_fs_openSoundReadStream=function(){return n.onOpenSoundReadStream(...arguments)},e.i_fs_closeSoundStream=function(){return n.onCloseSoundStream(...arguments)},e.i_fs_writeSoundFile=function(){return n.onWriteSoundFile(...arguments)},e.i_fs_readSoundFile=function(){return n.onReadSoundFile(...arguments)},n},Ef=(e,n)=>{const t=of(n);return lf(e,{getArray:{type:"proxy",value:e.commons_getArray},setArray:{type:"proxy",value:(n,r)=>e.commons_setArray(n,new t(r))}})},Of="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function Cf(e,n,t,r){if(["32f","64"].indexOf(n)>-1&&["32f","64"].indexOf(r)>-1)return void t.set(e);Nf(n),Nf(r);let a=function(e,n){let t=function(e){return e};e!=n&&(t=["32f","64"].includes(e)?Ff:["32f","64"].includes(n)?Pf:Mf);return t}(n,r),s={oldMin:Math.pow(2,parseInt(n,10))/2,newMin:Math.pow(2,parseInt(r,10))/2,oldMax:Math.pow(2,parseInt(n,10))/2-1,newMax:Math.pow(2,parseInt(r,10))/2-1};Rf(n,e,!0);for(let o=0,i=e.length;o<i;o++)t[o]=a(e[o],s);Rf(r,t,!1)}function Mf(e,n){return e=e>0?parseInt(e/n.oldMax*n.newMax,10):parseInt(e/n.oldMin*n.newMin,10)}function Ff(e,n){return parseInt(e>0?e*n.newMax:e*n.newMin,10)}function Pf(e,n){return e>0?e/n.oldMax:e/n.oldMin}function Nf(e){if("32f"!=e&&"64"!=e&&(parseInt(e,10)<"8"||parseInt(e,10)>"53"))throw new Error("Invalid bit depth.")}function Rf(e,n,t){if("8"==e){let e=t?-128:128;for(let t=0,r=n.length;t<r;t++)n[t]=n[t]+=e}}const Lf=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],Df=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767];function zf(e,n){let t=function(e,n){jf(e,n);let t=[];return t.push(255&e),t.push(e>>8&255),t.push(n.index),t.push(0),t}(e[0],n);for(let r=3,a=e.length;r<a;r+=2){let a=jf(e[r],n),s=jf(e[r+1],n);t.push(s<<4|a)}return t}function Uf(e,n){var t;n.predicted=(t=e[1]<<8|e[0])>32768?t-65536:t,n.index=e[2],n.step=Df[n.index];let r=[n.predicted,n.predicted];for(let a=4,s=e.length;a<s;a++){let t=e[a],s=t>>4,o=s<<4^t;r.push(Bf(o,n)),r.push(Bf(s,n))}return r}function jf(e,n){let t=e-n.predicted,r=0;t>=0?r=0:(r=8,t=-t);let a=Df[n.index],s=a>>3;return t>a&&(r|=4,t-=a,s+=a),a>>=1,t>a&&(r|=2,t-=a,s+=a),a>>=1,t>a&&(r|=1,s+=a),function(e,n,t){8&e?t.predicted-=n:t.predicted+=n;t.predicted<-32768?t.predicted=-32768:t.predicted>32767&&(t.predicted=32767);t.index+=Lf[7&e],t.index<0?t.index=0:t.index>88&&(t.index=88)}(r,s,n),r}function Bf(e,n){let t=0;return 4&e&&(t+=n.step),2&e&&(t+=n.step>>1),1&e&&(t+=n.step>>2),t+=n.step>>3,8&e&&(t=-t),n.predicted+=t,n.predicted>32767?n.predicted=32767:n.predicted<-32767&&(n.predicted=-32767),function(e,n){n.index+=Lf[e],n.index<0?n.index=0:n.index>88&&(n.index=88);n.step=Df[n.index]}(e,n),n.predicted}const Vf=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];function Gf(e){let n,t=~(e=-32768==e?-32767:e)>>8&128;if(t||(e*=-1),e>32635&&(e=32635),e>=256){let t=Vf[e>>8&127];n=t<<4|e>>t+3&15}else n=e>>4;return 85^n^t}function Wf(e){let n=0;0!==(128&(e^=85))&&(e&=-129,n=-1);let t=4+((240&e)>>4),r=0;return r=4!=t?1<<t|(15&e)<<t-4|1<<t-5:e<<1|1,r=0===n?r:-r,8*r*-1}const $f=132,Hf=32635,Kf=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],qf=[0,132,396,924,1980,4092,8316,16764];function Yf(e){let n,t,r,a;return n=e>>8&128,0!=n&&(e=-e),(e+=$f)>Hf&&(e=Hf),t=Kf[e>>7&255],r=e>>t+3&15,a=~(n|t<<4|r),a}function Xf(e){let n,t,r,a;return n=128&(e=~e),t=e>>4&7,r=15&e,a=qf[t]+(r<<t+3),0!=n&&(a=-a),a}function Jf(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;for(let a=t;a<r;a+=n)Zf(e,n,a)}function Zf(e,n,t){n--;for(let r=0;r<n;r++){let a=e[t+r];e[t+r]=e[t+n],e[t+n]=a,n--}}function Qf(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0,a=e.length;for(;r<a;){let a=e.codePointAt(r);if(a<128)n[t]=a,t++;else{let e=0,s=0;for(a<=2047?(e=1,s=192):a<=65535?(e=2,s=224):a<=1114111&&(e=3,s=240,r++),n[t]=(a>>6*e)+s,t++;e>0;)n[t]=128|a>>6*(e-1)&63,t++,e--}r++}return t}class ep{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.bits=e,this.offset=Math.ceil(e/8),this.max=Math.pow(2,e)-1,this.min=0,this.unpack=this.unpack_,n&&(this.max=Math.pow(2,e)/2-1,this.min=-this.max-1,this.unpack=this.unpackSigned_)}pack(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n=this.clamp_(Math.round(n));for(let r=0,a=this.offset;r<a;r++)e[t]=255&Math.floor(n/Math.pow(2,8*r)),t++;return t}unpack_(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=0;for(let r=0;r<this.offset;r++)t+=e[n+r]*Math.pow(256,r);return t}unpackSigned_(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.sign_(this.unpack_(e,n))}clamp_(e){return e>this.max?this.max:e<this.min?this.min:e}sign_(e){return e>this.max&&(e-=2*this.max+2),e}}class np{constructor(e,n){this.offset=Math.ceil((e+n)/8),this.ebits=e,this.fbits=n,this.bias=(1<<e-1)-1,this.biasP2=Math.pow(2,this.bias+1),this.ebitsFbits=e+n,this.fbias=Math.pow(2,-(8*this.offset-1-e))}pack(e,n,t){Math.abs(n)>this.biasP2-2*this.ebitsFbits&&(n=n<0?-1/0:1/0);let r=((n=+n)||1/n)<0||n<0?1:0;n=Math.abs(n);let a=Math.min(Math.floor(Math.log(n)/Math.LN2),1023),s=tp(n/Math.pow(2,a)*Math.pow(2,this.fbits));return n!==n?(s=Math.pow(2,this.fbits-1),a=(1<<this.ebits)-1):0!==n&&(n>=Math.pow(2,1-this.bias)?(s/Math.pow(2,this.fbits)>=2&&(a+=1,s=1),a>this.bias?(a=(1<<this.ebits)-1,s=0):(a+=this.bias,s=tp(s)-Math.pow(2,this.fbits))):(s=tp(n/Math.pow(2,1-this.bias-this.fbits)),a=0)),this.packFloatBits_(e,t,r,a,s)}unpack(e,n){let t,r=(1<<this.ebits)-1,a="";for(let i=this.offset-1;i>=0;i--){let t=e[i+n].toString(2);a+="00000000".substring(t.length)+t}let s="1"==a.charAt(0)?-1:1;a=a.substring(1);let o=parseInt(a.substring(0,this.ebits),2);return a=a.substring(this.ebits),o==r?0!==parseInt(a,2)?NaN:s*(1/0):(0===o?(o+=1,t=parseInt(a,2)):t=parseInt("1"+a,2),s*t*this.fbias*Math.pow(2,o-this.bias))}packFloatBits_(e,n,t,r,a){let s=[];s.push(t);for(let c=this.ebits;c>0;c-=1)s[c]=r%2?1:0,r=Math.floor(r/2);let o=s.length;for(let c=this.fbits;c>0;c-=1)s[o+c]=a%2?1:0,a=Math.floor(a/2);let i=s.join(""),l=this.offset+n-1,u=n;for(;l>=n;)e[l]=parseInt(i.substring(0,8),2),i=i.substring(8),l--,u++;return u}}function tp(e){let n=Math.floor(e),t=e-n;return t<.5?n:t>.5||n%2?n+1:n}function rp(e){return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r="";for(let a=n;a<t;){let n=128,t=191,s=!1,o=e[a++];if(o>=0&&o<=127)r+=String.fromCharCode(o);else{let i=0;o>=194&&o<=223?i=1:o>=224&&o<=239?(i=2,224===e[a]&&(n=160),237===e[a]&&(t=159)):o>=240&&o<=244?(i=3,240===e[a]&&(n=144),244===e[a]&&(t=143)):s=!0,o&=(1<<8-i-1)-1;for(let r=0;r<i;r++)(e[a]<n||e[a]>t)&&(s=!0),o=o<<6|63&e[a],a++;s?r+=String.fromCharCode(65533):o<=65535?r+=String.fromCharCode(o):(o-=65536,r+=String.fromCharCode(55296+(o>>10&1023),56320+(1023&o)))}}return r}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length)}function ap(e){let n=[];return Qf(e,n),n}function sp(e,n){return Qf(e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)}function op(e,n,t){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=fp((n=n||{}).bits,n.fp,n.signed),s=Math.ceil(n.bits/8),o=0,i=r;for(let l=e.length;o<l;o++)r=a.pack(t,e[o],r);return n.be&&Jf(t,s,i,r),r}function ip(e,n,t){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length,s=fp((n=n||{}).bits,n.fp,n.signed);if(a=function(e,n,t,r){let a=(t-n)%r;return t-a}(0,r,a,s.offset),n.be){let o=function(e){return new Uint8Array(e)}(e);n.be&&Jf(o,s.offset,r,a),dp(o,t,r,a,s)}else dp(e,t,r,a,s)}function lp(e,n,t){return op([e],n,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)}function up(e,n){let t=[];return lp(e,n,t,0),t}function cp(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];return ip(e,n,r,t,t+Math.ceil(n.bits/8)),r[0]}function dp(e,n,t,r,a){let s=a.offset;for(let o=0,i=t;i<r;i+=s,o++)n[o]=a.unpack(e,i)}function fp(e,n,t){return n&&32==e?new np(8,23):n&&64==e?new np(11,52):new ep(e,t)}class pp{constructor(){this.container="",this.chunkSize=0,this.format="",this.signature=null,this.head=0,this.uInt32={bits:32,be:!1},this.supported_containers=["RIFF","RIFX"]}setSignature(e){if(this.head=0,this.container=this.readString(e,4),-1===this.supported_containers.indexOf(this.container))throw Error("Not a supported format.");this.uInt32.be="RIFX"===this.container,this.chunkSize=this.readUInt32(e),this.format=this.readString(e,4),this.signature={chunkId:this.container,chunkSize:this.chunkSize,format:this.format,subChunks:this.getSubChunksIndex_(e)}}findChunk(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=this.signature.subChunks,r=[];for(let a=0;a<t.length;a++)if(t[a].chunkId==e){if(!n)return t[a];r.push(t[a])}return"LIST"==e&&r.length?r:null}readString(e,n){let t="";return t=rp(e,this.head,this.head+n),this.head+=n,t}readUInt32(e){let n=cp(e,this.uInt32,this.head);return this.head+=4,n}getSubChunksIndex_(e){let n=[],t=this.head;for(;t<=e.length-8;)n.push(this.getSubChunkIndex_(e,t)),t+=8+n[n.length-1].chunkSize,t=t%2?t+1:t;return n}getSubChunkIndex_(e,n){let t={chunkId:this.getChunkId_(e,n),chunkSize:this.getChunkSize_(e,n)};if("LIST"==t.chunkId)t.format=rp(e,n+8,n+12),this.head+=4,t.subChunks=this.getSubChunksIndex_(e);else{let e=t.chunkSize%2?t.chunkSize+1:t.chunkSize;this.head=n+8+e,t.chunkData={start:n+8,end:this.head}}return t}getChunkId_(e,n){return this.head+=4,rp(e,n,n+4)}getChunkSize_(e,n){return this.head+=4,cp(e,this.uInt32,n+4)}}class hp extends pp{constructor(){super(),this.supported_containers.push("RF64"),this.fmt={chunkId:"",chunkSize:0,audioFormat:0,numChannels:0,sampleRate:0,byteRate:0,blockAlign:0,bitsPerSample:0,cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]},this.fact={chunkId:"",chunkSize:0,dwSampleLength:0},this.cue={chunkId:"",chunkSize:0,dwCuePoints:0,points:[]},this.smpl={chunkId:"",chunkSize:0,dwManufacturer:0,dwProduct:0,dwSamplePeriod:0,dwMIDIUnityNote:0,dwMIDIPitchFraction:0,dwSMPTEFormat:0,dwSMPTEOffset:0,dwNumSampleLoops:0,dwSamplerData:0,loops:[]},this.bext={chunkId:"",chunkSize:0,description:"",originator:"",originatorReference:"",originationDate:"",originationTime:"",timeReference:[0,0],version:0,UMID:"",loudnessValue:0,loudnessRange:0,maxTruePeakLevel:0,maxMomentaryLoudness:0,maxShortTermLoudness:0,reserved:"",codingHistory:""},this.iXML={chunkId:"",chunkSize:0,value:""},this.ds64={chunkId:"",chunkSize:0,riffSizeHigh:0,riffSizeLow:0,dataSizeHigh:0,dataSizeLow:0,originationTime:0,sampleCountHigh:0,sampleCountLow:0},this.data={chunkId:"",chunkSize:0,samples:new Uint8Array(0)},this.LIST=[],this.junk={chunkId:"",chunkSize:0,chunkData:[]},this._PMX={chunkId:"",chunkSize:0,value:""},this.uInt16={bits:16,be:!1,signed:!1,fp:!1}}fromBuffer(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.clearHeaders(),this.setSignature(e),this.uInt16.be=this.uInt32.be,"WAVE"!=this.format)throw Error('Could not find the "WAVE" format identifier');this.readDs64Chunk_(e),this.readFmtChunk_(e),this.readFactChunk_(e),this.readBextChunk_(e),this.readiXMLChunk_(e),this.readCueChunk_(e),this.readSmplChunk_(e),this.readDataChunk_(e,n),this.readJunkChunk_(e),this.readLISTChunk_(e),this.read_PMXChunk_(e)}clearHeaders(){let e=new hp;Object.assign(this.fmt,e.fmt),Object.assign(this.fact,e.fact),Object.assign(this.cue,e.cue),Object.assign(this.smpl,e.smpl),Object.assign(this.bext,e.bext),Object.assign(this.iXML,e.iXML),Object.assign(this.ds64,e.ds64),Object.assign(this.data,e.data),this.LIST=[],Object.assign(this.junk,e.junk),Object.assign(this._PMX,e._PMX)}readFmtChunk_(e){let n=this.findChunk("fmt ");if(!n)throw Error('Could not find the "fmt " chunk');this.head=n.chunkData.start,this.fmt.chunkId=n.chunkId,this.fmt.chunkSize=n.chunkSize,this.fmt.audioFormat=this.readUInt16_(e),this.fmt.numChannels=this.readUInt16_(e),this.fmt.sampleRate=this.readUInt32(e),this.fmt.byteRate=this.readUInt32(e),this.fmt.blockAlign=this.readUInt16_(e),this.fmt.bitsPerSample=this.readUInt16_(e),this.readFmtExtension_(e)}readFmtExtension_(e){this.fmt.chunkSize>16&&(this.fmt.cbSize=this.readUInt16_(e),this.fmt.chunkSize>18&&(this.fmt.validBitsPerSample=this.readUInt16_(e),this.fmt.chunkSize>20&&(this.fmt.dwChannelMask=this.readUInt32(e),this.fmt.subformat=[this.readUInt32(e),this.readUInt32(e),this.readUInt32(e),this.readUInt32(e)])))}readFactChunk_(e){let n=this.findChunk("fact");n&&(this.head=n.chunkData.start,this.fact.chunkId=n.chunkId,this.fact.chunkSize=n.chunkSize,this.fact.dwSampleLength=this.readUInt32(e))}readCueChunk_(e){let n=this.findChunk("cue ");if(n){this.head=n.chunkData.start,this.cue.chunkId=n.chunkId,this.cue.chunkSize=n.chunkSize,this.cue.dwCuePoints=this.readUInt32(e);for(let n=0;n<this.cue.dwCuePoints;n++)this.cue.points.push({dwName:this.readUInt32(e),dwPosition:this.readUInt32(e),fccChunk:this.readString(e,4),dwChunkStart:this.readUInt32(e),dwBlockStart:this.readUInt32(e),dwSampleOffset:this.readUInt32(e)})}}readSmplChunk_(e){let n=this.findChunk("smpl");if(n){this.head=n.chunkData.start,this.smpl.chunkId=n.chunkId,this.smpl.chunkSize=n.chunkSize,this.smpl.dwManufacturer=this.readUInt32(e),this.smpl.dwProduct=this.readUInt32(e),this.smpl.dwSamplePeriod=this.readUInt32(e),this.smpl.dwMIDIUnityNote=this.readUInt32(e),this.smpl.dwMIDIPitchFraction=this.readUInt32(e),this.smpl.dwSMPTEFormat=this.readUInt32(e),this.smpl.dwSMPTEOffset=this.readUInt32(e),this.smpl.dwNumSampleLoops=this.readUInt32(e),this.smpl.dwSamplerData=this.readUInt32(e);for(let n=0;n<this.smpl.dwNumSampleLoops;n++)this.smpl.loops.push({dwName:this.readUInt32(e),dwType:this.readUInt32(e),dwStart:this.readUInt32(e),dwEnd:this.readUInt32(e),dwFraction:this.readUInt32(e),dwPlayCount:this.readUInt32(e)})}}readDataChunk_(e,n){let t=this.findChunk("data");if(!t)throw Error('Could not find the "data" chunk');this.data.chunkId="data",this.data.chunkSize=t.chunkSize,n&&(this.data.samples=e.slice(t.chunkData.start,t.chunkData.end))}readBextChunk_(e){let n=this.findChunk("bext");n&&(this.head=n.chunkData.start,this.bext.chunkId=n.chunkId,this.bext.chunkSize=n.chunkSize,this.bext.description=this.readString(e,256),this.bext.originator=this.readString(e,32),this.bext.originatorReference=this.readString(e,32),this.bext.originationDate=this.readString(e,10),this.bext.originationTime=this.readString(e,8),this.bext.timeReference=[this.readUInt32(e),this.readUInt32(e)],this.bext.version=this.readUInt16_(e),this.bext.UMID=this.readString(e,64),this.bext.loudnessValue=this.readUInt16_(e),this.bext.loudnessRange=this.readUInt16_(e),this.bext.maxTruePeakLevel=this.readUInt16_(e),this.bext.maxMomentaryLoudness=this.readUInt16_(e),this.bext.maxShortTermLoudness=this.readUInt16_(e),this.bext.reserved=this.readString(e,180),this.bext.codingHistory=this.readString(e,this.bext.chunkSize-602))}readiXMLChunk_(e){let n=this.findChunk("iXML");n&&(this.head=n.chunkData.start,this.iXML.chunkId=n.chunkId,this.iXML.chunkSize=n.chunkSize,this.iXML.value=rp(e,this.head,this.head+this.iXML.chunkSize))}readDs64Chunk_(e){let n=this.findChunk("ds64");if(n)this.head=n.chunkData.start,this.ds64.chunkId=n.chunkId,this.ds64.chunkSize=n.chunkSize,this.ds64.riffSizeHigh=this.readUInt32(e),this.ds64.riffSizeLow=this.readUInt32(e),this.ds64.dataSizeHigh=this.readUInt32(e),this.ds64.dataSizeLow=this.readUInt32(e),this.ds64.originationTime=this.readUInt32(e),this.ds64.sampleCountHigh=this.readUInt32(e),this.ds64.sampleCountLow=this.readUInt32(e);else if("RF64"==this.container)throw Error('Could not find the "ds64" chunk')}readLISTChunk_(e){let n=this.findChunk("LIST",!0);if(null!==n)for(let t=0;t<n.length;t++){let r=n[t];this.LIST.push({chunkId:r.chunkId,chunkSize:r.chunkSize,format:r.format,subChunks:[]});for(let n=0;n<r.subChunks.length;n++)this.readLISTSubChunks_(r.subChunks[n],r.format,e)}}readLISTSubChunks_(e,n,t){"adtl"==n?["labl","note","ltxt"].indexOf(e.chunkId)>-1&&this.readLISTadtlSubChunks_(t,e):"INFO"==n&&this.readLISTINFOSubChunks_(t,e)}readLISTadtlSubChunks_(e,n){this.head=n.chunkData.start;let t={chunkId:n.chunkId,chunkSize:n.chunkSize,dwName:this.readUInt32(e)};"ltxt"==n.chunkId?(t.dwSampleLength=this.readUInt32(e),t.dwPurposeID=this.readUInt32(e),t.dwCountry=this.readUInt16_(e),t.dwLanguage=this.readUInt16_(e),t.dwDialect=this.readUInt16_(e),t.dwCodePage=this.readUInt16_(e),t.value=""):t.value=this.readZSTR_(e,this.head),this.LIST[this.LIST.length-1].subChunks.push(t)}readLISTINFOSubChunks_(e,n){this.head=n.chunkData.start,this.LIST[this.LIST.length-1].subChunks.push({chunkId:n.chunkId,chunkSize:n.chunkSize,value:this.readZSTR_(e,this.head)})}readJunkChunk_(e){let n=this.findChunk("junk");n&&(this.junk={chunkId:n.chunkId,chunkSize:n.chunkSize,chunkData:[].slice.call(e.slice(n.chunkData.start,n.chunkData.end))})}read_PMXChunk_(e){let n=this.findChunk("_PMX");n&&(this.head=n.chunkData.start,this._PMX.chunkId=n.chunkId,this._PMX.chunkSize=n.chunkSize,this._PMX.value=rp(e,this.head,this.head+this._PMX.chunkSize))}readZSTR_(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let t=n;t<e.length&&(this.head++,0!==e[t]);t++);return rp(e,n,this.head-1)}readUInt16_(e){let n=cp(e,this.uInt16,this.head);return this.head+=2,n}}function mp(e,n){let t=ap(e);for(let r=t.length;r<n;r++)t.push(0);return t}class gp extends hp{toBuffer(){this.uInt16.be="RIFX"===this.container,this.uInt32.be=this.uInt16.be;let e=[this.getJunkBytes_(),this.getDs64Bytes_(),this.getBextBytes_(),this.getiXMLBytes_(),this.getFmtBytes_(),this.getFactBytes_(),ap(this.data.chunkId),up(this.data.samples.length,this.uInt32),this.data.samples,this.getCueBytes_(),this.getSmplBytes_(),this.getLISTBytes_(),this.get_PMXBytes_()],n=0;for(let a=0;a<e.length;a++)n+=e[a].length;let t=new Uint8Array(n+12),r=0;r=sp(this.container,t,r),r=lp(n+4,this.uInt32,t,r),r=sp(this.format,t,r);for(let a=0;a<e.length;a++)t.set(e[a],r),r+=e[a].length;return t}getBextBytes_(){let e=[];return this.enforceBext_(),this.bext.chunkId&&(this.bext.chunkSize=602+this.bext.codingHistory.length,e=e.concat(ap(this.bext.chunkId),up(602+this.bext.codingHistory.length,this.uInt32),mp(this.bext.description,256),mp(this.bext.originator,32),mp(this.bext.originatorReference,32),mp(this.bext.originationDate,10),mp(this.bext.originationTime,8),up(this.bext.timeReference[0],this.uInt32),up(this.bext.timeReference[1],this.uInt32),up(this.bext.version,this.uInt16),mp(this.bext.UMID,64),up(this.bext.loudnessValue,this.uInt16),up(this.bext.loudnessRange,this.uInt16),up(this.bext.maxTruePeakLevel,this.uInt16),up(this.bext.maxMomentaryLoudness,this.uInt16),up(this.bext.maxShortTermLoudness,this.uInt16),mp(this.bext.reserved,180),mp(this.bext.codingHistory,this.bext.codingHistory.length))),this.enforceByteLen_(e),e}enforceBext_(){for(let e in this.bext)if(this.bext.hasOwnProperty(e)&&this.bext[e]&&"timeReference"!=e){this.bext.chunkId="bext";break}(this.bext.timeReference[0]||this.bext.timeReference[1])&&(this.bext.chunkId="bext")}getiXMLBytes_(){let e=[];if(this.iXML.chunkId){let n=ap(this.iXML.value);this.iXML.chunkSize=n.length,e=e.concat(ap(this.iXML.chunkId),up(this.iXML.chunkSize,this.uInt32),n)}return this.enforceByteLen_(e),e}getDs64Bytes_(){let e=[];return this.ds64.chunkId&&(e=e.concat(ap(this.ds64.chunkId),up(this.ds64.chunkSize,this.uInt32),up(this.ds64.riffSizeHigh,this.uInt32),up(this.ds64.riffSizeLow,this.uInt32),up(this.ds64.dataSizeHigh,this.uInt32),up(this.ds64.dataSizeLow,this.uInt32),up(this.ds64.originationTime,this.uInt32),up(this.ds64.sampleCountHigh,this.uInt32),up(this.ds64.sampleCountLow,this.uInt32))),this.enforceByteLen_(e),e}getCueBytes_(){let e=[];if(this.cue.chunkId){let n=this.getCuePointsBytes_();e=e.concat(ap(this.cue.chunkId),up(n.length+4,this.uInt32),up(this.cue.dwCuePoints,this.uInt32),n)}return this.enforceByteLen_(e),e}getCuePointsBytes_(){let e=[];for(let n=0;n<this.cue.dwCuePoints;n++)e=e.concat(up(this.cue.points[n].dwName,this.uInt32),up(this.cue.points[n].dwPosition,this.uInt32),ap(this.cue.points[n].fccChunk),up(this.cue.points[n].dwChunkStart,this.uInt32),up(this.cue.points[n].dwBlockStart,this.uInt32),up(this.cue.points[n].dwSampleOffset,this.uInt32));return e}getSmplBytes_(){let e=[];if(this.smpl.chunkId){let n=this.getSmplLoopsBytes_();e=e.concat(ap(this.smpl.chunkId),up(n.length+36,this.uInt32),up(this.smpl.dwManufacturer,this.uInt32),up(this.smpl.dwProduct,this.uInt32),up(this.smpl.dwSamplePeriod,this.uInt32),up(this.smpl.dwMIDIUnityNote,this.uInt32),up(this.smpl.dwMIDIPitchFraction,this.uInt32),up(this.smpl.dwSMPTEFormat,this.uInt32),up(this.smpl.dwSMPTEOffset,this.uInt32),up(this.smpl.dwNumSampleLoops,this.uInt32),up(this.smpl.dwSamplerData,this.uInt32),n)}return this.enforceByteLen_(e),e}getSmplLoopsBytes_(){let e=[];for(let n=0;n<this.smpl.dwNumSampleLoops;n++)e=e.concat(up(this.smpl.loops[n].dwName,this.uInt32),up(this.smpl.loops[n].dwType,this.uInt32),up(this.smpl.loops[n].dwStart,this.uInt32),up(this.smpl.loops[n].dwEnd,this.uInt32),up(this.smpl.loops[n].dwFraction,this.uInt32),up(this.smpl.loops[n].dwPlayCount,this.uInt32));return e}getFactBytes_(){let e=[];return this.fact.chunkId&&(e=e.concat(ap(this.fact.chunkId),up(this.fact.chunkSize,this.uInt32),up(this.fact.dwSampleLength,this.uInt32))),this.enforceByteLen_(e),e}getFmtBytes_(){let e=[];if(this.fmt.chunkId){let n=e.concat(ap(this.fmt.chunkId),up(this.fmt.chunkSize,this.uInt32),up(this.fmt.audioFormat,this.uInt16),up(this.fmt.numChannels,this.uInt16),up(this.fmt.sampleRate,this.uInt32),up(this.fmt.byteRate,this.uInt32),up(this.fmt.blockAlign,this.uInt16),up(this.fmt.bitsPerSample,this.uInt16),this.getFmtExtensionBytes_());return this.enforceByteLen_(n),n}throw Error('Could not find the "fmt " chunk')}getFmtExtensionBytes_(){let e=[];return this.fmt.chunkSize>16&&(e=e.concat(up(this.fmt.cbSize,this.uInt16))),this.fmt.chunkSize>18&&(e=e.concat(up(this.fmt.validBitsPerSample,this.uInt16))),this.fmt.chunkSize>20&&(e=e.concat(up(this.fmt.dwChannelMask,this.uInt32))),this.fmt.chunkSize>24&&(e=e.concat(up(this.fmt.subformat[0],this.uInt32),up(this.fmt.subformat[1],this.uInt32),up(this.fmt.subformat[2],this.uInt32),up(this.fmt.subformat[3],this.uInt32))),e}getLISTBytes_(){let e=[];for(let n=0;n<this.LIST.length;n++){let t=this.getLISTSubChunksBytes_(this.LIST[n].subChunks,this.LIST[n].format);e=e.concat(ap(this.LIST[n].chunkId),up(t.length+4,this.uInt32),ap(this.LIST[n].format),t)}return this.enforceByteLen_(e),e}getLISTSubChunksBytes_(e,n){let t=[];for(let r=0,a=e.length;r<a;r++)"INFO"==n?t=t.concat(this.getLISTINFOSubChunksBytes_(e[r])):"adtl"==n&&(t=t.concat(this.getLISTadtlSubChunksBytes_(e[r]))),this.enforceByteLen_(t);return t}getLISTINFOSubChunksBytes_(e){let n=[],t=mp(e.value,e.value.length);return n=n.concat(ap(e.chunkId),up(t.length+1,this.uInt32),t),n.push(0),n}getLISTadtlSubChunksBytes_(e){let n=[];if(["labl","note"].indexOf(e.chunkId)>-1){let t=mp(e.value,e.value.length);n=n.concat(ap(e.chunkId),up(t.length+4+1,this.uInt32),up(e.dwName,this.uInt32),t),n.push(0)}else"ltxt"==e.chunkId&&(n=n.concat(this.getLtxtChunkBytes_(e)));return n}getLtxtChunkBytes_(e){return[].concat(ap(e.chunkId),up(e.value.length+20,this.uInt32),up(e.dwName,this.uInt32),up(e.dwSampleLength,this.uInt32),up(e.dwPurposeID,this.uInt32),up(e.dwCountry,this.uInt16),up(e.dwLanguage,this.uInt16),up(e.dwDialect,this.uInt16),up(e.dwCodePage,this.uInt16),mp(e.value,e.value.length))}get_PMXBytes_(){let e=[];if(this._PMX.chunkId){let n=ap(this._PMX.value);this._PMX.chunkSize=n.length,e=e.concat(ap(this._PMX.chunkId),up(this._PMX.chunkSize,this.uInt32),n)}return this.enforceByteLen_(e),e}getJunkBytes_(){let e=[];return this.junk.chunkId?e.concat(ap(this.junk.chunkId),up(this.junk.chunkData.length,this.uInt32),this.junk.chunkData):(this.enforceByteLen_(e),e)}enforceByteLen_(e){e.length%2&&e.push(0)}}function yp(e,n,t){return!(t<1||e*(n/8)*t>4294967295)}class bp extends gp{constructor(){super(),this.bitDepth="0",this.dataType={bits:0,be:!1},this.WAV_AUDIO_FORMATS={4:17,8:1,"8a":6,"8m":7,16:1,24:1,32:1,"32f":3,64:3}}fromScratch(e,n,t,r,a){a=a||{},this.clearHeaders(),this.newWavFile_(e,n,t,r,a)}fromBuffer(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super.fromBuffer(e,n),this.bitDepthFromFmt_(),this.updateDataType_()}toBuffer(){return this.validateWavHeader_(),super.toBuffer()}getSamples(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Float64Array,t=new n(this.data.samples.length/(this.dataType.bits/8));return ip(this.data.samples,this.dataType,t,0,this.data.samples.length),!e&&this.fmt.numChannels>1?function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=[];for(let a=0;a<n;a++)r[a]=new t(e.length/n);for(let a=0;a<n;a++)for(let t=a,s=0;t<e.length;t+=n,s++)r[a][s]=e[t];return r}(t,this.fmt.numChannels,n):t}getSample(e){if((e*=this.dataType.bits/8)+this.dataType.bits/8>this.data.samples.length)throw new Error("Range error");return cp(this.data.samples.slice(e,e+this.dataType.bits/8),this.dataType)}setSample(e,n){if((e*=this.dataType.bits/8)+this.dataType.bits/8>this.data.samples.length)throw new Error("Range error");lp(n,this.dataType,this.data.samples,e)}getiXML(){return this.iXML.value}setiXML(e){if("string"!==typeof e)throw new TypeError("iXML value must be a string.");this.iXML.value=e,this.iXML.chunkId="iXML"}get_PMX(){return this._PMX.value}set_PMX(e){if("string"!==typeof e)throw new TypeError("_PMX value must be a string.");this._PMX.value=e,this._PMX.chunkId="_PMX"}newWavFile_(e,n,t,r,a){a.container||(a.container="RIFF"),this.container=a.container,this.bitDepth=t,r=function(e){let n=[];if(e.length>0)if(e[0].constructor!==Number){n=new Float64Array(e[0].length*e.length);for(let t=0,r=e[0].length,a=0;t<r;t++)for(let s=0,o=e.length;s<o;s++,a++)n[a]=e[s][t]}else n=e;return n}(r),this.updateDataType_();let s=this.dataType.bits/8;this.data.samples=new Uint8Array(r.length*s),op(r,this.dataType,this.data.samples,0),this.makeWavHeader_(t,e,n,s,this.data.samples.length,a),this.data.chunkId="data",this.data.chunkSize=this.data.samples.length,this.validateWavHeader_()}makeWavHeader_(e,n,t,r,a,s){"4"==e?this.createADPCMHeader_(e,n,t,r,a,s):"8a"==e||"8m"==e?this.createALawMulawHeader_(e,n,t,r,a,s):-1==Object.keys(this.WAV_AUDIO_FORMATS).indexOf(e)||n>2?this.createExtensibleHeader_(e,n,t,r,a,s):this.createPCMHeader_(e,n,t,r,a,s)}createPCMHeader_(e,n,t,r,a,s){this.container=s.container,this.chunkSize=36+a,this.format="WAVE",this.bitDepth=e,this.fmt={chunkId:"fmt ",chunkSize:16,audioFormat:this.WAV_AUDIO_FORMATS[e]||65534,numChannels:n,sampleRate:t,byteRate:n*r*t,blockAlign:n*r,bitsPerSample:parseInt(e,10),cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]}}createADPCMHeader_(e,n,t,r,a,s){this.createPCMHeader_(e,n,t,r,a,s),this.chunkSize=40+a,this.fmt.chunkSize=20,this.fmt.byteRate=4055,this.fmt.blockAlign=256,this.fmt.bitsPerSample=4,this.fmt.cbSize=2,this.fmt.validBitsPerSample=505,this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:2*a}}createExtensibleHeader_(e,n,t,r,a,s){this.createPCMHeader_(e,n,t,r,a,s),this.chunkSize=60+a,this.fmt.chunkSize=40,this.fmt.bitsPerSample=1+(parseInt(e,10)-1|7),this.fmt.cbSize=22,this.fmt.validBitsPerSample=parseInt(e,10),this.fmt.dwChannelMask=function(e){let n=0;1===e?n=4:2===e?n=3:4===e?n=51:6===e?n=63:8===e&&(n=1599);return n}(n),this.fmt.subformat=[1,1048576,2852126848,1905997824]}createALawMulawHeader_(e,n,t,r,a,s){this.createPCMHeader_(e,n,t,r,a,s),this.chunkSize=40+a,this.fmt.chunkSize=20,this.fmt.cbSize=2,this.fmt.validBitsPerSample=8,this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:a}}bitDepthFromFmt_(){3===this.fmt.audioFormat&&32===this.fmt.bitsPerSample?this.bitDepth="32f":6===this.fmt.audioFormat?this.bitDepth="8a":7===this.fmt.audioFormat?this.bitDepth="8m":this.bitDepth=this.fmt.bitsPerSample.toString()}validateBitDepth_(){if(!this.WAV_AUDIO_FORMATS[this.bitDepth]){if(parseInt(this.bitDepth,10)>8&&parseInt(this.bitDepth,10)<54)return!0;throw new Error("Invalid bit depth.")}return!0}updateDataType_(){this.dataType={bits:1+(parseInt(this.bitDepth,10)-1|7),fp:"32f"==this.bitDepth||"64"==this.bitDepth,signed:"8"!=this.bitDepth,be:"RIFX"==this.container},["4","8a","8m"].indexOf(this.bitDepth)>-1&&(this.dataType.bits=8,this.dataType.signed=!1)}validateWavHeader_(){if(this.validateBitDepth_(),e=this.fmt.numChannels,n=this.fmt.bitsPerSample,e<1||e*n/8>65535)throw new Error("Invalid number of channels.");var e,n;if(!yp(this.fmt.numChannels,this.fmt.bitsPerSample,this.fmt.sampleRate))throw new Error("Invalid sample rate.")}}class vp extends bp{getTag(e){let n=this.getTagIndex_(e);return null!==n.TAG?this.LIST[n.LIST].subChunks[n.TAG].value:null}setTag(e,n){e=function(e){if(e.constructor!==String)throw new Error("Invalid tag name.");if(e.length<4)for(let n=0,t=4-e.length;n<t;n++)e+=" ";return e}(e);let t=this.getTagIndex_(e);null!==t.TAG?(this.LIST[t.LIST].subChunks[t.TAG].chunkSize=n.length+1,this.LIST[t.LIST].subChunks[t.TAG].value=n):null!==t.LIST?this.LIST[t.LIST].subChunks.push({chunkId:e,chunkSize:n.length+1,value:n}):(this.LIST.push({chunkId:"LIST",chunkSize:8+n.length+1,format:"INFO",subChunks:[]}),this.LIST[this.LIST.length-1].subChunks.push({chunkId:e,chunkSize:n.length+1,value:n}))}deleteTag(e){let n=this.getTagIndex_(e);return null!==n.TAG&&(this.LIST[n.LIST].subChunks.splice(n.TAG,1),!0)}listTags(){let e=this.getLISTIndex("INFO"),n={};if(null!==e)for(let t=0,r=this.LIST[e].subChunks.length;t<r;t++)n[this.LIST[e].subChunks[t].chunkId]=this.LIST[e].subChunks[t].value;return n}getLISTIndex(e){for(let n=0,t=this.LIST.length;n<t;n++)if(this.LIST[n].format==e)return n;return null}getTagIndex_(e){let n={LIST:null,TAG:null};for(let t=0,r=this.LIST.length;t<r;t++)if("INFO"==this.LIST[t].format){n.LIST=t;for(let r=0,a=this.LIST[t].subChunks.length;r<a;r++)if(this.LIST[t].subChunks[r].chunkId==e){n.TAG=r;break}break}return n}}class _p extends vp{listCuePoints(){let e=this.getCuePoints_();for(let n=0,t=e.length;n<t;n++)e[n].position=e[n].dwSampleOffset/this.fmt.sampleRate*1e3,e[n].dwSampleLength?(e[n].end=e[n].dwSampleLength/this.fmt.sampleRate*1e3,e[n].end+=e[n].position):e[n].end=null,delete e[n].value;return e}setCuePoint(e){this.cue.chunkId="cue ",e.label||(e.label="");let n=this.getCuePoints_();this.clearLISTadtl_(),this.cue.points=[],e.dwSampleOffset=e.position*this.fmt.sampleRate/1e3,e.dwSampleLength=0,e.end&&(e.dwSampleLength=e.end*this.fmt.sampleRate/1e3-e.dwSampleOffset),0===n.length?this.setCuePoint_(e,1):this.setCuePointInOrder_(n,e),this.cue.dwCuePoints=this.cue.points.length}deleteCuePoint(e){this.cue.chunkId="cue ";let n=this.getCuePoints_();this.clearLISTadtl_();let t=this.cue.points.length;this.cue.points=[];for(let r=0;r<t;r++)r+1!==e&&this.setCuePoint_(n[r],r+1);this.cue.dwCuePoints=this.cue.points.length,this.cue.dwCuePoints?this.cue.chunkId="cue ":(this.cue.chunkId="",this.clearLISTadtl_())}updateLabel(e,n){let t=this.getLISTIndex("adtl");if(null!==t)for(let r=0,a=this.LIST[t].subChunks.length;r<a;r++)this.LIST[t].subChunks[r].dwName==e&&(this.LIST[t].subChunks[r].value=n)}getCuePoints_(){let e=[];for(let n=0;n<this.cue.points.length;n++){let t=this.cue.points[n],r=this.getDataForCuePoint_(t.dwName);r.label=r.value?r.value:"",r.dwPosition=t.dwPosition,r.fccChunk=t.fccChunk,r.dwChunkStart=t.dwChunkStart,r.dwBlockStart=t.dwBlockStart,r.dwSampleOffset=t.dwSampleOffset,e.push(r)}return e}getDataForCuePoint_(e){let n=this.getLISTIndex("adtl"),t={};return null!==n&&this.getCueDataFromLIST_(t,n,e),t}getCueDataFromLIST_(e,n,t){for(let r=0,a=this.LIST[n].subChunks.length;r<a;r++)if(this.LIST[n].subChunks[r].dwName==t){let t=this.LIST[n].subChunks[r];e.value=t.value||e.value,e.dwName=t.dwName||0,e.dwSampleLength=t.dwSampleLength||0,e.dwPurposeID=t.dwPurposeID||0,e.dwCountry=t.dwCountry||0,e.dwLanguage=t.dwLanguage||0,e.dwDialect=t.dwDialect||0,e.dwCodePage=t.dwCodePage||0}}setCuePoint_(e,n){this.cue.points.push({dwName:n,dwPosition:e.dwPosition?e.dwPosition:0,fccChunk:e.fccChunk?e.fccChunk:"data",dwChunkStart:e.dwChunkStart?e.dwChunkStart:0,dwBlockStart:e.dwBlockStart?e.dwBlockStart:0,dwSampleOffset:e.dwSampleOffset}),this.setLabl_(e,n)}setCuePointInOrder_(e,n){let t=!1;for(let r=0;r<e.length;r++)e[r].dwSampleOffset>n.dwSampleOffset&&!t?(this.setCuePoint_(n,r+1),this.setCuePoint_(e[r],r+2),t=!0):this.setCuePoint_(e[r],t?r+2:r+1);t||this.setCuePoint_(n,this.cue.points.length+1)}clearLISTadtl_(){for(let e=0,n=this.LIST.length;e<n;e++)"adtl"==this.LIST[e].format&&this.LIST.splice(e)}setLabl_(e,n){let t=this.getLISTIndex("adtl");null===t&&(this.LIST.push({chunkId:"LIST",chunkSize:4,format:"adtl",subChunks:[]}),t=this.LIST.length-1),this.setLabelText_(t,e,n),e.dwSampleLength&&this.setLtxtChunk_(t,e,n)}setLabelText_(e,n,t){this.LIST[e].subChunks.push({chunkId:"labl",chunkSize:4,dwName:t,value:n.label}),this.LIST[e].chunkSize+=12}setLtxtChunk_(e,n,t){this.LIST[e].subChunks.push({chunkId:"ltxt",chunkSize:20,dwName:t,dwSampleLength:n.dwSampleLength,dwPurposeID:n.dwPurposeID||0,dwCountry:n.dwCountry||0,dwLanguage:n.dwLanguage||0,dwDialect:n.dwDialect||0,dwCodePage:n.dwCodePage||0,value:n.label}),this.LIST[e].chunkSize+=28}}class Sp{constructor(e,n,t){this.length_=e,this.scaleFactor_=(e-1)/n,this.interpolate=this.sinc,"point"===t.method?this.interpolate=this.point:"linear"===t.method?this.interpolate=this.linear:"cubic"===t.method&&(this.interpolate=this.cubic),this.tangentFactor_=1-Math.max(0,Math.min(1,t.tension||0)),this.sincFilterSize_=t.sincFilterSize||1,this.kernel_=function(e){return function(n){return function(e){if(0===e)return 1;return Math.sin(Math.PI*e)/(Math.PI*e)}(n)*e(n)}}(t.sincWindow||wp)}point(e,n){return this.getClippedInput_(Math.round(this.scaleFactor_*e),n)}linear(e,n){e=this.scaleFactor_*e;let t=Math.floor(e);return(1-(e-=t))*this.getClippedInput_(t,n)+e*this.getClippedInput_(t+1,n)}cubic(e,n){e=this.scaleFactor_*e;let t=Math.floor(e),r=[this.getTangent_(t,n),this.getTangent_(t+1,n)],a=[this.getClippedInput_(t,n),this.getClippedInput_(t+1,n)],s=(e-=t)*e,o=e*s;return(2*o-3*s+1)*a[0]+(o-2*s+e)*r[0]+(-2*o+3*s)*a[1]+(o-s)*r[1]}sinc(e,n){e=this.scaleFactor_*e;let t=Math.floor(e),r=t-this.sincFilterSize_+1,a=t+this.sincFilterSize_,s=0;for(let o=r;o<=a;o++)s+=this.kernel_(e-o)*this.getClippedInput_(o,n);return s}getTangent_(e,n){return this.tangentFactor_*(this.getClippedInput_(e+1,n)-this.getClippedInput_(e-1,n))/2}getClippedInput_(e,n){return 0<=e&&e<this.length_?n[e]:0}}function wp(e){return Math.exp(-e/2*e/2)}const kp={point:!1,linear:!1,cubic:!0,sinc:!0},Ip={IIR:16,FIR:71},Tp={IIR:class{constructor(e,n,t){let r=[];for(let a=0;a<e;a++)r.push(this.getCoeffs_({Fs:n,Fc:t,Q:.5/Math.sin(Math.PI/(2*e)*(a+.5))}));this.stages=[];for(let a=0;a<r.length;a++)this.stages[a]={b0:r[a].b[0],b1:r[a].b[1],b2:r[a].b[2],a1:r[a].a[0],a2:r[a].a[1],k:r[a].k,z:[0,0]}}filter(e){let n=e;for(let t=0,r=this.stages.length;t<r;t++)n=this.runStage_(t,n);return n}getCoeffs_(e){let n={a:[],b:[]},t=this.preCalc_(e,n);return n.k=1,n.b.push((1-t.cw)/(2*t.a0)),n.b.push(2*n.b[0]),n.b.push(n.b[0]),n}preCalc_(e,n){let t={},r=2*Math.PI*e.Fc/e.Fs;return t.alpha=Math.sin(r)/(2*e.Q),t.cw=Math.cos(r),t.a0=1+t.alpha,n.a0=t.a0,n.a.push(-2*t.cw/t.a0),n.k=1,n.a.push((1-t.alpha)/t.a0),t}runStage_(e,n){let t=n*this.stages[e].k-this.stages[e].a1*this.stages[e].z[0]-this.stages[e].a2*this.stages[e].z[1],r=this.stages[e].b0*t+this.stages[e].b1*this.stages[e].z[0]+this.stages[e].b2*this.stages[e].z[1];return this.stages[e].z[1]=this.stages[e].z[0],this.stages[e].z[0]=t,r}reset(){for(let e=0;e<this.stages.length;e++)this.stages[e].z=[0,0]}},FIR:class{constructor(e,n,t){let r=2*Math.PI*t/n,a=0;this.filters=[];for(let s=0;s<=e;s++)s-e/2===0?this.filters[s]=r:(this.filters[s]=Math.sin(r*(s-e/2))/(s-e/2),this.filters[s]*=.54-.46*Math.cos(2*Math.PI*s/e)),a+=this.filters[s];for(let s=0;s<=e;s++)this.filters[s]/=a;this.z=this.initZ_()}filter(e){this.z.buf[this.z.pointer]=e;let n=0;for(let t=0,r=this.z.buf.length;t<r;t++)n+=this.filters[t]*this.z.buf[(this.z.pointer+t)%this.z.buf.length];return this.z.pointer=(this.z.pointer+1)%this.z.buf.length,n}reset(){this.z=this.initZ_()}initZ_(){let e=[];for(let n=0;n<this.filters.length-1;n++)e.push(0);return{buf:e,pointer:0}}}};function xp(e,n,t){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r=r||{};let a=(t-n)/n+1,s=new Float64Array(e.length*a);r.method=r.method||"cubic";let o=new Sp(e.length,s.length,{method:r.method,tension:r.tension||0,sincFilterSize:r.sincFilterSize||6,sincWindow:r.sincWindow||void 0,clip:r.clip||"mirror"});if(void 0===r.LPF&&(r.LPF=kp[r.method]),r.LPF){r.LPFType=r.LPFType||"IIR";const a=Tp[r.LPFType];if(t>n){!function(e,n,t,r){for(let a=0,s=n.length;a<s;a++)n[a]=r.filter(t.interpolate(a,e));r.reset();for(let a=n.length-1;a>=0;a--)n[a]=r.filter(n[a])}(e,s,o,new a(r.LPForder||Ip[r.LPFType],t,n/2))}else{!function(e,n,t,r){for(let a=0,s=e.length;a<s;a++)e[a]=r.filter(e[a]);r.reset();for(let a=e.length-1;a>=0;a--)e[a]=r.filter(e[a]);Ap(e,n,t)}(e,s,o,new a(r.LPForder||Ip[r.LPFType],n,t/2))}}else Ap(e,s,o);return s}function Ap(e,n,t){for(let r=0,a=n.length;r<a;r++)n[r]=t.interpolate(r,e)}class Ep extends _p{toRIFF(){let e=new Float64Array(Op(this.data.samples.length,this.dataType.bits/8));ip(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,e,{container:"RIFF"})}toRIFX(){let e=new Float64Array(Op(this.data.samples.length,this.dataType.bits/8));ip(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,e,{container:"RIFX"})}toIMAADPCM(){if(8e3!==this.fmt.sampleRate)throw new Error("Only 8000 Hz files can be compressed as IMA-ADPCM.");if(1!==this.fmt.numChannels)throw new Error("Only mono files can be compressed as IMA-ADPCM.");{this.assure16Bit_();let e=new Int16Array(Op(this.data.samples.length,2));ip(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"4",function(e){let n={index:0,predicted:0,step:7},t=new Uint8Array(e.length),r=[],a=0,s=0;for(let i=0,l=e.length;i<l;i++)i%505==0&&0!=i&&(t.set(zf(r,n),a),a+=256,r=[],s++),r.push(e[i]);let o=e.length/2;return o%2&&o++,t.slice(0,o+512+4*s)}(e),{container:this.correctContainer_()})}}fromIMAADPCM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"16";this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,t={index:0,predicted:0,step:7},r=new Int16Array(2*e.length),a=[],s=0;for(let o=0,i=e.length;o<i;o++){if(o%n==0&&0!=o){let e=Uf(a,t);r.set(e,s),s+=e.length,a=[]}a.push(e[o])}return r}(this.data.samples,this.fmt.blockAlign),{container:this.correctContainer_()}),"16"!=e&&this.toBitDepth(e)}toALaw(){this.assure16Bit_();let e=new Int16Array(Op(this.data.samples.length,2));ip(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"8a",function(e){let n=new Uint8Array(e.length);for(let t=0,r=e.length;t<r;t++)n[t]=Gf(e[t]);return n}(e),{container:this.correctContainer_()})}fromALaw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"16";this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",function(e){let n=new Int16Array(e.length);for(let t=0,r=e.length;t<r;t++)n[t]=Wf(e[t]);return n}(this.data.samples),{container:this.correctContainer_()}),"16"!=e&&this.toBitDepth(e)}toMuLaw(){this.assure16Bit_();let e=new Int16Array(Op(this.data.samples.length,2));ip(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"8m",function(e){let n=new Uint8Array(e.length);for(let t=0,r=e.length;t<r;t++)n[t]=Yf(e[t]);return n}(e),{container:this.correctContainer_()})}fromMuLaw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"16";this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",function(e){let n=new Int16Array(e.length);for(let t=0,r=e.length;t<r;t++)n[t]=Xf(e[t]);return n}(this.data.samples),{container:this.correctContainer_()}),"16"!=e&&this.toBitDepth(e)}toBitDepth(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=e,r=this.bitDepth;n||("32f"!=e&&(t=this.dataType.bits.toString()),r=""+this.dataType.bits),this.assureUncompressed_();let a=this.getSamples(!0),s=new Float64Array(a.length);Cf(a,r,s,t),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,e,s,{container:this.correctContainer_()})}toSampleRate(e,n){this.validateResample_(e);let t=this.getSamples(),r=[];if(t.constructor===Float64Array)r=xp(t,this.fmt.sampleRate,e,n);else for(let a=0;a<t.length;a++)r.push(xp(t[a],this.fmt.sampleRate,e,n));this.fromExisting_(this.fmt.numChannels,e,this.bitDepth,r,{container:this.correctContainer_()})}validateResample_(e){if(!yp(this.fmt.numChannels,this.fmt.bitsPerSample,e))throw new Error("Invalid sample rate.");if(["4","8a","8m"].indexOf(this.bitDepth)>-1)throw new Error("wavefile can't change the sample rate of compressed files.")}assure16Bit_(){this.assureUncompressed_(),"16"!=this.bitDepth&&this.toBitDepth("16")}assureUncompressed_(){"8a"==this.bitDepth?this.fromALaw():"8m"==this.bitDepth?this.fromMuLaw():"4"==this.bitDepth&&this.fromIMAADPCM()}correctContainer_(){return"RF64"==this.container?"RIFF":this.container}fromExisting_(e,n,t,r,a){let s=new _p;Object.assign(this.fmt,s.fmt),Object.assign(this.fact,s.fact),Object.assign(this.ds64,s.ds64),Object.assign(this.data,s.data),this.newWavFile_(e,n,t,r,a)}}function Op(e,n){let t=e/n;return t%2&&t++,t}class Cp extends Ep{constructor(e){super(),e&&this.fromBuffer(e)}fromBase64(e){this.fromBuffer(function(e){let n=new Uint8Array(256);for(let a=0;a<64;a++)n[Of.charCodeAt(a)]=a;let t=.75*e.length;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);let r=new Uint8Array(t);for(let a=0,s=0;a<e.length;a+=4){let t=n[e.charCodeAt(a)],o=n[e.charCodeAt(a+1)],i=n[e.charCodeAt(a+2)],l=n[e.charCodeAt(a+3)];r[s++]=t<<2|o>>4,r[s++]=(15&o)<<4|i>>2,r[s++]=(3&i)<<6|63&l}return r}(e))}toBase64(){return function(e){let n="";for(let t=0;t<e.length;t+=3)n+=Of[e[t]>>2],n+=Of[(3&e[t])<<4|e[t+1]>>4],n+=Of[(15&e[t+1])<<2|e[t+2]>>6],n+=Of[63&e[t+2]];return e.length%3===2?n=n.substring(0,n.length-1)+"=":e.length%3===1&&(n=n.substring(0,n.length-2)+"=="),n}(this.toBuffer())}toDataURI(){return"data:audio/wav;base64,"+this.toBase64()}fromDataURI(e){this.fromBase64(e.replace("data:audio/wav;base64,",""))}}const Mp=(e,n)=>{const t=e.length;let r=new Cp;return r.fromScratch(t,n,"32f",e.map((e=>e.map((e=>e))))),r.toBuffer()},Fp=async(e,n)=>{switch(n){case"javascript":return xf(Ws(e,"javascript"));case"assemblyscript":return(async e=>{const{rawModule:n,engineData:t,forwardReferences:r}=await If(e),a=await Tf(n,t,r);return lf(n,a)})(Ws(e,"wasm"))}},Pp=(e,n,t)=>{const{channelCount:r,sampleRate:a,blockSize:s}=t,o=Math.round(n*a),i=Np("in",t),l=Np("out",t),u=Np("out",t,o);e.initialize(a,s);let c=0;for(;c<o;){e.dspLoop(i,l);for(let e=0;e<r.out;e++)u[e].set(l[e].slice(0,Math.min(s,o-c)),c);c+=s}return u},Np=(e,n,t)=>{const{channelCount:r,blockSize:a,bitDepth:s}=n;void 0===t&&(t=a);const o=of(s),i=[];for(let l=0;l<r[e];l++)i.push(new o(Math.round(t)));return i},Rp={pd:{extensions:[".pd"],description:"Pure Data text"},pdJson:{extensions:[".pd.json"],description:"Pure Data JSON"},dspGraph:{extensions:[".dsp-graph.json"],description:"WebPd DSP graph"},javascript:{extensions:[".js"],description:"JavaScript WebPd module"},assemblyscript:{extensions:[".as",".ts"],description:"AssemblyScript DSP code"},wasm:{extensions:[".wasm"],description:"Web Assembly WebPd module"},wav:{extensions:[".wav"],description:"An audio preview of your patch"},app:{extensions:[],description:"Complete web app embedding your compiled WebPd patch"}},Lp=["pd","pdJson","dspGraph",[["javascript","wav"],["assemblyscript","wasm","wav"],["assemblyscript","wasm","app"],["javascript","app"]]],Dp=e=>{const n=Object.entries(Rp).filter((n=>{let[t,r]=n;return!!r.extensions.some((n=>e.endsWith(n)))}));return 0===n.length?null:n[0][0]},zp=(e,n,t)=>{let r=Up(Lp,n,[]).filter((n=>n.includes(e))).map((n=>n.slice(n.indexOf(e)+1)));return t&&t!==e&&(r=r.filter((e=>e.includes(t)))),0===r.length?null:r[0]},Up=(e,n,t)=>{let r=[...t];return e.flatMap((e=>Array.isArray(e)?Up(e,n,r):(r=[...r,e],e===n?[r]:[])))},jp=(e,n)=>{let t=[...n];return e.flatMap(((n,r)=>Array.isArray(n)?jp(n,t):(t=[...t,n],r===e.length-1?[t]:[])))},Bp={translateArgs:(e,n)=>{let t;if(e.args.length)t=e.args.map((e=>Cc(e)-1));else{const r=new Set;n.connections.forEach((n=>{n.sink.nodeId===e.id&&r.add(n.sink.portletId)}));const a=Math.max(...r);t=[];for(let e=0;e<=a;e++)t.push(e)}return{channelMapping:t}},build:e=>({inlets:Ys(e.channelMapping,((e,n)=>["".concat(n),{type:"signal",id:"".concat(n)}])),outlets:{},isPullingSignal:!0})},Vp={flags:{alphaName:"dac_t"},dsp:e=>{let{ins:n,globs:t,node:r,settings:{audio:a,target:s}}=e;return to([r.args.channelMapping.map(((e,n)=>[e,n])).filter((e=>{let[n]=e;return 0<=n&&n<a.channelCount.out})).map((e=>{let[r,a]=e;return"javascript"===s?"".concat(t.output,"[").concat(r,"][").concat(t.iterFrame,"] = ").concat(n["".concat(a)]):"".concat(t.output,"[").concat(t.iterFrame," + ").concat(t.blockSize," * ").concat(r,"] = ").concat(n["".concat(a)])}))])}},Gp={translateArgs:(e,n)=>{let t;if(e.args.length)t=e.args.map((e=>Cc(e)-1));else{const r=new Set;n.connections.forEach((n=>{n.source.nodeId===e.id&&r.add(n.source.portletId)}));const a=Math.max(...r);t=[];for(let e=0;e<=a;e++)t.push(e)}return{channelMapping:t}},build:e=>({inlets:{},outlets:Ys(e.channelMapping,((e,n)=>["".concat(n),{type:"signal",id:"".concat(n)}]))})},Wp={flags:{alphaName:"adc_t"},dsp:e=>{let{outs:n,globs:t,node:r,settings:{audio:a,target:s}}=e;return to([r.args.channelMapping.map(((e,n)=>[e,n])).filter((e=>{let[n]=e;return 0<=n&&n<a.channelCount.in})).map((e=>{let[r,a]=e;return"javascript"===s?"".concat(n["".concat(a)]," = ").concat(t.input,"[").concat(r,"][").concat(t.iterFrame,"]"):"".concat(n["".concat(a)]," = ").concat(t.input,"[").concat(t.iterFrame," + ").concat(t.blockSize," * ").concat(r,"]")}))])}};var $p;const Hp={flags:{alphaName:"samplerate_t"},messageReceivers:e=>{let{globs:n,snds:t}=e;return{0:eo([Js("Message","m")])($p||($p=r(["\n            if (msg_isBang(m)) { \n                ","(msg_floats([","])) \n                return\n            }\n        "])),t.$0,n.sampleRate)}},dependencies:[$d]};var Kp,qp,Yp,Xp,Jp;const Zp={translateArgs:e=>({frequency:Fc(e.args[0])||0}),build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:(e,n)=>{let{frequency:t}=n;if("0"===e)return{initialSignalValue:t}}},Qp=e=>{let{alphaName:n,coeff:t,generateOperation:a}=e;const s={flags:{alphaName:n},state:e=>{let{ns:n}=e;return no(n.State,[Js("Float","phase",0),Js("Float","step",0)])},initialization:e=>{let{ns:n,state:t}=e;return ro(Kp||(Kp=r(["\n            ","(",", 0)\n        "])),n.setStep,t)},messageReceivers:e=>{let{ns:n,state:t}=e;return{1:Vc(n.setPhase,t)}},dsp:e=>{let{ns:n,state:t,outs:s,ins:o}=e;return{inlets:{0:ro(qp||(qp=r(["","(",", ",")"])),n.setStep,t,o.$0)},loop:ro(Yp||(Yp=r(["\n                "," = ","\n                ",".phase += ",".step\n            "])),s.$0,a("".concat(t,".phase")),t,t)}},core:e=>{let{ns:n,globs:a}=e;return to([Qs(n.setStep,[Js(n.State,"state"),Js("Float","freq")])(Xp||(Xp=r(["\n                    state.step = ("," / ",") * freq\n                "])),t,a.sampleRate),Qs(n.setPhase,[Js(n.State,"state"),Js("Float","phase")])(Jp||(Jp=r(["\n                    state.phase = phase % 1.0","\n                "])),t?" * ".concat(t):"")])}};return s},eh={"osc~":Qp({alphaName:"osc_t",coeff:"2 * Math.PI",generateOperation:e=>"Math.cos(".concat(e,")")}),"phasor~":Qp({alphaName:"phasor_t",coeff:"1",generateOperation:e=>"".concat(e," % 1")})},nh={"osc~":Zp,"phasor~":Zp};var th;const rh={translateArgs:e=>{let{args:n}=e;return{minValue:Fc(n[0])||0,maxValue:Fc(n[1])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"signal",id:"0"}}})},ah={flags:{isPureFunction:!0,isDspInline:!0,alphaName:"clip_t"},state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("Float","minValue",n.minValue),Js("Float","maxValue",n.maxValue)])},dsp:e=>{let{ins:n,state:t}=e;return ro(th||(th=r(["Math.max(Math.min(",".maxValue, ","), ",".minValue)"])),t,n.$0,t)},messageReceivers:e=>{let{state:n}=e;return{1:Bc("".concat(n,".minValue")),2:Bc("".concat(n,".maxValue"))}}};var sh,oh;const ih={translateArgs:()=>({}),build:()=>({inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"},1:{type:"signal",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},lh={flags:{alphaName:"samphold_t"},state:e=>{let{ns:n}=e;return no(n.State,[Js("Float","signalMemory",0),Js("Float","controlMemory",0)])},dsp:e=>{let{ins:n,outs:t,state:a}=e;return ro(sh||(sh=r(["\n        ",".signalMemory = "," = "," < ",".controlMemory ? ",": ",".signalMemory\n        ",".controlMemory = ","\n    "])),a,t.$0,n.$1,a,n.$0,a,a,n.$1)},messageReceivers:e=>{let{state:n}=e;return{"0_message":eo([Js("Message","m")],"void")(oh||(oh=r(["\n            if (\n                msg_isMatching(m, [MSG_STRING_TOKEN, MSG_FLOAT_TOKEN])\n                && msg_readStringToken(m, 0) === 'set'\n            ) {\n                ",".signalMemory = msg_readFloatToken(m, 1)\n                return\n    \n            } else if (\n                msg_isMatching(m, [MSG_STRING_TOKEN, MSG_FLOAT_TOKEN])\n                && msg_readStringToken(m, 0) === 'reset'\n            ) {\n                ",".controlMemory = msg_readFloatToken(m, 1)\n                return\n    \n            } else if (\n                msg_isMatching(m, [MSG_STRING_TOKEN])\n                && msg_readStringToken(m, 0) === 'reset'\n            ) {\n                ",".controlMemory = 1e20\n                return\n            }\n        "])),n,n,n)}}};var uh,ch;const dh={translateArgs:()=>({}),build:()=>({inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"}},outlets:{0:{type:"message",id:"0"}},isPullingSignal:!0}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},fh={flags:{alphaName:"snapshot_t"},state:e=>{let{ns:n}=e;return no(n.State,[Js("Float","currentValue",0)])},dsp:e=>{let{ins:n,state:t}=e;return ro(uh||(uh=r(["\n        ",".currentValue = ","\n    "])),t,n.$0)},messageReceivers:e=>{let{state:n,snds:t}=e;return{"0_message":eo([Js("Message","m")],"void")(ch||(ch=r(["\n            if (msg_isBang(m)) {\n                ","(msg_floats([",".currentValue]))\n                return \n            }\n        "])),t.$0,n)}},dependencies:[$d]};var ph;var hh,mh,gh,yh,bh;const vh={codeGenerator:()=>to([no("LineSegment",[Js("Point","p0"),Js("Point","p1"),Js("Float","dx"),Js("Float","dy")]),Qs("computeSlope",[Js("Point","p0"),Js("Point","p1")],"Float")(hh||(hh=r(["\n            return p1.x !== p0.x ? (p1.y - p0.y) / (p1.x - p0.x) : 0\n        "]))),Qs("removePointsBeforeFrame",[Js("Array<Point>","points"),Js("Float","frame")],"Array<Point>")(mh||(mh=r(["\n            ","\n            ","\n            while (i < points.length) {\n                if (frame <= points[i].x) {\n                    newPoints.push(points[i])\n                }\n                i++\n            }\n            return newPoints\n        "])),Zs("Array<Point>","newPoints","[]"),Js("Int","i","0")),Qs("insertNewLinePoints",[Js("Array<Point>","points"),Js("Point","p0"),Js("Point","p1")],"Array<Point>")(gh||(gh=r(["\n            ","\n            ","\n            \n            // Keep the points that are before the new points added\n            while (i < points.length && points[i].x <= p0.x) {\n                newPoints.push(points[i])\n                i++\n            }\n            \n            // Find the start value of the start point :\n            \n            // 1. If there is a previous point and that previous point\n            // is on the same frame, we don't modify the start point value.\n            // (represents a vertical line).\n            if (0 < i - 1 && points[i - 1].x === p0.x) {\n\n            // 2. If new points are inserted in between already existing points \n            // we need to interpolate the existing line to find the startValue.\n            } else if (0 < i && i < points.length) {\n                newPoints.push({\n                    x: p0.x,\n                    y: interpolateLin(p0.x, points[i - 1], points[i])\n                })\n\n            // 3. If new line is inserted after all existing points, \n            // we just take the value of the last point\n            } else if (i >= points.length && points.length) {\n                newPoints.push({\n                    x: p0.x,\n                    y: points[points.length - 1].y,\n                })\n\n            // 4. If new line placed in first position, we take the defaultStartValue.\n            } else if (i === 0) {\n                newPoints.push({\n                    x: p0.x,\n                    y: p0.y,\n                })\n            }\n            \n            newPoints.push({\n                x: p1.x,\n                y: p1.y,\n            })\n            return newPoints\n        "])),Zs("Array<Point>","newPoints","[]"),Js("Int","i","0")),Qs("computeFrameAjustedPoints",[Js("Array<Point>","points")],"Array<Point>")(yh||(yh=r(["\n            if (points.length < 2) {\n                throw new Error('invalid length for points')\n            }\n\n            ","\n            ","\n            ","\n            ","\n            ","\n            \n            while(i < points.length) {\n                p = points[i]\n                frameLower = Math.floor(p.x)\n                frameUpper = frameLower + 1\n\n                // I. Placing interpolated point at the lower bound of the current frame\n                // ------------------------------------------------------------------------\n                // 1. Point is already on an exact frame,\n                if (p.x === frameLower) {\n                    newPoints.push({ x: p.x, y: p.y })\n\n                    // 1.a. if several of the next points are also on the same X,\n                    // we find the last one to draw a vertical line.\n                    while (\n                        (i + 1) < points.length\n                        && points[i + 1].x === frameLower\n                    ) {\n                        i++\n                    }\n                    if (points[i].y !== newPoints[newPoints.length - 1].y) {\n                        newPoints.push({ x: points[i].x, y: points[i].y })\n                    }\n\n                    // 1.b. if last point, we quit\n                    if (i + 1 >= points.length) {\n                        break\n                    }\n\n                    // 1.c. if next point is in a different frame we can move on to next iteration\n                    if (frameUpper <= points[i + 1].x) {\n                        i++\n                        continue\n                    }\n                \n                // 2. Point isn't on an exact frame\n                // 2.a. There's a previous point, the we use it to interpolate the value.\n                } else if (newPoints.length) {\n                    newPoints.push({\n                        x: frameLower,\n                        y: interpolateLin(frameLower, points[i - 1], p),\n                    })\n                \n                // 2.b. It's the very first point, then we don't change its value.\n                } else {\n                    newPoints.push({ x: frameLower, y: p.y })\n                }\n\n                // II. Placing interpolated point at the upper bound of the current frame\n                // ---------------------------------------------------------------------------\n                // First, we find the closest point from the frame upper bound (could be the same p).\n                // Or could be a point that is exactly placed on frameUpper.\n                while (\n                    (i + 1) < points.length \n                    && (\n                        Math.ceil(points[i + 1].x) === frameUpper\n                        || Math.floor(points[i + 1].x) === frameUpper\n                    )\n                ) {\n                    i++\n                }\n                p = points[i]\n\n                // 1. If the next point is directly in the next frame, \n                // we do nothing, as this corresponds with next iteration frameLower.\n                if (Math.floor(p.x) === frameUpper) {\n                    continue\n                \n                // 2. If there's still a point after p, we use it to interpolate the value\n                } else if (i < points.length - 1) {\n                    newPoints.push({\n                        x: frameUpper,\n                        y: interpolateLin(frameUpper, p, points[i + 1]),\n                    })\n\n                // 3. If it's the last point, we dont change the value\n                } else {\n                    newPoints.push({ x: frameUpper, y: p.y })\n                }\n\n                i++\n            }\n\n            return newPoints\n        "])),Zs("Array<Point>","newPoints","[]"),Js("Int","i","0"),Js("Point","p","points[0]"),Js("Float","frameLower","0"),Js("Float","frameUpper","0")),Qs("computeLineSegments",[Js("Array<Point>","points")],"Array<LineSegment>")(bh||(bh=r(["\n            ","\n            ","\n            ","\n            ","\n\n            while(i < points.length - 1) {\n                p0 = points[i]\n                p1 = points[i + 1]\n                lineSegments.push({\n                    p0, p1, \n                    dy: computeSlope(p0, p1),\n                    dx: 1,\n                })\n                i++\n            }\n            return lineSegments\n        "])),Zs("Array<LineSegment>","lineSegments","[]"),Js("Int","i","0"),Js("Point","p0"),Js("Point","p1"))]),dependencies:[{codeGenerator:()=>Qs("interpolateLin",[Js("Float","x"),Js("Point","p0"),Js("Point","p1")],"Float")(ph||(ph=r(["\n            return p0.y + (x - p0.x) * (p1.y - p0.y) / (p1.x - p0.x)\n        "]))),dependencies:[()=>no("Point",[Js("Float","x"),Js("Float","y")])]}]};var _h;const Sh=()=>Qs("computeUnitInSamples",[Js("Float","sampleRate"),Js("Float","amount"),Js("string","unit")],"Float")(_h||(_h=r(["\n        if (unit === 'msec' || unit === 'millisecond') {\n            return amount / 1000 * sampleRate\n        } else if (unit === 'sec' || unit === 'seconds' || unit === 'second') {\n            return amount * sampleRate\n        } else if (unit === 'min' || unit === 'minutes' || unit === 'minute') {\n            return amount * 60 * sampleRate\n        } else if (unit === 'samp' || unit === 'samples' || unit === 'sample') {\n            return amount\n        } else {\n            throw new Error(\"invalid time unit : \" + unit)\n        }\n    "])));var wh,kh,Ih,Th,xh;const Ah={flags:{alphaName:"vline_t"},state:e=>{let{ns:n}=e;return no(n.State,[Js("Array<Point>","points","[]"),Js("Array<LineSegment>","lineSegments","[]"),Js("Float","currentValue",0),Js("Float","nextDurationSamp",0),Js("Float","nextDelaySamp",0)])},dsp:e=>{let{outs:n,state:t,globs:a}=e;return ro(wh||(wh=r(["\n        if (",".lineSegments.length) {\n            if (toFloat(",") < ",".lineSegments[0].p0.x) {\n\n            // This should come first to handle vertical lines\n            } else if (toFloat(",") === ",".lineSegments[0].p1.x) {\n                ",".currentValue = ",".lineSegments[0].p1.y\n                ",".lineSegments.shift()\n\n            } else if (toFloat(",") === ",".lineSegments[0].p0.x) {\n                ",".currentValue = ",".lineSegments[0].p0.y\n\n            } else if (toFloat(",") < ",".lineSegments[0].p1.x) {\n                ",".currentValue += ",".lineSegments[0].dy\n\n            }\n        }\n        "," = ",".currentValue\n    "])),t,a.frame,t,a.frame,t,t,t,t,a.frame,t,t,t,a.frame,t,t,t,n.$0,t)},messageReceivers:e=>{let{ns:n,state:t}=e;return{0:eo([Js("Message","m")])(kh||(kh=r(["\n        if (\n            msg_isMatching(m, [MSG_FLOAT_TOKEN])\n            || msg_isMatching(m, [MSG_FLOAT_TOKEN, MSG_FLOAT_TOKEN])\n            || msg_isMatching(m, [MSG_FLOAT_TOKEN, MSG_FLOAT_TOKEN, MSG_FLOAT_TOKEN])\n        ) {\n            switch (msg_getLength(m)) {\n                case 3:\n                    ","(",", msg_readFloatToken(m, 2))\n                case 2:\n                    ","(",", msg_readFloatToken(m, 1))\n                case 1:\n                    ","(",", msg_readFloatToken(m, 0))\n            }\n            return\n    \n        } else if (msg_isAction(m, 'stop')) {\n            ",".points = []\n            ",".lineSegments = []\n            return\n        }\n        "])),n.setNextDelay,t,n.setNextDuration,t,n.setNewLine,t,t,t),1:Vc(n.setNextDuration,t),2:Vc(n.setNextDelay,t)}},core:e=>{let{ns:n,globs:t}=e;return to([Qs(n.setNewLine,[Js(n.State,"state"),Js("Float","targetValue")],"void")(Ih||(Ih=r(["\n                state.points = removePointsBeforeFrame(state.points, toFloat(","))\n                ","\n                ","\n                if (endFrame === toFloat(",")) {\n                    state.currentValue = targetValue\n                    state.lineSegments = []\n                } else {\n                    state.points = insertNewLinePoints(\n                        state.points, \n                        {x: startFrame, y: state.currentValue},\n                        {x: endFrame, y: targetValue}\n                    )\n                    state.lineSegments = computeLineSegments(\n                        computeFrameAjustedPoints(state.points))\n                }\n                state.nextDurationSamp = 0\n                state.nextDelaySamp = 0\n            "])),t.frame,Zs("Float","startFrame","toFloat(".concat(t.frame,") + state.nextDelaySamp")),Zs("Float","endFrame","startFrame + state.nextDurationSamp"),t.frame),Qs(n.setNextDuration,[Js(n.State,"state"),Js("Float","durationMsec")],"void")(Th||(Th=r(["\n                state.nextDurationSamp = computeUnitInSamples(",", durationMsec, 'msec')\n            "])),t.sampleRate),Qs(n.setNextDelay,[Js(n.State,"state"),Js("Float","delayMsec")],"void")(xh||(xh=r(["\n                state.nextDelaySamp = computeUnitInSamples(",", delayMsec, 'msec')\n            "])),t.sampleRate)])},dependencies:[vh,Sh,Kd]};var Eh,Oh,Ch,Mh,Fh;const Ph={translateArgs:e=>{let{args:n}=e;return{initValue:Fc(n[0])||0}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"signal",id:"0"}}})},Nh={flags:{alphaName:"line_t"},state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("LineSegment","currentLine",t.defaultLine),Js("Float","currentValue",n.initValue),Js("Float","nextDurationSamp",0)])},messageReceivers:e=>{let{ns:n,state:t}=e;return{0:eo([Js("Message","m")])(Eh||(Eh=r(["\n            if (\n                msg_isMatching(m, [MSG_FLOAT_TOKEN])\n                || msg_isMatching(m, [MSG_FLOAT_TOKEN, MSG_FLOAT_TOKEN])\n            ) {\n                switch (msg_getLength(m)) {\n                    case 2:\n                        ","(",", msg_readFloatToken(m, 1))\n                    case 1:\n                        ","(",", msg_readFloatToken(m, 0))\n                }\n                return\n    \n            } else if (msg_isAction(m, 'stop')) {\n                ","(",")\n                return\n    \n            }\n        "])),n.setNextDuration,t,n.setNewLine,t,n.stop,t),1:Vc(n.setNextDuration,t)}},dsp:e=>{let{outs:n,state:t,globs:a}=e;return ro(Oh||(Oh=r(["\n        "," = ",".currentValue\n        if (toFloat(",") < ",".currentLine.p1.x) {\n            ",".currentValue += ",".currentLine.dy\n            if (toFloat("," + 1) >= ",".currentLine.p1.x) {\n                ",".currentValue = ",".currentLine.p1.y\n            }\n        }\n    "])),n.$0,t,a.frame,t,t,t,a.frame,t,t,t)},core:e=>{let{globs:n,ns:t}=e;return to([Zs("LineSegment",t.defaultLine,"{\n                p0: {x: -1, y: 0},\n                p1: {x: -1, y: 0},\n                dx: 1,\n                dy: 0,\n            }"),Qs(t.setNewLine,[Js(t.State,"state"),Js("Float","targetValue")],"void")(Ch||(Ch=r(["\n                ","\n                ","\n                if (endFrame === toFloat(",")) {\n                    state.currentLine = ","\n                    state.currentValue = targetValue\n                    state.nextDurationSamp = 0\n                } else {\n                    state.currentLine = {\n                        p0: {\n                            x: startFrame, \n                            y: state.currentValue,\n                        }, \n                        p1: {\n                            x: endFrame, \n                            y: targetValue,\n                        }, \n                        dx: 1,\n                        dy: 0,\n                    }\n                    state.currentLine.dy = computeSlope(state.currentLine.p0, state.currentLine.p1)\n                    state.nextDurationSamp = 0\n                }\n            "])),Zs("Float","startFrame","toFloat(".concat(n.frame,")")),Zs("Float","endFrame","toFloat(".concat(n.frame,") + state.nextDurationSamp")),n.frame,t.defaultLine),Qs(t.setNextDuration,[Js(t.State,"state"),Js("Float","durationMsec")],"void")(Mh||(Mh=r(["\n                state.nextDurationSamp = computeUnitInSamples(",", durationMsec, 'msec')\n            "])),n.sampleRate),Qs(t.stop,[Js(t.State,"state")],"void")(Fh||(Fh=r(["\n                state.currentLine.p1.x = -1\n                state.currentLine.p1.y = state.currentValue\n            "])))])},dependencies:[Kd,Sh,vh]};var Rh,Lh,Dh,zh,Uh,jh,Bh,Vh,Gh,Wh,$h,Hh,Kh,qh,Yh;const Xh={translateArgs:e=>{let{args:n}=e;return{initValue:Fc(n[0])||0,timeGrainMsec:Math.max(Fc(n[1])||20,20)}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0})},Jh={state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("LineSegment","currentLine","{\n                p0: {x: -1, y: 0},\n                p1: {x: -1, y: 0},\n                dx: 1,\n                dy: 0,\n            }"),Js("Float","currentValue",n.initValue),Js("Float","nextSamp",-1),Js("Int","nextSampInt",-1),Js("Float","grainSamp",0),Js("Float","nextDurationSamp",0),Js("SkedId","skedId","SKED_ID_NULL"),Js("MessageHandler","snd0",ro(Rh||(Rh=r(["",""])),eo([Js("Message","m")])(Lh||(Lh=r([""]))))),Js("SkedCallback","tickCallback",ro(Dh||(Dh=r(["",""])),eo()(zh||(zh=r([""])))))])},initialization:e=>{let{ns:n,node:{args:t},state:a,snds:s}=e;return ro(Uh||(Uh=r(["\n            ","(",", ",")\n            ",".snd0 = ","\n            ",".tickCallback = ","\n        "])),n.setGrain,a,t.timeGrainMsec,a,s.$0,a,eo()(jh||(jh=r(["\n                ","(",")\n            "])),n.tick,a))},messageReceivers:e=>{let{ns:n,snds:t,state:a}=e;return{0:eo([Js("Message","m")])(Bh||(Bh=r(["\n            if (\n                msg_isMatching(m, [MSG_FLOAT_TOKEN])\n                || msg_isMatching(m, [MSG_FLOAT_TOKEN, MSG_FLOAT_TOKEN])\n                || msg_isMatching(m, [MSG_FLOAT_TOKEN, MSG_FLOAT_TOKEN, MSG_FLOAT_TOKEN])\n            ) {\n                ","(",")\n                switch (msg_getLength(m)) {\n                    case 3:\n                        ","(",", msg_readFloatToken(m, 2))\n                    case 2:\n                        ","(",", msg_readFloatToken(m, 1))\n                    case 1:\n                        ","\n                        if (",".nextDurationSamp === 0) {\n                            ",".currentValue = targetValue\n                            ","(msg_floats([targetValue]))\n                        } else {\n                            ","(msg_floats([",".currentValue]))\n                            ","(",", targetValue)\n                            ","(",", ",".currentLine.dx)\n                            ","(",")\n                        }\n                        \n                }\n                return\n    \n            } else if (msg_isAction(m, 'stop')) {\n                ","(",")\n                return\n    \n            } else if (\n                msg_isMatching(m, [MSG_STRING_TOKEN, MSG_FLOAT_TOKEN])\n                && msg_readStringToken(m, 0) === 'set'\n            ) {\n                ","(",")\n                ",".currentValue = msg_readFloatToken(m, 1)\n                return\n            }\n        "])),n.stopCurrentLine,a,n.setGrain,a,n.setNextDuration,a,Zs("Float","targetValue","msg_readFloatToken(m, 0)"),a,a,t.$0,t.$0,a,n.setNewLine,a,n.incrementTime,a,a,n.scheduleNextTick,a,n.stopCurrentLine,a,n.stopCurrentLine,a,a),1:Vc(n.setNextDuration,a),2:Vc(n.setGrain,a)}},core:e=>{let{globs:n,ns:t}=e;return to([Qs(t.setNewLine,[Js(t.State,"state"),Js("Float","targetValue")],"void")(Vh||(Vh=r(["\n                state.currentLine = {\n                    p0: {\n                        x: toFloat(","), \n                        y: state.currentValue,\n                    }, \n                    p1: {\n                        x: toFloat(",") + state.nextDurationSamp, \n                        y: targetValue,\n                    }, \n                    dx: state.grainSamp\n                }\n                state.nextDurationSamp = 0\n                state.currentLine.dy = computeSlope(state.currentLine.p0, state.currentLine.p1) * state.grainSamp\n            "])),n.frame,n.frame),Qs(t.setNextDuration,[Js(t.State,"state"),Js("Float","durationMsec")],"void")(Gh||(Gh=r(["\n                state.nextDurationSamp = computeUnitInSamples(",", durationMsec, 'msec')\n            "])),n.sampleRate),Qs(t.setGrain,[Js(t.State,"state"),Js("Float","grainMsec")],"void")(Wh||(Wh=r(["\n                state.grainSamp = computeUnitInSamples(",", Math.max(grainMsec, ","), 'msec')\n            "])),n.sampleRate,20),Qs(t.stopCurrentLine,[Js(t.State,"state")],"void")($h||($h=r(["\n                if (state.skedId !== SKED_ID_NULL) {\n                    commons_cancelWaitFrame(state.skedId)\n                    state.skedId = SKED_ID_NULL\n                }\n                if ("," < state.nextSampInt) {\n                    ","(state, -1 * (state.nextSamp - toFloat(",")))\n                }\n                ","(state, -1)\n            "])),n.frame,t.incrementTime,n.frame,t.setNextSamp),Qs(t.setNextSamp,[Js(t.State,"state"),Js("Float","currentSamp")],"void")(Hh||(Hh=r(["\n                state.nextSamp = currentSamp\n                state.nextSampInt = toInt(Math.round(currentSamp))\n            "]))),Qs(t.incrementTime,[Js(t.State,"state"),Js("Float","incrementSamp")],"void")(Kh||(Kh=r(["\n                if (incrementSamp === state.currentLine.dx) {\n                    state.currentValue += state.currentLine.dy\n                } else {\n                    state.currentValue += interpolateLin(\n                        incrementSamp,\n                        {x: 0, y: 0},\n                        {x: state.currentLine.dx, y: state.currentLine.dy},\n                    )\n                }\n                ","(\n                    state, \n                    (state.nextSamp !== -1 ? state.nextSamp: toFloat(",")) + incrementSamp\n                )\n            "])),t.setNextSamp,n.frame),Qs(t.tick,[Js(t.State,"state")],"void")(qh||(qh=r(["\n                state.snd0(msg_floats([state.currentValue]))\n                if (toFloat(",") >= state.currentLine.p1.x) {\n                    state.currentValue = state.currentLine.p1.y\n                    ","(state)\n                } else {\n                    ","(state, state.currentLine.dx)\n                    ","(state)\n                }\n            "])),n.frame,t.stopCurrentLine,t.incrementTime,t.scheduleNextTick),Qs(t.scheduleNextTick,[Js(t.State,"state")],"void")(Yh||(Yh=r(["\n                state.skedId = commons_waitFrame(state.nextSampInt, state.tickCallback)\n            "])))])},dependencies:[Kd,Sh,vh,Zi]};var Zh,Qh,em;const nm=440*Math.pow(2,1430/12),tm=()=>Qs("mtof",[Js("Float","value")],"Float")(Zh||(Zh=r(["\n        return value <= -1500 ? 0: (value > 1499 ? "," : Math.pow(2, (value - 69) / 12) * 440)\n    "])),nm),rm=()=>Qs("ftom",[Js("Float","value")],"Float")(Qh||(Qh=r(["\n        return value <= 0 ? -1500: 12 * Math.log(value / 440) / Math.LN2 + 69\n    "]))),am=()=>Qs("pow",[Js("Float","leftOp"),Js("Float","rightOp")],"Float")(em||(em=r(["\n        return leftOp > 0 || (Math.round(rightOp) === rightOp) ? Math.pow(leftOp, rightOp): 0\n    "])));var sm,om,im,lm,um,cm;const dm={translateArgs:()=>({}),build:()=>({inlets:{0:{type:"signal",id:"0"}},outlets:{0:{type:"signal",id:"0"}}})},fm={"abs~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"abs_t"},dsp:e=>{let{ins:n}=e;return ro(sm||(sm=r(["Math.abs(",")"])),n.$0)}},"cos~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"cos_t"},dsp:e=>{let{ins:n}=e;return ro(om||(om=r(["Math.cos("," * 2 * Math.PI)"])),n.$0)}},"wrap~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"wrap_t"},dsp:e=>{let{ins:n}=e;return ro(im||(im=r(["(1 + ("," % 1)) % 1"])),n.$0)}},"sqrt~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"sqrt_t"},dsp:e=>{let{ins:n}=e;return ro(lm||(lm=r([""," >= 0 ? Math.pow(",", 0.5): 0"])),n.$0,n.$0)}},"mtof~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"mtof_t"},dsp:e=>{let{ins:n}=e;return ro(um||(um=r(["mtof(",")"])),n.$0)},dependencies:[tm]},"ftom~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"ftom_t"},dsp:e=>{let{ins:n}=e;return ro(cm||(cm=r(["ftom(",")"])),n.$0)},dependencies:[rm]}},pm={"abs~":dm,"cos~":dm,"wrap~":dm,"sqrt~":dm,"mtof~":dm,"ftom~":dm};var hm,mm,gm;const ym=e=>({arrayName:Pc(e.args[0])||""}),bm=e=>to([Zs("FloatArray",e.emptyArray,"createFloatArray(1)"),Qs(e.createState,[Js("string","arrayName")],e.State)(hm||(hm=r(["\n            return {\n                array: ",",\n                arrayName,\n                arrayChangesSubscription: SKED_ID_NULL,\n                readPosition: 0,\n                readUntil: 0,\n                writePosition: 0,\n            }\n        "])),e.emptyArray),Qs(e.setArrayName,[Js(e.State,"state"),Js("string","arrayName"),Js("SkedCallback","callback")],"void")(mm||(mm=r(["\n            if (state.arrayChangesSubscription != SKED_ID_NULL) {\n                commons_cancelArrayChangesSubscription(state.arrayChangesSubscription)\n            }\n            state.arrayName = arrayName\n            state.array = ","\n            commons_subscribeArrayChanges(arrayName, callback)\n        "])),e.emptyArray),Qs(e.prepareIndex,[Js("Float","index"),Js("Int","arrayLength")],"Int")(gm||(gm=r(["\n            return toInt(Math.min(\n                Math.max(\n                    0, Math.floor(index)\n                ), toFloat(arrayLength - 1)\n            ))\n        "])))]);var vm,_m,Sm;const wm={translateArgs:ym,build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}})},km={state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("FloatArray","array",t.emptyArray),Js("string","arrayName",'"'.concat(n.arrayName,'"')),Js("SkedId","arrayChangesSubscription","SKED_ID_NULL"),Js("Int","readPosition",0),Js("Int","readUntil",0),Js("Int","writePosition",0)])},initialization:e=>{let{ns:n,state:t}=e;return ro(vm||(vm=r(["\n        if (",".arrayName.length) {\n            ","(\n                ",", \n                ",".arrayName,\n                () => ","(",")\n            )\n        }\n    "])),t,n.setArrayName,t,t,n.setArrayNameFinalize,t)},messageReceivers:e=>{let{ns:n,snds:t,state:a}=e;return{0:eo([Js("Message","m")])(_m||(_m=r(["\n            if (msg_isMatching(m, [MSG_FLOAT_TOKEN])) {        \n                if (",".array.length === 0) {\n                    ","(msg_floats([0]))\n\n                } else {\n                    ","(msg_floats([",".array[\n                        ","(\n                            msg_readFloatToken(m, 0), \n                            ",".array.length\n                        )\n                    ]]))\n                }\n                return \n\n            } else if (\n                msg_isMatching(m, [MSG_STRING_TOKEN, MSG_STRING_TOKEN])\n                && msg_readStringToken(m, 0) === 'set'\n            ) {\n                ","(\n                    ",", \n                    msg_readStringToken(m, 1),\n                    () => ","(",")\n                )\n                return\n        \n            }\n        "])),a,t.$0,t.$0,a,n.prepareIndex,a,n.setArrayName,a,n.setArrayNameFinalize,a)}},core:e=>{let{ns:n}=e;return to([bm(n),Qs(n.setArrayNameFinalize,[Js(n.State,"state")],"void")(Sm||(Sm=r(["\n                state.array = commons_getArray(state.arrayName)\n            "])))])},dependencies:[Ji]};var Im,Tm,xm,Am;const Em={translateArgs:ym,build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{}})},Om={state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("FloatArray","array",t.emptyArray),Js("string","arrayName",'"'.concat(n.arrayName,'"')),Js("SkedId","arrayChangesSubscription","SKED_ID_NULL"),Js("Int","readPosition",0),Js("Int","readUntil",0),Js("Int","writePosition",0)])},initialization:e=>{let{ns:n,state:t}=e;return ro(Im||(Im=r(["\n        if (",".arrayName.length) {\n            ","(\n                ",", \n                ",".arrayName,\n                () => ","(",")\n            )\n        }\n    "])),t,n.setArrayName,t,t,n.setArrayNameFinalize,t)},messageReceivers:e=>{let{ns:n,state:t}=e;return{0:eo([Js("Message","m")])(Tm||(Tm=r(["\n            if (msg_isMatching(m, [MSG_FLOAT_TOKEN])) {        \n                if (",".array.length === 0) {\n                    return\n\n                } else {\n                    ",".array[",".writePosition] = msg_readFloatToken(m, 0)\n                    return\n                }\n\n            } else if (\n                msg_isMatching(m, [MSG_STRING_TOKEN, MSG_STRING_TOKEN])\n                && msg_readStringToken(m, 0) === 'set'\n            ) {\n                ","(\n                    ",", \n                    msg_readStringToken(m, 1),\n                    () => ","(","),\n                )\n                return\n        \n            }\n        "])),t,t,t,n.setArrayName,t,n.setArrayNameFinalize,t),1:Vc(n.setWritePosition,t)}},core:e=>{let{ns:n}=e;return to([bm(n),Qs(n.setArrayNameFinalize,[Js(n.State,"state")],"void")(xm||(xm=r(["\n                state.array = commons_getArray(state.arrayName)\n            "]))),Qs(n.setWritePosition,[Js(n.State,"state"),Js("Float","writePosition")],"void")(Am||(Am=r(["\n                state.writePosition = ","(writePosition, state.array.length)\n            "])),n.prepareIndex)])},dependencies:[Ji]};var Cm,Mm,Fm,Pm;const Nm={translateArgs:e=>({arrayName:Pc(e.args[0])||""}),build:()=>({inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},Rm={flags:{isDspInline:!0,alphaName:"tabread_t"},state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("FloatArray","array",t.emptyArray),Js("string","arrayName",'"'.concat(n.arrayName,'"')),Js("SkedId","arrayChangesSubscription","SKED_ID_NULL"),Js("Int","readPosition",0),Js("Int","readUntil",0),Js("Int","writePosition",0)])},initialization:e=>{let{ns:n,state:t}=e;return ro(Cm||(Cm=r(["\n        if (",".arrayName.length) {\n            ","(\n                ",", \n                ",".arrayName,\n                () => ","(",")\n            )\n        }\n    "])),t,n.setArrayName,t,t,n.setArrayNameFinalize,t)},messageReceivers:e=>{let{ns:n,state:t}=e;return{"0_message":eo([Js("Message","m")])(Mm||(Mm=r(["\n            if (\n                msg_isMatching(m, [MSG_STRING_TOKEN, MSG_STRING_TOKEN])\n                && msg_readStringToken(m, 0) === 'set'\n            ) {\n                ","(\n                    ",",\n                    msg_readStringToken(m, 1),\n                    () => ","(","),\n                )\n                return\n    \n            }\n        "])),n.setArrayName,t,n.setArrayNameFinalize,t)}},dsp:e=>{let{ins:n,state:t}=e;return ro(Fm||(Fm=r(["",".array[toInt(Math.max(Math.min(Math.floor(","), ",".array.length - 1), 0))]"])),t,n.$0,t)},core:e=>{let{ns:n}=e;return to([bm(n),Qs(n.setArrayNameFinalize,[Js(n.State,"state")],"void")(Pm||(Pm=r(["\n                state.array = commons_getArray(state.arrayName)\n            "])))])},dependencies:[$d,Ji,Kd]},Lm={"tabread~":Nm,"tabread4~":Nm},Dm={"tabread~":Rm,"tabread4~":Rm};var zm,Um,jm,Bm,Vm,Gm;const Wm={translateArgs:e=>({arrayName:Pc(e.args[0])||""}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"signal",id:"0"},1:{type:"message",id:"1"}}})},$m={flags:{alphaName:"tabplay_t"},state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("FloatArray","array",t.emptyArray),Js("string","arrayName",'"'.concat(n.arrayName,'"')),Js("SkedId","arrayChangesSubscription","SKED_ID_NULL"),Js("Int","readPosition",0),Js("Int","readUntil",0),Js("Int","writePosition",0)])},initialization:e=>{let{ns:n,state:t}=e;return ro(zm||(zm=r(["\n        if (",".arrayName.length) {\n            ","(\n                ",", \n                ",".arrayName,\n                () => ","(",")\n            )\n        }\n    "])),t,n.setArrayName,t,t,n.setArrayNameFinalize,t)},messageReceivers:e=>{let{ns:n,state:t}=e;return{0:eo([Js("Message","m")])(Um||(Um=r(["\n            if (msg_isBang(m)) {\n                ","(",", 0, ",".array.length)\n                return \n                \n            } else if (msg_isAction(m, 'stop')) {\n                ","(",")\n                return \n    \n            } else if (\n                msg_isMatching(m, [MSG_STRING_TOKEN, MSG_STRING_TOKEN])\n                && msg_readStringToken(m, 0) === 'set'\n            ) {\n                ","(\n                    ",",\n                    msg_readStringToken(m, 1),\n                    () => ","(","),\n                )\n                return\n    \n            } else if (msg_isMatching(m, [MSG_FLOAT_TOKEN])) {\n                ","(\n                    ",",\n                    toInt(msg_readFloatToken(m, 0)), \n                    ",".array.length\n                )\n                return \n    \n            } else if (msg_isMatching(m, [MSG_FLOAT_TOKEN, MSG_FLOAT_TOKEN])) {\n                ","\n                ","(\n                    ",",\n                    fromSample,\n                    fromSample + toInt(msg_readFloatToken(m, 1)),\n                )\n                return\n            }\n        "])),n.play,t,t,n.stop,t,n.setArrayName,t,n.setArrayNameFinalize,t,n.play,t,t,Zs("Int","fromSample","toInt(msg_readFloatToken(m, 0))"),n.play,t)}},dsp:e=>{let{state:n,snds:t,outs:a}=e;return ro(jm||(jm=r(["\n        if (",".readPosition < ",".readUntil) {\n            "," = ",".array[",".readPosition]\n            ",".readPosition++\n            if (",".readPosition >= ",".readUntil) {\n                ","(msg_bang())\n            }\n        } else {\n            "," = 0\n        }\n    "])),n,n,a.$0,n,n,n,n,n,t.$1,a.$0)},core:e=>{let{ns:n}=e;return to([bm(n),Qs(n.setArrayNameFinalize,[Js(n.State,"state")],"void")(Bm||(Bm=r(["\n                state.array = commons_getArray(state.arrayName)\n                state.readPosition = state.array.length\n                state.readUntil = state.array.length\n            "]))),Qs(n.play,[Js(n.State,"state"),Js("Int","playFrom"),Js("Int","playTo")],"void")(Vm||(Vm=r(["\n                state.readPosition = playFrom\n                state.readUntil = toInt(Math.min(\n                    toFloat(playTo), \n                    toFloat(state.array.length),\n                ))\n            "]))),Qs(n.stop,[Js(n.State,"state")],"void")(Gm||(Gm=r(["\n                state.readPosition = 0\n                state.readUntil = 0\n            "])))])},dependencies:[$d,Ji,Kd]};var Hm,Km;const qm={codeGenerator:()=>Qs("parseSoundFileOpenOpts",[Js("Message","m"),Js("fs_SoundInfo","soundInfo")],"Set<Int>")(Hm||(Hm=r(["\n            ","\n            ","\n            while (i < msg_getLength(m)) {\n                if (msg_isStringToken(m, i)) {\n                    ","\n                    if (['-wave', '-aiff', '-caf', '-next', '-ascii'].includes(str)) {\n                        soundInfo.encodingFormat = str.slice(1)\n\n                    } else if (str === '-raw') {\n                        console.log('-raw format not yet supported')\n                        i += 4\n                        \n                    } else if (str === '-big') {\n                        soundInfo.endianness = 'b'\n\n                    } else if (str === '-little') {\n                        soundInfo.endianness = 'l'\n\n                    } else if (str === '-bytes') {\n                        if (i < msg_getLength(m) && msg_isFloatToken(m, i + 1)) {\n                            soundInfo.bitDepth = toInt(msg_readFloatToken(m, i + 1) * 8)\n                            i++\n                        } else {\n                            console.log('failed to parse -bytes <value>')\n                        }\n\n                    } else if (str === '-rate') {\n                        if (i < msg_getLength(m) && msg_isFloatToken(m, i + 1)) {\n                            soundInfo.sampleRate = toInt(msg_readFloatToken(m, i + 1))\n                            i++\n                        } else {\n                            console.log('failed to parse -rate <value>')\n                        }\n\n                    } else {\n                        unhandled.add(i)\n                    }\n                    \n                } else {\n                    unhandled.add(i)\n                }\n                i++\n            }\n            return unhandled\n        "])),Zs("Set<Int>","unhandled","new Set()"),Js("Int","i","0"),Zs("string","str","msg_readStringToken(m, i)")),dependencies:[ru,ku]},Ym={codeGenerator:()=>Qs("parseReadWriteFsOpts",[Js("Message","m"),Js("fs_SoundInfo","soundInfo"),Js("Set<Int>","unhandledOptions")],"string")(Km||(Km=r(['\n            // Remove the "open" token\n            unhandledOptions.delete(0)\n\n            ',"\n            ","\n            ","\n            ","\n            while (i < msg_getLength(m)) {\n                if (!unhandledOptions.has(i)) {\n\n                } else if (msg_isStringToken(m, i)) {\n                    url = msg_readStringToken(m, i)\n                    urlFound = true\n\n                } else {\n                    console.log(\"[writesf/readsf~] invalid option index \" + i.toString())\n                    errored = true\n                }\n                i++\n            }\n            if (!urlFound) {\n                console.log(\"[writesf/readsf~] invalid options, file url not found\")\n                return ''\n            }\n            if (errored) {\n                return ''\n            }\n            return url\n        "])),Js("string","url",'""'),Js("boolean","urlFound","false"),Js("boolean","errored","false"),Js("Int","i","1")),dependencies:[ru,ku]};var Xm,Jm,Zm,Qm;const eg={translateArgs:e=>({channelCount:Fc(e.args[0])||1}),build:e=>({inlets:{0:{type:"message",id:"0"}},outlets:{...Ys(qs(e.channelCount),(e=>["".concat(e),{type:"signal",id:"".concat(e)}])),["".concat(e.channelCount)]:{type:"message",id:"".concat(e.channelCount)}}})},ng={flags:{alphaName:"readsf_t"},state:e=>{let{ns:n}=e;return no(n.State,[Js("Array<buf_SoundBuffer>","buffers","[]"),Js("fs_OperationId","streamOperationId",-1),Js("Int","readingStatus",0)])},messageReceivers:e=>{let{ns:n,node:t,state:a}=e;return{0:eo([Js("Message","m")])(Xm||(Xm=r(["\n            if (msg_getLength(m) >= 2) {\n                if (msg_isStringToken(m, 0) \n                    && msg_readStringToken(m, 0) === 'open'\n                ) {\n                    ","(\n                        ",",\n                        m,\n                        ",",\n                        ","\n                    )\n                    return\n                }\n    \n            } else if (msg_isMatching(m, [MSG_FLOAT_TOKEN])) {\n                if (msg_readFloatToken(m, 0) === 0) {\n                    ",".readingStatus = 3\n                    return\n    \n                } else {\n                    if (",".streamOperationId !== -1) {\n                        ",".readingStatus = 1\n                    } else {\n                        console.log('[readsf~] start requested without prior open')\n                    }\n                    return\n    \n                }\n                \n            } else if (msg_isAction(m, 'print')) {\n                console.log('[readsf~] reading = ' + ",".readingStatus.toString())\n                return\n            }\n        "])),n.openStream,a,t.args.channelCount,eo()(Jm||(Jm=r(["\n                            ",".streamOperationId = -1\n                            if (",".readingStatus === 1) {\n                                ",".readingStatus = 2\n                            } else {\n                                ",".readingStatus = 3\n                            }\n                        "])),a,a,a,a),a,a,a,a)}},dsp:e=>{let{state:n,snds:t,outs:a,node:{args:{channelCount:s}}}=e;return ro(Zm||(Zm=r(["\n        switch(",".readingStatus) {\n            case 1: \n                ","\n                break\n                \n            case 2: \n                ","\n                if (",".buffers[0].pullAvailableLength === 0) {\n                    ","(msg_bang())\n                    ",".readingStatus = 3\n                }\n                break\n    \n            case 3: \n                ","\n                ",".readingStatus = 0\n                break\n        }\n    "])),n,qs(s).map((e=>"".concat(a[e]," = buf_pullSample(").concat(n,".buffers[").concat(e,"])"))),qs(s).map((e=>"".concat(a[e]," = buf_pullSample(").concat(n,".buffers[").concat(e,"])"))),n,t[s],n,qs(s).map((e=>"".concat(a[e]," = 0"))),n)},core:e=>{let{ns:n,globs:t}=e;return to([Qs(n.openStream,[Js(n.State,"state"),Js("Message","m"),Js("Int","channelCount"),Js("fs_OperationCallback","onStreamClose")],"void")(Qm||(Qm=r(["\n                if (state.streamOperationId !== -1) {\n                    state.readingStatus = 3\n                    fs_closeSoundStream(state.streamOperationId, FS_OPERATION_SUCCESS)\n                }\n        \n                ","\n                ","\n                ","\n                if (url.length === 0) {\n                    return\n                }\n                state.streamOperationId = fs_openSoundReadStream(\n                    url,\n                    soundInfo,\n                    onStreamClose,\n                )\n                state.buffers = _FS_SOUND_STREAM_BUFFERS.get(state.streamOperationId)\n            "])),Zs("fs_SoundInfo","soundInfo","{\n                    channelCount,\n                    sampleRate: toInt(".concat(t.sampleRate,"),\n                    bitDepth: 32,\n                    encodingFormat: '',\n                    endianness: '',\n                    extraOptions: '',\n                }")),Zs("Set<Int>","unhandledOptions","parseSoundFileOpenOpts(\n                    m,\n                    soundInfo,\n                )"),Zs("string","url","parseReadWriteFsOpts(\n                    m,\n                    soundInfo,\n                    unhandledOptions\n                )"))])},dependencies:[qm,Ym,$d,Kd,Au]};var tg,rg,ag;const sg=220500,og={translateArgs:e=>({channelCount:Fc(e.args[0])||1}),build:e=>{let{channelCount:n}=e;return{inlets:{"0_message":{type:"message",id:"0_message"},...Ys(qs(n),(e=>["".concat(e),{type:"signal",id:"".concat(e)}]))},outlets:{},isPullingSignal:!0}},configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},ig={flags:{alphaName:"write_t"},state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("fs_OperationId","operationId",-1),Js("boolean","isWriting","false"),Js("Array<FloatArray>","block","[\n                ".concat(qs(n.channelCount).map((()=>"createFloatArray(".concat(sg,")"))).join(","),"\n            ]")),Js("Int","cursor",0)])},dsp:e=>{let{ns:n,state:t,ins:a,node:{args:s}}=e;return ro(tg||(tg=r(["\n        if (",".isWriting === true) {\n            ","\n            ",".cursor++\n            if (",".cursor === ",") {\n                ","(",")\n            }\n        }\n    "])),t,qs(s.channelCount).map((e=>"".concat(t,".block[").concat(e,"][").concat(t,".cursor] = ").concat(a[e]))),t,t,sg,n.flushBlock,t)},messageReceivers:e=>{let{ns:n,node:t,state:a,globs:s}=e;return{"0_message":eo([Js("Message","m")],"void")(rg||(rg=r(["\n            if (msg_getLength(m) >= 2) {\n                if (\n                    msg_isStringToken(m, 0) \n                    && msg_readStringToken(m, 0) === 'open'\n                ) {\n                    if (",".operationId !== -1) {\n                        fs_closeSoundStream(",".operationId, FS_OPERATION_SUCCESS)\n                    }\n    \n                    ","\n                    ","\n                    ","\n                    if (url.length === 0) {\n                        return\n                    }\n                    ",".operationId = fs_openSoundWriteStream(\n                        url,\n                        soundInfo,\n                        () => {\n                            ","(",")\n                            ",".operationId = -1\n                        }\n                    )\n                    return\n                }\n    \n            } else if (msg_isAction(m, 'start')) {\n                    ",".isWriting = true\n                    return\n    \n            } else if (msg_isAction(m, 'stop')) {\n                ","(",")\n                ",".isWriting = false\n                return\n    \n            } else if (msg_isAction(m, 'print')) {\n                console.log('[writesf~] writing = ' + ",".isWriting.toString())\n                return\n            }    \n        "])),a,a,Zs("fs_SoundInfo","soundInfo","{\n                        channelCount: ".concat(t.args.channelCount,",\n                        sampleRate: toInt(").concat(s.sampleRate,"),\n                        bitDepth: 32,\n                        encodingFormat: '',\n                        endianness: '',\n                        extraOptions: '',\n                    }")),Zs("Set<Int>","unhandledOptions","parseSoundFileOpenOpts(\n                        m,\n                        soundInfo,\n                    )"),Zs("string","url","parseReadWriteFsOpts(\n                        m,\n                        soundInfo,\n                        unhandledOptions\n                    )"),a,n.flushBlock,a,a,a,n.flushBlock,a,a,a)}},core:e=>{let{ns:n}=e;return to([Qs(n.flushBlock,[Js(n.State,"state")],"void")(ag||(ag=r(["\n                ","\n                for (","; i < state.block.length; i++) {\n                    block.push(state.block[i].subarray(0, state.cursor))\n                }\n                fs_sendSoundStreamData(state.operationId, block)\n                state.cursor = 0\n            "])),Zs("Array<FloatArray>","block","[]"),Js("Int","i","0"))])},dependencies:[qm,Ym,Kd,Eu]};var lg,ug,cg,dg,fg,pg,hg;const mg={translateArgs:e=>{let{args:n}=e;return{frequency:Fc(n[0])||0,Q:Fc(n[1])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},gg={flags:{alphaName:"filters_bp_t"},state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("Float","frequency",n.frequency),Js("Float","Q",n.Q),Js("Float","coef1",0),Js("Float","coef2",0),Js("Float","gain",0),Js("Float","y",0),Js("Float","ym1",0),Js("Float","ym2",0)])},initialization:e=>{let{ns:n,state:t}=e;return ro(lg||(lg=r(["\n        ","(",")\n    "])),n.updateCoefs,t)},dsp:e=>{let{ins:n,outs:t,state:a}=e;return ro(ug||(ug=r(["\n        ",".y = "," + ",".coef1 * ",".ym1 + ",".coef2 * ",".ym2\n        "," = ",".gain * ",".y\n        ",".ym2 = ",".ym1\n        ",".ym1 = ",".y\n    "])),a,n.$0,a,a,a,a,t.$0,a,a,a,a,a,a)},messageReceivers:e=>{let{ns:n,state:t}=e;return{"0_message":eo([Js("Message","m")],"void")(cg||(cg=r(["\n            if (\n                msg_isMatching(m)\n                && msg_readStringToken(m, 0) === 'clear'\n            ) {\n                ","()\n                return \n            }\n        "])),n.clear),1:Vc(n.setFrequency,t),2:Vc(n.setQ,t)}},core:e=>{let{globs:n,ns:t}=e;return to([Qs(t.updateCoefs,[Js(t.State,"state")],"void")(dg||(dg=r(["\n                ","\n                ","\n                ","\n                ","\n        \n                state.coef1 = 2.0 * sigbp_qcos * r\n                state.coef2 = - r * r\n                state.gain = 2 * oneminusr * (oneminusr + r * omega)\n            "])),Js("Float","omega","state.frequency * (2.0 * Math.PI) / ".concat(n.sampleRate)),Js("Float","oneminusr","state.Q < 0.001 ? 1.0 : Math.min(omega / state.Q, 1)"),Js("Float","r","1.0 - oneminusr"),Js("Float","sigbp_qcos","(omega >= -(0.5 * Math.PI) && omega <= 0.5 * Math.PI) ? \n                    (((Math.pow(omega, 6) * (-1.0 / 720.0) + Math.pow(omega, 4) * (1.0 / 24)) - Math.pow(omega, 2) * 0.5) + 1)\n                    : 0")),Qs(t.setFrequency,[Js(t.State,"state"),Js("Float","frequency")],"void")(fg||(fg=r(["\n                state.frequency = (frequency < 0.001) ? 10: frequency\n                ","(state)\n            "])),t.updateCoefs),Qs(t.setQ,[Js(t.State,"state"),Js("Float","Q")],"void")(pg||(pg=r(["\n                state.Q = Math.max(Q, 0)\n                ","(state)\n            "])),t.updateCoefs),Qs(t.clear,[Js(t.State,"state")],"void")(hg||(hg=r(["\n                state.ym1 = 0\n                state.ym2 = 0\n            "])))])}};var yg,bg,vg,_g,Sg,wg,kg,Ig;const Tg=e=>to([Qs(e.setBusName,[Js(e.State,"state"),Js("string","busName")],"void")(yg||(yg=r(["\n            if (busName.length) {\n                state.busName = busName\n                resetSignalBus(state.busName)\n            }\n        "])))]),xg={state:e=>{let{ns:n}=e;return no(n.State,[Js("string","busName",'""')])},initialization:e=>{let{ns:n,node:{args:t},state:a}=e;return ro(bg||(bg=r(["\n        ","(",', "','")\n    '])),n.setBusName,a,t.busName)}},Ag={"throw~":{translateArgs:e=>({busName:Pc(e.args[0])||""}),build:()=>({inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"}},outlets:{},isPullingSignal:!0}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},"catch~":{translateArgs:e=>({busName:Pc(e.args[0])||""}),build:()=>({inlets:{},outlets:{0:{type:"signal",id:"0"}}})},"send~":{translateArgs:e=>({busName:Pc(e.args[0])||""}),build:()=>({inlets:{0:{type:"signal",id:"0"}},outlets:{},isPullingSignal:!0})},"receive~":{translateArgs:e=>({busName:Pc(e.args[0])||""}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"signal",id:"0"}}})}},Eg={"throw~":{...xg,flags:{alphaName:"throw_t"},dsp:e=>{let{ins:n,state:t}=e;return ro(vg||(vg=r(["\n        addAssignSignalBus(",".busName, ",")\n    "])),t,n.$0)},messageReceivers:e=>{let{ns:n,state:t}=e;return{"0_message":eo([Js("Message","m")],"void")(_g||(_g=r(["\n            if (\n                msg_isMatching(m, [MSG_STRING_TOKEN, MSG_STRING_TOKEN])\n                && msg_readStringToken(m, 0) === 'set'\n            ) {\n                ","(",", msg_readStringToken(m, 1))\n                return\n            }\n        "])),n.setBusName,t)}},core:e=>{let{ns:n}=e;return Tg(n)},dependencies:[Nd]},"catch~":{...xg,flags:{alphaName:"catch_t"},dsp:e=>{let{outs:n,state:t}=e;return ro(Sg||(Sg=r(["\n        "," = readSignalBus(",".busName)\n        resetSignalBus(",".busName)\n    "])),n.$0,t,t)},core:e=>{let{ns:n}=e;return Tg(n)},dependencies:[Nd]},"send~":{...xg,flags:{alphaName:"send_t"},dsp:e=>{let{state:n,ins:t}=e;return ro(wg||(wg=r(["\n        setSignalBus(",".busName, ",")\n    "])),n,t.$0)},core:e=>{let{ns:n}=e;return Tg(n)},dependencies:[Nd]},"receive~":{...xg,flags:{alphaName:"receive_t",isDspInline:!0},dsp:e=>{let{state:n}=e;return ro(kg||(kg=r(["readSignalBus(",".busName)"])),n)},messageReceivers:e=>{let{ns:n,state:t}=e;return{0:eo([Js("Message","m")])(Ig||(Ig=r(["\n            if (\n                msg_isMatching(m, [MSG_STRING_TOKEN, MSG_STRING_TOKEN])\n                && msg_readStringToken(m, 0) === 'set'\n            ) {\n                ","(",", msg_readStringToken(m, 1))\n                return\n            }\n        "])),n.setBusName,t)}},core:e=>{let{ns:n}=e;return Tg(n)},dependencies:[Nd]}};var Og,Cg,Mg,Fg,Pg,Ng,Rg,Lg;const Dg={translateArgs:e=>({rate:Fc(e.args[0])||0,unitAmount:Fc(e.args[1])||1,unit:Pc(e.args[2])||"msec"}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}})},zg={state:e=>{let{ns:n}=e;return no(n.State,[Js("Float","rate",0),Js("Float","sampleRatio",1),Js("Int","skedId","SKED_ID_NULL"),Js("Float","realNextTick",-1),Js("MessageHandler","snd0",eo([Js("Message","m")])(Og||(Og=r([""])))),Js("SkedCallback","tickCallback",eo()(Cg||(Cg=r([""]))))])},initialization:e=>{let{ns:n,node:{args:t},state:a,globs:s,snds:o}=e;return ro(Mg||(Mg=r(["\n            ",".snd0 = ","\n            ",".sampleRatio = computeUnitInSamples(",", ",', "','")\n            ',"(",", ",")\n            ",".tickCallback = ","\n        "])),a,o.$0,a,s.sampleRate,t.unitAmount,t.unit,n.setRate,a,t.rate,a,eo()(Fg||(Fg=r(["\n                ","(",")\n            "])),n.scheduleNextTick,a))},messageReceivers:e=>{let{ns:n,state:t,globs:a}=e;return{0:eo([Js("Message","m")])(Pg||(Pg=r(["\n            if (msg_getLength(m) === 1) {\n                if (\n                    (msg_isFloatToken(m, 0) && msg_readFloatToken(m, 0) === 0)\n                    || msg_isAction(m, 'stop')\n                ) {\n                    ","(",")\n                    return\n    \n                } else if (\n                    msg_isFloatToken(m, 0)\n                    || msg_isBang(m)\n                ) {\n                    ",".realNextTick = toFloat(",")\n                    ","(",")\n                    return\n                }\n            }\n        "])),n.stop,t,t,a.frame,n.scheduleNextTick,t),1:Vc(n.setRate,t)}},core:e=>{let{ns:n}=e;return to([Qs(n.setRate,[Js(n.State,"state"),Js("Float","rate")],"void")(Ng||(Ng=r(["\n                state.rate = Math.max(rate, 0)\n            "]))),Qs(n.scheduleNextTick,[Js(n.State,"state")],"void")(Rg||(Rg=r(["\n                state.snd0(msg_bang())\n                state.realNextTick = state.realNextTick + state.rate * state.sampleRatio\n                state.skedId = commons_waitFrame(\n                    toInt(Math.round(state.realNextTick)), \n                    state.tickCallback,\n                )\n            "]))),Qs(n.stop,[Js(n.State,"state")],"void")(Lg||(Lg=r(["\n                if (state.skedId !== SKED_ID_NULL) {\n                    commons_cancelWaitFrame(state.skedId)\n                    state.skedId = SKED_ID_NULL\n                }\n                state.realNextTick = 0\n            "])))])},dependencies:[Sh,$d,Kd,Zi]};var Ug,jg,Bg;const Vg={translateArgs:e=>({unitAmount:Fc(e.args[0])||1,unit:Pc(e.args[1])||"msec"}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}})},Gg={state:e=>{let{ns:n}=e;return no(n.State,[Js("Float","sampleRatio",0),Js("Int","resetTime",0)])},initialization:e=>{let{node:{args:n},state:t,globs:a}=e;return ro(Ug||(Ug=r(["\n            ",".sampleRatio = computeUnitInSamples(",", ",', "','")\n        '])),t,a.sampleRate,n.unitAmount,n.unit)},messageReceivers:e=>{let{snds:n,globs:t,state:a}=e;return{0:eo([Js("Message","m")])(jg||(jg=r(["\n            if (msg_isBang(m)) {\n                ",".resetTime = ","\n                return\n    \n            } else if (\n                msg_isMatching(m, [MSG_STRING_TOKEN, MSG_FLOAT_TOKEN, MSG_STRING_TOKEN])\n                && msg_readStringToken(m, 0) === 'tempo'\n            ) {\n                ",".sampleRatio = computeUnitInSamples(\n                    ",", \n                    msg_readFloatToken(m, 1), \n                    msg_readStringToken(m, 2)\n                )\n                return\n            }\n        "])),a,t.frame,a,t.sampleRate),1:eo([Js("Message","m")])(Bg||(Bg=r(["\n            if (msg_isBang(m)) {\n                ","(msg_floats([toFloat("," - ",".resetTime) / ",".sampleRatio]))\n                return\n            }\n        "])),n.$0,t.frame,a,a)}},dependencies:[Sh,$d]};var Wg,$g,Hg,Kg,qg;const Yg={translateArgs:e=>({delay:Fc(e.args[0])||0,unitAmount:Fc(e.args[1])||1,unit:Pc(e.args[2])||"msec"}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0})},Xg={state:e=>{let{ns:n}=e;return no(n.State,[Js("Float","delay",0),Js("Float","sampleRatio",1),Js("SkedId","scheduledBang","SKED_ID_NULL")])},initialization:e=>{let{ns:n,node:{args:t},state:a,globs:s}=e;return ro(Wg||(Wg=r(["\n        ",".sampleRatio = computeUnitInSamples(",", ",', "','")\n        ',"(",", ",")\n    "])),a,s.sampleRate,t.unitAmount,t.unit,n.setDelay,a,t.delay)},messageReceivers:e=>{let{ns:n,state:t,globs:a,snds:s}=e;return{0:eo([Js("Message","m")])($g||($g=r(["\n            if (msg_getLength(m) === 1) {\n                if (msg_isStringToken(m, 0)) {\n                    ","\n                    if (action === 'bang' || action === 'start') {\n                        ","(\n                            ",", \n                            () => ","(msg_bang()),\n                            ",",\n                        )\n                        return\n                    } else if (action === 'stop') {\n                        ","(",")\n                        return\n                    }\n                    \n                } else if (msg_isFloatToken(m, 0)) {\n                    ","(",", msg_readFloatToken(m, 0))\n                    ","(\n                        ",",\n                        () => ","(msg_bang()),\n                        ",",\n                    )\n                    return \n                }\n            \n            } else if (\n                msg_isMatching(m, [MSG_STRING_TOKEN, MSG_FLOAT_TOKEN, MSG_STRING_TOKEN])\n                && msg_readStringToken(m, 0) === 'tempo'\n            ) {\n                ",".sampleRatio = computeUnitInSamples(\n                    ",", \n                    msg_readFloatToken(m, 1), \n                    msg_readStringToken(m, 2)\n                )\n                return\n            }\n        "])),Zs("string","action","msg_readStringToken(m, 0)"),n.scheduleDelay,t,s.$0,a.frame,n.stop,t,n.setDelay,t,n.scheduleDelay,t,s.$0,a.frame,t,a.sampleRate),1:Vc(n.setDelay,t)}},core:e=>{let{ns:n}=e;return to([Qs(n.setDelay,[Js(n.State,"state"),Js("Float","delay")],"void")(Hg||(Hg=r(["\n                state.delay = Math.max(0, delay)\n            "]))),Qs(n.scheduleDelay,[Js(n.State,"state"),Js("SkedCallback","callback"),Js("Int","currentFrame")],"void")(Kg||(Kg=r(["\n                if (state.scheduledBang !== SKED_ID_NULL) {\n                    ","(state)\n                }\n                state.scheduledBang = commons_waitFrame(toInt(\n                    Math.round(\n                        toFloat(currentFrame) + state.delay * state.sampleRatio)),\n                    callback\n                )\n            "])),n.stop),Qs(n.stop,[Js(n.State,"state")],"void")(qg||(qg=r(["\n                commons_cancelWaitFrame(state.scheduledBang)\n                state.scheduledBang = SKED_ID_NULL\n            "])))])},dependencies:[Sh,$d,Zi]};var Jg,Zg,Qg,ey;const ny={translateArgs:e=>{let{args:[n,t,r]}=e;return{outputOnLoad:!!n,sendBusName:Pc(r)||Id,receiveBusName:Pc(t)||Id}},build:Td},ty={state:e=>{let{ns:n,node:{args:t}}=e;return no(n.State,[Js("Message","value","msg_create([])"),Js("string","receiveBusName",'"'.concat(t.receiveBusName,'"')),Js("string","sendBusName",'"'.concat(t.sendBusName,'"')),Js("MessageHandler","messageReceiver",n.defaultMessageHandler),Js("MessageHandler","messageSender",n.defaultMessageHandler)])},initialization:e=>{let{ns:n,snds:t,state:a,node:{args:s}}=e;return ro(Jg||(Jg=r(["\n        ",".messageReceiver = ","\n        ",".messageSender = ","\n        ","(",', "','")\n\n        ',"\n    "])),a,eo([Js("Message","m")])(Zg||(Zg=r(["\n            ","(",", m)\n        "])),n.receiveMessage,a),a,t.$0,n.setReceiveBusName,a,s.receiveBusName,s.outputOnLoad?"commons_waitFrame(0, () => ".concat(t.$0,"(msg_bang()))"):null)},messageReceivers:e=>{let{ns:n,state:t}=e;return{0:eo([Js("Message","m")])(Qg||(Qg=r(["\n            ","(",", m)\n            return\n        "])),n.receiveMessage,t)}},core:e=>{let{ns:n}=e;return to([xd(n),Qs(n.receiveMessage,[Js(n.State,"state"),Js("Message","m")],"void")(ey||(ey=r(["\n                if (","(state, m) === true) {\n                    return\n                }\n                \n                ",'\n                state.messageSender(outMessage)\n                if (state.sendBusName !== "','") {\n                    msgBusPublish(state.sendBusName, outMessage)\n                }\n                return\n            '])),n.setSendReceiveFromMessage,Zs("Message","outMessage","msg_bang()"),Id)])},dependencies:[$d,Rd,Zi]};var ry,ay,sy,oy;const iy={translateArgs:e=>{let{args:[n,t,r,a]}=e;return{sendBusName:Pc(a)||Id,receiveBusName:Pc(r)||Id}},build:Td},ly=e=>{let{name:n,initValueCode:t,messageMatch:a}=e;return{state:e=>{let{ns:n,node:{args:r}}=e;return no(n.State,[Js("Message","value",t),Js("string","receiveBusName",'"'.concat(r.receiveBusName,'"')),Js("string","sendBusName",'"'.concat(r.sendBusName,'"')),Js("MessageHandler","messageReceiver",n.defaultMessageHandler),Js("MessageHandler","messageSender",n.defaultMessageHandler)])},initialization:e=>{let{ns:n,state:t,node:{args:a},snds:s}=e;return ro(ry||(ry=r(["\n            ",".messageReceiver = ","\n            ",".messageSender = ","\n            ","(",', "','")\n        '])),t,eo([Js("Message","m")])(ay||(ay=r(["\n                ","(",", m)\n            "])),n.receiveMessage,t),t,s.$0,n.setReceiveBusName,t,a.receiveBusName)},messageReceivers:e=>{let{ns:n,state:t}=e;return{0:eo([Js("Message","m")])(sy||(sy=r(["\n                ","(",", m)\n                return\n            "])),n.receiveMessage,t)}},core:e=>{let{ns:n}=e;return to([xd(n),Qs(n.receiveMessage,[Js(n.State,"state"),Js("Message","m")],"void")(oy||(oy=r(['\n                    if (msg_isBang(m)) {\n                        state.messageSender(state.value)\n                        if (state.sendBusName !== "',"\") {\n                            msgBusPublish(state.sendBusName, state.value)\n                        }\n                        return\n                    \n                    } else if (\n                        msg_getTokenType(m, 0) === MSG_STRING_TOKEN\n                        && msg_readStringToken(m, 0) === 'set'\n                    ) {\n                        ","\n                        "," \n                                state.value = setMessage    \n                                return\n                        ","\n        \n                    } else if (","(state, m) === true) {\n                        return\n                        \n                    } ",'\n                    \n                        state.value = m\n                        state.messageSender(state.value)\n                        if (state.sendBusName !== "','") {\n                            msgBusPublish(state.sendBusName, state.value)\n                        }\n                        return\n        \n                    }\n                '])),Id,Zs("Message","setMessage","msg_slice(m, 1, msg_getLength(m))"),a?"if (".concat(a("setMessage"),") {"):null,a?"}":null,n.setSendReceiveFromMessage,a?"else if (".concat(a("m"),") {"):"else {",Id)])},dependencies:[$d,Rd,Hd]}},uy={floatatom:iy,symbolatom:iy,listbox:iy},cy={floatatom:ly({name:"floatatom",initValueCode:"msg_floats([0])",messageMatch:e=>"msg_isMatching(".concat(e,", [MSG_FLOAT_TOKEN])")}),symbolatom:ly({name:"symbolatom",initValueCode:"msg_strings([''])",messageMatch:e=>"msg_isMatching(".concat(e,", [MSG_STRING_TOKEN])")}),listbox:ly({name:"listbox",initValueCode:"msg_bang()"})};var dy;const fy={initialization:e=>{let{snds:n}=e;return ro(dy||(dy=r(["commons_waitFrame(0, () => ","(msg_bang()))"])),n.$0)},dependencies:[$d,Zi]};var py;const hy=()=>Qs("roundFloatAsPdInt",[Js("Float","value")],"Float")(py||(py=r(["\n        return value > 0 ? Math.floor(value): Math.ceil(value)\n    "])));var my,gy,yy,by;const vy={translateArgs:e=>({value:Fc(e.args[0])||0}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0})},_y={state:e=>{let{ns:n}=e;return no(n.State,[Js("Float","value",0)])},initialization:e=>{let{ns:n,node:{args:t},state:a}=e;return ro(my||(my=r(["\n            ","(",", ",")\n        "])),n.setValue,a,t.value)},messageReceivers:e=>{let{ns:n,snds:t,state:a}=e;return{0:eo([Js("Message","m")])(gy||(gy=r(["\n            if (msg_isMatching(m, [MSG_FLOAT_TOKEN])) {\n                ","(",", msg_readFloatToken(m, 0))\n                ","(msg_floats([",".value]))\n                return \n\n            } else if (msg_isBang(m)) {\n                ","(msg_floats([",".value]))\n                return\n                \n            }\n        "])),n.setValue,a,t.$0,a,t.$0,a),1:Vc(n.setValue,a)}}},Sy={float:vy,f:{aliasTo:"float"},int:vy,i:{aliasTo:"int"}},wy={float:{..._y,core:e=>{let{ns:n}=e;return to([Qs(n.setValue,[Js(n.State,"state"),Js("Float","value")],"void")(yy||(yy=r(["\n                state.value = value\n            "])))])},dependencies:[$d]},int:{..._y,core:e=>{let{ns:n}=e;return to([Qs(n.setValue,[Js(n.State,"state"),Js("Float","value")],"void")(by||(by=r(["\n                state.value = roundFloatAsPdInt(value)\n            "])))])},dependencies:[hy,$d]}};var ky;const Iy={translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}})},Ty=e=>{let{operationCode:n,dependencies:t=[]}=e;return{messageReceivers:e=>{let{snds:t}=e;return{0:eo([Js("Message","m")])(ky||(ky=r(["\n                if (msg_isMatching(m, [MSG_FLOAT_TOKEN])) {\n                    ","\n                    ","(msg_floats([","]))\n                    return\n                }\n            "])),Zs("Float","value","msg_readFloatToken(m, 0)"),t.$0,n)}},dependencies:t}},xy={abs:Ty({operationCode:"Math.abs(value)"}),wrap:Ty({operationCode:"(1 + (value % 1)) % 1"}),cos:Ty({operationCode:"Math.cos(value)"}),sqrt:Ty({operationCode:"value >= 0 ? Math.pow(value, 0.5): 0"}),mtof:Ty({operationCode:"mtof(value)",dependencies:[tm]}),ftom:Ty({operationCode:"ftom(value)",dependencies:[rm]}),rmstodb:Ty({operationCode:"value <= 0 ? 0 : 20 * Math.log(value) / Math.LN10 + 100"}),dbtorms:Ty({operationCode:"value <= 0 ? 0 : Math.exp(Math.LN10 * (value - 100) / 20)"}),powtodb:Ty({operationCode:"value <= 0 ? 0 : 10 * Math.log(value) / Math.LN10 + 100"}),dbtopow:Ty({operationCode:"value <= 0 ? 0 : Math.exp(Math.LN10 * (value - 100) / 10)"}),vu:Ty({operationCode:"value"})},Ay={abs:Iy,cos:Iy,wrap:Iy,sqrt:Iy,mtof:Iy,ftom:Iy,rmstodb:Iy,dbtorms:Iy,powtodb:Iy,dbtopow:Iy,vu:Iy};var Ey,Oy,Cy,My,Fy,Py,Ny;const Ry=e=>({translateArgs:n=>{const t=Fc(n.args[0]);return{value:void 0!==t?t:e}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:(e,n)=>"0"===e?{initialSignalValue:0}:"1"===e?{initialSignalValue:n.value}:void 0}),Ly={"+~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"add_t"},dsp:e=>{let{ins:n}=e;return ro(Ey||(Ey=r([""," + ",""])),n.$0,n.$1)}},"-~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"sub_t"},dsp:e=>{let{ins:n}=e;return ro(Oy||(Oy=r([""," - ",""])),n.$0,n.$1)}},"*~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"mul_t"},dsp:e=>{let{ins:n}=e;return ro(Cy||(Cy=r([""," * ",""])),n.$0,n.$1)}},"/~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"div_t"},dsp:e=>{let{ins:n}=e;return ro(My||(My=r([""," !== 0 ? "," / "," : 0"])),n.$1,n.$0,n.$1)}},"min~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"min_t"},dsp:e=>{let{ins:n}=e;return ro(Fy||(Fy=r(["Math.min(",", ",")"])),n.$0,n.$1)}},"max~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"max_t"},dsp:e=>{let{ins:n}=e;return ro(Py||(Py=r(["Math.max(",", ",")"])),n.$0,n.$1)}},"pow~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"pow_t"},dsp:e=>{let{ins:n}=e;return ro(Ny||(Ny=r(["pow(",", ",")"])),n.$0,n.$1)},dependencies:[am]}},Dy={"+~":Ry(0),"-~":Ry(0),"*~":Ry(0),"/~":Ry(0),"min~":Ry(0),"max~":Ry(0),"pow~":Ry(0)};var zy,Uy;const jy={flags:{alphaName:"noise_t",isDspInline:!0},dsp:()=>ro(zy||(zy=r(["Math.random() * 2 - 1"]))),messageReceivers:()=>({0:eo([Js("Message","m")])(Uy||(Uy=r(["\n            if (\n                msg_isMatching(m, [MSG_STRING_TOKEN, MSG_FLOAT_TOKEN])\n                && msg_readStringToken(m, 0) === 'seed'\n            ) {\n                console.log('WARNING : seed not implemented yet for [noise~]')\n                return\n            }\n        "])))})};var By,Vy,Gy;const Wy={codeGenerator:()=>to([Zs("Map<string, buf_SoundBuffer>","DELAY_BUFFERS","new Map()"),Zs("Skeduler","DELAY_BUFFERS_SKEDULER","sked_create(true)"),Zs("buf_SoundBuffer","DELAY_BUFFERS_NULL","buf_create(1)"),Qs("DELAY_BUFFERS_set",[Js("string","delayName"),Js("buf_SoundBuffer","buffer")],"void")(By||(By=r(["\n            DELAY_BUFFERS.set(delayName, buffer)\n            sked_emit(DELAY_BUFFERS_SKEDULER, delayName)\n        "]))),Qs("DELAY_BUFFERS_get",[Js("string","delayName"),Js("SkedCallback","callback")],"void")(Vy||(Vy=r(["\n            sked_wait(DELAY_BUFFERS_SKEDULER, delayName, callback)\n        "]))),Qs("DELAY_BUFFERS_delete",[Js("string","delayName")],"void")(Gy||(Gy=r(["\n            DELAY_BUFFERS.delete(delayName)\n        "])))]),dependencies:[_l,Vi]};var $y,Hy,Ky,qy,Yy,Xy,Jy,Zy;const Qy={translateArgs:e=>{let{args:n}=e;return{delayName:Pc(n[0])||"",initDelayMsec:Fc(n[1])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:(e,n)=>{let{initDelayMsec:t}=n;if("0"===e)return{initialSignalValue:t}}},eb={state:e=>{let{ns:n}=e;return no(n.State,[Js("string","delayName",'""'),Js("buf_SoundBuffer","buffer","DELAY_BUFFERS_NULL"),Js("Float","rawOffset",0),Js("Int","offset",0),Js("(_: string) => void","setDelayNameCallback",n.NOOP)])},initialization:e=>{let{ns:n,node:{args:t},state:a}=e;return ro($y||($y=r(["\n        ",".setDelayNameCallback = ",'\n\n        if ("','".length) {\n            ',"(",', "','", ',".setDelayNameCallback)\n        }\n    "])),a,eo([Js("string","_")])(Hy||(Hy=r(["\n            ",".buffer = DELAY_BUFFERS.get(",".delayName)\n            ","(",")\n        "])),a,a,n.updateOffset,a),t.delayName,n.setDelayName,a,t.delayName,a)},dsp:e=>{let{ns:n,state:t,outs:a,ins:s}=e;return{inlets:{0:ro(Ky||(Ky=r(["","(",", ",")"])),n.setRawOffset,t,s.$0)},loop:ro(qy||(qy=r([""," = buf_readSample(",".buffer, ",".offset)"])),a.$0,t,t)}},core:e=>{let{ns:n,globs:t}=e;return to([Qs(n.setDelayName,[Js(n.State,"state"),Js("string","delayName"),Js("SkedCallback","callback")])(Yy||(Yy=r(["\n                if (state.delayName.length) {\n                    state.buffer = DELAY_BUFFERS_NULL\n                }\n                state.delayName = delayName\n                if (state.delayName.length) {\n                    DELAY_BUFFERS_get(state.delayName, callback)\n                }\n            "]))),Qs(n.setRawOffset,[Js(n.State,"state"),Js("Float","rawOffset")])(Xy||(Xy=r(["\n                state.rawOffset = rawOffset\n                ","(state)\n            "])),n.updateOffset),Qs(n.updateOffset,[Js(n.State,"state")])(Jy||(Jy=r(["\n                state.offset = toInt(Math.round(\n                    Math.min(\n                        Math.max(computeUnitInSamples(",', state.rawOffset, "msec"), 0), \n                        toFloat(state.buffer.length - 1)\n                    )\n                ))\n            '])),t.sampleRate),Qs(n.NOOP,[Js("string","_")])(Zy||(Zy=r([""])))])},dependencies:[Sh,Wy,wl]},nb={"delread~":Qy,"delread4~":Qy},tb={"delread~":{...eb,flags:{alphaName:"delread_t"}},"delread4~":{...eb,flags:{alphaName:"delread4_t"}}};var rb,ab,sb,ob;const ib={translateArgs:e=>{let{args:n}=e;return{delayName:Pc(n[0])||"",maxDurationMsec:Fc(n[1])||100}},build:()=>({inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"}},outlets:{},isPullingSignal:!0}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},lb={flags:{alphaName:"delwrite_t"},state:e=>{let{ns:n}=e;return no(n.State,[Js("string","delayName",'""'),Js("buf_SoundBuffer","buffer","DELAY_BUFFERS_NULL")])},initialization:e=>{let{ns:n,node:{args:t},state:a,globs:s}=e;return ro(rb||(rb=r(["\n        ",".buffer = buf_create(\n            toInt(Math.ceil(computeUnitInSamples(\n                ",", \n                ",',\n                "msec"\n            )))\n        )\n        if ("','".length) {\n            ',"(",', "','")\n        }\n    '])),a,s.sampleRate,t.maxDurationMsec,t.delayName,n.setDelayName,a,t.delayName)},dsp:e=>{let{ins:n,state:t}=e;return ro(ab||(ab=r(["buf_writeSample(",".buffer, ",")"])),t,n.$0)},messageReceivers:e=>{let{state:n}=e;return{"0_message":eo([Js("Message","m")],"void")(sb||(sb=r(["\n            if (msg_isAction(m, 'clear')) {\n                buf_clear(",".buffer)\n                return\n            }\n        "])),n)}},core:e=>{let{ns:n}=e;return to([Qs(n.setDelayName,[Js(n.State,"state"),Js("string","delayName")],"void")(ob||(ob=r(["\n                if (state.delayName.length) {\n                    DELAY_BUFFERS_delete(state.delayName)\n                }\n                state.delayName = delayName\n                if (state.delayName.length) {\n                    DELAY_BUFFERS_set(state.delayName, state.buffer)\n                }\n            "])))])},dependencies:[Sh,Wy,Kd]};var ub;const cb={translateArgs:e=>{let{args:n}=e;return{initValue:Fc(n[0])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:(e,n)=>{let{initValue:t}=n;if("1"===e)return{initialSignalValue:t}}},db=e=>{let{generateOperation:n,alphaName:t}=e;return{flags:{alphaName:t},state:e=>{let{ns:n}=e;return no(n.State,[Js("Float","lastOutput",0),Js("Float","lastInput",0)])},dsp:e=>{let{ins:t,state:a,outs:s}=e;return ro(ub||(ub=r(["\n            ",".lastOutput = "," = ","\n            ",".lastInput = ","\n        "])),a,s.$0,n(t.$0,t.$1,"".concat(a,".lastOutput"),"".concat(a,".lastInput")),a,t.$0)}}},fb={"rpole~":cb,"rzero~":cb,"rzero_rev~":cb},pb={"rpole~":db({alphaName:"rpole_t",generateOperation:(e,n,t)=>"".concat(e," + ").concat(n," * ").concat(t)}),"rzero~":db({alphaName:"rzero_t",generateOperation:(e,n,t,r)=>"".concat(e," - ").concat(n," * ").concat(r)}),"rzero_rev~":db({alphaName:"rzero_rev_t",generateOperation:(e,n,t,r)=>"".concat(r," - ").concat(n," * ").concat(e)})};var hb;const mb={translateArgs:e=>{let{args:n}=e;return{initCoeffRe:Fc(n[0])||0,initCoeffIm:Fc(n[1])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"},2:{type:"signal",id:"2"},3:{type:"signal",id:"3"}},outlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}}}),configureMessageToSignalConnection:(e,n)=>{let{initCoeffIm:t,initCoeffRe:r}=n;return"0"===e||"1"===e?{initialSignalValue:0}:"2"===e?{initialSignalValue:r}:"3"===e?{initialSignalValue:t}:void 0}},gb=e=>{let{generateOperationRe:n,generateOperationIm:t,alphaName:a}=e;return{flags:{alphaName:a},state:e=>{let{ns:n}=e;return no(n.State,[Js("Float","lastOutputRe",0),Js("Float","lastOutputIm",0),Js("Float","lastInputRe",0),Js("Float","lastInputIm",0)])},dsp:e=>{let{ins:a,state:s,outs:o}=e;return ro(hb||(hb=r(["\n            "," = ","\n            ",".lastOutputIm = "," = ","\n            ",".lastOutputRe    = ","\n            ",".lastInputRe = ","\n            ",".lastInputIm = ","\n        "])),o.$0,n(a.$0,a.$1,a.$2,a.$3,"".concat(s,".lastOutputRe"),"".concat(s,".lastOutputIm"),"".concat(s,".lastInputRe"),"".concat(s,".lastInputIm")),s,o.$1,t(a.$0,a.$1,a.$2,a.$3,"".concat(s,".lastOutputRe"),"".concat(s,".lastOutputIm"),"".concat(s,".lastInputRe"),"".concat(s,".lastInputIm")),s,o.$0,s,a.$0,s,a.$1)}}},yb={"cpole~":mb,"czero~":mb},bb={"cpole~":gb({alphaName:"cpole_t",generateOperationRe:(e,n,t,r,a,s)=>"".concat(e," + ").concat(a," * ").concat(t," - ").concat(s," * ").concat(r),generateOperationIm:(e,n,t,r,a,s)=>"".concat(n," + ").concat(a," * ").concat(r," + ").concat(s," * ").concat(t)}),"czero~":gb({alphaName:"czero_t",generateOperationRe:(e,n,t,r,a,s,o,i)=>"".concat(e," - ").concat(o," * ").concat(t," + ").concat(i," * ").concat(r),generateOperationIm:(e,n,t,r,a,s,o,i)=>"".concat(n," - ").concat(o," * ").concat(r," - ").concat(i," * ").concat(t)})};var vb,_b;const Sb={translateArgs:e=>{let{args:n}=e;return{initValue:Fc(n[0])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:(e,n)=>{if("1"===e)return{initialSignalValue:n.initValue}}},wb={flags:{alphaName:"hip_t"},state:e=>{let{ns:n}=e;return no(n.State,[Js("Float","previous",0),Js("Float","current",0),Js("Float","coeff",0),Js("Float","normal",0)])},dsp:e=>{let{ins:n,state:t,outs:a,globs:s}=e;return{inlets:{1:ro(vb||(vb=r(["\n                ",".coeff = Math.min(Math.max(1 - "," * (2 * Math.PI) / ",", 0), 1)\n                ",".normal = 0.5 * (1 + ",".coeff)\n            "])),t,n.$1,s.sampleRate,t,t)},loop:ro(_b||(_b=r(["\n            ",".current = "," + ",".coeff * ",".previous\n            "," = ",".normal * (",".current - ",".previous)\n            ",".previous = ",".current\n        "])),t,n.$0,t,t,a.$0,t,t,t,t,t)}}};var kb,Ib,Tb;const xb={translateArgs:e=>{let{args:n}=e;return{frequency:Fc(n[0])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:(e,n)=>{if("1"===e)return{initialSignalValue:n.frequency}}},Ab={flags:{alphaName:"lop_t"},state:e=>{let{ns:n}=e;return no(n.State,[Js("Float","previous",0),Js("Float","coeff",0)])},dsp:e=>{let{ns:n,ins:t,state:a,outs:s}=e;return{inlets:{1:ro(kb||(kb=r(["","(",", ",")"])),n.setFreq,a,t.$1)},loop:ro(Ib||(Ib=r(["",".previous = "," = ",".coeff * "," + (1 - ",".coeff) * ",".previous"])),a,s.$0,a,t.$0,a,a)}},messageReceivers:e=>{let{ns:n,state:t}=e;return{1:Vc(n.setFreq,t)}},core:e=>{let{globs:n,ns:t}=e;return to([Qs(t.setFreq,[Js(t.State,"state"),Js("Float","freq")],"void")(Tb||(Tb=r(["\n                state.coeff = Math.max(Math.min(freq * 2 * Math.PI / ",", 1), 0)\n            "])),n.sampleRate)])}};var Eb,Ob,Cb,Mb,Fb;const Pb={translateArgs:e=>{let{args:n}=e;return{frequency:Fc(n[0])||0,Q:Fc(n[1])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}}})},Nb={flags:{alphaName:"vcf_t"},state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("Float","frequency",n.frequency),Js("Float","Q",n.Q),Js("Float","coef1",0),Js("Float","coef2",0),Js("Float","gain",0),Js("Float","y",0),Js("Float","ym1",0),Js("Float","ym2",0)])},dsp:e=>{let{ns:n,ins:t,outs:a,state:s}=e;return{inlets:{1:ro(Eb||(Eb=r(["\n                ","(",", ",")\n            "])),n.setFrequency,s,t.$1)},loop:ro(Ob||(Ob=r(["\n            ",".y = "," + ",".coef1 * ",".ym1 + ",".coef2 * ",".ym2\n            "," = "," = ",".gain * ",".y\n            ",".ym2 = ",".ym1\n            ",".ym1 = ",".y\n        "])),s,t.$0,s,s,s,s,a.$1,a.$0,s,s,s,s,s,s)}},messageReceivers:e=>{let{ns:n,state:t}=e;return{2:Vc(n.setQ,t)}},core:e=>{let{globs:n,ns:t}=e;return to([Qs(t.updateCoefs,[Js(t.State,"state")],"void")(Cb||(Cb=r(["\n                ","\n                ","\n                ","\n                ","\n        \n                state.coef1 = 2.0 * sigbp_qcos * r\n                state.coef2 = - r * r\n                state.gain = 2 * oneminusr * (oneminusr + r * omega)\n            "])),Js("Float","omega","state.frequency * (2.0 * Math.PI) / ".concat(n.sampleRate)),Js("Float","oneminusr","state.Q < 0.001 ? 1.0 : Math.min(omega / state.Q, 1)"),Js("Float","r","1.0 - oneminusr"),Js("Float","sigbp_qcos","(omega >= -(0.5 * Math.PI) && omega <= 0.5 * Math.PI) ? \n                    (((Math.pow(omega, 6) * (-1.0 / 720.0) + Math.pow(omega, 4) * (1.0 / 24)) - Math.pow(omega, 2) * 0.5) + 1)\n                    : 0")),Qs(t.setFrequency,[Js(t.State,"state"),Js("Float","frequency")],"void")(Mb||(Mb=r(["\n                state.frequency = (frequency < 0.001) ? 10: frequency\n                ","(state)\n            "])),t.updateCoefs),Qs(t.setQ,[Js(t.State,"state"),Js("Float","Q")],"void")(Fb||(Fb=r(["\n                state.Q = Math.max(Q, 0)\n                ","(state)\n            "])),t.updateCoefs)])}};var Rb,Lb,Db,zb,Ub,jb,Bb,Vb,Gb,Wb,$b,Hb,Kb;const qb={state:e=>{let{ns:n}=e;return no(n.State,[Js("Array<MessageTemplate>","outTemplates","[]"),Js("Array<Message>","outMessages","[]"),Js("Array<(m: Message) => Message>","messageTransferFunctions","[]")])},initialization:e=>{const{node:{args:n},state:t}=e,a=n.templates.map(((n,t)=>Yb(e,n,t)));return ro(Rb||(Rb=r(["\n            ","\n            \n            ",".messageTransferFunctions = [\n                ","\n            ]\n        "])),a.filter((e=>{let{inMessageUsed:n}=e;return!n})).map((e=>{let{outMessageCode:n}=e;return n})),t,a.flatMap(((e,n)=>{let{inMessageUsed:a,outMessageCode:s}=e;return[eo([Js("Message","inMessage")],"Message")(Lb||(Lb=r(["\n                        ","\n                        return ",".outMessages[","]\n                    "])),a?s:null,t,n),","]})))},messageReceivers:e=>{let{snds:n,state:t}=e;return{0:eo([Js("Message","m")])(Db||(Db=r(["\n                if (\n                    msg_isStringToken(m, 0) \n                    && msg_readStringToken(m, 0) === 'set'\n                ) {\n                    ",".outTemplates = [[]]\n                    for (","; i < msg_getLength(m); i++) {\n                        if (msg_isFloatToken(m, i)) {\n                            ",".outTemplates[0].push(MSG_FLOAT_TOKEN)\n                        } else {\n                            ",".outTemplates[0].push(MSG_STRING_TOKEN)\n                            ",".outTemplates[0].push(msg_readStringToken(m, i).length)\n                        }\n                    }\n    \n                    ","\n                    for (","; i < msg_getLength(m); i++) {\n                        if (msg_isFloatToken(m, i)) {\n                            msg_writeFloatToken(\n                                message, i - 1, msg_readFloatToken(m, i)\n                            )\n                        } else {\n                            msg_writeStringToken(\n                                message, i - 1, msg_readStringToken(m, i)\n                            )\n                        }\n                    }\n                    ",".outMessages[0] = message\n                    ",".messageTransferFunctions.splice(0, ",".messageTransferFunctions.length - 1)\n                    ",".messageTransferFunctions[0] = ","\n                    return\n    \n                } else {\n                    for (","; i < ",".messageTransferFunctions.length; i++) {\n                        ","(",".messageTransferFunctions[i](m))\n                    }\n                    return\n                }\n            "])),t,Js("Int","i","1"),t,t,t,Zs("Message","message","msg_create(".concat(t,".outTemplates[0])")),Js("Int","i","1"),t,t,t,t,eo([Js("Message","m")],"Message")(zb||(zb=r(["\n                        return ",".outMessages[0]\n                    "])),t),Js("Int","i","0"),t,n.$0,t)}}},Yb=(e,n,t)=>{let{state:a}=e;const s="".concat(a,".outTemplates[").concat(t,"]"),o="".concat(a,".outMessages[").concat(t,"]"),i=Xb(n);let l=[],u=[],c=0;i.forEach(((e,n)=>{if("noop"===e.type){const{inIndex:t}=e;l.push(ro(Ub||(Ub=r(["\n                ",".push(msg_getTokenType(inMessage, ","))\n                if (msg_isStringToken(inMessage, ",")) {\n                    stringMem[","] = msg_readStringToken(inMessage, ",")\n                    ",".push(stringMem[","].length)\n                }\n            "])),s,t,t,c,t,s,c)),u.push(ro(jb||(jb=r(["\n                if (msg_isFloatToken(inMessage, ",")) {\n                    msg_writeFloatToken(",", ",", msg_readFloatToken(inMessage, ","))\n                } else if (msg_isStringToken(inMessage, ",")) {\n                    msg_writeStringToken(",", ",", stringMem[","])\n                }\n            "])),t,o,n,t,t,o,n,c)),c++}else"string-template"===e.type?(l.push(ro(Bb||(Bb=r(['\n                stringToken = "','"\n                ',"\n                stringMem[","] = stringToken\n                ",".push(MSG_STRING_TOKEN)\n                ",".push(stringMem[","].length)\n            "])),e.template,e.variables.map((e=>{let{placeholder:n,inIndex:t}=e;return"\n                    if (msg_isFloatToken(inMessage, ".concat(t,")) {\n                        otherStringToken = msg_readFloatToken(inMessage, ").concat(t,").toString()\n                        if (otherStringToken.endsWith('.0')) {\n                            otherStringToken = otherStringToken.slice(0, -2)\n                        }\n                        stringToken = stringToken.replace(\"").concat(n,'", otherStringToken)\n                    } else if (msg_isStringToken(inMessage, ').concat(t,')) {\n                        stringToken = stringToken.replace("').concat(n,'", msg_readStringToken(inMessage, ').concat(t,"))\n                    }")})).join("\n"),c,s,s,c)),u.push(ro(Vb||(Vb=r(["\n                msg_writeStringToken(",", ",", stringMem[","])\n            "])),o,n,c)),c++):"string-constant"===e.type?(l.push(ro(Gb||(Gb=r(["\n                ",".push(MSG_STRING_TOKEN)\n                ",".push(",")\n            "])),s,s,e.value.length)),u.push(ro(Wb||(Wb=r(["\n                msg_writeStringToken(",", ",', "','")\n            '])),o,n,e.value))):"float-constant"===e.type&&(l.push(ro($b||($b=r(["\n                ",".push(MSG_FLOAT_TOKEN)\n            "])),s)),u.push(ro(Hb||(Hb=r(["\n                msg_writeFloatToken(",", ",", ",")\n            "])),o,n,e.value)))}));const d=i.some((e=>"string-template"===e.type)),f=i.some((e=>"noop"===e.type||"string-template"===e.type));return{inMessageUsed:f,outMessageCode:ro(Kb||(Kb=r(["\n            ","\n            ","\n            ","\n            "," = []\n            ","\n            "," = msg_create(",")\n            ","\n        "])),d?Js("string","stringToken"):null,d?Js("string","otherStringToken"):null,f?Js("Array<string>","stringMem","[]"):null,s,l,o,s,u)}},Xb=e=>e.map((e=>{if("string"===typeof e){const n=Jb.exec(e);if(n&&n[0]===e){return{type:"noop",inIndex:parseInt(n[1],10)-1}}if(n){const n=[];let t;for(;t=Zb.exec(e);)n.push({placeholder:t[0],inIndex:parseInt(t[1],10)-1});return{type:"string-template",template:e,variables:n}}return{type:"string-constant",value:e}}return{type:"float-constant",value:e}})),Jb=/\$(\d+)/,Zb=/\$(\d+)/g;var Qb,ev,nv,tv,rv,av,sv,ov;const iv={translateArgs:e=>{let{args:n}=e;const t=Pc(n[0])||"append";let r=n.slice(1);switch(t){case"split":r=[Fc(n[1])||0];break;case"trim":case"length":r=[];break;case"append":case"prepend":break;case"fromsymbol":case"tosymbol":case"store":throw new Error("list operation ".concat(t," not implemented yet"));default:throw new Error("invalid list operation ".concat(t))}return{operation:t,operationArgs:r}},build:e=>{let{operation:n}=e,t=0,r=0;switch(n){case"split":t=2,r=3;break;case"trim":case"length":t=1,r=1;break;case"prepend":case"append":t=2,r=1}return{inlets:Ys(qs(t),(e=>["".concat(e),{type:"message",id:"".concat(e)}])),outlets:Ys(qs(r),(e=>["".concat(e),{type:"message",id:"".concat(e)}]))}}},lv={state:e=>{let{ns:n}=e;return no(n.State,[Js("Int","splitPoint",0),Js("Message","currentList","msg_create([])")])},initialization:e=>{let{node:{args:n},state:t}=e;return ro(Qb||(Qb=r(["\n        ","\n\n        ","\n    "])),"split"===n.operation?"".concat(t,".splitPoint = ").concat(n.operationArgs[0]):null,"append"===n.operation||"prepend"===n.operation?ro(ev||(ev=r([" \n            {\n                ","\n\n                ",".currentList = msg_create(template)\n\n                ","\n            }\n        "])),Zs("MessageTemplate","template","[".concat(n.operationArgs.map((e=>"string"===typeof e?"MSG_STRING_TOKEN,".concat(e.length):"MSG_FLOAT_TOKEN")).join(","),"]")),t,n.operationArgs.map(((e,n)=>"string"===typeof e?"msg_writeStringToken(".concat(t,".currentList, ").concat(n,', "').concat(e,'")'):"msg_writeFloatToken(".concat(t,".currentList, ").concat(n,", ").concat(e,")")))):null)},messageReceivers:e=>{let{ns:n,snds:t,state:a,node:{args:s}}=e;const o=Zs("Message","inMessage","msg_isBang(m) ? msg_create([]): m");switch(s.operation){case"split":return{0:eo([Js("Message","m")])(nv||(nv=r(["\n                        ","\n                        if (msg_getLength(inMessage) < ",".splitPoint) {\n                            ","(m)\n                            return\n                        } else if (msg_getLength(inMessage) === ",".splitPoint) {\n                            ","(msg_bang())\n                            ","(m)\n                            return\n                        }\n                        ","\n                        ","\n                        ","(msg_getLength(outMessage1) === 0 ? msg_bang(): outMessage1)\n                        ","(msg_getLength(outMessage0) === 0 ? msg_bang(): outMessage0)\n                        return\n                    "])),o,a,t.$2,a,t.$1,t.$0,Zs("Message","outMessage1","msg_slice(inMessage, ".concat(a,".splitPoint, msg_getLength(inMessage))")),Zs("Message","outMessage0","msg_slice(inMessage, 0, ".concat(a,".splitPoint)")),t.$1,t.$0),1:Vc(n.setSplitPoint,a)};case"trim":return{0:eo([Js("Message","m")])(tv||(tv=r(["\n                        ","(m)\n                        return\n                    "])),t.$0)};case"length":return{0:eo([Js("Message","m")])(rv||(rv=r(["\n                        if (msg_isBang(m)) {\n                            ","(msg_floats([0]))\n                        } else {\n                            ","(msg_floats([toFloat(msg_getLength(m))]))\n                        }\n                        return\n                    "])),t.$0,t.$0)};case"append":case"prepend":const e="prepend"===s.operation?"msg_concat(".concat(a,".currentList, m)"):"msg_concat(m, ".concat(a,".currentList)");return{0:eo([Js("Message","m")])(av||(av=r(["\n                        if (msg_isBang(m)) {\n                            ","(msg_getLength(",".currentList) === 0 ? msg_bang(): ",".currentList)\n                        } else {\n                            ","(msg_getLength(",".currentList) === 0 && msg_getLength(m) === 0 ? msg_bang(): ",")\n                        }\n                        return\n                    "])),t.$0,a,a,t.$0,a,e),1:eo([Js("Message","m")])(sv||(sv=r(["\n                        ","\n                        ",".currentList = inMessage\n                        return\n                    "])),o,a)};default:throw new Error("unknown list operation ".concat(s.operation))}},core:e=>{let{ns:n}=e;return to([Qs(n.setSplitPoint,[Js(n.State,"state"),Js("Float","value")],"void")(ov||(ov=r(["\n                state.splitPoint = toInt(value)\n            "])))])},dependencies:[$d,Hd]};var uv,cv;const dv={translateArgs:e=>({value:Pc(e.args[0])||""}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0})},fv={state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("string","value",'"'.concat(n.value,'"'))])},messageReceivers:e=>{let{snds:n,state:t}=e;return{0:eo([Js("Message","m")])(uv||(uv=r(["\n            if (msg_isBang(m)) {\n                ","(msg_strings([",".value]))\n                return\n    \n            } else if (msg_isMatching(m, [MSG_STRING_TOKEN])) {\n                ",".value = msg_readStringToken(m, 0)\n                ","(msg_strings([",".value]))\n                return\n    \n            }\n        "])),n.$0,t,t,n.$0,t),1:eo([Js("Message","m")])(cv||(cv=r(["\n            if (msg_isMatching(m, [MSG_STRING_TOKEN])) {\n                ",".value = msg_readStringToken(m, 0)\n                return \n            }\n        "])),t)}},dependencies:[$d,Rd]};var pv,hv;const mv={send:{translateArgs:e=>({busName:Pc(e.args[0])||""}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{}})},receive:{translateArgs:e=>({busName:Pc(e.args[0])||""}),build:()=>({inlets:{},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0})}},gv={send:{state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("string","busName",'"'.concat(n.busName,'"'))])},messageReceivers:e=>{let{state:n}=e;return{0:eo([Js("Message","m")])(pv||(pv=r(["\n            msgBusPublish(",".busName, m)\n            return\n        "])),n),1:(t="".concat(n,".busName"),eo([Js("Message","m")])(Uc||(Uc=r(["\n        if (msg_isMatching(m, [MSG_STRING_TOKEN])) {\n            "," = msg_readStringToken(m, 0)\n            return\n        }\n    "])),t))};var t},dependencies:[Rd]},receive:{initialization:e=>{let{node:{args:n},snds:t}=e;return ro(hv||(hv=r(['\n            msgBusSubscribe("','", ',")\n        "])),n.busName,t.$0)},dependencies:[Rd]}};var yv,bv,vv,_v,Sv;const wv={state:e=>{let{ns:n}=e;return no(n.State,[Js("Map<fs_OperationId, ".concat(n.Operation,">"),"operations","new Map()")])},messageReceivers:e=>{let{ns:n,state:t,globs:a,snds:s}=e;return{0:eo([Js("Message","m")])(yv||(yv=r(["\n            if (\n                msg_getLength(m) >= 3 \n                && msg_isStringToken(m, 0)\n                && (\n                    msg_readStringToken(m, 0) === 'read'\n                    || msg_readStringToken(m, 0) === 'write'\n                )\n            ) {\n                ","\n                ","\n                ","\n                ","\n                \n                // Remove the operation type\n                unhandledOptions.delete(0)\n                \n                ","\n                ","\n                while (i < msg_getLength(m)) {\n                    if (!unhandledOptions.has(i)) {\n\n                    } else if (msg_isStringToken(m, i)) {\n                        str = msg_readStringToken(m, i)\n                        if (str === '-resize') {\n                            unhandledOptions.delete(i)\n                            operation.resize = true\n\n                        } else if (str === '-maxsize' || str === '-nframes') {\n                            unhandledOptions.delete(i)\n                            if (\n                                i + 1 >= msg_getLength(m) \n                                || !msg_isFloatToken(m, i + 1)\n                            ) {\n                                console.log(\"invalid value for -maxsize\")\n                            }\n                            operation.maxSize = msg_readFloatToken(m, i + 1)\n                            unhandledOptions.delete(i + 1)\n                            i++\n\n                        } else if (str === '-skip') {\n                            unhandledOptions.delete(i)\n                            if (\n                                i + 1 >= msg_getLength(m) \n                                || !msg_isFloatToken(m, i + 1)\n                            ) {\n                                console.log(\"invalid value for -skip\")\n                            }\n                            operation.skip = msg_readFloatToken(m, i + 1)\n                            unhandledOptions.delete(i + 1)\n                            i++\n\n                        } else if (str === '-normalize') {\n                            unhandledOptions.delete(i)\n                            console.log('-normalize not implemented')\n                        }\n                    }\n                    i++\n                }\n\n                i = 1\n                ","\n                while (i < msg_getLength(m)) {\n                    if (!unhandledOptions.has(i)) {\n\n                    } else if (msg_isStringToken(m, i)) {\n                        str = msg_readStringToken(m, i)\n                        if (!str.startsWith('-') && urlFound === false) {\n                            operation.url = str\n                            urlFound = true\n                        } else {\n                            operation.arrayNames.push(str)\n                        }\n                        unhandledOptions.delete(i)\n                    }\n                    i++\n                }\n\n                for (i = 0; i < operation.arrayNames.length; i++) {\n                    if (!commons_hasArray(operation.arrayNames[i])) {\n                        console.log('[soundfiler] unknown array ' + operation.arrayNames[i])\n                        return\n                    }\n                }\n\n                if (unhandledOptions.size) {\n                    console.log(\"soundfiler received invalid options\")\n                }\n\n                soundInfo.channelCount = operation.arrayNames.length\n\n                if (operationType === 'read') {\n                    ","\n\n                    ",".operations.set(id, operation)\n\n                } else if (operationType === 'write') {\n                    ","\n                    ","\n                    ","\n                    ","\n                    \n                    for (i = 0; i < operation.arrayNames.length; i++) {\n                        framesToWrite = Math.max(\n                            framesToWrite,\n                            toFloat(commons_getArray(operation.arrayNames[i]).length) - operation.skip,\n                        )\n                    }\n\n                    if (operation.maxSize >= 0) {\n                        framesToWrite = Math.min(\n                            operation.maxSize, \n                            framesToWrite\n                        )\n                    }\n                    operation.framesToWrite = framesToWrite\n\n                    if (framesToWrite < 1) {\n                        console.log('[soundfiler] no frames to write')\n                        return\n                    }\n\n                    for (i = 0; i < operation.arrayNames.length; i++) {\n                        array = commons_getArray(operation.arrayNames[i])\n                        if (framesToWrite > toFloat(array.length) - operation.skip) {\n                            sound.push(createFloatArray(toInt(framesToWrite)))\n                            sound[i].set(array.subarray(\n                                toInt(operation.skip), \n                                toInt(operation.skip + framesToWrite)\n                            ))\n                        } else {\n                            sound.push(array.subarray(\n                                toInt(operation.skip), \n                                toInt(operation.skip + framesToWrite)\n                            ))\n                        }\n                    }\n\n                    ","\n\n                    ","\n\n                    ",".operations.set(id, operation)\n                }\n\n                return\n            }\n        "])),Zs("string","operationType","msg_readStringToken(m, 0)"),Zs("fs_SoundInfo","soundInfo","{\n                    channelCount: 0,\n                    sampleRate: toInt(".concat(a.sampleRate,"),\n                    bitDepth: 32,\n                    encodingFormat: '',\n                    endianness: '',\n                    extraOptions: '',\n                }")),Zs(n.Operation,"operation","{\n                    arrayNames: [],\n                    resize: false,\n                    maxSize: -1,\n                    skip: 0,\n                    framesToWrite: 0,\n                    url: '',\n                    soundInfo,\n                }"),Js("Set<Int>","unhandledOptions","parseSoundFileOpenOpts(\n                    m,\n                    soundInfo,\n                )"),Js("Int","i","1"),Js("string","str",'""'),Js("boolean","urlFound","false"),Zs("fs_OperationId","id",ro(bv||(bv=r(["fs_readSoundFile(\n                        operation.url, \n                        soundInfo,\n                        ","\n                    )"])),eo([Js("fs_OperationId","id"),Js("fs_OperationStatus","status"),Js("FloatArray[]","sound")],"void")(vv||(vv=r(["\n                            ","\n                            ",".operations.delete(id)\n                            ","\n                            ","\n                            ","\n                            ","\n                            for (i = 0; i < sound.length; i++) {\n                                if (operation.resize) {\n                                    if (operation.maxSize > 0) {\n                                        framesToRead = Math.min(\n                                            operation.maxSize, \n                                            toFloat(sound[i].length) - operation.skip\n                                        )\n        \n                                    } else {\n                                        framesToRead = toFloat(sound[i].length) - operation.skip\n                                    }\n        \n                                    commons_setArray(\n                                        operation.arrayNames[i], \n                                        sound[i].subarray(\n                                            toInt(operation.skip), \n                                            toInt(operation.skip + framesToRead)\n                                        )\n                                    )\n                                    \n                                } else {\n                                    array = commons_getArray(operation.arrayNames[i])\n                                    framesToRead = Math.min(\n                                        toFloat(array.length),\n                                        toFloat(sound[i].length) - operation.skip\n                                    )\n                                    array.set(sound[i].subarray(0, array.length))\n                                }\n                                maxFramesRead = Math.max(\n                                    maxFramesRead,\n                                    framesToRead\n                                )\n                            }\n        \n                            ","(","(operation.soundInfo))\n                            ","(msg_floats([maxFramesRead]))\n                        "])),Zs(n.Operation,"operation","".concat(t,".operations.get(id)")),t,Js("Int","i","0"),Js("Float","maxFramesRead","0"),Js("Float","framesToRead","0"),Js("FloatArray","array","createFloatArray(0)"),s.$1,n.buildMessage1,s.$0))),t,Js("Int","i","0"),Js("Float","framesToWrite","0"),Js("FloatArray","array","createFloatArray(0)"),Zs("FloatArray[]","sound","[]"),Qs("callback",[Js("fs_OperationId","id"),Js("fs_OperationStatus","status")],"void")(_v||(_v=r(["\n                        ","\n                        ",".operations.delete(id)\n                        ","(","(operation.soundInfo))\n                        ","(msg_floats([operation.framesToWrite]))\n                    "])),Zs(n.Operation,"operation","".concat(t,".operations.get(id)")),t,s.$1,n.buildMessage1,s.$0),Zs("fs_OperationId","id","fs_writeSoundFile(\n                        sound, \n                        operation.url, \n                        soundInfo, \n                        callback\n                    )"),t)}},core:e=>{let{ns:n}=e;return to([no(n.Operation,[Js("string","url"),Js("Array<string>","arrayNames"),Js("boolean","resize"),Js("Float","maxSize"),Js("Float","framesToWrite"),Js("Float","skip"),Js("fs_SoundInfo","soundInfo")]),Qs(n.buildMessage1,[Js("fs_SoundInfo","soundInfo")],"Message")(Sv||(Sv=r(["\n                ","\n                msg_writeFloatToken(m, 0, toFloat(soundInfo.sampleRate))\n                msg_writeFloatToken(m, 1, -1) // TODO IMPLEMENT headersize\n                msg_writeFloatToken(m, 2, toFloat(soundInfo.channelCount))\n                msg_writeFloatToken(m, 3, Math.round(toFloat(soundInfo.bitDepth) / 8))\n                msg_writeStringToken(m, 4, soundInfo.endianness)\n                return m\n            "])),Zs("Message","m","msg_create([\n                    MSG_FLOAT_TOKEN,\n                    MSG_FLOAT_TOKEN,\n                    MSG_FLOAT_TOKEN,\n                    MSG_FLOAT_TOKEN,\n                    MSG_STRING_TOKEN,\n                    soundInfo.endianness.length,\n                ])"))])},dependencies:[qm,Ji,Iu,Tu]};var kv;const Iv={messageReceivers:e=>{let{node:{args:n}}=e;return{0:eo([Js("Message","m")])(kv||(kv=r(['\n            console.log("',' " + msg_display(m))\n            return\n        '])),n.prefix)}}};var Tv,xv;const Av=["float","bang","symbol","list","anything"],Ev=e=>{switch(e){case"f":return"float";case"b":return"bang";case"s":return"symbol";case"l":return"list";case"a":return"anything";case"p":return"pointer";default:return e}},Ov=e=>{if("pointer"===e)throw new Nc('"pointer" not supported (yet)');if(!Av.includes(e))throw new Nc("invalid type ".concat(e));return e},Cv=(e,n,t)=>{switch(e){case"float":return"msg_floats([messageTokenToFloat(".concat(n,", ").concat(t,")])");case"bang":return"msg_bang()";case"symbol":return"msg_strings([messageTokenToString(".concat(n,", ").concat(t,")])");case"list":case"anything":return"".concat(n);default:throw new Error("type argument ".concat(e," not supported (yet)"))}},Mv=()=>Qs("messageTokenToFloat",[Js("Message","m"),Js("Int","i")],"Float")(Tv||(Tv=r(["\n        if (msg_isFloatToken(m, i)) {\n            return msg_readFloatToken(m, i)\n        } else {\n            return 0\n        }\n    "]))),Fv=()=>Qs("messageTokenToString",[Js("Message","m"),Js("Int","i")],"string")(xv||(xv=r(["\n        if (msg_isStringToken(m, i)) {\n            ","\n            if (str === 'bang') {\n                return 'symbol'\n            } else {\n                return str\n            }\n        } else {\n            return 'float'\n        }\n    "])),Zs("string","str","msg_readStringToken(m, i)"));var Pv;const Nv={translateArgs:e=>{let{args:n}=e;return{typeArguments:0===n.length?["bang","bang"]:n.map(Mc).map(Ev).map(Ov)}},build:e=>{let{typeArguments:n}=e;return{inlets:{0:{type:"message",id:"0"}},outlets:Ys(n,((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}]))}}},Rv={messageReceivers:e=>{let{snds:n,node:{args:{typeArguments:t}}}=e;return{0:eo([Js("Message","m")])(Pv||(Pv=r(["\n            ","\n            return\n        "])),t.reverse().map(((e,r)=>"".concat(n[t.length-r-1],"(").concat(Cv(e,"m",0),")"))))}},dependencies:[Mv,Fv,$d]};var Lv;const Dv={translateArgs:e=>{let{args:n}=e;return{initValue:Fc(n[0])||0}},build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}})},zv={state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("Float","currentValue",n.initValue)])},messageReceivers:e=>{let{snds:n,state:t}=e;return{0:eo([Js("Message","m")])(Lv||(Lv=r(["\n            if (msg_isMatching(m, [MSG_FLOAT_TOKEN])) {\n                ","\n                if (newValue !== ",".currentValue) {\n                    ",".currentValue = newValue\n                    ","(msg_floats([",".currentValue]))\n                }\n                return\n    \n            } else if (msg_isBang(m)) {\n                ","(msg_floats([",".currentValue]))\n                return \n    \n            } else if (\n                msg_isMatching(m, [MSG_STRING_TOKEN, MSG_FLOAT_TOKEN])\n                && msg_readStringToken(m, 0) === 'set'\n            ) {\n                ",".currentValue = msg_readFloatToken(m, 1)\n                return\n            }\n        "])),Zs("Float","newValue","msg_readFloatToken(m, 0)"),t,t,n[0],t,n[0],t,t)}},dependencies:[$d]};var Uv;const jv={translateArgs:e=>{let{args:n}=e;return{threshold:Fc(n[0])||0}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}}})},Bv={state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("Float","threshold",n.threshold)])},messageReceivers:e=>{let{snds:n,state:t}=e;return{0:eo([Js("Message","m")])(Uv||(Uv=r(["\n            if (msg_isMatching(m, [MSG_FLOAT_TOKEN])) {\n                ","\n                if (value >= ",".threshold) {\n                    ","(msg_floats([value]))\n                } else {\n                    ","(msg_floats([value]))\n                }\n                return\n            }\n        "])),Zs("Float","value","msg_readFloatToken(m, 0)"),t,n[1],n[0]),1:Bc("".concat(t,".threshold"))}}};var Vv;const Gv={translateArgs:e=>{let{args:n}=e;return{minValue:Fc(n[0])||0,maxValue:Fc(n[1])||0}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"message",id:"0"}}})},Wv={state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("Float","minValue",n.minValue),Js("Float","maxValue",n.maxValue)])},messageReceivers:e=>{let{snds:n,state:t}=e;return{0:eo([Js("Message","m")])(Vv||(Vv=r(["\n            if (msg_isMatching(m, [MSG_FLOAT_TOKEN])) {\n                ","(msg_floats([\n                    Math.max(\n                        Math.min(\n                            ",".maxValue, \n                            msg_readFloatToken(m, 0)\n                        ), \n                        ",".minValue\n                    )\n                ]))\n                return\n            }\n        "])),n[0],t,t),1:Bc("".concat(t,".minValue")),2:Bc("".concat(t,".maxValue"))}}};var $v,Hv,Kv;const qv={translateArgs:e=>{let{args:n}=e;return{filters:n.length?n:[0]}},build:e=>{const n={0:{type:"message",id:"0"}};return 1===e.filters.length&&(n[1]={type:"message",id:"1"}),{inlets:n,outlets:Ys(e.filters.length?qs(e.filters.length+1):[0,1],((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}]))}}},Yv={state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("Float","floatFilter","number"===typeof n.filters[0]?n.filters[0]:0),Js("string","stringFilter",'"'.concat(n.filters[0],'"')),Js("Int","filterType","number"===typeof n.filters[0]?"MSG_FLOAT_TOKEN":"MSG_STRING_TOKEN")])},messageReceivers:e=>{let{snds:n,state:t,node:{args:a}}=e;return a.filters.length>1?{0:eo([Js("Message","m")])($v||($v=r(["\n                    ","\n    \n                    ","(m)\n                    return\n                "])),a.filters.map(((e,t)=>Xs(["float"===e,"\n                            if (msg_isFloatToken(m, 0)) {\n                                ".concat(n[t],"(m)\n                                return\n                            }\n                        ")],["symbol"===e,"\n                            if (msg_isStringToken(m, 0)) {\n                                ".concat(n[t],"(m)\n                                return\n                            }\n                        ")],["list"===e,"\n                            if (msg_getLength(m).length > 1) {\n                                ".concat(n[t],"(m)\n                                return\n                            }\n                        ")],["bang"===e,"\n                            if (msg_isBang(m)) {\n                                ".concat(n[t],"(m)\n                                return\n                            }\n                        ")],["number"===typeof e,"\n                            if (\n                                msg_isFloatToken(m, 0)\n                                && msg_readFloatToken(m, 0) === ".concat(e,"\n                            ) {\n                                ").concat(n[t],"(msg_emptyToBang(msg_shift(m)))\n                                return\n                            }\n                        ")],["string"===typeof e,'\n                            if (\n                                msg_isStringToken(m, 0) \n                                && msg_readStringToken(m, 0) === "'.concat(e,'"\n                            ) {\n                                ').concat(n[t],"(msg_emptyToBang(msg_shift(m)))\n                                return\n                            }")]))),n[a.filters.length])}:{0:eo([Js("Message","m")])(Hv||(Hv=r(["\n                    if (",".filterType === MSG_STRING_TOKEN) {\n                        if (\n                            (",".stringFilter === 'float'\n                                && msg_isFloatToken(m, 0))\n                            || (",".stringFilter === 'symbol'\n                                && msg_isStringToken(m, 0))\n                            || (",".stringFilter === 'list'\n                                && msg_getLength(m) > 1)\n                            || (",".stringFilter === 'bang' \n                                && msg_isBang(m))\n                        ) {\n                            ","(m)\n                            return\n                        \n                        } else if (\n                            msg_isStringToken(m, 0)\n                            && msg_readStringToken(m, 0) === ",".stringFilter\n                        ) {\n                            ","(msg_emptyToBang(msg_shift(m)))\n                            return\n                        }\n    \n                    } else if (\n                        msg_isFloatToken(m, 0)\n                        && msg_readFloatToken(m, 0) === ",".floatFilter\n                    ) {\n                        ","(msg_emptyToBang(msg_shift(m)))\n                        return\n                    }\n                \n                    ","(m)\n                return\n                "])),t,t,t,t,t,n.$0,t,n.$0,t,n.$0,n.$1),1:eo([Js("Message","m")])(Kv||(Kv=r(["\n                    ",".filterType = msg_getTokenType(m, 0)\n                    if (",".filterType === MSG_STRING_TOKEN) {\n                        ",".stringFilter = msg_readStringToken(m, 0)\n                    } else {\n                        ",".floatFilter = msg_readFloatToken(m, 0)\n                    }\n                    return\n                "])),t,t,t,t)}},dependencies:[$d,Hd]};var Xv,Jv;const Zv={translateArgs:e=>{let{args:n}=e;return{isClosed:0===(Fc(n[0])||0)}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}})},Qv={state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("Float","isClosed",n.isClosed?"true":"false")])},messageReceivers:e=>{let{ns:n,snds:t,state:a}=e;return{0:eo([Js("Message","m")])(Xv||(Xv=r(["\n            if (!",".isClosed) {\n                ","(m)\n            }\n            return\n        "])),a,t.$0),1:Vc(n.setIsClosed,a)}},core:e=>{let{ns:n}=e;return to([Qs(n.setIsClosed,[Js(n.State,"state"),Js("Float","value")],"void")(Jv||(Jv=r(["\n                state.isClosed = (value === 0)\n            "])))])}};var e_,n_;const t_={state:e=>{let{ns:n}=e;return no(n.State,[Js("boolean","continueIter","true")])},messageReceivers:e=>{let{snds:n,state:t}=e;return{0:eo([Js("Message","m")])(e_||(e_=r(["\n            if (msg_isBang(m)) {\n                ",".continueIter = true\n                while (",".continueIter) {\n                    ","(msg_bang())\n                }\n                return\n    \n            } else if (msg_isMatching(m, [MSG_FLOAT_TOKEN])) {\n                ",".continueIter = true\n                ","\n                ","\n                while (",".continueIter && iterCount++ < maxIterCount) {\n                    ","(msg_bang())\n                }\n                return\n            }\n        "])),t,t,n[0],t,Js("Int","maxIterCount","toInt(msg_readFloatToken(m, 0))"),Js("Int","iterCount","0"),t,n[0]),1:eo([Js("Message","m")])(n_||(n_=r(["\n            if (msg_isBang(m)) {\n                ",".continueIter = false\n                return\n            }\n        "])),t)}},dependencies:[$d]};var r_,a_;const s_={translateArgs:e=>{let{args:n}=e;return{maxValue:Fc(n[0])||0}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}})},o_={state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("Float","maxValue",n.maxValue)])},messageReceivers:e=>{let{ns:n,snds:t,state:a}=e;return{0:eo([Js("Message","m")])(r_||(r_=r(["\n            if (msg_isBang(m)) {\n                ","(msg_floats([Math.floor(Math.random() * ",".maxValue)]))\n                return\n            } else if (\n                msg_isMatching(m, [MSG_STRING_TOKEN, MSG_FLOAT_TOKEN])\n                && msg_readStringToken(m, 0) === 'seed'\n            ) {\n                console.log('WARNING : seed not implemented yet for [random]')\n                return\n            }\n        "])),t[0],a),1:Vc(n.setMaxValue,a)}},core:e=>{let{ns:n}=e;return to([Qs(n.setMaxValue,[Js(n.State,"state"),Js("Float","maxValue")],"void")(a_||(a_=r(["\n                state.maxValue = Math.max(maxValue, 0)\n            "])))])},dependencies:[$d]};var i_,l_,u_,c_,d_,f_,p_,h_;const m_={translateArgs:e=>{let{args:n}=e,t=0;return n.length>=1&&(t=Cc(n[n.length-1]),n=n.slice(0,-1)),n=n.length?n:[0],{typeArguments:n.map(Ev).map((e=>["number"===typeof e?"float":Ov(e),"number"===typeof e?e:"float"===e?0:"symbol"])),delay:t}},build:e=>({inlets:{...Ys(e.typeArguments,((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}])),["".concat(e.typeArguments.length)]:{type:"message",id:"".concat(e.typeArguments.length)}},outlets:Ys(e.typeArguments,((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}]))})},g_={state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("Int","delay",0),Js("Array<Message>","outputMessages","[".concat(n.typeArguments.map((e=>{let[n,t]=e;return"number"===typeof t?"msg_floats([".concat(t,"])"):'msg_strings(["'.concat(t,'"])')})).join(","),"]")),Js("Array<".concat(t.ScheduledMessage,">"),"scheduledMessages","[]"),Js("Array<MessageHandler>","snds","[]")])},initialization:e=>{let{ns:n,node:{args:t},state:a,snds:s}=e;return ro(i_||(i_=r(["\n            ","(",", ",")\n            ",".snds = [","]\n        "])),n.setDelay,a,t.delay,a,qs(t.typeArguments.length).reverse().map((e=>s[e])).join(", "))},messageReceivers:e=>{let{ns:n,node:{args:t},state:a,globs:s}=e;return{0:eo([Js("Message","m")])(l_||(l_=r(["\n            if (msg_isAction(m, 'clear')) {\n                ","(",")\n                return \n    \n            } else if (msg_isAction(m, 'flush')) {\n                if (",".scheduledMessages.length) {\n                    ","(\n                        ",", \n                        ",".scheduledMessages[",".scheduledMessages.length - 1].frame\n                    )\n                }\n                return\n    \n            } else {\n                ","\n                ","\n    \n                ","\n    \n                return\n            }\n        "])),n.clear,a,a,n.sendMessages,a,a,a,Zs("Message","inMessage","msg_isBang(m) ? msg_create([]): m"),Zs("Int","insertIndex","".concat(n.prepareMessageScheduling,"(\n                    ").concat(a,", \n                    () => {\n                        ").concat(n.sendMessages,"(").concat(a,", ").concat(s.frame,")\n                    },\n                )")),t.typeArguments.slice(0).reverse().map(((e,n)=>{let[r]=e;return[t.typeArguments.length-n-1,r]})).map(((e,n)=>{let[t,s]=e;return ro(u_||(u_=r(["\n                            if (msg_getLength(inMessage) > ",") {\n                                ",".scheduledMessages[insertIndex + ","].message = \n                                    ","\n                                ",".outputMessages[","] \n                                    = ",".scheduledMessages[insertIndex + ","].message\n                            } else {\n                                ",".scheduledMessages[insertIndex + ","].message \n                                    = ",".outputMessages[","]\n                            }\n                        "])),t,a,n,Cv(s,"inMessage",t),a,t,a,n,a,n,a,t)}))),...Ys(t.typeArguments.slice(1),((e,n)=>{let[t]=e;return["".concat(n+1),eo([Js("Message","m")])(c_||(c_=r(["\n                    ",".outputMessages[","] = ","\n                    return\n                "])),a,n+1,Cv(t,"m",0))]})),[t.typeArguments.length]:Vc(n.setDelay,a)}},core:e=>{let{ns:n,globs:t}=e;return to([no(n.ScheduledMessage,[Js("Message","message"),Js("Int","frame"),Js("SkedId","skedId")]),Zs(n.ScheduledMessage,n.dummyScheduledMessage,"{\n                message: msg_create([]),\n                frame: 0,\n                skedId: SKED_ID_NULL,\n            }"),Qs(n.prepareMessageScheduling,[Js(n.State,"state"),Js("SkedCallback","callback")],"Int")(d_||(d_=r(["\n                ","\n                ","\n                ","\n        \n                while (\n                    insertIndex < state.scheduledMessages.length \n                    && state.scheduledMessages[insertIndex].frame <= frame\n                ) {\n                    insertIndex++\n                }\n        \n                ","\n                if (\n                    insertIndex === 0 || \n                    (\n                        insertIndex > 0 \n                        && state.scheduledMessages[insertIndex - 1].frame !== frame\n                    )\n                ) {\n                    skedId = commons_waitFrame(frame, callback)\n                }\n        \n                ","\n                for (","; i < state.snds.length; i++) {\n                    state.scheduledMessages.push(",")\n                }\n                state.scheduledMessages.copyWithin(\n                    (insertIndex + 1) * state.snds.length, \n                    insertIndex * state.snds.length\n                )\n                for (","; i < state.snds.length; i++) {\n                    state.scheduledMessages[insertIndex + i] = {\n                        message: ",".message,\n                        frame,\n                        skedId,\n                    }\n                }\n        \n                return insertIndex\n            "])),Js("Int","insertIndex","0"),Js("Int","frame","".concat(t.frame," + state.delay")),Js("SkedId","skedId","SKED_ID_NULL"),"","",Js("Int","i",0),n.dummyScheduledMessage,Js("Int","i",0),n.dummyScheduledMessage),Qs(n.sendMessages,[Js(n.State,"state"),Js("Int","toFrame")],"void")(f_||(f_=r(["\n                ","\n                while (\n                    state.scheduledMessages.length \n                    && state.scheduledMessages[0].frame <= toFrame\n                ) {\n                    for (i = 0; i < state.snds.length; i++) {\n                        // Snds are already reversed\n                        state.snds[i](state.scheduledMessages.shift().message)\n                    }\n                }\n            "])),Js("Int","i",0)),Qs(n.clear,[Js(n.State,"state")],"void")(p_||(p_=r(["\n                ","\n                ","\n                for (i; i < length; i++) {\n                    commons_cancelWaitFrame(state.scheduledMessages[i].skedId)\n                }\n                state.scheduledMessages = []\n            "])),Js("Int","i","0"),Zs("Int","length","state.scheduledMessages.length")),Qs(n.setDelay,[Js(n.State,"state"),Js("Float","delay")],"void")(h_||(h_=r(["\n                state.delay = toInt(Math.round(delay / 1000 * ","))\n            "])),t.sampleRate)])},dependencies:[Mv,Fv,$d,Kd,Zi]};var y_,b_,v_;const __={translateArgs:e=>{let{args:n}=e;return{typeArguments:(n.length?n:["float","float"]).map(Ev).map((e=>{if("bang"===(e=e||"float")&&(e="float"),"number"===typeof e)return e;if(!["float","symbol"].includes(e))throw new Error("".concat(e," not supported (yet)"));return e})).map((e=>["number"===typeof e?"float":Ov(e),"number"===typeof e?e:"float"===e?0:"symbol"]))}},build:e=>{let{typeArguments:n}=e;return{inlets:Ys(n,((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}])),outlets:{0:{type:"message",id:"0"}}}}},S_={state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("Array<Float>","floatValues","[".concat(n.typeArguments.map((e=>{let[n,t]=e;return"float"===n?t:0})).join(","),"]")),Js("Array<string>","stringValues","[".concat(n.typeArguments.map((e=>{let[n,t]=e;return"symbol"===n?'"'.concat(t,'"'):'""'})).join(","),"]"))])},messageReceivers:e=>{let{snds:n,state:t,node:a}=e;return{0:eo([Js("Message","m")])(y_||(y_=r(["\n            if (!msg_isBang(m)) {\n                for (","; i < msg_getLength(m); i++) {\n                    ",".stringValues[i] = messageTokenToString(m, i)\n                    ",".floatValues[i] = messageTokenToFloat(m, i)\n                }\n            }\n    \n            ","\n    \n            ","\n    \n            ","\n    \n            ","(messageOut)\n            return\n        "])),Js("Int","i","0"),t,t,Zs("MessageTemplate","template","[".concat(a.args.typeArguments.map(((e,n)=>{let[r]=e;return"symbol"===r?"MSG_STRING_TOKEN, ".concat(t,".stringValues[").concat(n,"].length"):"MSG_FLOAT_TOKEN"})).join(","),"]")),Zs("Message","messageOut","msg_create(template)"),a.args.typeArguments.map(((e,n)=>{let[r]=e;return"symbol"===r?"msg_writeStringToken(messageOut, ".concat(n,", ").concat(t,".stringValues[").concat(n,"])"):"msg_writeFloatToken(messageOut, ".concat(n,", ").concat(t,".floatValues[").concat(n,"])")})),n[0]),...Ys(a.args.typeArguments.slice(1),((e,n)=>{let[a]=e;if("symbol"===a)return["".concat(n+1),eo([Js("Message","m")])(b_||(b_=r(["\n                        ",".stringValues[","] = messageTokenToString(m, 0)\n                        return\n                    "])),t,n+1)];if("float"===a)return["".concat(n+1),eo([Js("Message","m")])(v_||(v_=r(["\n                        ",".floatValues[","] = messageTokenToFloat(m, 0)\n                        return\n                    "])),t,n+1)];throw new Error("Unsupported type argument ".concat(a))}))}},dependencies:[Fv,Mv,$d]};var w_;const k_={translateArgs:e=>{let{args:n}=e;return{typeArguments:0===n.length?["float","float"]:n.map(Ev).map((e=>{if("number"===typeof e)return"float";if("symbol"===e||"float"===e)return e;throw new Error('Invalid type argument for unpack "'.concat(e,'"'))}))}},build:e=>{let{typeArguments:n}=e;return{inlets:{0:{type:"message",id:"0"}},outlets:Ys(n,((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}]))}}},I_={messageReceivers:e=>{let{snds:n,node:{args:t}}=e;return{0:eo([Js("Message","m")])(w_||(w_=r(["\n            ","\n            return\n        "])),t.typeArguments.map(((e,n)=>[e,n])).reverse().map((e=>{let[t,r]=e;return"\n                    if (\n                        msg_getLength(m) >= ".concat(r+1,"\n                    ) {\n                        if (msg_getTokenType(m, ").concat(r,") === ").concat("float"===t?"MSG_FLOAT_TOKEN":"MSG_STRING_TOKEN",") {\n                            ").concat(Xs(["float"===t,"".concat(n[r],"(msg_floats([msg_readFloatToken(m, ").concat(r,")]))")],["symbol"===t,"".concat(n[r],"(msg_strings([msg_readStringToken(m, ").concat(r,")]))")]),"\n                        } else {\n                            console.log('unpack : invalid token type index ").concat(r,"')\n                        }\n                    }\n                ")})))}}};var T_,x_,A_,E_;const O_={translateArgs:e=>{let{args:n}=e;return{tokenizedExpressions:j_(n).map(R_)}},build:e=>({inlets:Ys(z_(e.tokenizedExpressions),(e=>{let{id:n}=e;return["".concat(n),{type:"message",id:"".concat(n)}]})),outlets:Ys(e.tokenizedExpressions,((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}]))})},C_={translateArgs:e=>{let{args:n}=e;return{tokenizedExpressions:j_(n).map(R_)}},build:e=>({inlets:Ys(U_(e.tokenizedExpressions),(e=>{let{id:n,type:t}=e;return["".concat(n),{type:"signal"===t?"signal":"message",id:"".concat(n)}]})),outlets:Ys(e.tokenizedExpressions,((e,n)=>["".concat(n),{type:"signal",id:"".concat(n)}]))})},M_=()=>({state:e=>{let{node:{args:n},ns:t}=e;return no(t.State,[Js("Map<Int, Float>","floatInputs","new Map()"),Js("Map<Int, string>","stringInputs","new Map()"),Js("Array<Float>","outputs","new Array(".concat(n.tokenizedExpressions.length,")"))])},initialization:e=>{let{node:{args:n,type:t},state:a}=e;const s="expr"===t?z_(n.tokenizedExpressions):U_(n.tokenizedExpressions).filter((e=>{let{type:n}=e;return"signal"!==n}));return ro(T_||(T_=r(["\n            ","\n            ","\n        "])),s.filter((e=>"float"===e.type||"int"===e.type)).map((e=>"".concat(a,".floatInputs.set(").concat(e.id,", 0)"))),s.filter((e=>"string"===e.type)).map((e=>"".concat(a,".stringInputs.set(").concat(e.id,", '')"))))},messageReceivers:e=>{let{snds:n,state:t,node:{args:a,type:s}}=e;const o="expr"===s?z_(a.tokenizedExpressions):U_(a.tokenizedExpressions).filter((e=>{let{type:n}=e;return"signal"!==n})),i=o.length&&0===o[0].id;return{0:eo([Js("Message","m")])(x_||(x_=r(["\n                if (!msg_isBang(m)) {\n                    for (","; i < msg_getLength(m); i++) {\n                        ",".stringInputs.set(i, messageTokenToString(m, i))\n                        ",".floatInputs.set(i, messageTokenToFloat(m, i))\n                    }\n                }\n    \n                ","\n                \n                return\n            "])),Js("Int","i","0"),t,t,"expr"===s?"\n                    ".concat(a.tokenizedExpressions.map(((e,n)=>"".concat(t,".outputs[").concat(n,"] = ").concat(L_(t,null,e)))),"\n            \n                    ").concat(a.tokenizedExpressions.map(((e,r)=>"".concat(n["".concat(r)],"(msg_floats([").concat(t,".outputs[").concat(r,"]]))"))),"\n                "):null),...Ys(o.slice(i?1:0),(e=>{let{id:n,type:a}=e;if("float"===a||"int"===a)return["".concat(n),eo([Js("Message","m")])(A_||(A_=r(["\n                                ",".floatInputs.set(",", messageTokenToFloat(m, 0))\n                                return\n                            "])),t,n)];if("string"===a)return["".concat(n),eo([Js("Message","m")])(E_||(E_=r(["\n                                ",".stringInputs.set(",", messageTokenToString(m, 0))\n                                return\n                            "])),t,n)];throw new Error("invalid input type ".concat(a))}))}},dependencies:[Fv,Mv,hy,$d,Ji]}),F_=M_(),P_={...M_(),flags:{alphaName:"expr_t"},dsp:e=>{let{node:{args:n},state:t,outs:r,ins:a}=e;return to(n.tokenizedExpressions.map(((e,n)=>"".concat(r[n]," = ").concat(L_(t,a,e)))))}},N_=/(?<f>\$f(?<id_f>[0-9]+))|(?<v>\$v(?<id_v>[0-9]+))|(?<i>\$i(?<id_i>[0-9]+))|(?<s>\$s(?<id_s>[0-9]+)\s*\[(?<sIndex>[^\[\]]*)\])/,R_=e=>{let n,t=[];for(;n=N_.exec(e);)n.index&&t.push({type:"raw",content:e.slice(0,n.index)}),n[1]?t.push({type:"float",id:parseInt(n[2])-1}):n[3]?t.push({type:"signal",id:parseInt(n[4])-1}):n[5]?t.push({type:"int",id:parseInt(n[6])-1}):n[7]&&(t=[...t,{type:"string",id:parseInt(n[8])-1},{type:"indexing-start"},...R_(n[9]),{type:"indexing-end"}]),e=e.slice(n.index+n[0].length);return e.length&&t.push({type:"raw",content:e}),t},L_=(e,n,t)=>"+("+t.map((t=>{switch(t.type){case"float":return"".concat(e,".floatInputs.get(").concat(t.id,")");case"signal":if(null===n)throw new Error("invalid token signal received");return n[t.id];case"int":return"roundFloatAsPdInt(".concat(e,".floatInputs.get(").concat(t.id,"))");case"string":return"commons_getArray(".concat(e,".stringInputs.get(").concat(t.id,"))");case"indexing-start":return"[toInt(";case"indexing-end":return")]";case"raw":return t.content}})).join("")+")",D_=e=>{const n=[];e.forEach((e=>{e.forEach((e=>{"float"!==e.type&&"signal"!==e.type&&"int"!==e.type&&"string"!==e.type||n.push(e)}))})),n.sort(((e,n)=>{let{id:t}=e,{id:r}=n;return t-r}));const t=new Map;return n.filter((e=>{if(t.has(e.id)){if(t.get(e.id).type!==e.type)throw new Error("contradictory definitions for input ".concat(e.id));return!1}return t.set(e.id,e),!0}))},z_=e=>{const n=D_(e);return n.forEach((e=>{if("signal"===e.type)throw new Error("invalid signal token $v# for [expr]")})),n},U_=e=>D_(e),j_=e=>{let n=e.join(" ");return Object.getOwnPropertyNames(Math).forEach((e=>{n=n.replaceAll(e,"Math.".concat(e))})),n.split(";").map((e=>e.trim()))},B_={expr:F_,"expr~":P_},V_={expr:O_,"expr~":C_};var G_,W_,$_,H_;const K_=e=>({translateArgs:n=>{const t=Fc(n.args[0]);return{value:void 0!==t?t:e}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}})}),q_=e=>{let{operationName:n,generateOperation:t,dependencies:a=[],prepareLeftOp:s,prepareRightOp:o}=e;return{flags:{alphaName:n},state:e=>{let{ns:n}=e;return no(n.State,[Js("Float","leftOp",0),Js("Float","rightOp",0)])},initialization:e=>{let{ns:n,state:t,node:{args:a}}=e;return ro(G_||(G_=r(["\n            ","(",", 0)\n            ","(",", ",")\n        "])),n.setLeft,t,n.setRight,t,a.value)},messageReceivers:e=>{let{ns:n,state:a,snds:s}=e;return{0:eo([Js("Message","m")])(W_||(W_=r(["\n                if (msg_isMatching(m, [MSG_FLOAT_TOKEN])) {\n                    ","(",", msg_readFloatToken(m, 0))\n                    ","(msg_floats([","]))\n                    return\n                \n                } else if (msg_isBang(m)) {\n                    ","(msg_floats([","]))\n                    return\n                }\n            "])),n.setLeft,a,s.$0,t(a),s.$0,t(a)),1:Vc(n.setRight,a)}},core:e=>{let{ns:n}=e;return to([Qs(n.setLeft,[Js(n.State,"state"),Js("Float","value")],"void")($_||($_=r(["\n                    state.leftOp = ","\n                "])),s||"value"),Qs(n.setRight,[Js(n.State,"state"),Js("Float","value")],"void")(H_||(H_=r(["\n                    state.rightOp = ","\n                "])),o||"value")])},dependencies:[$d,...a]}},Y_={"+":q_({operationName:"add",generateOperation:e=>"".concat(e,".leftOp + ").concat(e,".rightOp")}),"-":q_({operationName:"sub",generateOperation:e=>"".concat(e,".leftOp - ").concat(e,".rightOp")}),"*":q_({operationName:"mul",generateOperation:e=>"".concat(e,".leftOp * ").concat(e,".rightOp")}),"/":q_({operationName:"div",generateOperation:e=>"".concat(e,".rightOp !== 0 ? ").concat(e,".leftOp / ").concat(e,".rightOp: 0")}),max:q_({operationName:"max",generateOperation:e=>"Math.max(".concat(e,".leftOp, ").concat(e,".rightOp)")}),min:q_({operationName:"min",generateOperation:e=>"Math.min(".concat(e,".leftOp, ").concat(e,".rightOp)")}),mod:q_({operationName:"mod",prepareLeftOp:"value > 0 ? Math.floor(value): Math.ceil(value)",prepareRightOp:"Math.floor(Math.abs(value))",generateOperation:e=>"".concat(e,".rightOp !== 0 ? (").concat(e,".rightOp + (").concat(e,".leftOp % ").concat(e,".rightOp)) % ").concat(e,".rightOp: 0")}),"%":q_({operationName:"modlegacy",generateOperation:e=>"".concat(e,".leftOp % ").concat(e,".rightOp")}),pow:q_({operationName:"pow",generateOperation:e=>"pow(".concat(e,".leftOp, ").concat(e,".rightOp)"),dependencies:[am]}),log:q_({operationName:"log",generateOperation:e=>"Math.log(".concat(e,".leftOp) / Math.log(").concat(e,".rightOp)")}),"||":q_({operationName:"or",prepareLeftOp:"Math.floor(Math.abs(value))",prepareRightOp:"Math.floor(Math.abs(value))",generateOperation:e=>"".concat(e,".leftOp || ").concat(e,".rightOp ? 1: 0")}),"&&":q_({operationName:"and",prepareLeftOp:"Math.floor(Math.abs(value))",prepareRightOp:"Math.floor(Math.abs(value))",generateOperation:e=>"".concat(e,".leftOp && ").concat(e,".rightOp ? 1: 0")}),">":q_({operationName:"gt",generateOperation:e=>"".concat(e,".leftOp > ").concat(e,".rightOp ? 1: 0")}),">=":q_({operationName:"gte",generateOperation:e=>"".concat(e,".leftOp >= ").concat(e,".rightOp ? 1: 0")}),"<":q_({operationName:"lt",generateOperation:e=>"".concat(e,".leftOp < ").concat(e,".rightOp ? 1: 0")}),"<=":q_({operationName:"lte",generateOperation:e=>"".concat(e,".leftOp <= ").concat(e,".rightOp ? 1: 0")}),"==":q_({operationName:"eq",generateOperation:e=>"".concat(e,".leftOp == ").concat(e,".rightOp ? 1: 0")}),"!=":q_({operationName:"neq",generateOperation:e=>"".concat(e,".leftOp != ").concat(e,".rightOp ? 1: 0")})},X_={"+":K_(0),"-":K_(0),"*":K_(1),"/":K_(1),max:K_(0),min:K_(1),mod:K_(0),"%":K_(0),pow:K_(0),log:K_(Math.E),"||":K_(0),"&&":K_(0),">":K_(0),">=":K_(0),"<":K_(0),"<=":K_(0),"==":K_(0),"!=":K_(0)},J_={...Oc,...Dy,...pm,...nh,...fb,...yb,...nb,...Ag,...mv,...mv,...Lm,"noise~":{translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"signal",id:"0"}}})},"snapshot~":dh,"sig~":Wc,"samphold~":ih,"clip~":rh,"vline~":{translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"signal",id:"0"}}})},"line~":Ph,"dac~":Bp,"adc~":Gp,"samplerate~":{translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}})},"tabplay~":Wm,"readsf~":eg,"writesf~":og,"vd~":{aliasTo:"delread4~"},"bp~":mg,"hip~":Sb,"lop~":xb,"vcf~":Pb,"delwrite~":ib,"s~":{aliasTo:"send~"},"r~":{aliasTo:"receive~"},...tf,...uy,...X_,...Ay,...Sy,...V_,bang:ny,bng:{aliasTo:"bang"},b:{aliasTo:"bang"},list:iv,symbol:dv,loadbang:{translateArgs:()=>({}),build:()=>({inlets:{},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0})},s:{aliasTo:"send"},r:{aliasTo:"receive"},print:{translateArgs:e=>{let n="print:";return 1===e.args.length&&"-n"===e.args[0]?n="":e.args.length>=1&&(n=e.args.join(" ")+":"),{prefix:n}},build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{}})},trigger:Nv,t:{aliasTo:"trigger"},change:Dv,clip:Gv,pipe:m_,moses:jv,pack:__,unpack:k_,spigot:Zv,until:{translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}})},random:s_,route:qv,select:{aliasTo:"route"},sel:{aliasTo:"route"},msg:{skipDollarArgsResolution:!0,translateArgs:e=>{let{args:n}=e;const t=[[]];return n.forEach((e=>{","===e?t.push([]):t[t.length-1].push(e)})),{templates:t.filter((e=>e.length)).map((e=>"symbol"===e[0]?["string"===typeof e[1]?e[1]:""]:e))}},build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}})},metro:Dg,timer:Vg,delay:Yg,del:{aliasTo:"delay"},line:Xh,soundfiler:{translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}}})},tabread:wm,tabwrite:Em,"_mixer~":Lc,_routemsg:Kc,graph:{isNoop:!0},table:{isNoop:!0},array:{isNoop:!0},text:{isNoop:!0},cnv:{isNoop:!0},"block~":{isNoop:!0},openpanel:{isNoop:!0}},Z_={...Ly,...fm,...eh,...pb,...bb,...tb,...Eg,...gv,...Dm,"noise~":jy,"snapshot~":fh,"sig~":$c,"samphold~":lh,"clip~":ah,"vline~":Ah,"line~":Nh,"dac~":Vp,"adc~":Wp,"samplerate~":Hp,"tabplay~":$m,"readsf~":ng,"writesf~":ig,"delwrite~":lb,"bp~":gg,"hip~":wb,"lop~":Ab,"vcf~":Nb,...nf,...cy,...Y_,...wy,...xy,...B_,bang:ty,list:lv,symbol:fv,loadbang:fy,print:Iv,trigger:Rv,change:zv,clip:Wv,pipe:g_,moses:Bv,pack:S_,unpack:I_,spigot:Qv,until:t_,route:Yv,random:o_,msg:qb,metro:zg,timer:Gg,delay:Xg,line:Jh,tabread:km,tabwrite:Om,soundfiler:wv,"_mixer~":Dc,_routemsg:qc},Q_=async e=>{throw new Gs(e)},eS=()=>({}),nS=async(e,n,t)=>{let{nodeBuilders:r,nodeImplementations:a,audioSettings:s,renderAudioSettings:o,io:i={},abstractionLoader:l}=t,u=[],c=[];switch(n){case"pdJson":const t=Ls(e.pd);return 0===t.status?(e.pdJson=t.pd,{status:0,warnings:rS(t.warnings)}):{status:1,warnings:rS(t.warnings),errors:rS(t.errors)};case"dspGraph":const f=await td(e.pdJson,r,l);if(f.abstractionsLoadingWarnings&&(u=Object.entries(f.abstractionsLoadingWarnings).filter((e=>{let[n,t]=e;return!!t.length})).flatMap((e=>{let[n,t]=e;return["Warnings when parsing abstraction ".concat(n," :"),...rS(t)]}))),0===f.status){if(!i.messageReceivers){const{controls:e}=ic(f.pd);i.messageReceivers={...sf(e,f.graph),...af(f.pd,f.graph)}}return e.dspGraph={graph:f.graph,arrays:f.arrays,pd:f.pd,io:{messageReceivers:{},messageSenders:{},...i}},{status:0,warnings:u}}{const e=Object.values(f.abstractionsLoadingErrors).filter((e=>!!e.unknownNodeType)).map((e=>e.unknownNodeType));return e.length&&(c=[...c,...tS(new Set(e))]),c=[...c,...Object.entries(f.abstractionsLoadingErrors).filter((e=>{let[n,t]=e;return!!t.parsingErrors})).flatMap((e=>{let[n,t]=e;return["Failed to parse abstraction ".concat(n," :"),...rS(t.parsingErrors)]}))],{status:1,errors:c,warnings:u}}case"javascript":case"assemblyscript":const p=sc(e.dspGraph.graph,a,n,{audio:s,io:e.dspGraph.io,arrays:e.dspGraph.arrays});return"javascript"===n?e.javascript=p.code:e.assemblyscript=p.code,{status:0,warnings:[]};case"wasm":try{e.wasm=await(async(e,n)=>{if(!os)throw new Error("assemblyscript compiler was not set properly. Please use WebPd's setAsc function to initialize it.");const t={optimizeLevel:3,runtime:"incremental",exportRuntime:!0,sourceMap:!0};32===n&&(t.use=["Math=NativeMathf"]);const{error:r,binary:a,stderr:s}=await os.compileString(e,t);if(r)throw new Error(s.toString());return a.buffer})(Ws(e,"assemblyscript"),s.bitDepth)}catch(d){return{status:1,errors:[d.message],warnings:[]}}return{status:0,warnings:[]};case"wav":return e.wav=await(async(e,n,t)=>{let r="assemblyscript";if(!n.wasm&&!n.javascript)throw new Error("Need compiled wasm or compiled js to render wav");n.wasm||(r="javascript");const a=await Fp(n,r),s=await Pp(a,e,t);return Mp(s,t.sampleRate)})(o.previewDurationSeconds,e,{...s,...o}),{status:0,warnings:[]};case"app":return e.app=(e=>{if(!e.javascript&&!e.wasm)throw new Error("Needs at least javascript or wasm to run");const n=e.javascript?"patch.js":"patch.wasm";return{[oc]:"var WebPdRuntime = (function (exports) {\n  'use strict';\n\n  var WEB_PD_WORKLET_PROCESSOR_CODE = \"/*\\n * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\\n *\\n * This file is part of WebPd\\n * (see https://github.com/sebpiq/WebPd).\\n *\\n * This program is free software: you can redistribute it and/or modify\\n * it under the terms of the GNU Lesser General Public License as published by\\n * the Free Software Foundation, either version 3 of the License, or\\n * (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n * GNU Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\\n */\\nconst FS_CALLBACK_NAMES = [\\n    'onReadSoundFile',\\n    'onOpenSoundReadStream',\\n    'onWriteSoundFile',\\n    'onOpenSoundWriteStream',\\n    'onSoundStreamData',\\n    'onCloseSoundStream',\\n];\\nclass WasmWorkletProcessor extends AudioWorkletProcessor {\\n    constructor() {\\n        super();\\n        this.port.onmessage = this.onMessage.bind(this);\\n        this.settings = {\\n            blockSize: null,\\n            sampleRate,\\n        };\\n        this.dspConfigured = false;\\n        this.engine = null;\\n    }\\n    process(inputs, outputs) {\\n        const output = outputs[0];\\n        const input = inputs[0];\\n        if (!this.dspConfigured) {\\n            if (!this.engine) {\\n                return true;\\n            }\\n            this.settings.blockSize = output[0].length;\\n            this.engine.initialize(this.settings.sampleRate, this.settings.blockSize);\\n            this.dspConfigured = true;\\n        }\\n        this.engine.dspLoop(input, output);\\n        return true;\\n    }\\n    onMessage(messageEvent) {\\n        const message = messageEvent.data;\\n        switch (message.type) {\\n            case 'code:WASM':\\n                this.setWasm(message.payload.wasmBuffer);\\n                break;\\n            case 'code:JS':\\n                this.setJsCode(message.payload.jsCode);\\n                break;\\n            case 'io:messageReceiver':\\n                this.engine.io.messageReceivers[message.payload.nodeId][message.payload.portletId](message.payload.message);\\n                break;\\n            case 'fs':\\n                const returned = this.engine.fs[message.payload.functionName].apply(null, message.payload.arguments);\\n                this.port.postMessage({\\n                    type: 'fs',\\n                    payload: {\\n                        functionName: message.payload.functionName + '_return',\\n                        operationId: message.payload.arguments[0],\\n                        returned,\\n                    },\\n                });\\n                break;\\n            case 'destroy':\\n                this.destroy();\\n                break;\\n            default:\\n                new Error(`unknown message type ${message.type}`);\\n        }\\n    }\\n    // TODO : control for channelCount of wasmModule\\n    setWasm(wasmBuffer) {\\n        return AssemblyScriptWasmBindings.createEngine(wasmBuffer).then((engine) => this.setEngine(engine));\\n    }\\n    setJsCode(code) {\\n        const engine = JavaScriptBindings.createEngine(code);\\n        this.setEngine(engine);\\n    }\\n    setEngine(engine) {\\n        FS_CALLBACK_NAMES.forEach((functionName) => {\\n            ;\\n            engine.fs[functionName] = (...args) => {\\n                // We don't use transferables, because that would imply reallocating each time new array in the engine.\\n                this.port.postMessage({\\n                    type: 'fs',\\n                    payload: {\\n                        functionName,\\n                        arguments: args,\\n                    },\\n                });\\n            };\\n        });\\n        this.engine = engine;\\n        this.dspConfigured = false;\\n    }\\n    destroy() {\\n        this.process = () => false;\\n    }\\n}\\nregisterProcessor('webpd-node', WasmWorkletProcessor);\\n\";\n\n  var ASSEMBLY_SCRIPT_WASM_BINDINGS_CODE = \"var AssemblyScriptWasmBindings = (function (exports) {\\n    'use strict';\\n\\n    const getFloatArrayType = (bitDepth) => bitDepth === 64 ? Float64Array : Float32Array;\\n    const createModule = (rawModule, bindings) => new Proxy({}, {\\n        get: (_, k) => {\\n            if (bindings.hasOwnProperty(k)) {\\n                const key = String(k);\\n                const bindingSpec = bindings[key];\\n                switch (bindingSpec.type) {\\n                    case 'raw':\\n                        if (k in rawModule) {\\n                            return rawModule[key];\\n                        }\\n                        else {\\n                            throw new Error(`Key ${String(key)} doesn't exist in raw module`);\\n                        }\\n                    case 'proxy':\\n                    case 'callback':\\n                        return bindingSpec.value;\\n                }\\n            }\\n            else {\\n                return undefined;\\n            }\\n        },\\n        set: (_, k, newValue) => {\\n            if (bindings.hasOwnProperty(String(k))) {\\n                const key = String(k);\\n                const bindingSpec = bindings[key];\\n                if (bindingSpec.type === 'callback') {\\n                    bindingSpec.value = newValue;\\n                }\\n                else {\\n                    throw new Error(`Binding key ${String(key)} is read-only`);\\n                }\\n            }\\n            else {\\n                throw new Error(`Key ${String(k)} is not defined in bindings`);\\n            }\\n            return true;\\n        },\\n    });\\n\\n    const liftString = (wasmExports, pointer) => {\\n        if (!pointer) {\\n            throw new Error('Cannot lift a null pointer');\\n        }\\n        pointer = pointer >>> 0;\\n        const end = (pointer +\\n            new Uint32Array(wasmExports.memory.buffer)[(pointer - 4) >>> 2]) >>>\\n            1;\\n        const memoryU16 = new Uint16Array(wasmExports.memory.buffer);\\n        let start = pointer >>> 1;\\n        let string = '';\\n        while (end - start > 1024) {\\n            string += String.fromCharCode(...memoryU16.subarray(start, (start += 1024)));\\n        }\\n        return string + String.fromCharCode(...memoryU16.subarray(start, end));\\n    };\\n    const lowerString = (wasmExports, value) => {\\n        if (value == null) {\\n            throw new Error('Cannot lower a null string');\\n        }\\n        const length = value.length, pointer = wasmExports.__new(length << 1, 1) >>> 0, memoryU16 = new Uint16Array(wasmExports.memory.buffer);\\n        for (let i = 0; i < length; ++i)\\n            memoryU16[(pointer >>> 1) + i] = value.charCodeAt(i);\\n        return pointer;\\n    };\\n    const readTypedArray = (wasmExports, constructor, pointer) => {\\n        if (!pointer) {\\n            throw new Error('Cannot lift a null pointer');\\n        }\\n        const memoryU32 = new Uint32Array(wasmExports.memory.buffer);\\n        return new constructor(wasmExports.memory.buffer, memoryU32[(pointer + 4) >>> 2], memoryU32[(pointer + 8) >>> 2] / constructor.BYTES_PER_ELEMENT);\\n    };\\n    const lowerFloatArray = (wasmExports, bitDepth, data) => {\\n        const arrayType = getFloatArrayType(bitDepth);\\n        const arrayPointer = wasmExports.createFloatArray(data.length);\\n        const array = readTypedArray(wasmExports, arrayType, arrayPointer);\\n        array.set(data);\\n        return { array, arrayPointer };\\n    };\\n    const lowerListOfFloatArrays = (wasmExports, bitDepth, data) => {\\n        const arraysPointer = wasmExports.x_core_createListOfArrays();\\n        data.forEach((array) => {\\n            const { arrayPointer } = lowerFloatArray(wasmExports, bitDepth, array);\\n            wasmExports.x_core_pushToListOfArrays(arraysPointer, arrayPointer);\\n        });\\n        return arraysPointer;\\n    };\\n    const readListOfFloatArrays = (wasmExports, bitDepth, listOfArraysPointer) => {\\n        const listLength = wasmExports.x_core_getListOfArraysLength(listOfArraysPointer);\\n        const arrays = [];\\n        const arrayType = getFloatArrayType(bitDepth);\\n        for (let i = 0; i < listLength; i++) {\\n            const arrayPointer = wasmExports.x_core_getListOfArraysElem(listOfArraysPointer, i);\\n            arrays.push(readTypedArray(wasmExports, arrayType, arrayPointer));\\n        }\\n        return arrays;\\n    };\\n\\n    const liftMessage = (wasmExports, messagePointer) => {\\n        const messageTokenTypesPointer = wasmExports.x_msg_getTokenTypes(messagePointer);\\n        const messageTokenTypes = readTypedArray(wasmExports, Int32Array, messageTokenTypesPointer);\\n        const message = [];\\n        messageTokenTypes.forEach((tokenType, tokenIndex) => {\\n            if (tokenType === wasmExports.MSG_FLOAT_TOKEN.valueOf()) {\\n                message.push(wasmExports.msg_readFloatToken(messagePointer, tokenIndex));\\n            }\\n            else if (tokenType === wasmExports.MSG_STRING_TOKEN.valueOf()) {\\n                const stringPointer = wasmExports.msg_readStringToken(messagePointer, tokenIndex);\\n                message.push(liftString(wasmExports, stringPointer));\\n            }\\n        });\\n        return message;\\n    };\\n    const lowerMessage = (wasmExports, message) => {\\n        const template = message.reduce((template, value) => {\\n            if (typeof value === 'number') {\\n                template.push(wasmExports.MSG_FLOAT_TOKEN.valueOf());\\n            }\\n            else if (typeof value === 'string') {\\n                template.push(wasmExports.MSG_STRING_TOKEN.valueOf());\\n                template.push(value.length);\\n            }\\n            else {\\n                throw new Error(`invalid message value ${value}`);\\n            }\\n            return template;\\n        }, []);\\n        const templateArrayPointer = wasmExports.x_msg_createTemplate(template.length);\\n        const loweredTemplateArray = readTypedArray(wasmExports, Int32Array, templateArrayPointer);\\n        loweredTemplateArray.set(template);\\n        const messagePointer = wasmExports.x_msg_create(templateArrayPointer);\\n        message.forEach((value, index) => {\\n            if (typeof value === 'number') {\\n                wasmExports.msg_writeFloatToken(messagePointer, index, value);\\n            }\\n            else if (typeof value === 'string') {\\n                const stringPointer = lowerString(wasmExports, value);\\n                wasmExports.msg_writeStringToken(messagePointer, index, stringPointer);\\n            }\\n        });\\n        return messagePointer;\\n    };\\n\\n    const mapArray = (src, func) => {\\n        const dest = {};\\n        src.forEach((srcValue, i) => {\\n            const [key, destValue] = func(srcValue, i);\\n            dest[key] = destValue;\\n        });\\n        return dest;\\n    };\\n\\n    const instantiateWasmModule = async (wasmBuffer, wasmImports = {}) => {\\n        const instanceAndModule = await WebAssembly.instantiate(wasmBuffer, {\\n            env: {\\n                abort: (messagePointer, _, lineNumber, columnNumber) => {\\n                    const message = liftString(wasmExports, messagePointer);\\n                    lineNumber = lineNumber;\\n                    columnNumber = columnNumber;\\n                    (() => {\\n                        throw Error(`${message} at ${lineNumber}:${columnNumber}`);\\n                    })();\\n                },\\n                seed: () => {\\n                    return (() => {\\n                        return Date.now() * Math.random();\\n                    })();\\n                },\\n                'console.log': (textPointer) => {\\n                    console.log(liftString(wasmExports, textPointer));\\n                },\\n            },\\n            ...wasmImports,\\n        });\\n        const wasmExports = instanceAndModule.instance\\n            .exports;\\n        return instanceAndModule.instance;\\n    };\\n\\n    const updateWasmInOuts = (rawModule, engineData) => {\\n        engineData.wasmOutput = readTypedArray(rawModule, engineData.arrayType, rawModule.getOutput());\\n        engineData.wasmInput = readTypedArray(rawModule, engineData.arrayType, rawModule.getInput());\\n    };\\n    const createEngineLifecycleBindings = (rawModule, engineData) => {\\n        return {\\n            initialize: {\\n                type: 'proxy',\\n                value: (sampleRate, blockSize) => {\\n                    engineData.metadata.audioSettings.blockSize = blockSize;\\n                    engineData.metadata.audioSettings.sampleRate = sampleRate;\\n                    engineData.blockSize = blockSize;\\n                    rawModule.initialize(sampleRate, blockSize);\\n                    updateWasmInOuts(rawModule, engineData);\\n                },\\n            },\\n            dspLoop: {\\n                type: 'proxy',\\n                value: (input, output) => {\\n                    for (let channel = 0; channel < input.length; channel++) {\\n                        engineData.wasmInput.set(input[channel], channel * engineData.blockSize);\\n                    }\\n                    updateWasmInOuts(rawModule, engineData);\\n                    rawModule.dspLoop();\\n                    updateWasmInOuts(rawModule, engineData);\\n                    for (let channel = 0; channel < output.length; channel++) {\\n                        output[channel].set(engineData.wasmOutput.subarray(engineData.blockSize * channel, engineData.blockSize * (channel + 1)));\\n                    }\\n                },\\n            },\\n        };\\n    };\\n    const createIoMessageReceiversBindings = (rawModule, engineData) => Object.entries(engineData.metadata.compilation.io.messageReceivers).reduce((bindings, [nodeId, spec]) => ({\\n        ...bindings,\\n        [nodeId]: {\\n            type: 'proxy',\\n            value: mapArray(spec.portletIds, (inletId) => [\\n                inletId,\\n                (message) => {\\n                    const messagePointer = lowerMessage(rawModule, message);\\n                    rawModule[engineData.metadata.compilation.variableNamesIndex\\n                        .io.messageReceivers[nodeId][inletId]](messagePointer);\\n                },\\n            ]),\\n        },\\n    }), {});\\n    const createIoMessageSendersBindings = (_, engineData) => Object.entries(engineData.metadata.compilation.io.messageSenders).reduce((bindings, [nodeId, spec]) => ({\\n        ...bindings,\\n        [nodeId]: {\\n            type: 'proxy',\\n            value: mapArray(spec.portletIds, (outletId) => [\\n                outletId,\\n                {\\n                    onMessage: () => undefined,\\n                },\\n            ]),\\n        },\\n    }), {});\\n    const ioMsgSendersImports = (forwardReferences, metadata) => {\\n        const wasmImports = {};\\n        const { variableNamesIndex } = metadata.compilation;\\n        Object.entries(metadata.compilation.io.messageSenders).forEach(([nodeId, spec]) => {\\n            spec.portletIds.forEach((outletId) => {\\n                const listenerName = variableNamesIndex.io.messageSenders[nodeId][outletId];\\n                wasmImports[listenerName] = (messagePointer) => {\\n                    const message = liftMessage(forwardReferences.rawModule, messagePointer);\\n                    forwardReferences.modules.io.messageSenders[nodeId][outletId].onMessage(message);\\n                };\\n            });\\n        });\\n        return wasmImports;\\n    };\\n    const readMetadata = async (wasmBuffer) => {\\n        const inputImports = {};\\n        const wasmModule = WebAssembly.Module.imports(new WebAssembly.Module(wasmBuffer));\\n        wasmModule\\n            .filter((imprt) => imprt.module === 'input' && imprt.kind === 'function')\\n            .forEach((imprt) => (inputImports[imprt.name] = () => undefined));\\n        const wasmInstance = await instantiateWasmModule(wasmBuffer, {\\n            input: inputImports,\\n        });\\n        const wasmExports = wasmInstance.exports;\\n        const stringPointer = wasmExports.metadata.valueOf();\\n        const metadataJSON = liftString(wasmExports, stringPointer);\\n        return JSON.parse(metadataJSON);\\n    };\\n\\n    const createFsBindings = (rawModule, engineData) => ({\\n        sendReadSoundFileResponse: {\\n            type: 'proxy',\\n            value: (operationId, status, sound) => {\\n                let soundPointer = 0;\\n                if (sound) {\\n                    soundPointer = lowerListOfFloatArrays(rawModule, engineData.bitDepth, sound);\\n                }\\n                rawModule.x_fs_onReadSoundFileResponse(operationId, status, soundPointer);\\n                updateWasmInOuts(rawModule, engineData);\\n            },\\n        },\\n        sendWriteSoundFileResponse: {\\n            type: 'proxy',\\n            value: rawModule.x_fs_onWriteSoundFileResponse,\\n        },\\n        sendSoundStreamData: {\\n            type: 'proxy',\\n            value: (operationId, sound) => {\\n                const soundPointer = lowerListOfFloatArrays(rawModule, engineData.bitDepth, sound);\\n                const writtenFrameCount = rawModule.x_fs_onSoundStreamData(operationId, soundPointer);\\n                updateWasmInOuts(rawModule, engineData);\\n                return writtenFrameCount;\\n            },\\n        },\\n        closeSoundStream: {\\n            type: 'proxy',\\n            value: rawModule.x_fs_onCloseSoundStream,\\n        },\\n        onReadSoundFile: { type: 'callback', value: () => undefined },\\n        onWriteSoundFile: { type: 'callback', value: () => undefined },\\n        onOpenSoundReadStream: { type: 'callback', value: () => undefined },\\n        onOpenSoundWriteStream: { type: 'callback', value: () => undefined },\\n        onSoundStreamData: { type: 'callback', value: () => undefined },\\n        onCloseSoundStream: { type: 'callback', value: () => undefined },\\n    });\\n    const createFsImports = (forwardReferences) => {\\n        let wasmImports = {\\n            i_fs_readSoundFile: (operationId, urlPointer, infoPointer) => {\\n                const url = liftString(forwardReferences.rawModule, urlPointer);\\n                const info = liftMessage(forwardReferences.rawModule, infoPointer);\\n                forwardReferences.modules.fs.onReadSoundFile(operationId, url, info);\\n            },\\n            i_fs_writeSoundFile: (operationId, soundPointer, urlPointer, infoPointer) => {\\n                const sound = readListOfFloatArrays(forwardReferences.rawModule, forwardReferences.engineData.bitDepth, soundPointer);\\n                const url = liftString(forwardReferences.rawModule, urlPointer);\\n                const info = liftMessage(forwardReferences.rawModule, infoPointer);\\n                forwardReferences.modules.fs.onWriteSoundFile(operationId, sound, url, info);\\n            },\\n            i_fs_openSoundReadStream: (operationId, urlPointer, infoPointer) => {\\n                const url = liftString(forwardReferences.rawModule, urlPointer);\\n                const info = liftMessage(forwardReferences.rawModule, infoPointer);\\n                updateWasmInOuts(forwardReferences.rawModule, forwardReferences.engineData);\\n                forwardReferences.modules.fs.onOpenSoundReadStream(operationId, url, info);\\n            },\\n            i_fs_openSoundWriteStream: (operationId, urlPointer, infoPointer) => {\\n                const url = liftString(forwardReferences.rawModule, urlPointer);\\n                const info = liftMessage(forwardReferences.rawModule, infoPointer);\\n                forwardReferences.modules.fs.onOpenSoundWriteStream(operationId, url, info);\\n            },\\n            i_fs_sendSoundStreamData: (operationId, blockPointer) => {\\n                const block = readListOfFloatArrays(forwardReferences.rawModule, forwardReferences.engineData.bitDepth, blockPointer);\\n                forwardReferences.modules.fs.onSoundStreamData(operationId, block);\\n            },\\n            i_fs_closeSoundStream: (...args) => forwardReferences.modules.fs.onCloseSoundStream(...args),\\n        };\\n        return wasmImports;\\n    };\\n\\n    const createCommonsBindings = (rawModule, engineData) => ({\\n        getArray: {\\n            type: 'proxy',\\n            value: (arrayName) => {\\n                const arrayNamePointer = lowerString(rawModule, arrayName);\\n                const arrayPointer = rawModule.commons_getArray(arrayNamePointer);\\n                return readTypedArray(rawModule, engineData.arrayType, arrayPointer);\\n            },\\n        },\\n        setArray: {\\n            type: 'proxy',\\n            value: (arrayName, array) => {\\n                const stringPointer = lowerString(rawModule, arrayName);\\n                const { arrayPointer } = lowerFloatArray(rawModule, engineData.bitDepth, array);\\n                rawModule.commons_setArray(stringPointer, arrayPointer);\\n                updateWasmInOuts(rawModule, engineData);\\n            },\\n        },\\n    });\\n\\n    const createEngine = async (wasmBuffer) => {\\n        const { rawModule, engineData, forwardReferences } = await createRawModule(wasmBuffer);\\n        const engineBindings = await createBindings(rawModule, engineData, forwardReferences);\\n        return createModule(rawModule, engineBindings);\\n    };\\n    const createRawModule = async (wasmBuffer) => {\\n        const metadata = await readMetadata(wasmBuffer);\\n        const forwardReferences = { modules: {} };\\n        const wasmImports = {\\n            ...createFsImports(forwardReferences),\\n            ...ioMsgSendersImports(forwardReferences, metadata),\\n        };\\n        const bitDepth = metadata.audioSettings.bitDepth;\\n        const arrayType = getFloatArrayType(bitDepth);\\n        const engineData = {\\n            metadata,\\n            wasmOutput: new arrayType(0),\\n            wasmInput: new arrayType(0),\\n            arrayType,\\n            bitDepth,\\n            blockSize: 0,\\n        };\\n        const wasmInstance = await instantiateWasmModule(wasmBuffer, {\\n            input: wasmImports,\\n        });\\n        const rawModule = wasmInstance.exports;\\n        return { rawModule, engineData, forwardReferences };\\n    };\\n    const createBindings = async (rawModule, engineData, forwardReferences) => {\\n        const commons = createModule(rawModule, createCommonsBindings(rawModule, engineData));\\n        const fs = createModule(rawModule, createFsBindings(rawModule, engineData));\\n        const io = {\\n            messageReceivers: createModule(rawModule, createIoMessageReceiversBindings(rawModule, engineData)),\\n            messageSenders: createModule(rawModule, createIoMessageSendersBindings(rawModule, engineData)),\\n        };\\n        forwardReferences.modules.fs = fs;\\n        forwardReferences.modules.io = io;\\n        forwardReferences.engineData = engineData;\\n        forwardReferences.rawModule = rawModule;\\n        return {\\n            ...createEngineLifecycleBindings(rawModule, engineData),\\n            metadata: { type: 'proxy', value: engineData.metadata },\\n            commons: { type: 'proxy', value: commons },\\n            fs: { type: 'proxy', value: fs },\\n            io: { type: 'proxy', value: io },\\n        };\\n    };\\n\\n    exports.createBindings = createBindings;\\n    exports.createEngine = createEngine;\\n    exports.createRawModule = createRawModule;\\n\\n    return exports;\\n\\n})({});\\n\";\n\n  var JAVA_SCRIPT_BINDINGS_CODE = \"var JavaScriptBindings = (function (exports) {\\n    'use strict';\\n\\n    const getFloatArrayType = (bitDepth) => bitDepth === 64 ? Float64Array : Float32Array;\\n    const createModule = (rawModule, bindings) => new Proxy({}, {\\n        get: (_, k) => {\\n            if (bindings.hasOwnProperty(k)) {\\n                const key = String(k);\\n                const bindingSpec = bindings[key];\\n                switch (bindingSpec.type) {\\n                    case 'raw':\\n                        if (k in rawModule) {\\n                            return rawModule[key];\\n                        }\\n                        else {\\n                            throw new Error(`Key ${String(key)} doesn't exist in raw module`);\\n                        }\\n                    case 'proxy':\\n                    case 'callback':\\n                        return bindingSpec.value;\\n                }\\n            }\\n            else {\\n                return undefined;\\n            }\\n        },\\n        set: (_, k, newValue) => {\\n            if (bindings.hasOwnProperty(String(k))) {\\n                const key = String(k);\\n                const bindingSpec = bindings[key];\\n                if (bindingSpec.type === 'callback') {\\n                    bindingSpec.value = newValue;\\n                }\\n                else {\\n                    throw new Error(`Binding key ${String(key)} is read-only`);\\n                }\\n            }\\n            else {\\n                throw new Error(`Key ${String(k)} is not defined in bindings`);\\n            }\\n            return true;\\n        },\\n    });\\n\\n    const createRawModule = (code) => new Function(`\\n        ${code}\\n        return exports\\n    `)();\\n    const createBindings = (rawModule) => ({\\n        fs: { type: 'proxy', value: createFsModule(rawModule) },\\n        metadata: { type: 'raw' },\\n        initialize: { type: 'raw' },\\n        dspLoop: { type: 'raw' },\\n        io: { type: 'raw' },\\n        commons: {\\n            type: 'proxy',\\n            value: createCommonsModule(rawModule, rawModule.metadata.audioSettings.bitDepth),\\n        },\\n    });\\n    const createEngine = (code) => {\\n        const rawModule = createRawModule(code);\\n        return createModule(rawModule, createBindings(rawModule));\\n    };\\n    const createFsModule = (rawModule) => {\\n        const fs = createModule(rawModule, {\\n            onReadSoundFile: { type: 'callback', value: () => undefined },\\n            onWriteSoundFile: { type: 'callback', value: () => undefined },\\n            onOpenSoundReadStream: { type: 'callback', value: () => undefined },\\n            onOpenSoundWriteStream: { type: 'callback', value: () => undefined },\\n            onSoundStreamData: { type: 'callback', value: () => undefined },\\n            onCloseSoundStream: { type: 'callback', value: () => undefined },\\n            sendReadSoundFileResponse: {\\n                type: 'proxy',\\n                value: rawModule.x_fs_onReadSoundFileResponse,\\n            },\\n            sendWriteSoundFileResponse: {\\n                type: 'proxy',\\n                value: rawModule.x_fs_onWriteSoundFileResponse,\\n            },\\n            sendSoundStreamData: {\\n                type: 'proxy',\\n                value: rawModule.x_fs_onSoundStreamData,\\n            },\\n            closeSoundStream: {\\n                type: 'proxy',\\n                value: rawModule.x_fs_onCloseSoundStream,\\n            },\\n        });\\n        rawModule.i_fs_openSoundWriteStream = (...args) => fs.onOpenSoundWriteStream(...args);\\n        rawModule.i_fs_sendSoundStreamData = (...args) => fs.onSoundStreamData(...args);\\n        rawModule.i_fs_openSoundReadStream = (...args) => fs.onOpenSoundReadStream(...args);\\n        rawModule.i_fs_closeSoundStream = (...args) => fs.onCloseSoundStream(...args);\\n        rawModule.i_fs_writeSoundFile = (...args) => fs.onWriteSoundFile(...args);\\n        rawModule.i_fs_readSoundFile = (...args) => fs.onReadSoundFile(...args);\\n        return fs;\\n    };\\n    const createCommonsModule = (rawModule, bitDepth) => {\\n        const floatArrayType = getFloatArrayType(bitDepth);\\n        return createModule(rawModule, {\\n            getArray: { type: 'proxy', value: rawModule.commons_getArray },\\n            setArray: {\\n                type: 'proxy',\\n                value: (arrayName, array) => rawModule.commons_setArray(arrayName, new floatArrayType(array)),\\n            },\\n        });\\n    };\\n\\n    exports.createBindings = createBindings;\\n    exports.createEngine = createEngine;\\n    exports.createRawModule = createRawModule;\\n\\n    return exports;\\n\\n})({});\\n\";\n\n  var fetchRetry$1 = function (fetch, defaults) {\n    defaults = defaults || {};\n    if (typeof fetch !== 'function') {\n      throw new ArgumentError('fetch must be a function');\n    }\n\n    if (typeof defaults !== 'object') {\n      throw new ArgumentError('defaults must be an object');\n    }\n\n    if (defaults.retries !== undefined && !isPositiveInteger(defaults.retries)) {\n      throw new ArgumentError('retries must be a positive integer');\n    }\n\n    if (defaults.retryDelay !== undefined && !isPositiveInteger(defaults.retryDelay) && typeof defaults.retryDelay !== 'function') {\n      throw new ArgumentError('retryDelay must be a positive integer or a function returning a positive integer');\n    }\n\n    if (defaults.retryOn !== undefined && !Array.isArray(defaults.retryOn) && typeof defaults.retryOn !== 'function') {\n      throw new ArgumentError('retryOn property expects an array or function');\n    }\n\n    var baseDefaults = {\n      retries: 3,\n      retryDelay: 1000,\n      retryOn: [],\n    };\n\n    defaults = Object.assign(baseDefaults, defaults);\n\n    return function fetchRetry(input, init) {\n      var retries = defaults.retries;\n      var retryDelay = defaults.retryDelay;\n      var retryOn = defaults.retryOn;\n\n      if (init && init.retries !== undefined) {\n        if (isPositiveInteger(init.retries)) {\n          retries = init.retries;\n        } else {\n          throw new ArgumentError('retries must be a positive integer');\n        }\n      }\n\n      if (init && init.retryDelay !== undefined) {\n        if (isPositiveInteger(init.retryDelay) || (typeof init.retryDelay === 'function')) {\n          retryDelay = init.retryDelay;\n        } else {\n          throw new ArgumentError('retryDelay must be a positive integer or a function returning a positive integer');\n        }\n      }\n\n      if (init && init.retryOn) {\n        if (Array.isArray(init.retryOn) || (typeof init.retryOn === 'function')) {\n          retryOn = init.retryOn;\n        } else {\n          throw new ArgumentError('retryOn property expects an array or function');\n        }\n      }\n\n      // eslint-disable-next-line no-undef\n      return new Promise(function (resolve, reject) {\n        var wrappedFetch = function (attempt) {\n          // As of node 18, this is no longer needed since node comes with native support for fetch:\n          /* istanbul ignore next */\n          var _input =\n            typeof Request !== 'undefined' && input instanceof Request\n              ? input.clone()\n              : input;\n          fetch(_input, init)\n            .then(function (response) {\n              if (Array.isArray(retryOn) && retryOn.indexOf(response.status) === -1) {\n                resolve(response);\n              } else if (typeof retryOn === 'function') {\n                try {\n                  // eslint-disable-next-line no-undef\n                  return Promise.resolve(retryOn(attempt, null, response))\n                    .then(function (retryOnResponse) {\n                      if(retryOnResponse) {\n                        retry(attempt, null, response);\n                      } else {\n                        resolve(response);\n                      }\n                    }).catch(reject);\n                } catch (error) {\n                  reject(error);\n                }\n              } else {\n                if (attempt < retries) {\n                  retry(attempt, null, response);\n                } else {\n                  resolve(response);\n                }\n              }\n            })\n            .catch(function (error) {\n              if (typeof retryOn === 'function') {\n                try {\n                  // eslint-disable-next-line no-undef\n                  Promise.resolve(retryOn(attempt, error, null))\n                    .then(function (retryOnResponse) {\n                      if(retryOnResponse) {\n                        retry(attempt, error, null);\n                      } else {\n                        reject(error);\n                      }\n                    })\n                    .catch(function(error) {\n                      reject(error);\n                    });\n                } catch(error) {\n                  reject(error);\n                }\n              } else if (attempt < retries) {\n                retry(attempt, error, null);\n              } else {\n                reject(error);\n              }\n            });\n        };\n\n        function retry(attempt, error, response) {\n          var delay = (typeof retryDelay === 'function') ?\n            retryDelay(attempt, error, response) : retryDelay;\n          setTimeout(function () {\n            wrappedFetch(++attempt);\n          }, delay);\n        }\n\n        wrappedFetch(0);\n      });\n    };\n  };\n\n  function isPositiveInteger(value) {\n    return Number.isInteger(value) && value >= 0;\n  }\n\n  function ArgumentError(message) {\n    this.name = 'ArgumentError';\n    this.message = message;\n  }\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const fetchRetry = fetchRetry$1(fetch);\n  /**\n   * Note : the audio worklet feature is available only in secure context.\n   * This function will fail when used in insecure context (non-https, etc ...)\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AudioWorklet\n   */\n  const addModule = async (context, processorCode) => {\n      const blob = new Blob([processorCode], { type: 'text/javascript' });\n      const workletProcessorUrl = URL.createObjectURL(blob);\n      return context.audioWorklet.addModule(workletProcessorUrl);\n  };\n  // TODO : testing\n  const fetchFile = async (url) => {\n      let response;\n      try {\n          response = await fetchRetry(url, { retries: 3 });\n      }\n      catch (err) {\n          throw new FileError(response.status, err.toString());\n      }\n      if (!response.ok) {\n          const responseText = await response.text();\n          throw new FileError(response.status, responseText);\n      }\n      return response.arrayBuffer();\n  };\n  const audioBufferToArray = (audioBuffer) => {\n      const sound = [];\n      for (let channel = 0; channel < audioBuffer.numberOfChannels; channel++) {\n          sound.push(audioBuffer.getChannelData(channel));\n      }\n      return sound;\n  };\n  // TODO : testing\n  const fixSoundChannelCount = (sound, targetChannelCount) => {\n      if (sound.length === 0) {\n          throw new Error(`Received empty sound`);\n      }\n      const floatArrayType = sound[0].constructor;\n      const frameCount = sound[0].length;\n      const fixedSound = sound.slice(0, targetChannelCount);\n      while (sound.length < targetChannelCount) {\n          fixedSound.push(new floatArrayType(frameCount));\n      }\n      return fixedSound;\n  };\n  const resolveRelativeUrl = (rootUrl, relativeUrl) => {\n      return new URL(relativeUrl, rootUrl).href;\n  };\n  class FileError extends Error {\n      constructor(status, msg) {\n          super(`Error ${status} : ${msg}`);\n      }\n  }\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  // TODO : manage transferables\n  class WebPdWorkletNode extends AudioWorkletNode {\n      constructor(context) {\n          super(context, 'webpd-node', {\n              numberOfOutputs: 1,\n              outputChannelCount: [2],\n          });\n      }\n      destroy() {\n          this.port.postMessage({\n              type: 'destroy',\n              payload: {},\n          });\n      }\n  }\n  // Concatenate WorkletProcessor code with the Wasm bindings it needs\n  const WEBPD_WORKLET_PROCESSOR_CODE = ASSEMBLY_SCRIPT_WASM_BINDINGS_CODE +\n      ';\\n' +\n      JAVA_SCRIPT_BINDINGS_CODE +\n      ';\\n' +\n      WEB_PD_WORKLET_PROCESSOR_CODE;\n  const registerWebPdWorkletNode = (context) => {\n      return addModule(context, WEBPD_WORKLET_PROCESSOR_CODE);\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const FILES = {};\n  const STREAMS = {};\n  class FakeStream {\n      constructor(url, sound) {\n          this.url = url;\n          this.sound = sound;\n          this.frameCount = sound[0].length;\n          this.readPosition = 0;\n      }\n  }\n  const read = async (url) => {\n      if (FILES[url]) {\n          return FILES[url];\n      }\n      const arrayBuffer = await fetchFile(url);\n      return {\n          type: 'binary',\n          data: arrayBuffer,\n      };\n  };\n  // TODO : testing\n  const readSound = async (url, context) => {\n      let fakeFile = FILES[url] || (await read(url));\n      switch (fakeFile.type) {\n          case 'binary':\n              const audioBuffer = await context.decodeAudioData(fakeFile.data);\n              return audioBufferToArray(audioBuffer);\n          case 'sound':\n              // We copy the data here o it can be manipulated freely by the host.\n              // e.g. if the buffer is sent as transferrable to the node we don't want the original to be transferred.\n              return fakeFile.data.map((array) => array.slice());\n      }\n  };\n  const writeSound = async (sound, url) => {\n      FILES[url] = {\n          type: 'sound',\n          data: sound,\n      };\n  };\n  const readStreamSound = async (operationId, url, channelCount, context) => {\n      const sound = await readSound(url, context);\n      STREAMS[operationId] = new FakeStream(url, fixSoundChannelCount(sound, channelCount));\n      return STREAMS[operationId];\n  };\n  const writeStreamSound = async (operationId, url, channelCount) => {\n      const emptySound = [];\n      for (let channel = 0; channel < channelCount; channel++) {\n          emptySound.push(new Float32Array(0));\n      }\n      STREAMS[operationId] = new FakeStream(url, emptySound);\n      FILES[url] = {\n          type: 'sound',\n          data: emptySound,\n      };\n      return STREAMS[operationId];\n  };\n  const getStream = (operationId) => {\n      return STREAMS[operationId];\n  };\n  const killStream = (operationId) => {\n      console.log('KILL STREAM', operationId);\n      delete STREAMS[operationId];\n  };\n  const pullBlock = (stream, frameCount) => {\n      const block = stream.sound.map((array) => array.slice(stream.readPosition, stream.readPosition + frameCount));\n      stream.readPosition += frameCount;\n      return block;\n  };\n  const pushBlock = (stream, block) => {\n      stream.sound = stream.sound.map((channelData, channel) => {\n          const concatenated = new Float32Array(channelData.length + block[channel].length);\n          concatenated.set(channelData);\n          concatenated.set(block[channel], channelData.length);\n          return concatenated;\n      });\n      stream.frameCount = stream.sound[0].length;\n      FILES[stream.url].data = stream.sound;\n  };\n  var fakeFs = {\n      writeSound,\n      readSound,\n      readStreamSound,\n      writeStreamSound,\n      pullBlock,\n      pushBlock,\n  };\n\n  var closeSoundStream = async (_, payload, __) => {\n      if (payload.functionName === 'onCloseSoundStream') {\n          killStream(payload.arguments[0]);\n      }\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const getNode$1 = (graph, nodeId) => {\n      const node = graph[nodeId];\n      if (node) {\n          return node;\n      }\n      throw new Error(`Node \"${nodeId}\" not found in graph`);\n  };\n\n  /** Helper to get node implementation or throw an error if not implemented. */\n  const getNodeImplementation$1 = (nodeImplementations, nodeType) => {\n      const nodeImplementation = nodeImplementations[nodeType];\n      if (!nodeImplementation) {\n          throw new Error(`node [${nodeType}] is not implemented`);\n      }\n      return {\n          dependencies: [],\n          ...nodeImplementation,\n      };\n  };\n\n  const _addPath$1 = (parent, key, _path) => {\n      const path = _ensurePath$1(_path);\n      return {\n          keys: [...path.keys, key],\n          parents: [...path.parents, parent],\n      };\n  };\n  const _ensurePath$1 = (path) => path || {\n      keys: [],\n      parents: [],\n  };\n  const _proxySetHandlerReadOnly$1 = () => {\n      throw new Error('This Proxy is read-only.');\n  };\n  const _proxyGetHandlerThrowIfKeyUnknown$1 = (target, key, path) => {\n      if (!target.hasOwnProperty(key)) {\n          // Whitelist some fields that are undefined but accessed at\n          // some point or another by our code.\n          // TODO : find a better way to do this.\n          if ([\n              'toJSON',\n              'Symbol(Symbol.toStringTag)',\n              'constructor',\n              '$typeof',\n              '$$typeof',\n              '@@__IMMUTABLE_ITERABLE__@@',\n              '@@__IMMUTABLE_RECORD__@@',\n          ].includes(key)) {\n              return true;\n          }\n          throw new Error(`namespace${path ? ` <${path.keys.join('.')}>` : ''} doesn't know key \"${String(key)}\"`);\n      }\n      return false;\n  };\n  const Assigner$1 = (spec, _obj, context, _path) => {\n      const path = _path || { keys: [], parents: [] };\n      const obj = Assigner$1.ensureValue(_obj, spec, context, path);\n      // If `_path` is provided, assign the new value to the parent object.\n      if (_path) {\n          const parent = _path.parents[_path.parents.length - 1];\n          const key = _path.keys[_path.keys.length - 1];\n          // The only case where we want to overwrite the existing value\n          // is when it was a `null` assigned by `LiteralDefaultNull`, and\n          // we want to set the real value instead.\n          if (!(key in parent) || 'LiteralDefaultNull' in spec) {\n              parent[key] = obj;\n          }\n      }\n      // If the object is a Literal, end of the recursion.\n      if ('Literal' in spec || 'LiteralDefaultNull' in spec) {\n          return obj;\n      }\n      return new Proxy(obj, {\n          get: (_, k) => {\n              const key = String(k);\n              let nextSpec;\n              if ('Index' in spec) {\n                  nextSpec = spec.Index(key, context, path);\n              }\n              else if ('Interface' in spec) {\n                  if (!(key in spec.Interface)) {\n                      throw new Error(`Interface has no entry \"${String(key)}\"`);\n                  }\n                  nextSpec = spec.Interface[key];\n              }\n              else {\n                  throw new Error('no builder');\n              }\n              return Assigner$1(nextSpec, \n              // We use this form here instead of `obj[key]` specifically\n              // to allow Assign to play well with `ProtectedIndex`, which\n              // would raise an error if trying to access an undefined key.\n              key in obj ? obj[key] : undefined, context, _addPath$1(obj, key, path));\n          },\n          set: _proxySetHandlerReadOnly$1,\n      });\n  };\n  Assigner$1.ensureValue = (_obj, spec, context, _path, _recursionPath) => {\n      if ('Index' in spec) {\n          return (_obj || spec.indexConstructor(context, _ensurePath$1(_path)));\n      }\n      else if ('Interface' in spec) {\n          const obj = (_obj || {});\n          Object.entries(spec.Interface).forEach(([key, nextSpec]) => {\n              obj[key] = Assigner$1.ensureValue(obj[key], nextSpec, context, _addPath$1(obj, key, _path), _addPath$1(obj, key, _recursionPath));\n          });\n          return obj;\n      }\n      else if ('Literal' in spec) {\n          return (_obj || spec.Literal(context, _ensurePath$1(_path)));\n      }\n      else if ('LiteralDefaultNull' in spec) {\n          if (!_recursionPath) {\n              return (_obj || spec.LiteralDefaultNull(context, _ensurePath$1(_path)));\n          }\n          else {\n              return (_obj || null);\n          }\n      }\n      else {\n          throw new Error('Invalid Assigner');\n      }\n  };\n  Assigner$1.Interface = (a) => ({ Interface: a });\n  Assigner$1.Index = (f, indexConstructor) => ({\n      Index: f,\n      indexConstructor: indexConstructor || (() => ({})),\n  });\n  Assigner$1.Literal = (f) => ({\n      Literal: f,\n  });\n  Assigner$1.LiteralDefaultNull = (f) => ({ LiteralDefaultNull: f });\n  // ---------------------------- ProtectedIndex ---------------------------- //\n  /**\n   * Helper to declare namespace objects enforcing stricter access rules.\n   * Specifically, it forbids :\n   * - reading an unknown property.\n   * - trying to overwrite an existing property.\n   */\n  const ProtectedIndex$1 = (namespace, path) => {\n      return new Proxy(namespace, {\n          get: (target, k) => {\n              const key = String(k);\n              if (_proxyGetHandlerThrowIfKeyUnknown$1(target, key, path)) {\n                  return undefined;\n              }\n              return target[key];\n          },\n          set: (target, k, newValue) => {\n              const key = _trimDollarKey$1(String(k));\n              if (target.hasOwnProperty(key)) {\n                  throw new Error(`Key \"${String(key)}\" is protected and cannot be overwritten.`);\n              }\n              else {\n                  target[key] = newValue;\n              }\n              return newValue;\n          },\n      });\n  };\n  const _trimDollarKey$1 = (key) => {\n      const match = /\\$(.*)/.exec(key);\n      if (!match) {\n          return key;\n      }\n      else {\n          return match[1];\n      }\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  /** Generate an integer series from 0 to `count` (non-inclusive). */\n  const countTo$1 = (count) => {\n      const results = [];\n      for (let i = 0; i < count; i++) {\n          results.push(i);\n      }\n      return results;\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const Var$1 = (typeName, name, value) => _preventToString$1({\n      astType: 'Var',\n      name,\n      type: typeName,\n      value: value !== undefined ? _prepareVarValue$1(value) : undefined,\n  });\n  const ConstVar$1 = (typeName, name, value) => _preventToString$1({\n      astType: 'ConstVar',\n      name,\n      type: typeName,\n      value: _prepareVarValue$1(value),\n  });\n  const Func$1 = (name, args = [], returnType = 'void') => (strings, ...content) => _preventToString$1({\n      astType: 'Func',\n      name,\n      args,\n      returnType,\n      body: ast$1(strings, ...content),\n  });\n  const AnonFunc$1 = (args = [], returnType = 'void') => (strings, ...content) => _preventToString$1({\n      astType: 'Func',\n      name: null,\n      args,\n      returnType,\n      body: ast$1(strings, ...content),\n  });\n  const Class$1 = (name, members) => _preventToString$1({\n      astType: 'Class',\n      name,\n      members,\n  });\n  const Sequence$1 = (content) => ({\n      astType: 'Sequence',\n      content: _processRawContent$1(_intersperse$1(content, countTo$1(content.length - 1).map(() => '\\n'))),\n  });\n  const ast$1 = (strings, ...content) => _preventToString$1({\n      astType: 'Sequence',\n      content: _processRawContent$1(_intersperse$1(strings, content)),\n  });\n  const _processRawContent$1 = (content) => {\n      // 1. Flatten arrays and AstSequence, filter out nulls, and convert numbers to strings\n      // Basically converts input to an Array<AstContent>.\n      const flattenedAndFiltered = content.flatMap((element) => {\n          if (typeof element === 'string') {\n              return [element];\n          }\n          else if (typeof element === 'number') {\n              return [element.toString()];\n          }\n          else {\n              if (element === null) {\n                  return [];\n              }\n              else if (Array.isArray(element)) {\n                  return _processRawContent$1(_intersperse$1(element, countTo$1(element.length - 1).map(() => '\\n')));\n              }\n              else if (typeof element === 'object' &&\n                  element.astType === 'Sequence') {\n                  return element.content;\n              }\n              else {\n                  return [element];\n              }\n          }\n      });\n      // 2. Combine adjacent strings\n      const [combinedContent, remainingString] = flattenedAndFiltered.reduce(([combinedContent, currentString], element) => {\n          if (typeof element === 'string') {\n              return [combinedContent, currentString + element];\n          }\n          else {\n              if (currentString.length) {\n                  return [[...combinedContent, currentString, element], ''];\n              }\n              else {\n                  return [[...combinedContent, element], ''];\n              }\n          }\n      }, [[], '']);\n      if (remainingString.length) {\n          combinedContent.push(remainingString);\n      }\n      return combinedContent;\n  };\n  /**\n   * Intersperse content from array1 with content from array2.\n   * `array1.length` must be equal to `array2.length + 1`.\n   */\n  const _intersperse$1 = (array1, array2) => {\n      if (array1.length === 0) {\n          return [];\n      }\n      return array1\n          .slice(1)\n          .reduce((combinedContent, element, i) => {\n          return combinedContent.concat([array2[i], element]);\n      }, [array1[0]]);\n  };\n  /**\n   * Prevents AST elements from being rendered as a string, as this is\n   * most likely an error due to unproper use of `ast`.\n   * Deacivated. Activate for debugging by uncommenting the line below.\n   */\n  const _preventToString$1 = (element) => ({\n      ...element,\n      // Uncomment this to activate\n      // toString: () => { throw new Error(`Rendering element ${elemennt.astType} as string is probably an error`) }\n  });\n  const _prepareVarValue$1 = (value) => {\n      if (typeof value === 'number') {\n          return Sequence$1([value.toString()]);\n      }\n      else if (typeof value === 'string') {\n          return Sequence$1([value]);\n      }\n      else {\n          return value;\n      }\n  };\n\n  const createGlobsVariableNames$1 = () => ({\n      iterFrame: 'F',\n      frame: 'FRAME',\n      blockSize: 'BLOCK_SIZE',\n      sampleRate: 'SAMPLE_RATE',\n      output: 'OUTPUT',\n      input: 'INPUT',\n      nullMessageReceiver: 'SND_TO_NULL',\n      nullSignal: 'NULL_SIGNAL',\n      emptyMessage: 'EMPTY_MESSAGE',\n  });\n  Assigner$1.Interface({\n      nodes: Assigner$1.Index((nodeId) => Assigner$1.Interface({\n          signalOuts: Assigner$1.Index((portletId) => Assigner$1.Literal(() => _name$1('N', nodeId, 'outs', portletId))),\n          messageSenders: Assigner$1.Index((portletId) => Assigner$1.Literal(() => _name$1('N', nodeId, 'snds', portletId))),\n          messageReceivers: Assigner$1.Index((portletId) => Assigner$1.Literal(() => _name$1('N', nodeId, 'rcvs', portletId))),\n          state: Assigner$1.LiteralDefaultNull(() => _name$1('N', nodeId, 'state')),\n      })),\n      nodeImplementations: Assigner$1.Index((nodeType, { nodeImplementations }) => {\n          const nodeImplementation = getNodeImplementation$1(nodeImplementations, nodeType);\n          const nodeTypePrefix = (nodeImplementation.flags\n              ? nodeImplementation.flags.alphaName\n              : null) || nodeType;\n          return Assigner$1.Index((name) => Assigner$1.Literal(() => _name$1('NT', nodeTypePrefix, name)));\n      }),\n      globs: Assigner$1.Literal(createGlobsVariableNames$1),\n      globalCode: Assigner$1.Index((ns) => Assigner$1.Index((name) => Assigner$1.Literal(() => _name$1('G', ns, name)))),\n      io: Assigner$1.Interface({\n          messageReceivers: Assigner$1.Index((nodeId) => Assigner$1.Index((inletId) => Assigner$1.Literal(() => _name$1('IORCV', nodeId, inletId)))),\n          messageSenders: Assigner$1.Index((nodeId) => Assigner$1.Index((outletId) => Assigner$1.Literal(() => _name$1('IOSND', nodeId, outletId)))),\n      }),\n      coldDspGroups: Assigner$1.Index((groupId) => Assigner$1.Literal(() => _name$1('COLD', groupId))),\n  });\n  Assigner$1.Interface({\n      graph: Assigner$1.Literal((_, path) => ({\n          fullTraversal: [],\n          hotDspGroup: {\n              traversal: [],\n              outNodesIds: [],\n          },\n          coldDspGroups: ProtectedIndex$1({}, path),\n      })),\n      nodeImplementations: Assigner$1.Index((nodeType, { nodeImplementations }) => Assigner$1.Literal(() => ({\n          nodeImplementation: getNodeImplementation$1(nodeImplementations, nodeType),\n          stateClass: null,\n          core: null,\n      })), (_, path) => ProtectedIndex$1({}, path)),\n      nodes: Assigner$1.Index((nodeId, { graph }) => Assigner$1.Literal(() => ({\n          nodeType: getNode$1(graph, nodeId).type,\n          messageReceivers: {},\n          messageSenders: {},\n          signalOuts: {},\n          signalIns: {},\n          initialization: ast$1 ``,\n          dsp: {\n              loop: ast$1 ``,\n              inlets: {},\n          },\n          state: null,\n      })), (_, path) => ProtectedIndex$1({}, path)),\n      dependencies: Assigner$1.Literal(() => ({\n          imports: [],\n          exports: [],\n          ast: Sequence$1([]),\n      })),\n      io: Assigner$1.Interface({\n          messageReceivers: Assigner$1.Index((_) => Assigner$1.Literal((_, path) => ProtectedIndex$1({}, path)), (_, path) => ProtectedIndex$1({}, path)),\n          messageSenders: Assigner$1.Index((_) => Assigner$1.Literal((_, path) => ProtectedIndex$1({}, path)), (_, path) => ProtectedIndex$1({}, path)),\n      }),\n  });\n  // ---------------------------- MISC ---------------------------- //\n  const _name$1 = (...parts) => parts.map(assertValidNamePart$1).join('_');\n  const assertValidNamePart$1 = (namePart) => {\n      const isInvalid = !VALID_NAME_PART_REGEXP$1.exec(namePart);\n      if (isInvalid) {\n          throw new Error(`Invalid variable name for code generation \"${namePart}\"`);\n      }\n      return namePart;\n  };\n  const VALID_NAME_PART_REGEXP$1 = /^[a-zA-Z0-9_]+$/;\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const bufCore$1 = () => Sequence$1([\n      /**\n       * Ring buffer\n       */\n      Class$1('buf_SoundBuffer', [\n          Var$1('FloatArray', 'data'),\n          Var$1('Int', 'length'),\n          Var$1('Int', 'writeCursor'),\n          Var$1('Int', 'pullAvailableLength'),\n      ]),\n      /** Erases all the content from the buffer */\n      Func$1('buf_clear', [\n          Var$1('buf_SoundBuffer', 'buffer')\n      ], 'void') `\n        buffer.data.fill(0)\n    `,\n      /** Erases all the content from the buffer */\n      Func$1('buf_create', [\n          Var$1('Int', 'length')\n      ], 'buf_SoundBuffer') `\n        return {\n            data: createFloatArray(length),\n            length: length,\n            writeCursor: 0,\n            pullAvailableLength: 0,\n        }\n    `\n  ]);\n  const bufPushPull$1 = {\n      codeGenerator: () => Sequence$1([\n          /**\n           * Pushes a block to the buffer, throwing an error if the buffer is full.\n           * If the block is written successfully, {@link buf_SoundBuffer#writeCursor}\n           * is moved corresponding with the length of data written.\n           *\n           * @todo : Optimize by allowing to read/write directly from host\n           */\n          Func$1('buf_pushBlock', [\n              Var$1('buf_SoundBuffer', 'buffer'),\n              Var$1('FloatArray', 'block')\n          ], 'Int') `\n            if (buffer.pullAvailableLength + block.length > buffer.length) {\n                throw new Error('buffer full')\n            }\n\n            ${Var$1('Int', 'left', 'block.length')}\n            while (left > 0) {\n                ${ConstVar$1('Int', 'lengthToWrite', `toInt(Math.min(\n                    toFloat(buffer.length - buffer.writeCursor), \n                    toFloat(left),\n                ))`)}\n                buffer.data.set(\n                    block.subarray(\n                        block.length - left, \n                        block.length - left + lengthToWrite\n                    ), \n                    buffer.writeCursor\n                )\n                left -= lengthToWrite\n                buffer.writeCursor = (buffer.writeCursor + lengthToWrite) % buffer.length\n                buffer.pullAvailableLength += lengthToWrite\n            }\n            return buffer.pullAvailableLength\n        `,\n          /**\n           * Pulls a single sample from the buffer.\n           * This is a destructive operation, and the sample will be\n           * unavailable for subsequent readers with the same operation.\n           */\n          Func$1('buf_pullSample', [\n              Var$1('buf_SoundBuffer', 'buffer')\n          ], 'Float') `\n            if (buffer.pullAvailableLength <= 0) {\n                return 0\n            }\n            ${ConstVar$1('Int', 'readCursor', 'buffer.writeCursor - buffer.pullAvailableLength')}\n            buffer.pullAvailableLength -= 1\n            return buffer.data[readCursor >= 0 ? readCursor : buffer.length + readCursor]\n        `\n      ]),\n      dependencies: [bufCore$1],\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const msg$1 = {\n      codeGenerator: ({ settings: { target } }) => {\n          // prettier-ignore\n          const declareFuncs = {\n              msg_create: Func$1('msg_create', [Var$1('MessageTemplate', 'template')], 'Message'),\n              msg_writeStringToken: Func$1('msg_writeStringToken', [\n                  Var$1('Message', 'message'),\n                  Var$1('Int', 'tokenIndex'),\n                  Var$1('string', 'value'),\n              ], 'void'),\n              msg_writeFloatToken: Func$1('msg_writeFloatToken', [\n                  Var$1('Message', 'message'),\n                  Var$1('Int', 'tokenIndex'),\n                  Var$1('MessageFloatToken', 'value'),\n              ], 'void'),\n              msg_readStringToken: Func$1('msg_readStringToken', [\n                  Var$1('Message', 'message'),\n                  Var$1('Int', 'tokenIndex'),\n              ], 'string'),\n              msg_readFloatToken: Func$1('msg_readFloatToken', [\n                  Var$1('Message', 'message'),\n                  Var$1('Int', 'tokenIndex'),\n              ], 'MessageFloatToken'),\n              msg_getLength: Func$1('msg_getLength', [\n                  Var$1('Message', 'message')\n              ], 'Int'),\n              msg_getTokenType: Func$1('msg_getTokenType', [\n                  Var$1('Message', 'message'),\n                  Var$1('Int', 'tokenIndex'),\n              ], 'Int'),\n              msg_isStringToken: Func$1('msg_isStringToken', [\n                  Var$1('Message', 'message'),\n                  Var$1('Int', 'tokenIndex'),\n              ], 'boolean'),\n              msg_isFloatToken: Func$1('msg_isFloatToken', [\n                  Var$1('Message', 'message'),\n                  Var$1('Int', 'tokenIndex'),\n              ], 'boolean'),\n              msg_isMatching: Func$1('msg_isMatching', [\n                  Var$1('Message', 'message'),\n                  Var$1('Array<MessageHeaderEntry>', 'tokenTypes'),\n              ], 'boolean'),\n              msg_floats: Func$1('msg_floats', [\n                  Var$1('Array<Float>', 'values'),\n              ], 'Message'),\n              msg_strings: Func$1('msg_strings', [\n                  Var$1('Array<string>', 'values'),\n              ], 'Message'),\n              msg_display: Func$1('msg_display', [\n                  Var$1('Message', 'message'),\n              ], 'string')\n          };\n          if (target === 'assemblyscript') {\n              // prettier-ignore\n              return Sequence$1([\n                  `\n                type MessageFloatToken = Float\n                type MessageCharToken = Int\n\n                type MessageTemplate = Array<Int>\n                type MessageHeaderEntry = Int\n                type MessageHeader = Int32Array\n\n                type MessageHandler = (m: Message) => void\n                `,\n                  ConstVar$1('MessageHeaderEntry', 'MSG_FLOAT_TOKEN', '0'),\n                  ConstVar$1('MessageHeaderEntry', 'MSG_STRING_TOKEN', '1'),\n                  // =========================== EXPORTED API\n                  Func$1('x_msg_create', [\n                      Var$1('Int32Array', 'templateTypedArray')\n                  ], 'Message') `\n                    const template: MessageTemplate = new Array<Int>(templateTypedArray.length)\n                    for (let i: Int = 0; i < templateTypedArray.length; i++) {\n                        template[i] = templateTypedArray[i]\n                    }\n                    return msg_create(template)\n                `,\n                  Func$1('x_msg_getTokenTypes', [\n                      Var$1('Message', 'message')\n                  ], 'MessageHeader') `\n                    return message.tokenTypes\n                `,\n                  Func$1('x_msg_createTemplate', [\n                      Var$1('i32', 'length')\n                  ], 'Int32Array') `\n                    return new Int32Array(length)\n                `,\n                  // =========================== MSG API\n                  declareFuncs.msg_create `\n                    let i: Int = 0\n                    let byteCount: Int = 0\n                    let tokenTypes: Array<MessageHeaderEntry> = []\n                    let tokenPositions: Array<MessageHeaderEntry> = []\n\n                    i = 0\n                    while (i < template.length) {\n                        switch(template[i]) {\n                            case MSG_FLOAT_TOKEN:\n                                byteCount += sizeof<MessageFloatToken>()\n                                tokenTypes.push(MSG_FLOAT_TOKEN)\n                                tokenPositions.push(byteCount)\n                                i += 1\n                                break\n                            case MSG_STRING_TOKEN:\n                                byteCount += sizeof<MessageCharToken>() * template[i + 1]\n                                tokenTypes.push(MSG_STRING_TOKEN)\n                                tokenPositions.push(byteCount)\n                                i += 2\n                                break\n                            default:\n                                throw new Error(\"unknown token type : \" + template[i].toString())\n                        }\n                    }\n\n                    const tokenCount = tokenTypes.length\n                    const headerByteCount = _msg_computeHeaderLength(tokenCount) * sizeof<MessageHeaderEntry>()\n                    byteCount += headerByteCount\n\n                    const buffer = new ArrayBuffer(byteCount)\n                    const dataView = new DataView(buffer)\n                    let writePosition: Int = 0\n                    \n                    dataView.setInt32(writePosition, tokenCount)\n                    writePosition += sizeof<MessageHeaderEntry>()\n\n                    for (i = 0; i < tokenCount; i++) {\n                        dataView.setInt32(writePosition, tokenTypes[i])\n                        writePosition += sizeof<MessageHeaderEntry>()\n                    }\n\n                    dataView.setInt32(writePosition, headerByteCount)\n                    writePosition += sizeof<MessageHeaderEntry>()\n                    for (i = 0; i < tokenCount; i++) {\n                        dataView.setInt32(writePosition, headerByteCount + tokenPositions[i])\n                        writePosition += sizeof<MessageHeaderEntry>()\n                    }\n\n                    const header = _msg_unpackHeader(dataView, tokenCount)\n                    return {\n                        dataView,\n                        tokenCount,\n                        header,\n                        tokenTypes: _msg_unpackTokenTypes(header),\n                        tokenPositions: _msg_unpackTokenPositions(header),\n                    }\n                `,\n                  declareFuncs.msg_writeStringToken `\n                    const startPosition = message.tokenPositions[tokenIndex]\n                    const endPosition = message.tokenPositions[tokenIndex + 1]\n                    const expectedStringLength: Int = (endPosition - startPosition) / sizeof<MessageCharToken>()\n                    if (value.length !== expectedStringLength) {\n                        throw new Error('Invalid string size, specified ' + expectedStringLength.toString() + ', received ' + value.length.toString())\n                    }\n\n                    for (let i = 0; i < value.length; i++) {\n                        message.dataView.setInt32(\n                            startPosition + i * sizeof<MessageCharToken>(), \n                            value.codePointAt(i)\n                        )\n                    }\n                `,\n                  declareFuncs.msg_writeFloatToken `\n                    setFloatDataView(message.dataView, message.tokenPositions[tokenIndex], value)\n                `,\n                  declareFuncs.msg_readStringToken `\n                    const startPosition = message.tokenPositions[tokenIndex]\n                    const endPosition = message.tokenPositions[tokenIndex + 1]\n                    const stringLength: Int = (endPosition - startPosition) / sizeof<MessageCharToken>()\n                    let value: string = ''\n                    for (let i = 0; i < stringLength; i++) {\n                        value += String.fromCodePoint(message.dataView.getInt32(startPosition + sizeof<MessageCharToken>() * i))\n                    }\n                    return value\n                `,\n                  declareFuncs.msg_readFloatToken `\n                    return getFloatDataView(message.dataView, message.tokenPositions[tokenIndex])\n                `,\n                  declareFuncs.msg_getLength `\n                    return message.tokenTypes.length\n                `,\n                  declareFuncs.msg_getTokenType `\n                    return message.tokenTypes[tokenIndex]\n                `,\n                  declareFuncs.msg_isStringToken `\n                    return msg_getTokenType(message, tokenIndex) === MSG_STRING_TOKEN\n                `,\n                  declareFuncs.msg_isFloatToken `\n                    return msg_getTokenType(message, tokenIndex) === MSG_FLOAT_TOKEN\n                `,\n                  declareFuncs.msg_isMatching `\n                    if (message.tokenTypes.length !== tokenTypes.length) {\n                        return false\n                    }\n                    for (let i: Int = 0; i < tokenTypes.length; i++) {\n                        if (message.tokenTypes[i] !== tokenTypes[i]) {\n                            return false\n                        }\n                    }\n                    return true\n                `,\n                  declareFuncs.msg_floats `\n                    const message: Message = msg_create(values.map<MessageHeaderEntry>(v => MSG_FLOAT_TOKEN))\n                    for (let i: Int = 0; i < values.length; i++) {\n                        msg_writeFloatToken(message, i, values[i])\n                    }\n                    return message\n                `,\n                  declareFuncs.msg_strings `\n                    const template: MessageTemplate = []\n                    for (let i: Int = 0; i < values.length; i++) {\n                        template.push(MSG_STRING_TOKEN)\n                        template.push(values[i].length)\n                    }\n                    const message: Message = msg_create(template)\n                    for (let i: Int = 0; i < values.length; i++) {\n                        msg_writeStringToken(message, i, values[i])\n                    }\n                    return message\n                `,\n                  declareFuncs.msg_display `\n                    let displayArray: Array<string> = []\n                    for (let i: Int = 0; i < msg_getLength(message); i++) {\n                        if (msg_isFloatToken(message, i)) {\n                            displayArray.push(msg_readFloatToken(message, i).toString())\n                        } else {\n                            displayArray.push('\"' + msg_readStringToken(message, i) + '\"')\n                        }\n                    }\n                    return '[' + displayArray.join(', ') + ']'\n                `,\n                  // =========================== PRIVATE\n                  // Message header : [\n                  //      <Token count>, \n                  //      <Token 1 type>,  ..., <Token N type>, \n                  //      <Token 1 start>, ..., <Token N start>, <Token N end>\n                  //      ... DATA ...\n                  // ]\n                  Class$1('Message', [\n                      Var$1('DataView', 'dataView'),\n                      Var$1('MessageHeader', 'header'),\n                      Var$1('MessageHeaderEntry', 'tokenCount'),\n                      Var$1('MessageHeader', 'tokenTypes'),\n                      Var$1('MessageHeader', 'tokenPositions'),\n                  ]),\n                  Func$1('_msg_computeHeaderLength', [\n                      Var$1('Int', 'tokenCount')\n                  ], 'Int') `\n                    return 1 + tokenCount * 2 + 1\n                `,\n                  Func$1('_msg_unpackTokenCount', [\n                      Var$1('DataView', 'messageDataView')\n                  ], 'MessageHeaderEntry') `\n                    return messageDataView.getInt32(0)\n                `,\n                  Func$1('_msg_unpackHeader', [\n                      Var$1('DataView', 'messageDataView'),\n                      Var$1('MessageHeaderEntry', 'tokenCount'),\n                  ], 'MessageHeader') `\n                    const headerLength = _msg_computeHeaderLength(tokenCount)\n                    // TODO : why is this \\`wrap\\` not working ?\n                    // return Int32Array.wrap(messageDataView.buffer, 0, headerLength)\n                    const messageHeader = new Int32Array(headerLength)\n                    for (let i = 0; i < headerLength; i++) {\n                        messageHeader[i] = messageDataView.getInt32(sizeof<MessageHeaderEntry>() * i)\n                    }\n                    return messageHeader\n                `,\n                  Func$1('_msg_unpackTokenTypes', [\n                      Var$1('MessageHeader', 'header'),\n                  ], 'MessageHeader') `\n                    return header.slice(1, 1 + header[0])\n                `,\n                  Func$1('_msg_unpackTokenPositions', [\n                      Var$1('MessageHeader', 'header'),\n                  ], 'MessageHeader') `\n                    return header.slice(1 + header[0])\n                `,\n              ]);\n          }\n          else if (target === 'javascript') {\n              // prettier-ignore\n              return Sequence$1([\n                  ConstVar$1('string', 'MSG_FLOAT_TOKEN', '\"number\"'),\n                  ConstVar$1('string', 'MSG_STRING_TOKEN', '\"string\"'),\n                  declareFuncs.msg_create `\n                    const m = []\n                    let i = 0\n                    while (i < template.length) {\n                        if (template[i] === MSG_STRING_TOKEN) {\n                            m.push('')\n                            i += 2\n                        } else if (template[i] === MSG_FLOAT_TOKEN) {\n                            m.push(0)\n                            i += 1\n                        }\n                    }\n                    return m\n                `,\n                  declareFuncs.msg_getLength `\n                    return message.length\n                `,\n                  declareFuncs.msg_getTokenType `\n                    return typeof message[tokenIndex]\n                `,\n                  declareFuncs.msg_isStringToken `\n                    return msg_getTokenType(message, tokenIndex) === 'string'\n                `,\n                  declareFuncs.msg_isFloatToken `\n                    return msg_getTokenType(message, tokenIndex) === 'number'\n                `,\n                  declareFuncs.msg_isMatching `\n                    return (message.length === tokenTypes.length) \n                        && message.every((v, i) => msg_getTokenType(message, i) === tokenTypes[i])\n                `,\n                  declareFuncs.msg_writeFloatToken `\n                    message[tokenIndex] = value\n                `,\n                  declareFuncs.msg_writeStringToken `\n                    message[tokenIndex] = value\n                `,\n                  declareFuncs.msg_readFloatToken `\n                    return message[tokenIndex]\n                `,\n                  declareFuncs.msg_readStringToken `\n                    return message[tokenIndex]\n                `,\n                  declareFuncs.msg_floats `\n                    return values\n                `,\n                  declareFuncs.msg_strings `\n                    return values\n                `,\n                  declareFuncs.msg_display `\n                    return '[' + message\n                        .map(t => typeof t === 'string' ? '\"' + t + '\"' : t.toString())\n                        .join(', ') + ']'\n                `,\n              ]);\n          }\n          else {\n              throw new Error(`Unexpected target: ${target}`);\n          }\n      },\n      exports: [\n          { name: 'x_msg_create', targets: ['assemblyscript'] },\n          { name: 'x_msg_getTokenTypes', targets: ['assemblyscript'] },\n          { name: 'x_msg_createTemplate', targets: ['assemblyscript'] },\n          { name: 'msg_writeStringToken', targets: ['assemblyscript'] },\n          { name: 'msg_writeFloatToken', targets: ['assemblyscript'] },\n          { name: 'msg_readStringToken', targets: ['assemblyscript'] },\n          { name: 'msg_readFloatToken', targets: ['assemblyscript'] },\n          { name: 'MSG_FLOAT_TOKEN', targets: ['assemblyscript'] },\n          { name: 'MSG_STRING_TOKEN', targets: ['assemblyscript'] },\n      ],\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const FS_OPERATION_SUCCESS$1 = 0;\n  const FS_OPERATION_FAILURE$1 = 1;\n  const fsCore$1 = {\n      codeGenerator: ({ settings: { target } }) => {\n          const content = [];\n          if (target === 'assemblyscript') {\n              content.push(`\n                type fs_OperationId = Int\n                type fs_OperationStatus = Int\n                type fs_OperationCallback = (id: fs_OperationId, status: fs_OperationStatus) => void\n                type fs_OperationSoundCallback = (id: fs_OperationId, status: fs_OperationStatus, sound: FloatArray[]) => void\n                type fs_Url = string\n            `);\n          }\n          // prettier-ignore\n          return Sequence$1([\n              ...content,\n              ConstVar$1('Int', 'FS_OPERATION_SUCCESS', FS_OPERATION_SUCCESS$1.toString()),\n              ConstVar$1('Int', 'FS_OPERATION_FAILURE', FS_OPERATION_FAILURE$1.toString()),\n              ConstVar$1('Set<fs_OperationId>', '_FS_OPERATIONS_IDS', 'new Set()'),\n              ConstVar$1('Map<fs_OperationId, fs_OperationCallback>', '_FS_OPERATIONS_CALLBACKS', 'new Map()'),\n              ConstVar$1('Map<fs_OperationId, fs_OperationSoundCallback>', '_FS_OPERATIONS_SOUND_CALLBACKS', 'new Map()'),\n              // We start at 1, because 0 is what ASC uses when host forgets to pass an arg to \n              // a function. Therefore we can get false negatives when a test happens to expect a 0.\n              Var$1('Int', '_FS_OPERATION_COUNTER', '1'),\n              Class$1('fs_SoundInfo', [\n                  Var$1('Int', 'channelCount'),\n                  Var$1('Int', 'sampleRate'),\n                  Var$1('Int', 'bitDepth'),\n                  Var$1('string', 'encodingFormat'),\n                  Var$1('string', 'endianness'),\n                  Var$1('string', 'extraOptions'),\n              ]),\n              Func$1('fs_soundInfoToMessage', [\n                  Var$1('fs_SoundInfo', 'soundInfo')\n              ], 'Message') `\n                ${ConstVar$1('Message', 'info', `msg_create([\n                    MSG_FLOAT_TOKEN,\n                    MSG_FLOAT_TOKEN,\n                    MSG_FLOAT_TOKEN,\n                    MSG_STRING_TOKEN,\n                    soundInfo.encodingFormat.length,\n                    MSG_STRING_TOKEN,\n                    soundInfo.endianness.length,\n                    MSG_STRING_TOKEN,\n                    soundInfo.extraOptions.length\n                ])`)}\n                msg_writeFloatToken(info, 0, toFloat(soundInfo.channelCount))\n                msg_writeFloatToken(info, 1, toFloat(soundInfo.sampleRate))\n                msg_writeFloatToken(info, 2, toFloat(soundInfo.bitDepth))\n                msg_writeStringToken(info, 3, soundInfo.encodingFormat)\n                msg_writeStringToken(info, 4, soundInfo.endianness)\n                msg_writeStringToken(info, 5, soundInfo.extraOptions)\n                return info\n            `,\n              Func$1('_fs_assertOperationExists', [\n                  Var$1('fs_OperationId', 'id'),\n                  Var$1('string', 'operationName'),\n              ], 'void') `\n                if (!_FS_OPERATIONS_IDS.has(id)) {\n                    throw new Error(operationName + ' operation unknown : ' + id.toString())\n                }\n            `,\n              Func$1('_fs_createOperationId', [], 'fs_OperationId') `\n                ${ConstVar$1('fs_OperationId', 'id', '_FS_OPERATION_COUNTER++')}\n                _FS_OPERATIONS_IDS.add(id)\n                return id\n            `\n          ]);\n      },\n      dependencies: [msg$1],\n  };\n  ({\n      // prettier-ignore\n      codeGenerator: () => Sequence$1([\n          Func$1('fs_readSoundFile', [\n              Var$1('fs_Url', 'url'),\n              Var$1('fs_SoundInfo', 'soundInfo'),\n              Var$1('fs_OperationSoundCallback', 'callback'),\n          ], 'fs_OperationId') `\n            ${ConstVar$1('fs_OperationId', 'id', '_fs_createOperationId()')}\n            _FS_OPERATIONS_SOUND_CALLBACKS.set(id, callback)\n            i_fs_readSoundFile(id, url, fs_soundInfoToMessage(soundInfo))\n            return id\n        `,\n          Func$1('x_fs_onReadSoundFileResponse', [\n              Var$1('fs_OperationId', 'id'),\n              Var$1('fs_OperationStatus', 'status'),\n              Var$1('FloatArray[]', 'sound'),\n          ], 'void') `\n            _fs_assertOperationExists(id, 'x_fs_onReadSoundFileResponse')\n            _FS_OPERATIONS_IDS.delete(id)\n            // Finish cleaning before calling the callback in case it would throw an error.\n            const callback = _FS_OPERATIONS_SOUND_CALLBACKS.get(id)\n            callback(id, status, sound)\n            _FS_OPERATIONS_SOUND_CALLBACKS.delete(id)\n        `\n      ]),\n      exports: [\n          {\n              name: 'x_fs_onReadSoundFileResponse',\n          },\n      ],\n      imports: [\n          Func$1('i_fs_readSoundFile', [\n              Var$1('fs_OperationId', 'id'),\n              Var$1('fs_Url', 'url'),\n              Var$1('Message', 'info'),\n          ], 'void') ``,\n      ],\n      dependencies: [fsCore$1],\n  });\n  ({\n      // prettier-ignore\n      codeGenerator: () => Sequence$1([\n          Func$1('fs_writeSoundFile', [\n              Var$1('FloatArray[]', 'sound'),\n              Var$1('fs_Url', 'url'),\n              Var$1('fs_SoundInfo', 'soundInfo'),\n              Var$1('fs_OperationCallback', 'callback'),\n          ], 'fs_OperationId') `\n            ${ConstVar$1('fs_OperationId', 'id', '_fs_createOperationId()')}\n            _FS_OPERATIONS_CALLBACKS.set(id, callback)\n            i_fs_writeSoundFile(id, sound, url, fs_soundInfoToMessage(soundInfo))\n            return id\n        `,\n          Func$1('x_fs_onWriteSoundFileResponse', [\n              Var$1('fs_OperationId', 'id'),\n              Var$1('fs_OperationStatus', 'status'),\n          ], 'void') `\n            _fs_assertOperationExists(id, 'x_fs_onWriteSoundFileResponse')\n            _FS_OPERATIONS_IDS.delete(id)\n            // Finish cleaning before calling the callback in case it would throw an error.\n            ${ConstVar$1('fs_OperationCallback', 'callback', '_FS_OPERATIONS_CALLBACKS.get(id)')}\n            callback(id, status)\n            _FS_OPERATIONS_CALLBACKS.delete(id)\n        `\n      ]),\n      exports: [\n          {\n              name: 'x_fs_onWriteSoundFileResponse',\n          },\n      ],\n      imports: [\n          Func$1('i_fs_writeSoundFile', [\n              Var$1('fs_OperationId', 'id'),\n              Var$1('FloatArray[]', 'sound'),\n              Var$1('fs_Url', 'url'),\n              Var$1('Message', 'info'),\n          ], 'void') ``,\n      ],\n      dependencies: [fsCore$1],\n  });\n  const fsSoundStreamCore$1 = {\n      // prettier-ignore\n      codeGenerator: () => Sequence$1([\n          ConstVar$1('Map<fs_OperationId, Array<buf_SoundBuffer>>', '_FS_SOUND_STREAM_BUFFERS', 'new Map()'),\n          ConstVar$1('Int', '_FS_SOUND_BUFFER_LENGTH', '20 * 44100'),\n          Func$1('fs_closeSoundStream', [\n              Var$1('fs_OperationId', 'id'),\n              Var$1('fs_OperationStatus', 'status'),\n          ], 'void') `\n            if (!_FS_OPERATIONS_IDS.has(id)) {\n                return\n            }\n            _FS_OPERATIONS_IDS.delete(id)\n            _FS_OPERATIONS_CALLBACKS.get(id)(id, status)\n            _FS_OPERATIONS_CALLBACKS.delete(id)\n            // Delete this last, to give the callback \n            // a chance to save a reference to the buffer\n            // If write stream, there won't be a buffer\n            if (_FS_SOUND_STREAM_BUFFERS.has(id)) {\n                _FS_SOUND_STREAM_BUFFERS.delete(id)\n            }\n            i_fs_closeSoundStream(id, status)\n        `,\n          Func$1('x_fs_onCloseSoundStream', [\n              Var$1('fs_OperationId', 'id'),\n              Var$1('fs_OperationStatus', 'status'),\n          ], 'void') `\n            fs_closeSoundStream(id, status)\n        `\n      ]),\n      exports: [\n          {\n              name: 'x_fs_onCloseSoundStream',\n          },\n      ],\n      imports: [\n          Func$1('i_fs_closeSoundStream', [Var$1('fs_OperationId', 'id'), Var$1('fs_OperationStatus', 'status')], 'void') ``,\n      ],\n      dependencies: [bufCore$1, fsCore$1],\n  };\n  ({\n      // prettier-ignore\n      codeGenerator: () => Sequence$1([\n          Func$1('fs_openSoundReadStream', [\n              Var$1('fs_Url', 'url'),\n              Var$1('fs_SoundInfo', 'soundInfo'),\n              Var$1('fs_OperationCallback', 'callback'),\n          ], 'fs_OperationId') `\n            ${ConstVar$1('fs_OperationId', 'id', '_fs_createOperationId()')}\n            ${ConstVar$1('Array<buf_SoundBuffer>', 'buffers', '[]')}\n            for (${Var$1('Int', 'channel', '0')}; channel < soundInfo.channelCount; channel++) {\n                buffers.push(buf_create(_FS_SOUND_BUFFER_LENGTH))\n            }\n            _FS_SOUND_STREAM_BUFFERS.set(id, buffers)\n            _FS_OPERATIONS_CALLBACKS.set(id, callback)\n            i_fs_openSoundReadStream(id, url, fs_soundInfoToMessage(soundInfo))\n            return id\n        `,\n          Func$1('x_fs_onSoundStreamData', [\n              Var$1('fs_OperationId', 'id'),\n              Var$1('FloatArray[]', 'block'),\n          ], 'Int') `\n            _fs_assertOperationExists(id, 'x_fs_onSoundStreamData')\n            const buffers = _FS_SOUND_STREAM_BUFFERS.get(id)\n            for (${Var$1('Int', 'i', '0')}; i < buffers.length; i++) {\n                buf_pushBlock(buffers[i], block[i])\n            }\n            return buffers[0].pullAvailableLength\n        `\n      ]),\n      exports: [\n          {\n              name: 'x_fs_onSoundStreamData',\n          },\n      ],\n      imports: [\n          Func$1('i_fs_openSoundReadStream', [\n              Var$1('fs_OperationId', 'id'),\n              Var$1('fs_Url', 'url'),\n              Var$1('Message', 'info'),\n          ], 'void') ``,\n      ],\n      dependencies: [fsSoundStreamCore$1, bufPushPull$1],\n  });\n  ({\n      // prettier-ignore\n      codeGenerator: () => Sequence$1([\n          Func$1('fs_openSoundWriteStream', [\n              Var$1('fs_Url', 'url'),\n              Var$1('fs_SoundInfo', 'soundInfo'),\n              Var$1('fs_OperationCallback', 'callback'),\n          ], 'fs_OperationId') `\n            const id = _fs_createOperationId()\n            _FS_SOUND_STREAM_BUFFERS.set(id, [])\n            _FS_OPERATIONS_CALLBACKS.set(id, callback)\n            i_fs_openSoundWriteStream(id, url, fs_soundInfoToMessage(soundInfo))\n            return id\n        `,\n          Func$1('fs_sendSoundStreamData', [\n              Var$1('fs_OperationId', 'id'),\n              Var$1('FloatArray[]', 'block')\n          ], 'void') `\n            _fs_assertOperationExists(id, 'fs_sendSoundStreamData')\n            i_fs_sendSoundStreamData(id, block)\n        `\n      ]),\n      imports: [\n          Func$1('i_fs_openSoundWriteStream', [\n              Var$1('fs_OperationId', 'id'),\n              Var$1('fs_Url', 'url'),\n              Var$1('Message', 'info'),\n          ], 'void') ``,\n          Func$1('i_fs_sendSoundStreamData', [Var$1('fs_OperationId', 'id'), Var$1('FloatArray[]', 'block')], 'void') ``,\n      ],\n      dependencies: [fsSoundStreamCore$1],\n  });\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  AnonFunc$1([Var$1('Message', 'm')], 'void') ``;\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  var readSoundFile = async (node, payload, settings) => {\n      if (payload.functionName === 'onReadSoundFile') {\n          const [operationId, url, [channelCount]] = payload.arguments;\n          const absoluteUrl = resolveRelativeUrl(settings.rootUrl, url);\n          let operationStatus = FS_OPERATION_SUCCESS$1;\n          let sound = null;\n          try {\n              sound = await fakeFs.readSound(absoluteUrl, node.context);\n          }\n          catch (err) {\n              operationStatus = FS_OPERATION_FAILURE$1;\n              console.error(err);\n          }\n          if (sound) {\n              sound = fixSoundChannelCount(sound, channelCount);\n          }\n          node.port.postMessage({\n              type: 'fs',\n              payload: {\n                  functionName: 'sendReadSoundFileResponse',\n                  arguments: [operationId, operationStatus, sound],\n              },\n          }, \n          // Add as transferables to avoid copies between threads\n          sound.map((array) => array.buffer));\n      }\n      else if (payload.functionName === 'sendReadSoundFileResponse_return') ;\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const BUFFER_HIGH = 10 * 44100;\n  const BUFFER_LOW = BUFFER_HIGH / 2;\n  var readSoundStream = async (node, payload, settings) => {\n      if (payload.functionName === 'onOpenSoundReadStream') {\n          const [operationId, url, [channelCount]] = payload.arguments;\n          try {\n              const absoluteUrl = resolveRelativeUrl(settings.rootUrl, url);\n              await fakeFs.readStreamSound(operationId, absoluteUrl, channelCount, node.context);\n          }\n          catch (err) {\n              console.error(err);\n              node.port.postMessage({\n                  type: 'fs',\n                  payload: {\n                      functionName: 'closeSoundStream',\n                      arguments: [operationId, FS_OPERATION_FAILURE$1],\n                  },\n              });\n              return;\n          }\n          streamLoop(node, operationId, 0);\n      }\n      else if (payload.functionName === 'sendSoundStreamData_return') {\n          const stream = getStream(payload.operationId);\n          if (!stream) {\n              throw new Error(`unknown stream ${payload.operationId}`);\n          }\n          streamLoop(node, payload.operationId, payload.returned);\n      }\n      else if (payload.functionName === 'closeSoundStream_return') {\n          const stream = getStream(payload.operationId);\n          if (stream) {\n              killStream(payload.operationId);\n          }\n      }\n  };\n  const streamLoop = (node, operationId, framesAvailableInEngine) => {\n      const sampleRate = node.context.sampleRate;\n      const secondsToThreshold = Math.max(framesAvailableInEngine - BUFFER_LOW, 10) / sampleRate;\n      const framesToSend = BUFFER_HIGH -\n          (framesAvailableInEngine - secondsToThreshold * sampleRate);\n      setTimeout(() => {\n          const stream = getStream(operationId);\n          if (!stream) {\n              console.log(`stream ${operationId} was maybe closed`);\n              return;\n          }\n          if (stream.readPosition < stream.frameCount) {\n              const block = pullBlock(stream, framesToSend);\n              node.port.postMessage({\n                  type: 'fs',\n                  payload: {\n                      functionName: 'sendSoundStreamData',\n                      arguments: [operationId, block],\n                  },\n              }, \n              // Add as transferables to avoid copies between threads\n              block.map((array) => array.buffer));\n          }\n          else {\n              node.port.postMessage({\n                  type: 'fs',\n                  payload: {\n                      functionName: 'closeSoundStream',\n                      arguments: [operationId, FS_OPERATION_SUCCESS$1],\n                  },\n              });\n          }\n      }, secondsToThreshold * 1000);\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  var writeSoundFile = async (node, payload, settings) => {\n      if (payload.functionName === 'onWriteSoundFile') {\n          const [operationId, sound, url, [channelCount]] = payload.arguments;\n          const fixedSound = fixSoundChannelCount(sound, channelCount);\n          const absoluteUrl = resolveRelativeUrl(settings.rootUrl, url);\n          await fakeFs.writeSound(fixedSound, absoluteUrl);\n          let operationStatus = FS_OPERATION_SUCCESS$1;\n          node.port.postMessage({\n              type: 'fs',\n              payload: {\n                  functionName: 'sendWriteSoundFileResponse',\n                  arguments: [operationId, operationStatus],\n              },\n          });\n      }\n      else if (payload.functionName === 'sendWriteSoundFileResponse_return') ;\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  var writeSoundStream = async (_, payload, settings) => {\n      if (payload.functionName === 'onOpenSoundWriteStream') {\n          const [operationId, url, [channelCount]] = payload.arguments;\n          const absoluteUrl = resolveRelativeUrl(settings.rootUrl, url);\n          await fakeFs.writeStreamSound(operationId, absoluteUrl, channelCount);\n      }\n      else if (payload.functionName === 'onSoundStreamData') {\n          const [operationId, sound] = payload.arguments;\n          const stream = getStream(operationId);\n          if (!stream) {\n              throw new Error(`unknown stream ${operationId}`);\n          }\n          pushBlock(stream, sound);\n      }\n      else if (payload.functionName === 'closeSoundStream_return') {\n          const stream = getStream(payload.operationId);\n          if (stream) {\n              killStream(payload.operationId);\n          }\n      }\n  };\n\n  var index = async (node, messageEvent, settings) => {\n      const message = messageEvent.data;\n      const { payload } = message;\n      if (message.type !== 'fs') {\n          throw new Error(`Unknown message type from node ${message.type}`);\n      }\n      if (payload.functionName === 'onReadSoundFile' ||\n          payload.functionName === 'sendReadSoundFileResponse_return') {\n          readSoundFile(node, payload, settings);\n      }\n      else if (payload.functionName === 'onOpenSoundReadStream' ||\n          payload.functionName === 'sendSoundStreamData_return') {\n          readSoundStream(node, payload, settings);\n      }\n      else if (payload.functionName === 'onWriteSoundFile' ||\n          payload.functionName === 'sendWriteSoundFileResponse_return') {\n          writeSoundFile(node, payload, settings);\n      }\n      else if (payload.functionName === 'onOpenSoundWriteStream' ||\n          payload.functionName === 'onSoundStreamData') {\n          writeSoundStream(node, payload, settings);\n      }\n      else if (payload.functionName === 'closeSoundStream_return') {\n          writeSoundStream(node, payload, settings);\n          readSoundStream(node, payload, settings);\n      }\n      else if (payload.functionName === 'onCloseSoundStream') {\n          closeSoundStream(node, payload);\n      }\n      else {\n          throw new Error(`Unknown callback ${payload.functionName}`);\n      }\n  };\n\n  var initialize = (...args) => {\n      return registerWebPdWorkletNode(...args);\n  };\n\n  const urlDirName = (url) => {\n      if (isExternalUrl(url)) {\n          return new URL('.', url).href;\n      }\n      else {\n          return new URL('.', new URL(url, document.URL).href).href;\n      }\n  };\n  const isExternalUrl = (urlString) => {\n      try {\n          const url = new URL(urlString);\n          if (url.origin !== new URL(document.URL, document.baseURI).origin) {\n              return true;\n          }\n      }\n      catch (_e) {\n          new URL(urlString, document.baseURI);\n      }\n      return false;\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  /** Generate an integer series from 0 to `count` (non-inclusive). */\n  const countTo = (count) => {\n      const results = [];\n      for (let i = 0; i < count; i++) {\n          results.push(i);\n      }\n      return results;\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const Var = (typeName, name, value) => _preventToString({\n      astType: 'Var',\n      name,\n      type: typeName,\n      value: value !== undefined ? _prepareVarValue(value) : undefined,\n  });\n  const ConstVar = (typeName, name, value) => _preventToString({\n      astType: 'ConstVar',\n      name,\n      type: typeName,\n      value: _prepareVarValue(value),\n  });\n  const Func = (name, args = [], returnType = 'void') => (strings, ...content) => _preventToString({\n      astType: 'Func',\n      name,\n      args,\n      returnType,\n      body: ast(strings, ...content),\n  });\n  const AnonFunc = (args = [], returnType = 'void') => (strings, ...content) => _preventToString({\n      astType: 'Func',\n      name: null,\n      args,\n      returnType,\n      body: ast(strings, ...content),\n  });\n  const Class = (name, members) => _preventToString({\n      astType: 'Class',\n      name,\n      members,\n  });\n  const Sequence = (content) => ({\n      astType: 'Sequence',\n      content: _processRawContent(_intersperse(content, countTo(content.length - 1).map(() => '\\n'))),\n  });\n  const ast = (strings, ...content) => _preventToString({\n      astType: 'Sequence',\n      content: _processRawContent(_intersperse(strings, content)),\n  });\n  const _processRawContent = (content) => {\n      // 1. Flatten arrays and AstSequence, filter out nulls, and convert numbers to strings\n      // Basically converts input to an Array<AstContent>.\n      const flattenedAndFiltered = content.flatMap((element) => {\n          if (typeof element === 'string') {\n              return [element];\n          }\n          else if (typeof element === 'number') {\n              return [element.toString()];\n          }\n          else {\n              if (element === null) {\n                  return [];\n              }\n              else if (Array.isArray(element)) {\n                  return _processRawContent(_intersperse(element, countTo(element.length - 1).map(() => '\\n')));\n              }\n              else if (typeof element === 'object' &&\n                  element.astType === 'Sequence') {\n                  return element.content;\n              }\n              else {\n                  return [element];\n              }\n          }\n      });\n      // 2. Combine adjacent strings\n      const [combinedContent, remainingString] = flattenedAndFiltered.reduce(([combinedContent, currentString], element) => {\n          if (typeof element === 'string') {\n              return [combinedContent, currentString + element];\n          }\n          else {\n              if (currentString.length) {\n                  return [[...combinedContent, currentString, element], ''];\n              }\n              else {\n                  return [[...combinedContent, element], ''];\n              }\n          }\n      }, [[], '']);\n      if (remainingString.length) {\n          combinedContent.push(remainingString);\n      }\n      return combinedContent;\n  };\n  /**\n   * Intersperse content from array1 with content from array2.\n   * `array1.length` must be equal to `array2.length + 1`.\n   */\n  const _intersperse = (array1, array2) => {\n      if (array1.length === 0) {\n          return [];\n      }\n      return array1\n          .slice(1)\n          .reduce((combinedContent, element, i) => {\n          return combinedContent.concat([array2[i], element]);\n      }, [array1[0]]);\n  };\n  /**\n   * Prevents AST elements from being rendered as a string, as this is\n   * most likely an error due to unproper use of `ast`.\n   * Deacivated. Activate for debugging by uncommenting the line below.\n   */\n  const _preventToString = (element) => ({\n      ...element,\n      // Uncomment this to activate\n      // toString: () => { throw new Error(`Rendering element ${elemennt.astType} as string is probably an error`) }\n  });\n  const _prepareVarValue = (value) => {\n      if (typeof value === 'number') {\n          return Sequence([value.toString()]);\n      }\n      else if (typeof value === 'string') {\n          return Sequence([value]);\n      }\n      else {\n          return value;\n      }\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const getNode = (graph, nodeId) => {\n      const node = graph[nodeId];\n      if (node) {\n          return node;\n      }\n      throw new Error(`Node \"${nodeId}\" not found in graph`);\n  };\n\n  /** Helper to get node implementation or throw an error if not implemented. */\n  const getNodeImplementation = (nodeImplementations, nodeType) => {\n      const nodeImplementation = nodeImplementations[nodeType];\n      if (!nodeImplementation) {\n          throw new Error(`node [${nodeType}] is not implemented`);\n      }\n      return {\n          dependencies: [],\n          ...nodeImplementation,\n      };\n  };\n\n  const _addPath = (parent, key, _path) => {\n      const path = _ensurePath(_path);\n      return {\n          keys: [...path.keys, key],\n          parents: [...path.parents, parent],\n      };\n  };\n  const _ensurePath = (path) => path || {\n      keys: [],\n      parents: [],\n  };\n  const _proxySetHandlerReadOnly = () => {\n      throw new Error('This Proxy is read-only.');\n  };\n  const _proxyGetHandlerThrowIfKeyUnknown = (target, key, path) => {\n      if (!target.hasOwnProperty(key)) {\n          // Whitelist some fields that are undefined but accessed at\n          // some point or another by our code.\n          // TODO : find a better way to do this.\n          if ([\n              'toJSON',\n              'Symbol(Symbol.toStringTag)',\n              'constructor',\n              '$typeof',\n              '$$typeof',\n              '@@__IMMUTABLE_ITERABLE__@@',\n              '@@__IMMUTABLE_RECORD__@@',\n          ].includes(key)) {\n              return true;\n          }\n          throw new Error(`namespace${path ? ` <${path.keys.join('.')}>` : ''} doesn't know key \"${String(key)}\"`);\n      }\n      return false;\n  };\n  const Assigner = (spec, _obj, context, _path) => {\n      const path = _path || { keys: [], parents: [] };\n      const obj = Assigner.ensureValue(_obj, spec, context, path);\n      // If `_path` is provided, assign the new value to the parent object.\n      if (_path) {\n          const parent = _path.parents[_path.parents.length - 1];\n          const key = _path.keys[_path.keys.length - 1];\n          // The only case where we want to overwrite the existing value\n          // is when it was a `null` assigned by `LiteralDefaultNull`, and\n          // we want to set the real value instead.\n          if (!(key in parent) || 'LiteralDefaultNull' in spec) {\n              parent[key] = obj;\n          }\n      }\n      // If the object is a Literal, end of the recursion.\n      if ('Literal' in spec || 'LiteralDefaultNull' in spec) {\n          return obj;\n      }\n      return new Proxy(obj, {\n          get: (_, k) => {\n              const key = String(k);\n              let nextSpec;\n              if ('Index' in spec) {\n                  nextSpec = spec.Index(key, context, path);\n              }\n              else if ('Interface' in spec) {\n                  if (!(key in spec.Interface)) {\n                      throw new Error(`Interface has no entry \"${String(key)}\"`);\n                  }\n                  nextSpec = spec.Interface[key];\n              }\n              else {\n                  throw new Error('no builder');\n              }\n              return Assigner(nextSpec, \n              // We use this form here instead of `obj[key]` specifically\n              // to allow Assign to play well with `ProtectedIndex`, which\n              // would raise an error if trying to access an undefined key.\n              key in obj ? obj[key] : undefined, context, _addPath(obj, key, path));\n          },\n          set: _proxySetHandlerReadOnly,\n      });\n  };\n  Assigner.ensureValue = (_obj, spec, context, _path, _recursionPath) => {\n      if ('Index' in spec) {\n          return (_obj || spec.indexConstructor(context, _ensurePath(_path)));\n      }\n      else if ('Interface' in spec) {\n          const obj = (_obj || {});\n          Object.entries(spec.Interface).forEach(([key, nextSpec]) => {\n              obj[key] = Assigner.ensureValue(obj[key], nextSpec, context, _addPath(obj, key, _path), _addPath(obj, key, _recursionPath));\n          });\n          return obj;\n      }\n      else if ('Literal' in spec) {\n          return (_obj || spec.Literal(context, _ensurePath(_path)));\n      }\n      else if ('LiteralDefaultNull' in spec) {\n          if (!_recursionPath) {\n              return (_obj || spec.LiteralDefaultNull(context, _ensurePath(_path)));\n          }\n          else {\n              return (_obj || null);\n          }\n      }\n      else {\n          throw new Error('Invalid Assigner');\n      }\n  };\n  Assigner.Interface = (a) => ({ Interface: a });\n  Assigner.Index = (f, indexConstructor) => ({\n      Index: f,\n      indexConstructor: indexConstructor || (() => ({})),\n  });\n  Assigner.Literal = (f) => ({\n      Literal: f,\n  });\n  Assigner.LiteralDefaultNull = (f) => ({ LiteralDefaultNull: f });\n  // ---------------------------- ProtectedIndex ---------------------------- //\n  /**\n   * Helper to declare namespace objects enforcing stricter access rules.\n   * Specifically, it forbids :\n   * - reading an unknown property.\n   * - trying to overwrite an existing property.\n   */\n  const ProtectedIndex = (namespace, path) => {\n      return new Proxy(namespace, {\n          get: (target, k) => {\n              const key = String(k);\n              if (_proxyGetHandlerThrowIfKeyUnknown(target, key, path)) {\n                  return undefined;\n              }\n              return target[key];\n          },\n          set: (target, k, newValue) => {\n              const key = _trimDollarKey(String(k));\n              if (target.hasOwnProperty(key)) {\n                  throw new Error(`Key \"${String(key)}\" is protected and cannot be overwritten.`);\n              }\n              else {\n                  target[key] = newValue;\n              }\n              return newValue;\n          },\n      });\n  };\n  const _trimDollarKey = (key) => {\n      const match = /\\$(.*)/.exec(key);\n      if (!match) {\n          return key;\n      }\n      else {\n          return match[1];\n      }\n  };\n\n  const createGlobsVariableNames = () => ({\n      iterFrame: 'F',\n      frame: 'FRAME',\n      blockSize: 'BLOCK_SIZE',\n      sampleRate: 'SAMPLE_RATE',\n      output: 'OUTPUT',\n      input: 'INPUT',\n      nullMessageReceiver: 'SND_TO_NULL',\n      nullSignal: 'NULL_SIGNAL',\n      emptyMessage: 'EMPTY_MESSAGE',\n  });\n  Assigner.Interface({\n      nodes: Assigner.Index((nodeId) => Assigner.Interface({\n          signalOuts: Assigner.Index((portletId) => Assigner.Literal(() => _name('N', nodeId, 'outs', portletId))),\n          messageSenders: Assigner.Index((portletId) => Assigner.Literal(() => _name('N', nodeId, 'snds', portletId))),\n          messageReceivers: Assigner.Index((portletId) => Assigner.Literal(() => _name('N', nodeId, 'rcvs', portletId))),\n          state: Assigner.LiteralDefaultNull(() => _name('N', nodeId, 'state')),\n      })),\n      nodeImplementations: Assigner.Index((nodeType, { nodeImplementations }) => {\n          const nodeImplementation = getNodeImplementation(nodeImplementations, nodeType);\n          const nodeTypePrefix = (nodeImplementation.flags\n              ? nodeImplementation.flags.alphaName\n              : null) || nodeType;\n          return Assigner.Index((name) => Assigner.Literal(() => _name('NT', nodeTypePrefix, name)));\n      }),\n      globs: Assigner.Literal(createGlobsVariableNames),\n      globalCode: Assigner.Index((ns) => Assigner.Index((name) => Assigner.Literal(() => _name('G', ns, name)))),\n      io: Assigner.Interface({\n          messageReceivers: Assigner.Index((nodeId) => Assigner.Index((inletId) => Assigner.Literal(() => _name('IORCV', nodeId, inletId)))),\n          messageSenders: Assigner.Index((nodeId) => Assigner.Index((outletId) => Assigner.Literal(() => _name('IOSND', nodeId, outletId)))),\n      }),\n      coldDspGroups: Assigner.Index((groupId) => Assigner.Literal(() => _name('COLD', groupId))),\n  });\n  Assigner.Interface({\n      graph: Assigner.Literal((_, path) => ({\n          fullTraversal: [],\n          hotDspGroup: {\n              traversal: [],\n              outNodesIds: [],\n          },\n          coldDspGroups: ProtectedIndex({}, path),\n      })),\n      nodeImplementations: Assigner.Index((nodeType, { nodeImplementations }) => Assigner.Literal(() => ({\n          nodeImplementation: getNodeImplementation(nodeImplementations, nodeType),\n          stateClass: null,\n          core: null,\n      })), (_, path) => ProtectedIndex({}, path)),\n      nodes: Assigner.Index((nodeId, { graph }) => Assigner.Literal(() => ({\n          nodeType: getNode(graph, nodeId).type,\n          messageReceivers: {},\n          messageSenders: {},\n          signalOuts: {},\n          signalIns: {},\n          initialization: ast ``,\n          dsp: {\n              loop: ast ``,\n              inlets: {},\n          },\n          state: null,\n      })), (_, path) => ProtectedIndex({}, path)),\n      dependencies: Assigner.Literal(() => ({\n          imports: [],\n          exports: [],\n          ast: Sequence([]),\n      })),\n      io: Assigner.Interface({\n          messageReceivers: Assigner.Index((_) => Assigner.Literal((_, path) => ProtectedIndex({}, path)), (_, path) => ProtectedIndex({}, path)),\n          messageSenders: Assigner.Index((_) => Assigner.Literal((_, path) => ProtectedIndex({}, path)), (_, path) => ProtectedIndex({}, path)),\n      }),\n  });\n  // ---------------------------- MISC ---------------------------- //\n  const _name = (...parts) => parts.map(assertValidNamePart).join('_');\n  const assertValidNamePart = (namePart) => {\n      const isInvalid = !VALID_NAME_PART_REGEXP.exec(namePart);\n      if (isInvalid) {\n          throw new Error(`Invalid variable name for code generation \"${namePart}\"`);\n      }\n      return namePart;\n  };\n  const VALID_NAME_PART_REGEXP = /^[a-zA-Z0-9_]+$/;\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const bufCore = () => Sequence([\n      /**\n       * Ring buffer\n       */\n      Class('buf_SoundBuffer', [\n          Var('FloatArray', 'data'),\n          Var('Int', 'length'),\n          Var('Int', 'writeCursor'),\n          Var('Int', 'pullAvailableLength'),\n      ]),\n      /** Erases all the content from the buffer */\n      Func('buf_clear', [\n          Var('buf_SoundBuffer', 'buffer')\n      ], 'void') `\n        buffer.data.fill(0)\n    `,\n      /** Erases all the content from the buffer */\n      Func('buf_create', [\n          Var('Int', 'length')\n      ], 'buf_SoundBuffer') `\n        return {\n            data: createFloatArray(length),\n            length: length,\n            writeCursor: 0,\n            pullAvailableLength: 0,\n        }\n    `\n  ]);\n  const bufPushPull = {\n      codeGenerator: () => Sequence([\n          /**\n           * Pushes a block to the buffer, throwing an error if the buffer is full.\n           * If the block is written successfully, {@link buf_SoundBuffer#writeCursor}\n           * is moved corresponding with the length of data written.\n           *\n           * @todo : Optimize by allowing to read/write directly from host\n           */\n          Func('buf_pushBlock', [\n              Var('buf_SoundBuffer', 'buffer'),\n              Var('FloatArray', 'block')\n          ], 'Int') `\n            if (buffer.pullAvailableLength + block.length > buffer.length) {\n                throw new Error('buffer full')\n            }\n\n            ${Var('Int', 'left', 'block.length')}\n            while (left > 0) {\n                ${ConstVar('Int', 'lengthToWrite', `toInt(Math.min(\n                    toFloat(buffer.length - buffer.writeCursor), \n                    toFloat(left),\n                ))`)}\n                buffer.data.set(\n                    block.subarray(\n                        block.length - left, \n                        block.length - left + lengthToWrite\n                    ), \n                    buffer.writeCursor\n                )\n                left -= lengthToWrite\n                buffer.writeCursor = (buffer.writeCursor + lengthToWrite) % buffer.length\n                buffer.pullAvailableLength += lengthToWrite\n            }\n            return buffer.pullAvailableLength\n        `,\n          /**\n           * Pulls a single sample from the buffer.\n           * This is a destructive operation, and the sample will be\n           * unavailable for subsequent readers with the same operation.\n           */\n          Func('buf_pullSample', [\n              Var('buf_SoundBuffer', 'buffer')\n          ], 'Float') `\n            if (buffer.pullAvailableLength <= 0) {\n                return 0\n            }\n            ${ConstVar('Int', 'readCursor', 'buffer.writeCursor - buffer.pullAvailableLength')}\n            buffer.pullAvailableLength -= 1\n            return buffer.data[readCursor >= 0 ? readCursor : buffer.length + readCursor]\n        `\n      ]),\n      dependencies: [bufCore],\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const msg = {\n      codeGenerator: ({ settings: { target } }) => {\n          // prettier-ignore\n          const declareFuncs = {\n              msg_create: Func('msg_create', [Var('MessageTemplate', 'template')], 'Message'),\n              msg_writeStringToken: Func('msg_writeStringToken', [\n                  Var('Message', 'message'),\n                  Var('Int', 'tokenIndex'),\n                  Var('string', 'value'),\n              ], 'void'),\n              msg_writeFloatToken: Func('msg_writeFloatToken', [\n                  Var('Message', 'message'),\n                  Var('Int', 'tokenIndex'),\n                  Var('MessageFloatToken', 'value'),\n              ], 'void'),\n              msg_readStringToken: Func('msg_readStringToken', [\n                  Var('Message', 'message'),\n                  Var('Int', 'tokenIndex'),\n              ], 'string'),\n              msg_readFloatToken: Func('msg_readFloatToken', [\n                  Var('Message', 'message'),\n                  Var('Int', 'tokenIndex'),\n              ], 'MessageFloatToken'),\n              msg_getLength: Func('msg_getLength', [\n                  Var('Message', 'message')\n              ], 'Int'),\n              msg_getTokenType: Func('msg_getTokenType', [\n                  Var('Message', 'message'),\n                  Var('Int', 'tokenIndex'),\n              ], 'Int'),\n              msg_isStringToken: Func('msg_isStringToken', [\n                  Var('Message', 'message'),\n                  Var('Int', 'tokenIndex'),\n              ], 'boolean'),\n              msg_isFloatToken: Func('msg_isFloatToken', [\n                  Var('Message', 'message'),\n                  Var('Int', 'tokenIndex'),\n              ], 'boolean'),\n              msg_isMatching: Func('msg_isMatching', [\n                  Var('Message', 'message'),\n                  Var('Array<MessageHeaderEntry>', 'tokenTypes'),\n              ], 'boolean'),\n              msg_floats: Func('msg_floats', [\n                  Var('Array<Float>', 'values'),\n              ], 'Message'),\n              msg_strings: Func('msg_strings', [\n                  Var('Array<string>', 'values'),\n              ], 'Message'),\n              msg_display: Func('msg_display', [\n                  Var('Message', 'message'),\n              ], 'string')\n          };\n          if (target === 'assemblyscript') {\n              // prettier-ignore\n              return Sequence([\n                  `\n                type MessageFloatToken = Float\n                type MessageCharToken = Int\n\n                type MessageTemplate = Array<Int>\n                type MessageHeaderEntry = Int\n                type MessageHeader = Int32Array\n\n                type MessageHandler = (m: Message) => void\n                `,\n                  ConstVar('MessageHeaderEntry', 'MSG_FLOAT_TOKEN', '0'),\n                  ConstVar('MessageHeaderEntry', 'MSG_STRING_TOKEN', '1'),\n                  // =========================== EXPORTED API\n                  Func('x_msg_create', [\n                      Var('Int32Array', 'templateTypedArray')\n                  ], 'Message') `\n                    const template: MessageTemplate = new Array<Int>(templateTypedArray.length)\n                    for (let i: Int = 0; i < templateTypedArray.length; i++) {\n                        template[i] = templateTypedArray[i]\n                    }\n                    return msg_create(template)\n                `,\n                  Func('x_msg_getTokenTypes', [\n                      Var('Message', 'message')\n                  ], 'MessageHeader') `\n                    return message.tokenTypes\n                `,\n                  Func('x_msg_createTemplate', [\n                      Var('i32', 'length')\n                  ], 'Int32Array') `\n                    return new Int32Array(length)\n                `,\n                  // =========================== MSG API\n                  declareFuncs.msg_create `\n                    let i: Int = 0\n                    let byteCount: Int = 0\n                    let tokenTypes: Array<MessageHeaderEntry> = []\n                    let tokenPositions: Array<MessageHeaderEntry> = []\n\n                    i = 0\n                    while (i < template.length) {\n                        switch(template[i]) {\n                            case MSG_FLOAT_TOKEN:\n                                byteCount += sizeof<MessageFloatToken>()\n                                tokenTypes.push(MSG_FLOAT_TOKEN)\n                                tokenPositions.push(byteCount)\n                                i += 1\n                                break\n                            case MSG_STRING_TOKEN:\n                                byteCount += sizeof<MessageCharToken>() * template[i + 1]\n                                tokenTypes.push(MSG_STRING_TOKEN)\n                                tokenPositions.push(byteCount)\n                                i += 2\n                                break\n                            default:\n                                throw new Error(\"unknown token type : \" + template[i].toString())\n                        }\n                    }\n\n                    const tokenCount = tokenTypes.length\n                    const headerByteCount = _msg_computeHeaderLength(tokenCount) * sizeof<MessageHeaderEntry>()\n                    byteCount += headerByteCount\n\n                    const buffer = new ArrayBuffer(byteCount)\n                    const dataView = new DataView(buffer)\n                    let writePosition: Int = 0\n                    \n                    dataView.setInt32(writePosition, tokenCount)\n                    writePosition += sizeof<MessageHeaderEntry>()\n\n                    for (i = 0; i < tokenCount; i++) {\n                        dataView.setInt32(writePosition, tokenTypes[i])\n                        writePosition += sizeof<MessageHeaderEntry>()\n                    }\n\n                    dataView.setInt32(writePosition, headerByteCount)\n                    writePosition += sizeof<MessageHeaderEntry>()\n                    for (i = 0; i < tokenCount; i++) {\n                        dataView.setInt32(writePosition, headerByteCount + tokenPositions[i])\n                        writePosition += sizeof<MessageHeaderEntry>()\n                    }\n\n                    const header = _msg_unpackHeader(dataView, tokenCount)\n                    return {\n                        dataView,\n                        tokenCount,\n                        header,\n                        tokenTypes: _msg_unpackTokenTypes(header),\n                        tokenPositions: _msg_unpackTokenPositions(header),\n                    }\n                `,\n                  declareFuncs.msg_writeStringToken `\n                    const startPosition = message.tokenPositions[tokenIndex]\n                    const endPosition = message.tokenPositions[tokenIndex + 1]\n                    const expectedStringLength: Int = (endPosition - startPosition) / sizeof<MessageCharToken>()\n                    if (value.length !== expectedStringLength) {\n                        throw new Error('Invalid string size, specified ' + expectedStringLength.toString() + ', received ' + value.length.toString())\n                    }\n\n                    for (let i = 0; i < value.length; i++) {\n                        message.dataView.setInt32(\n                            startPosition + i * sizeof<MessageCharToken>(), \n                            value.codePointAt(i)\n                        )\n                    }\n                `,\n                  declareFuncs.msg_writeFloatToken `\n                    setFloatDataView(message.dataView, message.tokenPositions[tokenIndex], value)\n                `,\n                  declareFuncs.msg_readStringToken `\n                    const startPosition = message.tokenPositions[tokenIndex]\n                    const endPosition = message.tokenPositions[tokenIndex + 1]\n                    const stringLength: Int = (endPosition - startPosition) / sizeof<MessageCharToken>()\n                    let value: string = ''\n                    for (let i = 0; i < stringLength; i++) {\n                        value += String.fromCodePoint(message.dataView.getInt32(startPosition + sizeof<MessageCharToken>() * i))\n                    }\n                    return value\n                `,\n                  declareFuncs.msg_readFloatToken `\n                    return getFloatDataView(message.dataView, message.tokenPositions[tokenIndex])\n                `,\n                  declareFuncs.msg_getLength `\n                    return message.tokenTypes.length\n                `,\n                  declareFuncs.msg_getTokenType `\n                    return message.tokenTypes[tokenIndex]\n                `,\n                  declareFuncs.msg_isStringToken `\n                    return msg_getTokenType(message, tokenIndex) === MSG_STRING_TOKEN\n                `,\n                  declareFuncs.msg_isFloatToken `\n                    return msg_getTokenType(message, tokenIndex) === MSG_FLOAT_TOKEN\n                `,\n                  declareFuncs.msg_isMatching `\n                    if (message.tokenTypes.length !== tokenTypes.length) {\n                        return false\n                    }\n                    for (let i: Int = 0; i < tokenTypes.length; i++) {\n                        if (message.tokenTypes[i] !== tokenTypes[i]) {\n                            return false\n                        }\n                    }\n                    return true\n                `,\n                  declareFuncs.msg_floats `\n                    const message: Message = msg_create(values.map<MessageHeaderEntry>(v => MSG_FLOAT_TOKEN))\n                    for (let i: Int = 0; i < values.length; i++) {\n                        msg_writeFloatToken(message, i, values[i])\n                    }\n                    return message\n                `,\n                  declareFuncs.msg_strings `\n                    const template: MessageTemplate = []\n                    for (let i: Int = 0; i < values.length; i++) {\n                        template.push(MSG_STRING_TOKEN)\n                        template.push(values[i].length)\n                    }\n                    const message: Message = msg_create(template)\n                    for (let i: Int = 0; i < values.length; i++) {\n                        msg_writeStringToken(message, i, values[i])\n                    }\n                    return message\n                `,\n                  declareFuncs.msg_display `\n                    let displayArray: Array<string> = []\n                    for (let i: Int = 0; i < msg_getLength(message); i++) {\n                        if (msg_isFloatToken(message, i)) {\n                            displayArray.push(msg_readFloatToken(message, i).toString())\n                        } else {\n                            displayArray.push('\"' + msg_readStringToken(message, i) + '\"')\n                        }\n                    }\n                    return '[' + displayArray.join(', ') + ']'\n                `,\n                  // =========================== PRIVATE\n                  // Message header : [\n                  //      <Token count>, \n                  //      <Token 1 type>,  ..., <Token N type>, \n                  //      <Token 1 start>, ..., <Token N start>, <Token N end>\n                  //      ... DATA ...\n                  // ]\n                  Class('Message', [\n                      Var('DataView', 'dataView'),\n                      Var('MessageHeader', 'header'),\n                      Var('MessageHeaderEntry', 'tokenCount'),\n                      Var('MessageHeader', 'tokenTypes'),\n                      Var('MessageHeader', 'tokenPositions'),\n                  ]),\n                  Func('_msg_computeHeaderLength', [\n                      Var('Int', 'tokenCount')\n                  ], 'Int') `\n                    return 1 + tokenCount * 2 + 1\n                `,\n                  Func('_msg_unpackTokenCount', [\n                      Var('DataView', 'messageDataView')\n                  ], 'MessageHeaderEntry') `\n                    return messageDataView.getInt32(0)\n                `,\n                  Func('_msg_unpackHeader', [\n                      Var('DataView', 'messageDataView'),\n                      Var('MessageHeaderEntry', 'tokenCount'),\n                  ], 'MessageHeader') `\n                    const headerLength = _msg_computeHeaderLength(tokenCount)\n                    // TODO : why is this \\`wrap\\` not working ?\n                    // return Int32Array.wrap(messageDataView.buffer, 0, headerLength)\n                    const messageHeader = new Int32Array(headerLength)\n                    for (let i = 0; i < headerLength; i++) {\n                        messageHeader[i] = messageDataView.getInt32(sizeof<MessageHeaderEntry>() * i)\n                    }\n                    return messageHeader\n                `,\n                  Func('_msg_unpackTokenTypes', [\n                      Var('MessageHeader', 'header'),\n                  ], 'MessageHeader') `\n                    return header.slice(1, 1 + header[0])\n                `,\n                  Func('_msg_unpackTokenPositions', [\n                      Var('MessageHeader', 'header'),\n                  ], 'MessageHeader') `\n                    return header.slice(1 + header[0])\n                `,\n              ]);\n          }\n          else if (target === 'javascript') {\n              // prettier-ignore\n              return Sequence([\n                  ConstVar('string', 'MSG_FLOAT_TOKEN', '\"number\"'),\n                  ConstVar('string', 'MSG_STRING_TOKEN', '\"string\"'),\n                  declareFuncs.msg_create `\n                    const m = []\n                    let i = 0\n                    while (i < template.length) {\n                        if (template[i] === MSG_STRING_TOKEN) {\n                            m.push('')\n                            i += 2\n                        } else if (template[i] === MSG_FLOAT_TOKEN) {\n                            m.push(0)\n                            i += 1\n                        }\n                    }\n                    return m\n                `,\n                  declareFuncs.msg_getLength `\n                    return message.length\n                `,\n                  declareFuncs.msg_getTokenType `\n                    return typeof message[tokenIndex]\n                `,\n                  declareFuncs.msg_isStringToken `\n                    return msg_getTokenType(message, tokenIndex) === 'string'\n                `,\n                  declareFuncs.msg_isFloatToken `\n                    return msg_getTokenType(message, tokenIndex) === 'number'\n                `,\n                  declareFuncs.msg_isMatching `\n                    return (message.length === tokenTypes.length) \n                        && message.every((v, i) => msg_getTokenType(message, i) === tokenTypes[i])\n                `,\n                  declareFuncs.msg_writeFloatToken `\n                    message[tokenIndex] = value\n                `,\n                  declareFuncs.msg_writeStringToken `\n                    message[tokenIndex] = value\n                `,\n                  declareFuncs.msg_readFloatToken `\n                    return message[tokenIndex]\n                `,\n                  declareFuncs.msg_readStringToken `\n                    return message[tokenIndex]\n                `,\n                  declareFuncs.msg_floats `\n                    return values\n                `,\n                  declareFuncs.msg_strings `\n                    return values\n                `,\n                  declareFuncs.msg_display `\n                    return '[' + message\n                        .map(t => typeof t === 'string' ? '\"' + t + '\"' : t.toString())\n                        .join(', ') + ']'\n                `,\n              ]);\n          }\n          else {\n              throw new Error(`Unexpected target: ${target}`);\n          }\n      },\n      exports: [\n          { name: 'x_msg_create', targets: ['assemblyscript'] },\n          { name: 'x_msg_getTokenTypes', targets: ['assemblyscript'] },\n          { name: 'x_msg_createTemplate', targets: ['assemblyscript'] },\n          { name: 'msg_writeStringToken', targets: ['assemblyscript'] },\n          { name: 'msg_writeFloatToken', targets: ['assemblyscript'] },\n          { name: 'msg_readStringToken', targets: ['assemblyscript'] },\n          { name: 'msg_readFloatToken', targets: ['assemblyscript'] },\n          { name: 'MSG_FLOAT_TOKEN', targets: ['assemblyscript'] },\n          { name: 'MSG_STRING_TOKEN', targets: ['assemblyscript'] },\n      ],\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const FS_OPERATION_SUCCESS = 0;\n  const FS_OPERATION_FAILURE = 1;\n  const fsCore = {\n      codeGenerator: ({ settings: { target } }) => {\n          const content = [];\n          if (target === 'assemblyscript') {\n              content.push(`\n                type fs_OperationId = Int\n                type fs_OperationStatus = Int\n                type fs_OperationCallback = (id: fs_OperationId, status: fs_OperationStatus) => void\n                type fs_OperationSoundCallback = (id: fs_OperationId, status: fs_OperationStatus, sound: FloatArray[]) => void\n                type fs_Url = string\n            `);\n          }\n          // prettier-ignore\n          return Sequence([\n              ...content,\n              ConstVar('Int', 'FS_OPERATION_SUCCESS', FS_OPERATION_SUCCESS.toString()),\n              ConstVar('Int', 'FS_OPERATION_FAILURE', FS_OPERATION_FAILURE.toString()),\n              ConstVar('Set<fs_OperationId>', '_FS_OPERATIONS_IDS', 'new Set()'),\n              ConstVar('Map<fs_OperationId, fs_OperationCallback>', '_FS_OPERATIONS_CALLBACKS', 'new Map()'),\n              ConstVar('Map<fs_OperationId, fs_OperationSoundCallback>', '_FS_OPERATIONS_SOUND_CALLBACKS', 'new Map()'),\n              // We start at 1, because 0 is what ASC uses when host forgets to pass an arg to \n              // a function. Therefore we can get false negatives when a test happens to expect a 0.\n              Var('Int', '_FS_OPERATION_COUNTER', '1'),\n              Class('fs_SoundInfo', [\n                  Var('Int', 'channelCount'),\n                  Var('Int', 'sampleRate'),\n                  Var('Int', 'bitDepth'),\n                  Var('string', 'encodingFormat'),\n                  Var('string', 'endianness'),\n                  Var('string', 'extraOptions'),\n              ]),\n              Func('fs_soundInfoToMessage', [\n                  Var('fs_SoundInfo', 'soundInfo')\n              ], 'Message') `\n                ${ConstVar('Message', 'info', `msg_create([\n                    MSG_FLOAT_TOKEN,\n                    MSG_FLOAT_TOKEN,\n                    MSG_FLOAT_TOKEN,\n                    MSG_STRING_TOKEN,\n                    soundInfo.encodingFormat.length,\n                    MSG_STRING_TOKEN,\n                    soundInfo.endianness.length,\n                    MSG_STRING_TOKEN,\n                    soundInfo.extraOptions.length\n                ])`)}\n                msg_writeFloatToken(info, 0, toFloat(soundInfo.channelCount))\n                msg_writeFloatToken(info, 1, toFloat(soundInfo.sampleRate))\n                msg_writeFloatToken(info, 2, toFloat(soundInfo.bitDepth))\n                msg_writeStringToken(info, 3, soundInfo.encodingFormat)\n                msg_writeStringToken(info, 4, soundInfo.endianness)\n                msg_writeStringToken(info, 5, soundInfo.extraOptions)\n                return info\n            `,\n              Func('_fs_assertOperationExists', [\n                  Var('fs_OperationId', 'id'),\n                  Var('string', 'operationName'),\n              ], 'void') `\n                if (!_FS_OPERATIONS_IDS.has(id)) {\n                    throw new Error(operationName + ' operation unknown : ' + id.toString())\n                }\n            `,\n              Func('_fs_createOperationId', [], 'fs_OperationId') `\n                ${ConstVar('fs_OperationId', 'id', '_FS_OPERATION_COUNTER++')}\n                _FS_OPERATIONS_IDS.add(id)\n                return id\n            `\n          ]);\n      },\n      dependencies: [msg],\n  };\n  ({\n      // prettier-ignore\n      codeGenerator: () => Sequence([\n          Func('fs_readSoundFile', [\n              Var('fs_Url', 'url'),\n              Var('fs_SoundInfo', 'soundInfo'),\n              Var('fs_OperationSoundCallback', 'callback'),\n          ], 'fs_OperationId') `\n            ${ConstVar('fs_OperationId', 'id', '_fs_createOperationId()')}\n            _FS_OPERATIONS_SOUND_CALLBACKS.set(id, callback)\n            i_fs_readSoundFile(id, url, fs_soundInfoToMessage(soundInfo))\n            return id\n        `,\n          Func('x_fs_onReadSoundFileResponse', [\n              Var('fs_OperationId', 'id'),\n              Var('fs_OperationStatus', 'status'),\n              Var('FloatArray[]', 'sound'),\n          ], 'void') `\n            _fs_assertOperationExists(id, 'x_fs_onReadSoundFileResponse')\n            _FS_OPERATIONS_IDS.delete(id)\n            // Finish cleaning before calling the callback in case it would throw an error.\n            const callback = _FS_OPERATIONS_SOUND_CALLBACKS.get(id)\n            callback(id, status, sound)\n            _FS_OPERATIONS_SOUND_CALLBACKS.delete(id)\n        `\n      ]),\n      exports: [\n          {\n              name: 'x_fs_onReadSoundFileResponse',\n          },\n      ],\n      imports: [\n          Func('i_fs_readSoundFile', [\n              Var('fs_OperationId', 'id'),\n              Var('fs_Url', 'url'),\n              Var('Message', 'info'),\n          ], 'void') ``,\n      ],\n      dependencies: [fsCore],\n  });\n  ({\n      // prettier-ignore\n      codeGenerator: () => Sequence([\n          Func('fs_writeSoundFile', [\n              Var('FloatArray[]', 'sound'),\n              Var('fs_Url', 'url'),\n              Var('fs_SoundInfo', 'soundInfo'),\n              Var('fs_OperationCallback', 'callback'),\n          ], 'fs_OperationId') `\n            ${ConstVar('fs_OperationId', 'id', '_fs_createOperationId()')}\n            _FS_OPERATIONS_CALLBACKS.set(id, callback)\n            i_fs_writeSoundFile(id, sound, url, fs_soundInfoToMessage(soundInfo))\n            return id\n        `,\n          Func('x_fs_onWriteSoundFileResponse', [\n              Var('fs_OperationId', 'id'),\n              Var('fs_OperationStatus', 'status'),\n          ], 'void') `\n            _fs_assertOperationExists(id, 'x_fs_onWriteSoundFileResponse')\n            _FS_OPERATIONS_IDS.delete(id)\n            // Finish cleaning before calling the callback in case it would throw an error.\n            ${ConstVar('fs_OperationCallback', 'callback', '_FS_OPERATIONS_CALLBACKS.get(id)')}\n            callback(id, status)\n            _FS_OPERATIONS_CALLBACKS.delete(id)\n        `\n      ]),\n      exports: [\n          {\n              name: 'x_fs_onWriteSoundFileResponse',\n          },\n      ],\n      imports: [\n          Func('i_fs_writeSoundFile', [\n              Var('fs_OperationId', 'id'),\n              Var('FloatArray[]', 'sound'),\n              Var('fs_Url', 'url'),\n              Var('Message', 'info'),\n          ], 'void') ``,\n      ],\n      dependencies: [fsCore],\n  });\n  const fsSoundStreamCore = {\n      // prettier-ignore\n      codeGenerator: () => Sequence([\n          ConstVar('Map<fs_OperationId, Array<buf_SoundBuffer>>', '_FS_SOUND_STREAM_BUFFERS', 'new Map()'),\n          ConstVar('Int', '_FS_SOUND_BUFFER_LENGTH', '20 * 44100'),\n          Func('fs_closeSoundStream', [\n              Var('fs_OperationId', 'id'),\n              Var('fs_OperationStatus', 'status'),\n          ], 'void') `\n            if (!_FS_OPERATIONS_IDS.has(id)) {\n                return\n            }\n            _FS_OPERATIONS_IDS.delete(id)\n            _FS_OPERATIONS_CALLBACKS.get(id)(id, status)\n            _FS_OPERATIONS_CALLBACKS.delete(id)\n            // Delete this last, to give the callback \n            // a chance to save a reference to the buffer\n            // If write stream, there won't be a buffer\n            if (_FS_SOUND_STREAM_BUFFERS.has(id)) {\n                _FS_SOUND_STREAM_BUFFERS.delete(id)\n            }\n            i_fs_closeSoundStream(id, status)\n        `,\n          Func('x_fs_onCloseSoundStream', [\n              Var('fs_OperationId', 'id'),\n              Var('fs_OperationStatus', 'status'),\n          ], 'void') `\n            fs_closeSoundStream(id, status)\n        `\n      ]),\n      exports: [\n          {\n              name: 'x_fs_onCloseSoundStream',\n          },\n      ],\n      imports: [\n          Func('i_fs_closeSoundStream', [Var('fs_OperationId', 'id'), Var('fs_OperationStatus', 'status')], 'void') ``,\n      ],\n      dependencies: [bufCore, fsCore],\n  };\n  ({\n      // prettier-ignore\n      codeGenerator: () => Sequence([\n          Func('fs_openSoundReadStream', [\n              Var('fs_Url', 'url'),\n              Var('fs_SoundInfo', 'soundInfo'),\n              Var('fs_OperationCallback', 'callback'),\n          ], 'fs_OperationId') `\n            ${ConstVar('fs_OperationId', 'id', '_fs_createOperationId()')}\n            ${ConstVar('Array<buf_SoundBuffer>', 'buffers', '[]')}\n            for (${Var('Int', 'channel', '0')}; channel < soundInfo.channelCount; channel++) {\n                buffers.push(buf_create(_FS_SOUND_BUFFER_LENGTH))\n            }\n            _FS_SOUND_STREAM_BUFFERS.set(id, buffers)\n            _FS_OPERATIONS_CALLBACKS.set(id, callback)\n            i_fs_openSoundReadStream(id, url, fs_soundInfoToMessage(soundInfo))\n            return id\n        `,\n          Func('x_fs_onSoundStreamData', [\n              Var('fs_OperationId', 'id'),\n              Var('FloatArray[]', 'block'),\n          ], 'Int') `\n            _fs_assertOperationExists(id, 'x_fs_onSoundStreamData')\n            const buffers = _FS_SOUND_STREAM_BUFFERS.get(id)\n            for (${Var('Int', 'i', '0')}; i < buffers.length; i++) {\n                buf_pushBlock(buffers[i], block[i])\n            }\n            return buffers[0].pullAvailableLength\n        `\n      ]),\n      exports: [\n          {\n              name: 'x_fs_onSoundStreamData',\n          },\n      ],\n      imports: [\n          Func('i_fs_openSoundReadStream', [\n              Var('fs_OperationId', 'id'),\n              Var('fs_Url', 'url'),\n              Var('Message', 'info'),\n          ], 'void') ``,\n      ],\n      dependencies: [fsSoundStreamCore, bufPushPull],\n  });\n  ({\n      // prettier-ignore\n      codeGenerator: () => Sequence([\n          Func('fs_openSoundWriteStream', [\n              Var('fs_Url', 'url'),\n              Var('fs_SoundInfo', 'soundInfo'),\n              Var('fs_OperationCallback', 'callback'),\n          ], 'fs_OperationId') `\n            const id = _fs_createOperationId()\n            _FS_SOUND_STREAM_BUFFERS.set(id, [])\n            _FS_OPERATIONS_CALLBACKS.set(id, callback)\n            i_fs_openSoundWriteStream(id, url, fs_soundInfoToMessage(soundInfo))\n            return id\n        `,\n          Func('fs_sendSoundStreamData', [\n              Var('fs_OperationId', 'id'),\n              Var('FloatArray[]', 'block')\n          ], 'void') `\n            _fs_assertOperationExists(id, 'fs_sendSoundStreamData')\n            i_fs_sendSoundStreamData(id, block)\n        `\n      ]),\n      imports: [\n          Func('i_fs_openSoundWriteStream', [\n              Var('fs_OperationId', 'id'),\n              Var('fs_Url', 'url'),\n              Var('Message', 'info'),\n          ], 'void') ``,\n          Func('i_fs_sendSoundStreamData', [Var('fs_OperationId', 'id'), Var('FloatArray[]', 'block')], 'void') ``,\n      ],\n      dependencies: [fsSoundStreamCore],\n  });\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  AnonFunc([Var('Message', 'm')], 'void') ``;\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  // NOTE : not necessarily the most logical place to put this function, but we need it here\n  // cause it's imported by the bindings.\n  const getFloatArrayType = (bitDepth) => bitDepth === 64 ? Float64Array : Float32Array;\n  /** Helper to create a Module by wrapping a RawModule with Bindings */\n  const createModule = (rawModule, bindings) => \n  // Use empty object on proxy cause proxy cannot redefine access of member of its target,\n  // which causes issues for example for WebAssembly exports.\n  // See : https://stackoverflow.com/questions/75148897/get-on-proxy-property-items-is-a-read-only-and-non-configurable-data-proper\n  new Proxy({}, {\n      get: (_, k) => {\n          if (bindings.hasOwnProperty(k)) {\n              const key = String(k);\n              const bindingSpec = bindings[key];\n              switch (bindingSpec.type) {\n                  case 'raw':\n                      // Cannot use hasOwnProperty here cause not defined in wasm exports object\n                      if (k in rawModule) {\n                          return rawModule[key];\n                      }\n                      else {\n                          throw new Error(`Key ${String(key)} doesn't exist in raw module`);\n                      }\n                  case 'proxy':\n                  case 'callback':\n                      return bindingSpec.value;\n              }\n              // We need to return undefined here for compatibility with various APIs\n              // which inspect object's attributes.\n          }\n          else {\n              return undefined;\n          }\n      },\n      set: (_, k, newValue) => {\n          if (bindings.hasOwnProperty(String(k))) {\n              const key = String(k);\n              const bindingSpec = bindings[key];\n              if (bindingSpec.type === 'callback') {\n                  bindingSpec.value = newValue;\n              }\n              else {\n                  throw new Error(`Binding key ${String(key)} is read-only`);\n              }\n          }\n          else {\n              throw new Error(`Key ${String(k)} is not defined in bindings`);\n          }\n          return true;\n      },\n  });\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  /** @copyright Assemblyscript ESM bindings */\n  const liftString = (wasmExports, pointer) => {\n      if (!pointer) {\n          throw new Error('Cannot lift a null pointer');\n      }\n      pointer = pointer >>> 0;\n      const end = (pointer +\n          new Uint32Array(wasmExports.memory.buffer)[(pointer - 4) >>> 2]) >>>\n          1;\n      const memoryU16 = new Uint16Array(wasmExports.memory.buffer);\n      let start = pointer >>> 1;\n      let string = '';\n      while (end - start > 1024) {\n          string += String.fromCharCode(...memoryU16.subarray(start, (start += 1024)));\n      }\n      return string + String.fromCharCode(...memoryU16.subarray(start, end));\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  // REF : Assemblyscript ESM bindings\n  const instantiateWasmModule = async (wasmBuffer, wasmImports = {}) => {\n      const instanceAndModule = await WebAssembly.instantiate(wasmBuffer, {\n          env: {\n              abort: (messagePointer, \n              // filename, not useful because we compile everything to a single string\n              _, lineNumber, columnNumber) => {\n                  const message = liftString(wasmExports, messagePointer);\n                  lineNumber = lineNumber;\n                  columnNumber = columnNumber;\n                  (() => {\n                      // @external.js\n                      throw Error(`${message} at ${lineNumber}:${columnNumber}`);\n                  })();\n              },\n              seed: () => {\n                  return (() => {\n                      return Date.now() * Math.random();\n                  })();\n              },\n              'console.log': (textPointer) => {\n                  console.log(liftString(wasmExports, textPointer));\n              },\n          },\n          ...wasmImports,\n      });\n      const wasmExports = instanceAndModule.instance\n          .exports;\n      return instanceAndModule.instance;\n  };\n\n  const readMetadata$2 = async (wasmBuffer) => {\n      // In order to read metadata, we need to introspect the module to get the imports\n      const inputImports = {};\n      const wasmModule = WebAssembly.Module.imports(new WebAssembly.Module(wasmBuffer));\n      // Then we generate dummy functions to be able to instantiate the module\n      wasmModule\n          .filter((imprt) => imprt.module === 'input' && imprt.kind === 'function')\n          .forEach((imprt) => (inputImports[imprt.name] = () => undefined));\n      const wasmInstance = await instantiateWasmModule(wasmBuffer, {\n          input: inputImports,\n      });\n      // Finally, once the module instantiated, we read the metadata\n      const wasmExports = wasmInstance.exports;\n      const stringPointer = wasmExports.metadata.valueOf();\n      const metadataJSON = liftString(wasmExports, stringPointer);\n      return JSON.parse(metadataJSON);\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const createRawModule = (code) => new Function(`\n        ${code}\n        return exports\n    `)();\n  const createBindings = (rawModule) => ({\n      fs: { type: 'proxy', value: createFsModule(rawModule) },\n      metadata: { type: 'raw' },\n      initialize: { type: 'raw' },\n      dspLoop: { type: 'raw' },\n      io: { type: 'raw' },\n      commons: {\n          type: 'proxy',\n          value: createCommonsModule(rawModule, rawModule.metadata.audioSettings.bitDepth),\n      },\n  });\n  const createEngine = (code) => {\n      const rawModule = createRawModule(code);\n      return createModule(rawModule, createBindings(rawModule));\n  };\n  const createFsModule = (rawModule) => {\n      const fs = createModule(rawModule, {\n          onReadSoundFile: { type: 'callback', value: () => undefined },\n          onWriteSoundFile: { type: 'callback', value: () => undefined },\n          onOpenSoundReadStream: { type: 'callback', value: () => undefined },\n          onOpenSoundWriteStream: { type: 'callback', value: () => undefined },\n          onSoundStreamData: { type: 'callback', value: () => undefined },\n          onCloseSoundStream: { type: 'callback', value: () => undefined },\n          sendReadSoundFileResponse: {\n              type: 'proxy',\n              value: rawModule.x_fs_onReadSoundFileResponse,\n          },\n          sendWriteSoundFileResponse: {\n              type: 'proxy',\n              value: rawModule.x_fs_onWriteSoundFileResponse,\n          },\n          sendSoundStreamData: {\n              type: 'proxy',\n              value: rawModule.x_fs_onSoundStreamData,\n          },\n          closeSoundStream: {\n              type: 'proxy',\n              value: rawModule.x_fs_onCloseSoundStream,\n          },\n      });\n      rawModule.i_fs_openSoundWriteStream = (...args) => fs.onOpenSoundWriteStream(...args);\n      rawModule.i_fs_sendSoundStreamData = (...args) => fs.onSoundStreamData(...args);\n      rawModule.i_fs_openSoundReadStream = (...args) => fs.onOpenSoundReadStream(...args);\n      rawModule.i_fs_closeSoundStream = (...args) => fs.onCloseSoundStream(...args);\n      rawModule.i_fs_writeSoundFile = (...args) => fs.onWriteSoundFile(...args);\n      rawModule.i_fs_readSoundFile = (...args) => fs.onReadSoundFile(...args);\n      return fs;\n  };\n  const createCommonsModule = (rawModule, bitDepth) => {\n      const floatArrayType = getFloatArrayType(bitDepth);\n      return createModule(rawModule, {\n          getArray: { type: 'proxy', value: rawModule.commons_getArray },\n          setArray: {\n              type: 'proxy',\n              value: (arrayName, array) => rawModule.commons_setArray(arrayName, new floatArrayType(array)),\n          },\n      });\n  };\n\n  const readMetadata$1 = async (target, compiled) => {\n      switch (target) {\n          case 'assemblyscript':\n              return readMetadata$2(compiled);\n          case 'javascript':\n              return createEngine(compiled).metadata;\n      }\n  };\n\n  const defaultSettingsForRun = (patchUrl) => {\n      const rootUrl = urlDirName(patchUrl);\n      return {\n          messageHandler: (node, message) => index(node, message, { rootUrl }),\n      };\n  };\n  const readMetadata = (compiledPatch) => {\n      if (typeof compiledPatch === 'string') {\n          return readMetadata$1('javascript', compiledPatch);\n      }\n      else {\n          return readMetadata$1('assemblyscript', compiledPatch);\n      }\n  };\n\n  var run = async (audioContext, compiledPatch, settings) => {\n      const { messageHandler } = settings;\n      const webpdNode = new WebPdWorkletNode(audioContext);\n      webpdNode.port.onmessage = (msg) => messageHandler(webpdNode, msg);\n      if (typeof compiledPatch === 'string') {\n          webpdNode.port.postMessage({\n              type: 'code:JS',\n              payload: {\n                  jsCode: compiledPatch,\n              },\n          });\n      }\n      else {\n          webpdNode.port.postMessage({\n              type: 'code:WASM',\n              payload: {\n                  wasmBuffer: compiledPatch,\n              },\n          });\n      }\n      return webpdNode;\n  };\n\n  exports.defaultSettingsForRun = defaultSettingsForRun;\n  exports.initialize = initialize;\n  exports.readMetadata = readMetadata;\n  exports.run = run;\n\n  return exports;\n\n})({});\n",[n]:e.javascript?e.javascript:e.wasm,"index.html":'\n<!DOCTYPE html>\n<html lang="en">\n    <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <meta http-equiv="X-UA-Compatible" content="ie=edge">\n        <title>WebPd boilerplate</title>\n        <style>\n            #start {\n                display: none;\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n            }\n            #loading {\n                width: 100%;\n                height: 100%;\n                position: fixed;\n                top: 50%;\n                transform: translateY(-50%);\n                display: flex;\n                justify-content: center;\n                align-items: center;\n            }\n        </style>\n    </head>\n    <body>\n        <h1>My Web Page</h1>\n        <div>For more info about usage (how to interact with the patch), you can open this HTML file in a code editor.</div>\n        <button id="start"> Start </button>\n        <div id="loading"> Loading ... </div>\n        <script src="'.concat(oc,"\"><\/script>\n        <script>\n            // SUMMARY\n            // 1. WEB PAGE INITIALIZATION\n            // 2. SENDING MESSAGES FROM JAVASCRIPT TO THE PATCH\n            // 3. SENDING MESSAGES FROM THE PATCH TO JAVASCRIPT (coming soon ...)\n\n\n            // ------------- 1. WEB PAGE INITIALIZATION\n            const loadingDiv = document.querySelector('#loading')\n            const startButton = document.querySelector('#start')\n            const audioContext = new AudioContext()\n\n            let patch = null\n            let stream = null\n            let webpdNode = null\n\n            const initApp = async () => {\n                // Register the worklet\n                await WebPdRuntime.initialize(audioContext)\n\n                // Fetch the patch code\n                response = await fetch('").concat(n,"')\n                patch = await ").concat(e.javascript?"response.text()":"response.arrayBuffer()","\n\n                // Comment this if you don't need audio input\n                stream = await navigator.mediaDevices.getUserMedia({ audio: true })\n\n                // Hide loading and show start button\n                loadingDiv.style.display = 'none'\n                startButton.style.display = 'block'\n            }\n\n            const startApp = async () => {\n                // AudioContext needs to be resumed on click to protects users \n                // from being spammed with autoplay.\n                // See : https://github.com/WebAudio/web-audio-api/issues/345\n                if (audioContext.state === 'suspended') {\n                    audioContext.resume()\n                }\n\n                // Setup web audio graph\n                webpdNode = await WebPdRuntime.run(\n                    audioContext, \n                    patch, \n                    WebPdRuntime.defaultSettingsForRun('./").concat(n,"'),\n                )\n                webpdNode.connect(audioContext.destination)\n\n                // Comment this if you don't need audio input\n                const sourceNode = audioContext.createMediaStreamSource(stream)\n                sourceNode.connect(webpdNode)\n\n                // Hide the start button\n                startButton.style.display = 'none'\n            }\n\n            startButton.onclick = startApp\n\n            initApp().\n                then(() => {\n                    console.log('App initialized')\n                })\n\n            \n            // ------------- 2. SENDING MESSAGES FROM JAVASCRIPT TO THE PATCH\n            // Use the function sendMsgToWebPd to send a message from JavaScript to an object inside your patch.\n            // \n            // Parameters : \n            // - nodeId: the ID of the object you want to send a message to. \n            //          This ID is a string that has been assigned by WebPd at compilation.\n            //          You can find below the list of available IDs with hints to help you \n            //          identify the object you want to interact with.\n            // - portletId : the ID of the object portlet to which the message should be sent. \n            // - message : the message to send. This must be a list of strings and / or numbers.\n            // \n            // Examples :\n            // - sending a message to a bang node of ID 'n_0_1' :\n            //          sendMsgToWebPd('n_0_1', '0', ['bang'])\n            // - sending a message to a number object of ID 'n_0_2' :\n            //          sendMsgToWebPd('n_0_2', '0', [123])\n            // \n            const sendMsgToWebPd = (nodeId, portletId, message) => {\n                webpdNode.port.postMessage({\n                    type: 'io:messageReceiver',\n                    payload: {\n                        nodeId,\n                        portletId,\n                        message,\n                    },\n                })\n            }\n            \n            // Here is an index of objects IDs to which you can send messages, with hints so you can find the right ID.\n            // Note that by default only GUI objects (bangs, sliders, etc ...) are available.").concat(e.dspGraph&&e.dspGraph.io&&Object.keys(e.dspGraph.io.messageReceivers).length?Object.entries(e.dspGraph.io.messageReceivers).map((e=>{let[n,{portletIds:t,metadata:r}]=e;return t.map((e=>{const t=r;return t?"control"===t.group||"control:float"===t.group?'\n            //  - nodeId "'.concat(n,'" portletId "').concat(e,'"\n            //      * type "').concat(t.type,'"\n            //      * position ').concat(JSON.stringify(t.position)).concat(t.label?'\n            //      * label "'.concat(t.label,'"'):"","\n            "):"send"===t.group?'\n            //  - nodeId "'.concat(n,'" portletId "').concat(e,'"\n            //      * type "send"\n            //      * send "').concat(t.name,'"\n            '):"":""}))})).join(""):"\n            // EMPTY (did you place a GUI object in your patch ?)\n","\n\n\n            // ------------- 3. SENDING MESSAGES FROM THE PATCH TO JAVASCRIPT\n            // Coming soon ... \n\n        <\/script>\n    </body>\n</html>")}})(e),{status:0,warnings:[]};default:throw new Error("invalid build step ".concat(n))}},tS=e=>["Unknown object types ".concat(Array.from(e).map((e=>"".concat(e))).join(", "))],rS=e=>e.map((e=>{let{message:n,lineIndex:t}=e;return"line ".concat(t+1," : ").concat(n)}));function aS(e){return Number.isInteger(e)&&e>=0}function sS(e){this.name="ArgumentError",this.message=e}const oS=function(e,n){if(n=n||{},"function"!==typeof e)throw new sS("fetch must be a function");if("object"!==typeof n)throw new sS("defaults must be an object");if(void 0!==n.retries&&!aS(n.retries))throw new sS("retries must be a positive integer");if(void 0!==n.retryDelay&&!aS(n.retryDelay)&&"function"!==typeof n.retryDelay)throw new sS("retryDelay must be a positive integer or a function returning a positive integer");if(void 0!==n.retryOn&&!Array.isArray(n.retryOn)&&"function"!==typeof n.retryOn)throw new sS("retryOn property expects an array or function");return n=Object.assign({retries:3,retryDelay:1e3,retryOn:[]},n),function(t,r){var a=n.retries,s=n.retryDelay,o=n.retryOn;if(r&&void 0!==r.retries){if(!aS(r.retries))throw new sS("retries must be a positive integer");a=r.retries}if(r&&void 0!==r.retryDelay){if(!aS(r.retryDelay)&&"function"!==typeof r.retryDelay)throw new sS("retryDelay must be a positive integer or a function returning a positive integer");s=r.retryDelay}if(r&&r.retryOn){if(!Array.isArray(r.retryOn)&&"function"!==typeof r.retryOn)throw new sS("retryOn property expects an array or function");o=r.retryOn}return new Promise((function(n,i){var l=function(s){var l="undefined"!==typeof Request&&t instanceof Request?t.clone():t;e(l,r).then((function(e){if(Array.isArray(o)&&-1===o.indexOf(e.status))n(e);else if("function"===typeof o)try{return Promise.resolve(o(s,null,e)).then((function(t){t?u(s,null,e):n(e)})).catch(i)}catch(t){i(t)}else s<a?u(s,null,e):n(e)})).catch((function(e){if("function"===typeof o)try{Promise.resolve(o(s,e,null)).then((function(n){n?u(s,e,null):i(e)})).catch((function(e){i(e)}))}catch(e){i(e)}else s<a?u(s,e,null):i(e)}))};function u(e,n,t){var r="function"===typeof s?s(e,n,t):s;setTimeout((function(){l(++e)}),r)}l(0)}))}}(fetch),iS=(e,n)=>{if(0===e.length)throw new Error("Received empty sound");const t=e[0].constructor,r=e[0].length,a=e.slice(0,n);for(;e.length<n;)a.push(new t(r));return a},lS=(e,n)=>new URL(n,e).href;class uS extends Error{constructor(e,n){super("Error ".concat(e," : ").concat(n))}}class cS extends AudioWorkletNode{constructor(e){super(e,"webpd-node",{numberOfOutputs:1,outputChannelCount:[2]})}destroy(){this.port.postMessage({type:"destroy",payload:{}})}}const dS=e=>(async(e,n)=>{const t=new Blob([n],{type:"text/javascript"}),r=URL.createObjectURL(t);return e.audioWorklet.addModule(r)})(e,"var AssemblyScriptWasmBindings = (function (exports) {\n    'use strict';\n\n    const getFloatArrayType = (bitDepth) => bitDepth === 64 ? Float64Array : Float32Array;\n    const createModule = (rawModule, bindings) => new Proxy({}, {\n        get: (_, k) => {\n            if (bindings.hasOwnProperty(k)) {\n                const key = String(k);\n                const bindingSpec = bindings[key];\n                switch (bindingSpec.type) {\n                    case 'raw':\n                        if (k in rawModule) {\n                            return rawModule[key];\n                        }\n                        else {\n                            throw new Error(`Key ${String(key)} doesn't exist in raw module`);\n                        }\n                    case 'proxy':\n                    case 'callback':\n                        return bindingSpec.value;\n                }\n            }\n            else {\n                return undefined;\n            }\n        },\n        set: (_, k, newValue) => {\n            if (bindings.hasOwnProperty(String(k))) {\n                const key = String(k);\n                const bindingSpec = bindings[key];\n                if (bindingSpec.type === 'callback') {\n                    bindingSpec.value = newValue;\n                }\n                else {\n                    throw new Error(`Binding key ${String(key)} is read-only`);\n                }\n            }\n            else {\n                throw new Error(`Key ${String(k)} is not defined in bindings`);\n            }\n            return true;\n        },\n    });\n\n    const liftString = (wasmExports, pointer) => {\n        if (!pointer) {\n            throw new Error('Cannot lift a null pointer');\n        }\n        pointer = pointer >>> 0;\n        const end = (pointer +\n            new Uint32Array(wasmExports.memory.buffer)[(pointer - 4) >>> 2]) >>>\n            1;\n        const memoryU16 = new Uint16Array(wasmExports.memory.buffer);\n        let start = pointer >>> 1;\n        let string = '';\n        while (end - start > 1024) {\n            string += String.fromCharCode(...memoryU16.subarray(start, (start += 1024)));\n        }\n        return string + String.fromCharCode(...memoryU16.subarray(start, end));\n    };\n    const lowerString = (wasmExports, value) => {\n        if (value == null) {\n            throw new Error('Cannot lower a null string');\n        }\n        const length = value.length, pointer = wasmExports.__new(length << 1, 1) >>> 0, memoryU16 = new Uint16Array(wasmExports.memory.buffer);\n        for (let i = 0; i < length; ++i)\n            memoryU16[(pointer >>> 1) + i] = value.charCodeAt(i);\n        return pointer;\n    };\n    const readTypedArray = (wasmExports, constructor, pointer) => {\n        if (!pointer) {\n            throw new Error('Cannot lift a null pointer');\n        }\n        const memoryU32 = new Uint32Array(wasmExports.memory.buffer);\n        return new constructor(wasmExports.memory.buffer, memoryU32[(pointer + 4) >>> 2], memoryU32[(pointer + 8) >>> 2] / constructor.BYTES_PER_ELEMENT);\n    };\n    const lowerFloatArray = (wasmExports, bitDepth, data) => {\n        const arrayType = getFloatArrayType(bitDepth);\n        const arrayPointer = wasmExports.createFloatArray(data.length);\n        const array = readTypedArray(wasmExports, arrayType, arrayPointer);\n        array.set(data);\n        return { array, arrayPointer };\n    };\n    const lowerListOfFloatArrays = (wasmExports, bitDepth, data) => {\n        const arraysPointer = wasmExports.x_core_createListOfArrays();\n        data.forEach((array) => {\n            const { arrayPointer } = lowerFloatArray(wasmExports, bitDepth, array);\n            wasmExports.x_core_pushToListOfArrays(arraysPointer, arrayPointer);\n        });\n        return arraysPointer;\n    };\n    const readListOfFloatArrays = (wasmExports, bitDepth, listOfArraysPointer) => {\n        const listLength = wasmExports.x_core_getListOfArraysLength(listOfArraysPointer);\n        const arrays = [];\n        const arrayType = getFloatArrayType(bitDepth);\n        for (let i = 0; i < listLength; i++) {\n            const arrayPointer = wasmExports.x_core_getListOfArraysElem(listOfArraysPointer, i);\n            arrays.push(readTypedArray(wasmExports, arrayType, arrayPointer));\n        }\n        return arrays;\n    };\n\n    const liftMessage = (wasmExports, messagePointer) => {\n        const messageTokenTypesPointer = wasmExports.x_msg_getTokenTypes(messagePointer);\n        const messageTokenTypes = readTypedArray(wasmExports, Int32Array, messageTokenTypesPointer);\n        const message = [];\n        messageTokenTypes.forEach((tokenType, tokenIndex) => {\n            if (tokenType === wasmExports.MSG_FLOAT_TOKEN.valueOf()) {\n                message.push(wasmExports.msg_readFloatToken(messagePointer, tokenIndex));\n            }\n            else if (tokenType === wasmExports.MSG_STRING_TOKEN.valueOf()) {\n                const stringPointer = wasmExports.msg_readStringToken(messagePointer, tokenIndex);\n                message.push(liftString(wasmExports, stringPointer));\n            }\n        });\n        return message;\n    };\n    const lowerMessage = (wasmExports, message) => {\n        const template = message.reduce((template, value) => {\n            if (typeof value === 'number') {\n                template.push(wasmExports.MSG_FLOAT_TOKEN.valueOf());\n            }\n            else if (typeof value === 'string') {\n                template.push(wasmExports.MSG_STRING_TOKEN.valueOf());\n                template.push(value.length);\n            }\n            else {\n                throw new Error(`invalid message value ${value}`);\n            }\n            return template;\n        }, []);\n        const templateArrayPointer = wasmExports.x_msg_createTemplate(template.length);\n        const loweredTemplateArray = readTypedArray(wasmExports, Int32Array, templateArrayPointer);\n        loweredTemplateArray.set(template);\n        const messagePointer = wasmExports.x_msg_create(templateArrayPointer);\n        message.forEach((value, index) => {\n            if (typeof value === 'number') {\n                wasmExports.msg_writeFloatToken(messagePointer, index, value);\n            }\n            else if (typeof value === 'string') {\n                const stringPointer = lowerString(wasmExports, value);\n                wasmExports.msg_writeStringToken(messagePointer, index, stringPointer);\n            }\n        });\n        return messagePointer;\n    };\n\n    const mapArray = (src, func) => {\n        const dest = {};\n        src.forEach((srcValue, i) => {\n            const [key, destValue] = func(srcValue, i);\n            dest[key] = destValue;\n        });\n        return dest;\n    };\n\n    const instantiateWasmModule = async (wasmBuffer, wasmImports = {}) => {\n        const instanceAndModule = await WebAssembly.instantiate(wasmBuffer, {\n            env: {\n                abort: (messagePointer, _, lineNumber, columnNumber) => {\n                    const message = liftString(wasmExports, messagePointer);\n                    lineNumber = lineNumber;\n                    columnNumber = columnNumber;\n                    (() => {\n                        throw Error(`${message} at ${lineNumber}:${columnNumber}`);\n                    })();\n                },\n                seed: () => {\n                    return (() => {\n                        return Date.now() * Math.random();\n                    })();\n                },\n                'console.log': (textPointer) => {\n                    console.log(liftString(wasmExports, textPointer));\n                },\n            },\n            ...wasmImports,\n        });\n        const wasmExports = instanceAndModule.instance\n            .exports;\n        return instanceAndModule.instance;\n    };\n\n    const updateWasmInOuts = (rawModule, engineData) => {\n        engineData.wasmOutput = readTypedArray(rawModule, engineData.arrayType, rawModule.getOutput());\n        engineData.wasmInput = readTypedArray(rawModule, engineData.arrayType, rawModule.getInput());\n    };\n    const createEngineLifecycleBindings = (rawModule, engineData) => {\n        return {\n            initialize: {\n                type: 'proxy',\n                value: (sampleRate, blockSize) => {\n                    engineData.metadata.audioSettings.blockSize = blockSize;\n                    engineData.metadata.audioSettings.sampleRate = sampleRate;\n                    engineData.blockSize = blockSize;\n                    rawModule.initialize(sampleRate, blockSize);\n                    updateWasmInOuts(rawModule, engineData);\n                },\n            },\n            dspLoop: {\n                type: 'proxy',\n                value: (input, output) => {\n                    for (let channel = 0; channel < input.length; channel++) {\n                        engineData.wasmInput.set(input[channel], channel * engineData.blockSize);\n                    }\n                    updateWasmInOuts(rawModule, engineData);\n                    rawModule.dspLoop();\n                    updateWasmInOuts(rawModule, engineData);\n                    for (let channel = 0; channel < output.length; channel++) {\n                        output[channel].set(engineData.wasmOutput.subarray(engineData.blockSize * channel, engineData.blockSize * (channel + 1)));\n                    }\n                },\n            },\n        };\n    };\n    const createIoMessageReceiversBindings = (rawModule, engineData) => Object.entries(engineData.metadata.compilation.io.messageReceivers).reduce((bindings, [nodeId, spec]) => ({\n        ...bindings,\n        [nodeId]: {\n            type: 'proxy',\n            value: mapArray(spec.portletIds, (inletId) => [\n                inletId,\n                (message) => {\n                    const messagePointer = lowerMessage(rawModule, message);\n                    rawModule[engineData.metadata.compilation.variableNamesIndex\n                        .io.messageReceivers[nodeId][inletId]](messagePointer);\n                },\n            ]),\n        },\n    }), {});\n    const createIoMessageSendersBindings = (_, engineData) => Object.entries(engineData.metadata.compilation.io.messageSenders).reduce((bindings, [nodeId, spec]) => ({\n        ...bindings,\n        [nodeId]: {\n            type: 'proxy',\n            value: mapArray(spec.portletIds, (outletId) => [\n                outletId,\n                {\n                    onMessage: () => undefined,\n                },\n            ]),\n        },\n    }), {});\n    const ioMsgSendersImports = (forwardReferences, metadata) => {\n        const wasmImports = {};\n        const { variableNamesIndex } = metadata.compilation;\n        Object.entries(metadata.compilation.io.messageSenders).forEach(([nodeId, spec]) => {\n            spec.portletIds.forEach((outletId) => {\n                const listenerName = variableNamesIndex.io.messageSenders[nodeId][outletId];\n                wasmImports[listenerName] = (messagePointer) => {\n                    const message = liftMessage(forwardReferences.rawModule, messagePointer);\n                    forwardReferences.modules.io.messageSenders[nodeId][outletId].onMessage(message);\n                };\n            });\n        });\n        return wasmImports;\n    };\n    const readMetadata = async (wasmBuffer) => {\n        const inputImports = {};\n        const wasmModule = WebAssembly.Module.imports(new WebAssembly.Module(wasmBuffer));\n        wasmModule\n            .filter((imprt) => imprt.module === 'input' && imprt.kind === 'function')\n            .forEach((imprt) => (inputImports[imprt.name] = () => undefined));\n        const wasmInstance = await instantiateWasmModule(wasmBuffer, {\n            input: inputImports,\n        });\n        const wasmExports = wasmInstance.exports;\n        const stringPointer = wasmExports.metadata.valueOf();\n        const metadataJSON = liftString(wasmExports, stringPointer);\n        return JSON.parse(metadataJSON);\n    };\n\n    const createFsBindings = (rawModule, engineData) => ({\n        sendReadSoundFileResponse: {\n            type: 'proxy',\n            value: (operationId, status, sound) => {\n                let soundPointer = 0;\n                if (sound) {\n                    soundPointer = lowerListOfFloatArrays(rawModule, engineData.bitDepth, sound);\n                }\n                rawModule.x_fs_onReadSoundFileResponse(operationId, status, soundPointer);\n                updateWasmInOuts(rawModule, engineData);\n            },\n        },\n        sendWriteSoundFileResponse: {\n            type: 'proxy',\n            value: rawModule.x_fs_onWriteSoundFileResponse,\n        },\n        sendSoundStreamData: {\n            type: 'proxy',\n            value: (operationId, sound) => {\n                const soundPointer = lowerListOfFloatArrays(rawModule, engineData.bitDepth, sound);\n                const writtenFrameCount = rawModule.x_fs_onSoundStreamData(operationId, soundPointer);\n                updateWasmInOuts(rawModule, engineData);\n                return writtenFrameCount;\n            },\n        },\n        closeSoundStream: {\n            type: 'proxy',\n            value: rawModule.x_fs_onCloseSoundStream,\n        },\n        onReadSoundFile: { type: 'callback', value: () => undefined },\n        onWriteSoundFile: { type: 'callback', value: () => undefined },\n        onOpenSoundReadStream: { type: 'callback', value: () => undefined },\n        onOpenSoundWriteStream: { type: 'callback', value: () => undefined },\n        onSoundStreamData: { type: 'callback', value: () => undefined },\n        onCloseSoundStream: { type: 'callback', value: () => undefined },\n    });\n    const createFsImports = (forwardReferences) => {\n        let wasmImports = {\n            i_fs_readSoundFile: (operationId, urlPointer, infoPointer) => {\n                const url = liftString(forwardReferences.rawModule, urlPointer);\n                const info = liftMessage(forwardReferences.rawModule, infoPointer);\n                forwardReferences.modules.fs.onReadSoundFile(operationId, url, info);\n            },\n            i_fs_writeSoundFile: (operationId, soundPointer, urlPointer, infoPointer) => {\n                const sound = readListOfFloatArrays(forwardReferences.rawModule, forwardReferences.engineData.bitDepth, soundPointer);\n                const url = liftString(forwardReferences.rawModule, urlPointer);\n                const info = liftMessage(forwardReferences.rawModule, infoPointer);\n                forwardReferences.modules.fs.onWriteSoundFile(operationId, sound, url, info);\n            },\n            i_fs_openSoundReadStream: (operationId, urlPointer, infoPointer) => {\n                const url = liftString(forwardReferences.rawModule, urlPointer);\n                const info = liftMessage(forwardReferences.rawModule, infoPointer);\n                updateWasmInOuts(forwardReferences.rawModule, forwardReferences.engineData);\n                forwardReferences.modules.fs.onOpenSoundReadStream(operationId, url, info);\n            },\n            i_fs_openSoundWriteStream: (operationId, urlPointer, infoPointer) => {\n                const url = liftString(forwardReferences.rawModule, urlPointer);\n                const info = liftMessage(forwardReferences.rawModule, infoPointer);\n                forwardReferences.modules.fs.onOpenSoundWriteStream(operationId, url, info);\n            },\n            i_fs_sendSoundStreamData: (operationId, blockPointer) => {\n                const block = readListOfFloatArrays(forwardReferences.rawModule, forwardReferences.engineData.bitDepth, blockPointer);\n                forwardReferences.modules.fs.onSoundStreamData(operationId, block);\n            },\n            i_fs_closeSoundStream: (...args) => forwardReferences.modules.fs.onCloseSoundStream(...args),\n        };\n        return wasmImports;\n    };\n\n    const createCommonsBindings = (rawModule, engineData) => ({\n        getArray: {\n            type: 'proxy',\n            value: (arrayName) => {\n                const arrayNamePointer = lowerString(rawModule, arrayName);\n                const arrayPointer = rawModule.commons_getArray(arrayNamePointer);\n                return readTypedArray(rawModule, engineData.arrayType, arrayPointer);\n            },\n        },\n        setArray: {\n            type: 'proxy',\n            value: (arrayName, array) => {\n                const stringPointer = lowerString(rawModule, arrayName);\n                const { arrayPointer } = lowerFloatArray(rawModule, engineData.bitDepth, array);\n                rawModule.commons_setArray(stringPointer, arrayPointer);\n                updateWasmInOuts(rawModule, engineData);\n            },\n        },\n    });\n\n    const createEngine = async (wasmBuffer) => {\n        const { rawModule, engineData, forwardReferences } = await createRawModule(wasmBuffer);\n        const engineBindings = await createBindings(rawModule, engineData, forwardReferences);\n        return createModule(rawModule, engineBindings);\n    };\n    const createRawModule = async (wasmBuffer) => {\n        const metadata = await readMetadata(wasmBuffer);\n        const forwardReferences = { modules: {} };\n        const wasmImports = {\n            ...createFsImports(forwardReferences),\n            ...ioMsgSendersImports(forwardReferences, metadata),\n        };\n        const bitDepth = metadata.audioSettings.bitDepth;\n        const arrayType = getFloatArrayType(bitDepth);\n        const engineData = {\n            metadata,\n            wasmOutput: new arrayType(0),\n            wasmInput: new arrayType(0),\n            arrayType,\n            bitDepth,\n            blockSize: 0,\n        };\n        const wasmInstance = await instantiateWasmModule(wasmBuffer, {\n            input: wasmImports,\n        });\n        const rawModule = wasmInstance.exports;\n        return { rawModule, engineData, forwardReferences };\n    };\n    const createBindings = async (rawModule, engineData, forwardReferences) => {\n        const commons = createModule(rawModule, createCommonsBindings(rawModule, engineData));\n        const fs = createModule(rawModule, createFsBindings(rawModule, engineData));\n        const io = {\n            messageReceivers: createModule(rawModule, createIoMessageReceiversBindings(rawModule, engineData)),\n            messageSenders: createModule(rawModule, createIoMessageSendersBindings(rawModule, engineData)),\n        };\n        forwardReferences.modules.fs = fs;\n        forwardReferences.modules.io = io;\n        forwardReferences.engineData = engineData;\n        forwardReferences.rawModule = rawModule;\n        return {\n            ...createEngineLifecycleBindings(rawModule, engineData),\n            metadata: { type: 'proxy', value: engineData.metadata },\n            commons: { type: 'proxy', value: commons },\n            fs: { type: 'proxy', value: fs },\n            io: { type: 'proxy', value: io },\n        };\n    };\n\n    exports.createBindings = createBindings;\n    exports.createEngine = createEngine;\n    exports.createRawModule = createRawModule;\n\n    return exports;\n\n})({});\n;\nvar JavaScriptBindings = (function (exports) {\n    'use strict';\n\n    const getFloatArrayType = (bitDepth) => bitDepth === 64 ? Float64Array : Float32Array;\n    const createModule = (rawModule, bindings) => new Proxy({}, {\n        get: (_, k) => {\n            if (bindings.hasOwnProperty(k)) {\n                const key = String(k);\n                const bindingSpec = bindings[key];\n                switch (bindingSpec.type) {\n                    case 'raw':\n                        if (k in rawModule) {\n                            return rawModule[key];\n                        }\n                        else {\n                            throw new Error(`Key ${String(key)} doesn't exist in raw module`);\n                        }\n                    case 'proxy':\n                    case 'callback':\n                        return bindingSpec.value;\n                }\n            }\n            else {\n                return undefined;\n            }\n        },\n        set: (_, k, newValue) => {\n            if (bindings.hasOwnProperty(String(k))) {\n                const key = String(k);\n                const bindingSpec = bindings[key];\n                if (bindingSpec.type === 'callback') {\n                    bindingSpec.value = newValue;\n                }\n                else {\n                    throw new Error(`Binding key ${String(key)} is read-only`);\n                }\n            }\n            else {\n                throw new Error(`Key ${String(k)} is not defined in bindings`);\n            }\n            return true;\n        },\n    });\n\n    const createRawModule = (code) => new Function(`\n        ${code}\n        return exports\n    `)();\n    const createBindings = (rawModule) => ({\n        fs: { type: 'proxy', value: createFsModule(rawModule) },\n        metadata: { type: 'raw' },\n        initialize: { type: 'raw' },\n        dspLoop: { type: 'raw' },\n        io: { type: 'raw' },\n        commons: {\n            type: 'proxy',\n            value: createCommonsModule(rawModule, rawModule.metadata.audioSettings.bitDepth),\n        },\n    });\n    const createEngine = (code) => {\n        const rawModule = createRawModule(code);\n        return createModule(rawModule, createBindings(rawModule));\n    };\n    const createFsModule = (rawModule) => {\n        const fs = createModule(rawModule, {\n            onReadSoundFile: { type: 'callback', value: () => undefined },\n            onWriteSoundFile: { type: 'callback', value: () => undefined },\n            onOpenSoundReadStream: { type: 'callback', value: () => undefined },\n            onOpenSoundWriteStream: { type: 'callback', value: () => undefined },\n            onSoundStreamData: { type: 'callback', value: () => undefined },\n            onCloseSoundStream: { type: 'callback', value: () => undefined },\n            sendReadSoundFileResponse: {\n                type: 'proxy',\n                value: rawModule.x_fs_onReadSoundFileResponse,\n            },\n            sendWriteSoundFileResponse: {\n                type: 'proxy',\n                value: rawModule.x_fs_onWriteSoundFileResponse,\n            },\n            sendSoundStreamData: {\n                type: 'proxy',\n                value: rawModule.x_fs_onSoundStreamData,\n            },\n            closeSoundStream: {\n                type: 'proxy',\n                value: rawModule.x_fs_onCloseSoundStream,\n            },\n        });\n        rawModule.i_fs_openSoundWriteStream = (...args) => fs.onOpenSoundWriteStream(...args);\n        rawModule.i_fs_sendSoundStreamData = (...args) => fs.onSoundStreamData(...args);\n        rawModule.i_fs_openSoundReadStream = (...args) => fs.onOpenSoundReadStream(...args);\n        rawModule.i_fs_closeSoundStream = (...args) => fs.onCloseSoundStream(...args);\n        rawModule.i_fs_writeSoundFile = (...args) => fs.onWriteSoundFile(...args);\n        rawModule.i_fs_readSoundFile = (...args) => fs.onReadSoundFile(...args);\n        return fs;\n    };\n    const createCommonsModule = (rawModule, bitDepth) => {\n        const floatArrayType = getFloatArrayType(bitDepth);\n        return createModule(rawModule, {\n            getArray: { type: 'proxy', value: rawModule.commons_getArray },\n            setArray: {\n                type: 'proxy',\n                value: (arrayName, array) => rawModule.commons_setArray(arrayName, new floatArrayType(array)),\n            },\n        });\n    };\n\n    exports.createBindings = createBindings;\n    exports.createEngine = createEngine;\n    exports.createRawModule = createRawModule;\n\n    return exports;\n\n})({});\n;\n/*\n * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n *\n * This file is part of WebPd\n * (see https://github.com/sebpiq/WebPd).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst FS_CALLBACK_NAMES = [\n    'onReadSoundFile',\n    'onOpenSoundReadStream',\n    'onWriteSoundFile',\n    'onOpenSoundWriteStream',\n    'onSoundStreamData',\n    'onCloseSoundStream',\n];\nclass WasmWorkletProcessor extends AudioWorkletProcessor {\n    constructor() {\n        super();\n        this.port.onmessage = this.onMessage.bind(this);\n        this.settings = {\n            blockSize: null,\n            sampleRate,\n        };\n        this.dspConfigured = false;\n        this.engine = null;\n    }\n    process(inputs, outputs) {\n        const output = outputs[0];\n        const input = inputs[0];\n        if (!this.dspConfigured) {\n            if (!this.engine) {\n                return true;\n            }\n            this.settings.blockSize = output[0].length;\n            this.engine.initialize(this.settings.sampleRate, this.settings.blockSize);\n            this.dspConfigured = true;\n        }\n        this.engine.dspLoop(input, output);\n        return true;\n    }\n    onMessage(messageEvent) {\n        const message = messageEvent.data;\n        switch (message.type) {\n            case 'code:WASM':\n                this.setWasm(message.payload.wasmBuffer);\n                break;\n            case 'code:JS':\n                this.setJsCode(message.payload.jsCode);\n                break;\n            case 'io:messageReceiver':\n                this.engine.io.messageReceivers[message.payload.nodeId][message.payload.portletId](message.payload.message);\n                break;\n            case 'fs':\n                const returned = this.engine.fs[message.payload.functionName].apply(null, message.payload.arguments);\n                this.port.postMessage({\n                    type: 'fs',\n                    payload: {\n                        functionName: message.payload.functionName + '_return',\n                        operationId: message.payload.arguments[0],\n                        returned,\n                    },\n                });\n                break;\n            case 'destroy':\n                this.destroy();\n                break;\n            default:\n                new Error(`unknown message type ${message.type}`);\n        }\n    }\n    // TODO : control for channelCount of wasmModule\n    setWasm(wasmBuffer) {\n        return AssemblyScriptWasmBindings.createEngine(wasmBuffer).then((engine) => this.setEngine(engine));\n    }\n    setJsCode(code) {\n        const engine = JavaScriptBindings.createEngine(code);\n        this.setEngine(engine);\n    }\n    setEngine(engine) {\n        FS_CALLBACK_NAMES.forEach((functionName) => {\n            ;\n            engine.fs[functionName] = (...args) => {\n                // We don't use transferables, because that would imply reallocating each time new array in the engine.\n                this.port.postMessage({\n                    type: 'fs',\n                    payload: {\n                        functionName,\n                        arguments: args,\n                    },\n                });\n            };\n        });\n        this.engine = engine;\n        this.dspConfigured = false;\n    }\n    destroy() {\n        this.process = () => false;\n    }\n}\nregisterProcessor('webpd-node', WasmWorkletProcessor);\n"),fS=(e,n)=>{const t=e[n];if(t)return t;throw new Error('Node "'.concat(n,'" not found in graph'))},pS=(e,n)=>{const t=e[n];if(!t)throw new Error("node [".concat(n,"] is not implemented"));return{dependencies:[],...t}},hS=(e,n,t)=>{const r=mS(t);return{keys:[...r.keys,n],parents:[...r.parents,e]}},mS=e=>e||{keys:[],parents:[]},gS=()=>{throw new Error("This Proxy is read-only.")},yS=(e,n,t,r)=>{const a=r||{keys:[],parents:[]},s=yS.ensureValue(n,e,t,a);if(r){const n=r.parents[r.parents.length-1],t=r.keys[r.keys.length-1];t in n&&!("LiteralDefaultNull"in e)||(n[t]=s)}return"Literal"in e||"LiteralDefaultNull"in e?s:new Proxy(s,{get:(n,r)=>{const o=String(r);let i;if("Index"in e)i=e.Index(o,t,a);else{if(!("Interface"in e))throw new Error("no builder");if(!(o in e.Interface))throw new Error('Interface has no entry "'.concat(String(o),'"'));i=e.Interface[o]}return yS(i,o in s?s[o]:void 0,t,hS(s,o,a))},set:gS})};yS.ensureValue=(e,n,t,r,a)=>{if("Index"in n)return e||n.indexConstructor(t,mS(r));if("Interface"in n){const s=e||{};return Object.entries(n.Interface).forEach((e=>{let[n,o]=e;s[n]=yS.ensureValue(s[n],o,t,hS(s,n,r),hS(s,n,a))})),s}if("Literal"in n)return e||n.Literal(t,mS(r));if("LiteralDefaultNull"in n)return a?e||null:e||n.LiteralDefaultNull(t,mS(r));throw new Error("Invalid Assigner")},yS.Interface=e=>({Interface:e}),yS.Index=(e,n)=>({Index:e,indexConstructor:n||(()=>({}))}),yS.Literal=e=>({Literal:e}),yS.LiteralDefaultNull=e=>({LiteralDefaultNull:e});const bS=(e,n)=>new Proxy(e,{get:(e,t)=>{const r=String(t);if(!((e,n,t)=>{if(!e.hasOwnProperty(n)){if(["toJSON","Symbol(Symbol.toStringTag)","constructor","$typeof","$$typeof","@@__IMMUTABLE_ITERABLE__@@","@@__IMMUTABLE_RECORD__@@"].includes(n))return!0;throw new Error("namespace".concat(t?" <".concat(t.keys.join("."),">"):""," doesn't know key \"").concat(String(n),'"'))}return!1})(e,r,n))return e[r]},set:(e,n,t)=>{const r=vS(String(n));if(e.hasOwnProperty(r))throw new Error('Key "'.concat(String(r),'" is protected and cannot be overwritten.'));return e[r]=t,t}}),vS=e=>{const n=/\$(.*)/.exec(e);return n?n[1]:e},_S=e=>{const n=[];for(let t=0;t<e;t++)n.push(t);return n},SS=(e,n,t)=>OS({astType:"Var",name:n,type:e,value:void 0!==t?CS(t):void 0}),wS=(e,n,t)=>OS({astType:"ConstVar",name:n,type:e,value:CS(t)}),kS=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"void";return function(r){for(var a=arguments.length,s=new Array(a>1?a-1:0),o=1;o<a;o++)s[o-1]=arguments[o];return OS({astType:"Func",name:e,args:n,returnType:t,body:xS(r,...s)})}},IS=(e,n)=>OS({astType:"Class",name:e,members:n}),TS=e=>({astType:"Sequence",content:AS(ES(e,_S(e.length-1).map((()=>"\n"))))}),xS=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return OS({astType:"Sequence",content:AS(ES(e,t))})},AS=e=>{const n=e.flatMap((e=>"string"===typeof e?[e]:"number"===typeof e?[e.toString()]:null===e?[]:Array.isArray(e)?AS(ES(e,_S(e.length-1).map((()=>"\n")))):"object"===typeof e&&"Sequence"===e.astType?e.content:[e])),[t,r]=n.reduce(((e,n)=>{let[t,r]=e;return"string"===typeof n?[t,r+n]:r.length?[[...t,r,n],""]:[[...t,n],""]}),[[],""]);return r.length&&t.push(r),t},ES=(e,n)=>0===e.length?[]:e.slice(1).reduce(((e,t,r)=>e.concat([n[r],t])),[e[0]]),OS=e=>({...e}),CS=e=>"number"===typeof e?TS([e.toString()]):"string"===typeof e?TS([e]):e;var MS,FS;yS.Interface({nodes:yS.Index((e=>yS.Interface({signalOuts:yS.Index((n=>yS.Literal((()=>PS("N",e,"outs",n))))),messageSenders:yS.Index((n=>yS.Literal((()=>PS("N",e,"snds",n))))),messageReceivers:yS.Index((n=>yS.Literal((()=>PS("N",e,"rcvs",n))))),state:yS.LiteralDefaultNull((()=>PS("N",e,"state")))}))),nodeImplementations:yS.Index(((e,n)=>{let{nodeImplementations:t}=n;const r=pS(t,e),a=(r.flags?r.flags.alphaName:null)||e;return yS.Index((e=>yS.Literal((()=>PS("NT",a,e)))))})),globs:yS.Literal((()=>({iterFrame:"F",frame:"FRAME",blockSize:"BLOCK_SIZE",sampleRate:"SAMPLE_RATE",output:"OUTPUT",input:"INPUT",nullMessageReceiver:"SND_TO_NULL",nullSignal:"NULL_SIGNAL",emptyMessage:"EMPTY_MESSAGE"}))),globalCode:yS.Index((e=>yS.Index((n=>yS.Literal((()=>PS("G",e,n))))))),io:yS.Interface({messageReceivers:yS.Index((e=>yS.Index((n=>yS.Literal((()=>PS("IORCV",e,n))))))),messageSenders:yS.Index((e=>yS.Index((n=>yS.Literal((()=>PS("IOSND",e,n)))))))}),coldDspGroups:yS.Index((e=>yS.Literal((()=>PS("COLD",e)))))}),yS.Interface({graph:yS.Literal(((e,n)=>({fullTraversal:[],hotDspGroup:{traversal:[],outNodesIds:[]},coldDspGroups:bS({},n)}))),nodeImplementations:yS.Index(((e,n)=>{let{nodeImplementations:t}=n;return yS.Literal((()=>({nodeImplementation:pS(t,e),stateClass:null,core:null})))}),((e,n)=>bS({},n))),nodes:yS.Index(((e,n)=>{let{graph:t}=n;return yS.Literal((()=>({nodeType:fS(t,e).type,messageReceivers:{},messageSenders:{},signalOuts:{},signalIns:{},initialization:xS(MS||(MS=r([""]))),dsp:{loop:xS(FS||(FS=r([""]))),inlets:{}},state:null})))}),((e,n)=>bS({},n))),dependencies:yS.Literal((()=>({imports:[],exports:[],ast:TS([])}))),io:yS.Interface({messageReceivers:yS.Index((e=>yS.Literal(((e,n)=>bS({},n)))),((e,n)=>bS({},n))),messageSenders:yS.Index((e=>yS.Literal(((e,n)=>bS({},n)))),((e,n)=>bS({},n)))})});const PS=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.map(NS).join("_")},NS=e=>{if(!RS.exec(e))throw new Error('Invalid variable name for code generation "'.concat(e,'"'));return e},RS=/^[a-zA-Z0-9_]+$/;var LS,DS;const zS=()=>TS([IS("buf_SoundBuffer",[SS("FloatArray","data"),SS("Int","length"),SS("Int","writeCursor"),SS("Int","pullAvailableLength")]),kS("buf_clear",[SS("buf_SoundBuffer","buffer")],"void")(LS||(LS=r(["\n        buffer.data.fill(0)\n    "]))),kS("buf_create",[SS("Int","length")],"buf_SoundBuffer")(DS||(DS=r(["\n        return {\n            data: createFloatArray(length),\n            length: length,\n            writeCursor: 0,\n            pullAvailableLength: 0,\n        }\n    "])))]);var US,jS,BS,VS,GS,WS,$S,HS,KS,qS,YS,XS,JS,ZS,QS,ew,nw,tw,rw,aw,sw,ow,iw,lw,uw,cw,dw,fw,pw,hw,mw,gw,yw,bw;var vw,_w,Sw,ww,kw,Iw,Tw,xw,Aw,Ew,Ow;const Cw={codeGenerator:e=>{let{settings:{target:n}}=e;const t=[];return"assemblyscript"===n&&t.push("\n                type fs_OperationId = Int\n                type fs_OperationStatus = Int\n                type fs_OperationCallback = (id: fs_OperationId, status: fs_OperationStatus) => void\n                type fs_OperationSoundCallback = (id: fs_OperationId, status: fs_OperationStatus, sound: FloatArray[]) => void\n                type fs_Url = string\n            "),TS([...t,wS("Int","FS_OPERATION_SUCCESS",(0).toString()),wS("Int","FS_OPERATION_FAILURE",1..toString()),wS("Set<fs_OperationId>","_FS_OPERATIONS_IDS","new Set()"),wS("Map<fs_OperationId, fs_OperationCallback>","_FS_OPERATIONS_CALLBACKS","new Map()"),wS("Map<fs_OperationId, fs_OperationSoundCallback>","_FS_OPERATIONS_SOUND_CALLBACKS","new Map()"),SS("Int","_FS_OPERATION_COUNTER","1"),IS("fs_SoundInfo",[SS("Int","channelCount"),SS("Int","sampleRate"),SS("Int","bitDepth"),SS("string","encodingFormat"),SS("string","endianness"),SS("string","extraOptions")]),kS("fs_soundInfoToMessage",[SS("fs_SoundInfo","soundInfo")],"Message")(vw||(vw=r(["\n                ","\n                msg_writeFloatToken(info, 0, toFloat(soundInfo.channelCount))\n                msg_writeFloatToken(info, 1, toFloat(soundInfo.sampleRate))\n                msg_writeFloatToken(info, 2, toFloat(soundInfo.bitDepth))\n                msg_writeStringToken(info, 3, soundInfo.encodingFormat)\n                msg_writeStringToken(info, 4, soundInfo.endianness)\n                msg_writeStringToken(info, 5, soundInfo.extraOptions)\n                return info\n            "])),wS("Message","info","msg_create([\n                    MSG_FLOAT_TOKEN,\n                    MSG_FLOAT_TOKEN,\n                    MSG_FLOAT_TOKEN,\n                    MSG_STRING_TOKEN,\n                    soundInfo.encodingFormat.length,\n                    MSG_STRING_TOKEN,\n                    soundInfo.endianness.length,\n                    MSG_STRING_TOKEN,\n                    soundInfo.extraOptions.length\n                ])")),kS("_fs_assertOperationExists",[SS("fs_OperationId","id"),SS("string","operationName")],"void")(_w||(_w=r(["\n                if (!_FS_OPERATIONS_IDS.has(id)) {\n                    throw new Error(operationName + ' operation unknown : ' + id.toString())\n                }\n            "]))),kS("_fs_createOperationId",[],"fs_OperationId")(Sw||(Sw=r(["\n                ","\n                _FS_OPERATIONS_IDS.add(id)\n                return id\n            "])),wS("fs_OperationId","id","_FS_OPERATION_COUNTER++"))])},dependencies:[{codeGenerator:e=>{let{settings:{target:n}}=e;const t={msg_create:kS("msg_create",[SS("MessageTemplate","template")],"Message"),msg_writeStringToken:kS("msg_writeStringToken",[SS("Message","message"),SS("Int","tokenIndex"),SS("string","value")],"void"),msg_writeFloatToken:kS("msg_writeFloatToken",[SS("Message","message"),SS("Int","tokenIndex"),SS("MessageFloatToken","value")],"void"),msg_readStringToken:kS("msg_readStringToken",[SS("Message","message"),SS("Int","tokenIndex")],"string"),msg_readFloatToken:kS("msg_readFloatToken",[SS("Message","message"),SS("Int","tokenIndex")],"MessageFloatToken"),msg_getLength:kS("msg_getLength",[SS("Message","message")],"Int"),msg_getTokenType:kS("msg_getTokenType",[SS("Message","message"),SS("Int","tokenIndex")],"Int"),msg_isStringToken:kS("msg_isStringToken",[SS("Message","message"),SS("Int","tokenIndex")],"boolean"),msg_isFloatToken:kS("msg_isFloatToken",[SS("Message","message"),SS("Int","tokenIndex")],"boolean"),msg_isMatching:kS("msg_isMatching",[SS("Message","message"),SS("Array<MessageHeaderEntry>","tokenTypes")],"boolean"),msg_floats:kS("msg_floats",[SS("Array<Float>","values")],"Message"),msg_strings:kS("msg_strings",[SS("Array<string>","values")],"Message"),msg_display:kS("msg_display",[SS("Message","message")],"string")};if("assemblyscript"===n)return TS(["\n                type MessageFloatToken = Float\n                type MessageCharToken = Int\n\n                type MessageTemplate = Array<Int>\n                type MessageHeaderEntry = Int\n                type MessageHeader = Int32Array\n\n                type MessageHandler = (m: Message) => void\n                ",wS("MessageHeaderEntry","MSG_FLOAT_TOKEN","0"),wS("MessageHeaderEntry","MSG_STRING_TOKEN","1"),kS("x_msg_create",[SS("Int32Array","templateTypedArray")],"Message")(US||(US=r(["\n                    const template: MessageTemplate = new Array<Int>(templateTypedArray.length)\n                    for (let i: Int = 0; i < templateTypedArray.length; i++) {\n                        template[i] = templateTypedArray[i]\n                    }\n                    return msg_create(template)\n                "]))),kS("x_msg_getTokenTypes",[SS("Message","message")],"MessageHeader")(jS||(jS=r(["\n                    return message.tokenTypes\n                "]))),kS("x_msg_createTemplate",[SS("i32","length")],"Int32Array")(BS||(BS=r(["\n                    return new Int32Array(length)\n                "]))),t.msg_create(VS||(VS=r(['\n                    let i: Int = 0\n                    let byteCount: Int = 0\n                    let tokenTypes: Array<MessageHeaderEntry> = []\n                    let tokenPositions: Array<MessageHeaderEntry> = []\n\n                    i = 0\n                    while (i < template.length) {\n                        switch(template[i]) {\n                            case MSG_FLOAT_TOKEN:\n                                byteCount += sizeof<MessageFloatToken>()\n                                tokenTypes.push(MSG_FLOAT_TOKEN)\n                                tokenPositions.push(byteCount)\n                                i += 1\n                                break\n                            case MSG_STRING_TOKEN:\n                                byteCount += sizeof<MessageCharToken>() * template[i + 1]\n                                tokenTypes.push(MSG_STRING_TOKEN)\n                                tokenPositions.push(byteCount)\n                                i += 2\n                                break\n                            default:\n                                throw new Error("unknown token type : " + template[i].toString())\n                        }\n                    }\n\n                    const tokenCount = tokenTypes.length\n                    const headerByteCount = _msg_computeHeaderLength(tokenCount) * sizeof<MessageHeaderEntry>()\n                    byteCount += headerByteCount\n\n                    const buffer = new ArrayBuffer(byteCount)\n                    const dataView = new DataView(buffer)\n                    let writePosition: Int = 0\n                    \n                    dataView.setInt32(writePosition, tokenCount)\n                    writePosition += sizeof<MessageHeaderEntry>()\n\n                    for (i = 0; i < tokenCount; i++) {\n                        dataView.setInt32(writePosition, tokenTypes[i])\n                        writePosition += sizeof<MessageHeaderEntry>()\n                    }\n\n                    dataView.setInt32(writePosition, headerByteCount)\n                    writePosition += sizeof<MessageHeaderEntry>()\n                    for (i = 0; i < tokenCount; i++) {\n                        dataView.setInt32(writePosition, headerByteCount + tokenPositions[i])\n                        writePosition += sizeof<MessageHeaderEntry>()\n                    }\n\n                    const header = _msg_unpackHeader(dataView, tokenCount)\n                    return {\n                        dataView,\n                        tokenCount,\n                        header,\n                        tokenTypes: _msg_unpackTokenTypes(header),\n                        tokenPositions: _msg_unpackTokenPositions(header),\n                    }\n                ']))),t.msg_writeStringToken(GS||(GS=r(["\n                    const startPosition = message.tokenPositions[tokenIndex]\n                    const endPosition = message.tokenPositions[tokenIndex + 1]\n                    const expectedStringLength: Int = (endPosition - startPosition) / sizeof<MessageCharToken>()\n                    if (value.length !== expectedStringLength) {\n                        throw new Error('Invalid string size, specified ' + expectedStringLength.toString() + ', received ' + value.length.toString())\n                    }\n\n                    for (let i = 0; i < value.length; i++) {\n                        message.dataView.setInt32(\n                            startPosition + i * sizeof<MessageCharToken>(), \n                            value.codePointAt(i)\n                        )\n                    }\n                "]))),t.msg_writeFloatToken(WS||(WS=r(["\n                    setFloatDataView(message.dataView, message.tokenPositions[tokenIndex], value)\n                "]))),t.msg_readStringToken($S||($S=r(["\n                    const startPosition = message.tokenPositions[tokenIndex]\n                    const endPosition = message.tokenPositions[tokenIndex + 1]\n                    const stringLength: Int = (endPosition - startPosition) / sizeof<MessageCharToken>()\n                    let value: string = ''\n                    for (let i = 0; i < stringLength; i++) {\n                        value += String.fromCodePoint(message.dataView.getInt32(startPosition + sizeof<MessageCharToken>() * i))\n                    }\n                    return value\n                "]))),t.msg_readFloatToken(HS||(HS=r(["\n                    return getFloatDataView(message.dataView, message.tokenPositions[tokenIndex])\n                "]))),t.msg_getLength(KS||(KS=r(["\n                    return message.tokenTypes.length\n                "]))),t.msg_getTokenType(qS||(qS=r(["\n                    return message.tokenTypes[tokenIndex]\n                "]))),t.msg_isStringToken(YS||(YS=r(["\n                    return msg_getTokenType(message, tokenIndex) === MSG_STRING_TOKEN\n                "]))),t.msg_isFloatToken(XS||(XS=r(["\n                    return msg_getTokenType(message, tokenIndex) === MSG_FLOAT_TOKEN\n                "]))),t.msg_isMatching(JS||(JS=r(["\n                    if (message.tokenTypes.length !== tokenTypes.length) {\n                        return false\n                    }\n                    for (let i: Int = 0; i < tokenTypes.length; i++) {\n                        if (message.tokenTypes[i] !== tokenTypes[i]) {\n                            return false\n                        }\n                    }\n                    return true\n                "]))),t.msg_floats(ZS||(ZS=r(["\n                    const message: Message = msg_create(values.map<MessageHeaderEntry>(v => MSG_FLOAT_TOKEN))\n                    for (let i: Int = 0; i < values.length; i++) {\n                        msg_writeFloatToken(message, i, values[i])\n                    }\n                    return message\n                "]))),t.msg_strings(QS||(QS=r(["\n                    const template: MessageTemplate = []\n                    for (let i: Int = 0; i < values.length; i++) {\n                        template.push(MSG_STRING_TOKEN)\n                        template.push(values[i].length)\n                    }\n                    const message: Message = msg_create(template)\n                    for (let i: Int = 0; i < values.length; i++) {\n                        msg_writeStringToken(message, i, values[i])\n                    }\n                    return message\n                "]))),t.msg_display(ew||(ew=r(["\n                    let displayArray: Array<string> = []\n                    for (let i: Int = 0; i < msg_getLength(message); i++) {\n                        if (msg_isFloatToken(message, i)) {\n                            displayArray.push(msg_readFloatToken(message, i).toString())\n                        } else {\n                            displayArray.push('\"' + msg_readStringToken(message, i) + '\"')\n                        }\n                    }\n                    return '[' + displayArray.join(', ') + ']'\n                "]))),IS("Message",[SS("DataView","dataView"),SS("MessageHeader","header"),SS("MessageHeaderEntry","tokenCount"),SS("MessageHeader","tokenTypes"),SS("MessageHeader","tokenPositions")]),kS("_msg_computeHeaderLength",[SS("Int","tokenCount")],"Int")(nw||(nw=r(["\n                    return 1 + tokenCount * 2 + 1\n                "]))),kS("_msg_unpackTokenCount",[SS("DataView","messageDataView")],"MessageHeaderEntry")(tw||(tw=r(["\n                    return messageDataView.getInt32(0)\n                "]))),kS("_msg_unpackHeader",[SS("DataView","messageDataView"),SS("MessageHeaderEntry","tokenCount")],"MessageHeader")(rw||(rw=r(["\n                    const headerLength = _msg_computeHeaderLength(tokenCount)\n                    // TODO : why is this `wrap` not working ?\n                    // return Int32Array.wrap(messageDataView.buffer, 0, headerLength)\n                    const messageHeader = new Int32Array(headerLength)\n                    for (let i = 0; i < headerLength; i++) {\n                        messageHeader[i] = messageDataView.getInt32(sizeof<MessageHeaderEntry>() * i)\n                    }\n                    return messageHeader\n                "],["\n                    const headerLength = _msg_computeHeaderLength(tokenCount)\n                    // TODO : why is this \\`wrap\\` not working ?\n                    // return Int32Array.wrap(messageDataView.buffer, 0, headerLength)\n                    const messageHeader = new Int32Array(headerLength)\n                    for (let i = 0; i < headerLength; i++) {\n                        messageHeader[i] = messageDataView.getInt32(sizeof<MessageHeaderEntry>() * i)\n                    }\n                    return messageHeader\n                "]))),kS("_msg_unpackTokenTypes",[SS("MessageHeader","header")],"MessageHeader")(aw||(aw=r(["\n                    return header.slice(1, 1 + header[0])\n                "]))),kS("_msg_unpackTokenPositions",[SS("MessageHeader","header")],"MessageHeader")(sw||(sw=r(["\n                    return header.slice(1 + header[0])\n                "])))]);if("javascript"===n)return TS([wS("string","MSG_FLOAT_TOKEN",'"number"'),wS("string","MSG_STRING_TOKEN",'"string"'),t.msg_create(ow||(ow=r(["\n                    const m = []\n                    let i = 0\n                    while (i < template.length) {\n                        if (template[i] === MSG_STRING_TOKEN) {\n                            m.push('')\n                            i += 2\n                        } else if (template[i] === MSG_FLOAT_TOKEN) {\n                            m.push(0)\n                            i += 1\n                        }\n                    }\n                    return m\n                "]))),t.msg_getLength(iw||(iw=r(["\n                    return message.length\n                "]))),t.msg_getTokenType(lw||(lw=r(["\n                    return typeof message[tokenIndex]\n                "]))),t.msg_isStringToken(uw||(uw=r(["\n                    return msg_getTokenType(message, tokenIndex) === 'string'\n                "]))),t.msg_isFloatToken(cw||(cw=r(["\n                    return msg_getTokenType(message, tokenIndex) === 'number'\n                "]))),t.msg_isMatching(dw||(dw=r(["\n                    return (message.length === tokenTypes.length) \n                        && message.every((v, i) => msg_getTokenType(message, i) === tokenTypes[i])\n                "]))),t.msg_writeFloatToken(fw||(fw=r(["\n                    message[tokenIndex] = value\n                "]))),t.msg_writeStringToken(pw||(pw=r(["\n                    message[tokenIndex] = value\n                "]))),t.msg_readFloatToken(hw||(hw=r(["\n                    return message[tokenIndex]\n                "]))),t.msg_readStringToken(mw||(mw=r(["\n                    return message[tokenIndex]\n                "]))),t.msg_floats(gw||(gw=r(["\n                    return values\n                "]))),t.msg_strings(yw||(yw=r(["\n                    return values\n                "]))),t.msg_display(bw||(bw=r(["\n                    return '[' + message\n                        .map(t => typeof t === 'string' ? '\"' + t + '\"' : t.toString())\n                        .join(', ') + ']'\n                "])))]);throw new Error("Unexpected target: ".concat(n))},exports:[{name:"x_msg_create",targets:["assemblyscript"]},{name:"x_msg_getTokenTypes",targets:["assemblyscript"]},{name:"x_msg_createTemplate",targets:["assemblyscript"]},{name:"msg_writeStringToken",targets:["assemblyscript"]},{name:"msg_writeFloatToken",targets:["assemblyscript"]},{name:"msg_readStringToken",targets:["assemblyscript"]},{name:"msg_readFloatToken",targets:["assemblyscript"]},{name:"MSG_FLOAT_TOKEN",targets:["assemblyscript"]},{name:"MSG_STRING_TOKEN",targets:["assemblyscript"]}]}]};kS("i_fs_readSoundFile",[SS("fs_OperationId","id"),SS("fs_Url","url"),SS("Message","info")],"void")(ww||(ww=r([""]))),kS("i_fs_writeSoundFile",[SS("fs_OperationId","id"),SS("FloatArray[]","sound"),SS("fs_Url","url"),SS("Message","info")],"void")(kw||(kw=r([""])));kS("i_fs_closeSoundStream",[SS("fs_OperationId","id"),SS("fs_OperationStatus","status")],"void")(xw||(xw=r([""])));var Mw;kS("i_fs_openSoundReadStream",[SS("fs_OperationId","id"),SS("fs_Url","url"),SS("Message","info")],"void")(Aw||(Aw=r([""]))),kS("i_fs_openSoundWriteStream",[SS("fs_OperationId","id"),SS("fs_Url","url"),SS("Message","info")],"void")(Ew||(Ew=r([""]))),kS("i_fs_sendSoundStreamData",[SS("fs_OperationId","id"),SS("FloatArray[]","block")],"void")(Ow||(Ow=r([""]))),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"void";return function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return OS({astType:"Func",name:null,args:e,returnType:n,body:xS(t,...a)})}}([SS("Message","m")],"void")(Mw||(Mw=r([""])));const Fw=e=>Vs((async n=>{const t="".concat(e,"/").concat(n.endsWith(".pd")?n:"".concat(n,".pd")),r=await fetch(t);if(!r.ok)throw new Gs(n);return await r.text()}));const Pw={},Nw={};class Rw{constructor(e,n){this.url=e,this.sound=n,this.frameCount=n[0].length,this.readPosition=0}}const Lw=async e=>{if(Pw[e])return Pw[e];const n=await(async e=>{let n;try{n=await oS(e,{retries:3})}catch(t){throw new uS(n.status,t.toString())}if(!n.ok){const e=await n.text();throw new uS(n.status,e)}return n.arrayBuffer()})(e);return{type:"binary",data:n}},Dw=async(e,n)=>{let t=Pw[e]||await Lw(e);switch(t.type){case"binary":return(e=>{const n=[];for(let t=0;t<e.numberOfChannels;t++)n.push(e.getChannelData(t));return n})(await n.decodeAudioData(t.data));case"sound":return t.data.map((e=>e.slice()))}},zw=e=>Nw[e],Uw=e=>{console.log("KILL STREAM",e),delete Nw[e]},jw=(e,n)=>{const t=e.sound.map((t=>t.slice(e.readPosition,e.readPosition+n)));return e.readPosition+=n,t},Bw=(e,n)=>{e.sound=e.sound.map(((e,t)=>{const r=new Float32Array(e.length+n[t].length);return r.set(e),r.set(n[t],e.length),r})),e.frameCount=e.sound[0].length,Pw[e.url].data=e.sound};var Vw=async(e,n)=>{Pw[n]={type:"sound",data:e}},Gw=Dw,Ww=async(e,n,t,r)=>{const a=await Dw(n,r);return Nw[e]=new Rw(n,iS(a,t)),Nw[e]},$w=async(e,n,t)=>{const r=[];for(let a=0;a<t;a++)r.push(new Float32Array(0));return Nw[e]=new Rw(n,r),Pw[n]={type:"sound",data:r},Nw[e]};const Hw=441e3;var Kw=async(e,n,t)=>{if("onOpenSoundReadStream"===n.functionName){const[a,s,[o]]=n.arguments;try{const n=lS(t.rootUrl,s);await Ww(a,n,o,e.context)}catch(r){return console.error(r),void e.port.postMessage({type:"fs",payload:{functionName:"closeSoundStream",arguments:[a,1]}})}qw(e,a,0)}else if("sendSoundStreamData_return"===n.functionName){if(!zw(n.operationId))throw new Error("unknown stream ".concat(n.operationId));qw(e,n.operationId,n.returned)}else if("closeSoundStream_return"===n.functionName){zw(n.operationId)&&Uw(n.operationId)}};const qw=(e,n,t)=>{const r=e.context.sampleRate,a=Math.max(t-220500,10)/r,s=Hw-(t-a*r);setTimeout((()=>{const t=zw(n);if(t)if(t.readPosition<t.frameCount){const r=jw(t,s);e.port.postMessage({type:"fs",payload:{functionName:"sendSoundStreamData",arguments:[n,r]}},r.map((e=>e.buffer)))}else e.port.postMessage({type:"fs",payload:{functionName:"closeSoundStream",arguments:[n,0]}});else console.log("stream ".concat(n," was maybe closed"))}),1e3*a)};var Yw=async(e,n,t)=>{if("onOpenSoundWriteStream"===n.functionName){const[e,r,[a]]=n.arguments,s=lS(t.rootUrl,r);await $w(e,s,a)}else if("onSoundStreamData"===n.functionName){const[e,t]=n.arguments,r=zw(e);if(!r)throw new Error("unknown stream ".concat(e));Bw(r,t)}else if("closeSoundStream_return"===n.functionName){zw(n.operationId)&&Uw(n.operationId)}},Xw=async(e,n,t)=>{const r=n.data,{payload:a}=r;if("fs"!==r.type)throw new Error("Unknown message type from node ".concat(r.type));if("onReadSoundFile"===a.functionName||"sendReadSoundFileResponse_return"===a.functionName)(async(e,n,t)=>{if("onReadSoundFile"===n.functionName){const[a,s,[o]]=n.arguments,i=lS(t.rootUrl,s);let l=0,u=null;try{u=await Gw(i,e.context)}catch(r){l=1,console.error(r)}u&&(u=iS(u,o)),e.port.postMessage({type:"fs",payload:{functionName:"sendReadSoundFileResponse",arguments:[a,l,u]}},u.map((e=>e.buffer)))}else n.functionName})(e,a,t);else if("onOpenSoundReadStream"===a.functionName||"sendSoundStreamData_return"===a.functionName)Kw(e,a,t);else if("onWriteSoundFile"===a.functionName||"sendWriteSoundFileResponse_return"===a.functionName)(async(e,n,t)=>{if("onWriteSoundFile"===n.functionName){const[r,a,s,[o]]=n.arguments,i=iS(a,o),l=lS(t.rootUrl,s);await Vw(i,l);let u=0;e.port.postMessage({type:"fs",payload:{functionName:"sendWriteSoundFileResponse",arguments:[r,u]}})}else n.functionName})(e,a,t);else if("onOpenSoundWriteStream"===a.functionName||"onSoundStreamData"===a.functionName)Yw(0,a,t);else if("closeSoundStream_return"===a.functionName)Yw(0,a,t),Kw(e,a,t);else{if("onCloseSoundStream"!==a.functionName)throw new Error("Unknown callback ".concat(a.functionName));(async(e,n,t)=>{"onCloseSoundStream"===n.functionName&&Uw(n.arguments[0])})(0,a)}};const Jw=e=>Zw(e)?new URL(".",e).href:new URL(".",new URL(e,document.URL).href).href,Zw=e=>{try{if(new URL(e).origin!==new URL(document.URL,document.baseURI).origin)return!0}catch(ye){new URL(e,document.baseURI)}return!1},Qw=pa("shared/clean"),ek=0,nk=1,tk=2,rk=3,ak={artefacts:eS()},sk={buildStatus:ek,step:null},ok=va({name:"buildOutput",initialState:sk,reducers:{startBuild:e=>{e.buildStatus=nk},buildSuccess:(e,n)=>{ak.artefacts=n.payload.artefacts,e.buildStatus=tk},startStep:(e,n)=>{e.step=n.payload},stepComplete:(e,n)=>{ak.artefacts=n.payload.artefacts,1===n.payload.status&&(e.buildStatus=rk)}},extraReducers(e){const n=()=>(ak.artefacts=eS(),sk);e.addCase(Qw,n),e.addCase(ss.actions.setFormat,n),e.addCase(ts.actions.setLocalFile,n),e.addCase(ts.actions.fetchUrlSuccess,n)}}),ik={warnings:null,errors:null},lk=va({name:"console",initialState:ik,reducers:{setState:(e,n)=>n.payload},extraReducers(e){e.addCase(ok.actions.startBuild,(()=>ik)),e.addCase(ok.actions.stepComplete,((e,n)=>{n.payload.warnings&&(e.warnings=[...e.warnings||[],...n.payload.warnings],0===e.warnings.length&&(e.warnings=null)),n.payload.errors&&(e.errors=[...e.errors||[],...n.payload.errors])})),e.addCase(ts.actions.setUrl,(()=>ik)),e.addCase(ts.actions.setLocalFile,(()=>ik)),e.addCase(ts.actions.clear,(()=>ik)),e.addCase(ss.actions.setFormat,(()=>ik)),e.addCase(ts.actions.fetchUrlError,((e,n)=>{e.errors=[n.payload]}))}}),uk=va({name:"app",initialState:{isInitialized:!1,willBuildOnLoad:!1,debug:!1},reducers:{setWillBuildOnLoad:(e,n)=>{e.willBuildOnLoad=n.payload},initializationDone:e=>{e.isInitialized=!0},setDebug:(e,n)=>{e.debug=n.payload},pointerUp:()=>{}},extraReducers:e=>{e.addCase(ok.actions.buildSuccess,(e=>{e.willBuildOnLoad=!0}))}});var ck=t(457),dk="NOT_FOUND";var fk=function(e,n){return e===n};function pk(e,n){var t="object"===typeof n?n:{equalityCheck:n},r=t.equalityCheck,a=void 0===r?fk:r,s=t.maxSize,o=void 0===s?1:s,i=t.resultEqualityCheck,l=function(e){return function(n,t){if(null===n||null===t||n.length!==t.length)return!1;for(var r=n.length,a=0;a<r;a++)if(!e(n[a],t[a]))return!1;return!0}}(a),u=1===o?function(e){var n;return{get:function(t){return n&&e(n.key,t)?n.value:dk},put:function(e,t){n={key:e,value:t}},getEntries:function(){return n?[n]:[]},clear:function(){n=void 0}}}(l):function(e,n){var t=[];function r(e){var r=t.findIndex((function(t){return n(e,t.key)}));if(r>-1){var a=t[r];return r>0&&(t.splice(r,1),t.unshift(a)),a.value}return dk}return{get:r,put:function(n,a){r(n)===dk&&(t.unshift({key:n,value:a}),t.length>e&&t.pop())},getEntries:function(){return t},clear:function(){t=[]}}}(o,l);function c(){var n=u.get(arguments);if(n===dk){if(n=e.apply(null,arguments),i){var t=u.getEntries().find((function(e){return i(e.value,n)}));t&&(n=t.value)}u.put(arguments,n)}return n}return c.clearCache=function(){return u.clear()},c}function hk(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var s,o=0,i={memoizeOptions:void 0},l=r.pop();if("object"===typeof l&&(i=l,l=r.pop()),"function"!==typeof l)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var u=i.memoizeOptions,c=void 0===u?t:u,d=Array.isArray(c)?c:[c],f=function(e){var n=Array.isArray(e[0])?e[0]:e;if(!n.every((function(e){return"function"===typeof e}))){var t=n.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+t+"]")}return n}(r),p=e.apply(void 0,[function(){return o++,l.apply(null,arguments)}].concat(d)),h=e((function(){for(var e=[],n=f.length,t=0;t<n;t++)e.push(f[t].apply(null,arguments));return s=p.apply(null,e)}));return Object.assign(h,{resultFunc:l,memoizedResultFunc:p,dependencies:f,lastResult:function(){return s},recomputations:function(){return o},resetRecomputations:function(){return o=0}}),h}}var mk=hk(pk);const gk=e=>e.buildInput.url,yk=e=>e.buildInput.filepath,bk=e=>e.buildInput.arrayBuffer,vk=mk(gk,yk,((e,n)=>{let t=e||n;return t?Dp(t)||"pd":null})),_k=mk(vk,bk,((e,n)=>null===e||null===n?null:((e,n,t)=>{switch(t){case"pd":return{...e,pd:$s(n)};case"pdJson":return{...e,pdJson:JSON.parse($s(n))};case"dspGraph":return{...e,dspGraph:JSON.parse($s(n))};case"javascript":return{...e,javascript:$s(n)};case"assemblyscript":return{...e,assemblyscript:$s(n)};case"wasm":return{...e,wasm:n};case"wav":return{...e,wav:new Uint8Array(n)};default:throw new Error("Unexpected format for preloading ".concat(t))}})(eS(),n,e))),Sk=e=>e.buildOutput.format,wk=e=>e.buildOutput.codeTarget,kk=e=>e.buildOutput.previewDurationSeconds,Ik=mk(vk,(e=>{const n=(e=>new Set(jp(Lp,[]).filter((n=>n.includes(e))).map((n=>n.slice(n.indexOf(e)+1))).flat()))(e=e||"pd");return["patchPlayer",...rs.filter((e=>n.has(e)))]}));var Tk=function(e){return"@@redux-saga/"+e},xk=Tk("CANCEL_PROMISE"),Ak=Tk("CHANNEL_END"),Ek=Tk("IO"),Ok=Tk("MATCH"),Ck=Tk("MULTICAST"),Mk=Tk("SAGA_ACTION"),Fk=Tk("SELF_CANCELLATION"),Pk=Tk("TASK"),Nk=Tk("TASK_CANCEL"),Rk=Tk("TERMINATE"),Lk=Tk("LOCATION"),Dk=t(462);var zk=function(e){return null===e||void 0===e},Uk=function(e){return null!==e&&void 0!==e},jk=function(e){return"function"===typeof e},Bk=function(e){return"string"===typeof e},Vk=Array.isArray,Gk=function(e){return e&&jk(e.then)},Wk=function(e){return e&&jk(e.next)&&jk(e.throw)},$k=function e(n){return n&&(Bk(n)||qk(n)||jk(n)||Vk(n)&&n.every(e))},Hk=function(e){return e&&jk(e.take)&&jk(e.close)},Kk=function(e){return jk(e)&&e.hasOwnProperty("toString")},qk=function(e){return Boolean(e)&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype},Yk=function(e){return Hk(e)&&e[Ck]};const Xk=function(e,n){var t;void 0===n&&(n=!0);var r=new Promise((function(r){t=setTimeout(r,Math.min(2147483647,e),n)}));return r[xk]=function(){clearTimeout(t)},r};var Jk=function(e){return function(){return e}},Zk=Jk(!0),Qk=function(){};var eI=function(e){return e};"function"===typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var nI=function(e,n){(0,Dk.Z)(e,n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(n).forEach((function(t){e[t]=n[t]}))};function tI(e,n){var t=e.indexOf(n);t>=0&&e.splice(t,1)}var rI=function(e){throw e},aI=function(e){return{value:e,done:!0}};function sI(e,n,t){void 0===n&&(n=rI),void 0===t&&(t="iterator");var r={meta:{name:t},next:e,throw:n,return:aI,isSagaIterator:!0};return"undefined"!==typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function oI(e,n){var t=n.sagaStack;console.error(e),console.error(t)}var iI=function(e){return Array.apply(null,new Array(e))},lI=function(e){return function(n){return e(Object.defineProperty(n,Mk,{value:!0}))}},uI=function(e){return e===Rk},cI=function(e){return e===Nk},dI=function(e){return uI(e)||cI(e)};function fI(e,n){var t=Object.keys(e),r=t.length;var a,s=0,o=Vk(e)?iI(r):{},i={};return t.forEach((function(e){var t=function(t,i){a||(i||dI(t)?(n.cancel(),n(t,i)):(o[e]=t,++s===r&&(a=!0,n(o))))};t.cancel=Qk,i[e]=t})),n.cancel=function(){a||(a=!0,t.forEach((function(e){return i[e].cancel()})))},i}function pI(e){return{name:e.name||"anonymous",location:hI(e)}}function hI(e){return e[Lk]}function mI(e,n){void 0===e&&(e=10);var t=new Array(e),r=0,a=0,s=0,o=function(n){t[a]=n,a=(a+1)%e,r++},i=function(){if(0!=r){var n=t[s];return t[s]=null,r--,s=(s+1)%e,n}},l=function(){for(var e=[];r;)e.push(i());return e};return{isEmpty:function(){return 0==r},put:function(i){var u;if(r<e)o(i);else switch(n){case 1:throw new Error("Channel's Buffer overflow!");case 3:t[a]=i,s=a=(a+1)%e;break;case 4:u=2*e,t=l(),r=t.length,a=t.length,s=0,t.length=u,e=u,o(i)}},take:i,flush:l}}var gI=function(e){return mI(e,4)},yI="TAKE",bI="PUT",vI="ALL",_I="RACE",SI="CALL",wI="CPS",kI="FORK",II="JOIN",TI="CANCEL",xI="SELECT",AI="ACTION_CHANNEL",EI="CANCELLED",OI="FLUSH",CI="GET_CONTEXT",MI="SET_CONTEXT",FI=function(e,n){var t;return(t={})[Ek]=!0,t.combinator=!1,t.type=e,t.payload=n,t};function PI(e,n){return void 0===e&&(e="*"),$k(e)?(Uk(n)&&console.warn("take(pattern) takes one argument but two were provided. Consider passing an array for listening to several action types"),FI(yI,{pattern:e})):Yk(e)&&Uk(n)&&$k(n)?FI(yI,{channel:e,pattern:n}):Hk(e)?(Uk(n)&&console.warn("take(channel) takes one argument but two were provided. Second argument is ignored."),FI(yI,{channel:e})):void 0}function NI(e,n){return zk(n)&&(n=e,e=void 0),FI(bI,{channel:e,action:n})}function RI(e,n){var t,r=null;return jk(e)?t=e:(Vk(e)?(r=e[0],t=e[1]):(r=e.context,t=e.fn),r&&Bk(t)&&jk(r[t])&&(t=r[t])),{context:r,fn:t,args:n}}function LI(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return FI(SI,RI(e,t))}function DI(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return FI(kI,RI(e,t))}function zI(e){void 0===e&&(e=eI);for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return FI(xI,{selector:e,args:t})}var UI=LI.bind(null,Xk);function jI(){var e={};return e.promise=new Promise((function(n,t){e.resolve=n,e.reject=t})),e}const BI=jI;var VI=[],GI=0;function WI(e){try{KI(),e()}finally{qI()}}function $I(e){VI.push(e),GI||(KI(),YI())}function HI(e){try{return KI(),e()}finally{YI()}}function KI(){GI++}function qI(){GI--}function YI(){var e;for(qI();!GI&&void 0!==(e=VI.shift());)WI(e)}var XI=function(e){return function(n){return e.some((function(e){return nT(e)(n)}))}},JI=function(e){return function(n){return e(n)}},ZI=function(e){return function(n){return n.type===String(e)}},QI=function(e){return function(n){return n.type===e}},eT=function(){return Zk};function nT(e){var n="*"===e?eT:Bk(e)?ZI:Vk(e)?XI:Kk(e)?ZI:jk(e)?JI:qk(e)?QI:null;if(null===n)throw new Error("invalid pattern: "+e);return n(e)}var tT={type:Ak},rT=function(e){return e&&e.type===Ak};function aT(e){void 0===e&&(e=gI());var n=!1,t=[];return{take:function(r){n&&e.isEmpty()?r(tT):e.isEmpty()?(t.push(r),r.cancel=function(){tI(t,r)}):r(e.take())},put:function(r){if(!n){if(0===t.length)return e.put(r);t.shift()(r)}},flush:function(t){n&&e.isEmpty()?t(tT):t(e.flush())},close:function(){if(!n){n=!0;var e=t;t=[];for(var r=0,a=e.length;r<a;r++){(0,e[r])(tT)}}}}}function sT(){var e=function(){var e,n=!1,t=[],r=t,a=function(){r===t&&(r=t.slice())},s=function(){n=!0;var e=t=r;r=[],e.forEach((function(e){e(tT)}))};return(e={})[Ck]=!0,e.put=function(e){if(!n)if(rT(e))s();else for(var a=t=r,o=0,i=a.length;o<i;o++){var l=a[o];l[Ok](e)&&(l.cancel(),l(e))}},e.take=function(e,t){void 0===t&&(t=eT),n?e(tT):(e[Ok]=t,a(),r.push(e),e.cancel=function(e){var n=!1;return function(){n||(n=!0,e())}}((function(){a(),tI(r,e)})))},e.close=s,e}(),n=e.put;return e.put=function(e){e[Mk]?n(e):$I((function(){n(e)}))},e}var oT=0,iT=1,lT=2,uT=3;function cT(e,n){var t=e[xk];jk(t)&&(n.cancel=t),e.then(n,(function(e){n(e,!0)}))}var dT,fT=0,pT=function(){return++fT};function hT(e){e.isRunning()&&e.cancel()}var mT=((dT={})[yI]=function(e,n,t){var r=n.channel,a=void 0===r?e.channel:r,s=n.pattern,o=n.maybe,i=function(e){e instanceof Error?t(e,!0):!rT(e)||o?t(e):t(Rk)};try{a.take(i,Uk(s)?nT(s):null)}catch(l){return void t(l,!0)}t.cancel=i.cancel},dT[bI]=function(e,n,t){var r=n.channel,a=n.action,s=n.resolve;$I((function(){var n;try{n=(r?r.put:e.dispatch)(a)}catch(o){return void t(o,!0)}s&&Gk(n)?cT(n,t):t(n)}))},dT[vI]=function(e,n,t,r){var a=r.digestEffect,s=fT,o=Object.keys(n);if(0!==o.length){var i=fI(n,t);o.forEach((function(e){a(n[e],s,i[e],e)}))}else t(Vk(n)?[]:{})},dT[_I]=function(e,n,t,r){var a=r.digestEffect,s=fT,o=Object.keys(n),i=Vk(n)?iI(o.length):{},l={},u=!1;o.forEach((function(e){var n=function(n,r){u||(r||dI(n)?(t.cancel(),t(n,r)):(t.cancel(),u=!0,i[e]=n,t(i)))};n.cancel=Qk,l[e]=n})),t.cancel=function(){u||(u=!0,o.forEach((function(e){return l[e].cancel()})))},o.forEach((function(e){u||a(n[e],s,l[e],e)}))},dT[SI]=function(e,n,t,r){var a=n.context,s=n.fn,o=n.args,i=r.task;try{var l=s.apply(a,o);if(Gk(l))return void cT(l,t);if(Wk(l))return void xT(e,l,i.context,fT,pI(s),!1,t);t(l)}catch(u){t(u,!0)}},dT[wI]=function(e,n,t){var r=n.context,a=n.fn,s=n.args;try{var o=function(e,n){zk(e)?t(n):t(e,!0)};a.apply(r,s.concat(o)),o.cancel&&(t.cancel=o.cancel)}catch(i){t(i,!0)}},dT[kI]=function(e,n,t,r){var a=n.context,s=n.fn,o=n.args,i=n.detached,l=r.task,u=function(e){var n=e.context,t=e.fn,r=e.args;try{var a=t.apply(n,r);if(Wk(a))return a;var s=!1;return sI((function(e){return s?{value:e,done:!0}:(s=!0,{value:a,done:!Gk(a)})}))}catch(o){return sI((function(){throw o}))}}({context:a,fn:s,args:o}),c=function(e,n){return e.isSagaIterator?{name:e.meta.name}:pI(n)}(u,s);HI((function(){var n=xT(e,u,l.context,fT,c,i,void 0);i?t(n):n.isRunning()?(l.queue.addTask(n),t(n)):n.isAborted()?l.queue.abort(n.error()):t(n)}))},dT[II]=function(e,n,t,r){var a=r.task,s=function(e,n){if(e.isRunning()){var t={task:a,cb:n};n.cancel=function(){e.isRunning()&&tI(e.joiners,t)},e.joiners.push(t)}else e.isAborted()?n(e.error(),!0):n(e.result())};if(Vk(n)){if(0===n.length)return void t([]);var o=fI(n,t);n.forEach((function(e,n){s(e,o[n])}))}else s(n,t)},dT[TI]=function(e,n,t,r){var a=r.task;n===Fk?hT(a):Vk(n)?n.forEach(hT):hT(n),t()},dT[xI]=function(e,n,t){var r=n.selector,a=n.args;try{t(r.apply(void 0,[e.getState()].concat(a)))}catch(s){t(s,!0)}},dT[AI]=function(e,n,t){var r=n.pattern,a=aT(n.buffer),s=nT(r),o=function n(t){rT(t)||e.channel.take(n,s),a.put(t)},i=a.close;a.close=function(){o.cancel(),i()},e.channel.take(o,s),t(a)},dT[EI]=function(e,n,t,r){t(r.task.isCancelled())},dT[OI]=function(e,n,t){n.flush(t)},dT[CI]=function(e,n,t,r){t(r.task.context[n])},dT[MI]=function(e,n,t,r){var a=r.task;nI(a.context,n),t()},dT);function gT(e,n){return e+"?"+n}function yT(e){var n=e.name,t=e.location;return t?n+"  "+gT(t.fileName,t.lineNumber):n}function bT(e){var n=function(e,n){var t;return(t=[]).concat.apply(t,n.map(e))}((function(e){return e.cancelledTasks}),e);return n.length?["Tasks cancelled due to error:"].concat(n).join("\n"):""}var vT=null,_T=[],ST=function(e){e.crashedEffect=vT,_T.push(e)},wT=function(){vT=null,_T.length=0},kT=function(e){vT=e},IT=function(){var e=_T[0],n=_T.slice(1),t=e.crashedEffect?function(e){var n=hI(e);return n?n.code+"  "+gT(n.fileName,n.lineNumber):""}(e.crashedEffect):null;return["The above error occurred in task "+yT(e.meta)+(t?" \n when executing effect "+t:"")].concat(n.map((function(e){return"    created by "+yT(e.meta)})),[bT(_T)]).join("\n")};function TT(e,n,t,r,a,s,o){var i;void 0===o&&(o=Qk);var l,u,c=oT,d=null,f=[],p=Object.create(t),h=function(e,n,t){var r,a=[],s=!1;function o(e){n(),l(),t(e,!0)}function i(n){a.push(n),n.cont=function(i,l){s||(tI(a,n),n.cont=Qk,l?o(i):(n===e&&(r=i),a.length||(s=!0,t(r))))}}function l(){s||(s=!0,a.forEach((function(e){e.cont=Qk,e.cancel()})),a=[])}return i(e),{addTask:i,cancelAll:l,abort:o,getTasks:function(){return a}}}(n,(function(){f.push.apply(f,h.getTasks().map((function(e){return e.meta.name})))}),m);function m(n,t){if(t){if(c=lT,ST({meta:a,cancelledTasks:f}),g.isRoot){var r=IT();wT(),e.onError(n,{sagaStack:r})}u=n,d&&d.reject(n)}else n===Nk?c=iT:c!==iT&&(c=uT),l=n,d&&d.resolve(n);g.cont(n,t),g.joiners.forEach((function(e){e.cb(n,t)})),g.joiners=null}var g=((i={})[Pk]=!0,i.id=r,i.meta=a,i.isRoot=s,i.context=p,i.joiners=[],i.queue=h,i.cancel=function(){c===oT&&(c=iT,h.cancelAll(),m(Nk,!1))},i.cont=o,i.end=m,i.setContext=function(e){nI(p,e)},i.toPromise=function(){return d||(d=BI(),c===lT?d.reject(u):c!==oT&&d.resolve(l)),d.promise},i.isRunning=function(){return c===oT},i.isCancelled=function(){return c===iT||c===oT&&n.status===iT},i.isAborted=function(){return c===lT},i.result=function(){return l},i.error=function(){return u},i);return g}function xT(e,n,t,r,a,s,o){var i=e.finalizeRunEffect((function(n,t,r){if(Gk(n))cT(n,r);else if(Wk(n))xT(e,n,u.context,t,a,!1,r);else if(n&&n[Ek]){(0,mT[n.type])(e,n.payload,r,c)}else r(n)}));d.cancel=Qk;var l={meta:a,cancel:function(){l.status===oT&&(l.status=iT,d(Nk))},status:oT},u=TT(e,l,t,r,a,s,o),c={task:u,digestEffect:f};return o&&(o.cancel=u.cancel),d(),u;function d(e,t){try{var a;t?(a=n.throw(e),wT()):cI(e)?(l.status=iT,d.cancel(),a=jk(n.return)?n.return(Nk):{done:!0,value:Nk}):a=uI(e)?jk(n.return)?n.return():{done:!0}:n.next(e),a.done?(l.status!==iT&&(l.status=uT),l.cont(a.value)):f(a.value,r,d)}catch(s){if(l.status===iT)throw s;l.status=lT,l.cont(s,!0)}}function f(n,t,r,a){void 0===a&&(a="");var s,o=pT();function l(t,a){s||(s=!0,r.cancel=Qk,e.sagaMonitor&&(a?e.sagaMonitor.effectRejected(o,t):e.sagaMonitor.effectResolved(o,t)),a&&kT(n),r(t,a))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:o,parentEffectId:t,label:a,effect:n}),l.cancel=Qk,r.cancel=function(){s||(s=!0,l.cancel(),l.cancel=Qk,e.sagaMonitor&&e.sagaMonitor.effectCancelled(o))},i(n,o,l)}}function AT(e,n){var t=e.channel,r=void 0===t?sT():t,a=e.dispatch,s=e.getState,o=e.context,i=void 0===o?{}:o,l=e.sagaMonitor,u=e.effectMiddlewares,c=e.onError,d=void 0===c?oI:c;for(var f=arguments.length,p=new Array(f>2?f-2:0),h=2;h<f;h++)p[h-2]=arguments[h];var m=n.apply(void 0,p);var g,y=pT();if(l&&(l.rootSagaStarted=l.rootSagaStarted||Qk,l.effectTriggered=l.effectTriggered||Qk,l.effectResolved=l.effectResolved||Qk,l.effectRejected=l.effectRejected||Qk,l.effectCancelled=l.effectCancelled||Qk,l.actionDispatched=l.actionDispatched||Qk,l.rootSagaStarted({effectId:y,saga:n,args:p})),u){var b=Kr.apply(void 0,u);g=function(e){return function(n,t,r){return b((function(n){return e(n,t,r)}))(n)}}}else g=eI;var v={channel:r,dispatch:lI(a),getState:s,sagaMonitor:l,onError:d,finalizeRunEffect:g};return HI((function(){var e=xT(v,m,i,y,pI(n),!0,void 0);return l&&l.effectResolved(y,e),e}))}const ET=function(e){var n,t=void 0===e?{}:e,r=t.context,a=void 0===r?{}:r,s=t.channel,o=void 0===s?sT():s,i=t.sagaMonitor,l=function(e,n){if(null==e)return{};var t,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(t,["context","channel","sagaMonitor"]);function u(e){var t=e.getState,r=e.dispatch;return n=AT.bind(null,(0,Dk.Z)({},l,{context:a,channel:o,dispatch:r,getState:t,sagaMonitor:i})),function(e){return function(n){i&&i.actionDispatched&&i.actionDispatched(n);var t=e(n);return o.put(n),t}}}return u.run=function(){return n.apply(void 0,arguments)},u.setContext=function(e){nI(a,e)},u},OT=ET;var CT=function(e){return{done:!0,value:e}},MT={};function FT(e){return Hk(e)?"channel":Kk(e)?String(e):jk(e)?e.name:String(e)}function PT(e,n,t){var r,a,s,o=n;function i(n,t){if(o===MT)return CT(n);if(t&&!a)throw o=MT,t;r&&r(n);var i=t?e[a](t):e[o]();return o=i.nextState,s=i.effect,r=i.stateUpdater,a=i.errorState,o===MT?CT(n):s}return sI(i,(function(e){return i(null,e)}),t)}function NT(e,n){for(var t=arguments.length,r=new Array(t>2?t-2:0),a=2;a<t;a++)r[a-2]=arguments[a];var s,o,i={done:!1,value:PI(e)},l=function(e){return{done:!1,value:DI.apply(void 0,[n].concat(r,[e]))}},u=function(e){return{done:!1,value:(n=e,void 0===n&&(n=Fk),FI(TI,n))};var n},c=function(e){return s=e},d=function(e){return o=e};return PT({q1:function(){return{nextState:"q2",effect:i,stateUpdater:d}},q2:function(){return s?{nextState:"q3",effect:u(s)}:{nextState:"q1",effect:l(o),stateUpdater:c}},q3:function(){return{nextState:"q1",effect:l(o),stateUpdater:c}}},"q1","takeLatest("+FT(e)+", "+n.name+")")}function RT(e,n){for(var t=arguments.length,r=new Array(t>2?t-2:0),a=2;a<t;a++)r[a-2]=arguments[a];return DI.apply(void 0,[NT,e,n].concat(r))}function*LT(){yield RT(ts.actions.setLocalFile.type,DT)}function*DT(e){const n=Dp(e.payload.filepath);null!==n&&es.includes(n)||(yield NI(ts.actions.clear()),yield NI(lk.actions.setState({errors:["Invalid file input ".concat(e.payload.filepath)],warnings:[]})))}function*zT(){yield RT(ts.actions.setUrl.type,UT)}function*UT(e){const n=e.payload;try{const e=yield LI(jT,n);yield NI(ts.actions.fetchUrlSuccess({arrayBuffer:e,url:n}))}catch(t){yield NI(ts.actions.fetchUrlError(t.message))}}const jT=async e=>{const n=await fetch(e);if(!n.ok)throw new BT("Failed to load ".concat(e));return await n.arrayBuffer()};class BT extends Error{}const VT=(e,n)=>({x:e.x+n.x,y:e.y+n.y}),GT=e=>e.reduce(((e,n)=>{let{topLeft:t,bottomRight:r}=e;return{topLeft:{x:Math.min(n.x,t.x),y:Math.min(n.y,t.y)},bottomRight:{x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)}}}),{topLeft:{x:1/0,y:1/0},bottomRight:{x:-1/0,y:-1/0}}),WT=e=>({x:e.bottomRight.x-e.topLeft.x,y:e.bottomRight.y-e.topLeft.y}),$T=()=>new Promise((e=>setTimeout(e,1))),HT=(e,n)=>{if(!e)throw new Error(n||"expected ".concat(e," to be defined"));return e},KT=(e,n,t)=>{const{node:r,patch:a}=n,s=Qc(a.id,r.id);e.transforms[s]=t},qT=(e,n,t)=>{e.controlsValues.values[n]=t,e.settings.valuesUpdatedCallback&&YT(e),((e,n,t)=>{e.webpdNode.port.postMessage({type:"io:messageReceiver",payload:{nodeId:n,portletId:"0",message:t}})})(e,n,[t])},YT=((e,n)=>{let t=null;return function(){for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];t&&clearTimeout(t),t=setTimeout((()=>n(...a)),e)}})(300,(e=>{const n={};Object.entries(e.controlsValues.values).forEach((e=>{let[t,r]=e;n[t]="number"===typeof r?function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const t=Math.round(e*Math.pow(10,n))/Math.pow(10,n);return 0===t?0:t}(r):r})),e.settings.valuesUpdatedCallback(n)})),XT={x:7,y:12},JT=e=>{const n=e.map((e=>{switch(e.type){case"container":const[n]=QT(JT(e.children)),t={type:"container",label:"string"===typeof e.node.args[0]?e.node.args[0]:null,control:e,dimensions:VT(XT,WT(GT([...n.map((e=>e.position)),...n.map((e=>VT(e.position,e.dimensions)))]))),children:n,position:{x:rx(ax(e.node).x),y:rx(ax(e.node).y)}};return t;case"control":return{type:"control",label:nx(e.node),control:e,dimensions:ex(e.node),position:{x:rx(ax(e.node).x),y:rx(ax(e.node).y)}};default:throw new Error("unexpected control type ".concat(e.type))}}));return n},ZT=e=>e.map((e=>({type:"comment",text:e.text,position:{x:rx(ax(e.node).x),y:rx(ax(e.node).y)}}))),QT=e=>{const n=GT([...e.map((e=>e.position)),...e.map((e=>VT(e.position,e.dimensions)))]),t=((e,n)=>({x:e.x*n,y:e.y*n}))(n.topLeft,-1);return[e.map((e=>({...e,position:VT(e.position,t)}))),t]},ex=e=>{if("control"!==e.nodeClass)throw new Error("Can only get dimension for control node");switch(e.type){case"floatatom":case"symbolatom":return{x:rx(7*(ax(e).widthInChars||3)),y:rx(15)};case"bng":case"tgl":return{x:rx(ax(e).size),y:rx(ax(e).size)};case"nbx":return{x:rx(7*(ax(e).widthInChars||3)),y:rx(ax(e).height)};case"vradio":return{x:rx(ax(e).size),y:rx(tx(e.args[0])*tx(ax(e).size))};case"hradio":return{x:rx(tx(e.args[0])*tx(ax(e).size)),y:rx(ax(e).size)};case"vsl":case"hsl":return{x:rx(ax(e).width),y:rx(ax(e).height)};case"msg":return{x:rx(7*e.args.join(" ").length),y:rx(15)};case"cnv":return{x:0,y:0};default:throw new Error("unsupported type ".concat(e.type))}},nx=e=>{const n=ax(e).label;return n&&n.length?n:null},tx=e=>{if("number"!==typeof e)throw new Error("Expected ".concat(e," to be a number"));return e},rx=e=>1*Math.round(tx(e)/1),ax=e=>HT(e.layout,"expected node to have a layout"),sx=(e,n,t,r)=>{t.forEach((t=>{if("container"===t.type){const r=ox(e,n,t);sx(e,r,t.children,t)}else"control"===t.type&&ix(e,n,t,dx(!!r&&fx(r)))}))},ox=(e,n,t)=>{const r=document.createElement("div");r.classList.add("controls-container");const a=dx(fx(t));return r.style.left="".concat(cx(t.position.x),"px"),r.style.top="".concat(cx(t.position.y),"px"),r.style.width="".concat(cx(t.dimensions.x),"px"),r.style.height="".concat(cx(t.dimensions.y),"px"),r.style.paddingTop="".concat(cx(a.top),"px"),r.style.paddingBottom="".concat(cx(a.bottom),"px"),r.style.paddingRight="".concat(cx(a.right),"px"),r.style.paddingLeft="".concat(cx(a.left),"px"),fx(t)&&lx(r,t.label),n.appendChild(r),r},ix=(e,n,t,r)=>{const{node:a,patch:s}=t.control,o=e.settings.colorScheme.next(),i=document.createElement("div");if(i.classList.add("control"),i.classList.add(a.type),i.id="control-".concat(s.id,"-").concat(a.id),i.style.left="".concat(cx(t.position.x+r.left),"px"),i.style.top="".concat(cx(t.position.y+r.top),"px"),i.style.width="".concat(cx(t.dimensions.x),"px"),i.style.height="".concat(cx(t.dimensions.y),"px"),n.appendChild(i),fx(t)){lx(i,t.label||"").style.color=o}const l=document.createElement("div");i.appendChild(l);const u={x:cx(t.dimensions.x),y:cx(t.dimensions.y-(fx(t)?5:0))},c=ux(e,l,t,u);return c.colorize("accent",o),c.colorize("fill","black"),c.colorize("dark",o),c.colorize("mediumDark","#222"),c.colorize("mediumLight","#333"),c.element.style.fontFamily="Rajdhani",i},lx=(e,n)=>{const t=document.createElement("div");return t.classList.add("label"),t.innerHTML=n,t.style.height="".concat(cx(5),"px"),e.appendChild(t),t},ux=(e,n,t,r)=>{let{x:a,y:s}=r;const{node:o}=t.control,i=((e,n)=>{const{node:t,patch:r}=n,a=Qc(r.id,t.id);return e.controlsValues.values[a]})(e,t.control);let l;switch(o.type){case"hsl":case"vsl":"hsl"===o.type?s*=1.2:a*=1.2,l=new Nexus.Add.Slider(n,{min:o.args[0],max:o.args[1],value:void 0!==i?i:o.args[3],size:[a,s]});break;case"hradio":case"vradio":l=new Nexus.RadioButton(n,{numberOfButtons:o.args[0],active:void 0!==i?i:o.args[2],size:[a,s]});break;case"bng":l=new Nexus.Button(n,{size:[s,s]});break;case"msg":l=new Nexus.TextButton(n,{size:[a,s],text:o.args.join(" ")});break;case"nbx":case"floatatom":l=new Nexus.Number(n,{value:void 0!==i?i:"nbx"===o.type?o.args[3]:0,size:[a,s]});break;case"tgl":l=new Nexus.Button(n,{mode:"toggle",state:void 0!==i?i:!!o.args[2],size:[a,s]});break;case"symbolatom":l=new Nexus.TextButton(n,{size:[a,s],state:!1,text:"SYMBOLATOM NOT SUPPORTED"});break;case"cnv":l=new Nexus.TextButton(n,{size:[a,s],state:!1,text:"CNV NOT SUPPORTED"});break;default:throw new Error("Not supported ".concat(o.type))}return l.on("change",(n=>((e,n,t)=>{const{node:r,patch:a}=n,s=Qc(a.id,r.id),o=e.controlsValues.transforms[s];if(!o)throw new Error("no value transform for ".concat(s));const i=o(t);null!==i&&qT(e,s,i)})(e,t.control,n))),l},cx=e=>3*e,dx=e=>({top:e?XT.y-XT.x/2:XT.y/2,left:XT.x/2,right:XT.x/2,bottom:e?XT.x/2:XT.y/2}),fx=e=>!(!e.label||!e.label.length),px=(e,n)=>{const t=HT(e.dspGraph,"artefacts.dspGraph not defined"),r={values:{},transforms:{}},{controls:a,comments:s}=((e,n)=>{const{controls:t,comments:r}=ic(e);return uc(t,(e=>{let t=e=>e;"bng"===e.node.type?t=e=>!0===e.state?"bang":null:"msg"===e.node.type?t=e=>!0===e?"bang":null:"tgl"===e.node.type&&(t=e=>+e),KT(n,e,t)})),{controls:t.map((e=>{const n={type:"container",patch:e.patch,node:e.node,children:[e]};return"control"===e.type?n:e})),comments:r}})(t.pd,r),{controlsViews:o,commentsViews:i}=((e,n)=>{const[t,r]=QT(JT(e));return{controlsViews:t,commentsViews:ZT(n).map((e=>({...e,position:VT(e.position,r)})))}})(a,s),l=new AudioContext;return l.suspend(),{rootElem:null,patchUrl:n,audioContext:l,webpdNode:null,pdJson:t.pd,controls:a,controlsValues:r,controlsViews:o,commentsViews:i,io:{messageReceivers:sf(a,t.graph)},settings:null}},hx=async(e,n,t)=>{const r={...n,controlsValues:{...n.controlsValues,values:t.initialValues?{...t.initialValues}:{}},settings:t},a=document.createElement("div");r.settings.container.appendChild(a);const s=(e=>(e.innerHTML='\n    <div id="splash-container">\n        <div id="loading"></div>\n        <button id="start">START</button>\n    </div>\n\n    <div id="patch-controls">\n        <div id="controls-root"></div>\n    </div>\n\n    <div id="credits">\n        <button>Credits</button>\n        <div class="content">\n        <div>Sound made using <a href="https://github.com/sebpiq/WebPd/" target="_blank" rel="noopener noreferrer" >WebPd</a>.</div>\n        <div>UI made using <a href="https://nexus-js.github.io/ui/" target="_blank" rel="noopener noreferrer" >NexusUI</a>.</div>\n        <div>Demo source code available <a href="https://github.com/sebpiq/WebPd_demos/" target="_blank" rel="noopener noreferrer" >here</a>.</div>\n        <div>Patch ginger2.pd by <a href="http://www.martin-brinkmann.de/pd-patches.html" target="_blank" rel="noopener noreferrer" >Martin Brinkmann</a>.</div>\n        </div>\n    </div>\n',{controlsRoot:HT(e.querySelector("#controls-root"),"controlsRoot not found"),startButton:HT(e.querySelector("#start"),"startButton not found"),loadingLabel:HT(e.querySelector("#loading"),"loadingLabel not found"),loadingContainer:HT(e.querySelector("#splash-container"),"loadingContainer not found"),creditsButton:HT(e.querySelector("#credits button"),"creditsButton not found"),creditsContainer:HT(e.querySelector("#credits"),"creditsContainer not found")}))(a);!0!==r.settings.showCredits&&(s.creditsButton.style.display="none"),s.creditsButton.onclick=()=>{s.creditsContainer.classList.contains("expanded")?s.creditsContainer.classList.remove("expanded"):s.creditsContainer.classList.add("expanded")},s.startButton.style.display="none",s.startButton.onclick=()=>{s.loadingContainer.style.display="none",gx(r)},s.loadingLabel.innerHTML="loading assemblyscript compiler ...",console.log("PatchPlayer START"),await function(){return dS(...arguments)}(r.audioContext),s.loadingLabel.innerHTML="generating GUI ...",await $T(),((e,n)=>{sx(e,n,e.controlsViews,null)})(r,s.controlsRoot),((e,n)=>{e.commentsViews.forEach((e=>{const t=document.createElement("div");t.classList.add("comment"),t.innerHTML=e.text,n.appendChild(t),t.style.left="".concat(cx(e.position.x),"px"),t.style.top="".concat(cx(e.position.y),"px")}))})(r,s.controlsRoot),await $T();let o=null;try{o=await navigator.mediaDevices.getUserMedia({audio:!0})}catch(i){console.error("Failed to get microphone stream ".concat(i))}return r.webpdNode=await mx(r,o,e),r.rootElem=a,s.loadingLabel.style.display="none",s.startButton.style.display="block",r},mx=async(e,n,t)=>{if(!t.javascript&&!t.wasm)throw new Error("Missing artefacts for creating the engine");const r=await(async(e,n,t)=>{const{messageHandler:r}=t,a=new cS(e);return a.port.onmessage=e=>r(a,e),"string"===typeof n?a.port.postMessage({type:"code:JS",payload:{jsCode:n}}):a.port.postMessage({type:"code:WASM",payload:{wasmBuffer:n}}),a})(e.audioContext,t.javascript||t.wasm,(e=>{const n=Jw(e);return{messageHandler:(e,t)=>Xw(e,t,{rootUrl:n})}})(e.patchUrl||"."));if(n){e.audioContext.createMediaStreamSource(n).connect(r)}return r.connect(e.audioContext.destination),r},gx=e=>{"suspended"===e.audioContext.state&&e.audioContext.resume(),(e=>{Object.entries(e.controlsValues.values).forEach((n=>{let[t,r]=n;qT(e,t,r)}))})(e)},yx=mk(vk,Sk,wk,((e,n,t)=>{if(console.log("selectBuildSteps CODE TARGET",t),!e||!n)return null;if("patchPlayer"===n)switch(t){case"JavaScript":n="javascript";break;case"WebAssembly":n="wasm"}return["wav","app"].includes(n)&&["pd","pdJson","dspGraph"].includes(e)?zp(e,n,"JavaScript"===t?"javascript":"wasm"):zp(e,n)})),bx=64,vx={WebAssembly:{display:"Web Assembly",info:"Web Assembly is slower to build, but provides a higher performance when running. Good for when your patch is stable and you want to take it elsewhere."},JavaScript:{display:"JavaScript",info:"JavaScript is fast to build, but slower when running. Good if you want to test things fast."}},_x=e=>e.app.isInitialized,Sx=e=>e.app.willBuildOnLoad,wx=e=>e.app.debug,kx=async(e,n,t)=>{const r={...(a=t.rootUrl||"",{audioSettings:{channelCount:{in:2,out:2},bitDepth:64},renderAudioSettings:{sampleRate:44100,blockSize:4096,previewDurationSeconds:30},abstractionLoader:Q_,nodeBuilders:J_,nodeImplementations:Z_,abstractionLoader:Fw(a)}),audioSettings:t.audioSettings,renderAudioSettings:t.renderAudioSettings,io:t.io,abstractionLoader:t.rootUrl?Fw(t.rootUrl):Ix};var a;return nS(e,n,r)},Ix=Vs((async e=>{throw new Gs(e)}));function*Tx(){yield RT(ok.actions.startBuild.type,Ax)}function xx(e,n){return new Promise((t=>{e.onmessage=e=>{t(e.data)},e.postMessage(n)}))}function*Ax(){const e=new Worker("js/build.worker.js"),n=yield zI(_k),t=yield zI(yx),r=yield zI(Sk),a=yield zI(gk),s=yield zI(kk),o=yield zI(wx);if(!n||!t)return void(yield NI(ok.actions.buildSuccess({artefacts:n||eS(),patchPlayer:null})));yield UI(1);let i={...n},l=null;for(let c of t){console.log("BUILD STEP START",c,i),yield NI(ok.actions.startStep(c));try{const n={audioSettings:{channelCount:{in:2,out:2},bitDepth:bx},renderAudioSettings:{sampleRate:44100,blockSize:4096,previewDurationSeconds:s||30},io:l?l.io:void 0,rootUrl:a?Jw(a):null},t={artefacts:i,step:c,settings:n};let r;if("wasm"===c)r=yield LI(kx,i,c,n);else{const n=yield LI(xx,e,t);r=n.result,i=n.artefacts}const o=1===r.status?r.errors:void 0;if(yield NI(ok.actions.stepComplete({status:r.status,artefacts:i,errors:o,warnings:r.warnings})),1===r.status)return}catch(u){if(yield NI(ok.actions.stepComplete({status:1,artefacts:i,errors:[u.message],warnings:[]})),o)throw u;return}"dspGraph"===c&&"patchPlayer"===r&&(l=px(i,a||null))}yield NI(ok.actions.buildSuccess({artefacts:i,patchPlayer:l}))}function*Ex(){for(;!window.asc;)yield UI(100);var e;e=window.asc,os=e;const n=yield zI(gk),t=yield zI(bk);if(n&&!t){if((yield PI([ts.actions.fetchUrlSuccess,ts.actions.fetchUrlError])).type===ts.actions.fetchUrlError.type)return void console.log("INIT FAILED ERROR")}(yield zI(Sx))&&(yield NI(ok.actions.startBuild())),yield NI(uk.actions.initializationDone())}const Ox={patchPlayer:null},Cx={values:{}},Mx=va({name:"patchPlayer",initialState:Cx,reducers:{valuesChanged:(e,n)=>{e.values=n.payload}},extraReducers:e=>{e.addCase(ok.actions.buildSuccess,((e,n)=>{Ox.patchPlayer=n.payload.patchPlayer})),e.addCase(Qw,(()=>(Ox.patchPlayer=null,Cx)))}}),Fx=e=>e.patchPlayer.values,Px=()=>Ox.patchPlayer,Nx=OT(),Rx=function(e){var n,t=ya(),r=e||{},a=r.reducer,s=void 0===a?void 0:a,o=r.middleware,i=void 0===o?t():o,l=r.devTools,u=void 0===l||l,c=r.preloadedState,d=void 0===c?void 0:c,f=r.enhancers,p=void 0===f?void 0:f;if("function"===typeof s)n=s;else{if(!fa(s))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');n=Hr(s)}var h=i;"function"===typeof h&&(h=h(t));var m=qr.apply(void 0,h),g=Kr;u&&(g=da(la({trace:!1},"object"===typeof u&&u)));var y=new ma(m),b=y;return Array.isArray(p)?b=ea([m],p):"function"===typeof p&&(b=p(y)),$r(n,d,g.apply(void 0,b))}({reducer:{app:uk.reducer,buildInput:ts.reducer,buildOutput:ss.reducer,artefacts:ok.reducer,console:lk.reducer,patchPlayer:Mx.reducer},middleware:e=>e({serializableCheck:!1}).concat([Nx])}),Lx=Za,Dx=Ga;Nx.run((function*(){yield function(e){var n=FI(vI,e);return n.combinator=!0,n}([Ex(),zT(),LT(),Tx()])}));const zx=e=>"1"===e,Ux=e=>e?"1":"0";var jx,Bx;(0,ck.Z)({store:Rx,params:{jsOrAs:{selector:wk,action:ss.actions.setCodeTarget,defaultValue:ss.getInitialState().codeTarget},target:{selector:Sk,action:ss.actions.setFormat,defaultValue:ss.getInitialState().format},url:{selector:gk,action:ts.actions.setUrl,defaultValue:ts.getInitialState().url},build:{selector:Sx,action:uk.actions.setWillBuildOnLoad,defaultValue:uk.getInitialState().willBuildOnLoad,stringToValue:zx,valueToString:Ux},debug:{selector:wx,action:uk.actions.setDebug,defaultValue:uk.getInitialState().debug,stringToValue:zx,valueToString:Ux},pp:{selector:Fx,action:Mx.actions.valuesChanged,defaultValue:Mx.getInitialState().values,stringToValue:e=>JSON.parse(e),valueToString:e=>JSON.stringify(e)}},replaceState:!0,initialTruth:"location"});const Vx={ginger2:{display:"Martin's Brinkmann ginger2",url:"./patches/Martin-Brinkmann-ginger2.pd"},randomperc1:{display:"Martin's Brinkmann randomperc1",url:"./patches/Martin-Brinkmann-randomperc1.pd"}},Gx=Re.form(jx||(jx=r(["\n    display: inline;\n"]))),Wx=Re(ln)(Bx||(Bx=r(["\n    padding-left: 0;\n    padding-top: ",";\n    text-overflow: ellipsis;\n    @media (max-width: ","px) {\n        width: 100%;\n        background-color: transparent;\n        text-align: center;\n    }\n"])),De.spacings.space0p1,De.devices.mobile.maxWidth),$x=()=>{const e=Lx();return(0,Qe.jsx)(Gx,{children:(0,Qe.jsxs)(Wx,{onChange:n=>{const t=n.currentTarget.value;e(ts.actions.setUrl(Vx[t].url))},children:[(0,Qe.jsx)("option",{value:"",children:"Load one of the following examples"}),Object.entries(Vx).map((e=>{let[n,t]=e;return(0,Qe.jsx)("option",{value:n,children:t.display},n)}))]})})};var Hx=t(7),Kx=t.n(Hx);function qx(e,n,t,r){return new(t||(t=Promise))((function(a,s){function o(e){try{l(r.next(e))}catch(n){s(n)}}function i(e){try{l(r.throw(e))}catch(n){s(n)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(o,i)}l((r=r.apply(e,n||[])).next())}))}function Yx(e,n){var t,r,a,s,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),throw:i(1),return:i(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function i(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,i[0]&&(o=0)),o;)try{if(t=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=n.call(e,o)}catch(l){i=[6,l],r=0}finally{t=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}Object.create;function Xx(e,n){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,s=t.call(e),o=[];try{for(;(void 0===n||n-- >0)&&!(r=s.next()).done;)o.push(r.value)}catch(i){a={error:i}}finally{try{r&&!r.done&&(t=s.return)&&t.call(s)}finally{if(a)throw a.error}}return o}function Jx(e,n,t){if(t||2===arguments.length)for(var r,a=0,s=n.length;a<s;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var Zx=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Qx(e,n){var t=function(e){var n=e.name;if(n&&-1!==n.lastIndexOf(".")&&!e.type){var t=n.split(".").pop().toLowerCase(),r=Zx.get(t);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!==typeof t.path){var r=e.webkitRelativePath;Object.defineProperty(t,"path",{value:"string"===typeof n?n:"string"===typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return t}var eA=[".DS_Store","Thumbs.db"];function nA(e){return"object"===typeof e&&null!==e}function tA(e){return oA(e.target.files).map((function(e){return Qx(e)}))}function rA(e){return qx(this,void 0,void 0,(function(){return Yx(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.map((function(e){return e.getFile()})))];case 1:return[2,n.sent().map((function(e){return Qx(e)}))]}}))}))}function aA(e,n){return qx(this,void 0,void 0,(function(){var t;return Yx(this,(function(r){switch(r.label){case 0:return e.items?(t=oA(e.items).filter((function(e){return"file"===e.kind})),"drop"!==n?[2,t]:[4,Promise.all(t.map(iA))]):[3,2];case 1:return[2,sA(lA(r.sent()))];case 2:return[2,sA(oA(e.files).map((function(e){return Qx(e)})))]}}))}))}function sA(e){return e.filter((function(e){return-1===eA.indexOf(e.name)}))}function oA(e){if(null===e)return[];for(var n=[],t=0;t<e.length;t++){var r=e[t];n.push(r)}return n}function iA(e){if("function"!==typeof e.webkitGetAsEntry)return uA(e);var n=e.webkitGetAsEntry();return n&&n.isDirectory?dA(n):uA(e)}function lA(e){return e.reduce((function(e,n){return Jx(Jx([],Xx(e),!1),Xx(Array.isArray(n)?lA(n):[n]),!1)}),[])}function uA(e){var n=e.getAsFile();if(!n)return Promise.reject("".concat(e," is not a File"));var t=Qx(n);return Promise.resolve(t)}function cA(e){return qx(this,void 0,void 0,(function(){return Yx(this,(function(n){return[2,e.isDirectory?dA(e):fA(e)]}))}))}function dA(e){var n=e.createReader();return new Promise((function(e,t){var r=[];!function a(){var s=this;n.readEntries((function(n){return qx(s,void 0,void 0,(function(){var s,o,i;return Yx(this,(function(l){switch(l.label){case 0:if(n.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return s=l.sent(),e(s),[3,4];case 3:return o=l.sent(),t(o),[3,4];case 4:return[3,6];case 5:i=Promise.all(n.map(cA)),r.push(i),a(),l.label=6;case 6:return[2]}}))}))}),(function(e){t(e)}))}()}))}function fA(e){return qx(this,void 0,void 0,(function(){return Yx(this,(function(n){return[2,new Promise((function(n,t){e.file((function(t){var r=Qx(t,e.fullPath);n(r)}),(function(e){t(e)}))}))]}))}))}var pA=t(998);function hA(e){return function(e){if(Array.isArray(e))return _A(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||vA(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mA(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function gA(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?mA(Object(t),!0).forEach((function(n){yA(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mA(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function yA(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function bA(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,a,s=[],o=!0,i=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(s.push(r.value),!n||s.length!==n);o=!0);}catch(l){i=!0,a=l}finally{try{o||null==t.return||t.return()}finally{if(i)throw a}}return s}(e,n)||vA(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vA(e,n){if(e){if("string"===typeof e)return _A(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_A(e,n):void 0}}function _A(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var SA="file-invalid-type",wA="file-too-large",kA="file-too-small",IA="too-many-files",TA=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var n=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:SA,message:"File type must be ".concat(n)}},xA=function(e){return{code:wA,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},AA=function(e){return{code:kA,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},EA={code:IA,message:"Too many files"};function OA(e,n){var t="application/x-moz-file"===e.type||(0,pA.Z)(e,n);return[t,t?null:TA(n)]}function CA(e,n,t){if(MA(e.size))if(MA(n)&&MA(t)){if(e.size>t)return[!1,xA(t)];if(e.size<n)return[!1,AA(n)]}else{if(MA(n)&&e.size<n)return[!1,AA(n)];if(MA(t)&&e.size>t)return[!1,xA(t)]}return[!0,null]}function MA(e){return void 0!==e&&null!==e}function FA(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function PA(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function NA(e){e.preventDefault()}function RA(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return n.some((function(n){return!FA(e)&&n&&n.apply(void 0,[e].concat(r)),FA(e)}))}}function LA(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)}function DA(e){return/^.*\.[\w]+$/.test(e)}var zA=["children"],UA=["open"],jA=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],BA=["refKey","onChange","onClick"];function VA(e){return function(e){if(Array.isArray(e))return $A(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||WA(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function GA(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,a,s=[],o=!0,i=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(s.push(r.value),!n||s.length!==n);o=!0);}catch(l){i=!0,a=l}finally{try{o||null==t.return||t.return()}finally{if(i)throw a}}return s}(e,n)||WA(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WA(e,n){if(e){if("string"===typeof e)return $A(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?$A(e,n):void 0}}function $A(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function HA(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function KA(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?HA(Object(t),!0).forEach((function(n){qA(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):HA(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function qA(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function YA(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)t=s[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var XA=(0,e.forwardRef)((function(n,t){var r=n.children,a=nE(YA(n,zA)),s=a.open,o=YA(a,UA);return(0,e.useImperativeHandle)(t,(function(){return{open:s}}),[s]),e.createElement(e.Fragment,null,r(KA(KA({},o),{},{open:s})))}));XA.displayName="Dropzone";var JA={disabled:!1,getFilesFromEvent:function(e){return qx(this,void 0,void 0,(function(){return Yx(this,(function(n){return nA(e)&&nA(e.dataTransfer)?[2,aA(e.dataTransfer,e.type)]:function(e){return nA(e)&&nA(e.target)}(e)?[2,tA(e)]:Array.isArray(e)&&e.every((function(e){return"getFile"in e&&"function"===typeof e.getFile}))?[2,rA(e)]:[2,[]]}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};XA.defaultProps=JA,XA.propTypes={children:Kx().func,accept:Kx().objectOf(Kx().arrayOf(Kx().string)),multiple:Kx().bool,preventDropOnDocument:Kx().bool,noClick:Kx().bool,noKeyboard:Kx().bool,noDrag:Kx().bool,noDragEventsBubbling:Kx().bool,minSize:Kx().number,maxSize:Kx().number,maxFiles:Kx().number,disabled:Kx().bool,getFilesFromEvent:Kx().func,onFileDialogCancel:Kx().func,onFileDialogOpen:Kx().func,useFsAccessApi:Kx().bool,autoFocus:Kx().bool,onDragEnter:Kx().func,onDragLeave:Kx().func,onDragOver:Kx().func,onDrop:Kx().func,onDropAccepted:Kx().func,onDropRejected:Kx().func,onError:Kx().func,validator:Kx().func};var ZA,QA,eE={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function nE(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=KA(KA({},JA),n),r=t.accept,a=t.disabled,s=t.getFilesFromEvent,o=t.maxSize,i=t.minSize,l=t.multiple,u=t.maxFiles,c=t.onDragEnter,d=t.onDragLeave,f=t.onDragOver,p=t.onDrop,h=t.onDropAccepted,m=t.onDropRejected,g=t.onFileDialogCancel,y=t.onFileDialogOpen,b=t.useFsAccessApi,v=t.autoFocus,_=t.preventDropOnDocument,S=t.noClick,w=t.noKeyboard,k=t.noDrag,I=t.noDragEventsBubbling,T=t.onError,x=t.validator,A=(0,e.useMemo)((function(){return function(e){if(MA(e))return Object.entries(e).reduce((function(e,n){var t=bA(n,2),r=t[0],a=t[1];return[].concat(hA(e),[r],hA(a))}),[]).filter((function(e){return LA(e)||DA(e)})).join(",")}(r)}),[r]),E=(0,e.useMemo)((function(){return function(e){return MA(e)?[{description:"Files",accept:Object.entries(e).filter((function(e){var n=bA(e,2),t=n[0],r=n[1],a=!0;return LA(t)||(console.warn('Skipped "'.concat(t,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),a=!1),Array.isArray(r)&&r.every(DA)||(console.warn('Skipped "'.concat(t,'" because an invalid file extension was provided.')),a=!1),a})).reduce((function(e,n){var t=bA(n,2),r=t[0],a=t[1];return gA(gA({},e),{},yA({},r,a))}),{})}]:e}(r)}),[r]),O=(0,e.useMemo)((function(){return"function"===typeof y?y:rE}),[y]),C=(0,e.useMemo)((function(){return"function"===typeof g?g:rE}),[g]),M=(0,e.useRef)(null),F=(0,e.useRef)(null),P=GA((0,e.useReducer)(tE,eE),2),N=P[0],R=P[1],L=N.isFocused,D=N.isFileDialogActive,z=(0,e.useRef)("undefined"!==typeof window&&window.isSecureContext&&b&&"showOpenFilePicker"in window),U=function(){!z.current&&D&&setTimeout((function(){F.current&&(F.current.files.length||(R({type:"closeDialog"}),C()))}),300)};(0,e.useEffect)((function(){return window.addEventListener("focus",U,!1),function(){window.removeEventListener("focus",U,!1)}}),[F,D,C,z]);var j=(0,e.useRef)([]),B=function(e){M.current&&M.current.contains(e.target)||(e.preventDefault(),j.current=[])};(0,e.useEffect)((function(){return _&&(document.addEventListener("dragover",NA,!1),document.addEventListener("drop",B,!1)),function(){_&&(document.removeEventListener("dragover",NA),document.removeEventListener("drop",B))}}),[M,_]),(0,e.useEffect)((function(){return!a&&v&&M.current&&M.current.focus(),function(){}}),[M,v,a]);var V=(0,e.useCallback)((function(e){T?T(e):console.error(e)}),[T]),G=(0,e.useCallback)((function(e){e.preventDefault(),e.persist(),te(e),j.current=[].concat(VA(j.current),[e.target]),PA(e)&&Promise.resolve(s(e)).then((function(n){if(!FA(e)||I){var t=n.length,r=t>0&&function(e){var n=e.files,t=e.accept,r=e.minSize,a=e.maxSize,s=e.multiple,o=e.maxFiles,i=e.validator;return!(!s&&n.length>1||s&&o>=1&&n.length>o)&&n.every((function(e){var n=bA(OA(e,t),1)[0],s=bA(CA(e,r,a),1)[0],o=i?i(e):null;return n&&s&&!o}))}({files:n,accept:A,minSize:i,maxSize:o,multiple:l,maxFiles:u,validator:x});R({isDragAccept:r,isDragReject:t>0&&!r,isDragActive:!0,type:"setDraggedFiles"}),c&&c(e)}})).catch((function(e){return V(e)}))}),[s,c,V,I,A,i,o,l,u,x]),W=(0,e.useCallback)((function(e){e.preventDefault(),e.persist(),te(e);var n=PA(e);if(n&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(t){}return n&&f&&f(e),!1}),[f,I]),$=(0,e.useCallback)((function(e){e.preventDefault(),e.persist(),te(e);var n=j.current.filter((function(e){return M.current&&M.current.contains(e)})),t=n.indexOf(e.target);-1!==t&&n.splice(t,1),j.current=n,n.length>0||(R({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),PA(e)&&d&&d(e))}),[M,d,I]),H=(0,e.useCallback)((function(e,n){var t=[],r=[];e.forEach((function(e){var n=GA(OA(e,A),2),a=n[0],s=n[1],l=GA(CA(e,i,o),2),u=l[0],c=l[1],d=x?x(e):null;if(a&&u&&!d)t.push(e);else{var f=[s,c];d&&(f=f.concat(d)),r.push({file:e,errors:f.filter((function(e){return e}))})}})),(!l&&t.length>1||l&&u>=1&&t.length>u)&&(t.forEach((function(e){r.push({file:e,errors:[EA]})})),t.splice(0)),R({acceptedFiles:t,fileRejections:r,type:"setFiles"}),p&&p(t,r,n),r.length>0&&m&&m(r,n),t.length>0&&h&&h(t,n)}),[R,l,A,i,o,u,p,h,m,x]),K=(0,e.useCallback)((function(e){e.preventDefault(),e.persist(),te(e),j.current=[],PA(e)&&Promise.resolve(s(e)).then((function(n){FA(e)&&!I||H(n,e)})).catch((function(e){return V(e)})),R({type:"reset"})}),[s,H,V,I]),q=(0,e.useCallback)((function(){if(z.current){R({type:"openDialog"}),O();var e={multiple:l,types:E};window.showOpenFilePicker(e).then((function(e){return s(e)})).then((function(e){H(e,null),R({type:"closeDialog"})})).catch((function(e){!function(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}(e)?!function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?V(e):(z.current=!1,F.current?(F.current.value=null,F.current.click()):V(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):(C(e),R({type:"closeDialog"}))}))}else F.current&&(R({type:"openDialog"}),O(),F.current.value=null,F.current.click())}),[R,O,C,b,H,V,E,l]),Y=(0,e.useCallback)((function(e){M.current&&M.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),q()))}),[M,q]),X=(0,e.useCallback)((function(){R({type:"focus"})}),[]),J=(0,e.useCallback)((function(){R({type:"blur"})}),[]),Z=(0,e.useCallback)((function(){S||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?q():setTimeout(q,0))}),[S,q]),Q=function(e){return a?null:e},ee=function(e){return w?null:Q(e)},ne=function(e){return k?null:Q(e)},te=function(e){I&&e.stopPropagation()},re=(0,e.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.refKey,t=void 0===n?"ref":n,r=e.role,s=e.onKeyDown,o=e.onFocus,i=e.onBlur,l=e.onClick,u=e.onDragEnter,c=e.onDragOver,d=e.onDragLeave,f=e.onDrop,p=YA(e,jA);return KA(KA(qA({onKeyDown:ee(RA(s,Y)),onFocus:ee(RA(o,X)),onBlur:ee(RA(i,J)),onClick:Q(RA(l,Z)),onDragEnter:ne(RA(u,G)),onDragOver:ne(RA(c,W)),onDragLeave:ne(RA(d,$)),onDrop:ne(RA(f,K)),role:"string"===typeof r&&""!==r?r:"presentation"},t,M),a||w?{}:{tabIndex:0}),p)}}),[M,Y,X,J,Z,G,W,$,K,w,k,a]),ae=(0,e.useCallback)((function(e){e.stopPropagation()}),[]),se=(0,e.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.refKey,t=void 0===n?"ref":n,r=e.onChange,a=e.onClick,s=YA(e,BA);return KA(KA({},qA({accept:A,multiple:l,type:"file",style:{display:"none"},onChange:Q(RA(r,K)),onClick:Q(RA(a,ae)),tabIndex:-1},t,F)),s)}}),[F,r,l,K,a]);return KA(KA({},N),{},{isFocused:L&&!a,getRootProps:re,getInputProps:se,rootRef:M,inputRef:F,open:Q(q)})}function tE(e,n){switch(n.type){case"focus":return KA(KA({},e),{},{isFocused:!0});case"blur":return KA(KA({},e),{},{isFocused:!1});case"openDialog":return KA(KA({},eE),{},{isFileDialogActive:!0});case"closeDialog":return KA(KA({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return KA(KA({},e),{},{isDragActive:n.isDragActive,isDragAccept:n.isDragAccept,isDragReject:n.isDragReject});case"setFiles":return KA(KA({},e),{},{acceptedFiles:n.acceptedFiles,fileRejections:n.fileRejections});case"reset":return KA({},eE);default:return e}}function rE(){}const aE=Re.span(ZA||(ZA=r(["\n    padding: "," 0;\n    cursor: pointer;\n"])),De.spacings.space0p1),sE=Re.span(QA||(QA=r(["\n    color: ",";\n"])),De.colors.fg1),oE=()=>{const n=Dx(yk),t=Lx(),r=(0,e.useCallback)((e=>{const n=e[0],r=new FileReader;r.onabort=()=>console.log("file reading was aborted"),r.onerror=()=>console.log("file reading has failed"),r.onload=()=>{t(ts.actions.setLocalFile({arrayBuffer:r.result,filepath:n.name}))},r.readAsArrayBuffer(n)}),[]),{getRootProps:a,getInputProps:s,isDragActive:o}=nE({onDrop:r});return(0,Qe.jsxs)(aE,{...a(),children:[(0,Qe.jsx)("input",{...s()}),o?(0,Qe.jsx)(sE,{children:"Drop the file here ..."}):(0,Qe.jsx)(sE,{children:n?"Choose a different file":"Upload a file from your device"})]})};var iE,lE,uE;const cE=Re.form(iE||(iE=r(["\n    display: inline;\n"]))),dE=Re.input(lE||(lE=r(["\n    padding: "," 0;\n    color: ",";\n    ::placeholder,\n    ::-webkit-input-placeholder {\n        color: ",";\n        opacity: 1;\n    }\n    :-ms-input-placeholder {\n        color: ",";\n        opacity: 1;\n    }\n    @media (max-width: ","px) {\n        background-color: transparent;\n        text-align: center;\n    }\n"])),De.spacings.space0p1,De.colors.fg1,De.colors.fg1,De.colors.fg1,De.devices.mobile.maxWidth),fE=Re(sn)(uE||(uE=r(["\n    margin-left: ",";\n"])),De.spacings.space1),pE=()=>{const n=Lx(),t=Dx(gk),[r,a]=(0,e.useState)(t||"");return(0,Qe.jsxs)(cE,{onSubmit:e=>{e.preventDefault(),n(ts.actions.setUrl(r))},children:[(0,Qe.jsx)(dE,{value:r,onChange:e=>{a(e.target.value),n(ts.actions.setFocusOn("url"))},placeholder:"Load a file from a URL"}),r.length?(0,Qe.jsx)(fE,{children:"Load"}):null]})};var hE,mE;const gE=Re(gn)(hE||(hE=r(["\n    position: relative;\n"]))),yE=Re.div(mE||(mE=r(["\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    flex: auto;\n    & > * {\n        display: inline-block;\n        @media (max-width: ","px) {\n            /* Match all objects except Or */\n            &:nth-child(2n+1) {\n                width: 100%;\n                text-align: center;\n                background-color: ",";\n            }\n        }\n    }\n"])),De.devices.mobile.maxWidth,De.colors.bg1),bE=()=>{const e=Lx(),n=Dx(yk),t=Dx(gk),r=Dx(vk),a=Dx(_k);return(0,Qe.jsxs)(gE,{children:[(0,Qe.jsx)(yn,{children:(0,Qe.jsx)(nn,{children:"\u2192 input"})}),(0,Qe.jsx)(bn,{children:r&&a?(0,Qe.jsx)(Qe.Fragment,{children:(0,Qe.jsx)(Nt,{format:r,artefacts:a,filename:n||t||void 0,extraButtons:[(0,Qe.jsx)(sn,{onClick:()=>{e(ts.actions.clear())},children:"clear"},"clear")]})}):(0,Qe.jsxs)(yE,{children:[(0,Qe.jsx)(oE,{})," ",(0,Qe.jsx)(hn,{children:"OR"})," ",(0,Qe.jsx)(pE,{})," ",(0,Qe.jsx)(hn,{children:"OR"})," ",(0,Qe.jsx)($x,{})]})})]})},vE={...Rp,patchPlayer:{description:"Patch player"},wav:{description:"Audio preview"},app:{description:"Complete web app"}},_E={pd:{info:"A Pure Data file (.pd) in text format."},pdJson:{info:"Will compile a JSON representation of a pure data file."},dspGraph:{info:"Will compile a DSP graph that is used internally by the WebPd compiler to generate the audio output."},javascript:{info:"Will compile a JavaScript function for generating audio."},assemblyscript:{info:"Will compile an AssemblyScript function which can then be compiled to Web Assembly."},wasm:{info:"Will generate a Web Assembly module from your patch. This module can be loaded again here at a later time to play your patch."},wav:{info:"Will generate an audio preview of your patch."},patchPlayer:{info:"Will render a interactive interface allowing to play your patch online."},app:{info:"Will generate a bare bones web page embedding your patch. A good starter to build an audio web site of your own."}},SE=Re.div.withConfig({displayName:"OutputSelector__Container",componentId:"sc-1qpzo58-0"})([""]),wE=Re.div.withConfig({displayName:"OutputSelector__FormatSelector",componentId:"sc-1qpzo58-1"})(["width:100%;display:flex;flex-direction:row;justify-content:space-between;@media (max-width:","px){flex-direction:column;align-items:initial;","{text-align:center;}}"],De.devices.mobile.maxWidth,hn),kE=Re(mn).withConfig({displayName:"OutputSelector__FormatHint",componentId:"sc-1qpzo58-2"})(["margin-top:",";"],De.spacings.space0p1),IE=Re(sn).withConfig({displayName:"OutputSelector__ButtonInit",componentId:"sc-1qpzo58-3"})([""]),TE=Re(sn).withConfig({displayName:"OutputSelector__ButtonActive",componentId:"sc-1qpzo58-4"})(["color:",";background-color:",";"],De.colors.colorScheme.next(),De.colors.bg1p5),xE=Re(sn).withConfig({displayName:"OutputSelector__ButtonInactive",componentId:"sc-1qpzo58-5"})(["color:",";background-color:",";"],De.colors.fg1,De.colors.bg1p5),AE=()=>{const e=Lx(),n=Dx(Sk),t=Array.from(Dx(Ik));return(0,Qe.jsxs)(SE,{children:[(0,Qe.jsx)(wE,{children:t.flatMap(((r,a)=>{const s=r===n?TE:n?xE:IE;return[(0,Qe.jsx)(s,{onClick:()=>e(ss.actions.setFormat(r)),children:vE[r].description},r),a<t.length-1?(0,Qe.jsx)(hn,{children:"OR"},r+"OR"):null]}))}),n?(0,Qe.jsx)(kE,{children:_E[n].info}):null]})};var EE,OE,CE;const ME=Re.div(EE||(EE=r(["\n    margin-top: ",";\n"])),De.spacings.space2),FE=Re(ln)(OE||(OE=r(["\n    min-width: 8em;\n    margin-left: ",";\n"])),De.spacings.space0p1),PE=Re(mn)(CE||(CE=r(["\n    margin-top: ",";\n"])),De.spacings.space0p1),NE=()=>{const e=Dx(wk),n=Lx();return(0,Qe.jsxs)(ME,{children:[(0,Qe.jsx)("label",{children:"Compilation target"}),(0,Qe.jsx)(FE,{value:e,onChange:e=>n(ss.actions.setCodeTarget(e.currentTarget.value)),children:Object.entries(vx).map((e=>{let[n,{display:t}]=e;return(0,Qe.jsx)("option",{value:n,children:t},n)}))}),(0,Qe.jsx)(PE,{children:vx[e].info})]})},RE=()=>ak.artefacts,LE=e=>e.artefacts.buildStatus,DE=e=>e.artefacts.step,zE=e=>e.console.errors,UE=e=>e.console.warnings;var jE,BE;const VE=Re.div(jE||(jE=r(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    background-color: ",";\n"])),De.colors.bg1),GE=Re(sn)(BE||(BE=r(["\n    position: fixed;\n    right: ",";\n    top: ",";\n    z-index: ",";\n"])),De.spacings.space1,De.spacings.space1,De.zIndexes.closeButton),WE=n=>{let{artefacts:t}=n;const r=(0,e.useRef)(null),a=Lx(),s=Dx(Px),o=Dx(Fx);(0,e.useEffect)((()=>{if(!s)return;const e=hx(t,s,{container:r.current,colorScheme:De.colors.colorScheme,showCredits:!1,initialValues:o,valuesUpdatedCallback:e=>{a(Mx.actions.valuesChanged(e))}});return()=>{console.log("DESTROY"),e.then((e=>(e=>{e.rootElem&&(e.rootElem.innerHTML="",e.rootElem.remove(),console.log("DESTROY PATCH PLAYER",e.rootElem)),e.webpdNode.disconnect(),e.audioContext.suspend()})(e)))}}),[t,s]);return(0,Qe.jsx)(VE,{id:"PatchPlayer",ref:r,children:(0,Qe.jsx)(GE,{onClick:()=>{a(Qw())},children:"Close"})})};var $E;const HE=Re.div($E||($E=r([""]))),KE=()=>{const e=Lx(),n=Dx(Sk),t=Dx(RE),r=Dx(zE),a=Dx(DE),s=Dx(LE);return!n||r||s!==tk?null:(0,Qe.jsxs)(HE,{children:[s===nk&&(0,Qe.jsxs)(nn,{children:["Building ",a," ..."]}),s===tk?"patchPlayer"!==n?(0,Qe.jsx)(Nt,{artefacts:t,format:n,filename:"app"!==n?"output."+n:void 0,showDownloadButton:!0,extraButtons:[(0,Qe.jsx)(sn,{onClick:()=>{e(ss.actions.clear())},children:"clear"},"clear")]}):(0,Qe.jsx)(WE,{artefacts:t}):null]})};var qE,YE;const XE=Re.div(qE||(qE=r(["\n    margin-top: ",";\n"])),De.spacings.space2),JE=Re.input(YE||(YE=r(["\n    margin-left: ",";\n    background-color: ",";\n    width: 2em;\n"])),De.spacings.space0p1,De.colors.bg1p5),ZE=()=>{const e=Dx(kk),n=Lx();return(0,Qe.jsxs)(XE,{children:[(0,Qe.jsx)("label",{children:"Duration of preview in seconds"}),(0,Qe.jsx)(JE,{value:e||"",onChange:e=>{if(""===e.currentTarget.value)return void n(ss.actions.setPreviewDurationSeconds(null));const t=Number.parseInt(e.currentTarget.value);isNaN(t)||n(ss.actions.setPreviewDurationSeconds(t))}})]})};var QE,eO,nO,tO;const rO=Re(gn)(QE||(QE=r([""]))),aO=Re(mn)(eO||(eO=r(["\n    margin-top: ",";\n"])),De.spacings.space2),sO=Re.div(nO||(nO=r(["\n    margin-top: ",";\n"])),De.spacings.space2),oO=Re(on)(tO||(tO=r(["\n    font-size: 150%;\n    padding: 0.1em 0.5em;\n"]))),iO=()=>{const e=Lx(),n=Dx(_k),t=Dx(vk),r=Dx(Sk),a=Dx(LE),s=t&&r&&["pd","pdJson","dspGraph"].includes(t)&&["wav","patchPlayer","app"].includes(r),o=Dx(zE);return n?(0,Qe.jsxs)(rO,{children:[(0,Qe.jsx)(yn,{children:(0,Qe.jsx)(nn,{children:"\u2190 output"})}),(0,Qe.jsx)(bn,{children:r&&!o&&a===tk?(0,Qe.jsx)(KE,{}):(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)(AE,{}),r&&s?(0,Qe.jsx)(NE,{}):null,"wav"===r?(0,Qe.jsx)(ZE,{}):null,r?(0,Qe.jsx)(sO,{children:(0,Qe.jsx)(oO,{onClick:()=>{e(ok.actions.startBuild())},children:"Go !"})}):null,(0,Qe.jsxs)(aO,{children:["For more compilation options"," ",(0,Qe.jsx)("a",{href:"https://github.com/sebpiq/WebPd/#using-the-cli",target:"_blank",rel:"noreferrer",children:"you can use the CLI"}),"."]})]})})]}):null};var lO=t(481),uO=t.n(lO),cO=new URL(t(305),t.b);const dO='<p align="center">\n  <img src="'+uO()(cO)+'" />\n</p>\n\n\x3c!-- intro start --\x3e\n\n<p><strong>WebPd</strong> is a compiler for the <a href="https://puredata.info/">Pure Data</a> audio programming language allowing to run <strong>.pd</strong> patches in web pages.</p>\n<p><strong>WebPd is highly modular and takes a white-box approach to audio programming</strong>. It converts the audio graph and processing objects from a patch into plain human-readable JavaScript or <a href="https://www.assemblyscript.org/">AssemblyScript</a> (*). The pure audio generated code can be then integrated directly in any web application without using WebPd or Pure Data ever again \ud83c\udf08.</p>\n\x3c!-- intro end --\x3e\n\n<p><a href="https://github.com/sponsors/sebpiq"><img src="https://img.shields.io/static/v1?label=Sponsor&message=%E2%9D%A4&logo=GitHub&color=%23ed00d9" alt=""></a></p>\n<p><em>(*) AssemblyScript is a TypeScript-style language which compiles to WebAssembly.</em></p>\n<h2 id="usecase-examples">Usecase examples</h2>\n<ul>\n<li>Publish generative musical works on the web</li>\n<li>Execute, tweak and share patches collectively on any machine</li>\n<li>Produce, filter and playback sound and music data in realtime from web based applications and games</li>\n</ul>\n<h2 id="integration-and-scope">Integration and scope</h2>\n<p>There are plenty of good JavaScript libraries to build interactive visual interfaces such as <a href="https://threejs.org/">Three.js</a>, <a href="https://p5js.org/">p5.js</a>, good old JavaScript / HTML / CSS, etc. Integrating them with a WebPd patch should be fairly easy. An example of such integration is the <em>patch player</em> demo, available through <a href="#using-the-web-compiler">the web compiler</a>.</p>\n<p>WebPd is <strong>not</strong>, in itself, a complete editor and a live performance platform like Pure Data. The Pure Data graphical interface, as well as GEM, are out of the scope of WebPd. WebPd isn&#39;t either a simple executor like libpd. It is rather a lean audio compiler, which generates high-performance, human-readable and easily integrable audio code with no bloat.</p>\n<h2 id="usage">Usage</h2>\n<p><span id="using-the-web-compiler"><span></p>\n<h3 id="web-compiler-and-player">Web compiler and player</h3>\n<p><strong>The web compiler and a patch player are live at the following address: <a href="https://sebpiq.github.io/WebPd_website">https://sebpiq.github.io/WebPd_website</a></strong></p>\n<p>Just upload or give a URL(*) of a patch, compile it just in time and generate an interface allowing to play that patch in realtime in your browser. Once the compilation succeeds, you can copy and share with others the resulting URL from the player(**). This URL contains all the modified parameters of the patch you have played with, so that it is shared completely in its <em>current</em> state.</p>\n<p><em>(*)You can use any public URL of a patch found in the wild (on github, Pure Data forums, etc.).</em></p>\n<p><em>(**)Sharing a compiled patch doesn&#39;t work if you used local files for compilation.</em></p>\n<p><span id="using-the-cli"><span></p>\n<h3 id="command-line-interface">Command line interface</h3>\n<p><em>NOTE : Running the CLI requires node.js version 18 or higher.</em></p>\n<p>The command-line interface (CLI) offers more customization options, including the ability to generate a fully-functional (but bare bones) web page embedding your patch.</p>\n<p>Open a terminal and install the CLI with <a href="https://nodejs.org/">node / npm</a> by running the following command:</p>\n<pre><code>npm install -g webpd\n</code></pre>\n<p>Verify that installation worked by running:</p>\n<pre><code>webpd --help\n</code></pre>\n<p>This should output help for the CLI and will hopefully get you started.</p>\n<h3 id="getting-help">Getting help</h3>\n<p>If you feel stuck, there&#39;s <a href="https://puredata.info/community">plenty of places</a> where you can ask for help. I recommend in particular <a href="https://discord.gg/AZ43djV">the discord server</a> where you can get help quickly and find support from the community.</p>\n<p>If you feel you might have stumbled upon a bug, please report it following <a href="#reporting-a-bug">these simple guidelines</a>.</p>\n<h3 id="you-are-using-webpd">You are using WebPd?</h3>\n<p>Great \ud83c\udf31 ! It helps a lot with motivation to hear that people are using it. Don&#39;t hesitate to let me know by pinging me on twitter <a href="https://twitter.com/sebpiq">@sebpiq</a>, or <a href="https://second-hander.com/">writing me directly by email</a>.</p>\n<p>If you can afford it, you can also <a href="https://opencollective.com/webpd">donate</a> to help move development forward.</p>\n<h2 id="development">Development</h2>\n<h3 id="status--roadmap">Status &amp; roadmap</h3>\n<p>WebPd is currently under heavy development, but it is still a work in progress. A list of implemented objects, features and the roadmap are <a href="https://github.com/sebpiq/WebPd/blob/main/ROADMAP.md">here</a>.</p>\n<p>The project is currently in <em>alpha release state</em> which means that many of your patches will <em>not</em> work out of the box. Many objects and features are indeed still missing. If you feel there is a bug, thanks for reporting it following <a href="#reporting-a-bug">these simple guidelines</a>. If you feel you could develop an object that is missing in WebPd to play a specific patch, see <a href="#contributing">contributing</a>.</p>\n<p><span id="reporting-a-bug"><span></p>\n<h3 id="reporting-a-bug">Reporting a bug</h3>\n<p>If you wish to report a bug:</p>\n<ul>\n<li>First narrow it down. Remove all objects in your patch that are not related with the bug. Try to find the simplest patch with which this bug can be reproduced.</li>\n<li>Then submit a bug report <a href="https://github.com/sebpiq/WebPd/issues">in github</a> with the following template :</li>\n</ul>\n<pre><code>Patch and description -&gt; Upload your minimal patch\n\nCurrent behavior -&gt; Describe shortly how it is working at the moment\n\nExpected behavior -&gt; Describe shortly how it should work instead\n</code></pre>\n<p><span id="contributing"><span></p>\n<h3 id="contributing">Contributing</h3>\n<p>One-time contributions or regular work on the library are more than welcome! Contribution guidelines are coming, meanwhile if you have time and would really like to get involved please get in touch on the issue tracker on GitHub. I would be pleased to help you getting started for contributing.</p>\n<p>In case you would like to try developping a new object, here are some good examples to start with:</p>\n<ul>\n<li><a href="https://github.com/sebpiq/WebPd/blob/develop/src/nodes/nodes/clip.ts">clip.ts</a></li>\n<li><a href="https://github.com/sebpiq/WebPd/blob/develop/src/nodes/nodes/clip~.ts">clip~.ts</a></li>\n</ul>\n<p>If you want to dig deeper into the code, WebPd is built in several sub-packages in addition to this one which combines them all : </p>\n<ul>\n<li>Pd file parser : <a href="https://github.com/sebpiq/WebPd_pd-parser">https://github.com/sebpiq/WebPd_pd-parser</a></li>\n<li>WebPd compiler : <a href="https://github.com/sebpiq/WebPd_compiler">https://github.com/sebpiq/WebPd_compiler</a></li>\n<li>WebPd runtime : <a href="https://github.com/sebpiq/WebPd_runtime">https://github.com/sebpiq/WebPd_runtime</a></li>\n</ul>\n<h2 id="license">License</h2>\n<p>WebPd is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License version 3 as published by the Free Software Foundation.</p>\n<p>WebPd is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\nGNU Lesser General Public License or read the <a href="https://github.com/sebpiq/WebPd/blob/main/COPYING.LESSER">COPYING.LESSER</a> file for more details.</p>\n<h2 id="authors">Authors</h2>\n<ul>\n<li>S\xe9bastien Piquemal <a href="mailto:&#x73;&#101;&#98;&#112;&#105;&#113;&#x40;&#x70;&#114;&#x6f;&#116;&#x6f;&#110;&#x6d;&#x61;&#x69;&#108;&#46;&#99;&#x6f;&#x6d;">&#x73;&#101;&#98;&#112;&#105;&#113;&#x40;&#x70;&#114;&#x6f;&#116;&#x6f;&#110;&#x6d;&#x61;&#x69;&#108;&#46;&#99;&#x6f;&#x6d;</a></li>\n<li>Chris McCormick</li>\n<li>Brandon James</li>\n<li>mgsx-dev</li>\n<li>Atul Varma</li>\n<li>Ulric Wilfred</li>\n<li>Paul Money</li>\n</ul>\n<h2 id="acknowledgment-and-sponsors">Acknowledgment and sponsors</h2>\n<p>This project has been sponsored by the <a href="https://dafneplus.eu/">DAFNE+</a> european research project funded by the European Union within the &quot;Horizon Europe&quot; program (Grant Agreement 101061548) and <a href="https://www.ircam.fr">IRCAM</a> within the WAM team from december 2022 to march 2023.</p>\n';var fO;function pO(){return pO=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},pO.apply(this,arguments)}function hO(n,t){let{title:r,titleId:a,...s}=n;return e.createElement("svg",pO({width:98,height:96,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},s),r?e.createElement("title",{id:a},r):null,fO||(fO=e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z",fill:"#24292f"})))}const mO=e.forwardRef(hO);t.p;function gO(){return gO=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},gO.apply(this,arguments)}function yO(n,t){let{title:r,titleId:a,...s}=n;return e.createElement("svg",gO({width:700,height:736,viewBox:"0 0 525 552",id:"svg2647",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},s),r?e.createElement("title",{id:a},r):null,e.createElement("path",{d:"M 110.52407,0.01240603 V 27.644204 H 55.25943 V 55.276003 L 27.631798,55.27194 V 82.903738 H 0 V 193.433 h 27.631798 v 55.26464 l 27.627632,-0.008 v 27.6318 h 27.631798 v 27.6318 h 27.631802 v 27.63179 h 27.63179 v 27.6318 h 27.6318 v 27.6318 h 27.6318 v 55.26464 h 27.6318 v 55.26464 h 27.6318 v 55.26463 h 27.6318 v -55.26463 h 27.63179 v -55.26464 h 27.6318 V 386.8483 h 27.6318 v -27.6318 h 27.6318 v -27.6318 h 27.6318 v -27.63179 h 27.6318 v -27.6318 h 27.63179 v -27.6318 h 27.6318 V 193.42467 H 525 V 82.895395 H 497.3682 V 55.263596 H 469.7364 V 27.631798 H 414.47177 V 0 h -55.26464 v 27.631798 h -55.26464 v 27.631798 h -27.6318 v 27.631799 h -27.6318 V 55.263596 h -27.6318 V 27.631798 l -27.63596,0.01221 h -27.6318 V 0.01220812 Z",id:"path2645",style:{strokeWidth:1.04165}}))}const bO=e.forwardRef(yO);t.p;var vO,_O,SO,wO,kO,IO;const TO="\x3c!-- intro start --\x3e",xO=dO.slice(dO.indexOf(TO)+20,dO.indexOf("\x3c!-- intro end --\x3e")),AO=Re(tn)(vO||(vO=r(["\n    background: linear-gradient(\n        180deg,\n        rgba(0, 0, 0, 0) 10%,\n        "," 50%,\n        "," 67%\n    );\n"])),De.colors.bg2,De.colors.bg2),EO=Re.h1(_O||(_O=r(["\n    position: relative;\n    bottom: 0.15em;\n    font-size: 600%;\n    font-family: ",";\n    color: ",";\n    margin: 0;\n    padding: 0;\n    margin-bottom: ",";\n    line-height: 100%;\n    letter-spacing: 0.3em;\n    text-align: center;\n    @media (max-width: 700px) {\n        font-size: 450%;\n    }\n    @media (max-width: 400px) {\n        font-size: 350%;\n    }\n"])),De.fonts.title,De.colors.colorScheme.next(),De.spacings.space2),OO=Re.div(SO||(SO=r(["\n    & > *:last-child {\n        margin-bottom: 0;\n    }\n"]))),CO=Re.div(wO||(wO=r(["\n    margin-top: ",";\n    display: flex;\n    flex-direction: row;\n"])),De.spacings.space1),MO="\n    font-family: ".concat(De.fonts.title,";\n    font-size: 85%;\n    text-decoration: underline;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    width: fit-content;\n\n    svg {\n        height: 1em;\n        width: 1em;\n        display: inline;\n        margin-left: 0.5em;\n        path {\n            fill: ").concat(De.colors.fg1,";\n        }\n    }\n"),FO=Re.a(kO||(kO=r(["\n    ","\n"])),MO),PO=Re.a(IO||(IO=r(["\n    ","\n    margin-left: ",";\n"])),MO,De.spacings.space1),NO=()=>(0,Qe.jsxs)(AO,{children:[(0,Qe.jsx)(EO,{children:"WebPd"}),(0,Qe.jsx)(OO,{dangerouslySetInnerHTML:{__html:xO}}),(0,Qe.jsxs)(CO,{children:[(0,Qe.jsxs)(FO,{href:"https://github.com/sebpiq/WebPd",target:"_blank",rel:"noopener",children:["Read more",(0,Qe.jsx)(mO,{viewBox:"0 0 97.627 96"})]}),(0,Qe.jsxs)(PO,{href:"https://opencollective.com/webpd",target:"_blank",rel:"noopener",children:["Donate",(0,Qe.jsx)(bO,{})]})]})]});var RO,LO,DO,zO,UO;const jO=Re(tn)(RO||(RO=r([""]))),BO=Re.pre(LO||(LO=r(["\n    overflow: auto;\n    margin: 0;\n"]))),VO=Re.pre(DO||(DO=r(["\n    overflow: auto;\n    margin: 0;\n    color: ",";\n"])),De.colors.colorScheme.next()),GO=Re.div(zO||(zO=r(["\n    margin-top: ",";\n"])),De.spacings.space1),WO=Re(mn)(UO||(UO=r(["\n    margin-top: ",";\n"])),De.spacings.space2),$O=()=>{const e=Dx(zE),n=Dx(UE),t=e&&e.length,r=n&&n.length;if(!t&&!r)return null;const a=(0,Qe.jsxs)(Qe.Fragment,{children:["WebPd is still in alpha release and many patches will likely not work (for now). You can find the list of implemented objects ",(0,Qe.jsx)("a",{href:"https://github.com/sebpiq/WebPd/blob/main/ROADMAP.md",target:"_blank",rel:"noreferrer",children:"here"}),". If failure was caused by a missing feature, you can either"," ",(0,Qe.jsx)("a",{href:"https://opencollective.com/webpd",target:"_blank",rel:"noreferrer",children:"donate"})," ","to speed up its implementation, or you can directly"," ",(0,Qe.jsx)("a",{href:"https://github.com/sebpiq/WebPd/#contributing",target:"_blank",rel:"noreferrer",children:"contribute to development"}),". If, on the other hand, this looks like a bug, thanks for"," ",(0,Qe.jsx)("a",{href:"https://github.com/sebpiq/WebPd/#reporting-a-bug",target:"_blank",rel:"noreferrer",children:"reporting it here."})]});return(0,Qe.jsxs)(jO,{children:[(0,Qe.jsx)(nn,{children:"Compilation output :"}),(0,Qe.jsxs)(GO,{children:[r?n.map(((e,n)=>(0,Qe.jsxs)(BO,{children:["WARNING : ",e]},n))):null,t?e.map(((e,n)=>(0,Qe.jsxs)(VO,{children:["ERROR : ",e]},n))):null]}),t||r?(0,Qe.jsxs)(WO,{children:[t?"It seems like your compilation failed \ud83d\ude22.":"It seems like your compilation succeeded but with warnings \ud83d\ude05.",(0,Qe.jsx)("br",{}),a]}):null]})};var HO;const KO=Re(tn)(HO||(HO=r(["\n    text-align: center;\n"]))),qO=()=>(0,Qe.jsx)(KO,{children:(0,Qe.jsx)(en,{children:"\u2193 Online compiler \u2193"})});var YO,XO,JO,ZO;const QO=Re(tn)(YO||(YO=r(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    & * {\n        font-size: 90%;\n    }\n    background: linear-gradient(\n        180deg,\n        "," 33%,\n        "," 60%,\n        rgba(0, 0, 0, 0) 100%\n    );\n    padding-bottom: calc("," * 2);\n"])),De.colors.bg2,De.colors.bg2,De.spacings.space2),eC=Re.div(XO||(XO=r(["\n    color: ",";\n    margin-right: 1em;\n"])),De.colors.fg2),nC=Re.div(JO||(JO=r(["\n    display: flex;\n    flex-direction: row;\n    @media (min-width: ","px) {\n        min-width: 10em;\n    }\n    @media (max-width: ","px) {\n        flex-direction: column;\n        min-width: 5em;\n    }\n"])),De.devices.mobile.maxWidth,De.devices.mobile.maxWidth),tC=Re.a(ZO||(ZO=r(["\n    text-align: right;\n    color: ",";\n\n    svg {\n        height: 1em;\n        width: 1em;\n        display: inline;\n        position: relative;\n        top: 0.2em;\n        margin-left: 0.5em;\n        path {\n            fill: ",";\n        }\n    }\n\n    @media (min-width: ","px) {\n        width: 10em;\n    }\n\n    @media (max-width: ","px) {\n        margin-bottom: ",";\n        &:last-child {\n            margin-bottom: 0;\n        }\n    }\n"])),De.colors.fg2,De.colors.fg2,De.devices.mobile.maxWidth,De.devices.mobile.maxWidth,De.spacings.space1),rC=()=>(0,Qe.jsxs)(QO,{children:[(0,Qe.jsx)(eC,{children:"WebPd is an open-source project released under the LGPL v3.0. Files uploaded on this web site are not stored on any server."}),(0,Qe.jsxs)(nC,{children:[(0,Qe.jsxs)(tC,{href:"https://github.com/sebpiq/WebPd",target:"_blank",rel:"noopener",children:["GitHub",(0,Qe.jsx)(mO,{viewBox:"0 0 97.627 96"})]}),(0,Qe.jsxs)(tC,{href:"https://opencollective.com/webpd",target:"_blank",rel:"noopener",children:["Donate",(0,Qe.jsx)(bO,{})]})]})]});var aC,sC;const oC=Re(tn)(aC||(aC=r([""]))),iC=Re.pre(sC||(sC=r(["\n    max-height: 25vh;\n    overflow: auto;\n"]))),lC=()=>{const e=Dx(RE);return(0,Qe.jsxs)(oC,{children:[(0,Qe.jsx)(en,{children:"Debugging"}),e.pdJson?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)(nn,{children:["Pd JSON"," ",(0,Qe.jsx)(sn,{onClick:()=>{En("debug.pd.json",JSON.stringify(e.pdJson,null,2),"application/json")},children:"Download"})]}),(0,Qe.jsx)(iC,{children:JSON.stringify(e.pdJson,null,2)})]}):null,e.dspGraph?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)(nn,{children:["DSP Graph"," ",(0,Qe.jsx)(sn,{onClick:()=>{En("debug.dsp-graph.json",JSON.stringify(e.dspGraph,null,2),"application/json")},children:"Download"})]}),(0,Qe.jsx)(iC,{children:JSON.stringify(e.dspGraph,null,2)})]}):null,e.javascript?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)(nn,{children:["Compiled JS"," ",(0,Qe.jsx)(sn,{onClick:()=>{En("debug.code.js",e.javascript,"application/javascript")},children:"Download"})]}),(0,Qe.jsx)(iC,{children:e.javascript})]}):null,e.assemblyscript?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)(nn,{children:["Compiled ASC"," ",(0,Qe.jsx)(sn,{onClick:()=>{En("debug.code.asc",e.assemblyscript,"application/assemblyscript")},children:"Download"})]}),(0,Qe.jsx)(iC,{children:e.assemblyscript})]}):null]})};var uC,cC,dC,fC,pC;const hC=function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var s=ve.apply(void 0,[n].concat(r)),o="sc-global-"+Ie(JSON.stringify(s)),i=new Ne(s,o);function l(n){var t=ie(),r=le(),a=(0,e.useContext)(Ce),s=(0,e.useRef)(t.allocateGSInstance(o)).current;return t.server&&u(s,n,t,a,r),(0,e.useLayoutEffect)((function(){if(!t.server)return u(s,n,t,a,r),function(){return i.removeStyles(s,t)}}),[s,n,t,a,r]),null}function u(e,n,t,r,a){if(i.isStatic)i.renderStyles(e,T,t,a);else{var s=h({},n,{theme:_e(n,r,l.defaultProps)});i.renderStyles(e,s,t,a)}}return e.memo(l)}(uC||(uC=r(["\n    @font-face {\n        font-family: 'Rajdhani';\n        src: local('Rajdhani'),\n            url('./fonts/Rajdhani/Rajdhani-Medium.ttf') format('woff');\n    }\n\n    @font-face {\n        font-family: 'Silkscreen';\n        src: local('Silkscreen'),\n            url('./fonts/Silkscreen/Silkscreen-Regular.ttf') format('woff');\n    }\n\n    body, html {\n        padding: 0;\n        margin: 0;\n        background-color: ",";\n    }\n\n    * { \n        box-sizing: border-box;\n        /* To enable flex items shrink : https://stackoverflow.com/questions/36247140/why-dont-flex-items-shrink-past-content-size */\n        min-width: 0; \n        min-height: 0;\n        font-size: ","px;\n        @media (max-width: ","px) {\n            font-size: ","px;\n        }\n        font-family: ",";\n        color: ",";\n        scrollbar-width: thin;\n        &::-webkit-scrollbar {\n            width: calc("," / 4);\n            height: calc("," / 4);\n        }\n        &::-webkit-scrollbar-track {\n            background: transparent;\n        }\n        &::-webkit-scrollbar-thumb {\n            background-color: ",";\n            border-radius: 20px;\n        }\n    }\n\n    input {\n        background-color: ",";\n        border: none;\n        font-size: 100%;\n    }\n\n    textarea:focus, input:focus{\n        outline: "," solid 1px;\n    }\n"])),De.colors.bg1,De.devices.desktop.fontSize,De.devices.mobile.maxWidth,De.devices.mobile.fontSize,De.fonts.default,De.colors.fg1,De.spacings.space1,De.spacings.space1,De.colors.fg2,De.colors.bg2,De.colors.fg2),mC=Re.div(cC||(cC=r(["\n    display: flex;\n    flex-direction: column;\n    min-height: 100vh;\n    & > *:last-child {\n        flex: auto;\n    }\n"]))),gC=Re.div(dC||(dC=r(["\n    position: relative;\n"]))),yC=Re.div(fC||(fC=r(["\n    margin: auto;\n    width: 100%;\n    position: absolute;\n    height: 100%;\n    z-index: 3;\n"]))),bC=Re((e=>{let{text:n,className:t}=e;return(0,Qe.jsx)(vn,{className:t,children:n})}))(pC||(pC=r(["\n    max-width: ",";\n    width: 100%;\n    margin: 0 auto;\n    height: 100%;\n    z-index: ",";\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: ","ee;\n    font-size: 200%;\n"])),De.dimensions.maxContentWidth,De.zIndexes.spinner,De.colors.bg2),vC=()=>{const e=Dx(_x),n=Dx(LE)===nk,t=Dx(wx);return e?(0,Qe.jsxs)(mC,{children:[(0,Qe.jsx)(NO,{}),(0,Qe.jsx)(qO,{}),(0,Qe.jsxs)(gC,{children:[n?(0,Qe.jsx)(yC,{children:(0,Qe.jsx)(bC,{text:"building..."})}):null,(0,Qe.jsx)(bE,{}),(0,Qe.jsx)(iO,{}),t?(0,Qe.jsx)(lC,{}):null,(0,Qe.jsx)($O,{})]}),(0,Qe.jsx)(rC,{})]}):(0,Qe.jsx)(Qe.Fragment,{children:(0,Qe.jsx)(NO,{})})},_C=()=>(0,Qe.jsxs)(qa,{store:Rx,children:[(0,Qe.jsx)(hC,{}),(0,Qe.jsx)(vC,{})]}),SC=e=>{e&&e instanceof Function&&t.e(787).then(t.bind(t,787)).then((n=>{let{getCLS:t,getFID:r,getFCP:a,getLCP:s,getTTFB:o}=n;t(e),r(e),a(e),s(e),o(e)}))};n.createRoot(document.getElementById("root")).render((0,Qe.jsx)(_C,{})),SC()})()})();
//# sourceMappingURL=main.fcd86f13.js.map