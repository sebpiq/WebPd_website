/*! For license information please see main.ebc45741.js.LICENSE.txt */
(()=>{var e={936:(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>a});var r={};try{!function(e,n){if(new e("q=%2B").get("q")!==n||new e({q:n}).get("q")!==n||new e([["q",n]]).get("q")!==n||"q=%0A"!==new e("q=\n").toString()||"q=+%26"!==new e({q:" &"}).toString()||"q=%25zx"!==new e({q:"%zx"}).toString())throw e;r.URLSearchParams=e}(URLSearchParams,"+")}catch(URLSearchParams){!function(e,n,t){var a=e.create,o=e.defineProperty,i=/[!'\(\)~]|%20|%00/g,s=/%(?![0-9a-fA-F]{2})/g,l=/\+/g,u={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},c={append:function(e,n){h(this._ungap,e,n)},delete:function(e){delete this._ungap[e]},get:function(e){return this.has(e)?this._ungap[e][0]:null},getAll:function(e){return this.has(e)?this._ungap[e].slice(0):[]},has:function(e){return e in this._ungap},set:function(e,t){this._ungap[e]=[n(t)]},forEach:function(e,t){var r=this;for(var a in r._ungap)r._ungap[a].forEach(o,a);function o(o){e.call(t,o,n(a),r)}},toJSON:function(){return{}},toString:function(){var e=[];for(var n in this._ungap)for(var t=g(n),r=0,a=this._ungap[n];r<a.length;r++)e.push(t+"="+g(a[r]));return e.join("&")}};for(var d in c)o(p.prototype,d,{configurable:!0,writable:!0,value:c[d]});function p(e){var n=a(null);switch(o(this,"_ungap",{value:n}),!0){case!e:break;case"string"===typeof e:"?"===e.charAt(0)&&(e=e.slice(1));for(var r=e.split("&"),i=0,s=r.length;i<s;i++){var l=(u=r[i]).indexOf("=");-1<l?h(n,m(u.slice(0,l)),m(u.slice(l+1))):u.length&&h(n,m(u),"")}break;case t(e):for(i=0,s=e.length;i<s;i++){var u;h(n,(u=e[i])[0],u[1])}break;case"forEach"in e:e.forEach(f,n);break;default:for(var c in e)h(n,c,e[c])}}function f(e,n){h(this,n,e)}function h(e,n,r){var a=t(r)?r.join(","):r;n in e?e[n].push(a):e[n]=[a]}function m(e){return decodeURIComponent(e.replace(s,"%25").replace(l," "))}function g(e){return encodeURIComponent(e).replace(i,y)}function y(e){return u[e]}r.URLSearchParams=p}(Object,String,Array.isArray)}!function(e){var n=!1;try{n=!!Symbol.iterator}catch(r){}function t(e,t){var r=[];return e.forEach(t,r),n?r[Symbol.iterator]():{next:function(){var e=r.shift();return{done:void 0===e,value:e}}}}"forEach"in e||(e.forEach=function(e,n){var t=this,r=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach((function(a){a.length&&!(a in r)&&(r[a]=t.getAll(a)).forEach((function(r){e.call(n,r,a,t)}))}))}),"keys"in e||(e.keys=function(){return t(this,(function(e,n){this.push(n)}))}),"values"in e||(e.values=function(){return t(this,(function(e,n){this.push(e)}))}),"entries"in e||(e.entries=function(){return t(this,(function(e,n){this.push([n,e])}))}),n&&!(Symbol.iterator in e)&&(e[Symbol.iterator]=e.entries),"sort"in e||(e.sort=function(){for(var e,n,t,r=this.entries(),a=r.next(),o=a.done,i=[],s=Object.create(null);!o;)n=(t=a.value)[0],i.push(n),n in s||(s[n]=[]),s[n].push(t[1]),o=(a=r.next()).done;for(i.sort(),e=0;e<i.length;e++)this.delete(i[e]);for(e=0;e<i.length;e++)n=i[e],this.append(n,s[n].shift())}),function(n){var t=n.defineProperty,r=n.getOwnPropertyDescriptor,a=function(n){var t=n.append;n.append=e.append,URLSearchParams.call(n,n._usp.search.slice(1)),n.append=t},o=function(e,n){if(!(e instanceof n))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+n.name)},i=function(i){var s,l,u=i.prototype,c=r(u,"searchParams"),d=r(u,"href"),p=r(u,"search");!c&&p&&p.set&&(l=function(n){function r(t,r){e.append.call(this,t,r),t=this.toString(),n.set.call(this._usp,t?"?"+t:"")}function a(t){e.delete.call(this,t),t=this.toString(),n.set.call(this._usp,t?"?"+t:"")}function o(t,r){e.set.call(this,t,r),t=this.toString(),n.set.call(this._usp,t?"?"+t:"")}return function(e,n){return e.append=r,e.delete=a,e.set=o,t(e,"_usp",{configurable:!0,writable:!0,value:n})}}(p),s=function(e,n){return t(e,"_searchParams",{configurable:!0,writable:!0,value:l(n,e)}),n},n.defineProperties(u,{href:{get:function(){return d.get.call(this)},set:function(e){var n=this._searchParams;d.set.call(this,e),n&&a(n)}},search:{get:function(){return p.get.call(this)},set:function(e){var n=this._searchParams;p.set.call(this,e),n&&a(n)}},searchParams:{get:function(){return o(this,i),this._searchParams||s(this,new URLSearchParams(this.search.slice(1)))},set:function(e){o(this,i),s(this,e)}}}))};try{i(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&i(URL)}catch(s){}}(Object)}(r.URLSearchParams.prototype);const a=r.URLSearchParams},998:(e,n)=>{"use strict";n.Z=function(e,n){if(e&&n){var t=Array.isArray(n)?n:n.split(","),r=e.name||"",a=(e.type||"").toLowerCase(),o=a.replace(/\/.*$/,"");return t.some((function(e){var n=e.trim().toLowerCase();return"."===n.charAt(0)?r.toLowerCase().endsWith(n):n.endsWith("/*")?o===n.replace(/\/.*$/,""):a===n}))}return!0}},588:(e,n,t)=>{"use strict";t.r(n),t.d(n,{createBrowserHistory:()=>A,createHashHistory:()=>M,createLocation:()=>b,createMemoryHistory:()=>F,createPath:()=>y,locationsAreEqual:()=>v,parsePath:()=>g});var r=t(462);function a(e){return"/"===e.charAt(0)}function o(e,n){for(var t=n,r=t+1,a=e.length;r<a;t+=1,r+=1)e[t]=e[r];e.pop()}const i=function(e,n){void 0===n&&(n="");var t,r=e&&e.split("/")||[],i=n&&n.split("/")||[],s=e&&a(e),l=n&&a(n),u=s||l;if(e&&a(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var c=i[i.length-1];t="."===c||".."===c||""===c}else t=!1;for(var d=0,p=i.length;p>=0;p--){var f=i[p];"."===f?o(i,p):".."===f?(o(i,p),d++):d&&(o(i,p),d--)}if(!u)for(;d--;d)i.unshift("..");!u||""===i[0]||i[0]&&a(i[0])||i.unshift("");var h=i.join("/");return t&&"/"!==h.substr(-1)&&(h+="/"),h};function s(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}const l=function e(n,t){if(n===t)return!0;if(null==n||null==t)return!1;if(Array.isArray(n))return Array.isArray(t)&&n.length===t.length&&n.every((function(n,r){return e(n,t[r])}));if("object"===typeof n||"object"===typeof t){var r=s(n),a=s(t);return r!==n||a!==t?e(r,a):Object.keys(Object.assign({},n,t)).every((function(r){return e(n[r],t[r])}))}return!1};var u=!0,c="Invariant failed";function d(e,n){if(!e){if(u)throw new Error(c);var t="function"===typeof n?n():n,r=t?"".concat(c,": ").concat(t):c;throw new Error(r)}}function p(e){return"/"===e.charAt(0)?e:"/"+e}function f(e){return"/"===e.charAt(0)?e.substr(1):e}function h(e,n){return function(e,n){return 0===e.toLowerCase().indexOf(n.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(n.length))}(e,n)?e.substr(n.length):e}function m(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function g(e){var n=e||"/",t="",r="",a=n.indexOf("#");-1!==a&&(r=n.substr(a),n=n.substr(0,a));var o=n.indexOf("?");return-1!==o&&(t=n.substr(o),n=n.substr(0,o)),{pathname:n,search:"?"===t?"":t,hash:"#"===r?"":r}}function y(e){var n=e.pathname,t=e.search,r=e.hash,a=n||"/";return t&&"?"!==t&&(a+="?"===t.charAt(0)?t:"?"+t),r&&"#"!==r&&(a+="#"===r.charAt(0)?r:"#"+r),a}function b(e,n,t,a){var o;"string"===typeof e?(o=g(e)).state=n:(void 0===(o=(0,r.Z)({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==n&&void 0===o.state&&(o.state=n));try{o.pathname=decodeURI(o.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return t&&(o.key=t),a?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=i(o.pathname,a.pathname)):o.pathname=a.pathname:o.pathname||(o.pathname="/"),o}function v(e,n){return e.pathname===n.pathname&&e.search===n.search&&e.hash===n.hash&&e.key===n.key&&l(e.state,n.state)}function w(){var e=null;var n=[];return{setPrompt:function(n){return e=n,function(){e===n&&(e=null)}},confirmTransitionTo:function(n,t,r,a){if(null!=e){var o="function"===typeof e?e(n,t):e;"string"===typeof o?"function"===typeof r?r(o,a):a(!0):a(!1!==o)}else a(!0)},appendListener:function(e){var t=!0;function r(){t&&e.apply(void 0,arguments)}return n.push(r),function(){t=!1,n=n.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.forEach((function(e){return e.apply(void 0,t)}))}}}var S=!("undefined"===typeof window||!window.document||!window.document.createElement);function k(e,n){n(window.confirm(e))}var x="popstate",I="hashchange";function _(){try{return window.history.state||{}}catch(e){return{}}}function A(e){void 0===e&&(e={}),S||d(!1);var n=window.history,t=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),a=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,i=o.forceRefresh,s=void 0!==i&&i,l=o.getUserConfirmation,u=void 0===l?k:l,c=o.keyLength,f=void 0===c?6:c,g=e.basename?m(p(e.basename)):"";function v(e){var n=e||{},t=n.key,r=n.state,a=window.location,o=a.pathname+a.search+a.hash;return g&&(o=h(o,g)),b(o,r,t)}function A(){return Math.random().toString(36).substr(2,f)}var T=w();function E(e){(0,r.Z)(B,e),B.length=n.length,T.notifyListeners(B.location,B.action)}function O(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||M(v(e.state))}function C(){M(v(_()))}var N=!1;function M(e){if(N)N=!1,E();else{T.confirmTransitionTo(e,"POP",u,(function(n){n?E({action:"POP",location:e}):function(e){var n=B.location,t=F.indexOf(n.key);-1===t&&(t=0);var r=F.indexOf(e.key);-1===r&&(r=0);var a=t-r;a&&(N=!0,L(a))}(e)}))}}var P=v(_()),F=[P.key];function R(e){return g+y(e)}function L(e){n.go(e)}var D=0;function j(e){1===(D+=e)&&1===e?(window.addEventListener(x,O),a&&window.addEventListener(I,C)):0===D&&(window.removeEventListener(x,O),a&&window.removeEventListener(I,C))}var z=!1;var B={length:n.length,action:"POP",location:P,createHref:R,push:function(e,r){var a="PUSH",o=b(e,r,A(),B.location);T.confirmTransitionTo(o,a,u,(function(e){if(e){var r=R(o),i=o.key,l=o.state;if(t)if(n.pushState({key:i,state:l},null,r),s)window.location.href=r;else{var u=F.indexOf(B.location.key),c=F.slice(0,u+1);c.push(o.key),F=c,E({action:a,location:o})}else window.location.href=r}}))},replace:function(e,r){var a="REPLACE",o=b(e,r,A(),B.location);T.confirmTransitionTo(o,a,u,(function(e){if(e){var r=R(o),i=o.key,l=o.state;if(t)if(n.replaceState({key:i,state:l},null,r),s)window.location.replace(r);else{var u=F.indexOf(B.location.key);-1!==u&&(F[u]=o.key),E({action:a,location:o})}else window.location.replace(r)}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var n=T.setPrompt(e);return z||(j(1),z=!0),function(){return z&&(z=!1,j(-1)),n()}},listen:function(e){var n=T.appendListener(e);return j(1),function(){j(-1),n()}}};return B}var T="hashchange",E={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+f(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:f,decodePath:p},slash:{encodePath:p,decodePath:p}};function O(e){var n=e.indexOf("#");return-1===n?e:e.slice(0,n)}function C(){var e=window.location.href,n=e.indexOf("#");return-1===n?"":e.substring(n+1)}function N(e){window.location.replace(O(window.location.href)+"#"+e)}function M(e){void 0===e&&(e={}),S||d(!1);var n=window.history,t=(window.navigator.userAgent.indexOf("Firefox"),e),a=t.getUserConfirmation,o=void 0===a?k:a,i=t.hashType,s=void 0===i?"slash":i,l=e.basename?m(p(e.basename)):"",u=E[s],c=u.encodePath,f=u.decodePath;function g(){var e=f(C());return l&&(e=h(e,l)),b(e)}var v=w();function x(e){(0,r.Z)(B,e),B.length=n.length,v.notifyListeners(B.location,B.action)}var I=!1,_=null;function A(){var e,n,t=C(),r=c(t);if(t!==r)N(r);else{var a=g(),i=B.location;if(!I&&(n=a,(e=i).pathname===n.pathname&&e.search===n.search&&e.hash===n.hash))return;if(_===y(a))return;_=null,function(e){if(I)I=!1,x();else{var n="POP";v.confirmTransitionTo(e,n,o,(function(t){t?x({action:n,location:e}):function(e){var n=B.location,t=R.lastIndexOf(y(n));-1===t&&(t=0);var r=R.lastIndexOf(y(e));-1===r&&(r=0);var a=t-r;a&&(I=!0,L(a))}(e)}))}}(a)}}var M=C(),P=c(M);M!==P&&N(P);var F=g(),R=[y(F)];function L(e){n.go(e)}var D=0;function j(e){1===(D+=e)&&1===e?window.addEventListener(T,A):0===D&&window.removeEventListener(T,A)}var z=!1;var B={length:n.length,action:"POP",location:F,createHref:function(e){var n=document.querySelector("base"),t="";return n&&n.getAttribute("href")&&(t=O(window.location.href)),t+"#"+c(l+y(e))},push:function(e,n){var t="PUSH",r=b(e,void 0,void 0,B.location);v.confirmTransitionTo(r,t,o,(function(e){if(e){var n=y(r),a=c(l+n);if(C()!==a){_=n,function(e){window.location.hash=e}(a);var o=R.lastIndexOf(y(B.location)),i=R.slice(0,o+1);i.push(n),R=i,x({action:t,location:r})}else x()}}))},replace:function(e,n){var t="REPLACE",r=b(e,void 0,void 0,B.location);v.confirmTransitionTo(r,t,o,(function(e){if(e){var n=y(r),a=c(l+n);C()!==a&&(_=n,N(a));var o=R.indexOf(y(B.location));-1!==o&&(R[o]=n),x({action:t,location:r})}}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);var n=v.setPrompt(e);return z||(j(1),z=!0),function(){return z&&(z=!1,j(-1)),n()}},listen:function(e){var n=v.appendListener(e);return j(1),function(){j(-1),n()}}};return B}function P(e,n,t){return Math.min(Math.max(e,n),t)}function F(e){void 0===e&&(e={});var n=e,t=n.getUserConfirmation,a=n.initialEntries,o=void 0===a?["/"]:a,i=n.initialIndex,s=void 0===i?0:i,l=n.keyLength,u=void 0===l?6:l,c=w();function d(e){(0,r.Z)(v,e),v.length=v.entries.length,c.notifyListeners(v.location,v.action)}function p(){return Math.random().toString(36).substr(2,u)}var f=P(s,0,o.length-1),h=o.map((function(e){return b(e,void 0,"string"===typeof e?p():e.key||p())})),m=y;function g(e){var n=P(v.index+e,0,v.entries.length-1),r=v.entries[n];c.confirmTransitionTo(r,"POP",t,(function(e){e?d({action:"POP",location:r,index:n}):d()}))}var v={length:h.length,action:"POP",location:h[f],index:f,entries:h,createHref:m,push:function(e,n){var r="PUSH",a=b(e,n,p(),v.location);c.confirmTransitionTo(a,r,t,(function(e){if(e){var n=v.index+1,t=v.entries.slice(0);t.length>n?t.splice(n,t.length-n,a):t.push(a),d({action:r,location:a,index:n,entries:t})}}))},replace:function(e,n){var r="REPLACE",a=b(e,n,p(),v.location);c.confirmTransitionTo(a,r,t,(function(e){e&&(v.entries[v.index]=a,d({action:r,location:a}))}))},go:g,goBack:function(){g(-1)},goForward:function(){g(1)},canGo:function(e){var n=v.index+e;return n>=0&&n<v.entries.length},block:function(e){return void 0===e&&(e=!1),c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return v}},110:(e,n,t)=>{"use strict";var r=t(309),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function l(e){return r.isMemo(e)?i:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=i;var u=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,h=Object.prototype;e.exports=function e(n,t,r){if("string"!==typeof t){if(h){var a=f(t);a&&a!==h&&e(n,a,r)}var i=c(t);d&&(i=i.concat(d(t)));for(var s=l(n),m=l(t),g=0;g<i.length;++g){var y=i[g];if(!o[y]&&(!r||!r[y])&&(!m||!m[y])&&(!s||!s[y])){var b=p(t,y);try{u(n,y,b)}catch(v){}}}}return n}},746:(e,n)=>{"use strict";var t="function"===typeof Symbol&&Symbol.for,r=t?Symbol.for("react.element"):60103,a=t?Symbol.for("react.portal"):60106,o=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,l=t?Symbol.for("react.provider"):60109,u=t?Symbol.for("react.context"):60110,c=t?Symbol.for("react.async_mode"):60111,d=t?Symbol.for("react.concurrent_mode"):60111,p=t?Symbol.for("react.forward_ref"):60112,f=t?Symbol.for("react.suspense"):60113,h=t?Symbol.for("react.suspense_list"):60120,m=t?Symbol.for("react.memo"):60115,g=t?Symbol.for("react.lazy"):60116,y=t?Symbol.for("react.block"):60121,b=t?Symbol.for("react.fundamental"):60117,v=t?Symbol.for("react.responder"):60118,w=t?Symbol.for("react.scope"):60119;function S(e){if("object"===typeof e&&null!==e){var n=e.$$typeof;switch(n){case r:switch(e=e.type){case c:case d:case o:case s:case i:case f:return e;default:switch(e=e&&e.$$typeof){case u:case p:case g:case m:case l:return e;default:return n}}case a:return n}}}function k(e){return S(e)===d}n.AsyncMode=c,n.ConcurrentMode=d,n.ContextConsumer=u,n.ContextProvider=l,n.Element=r,n.ForwardRef=p,n.Fragment=o,n.Lazy=g,n.Memo=m,n.Portal=a,n.Profiler=s,n.StrictMode=i,n.Suspense=f,n.isAsyncMode=function(e){return k(e)||S(e)===c},n.isConcurrentMode=k,n.isContextConsumer=function(e){return S(e)===u},n.isContextProvider=function(e){return S(e)===l},n.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},n.isForwardRef=function(e){return S(e)===p},n.isFragment=function(e){return S(e)===o},n.isLazy=function(e){return S(e)===g},n.isMemo=function(e){return S(e)===m},n.isPortal=function(e){return S(e)===a},n.isProfiler=function(e){return S(e)===s},n.isStrictMode=function(e){return S(e)===i},n.isSuspense=function(e){return S(e)===f},n.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===d||e===s||e===i||e===f||e===h||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===u||e.$$typeof===p||e.$$typeof===b||e.$$typeof===v||e.$$typeof===w||e.$$typeof===y)},n.typeOf=S},309:(e,n,t)=>{"use strict";e.exports=t(746)},481:e=>{"use strict";e.exports=function(e,n){return n||(n={}),e?(e=String(e.__esModule?e.default:e),n.hash&&(e+=n.hash),n.maybeNeedQuotes&&/[\t\n\f\r "'=<>`]/.test(e)?'"'.concat(e,'"'):e):e}},587:(e,n,t)=>{e.exports=function e(n,t,r){function a(i,s){if(!t[i]){if(!n[i]){if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var u=t[i]={exports:{}};n[i][0].call(u.exports,(function(e){return a(n[i][1][e]||e)}),u,u.exports,e,n,t,r)}return t[i].exports}for(var o=void 0,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(e,n,t){"use strict";var r=e("./utils"),a=e("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.encode=function(e){for(var n,t,a,i,s,l,u,c=[],d=0,p=e.length,f=p,h="string"!==r.getTypeOf(e);d<e.length;)f=p-d,a=h?(n=e[d++],t=d<p?e[d++]:0,d<p?e[d++]:0):(n=e.charCodeAt(d++),t=d<p?e.charCodeAt(d++):0,d<p?e.charCodeAt(d++):0),i=n>>2,s=(3&n)<<4|t>>4,l=1<f?(15&t)<<2|a>>6:64,u=2<f?63&a:64,c.push(o.charAt(i)+o.charAt(s)+o.charAt(l)+o.charAt(u));return c.join("")},t.decode=function(e){var n,t,r,i,s,l,u=0,c=0,d="data:";if(e.substr(0,d.length)===d)throw new Error("Invalid base64 input, it looks like a data url.");var p,f=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===o.charAt(64)&&f--,e.charAt(e.length-2)===o.charAt(64)&&f--,f%1!=0)throw new Error("Invalid base64 input, bad content length.");for(p=a.uint8array?new Uint8Array(0|f):new Array(0|f);u<e.length;)n=o.indexOf(e.charAt(u++))<<2|(i=o.indexOf(e.charAt(u++)))>>4,t=(15&i)<<4|(s=o.indexOf(e.charAt(u++)))>>2,r=(3&s)<<6|(l=o.indexOf(e.charAt(u++))),p[c++]=n,64!==s&&(p[c++]=t),64!==l&&(p[c++]=r);return p}},{"./support":30,"./utils":32}],2:[function(e,n,t){"use strict";var r=e("./external"),a=e("./stream/DataWorker"),o=e("./stream/Crc32Probe"),i=e("./stream/DataLengthProbe");function s(e,n,t,r,a){this.compressedSize=e,this.uncompressedSize=n,this.crc32=t,this.compression=r,this.compressedContent=a}s.prototype={getContentWorker:function(){var e=new a(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new i("data_length")),n=this;return e.on("end",(function(){if(this.streamInfo.data_length!==n.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new a(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},s.createWorkerFrom=function(e,n,t){return e.pipe(new o).pipe(new i("uncompressedSize")).pipe(n.compressWorker(t)).pipe(new i("compressedSize")).withStreamInfo("compression",n)},n.exports=s},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,n,t){"use strict";var r=e("./stream/GenericWorker");t.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},t.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,n,t){"use strict";var r=e("./utils"),a=function(){for(var e,n=[],t=0;t<256;t++){e=t;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;n[t]=e}return n}();n.exports=function(e,n){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,n,t,r){var o=a,i=r+t;e^=-1;for(var s=r;s<i;s++)e=e>>>8^o[255&(e^n[s])];return-1^e}(0|n,e,e.length,0):function(e,n,t,r){var o=a,i=r+t;e^=-1;for(var s=r;s<i;s++)e=e>>>8^o[255&(e^n.charCodeAt(s))];return-1^e}(0|n,e,e.length,0):0}},{"./utils":32}],5:[function(e,n,t){"use strict";t.base64=!1,t.binary=!1,t.dir=!1,t.createFolders=!0,t.date=null,t.compression=null,t.compressionOptions=null,t.comment=null,t.unixPermissions=null,t.dosPermissions=null},{}],6:[function(e,n,t){"use strict";var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),n.exports={Promise:r}},{lie:37}],7:[function(e,n,t){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,a=e("pako"),o=e("./utils"),i=e("./stream/GenericWorker"),s=r?"uint8array":"array";function l(e,n){i.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=n,this.meta={}}t.magic="\b\0",o.inherits(l,i),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(o.transformTo(s,e.data),!1)},l.prototype.flush=function(){i.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(n){e.push({data:n,meta:e.meta})}},t.compressWorker=function(e){return new l("Deflate",e)},t.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,n,t){"use strict";function r(e,n){var t,r="";for(t=0;t<n;t++)r+=String.fromCharCode(255&e),e>>>=8;return r}function a(e,n,t,a,i,c){var d,p,f=e.file,h=e.compression,m=c!==s.utf8encode,g=o.transformTo("string",c(f.name)),y=o.transformTo("string",s.utf8encode(f.name)),b=f.comment,v=o.transformTo("string",c(b)),w=o.transformTo("string",s.utf8encode(b)),S=y.length!==f.name.length,k=w.length!==b.length,x="",I="",_="",A=f.dir,T=f.date,E={crc32:0,compressedSize:0,uncompressedSize:0};n&&!t||(E.crc32=e.crc32,E.compressedSize=e.compressedSize,E.uncompressedSize=e.uncompressedSize);var O=0;n&&(O|=8),m||!S&&!k||(O|=2048);var C=0,N=0;A&&(C|=16),"UNIX"===i?(N=798,C|=function(e,n){var t=e;return e||(t=n?16893:33204),(65535&t)<<16}(f.unixPermissions,A)):(N=20,C|=function(e){return 63&(e||0)}(f.dosPermissions)),d=T.getUTCHours(),d<<=6,d|=T.getUTCMinutes(),d<<=5,d|=T.getUTCSeconds()/2,p=T.getUTCFullYear()-1980,p<<=4,p|=T.getUTCMonth()+1,p<<=5,p|=T.getUTCDate(),S&&(I=r(1,1)+r(l(g),4)+y,x+="up"+r(I.length,2)+I),k&&(_=r(1,1)+r(l(v),4)+w,x+="uc"+r(_.length,2)+_);var M="";return M+="\n\0",M+=r(O,2),M+=h.magic,M+=r(d,2),M+=r(p,2),M+=r(E.crc32,4),M+=r(E.compressedSize,4),M+=r(E.uncompressedSize,4),M+=r(g.length,2),M+=r(x.length,2),{fileRecord:u.LOCAL_FILE_HEADER+M+g+x,dirRecord:u.CENTRAL_FILE_HEADER+r(N,2)+M+r(v.length,2)+"\0\0\0\0"+r(C,4)+r(a,4)+g+x+v}}var o=e("../utils"),i=e("../stream/GenericWorker"),s=e("../utf8"),l=e("../crc32"),u=e("../signature");function c(e,n,t,r){i.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=n,this.zipPlatform=t,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o.inherits(c,i),c.prototype.push=function(e){var n=e.meta.percent||0,t=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,i.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:t?(n+100*(t-r-1))/t:100}}))},c.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var n=this.streamFiles&&!e.file.dir;if(n){var t=a(e,n,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:t.fileRecord,meta:{percent:0}})}else this.accumulate=!0},c.prototype.closedSource=function(e){this.accumulate=!1;var n=this.streamFiles&&!e.file.dir,t=a(e,n,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(t.dirRecord),n)this.push({data:function(e){return u.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:t.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},c.prototype.flush=function(){for(var e=this.bytesWritten,n=0;n<this.dirRecords.length;n++)this.push({data:this.dirRecords[n],meta:{percent:100}});var t=this.bytesWritten-e,a=function(e,n,t,a,i){var s=o.transformTo("string",i(a));return u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(n,4)+r(t,4)+r(s.length,2)+s}(this.dirRecords.length,t,e,this.zipComment,this.encodeFileName);this.push({data:a,meta:{percent:100}})},c.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},c.prototype.registerPrevious=function(e){this._sources.push(e);var n=this;return e.on("data",(function(e){n.processChunk(e)})),e.on("end",(function(){n.closedSource(n.previous.streamInfo),n._sources.length?n.prepareNextSource():n.end()})),e.on("error",(function(e){n.error(e)})),this},c.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},c.prototype.error=function(e){var n=this._sources;if(!i.prototype.error.call(this,e))return!1;for(var t=0;t<n.length;t++)try{n[t].error(e)}catch(e){}return!0},c.prototype.lock=function(){i.prototype.lock.call(this);for(var e=this._sources,n=0;n<e.length;n++)e[n].lock()},n.exports=c},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,n,t){"use strict";var r=e("../compressions"),a=e("./ZipFileWorker");t.generateWorker=function(e,n,t){var o=new a(n.streamFiles,t,n.platform,n.encodeFileName),i=0;try{e.forEach((function(e,t){i++;var a=function(e,n){var t=e||n,a=r[t];if(!a)throw new Error(t+" is not a valid compression method !");return a}(t.options.compression,n.compression),s=t.options.compressionOptions||n.compressionOptions||{},l=t.dir,u=t.date;t._compressWorker(a,s).withStreamInfo("file",{name:e,dir:l,date:u,comment:t.comment||"",unixPermissions:t.unixPermissions,dosPermissions:t.dosPermissions}).pipe(o)})),o.entriesCount=i}catch(e){o.error(e)}return o}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,n,t){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var n in this)"function"!=typeof this[n]&&(e[n]=this[n]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,n){return(new r).loadAsync(e,n)},r.external=e("./external"),n.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,n,t){"use strict";var r=e("./utils"),a=e("./external"),o=e("./utf8"),i=e("./zipEntries"),s=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function u(e){return new a.Promise((function(n,t){var r=e.decompressed.getContentWorker().pipe(new s);r.on("error",(function(e){t(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?t(new Error("Corrupted zip : CRC32 mismatch")):n()})).resume()}))}n.exports=function(e,n){var t=this;return n=r.extend(n||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),l.isNode&&l.isStream(e)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,n.optimizedBinaryString,n.base64).then((function(e){var t=new i(n);return t.load(e),t})).then((function(e){var t=[a.Promise.resolve(e)],r=e.files;if(n.checkCRC32)for(var o=0;o<r.length;o++)t.push(u(r[o]));return a.Promise.all(t)})).then((function(e){for(var a=e.shift(),o=a.files,i=0;i<o.length;i++){var s=o[i],l=s.fileNameStr,u=r.resolve(s.fileNameStr);t.file(u,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:n.createFolders}),s.dir||(t.file(u).unsafeOriginalName=l)}return a.zipComment.length&&(t.comment=a.zipComment),t}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,n,t){"use strict";var r=e("../utils"),a=e("../stream/GenericWorker");function o(e,n){a.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(n)}r.inherits(o,a),o.prototype._bindStream=function(e){var n=this;(this._stream=e).pause(),e.on("data",(function(e){n.push({data:e,meta:{percent:0}})})).on("error",(function(e){n.isPaused?this.generatedError=e:n.error(e)})).on("end",(function(){n.isPaused?n._upstreamEnded=!0:n.end()}))},o.prototype.pause=function(){return!!a.prototype.pause.call(this)&&(this._stream.pause(),!0)},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,n,t){"use strict";var r=e("readable-stream").Readable;function a(e,n,t){r.call(this,n),this._helper=e;var a=this;e.on("data",(function(e,n){a.push(e)||a._helper.pause(),t&&t(n)})).on("error",(function(e){a.emit("error",e)})).on("end",(function(){a.push(null)}))}e("../utils").inherits(a,r),a.prototype._read=function(){this._helper.resume()},n.exports=a},{"../utils":32,"readable-stream":16}],14:[function(e,n,t){"use strict";n.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,n){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,n);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,n)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var n=new Buffer(e);return n.fill(0),n},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,n,t){"use strict";function r(e,n,t){var r,a=o.getTypeOf(n),s=o.extend(t||{},l);s.date=s.date||new Date,null!==s.compression&&(s.compression=s.compression.toUpperCase()),"string"==typeof s.unixPermissions&&(s.unixPermissions=parseInt(s.unixPermissions,8)),s.unixPermissions&&16384&s.unixPermissions&&(s.dir=!0),s.dosPermissions&&16&s.dosPermissions&&(s.dir=!0),s.dir&&(e=m(e)),s.createFolders&&(r=h(e))&&g.call(this,r,!0);var d="string"===a&&!1===s.binary&&!1===s.base64;t&&void 0!==t.binary||(s.binary=!d),(n instanceof u&&0===n.uncompressedSize||s.dir||!n||0===n.length)&&(s.base64=!1,s.binary=!0,n="",s.compression="STORE",a="string");var y=null;y=n instanceof u||n instanceof i?n:p.isNode&&p.isStream(n)?new f(e,n):o.prepareContent(e,n,s.binary,s.optimizedBinaryString,s.base64);var b=new c(e,y,s);this.files[e]=b}var a=e("./utf8"),o=e("./utils"),i=e("./stream/GenericWorker"),s=e("./stream/StreamHelper"),l=e("./defaults"),u=e("./compressedObject"),c=e("./zipObject"),d=e("./generate"),p=e("./nodejsUtils"),f=e("./nodejs/NodejsStreamInputAdapter"),h=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var n=e.lastIndexOf("/");return 0<n?e.substring(0,n):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,n){return n=void 0!==n?n:l.createFolders,e=m(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:n}),this.files[e]};function y(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var b={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var n,t,r;for(n in this.files)r=this.files[n],(t=n.slice(this.root.length,n.length))&&n.slice(0,this.root.length)===this.root&&e(t,r)},filter:function(e){var n=[];return this.forEach((function(t,r){e(t,r)&&n.push(r)})),n},file:function(e,n,t){if(1!==arguments.length)return e=this.root+e,r.call(this,e,n,t),this;if(y(e)){var a=e;return this.filter((function(e,n){return!n.dir&&a.test(e)}))}var o=this.files[this.root+e];return o&&!o.dir?o:null},folder:function(e){if(!e)return this;if(y(e))return this.filter((function(n,t){return t.dir&&e.test(n)}));var n=this.root+e,t=g.call(this,n),r=this.clone();return r.root=t.name,r},remove:function(e){e=this.root+e;var n=this.files[e];if(n||("/"!==e.slice(-1)&&(e+="/"),n=this.files[e]),n&&!n.dir)delete this.files[e];else for(var t=this.filter((function(n,t){return t.name.slice(0,e.length)===e})),r=0;r<t.length;r++)delete this.files[t[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var n,t={};try{if((t=o.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:a.utf8encode})).type=t.type.toLowerCase(),t.compression=t.compression.toUpperCase(),"binarystring"===t.type&&(t.type="string"),!t.type)throw new Error("No output type specified.");o.checkSupport(t.type),"darwin"!==t.platform&&"freebsd"!==t.platform&&"linux"!==t.platform&&"sunos"!==t.platform||(t.platform="UNIX"),"win32"===t.platform&&(t.platform="DOS");var r=t.comment||this.comment||"";n=d.generateWorker(this,t,r)}catch(e){(n=new i("error")).error(e)}return new s(n,t.type||"string",t.mimeType)},generateAsync:function(e,n){return this.generateInternalStream(e).accumulate(n)},generateNodeStream:function(e,n){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(n)}};n.exports=b},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,n,t){"use strict";n.exports=e("stream")},{stream:void 0}],17:[function(e,n,t){"use strict";var r=e("./DataReader");function a(e){r.call(this,e);for(var n=0;n<this.data.length;n++)e[n]=255&e[n]}e("../utils").inherits(a,r),a.prototype.byteAt=function(e){return this.data[this.zero+e]},a.prototype.lastIndexOfSignature=function(e){for(var n=e.charCodeAt(0),t=e.charCodeAt(1),r=e.charCodeAt(2),a=e.charCodeAt(3),o=this.length-4;0<=o;--o)if(this.data[o]===n&&this.data[o+1]===t&&this.data[o+2]===r&&this.data[o+3]===a)return o-this.zero;return-1},a.prototype.readAndCheckSignature=function(e){var n=e.charCodeAt(0),t=e.charCodeAt(1),r=e.charCodeAt(2),a=e.charCodeAt(3),o=this.readData(4);return n===o[0]&&t===o[1]&&r===o[2]&&a===o[3]},a.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=a},{"../utils":32,"./DataReader":18}],18:[function(e,n,t){"use strict";var r=e("../utils");function a(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var n,t=0;for(this.checkOffset(e),n=this.index+e-1;n>=this.index;n--)t=(t<<8)+this.byteAt(n);return this.index+=e,t},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},n.exports=a},{"../utils":32}],19:[function(e,n,t){"use strict";var r=e("./Uint8ArrayReader");function a(e){r.call(this,e)}e("../utils").inherits(a,r),a.prototype.readData=function(e){this.checkOffset(e);var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=a},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,n,t){"use strict";var r=e("./DataReader");function a(e){r.call(this,e)}e("../utils").inherits(a,r),a.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},a.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},a.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},a.prototype.readData=function(e){this.checkOffset(e);var n=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=a},{"../utils":32,"./DataReader":18}],21:[function(e,n,t){"use strict";var r=e("./ArrayReader");function a(e){r.call(this,e)}e("../utils").inherits(a,r),a.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var n=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,n},n.exports=a},{"../utils":32,"./ArrayReader":17}],22:[function(e,n,t){"use strict";var r=e("../utils"),a=e("../support"),o=e("./ArrayReader"),i=e("./StringReader"),s=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");n.exports=function(e){var n=r.getTypeOf(e);return r.checkSupport(n),"string"!==n||a.uint8array?"nodebuffer"===n?new s(e):a.uint8array?new l(r.transformTo("uint8array",e)):new o(r.transformTo("array",e)):new i(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,n,t){"use strict";t.LOCAL_FILE_HEADER="PK\x03\x04",t.CENTRAL_FILE_HEADER="PK\x01\x02",t.CENTRAL_DIRECTORY_END="PK\x05\x06",t.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x06\x07",t.ZIP64_CENTRAL_DIRECTORY_END="PK\x06\x06",t.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(e,n,t){"use strict";var r=e("./GenericWorker"),a=e("../utils");function o(e){r.call(this,"ConvertWorker to "+e),this.destType=e}a.inherits(o,r),o.prototype.processChunk=function(e){this.push({data:a.transformTo(this.destType,e.data),meta:e.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(e,n,t){"use strict";var r=e("./GenericWorker"),a=e("../crc32");function o(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(o,r),o.prototype.processChunk=function(e){this.streamInfo.crc32=a(e.data,this.streamInfo.crc32||0),this.push(e)},n.exports=o},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,n,t){"use strict";var r=e("../utils"),a=e("./GenericWorker");function o(e){a.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(o,a),o.prototype.processChunk=function(e){if(e){var n=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=n+e.data.length}a.prototype.processChunk.call(this,e)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(e,n,t){"use strict";var r=e("../utils"),a=e("./GenericWorker");function o(e){a.call(this,"DataWorker");var n=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){n.dataIsReady=!0,n.data=e,n.max=e&&e.length||0,n.type=r.getTypeOf(e),n.isPaused||n._tickAndRepeat()}),(function(e){n.error(e)}))}r.inherits(o,a),o.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},o.prototype.resume=function(){return!!a.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},o.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},o.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,n=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,n);break;case"uint8array":e=this.data.subarray(this.index,n);break;case"array":case"nodebuffer":e=this.data.slice(this.index,n)}return this.index=n,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=o},{"../utils":32,"./GenericWorker":28}],28:[function(e,n,t){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,n){return this._listeners[e].push(n),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,n){if(this._listeners[e])for(var t=0;t<this._listeners[e].length;t++)this._listeners[e][t].call(this,n)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var n=this;return e.on("data",(function(e){n.processChunk(e)})),e.on("end",(function(){n.end()})),e.on("error",(function(e){n.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,n){return this.extraStreamInfo[e]=n,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},n.exports=r},{}],29:[function(e,n,t){"use strict";var r=e("../utils"),a=e("./ConvertWorker"),o=e("./GenericWorker"),i=e("../base64"),s=e("../support"),l=e("../external"),u=null;if(s.nodestream)try{u=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function c(e,n){return new l.Promise((function(t,a){var o=[],s=e._internalType,l=e._outputType,u=e._mimeType;e.on("data",(function(e,t){o.push(e),n&&n(t)})).on("error",(function(e){o=[],a(e)})).on("end",(function(){try{var e=function(e,n,t){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",n),t);case"base64":return i.encode(n);default:return r.transformTo(e,n)}}(l,function(e,n){var t,r=0,a=null,o=0;for(t=0;t<n.length;t++)o+=n[t].length;switch(e){case"string":return n.join("");case"array":return Array.prototype.concat.apply([],n);case"uint8array":for(a=new Uint8Array(o),t=0;t<n.length;t++)a.set(n[t],r),r+=n[t].length;return a;case"nodebuffer":return Buffer.concat(n);default:throw new Error("concat : unsupported type '"+e+"'")}}(s,o),u);t(e)}catch(e){a(e)}o=[]})).resume()}))}function d(e,n,t){var i=n;switch(n){case"blob":case"arraybuffer":i="uint8array";break;case"base64":i="string"}try{this._internalType=i,this._outputType=n,this._mimeType=t,r.checkSupport(i),this._worker=e.pipe(new a(i)),e.lock()}catch(e){this._worker=new o("error"),this._worker.error(e)}}d.prototype={accumulate:function(e){return c(this,e)},on:function(e,n){var t=this;return"data"===e?this._worker.on(e,(function(e){n.call(t,e.data,e.meta)})):this._worker.on(e,(function(){r.delay(n,arguments,t)})),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new u(this,{objectMode:"nodebuffer"!==this._outputType},e)}},n.exports=d},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,n,t){"use strict";if(t.base64=!0,t.array=!0,t.string=!0,t.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,t.nodebuffer="undefined"!=typeof Buffer,t.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)t.blob=!1;else{var r=new ArrayBuffer(0);try{t.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);a.append(r),t.blob=0===a.getBlob("application/zip").size}catch(e){t.blob=!1}}}try{t.nodestream=!!e("readable-stream").Readable}catch(e){t.nodestream=!1}},{"readable-stream":16}],31:[function(e,n,t){"use strict";for(var r=e("./utils"),a=e("./support"),o=e("./nodejsUtils"),i=e("./stream/GenericWorker"),s=new Array(256),l=0;l<256;l++)s[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function u(){i.call(this,"utf-8 decode"),this.leftOver=null}function c(){i.call(this,"utf-8 encode")}s[254]=s[254]=1,t.utf8encode=function(e){return a.nodebuffer?o.newBufferFrom(e,"utf-8"):function(e){var n,t,r,o,i,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(t=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(t=65536+(t-55296<<10)+(r-56320),o++),l+=t<128?1:t<2048?2:t<65536?3:4;for(n=a.uint8array?new Uint8Array(l):new Array(l),o=i=0;i<l;o++)55296==(64512&(t=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(r=e.charCodeAt(o+1)))&&(t=65536+(t-55296<<10)+(r-56320),o++),t<128?n[i++]=t:(t<2048?n[i++]=192|t>>>6:(t<65536?n[i++]=224|t>>>12:(n[i++]=240|t>>>18,n[i++]=128|t>>>12&63),n[i++]=128|t>>>6&63),n[i++]=128|63&t);return n}(e)},t.utf8decode=function(e){return a.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var n,t,a,o,i=e.length,l=new Array(2*i);for(n=t=0;n<i;)if((a=e[n++])<128)l[t++]=a;else if(4<(o=s[a]))l[t++]=65533,n+=o-1;else{for(a&=2===o?31:3===o?15:7;1<o&&n<i;)a=a<<6|63&e[n++],o--;1<o?l[t++]=65533:a<65536?l[t++]=a:(a-=65536,l[t++]=55296|a>>10&1023,l[t++]=56320|1023&a)}return l.length!==t&&(l.subarray?l=l.subarray(0,t):l.length=t),r.applyFromCharCode(l)}(e=r.transformTo(a.uint8array?"uint8array":"array",e))},r.inherits(u,i),u.prototype.processChunk=function(e){var n=r.transformTo(a.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var o=n;(n=new Uint8Array(o.length+this.leftOver.length)).set(this.leftOver,0),n.set(o,this.leftOver.length)}else n=this.leftOver.concat(n);this.leftOver=null}var i=function(e,n){var t;for((n=n||e.length)>e.length&&(n=e.length),t=n-1;0<=t&&128==(192&e[t]);)t--;return t<0||0===t?n:t+s[e[t]]>n?t:n}(n),l=n;i!==n.length&&(a.uint8array?(l=n.subarray(0,i),this.leftOver=n.subarray(i,n.length)):(l=n.slice(0,i),this.leftOver=n.slice(i,n.length))),this.push({data:t.utf8decode(l),meta:e.meta})},u.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:t.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},t.Utf8DecodeWorker=u,r.inherits(c,i),c.prototype.processChunk=function(e){this.push({data:t.utf8encode(e.data),meta:e.meta})},t.Utf8EncodeWorker=c},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,n,t){"use strict";var r=e("./support"),a=e("./base64"),o=e("./nodejsUtils"),i=e("./external");function s(e){return e}function l(e,n){for(var t=0;t<e.length;++t)n[t]=255&e.charCodeAt(t);return n}e("setimmediate"),t.newBlob=function(n,r){t.checkSupport("blob");try{return new Blob([n],{type:r})}catch(e){try{var a=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return a.append(n),a.getBlob(r)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var u={stringifyByChunk:function(e,n,t){var r=[],a=0,o=e.length;if(o<=t)return String.fromCharCode.apply(null,e);for(;a<o;)"array"===n||"nodebuffer"===n?r.push(String.fromCharCode.apply(null,e.slice(a,Math.min(a+t,o)))):r.push(String.fromCharCode.apply(null,e.subarray(a,Math.min(a+t,o)))),a+=t;return r.join("")},stringifyByChar:function(e){for(var n="",t=0;t<e.length;t++)n+=String.fromCharCode(e[t]);return n},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,o.allocBuffer(1)).length}catch(e){return!1}}()}};function c(e){var n=65536,r=t.getTypeOf(e),a=!0;if("uint8array"===r?a=u.applyCanBeUsed.uint8array:"nodebuffer"===r&&(a=u.applyCanBeUsed.nodebuffer),a)for(;1<n;)try{return u.stringifyByChunk(e,r,n)}catch(e){n=Math.floor(n/2)}return u.stringifyByChar(e)}function d(e,n){for(var t=0;t<e.length;t++)n[t]=e[t];return n}t.applyFromCharCode=c;var p={};p.string={string:s,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return p.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,o.allocBuffer(e.length))}},p.array={string:c,array:s,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(e)}},p.arraybuffer={string:function(e){return c(new Uint8Array(e))},array:function(e){return d(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:s,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return o.newBufferFrom(new Uint8Array(e))}},p.uint8array={string:c,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:s,nodebuffer:function(e){return o.newBufferFrom(e)}},p.nodebuffer={string:c,array:function(e){return d(e,new Array(e.length))},arraybuffer:function(e){return p.nodebuffer.uint8array(e).buffer},uint8array:function(e){return d(e,new Uint8Array(e.length))},nodebuffer:s},t.transformTo=function(e,n){if(n=n||"",!e)return n;t.checkSupport(e);var r=t.getTypeOf(n);return p[r][e](n)},t.resolve=function(e){for(var n=e.split("/"),t=[],r=0;r<n.length;r++){var a=n[r];"."===a||""===a&&0!==r&&r!==n.length-1||(".."===a?t.pop():t.push(a))}return t.join("/")},t.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&o.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},t.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},t.MAX_VALUE_16BITS=65535,t.MAX_VALUE_32BITS=-1,t.pretty=function(e){var n,t,r="";for(t=0;t<(e||"").length;t++)r+="\\x"+((n=e.charCodeAt(t))<16?"0":"")+n.toString(16).toUpperCase();return r},t.delay=function(e,n,t){setImmediate((function(){e.apply(t||null,n||[])}))},t.inherits=function(e,n){function t(){}t.prototype=n.prototype,e.prototype=new t},t.extend=function(){var e,n,t={};for(e=0;e<arguments.length;e++)for(n in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],n)&&void 0===t[n]&&(t[n]=arguments[e][n]);return t},t.prepareContent=function(e,n,o,s,u){return i.Promise.resolve(n).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new i.Promise((function(n,t){var r=new FileReader;r.onload=function(e){n(e.target.result)},r.onerror=function(e){t(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(n){var c=t.getTypeOf(n);return c?("arraybuffer"===c?n=t.transformTo("uint8array",n):"string"===c&&(u?n=a.decode(n):o&&!0!==s&&(n=function(e){return l(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(n))),n):i.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,n,t){"use strict";var r=e("./reader/readerFor"),a=e("./utils"),o=e("./signature"),i=e("./zipEntry"),s=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var n=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(n)+", expected "+a.pretty(e)+")")}},isSignature:function(e,n){var t=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===n;return this.reader.setIndex(t),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),n=s.uint8array?"uint8array":"array",t=a.transformTo(n,e);this.zipComment=this.loadOptions.decodeFileName(t)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,n,t,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),n=this.reader.readInt(4),t=this.reader.readData(n),this.zip64ExtensibleData[e]={id:e,length:n,value:t}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,n;for(e=0;e<this.files.length;e++)n=this.files[e],this.reader.setIndex(n.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),n.readLocalPart(this.reader),n.handleUTF8(),n.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)(e=new i({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,o.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var n=e;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var t=this.centralDirOffset+this.centralDirSize;this.zip64&&(t+=20,t+=12+this.zip64EndOfCentralSize);var r=n-t;if(0<r)this.isSignature(n,o.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,n,t){"use strict";var r=e("./reader/readerFor"),a=e("./utils"),o=e("./compressedObject"),i=e("./crc32"),s=e("./utf8"),l=e("./compressions"),u=e("./support");function c(e,n){this.options=e,this.loadOptions=n}c.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},readLocalPart:function(e){var n,t;if(e.skip(22),this.fileNameLength=e.readInt(2),t=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(t),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(n=function(e){for(var n in l)if(Object.prototype.hasOwnProperty.call(l,n)&&l[n].magic===e)return l[n];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,n,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var n=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(n),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var n,t,r,a=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<a;)n=e.readInt(2),t=e.readInt(2),r=e.readData(t),this.extraFields[n]={id:n,length:t,value:r};e.setIndex(a)},handleUTF8:function(){var e=u.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var n=this.findExtraFieldUnicodePath();if(null!==n)this.fileNameStr=n;else{var t=a.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(t)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var o=a.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(o)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var n=r(e.value);return 1!==n.readInt(1)||i(this.fileName)!==n.readInt(4)?null:s.utf8decode(n.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var n=r(e.value);return 1!==n.readInt(1)||i(this.fileComment)!==n.readInt(4)?null:s.utf8decode(n.readData(e.length-5))}return null}},n.exports=c},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,n,t){"use strict";function r(e,n,t){this.name=e,this.dir=t.dir,this.date=t.date,this.comment=t.comment,this.unixPermissions=t.unixPermissions,this.dosPermissions=t.dosPermissions,this._data=n,this._dataBinary=t.binary,this.options={compression:t.compression,compressionOptions:t.compressionOptions}}var a=e("./stream/StreamHelper"),o=e("./stream/DataWorker"),i=e("./utf8"),s=e("./compressedObject"),l=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var n=null,t="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(t=e.toLowerCase())||"text"===t;"binarystring"!==t&&"text"!==t||(t="string"),n=this._decompressWorker();var o=!this._dataBinary;o&&!r&&(n=n.pipe(new i.Utf8EncodeWorker)),!o&&r&&(n=n.pipe(new i.Utf8DecodeWorker))}catch(e){(n=new l("error")).error(e)}return new a(n,t,"")},async:function(e,n){return this.internalStream(e).accumulate(n)},nodeStream:function(e,n){return this.internalStream(e||"nodebuffer").toNodejsStream(n)},_compressWorker:function(e,n){if(this._data instanceof s&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var t=this._decompressWorker();return this._dataBinary||(t=t.pipe(new i.Utf8EncodeWorker)),s.createWorkerFrom(t,e,n)},_decompressWorker:function(){return this._data instanceof s?this._data.getContentWorker():this._data instanceof l?this._data:new o(this._data)}};for(var u=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<u.length;d++)r.prototype[u[d]]=c;n.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,n,r){(function(e){"use strict";var t,r,a=e.MutationObserver||e.WebKitMutationObserver;if(a){var o=0,i=new a(c),s=e.document.createTextNode("");i.observe(s,{characterData:!0}),t=function(){s.data=o=++o%2}}else if(e.setImmediate||void 0===e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var n=e.document.createElement("script");n.onreadystatechange=function(){c(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},e.document.documentElement.appendChild(n)}:function(){setTimeout(c,0)};else{var l=new e.MessageChannel;l.port1.onmessage=c,t=function(){l.port2.postMessage(0)}}var u=[];function c(){var e,n;r=!0;for(var t=u.length;t;){for(n=u,u=[],e=-1;++e<t;)n[e]();t=u.length}r=!1}n.exports=function(e){1!==u.push(e)||r||t()}}).call(this,"undefined"!=typeof t.g?t.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,n,t){"use strict";var r=e("immediate");function a(){}var o={},i=["REJECTED"],s=["FULFILLED"],l=["PENDING"];function u(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==a&&f(this,e)}function c(e,n,t){this.promise=e,"function"==typeof n&&(this.onFulfilled=n,this.callFulfilled=this.otherCallFulfilled),"function"==typeof t&&(this.onRejected=t,this.callRejected=this.otherCallRejected)}function d(e,n,t){r((function(){var r;try{r=n(t)}catch(r){return o.reject(e,r)}r===e?o.reject(e,new TypeError("Cannot resolve promise with itself")):o.resolve(e,r)}))}function p(e){var n=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof n)return function(){n.apply(e,arguments)}}function f(e,n){var t=!1;function r(n){t||(t=!0,o.reject(e,n))}function a(n){t||(t=!0,o.resolve(e,n))}var i=h((function(){n(a,r)}));"error"===i.status&&r(i.value)}function h(e,n){var t={};try{t.value=e(n),t.status="success"}catch(e){t.status="error",t.value=e}return t}(n.exports=u).prototype.finally=function(e){if("function"!=typeof e)return this;var n=this.constructor;return this.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))}))},u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,n){if("function"!=typeof e&&this.state===s||"function"!=typeof n&&this.state===i)return this;var t=new this.constructor(a);return this.state!==l?d(t,this.state===s?e:n,this.outcome):this.queue.push(new c(t,e,n)),t},c.prototype.callFulfilled=function(e){o.resolve(this.promise,e)},c.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},c.prototype.callRejected=function(e){o.reject(this.promise,e)},c.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},o.resolve=function(e,n){var t=h(p,n);if("error"===t.status)return o.reject(e,t.value);var r=t.value;if(r)f(e,r);else{e.state=s,e.outcome=n;for(var a=-1,i=e.queue.length;++a<i;)e.queue[a].callFulfilled(n)}return e},o.reject=function(e,n){e.state=i,e.outcome=n;for(var t=-1,r=e.queue.length;++t<r;)e.queue[t].callRejected(n);return e},u.resolve=function(e){return e instanceof this?e:o.resolve(new this(a),e)},u.reject=function(e){var n=new this(a);return o.reject(n,e)},u.all=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var i=new Array(t),s=0,l=-1,u=new this(a);++l<t;)c(e[l],l);return u;function c(e,a){n.resolve(e).then((function(e){i[a]=e,++s!==t||r||(r=!0,o.resolve(u,i))}),(function(e){r||(r=!0,o.reject(u,e))}))}},u.race=function(e){var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var t=e.length,r=!1;if(!t)return this.resolve([]);for(var i,s=-1,l=new this(a);++s<t;)i=e[s],n.resolve(i).then((function(e){r||(r=!0,o.resolve(l,e))}),(function(e){r||(r=!0,o.reject(l,e))}));return l}},{immediate:36}],38:[function(e,n,t){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),n.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,n,t){"use strict";var r=e("./zlib/deflate"),a=e("./utils/common"),o=e("./utils/strings"),i=e("./zlib/messages"),s=e("./zlib/zstream"),l=Object.prototype.toString,u=0,c=-1,d=0,p=8;function f(e){if(!(this instanceof f))return new f(e);this.options=a.assign({level:c,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:d,to:""},e||{});var n=this.options;n.raw&&0<n.windowBits?n.windowBits=-n.windowBits:n.gzip&&0<n.windowBits&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;var t=r.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(t!==u)throw new Error(i[t]);if(n.header&&r.deflateSetHeader(this.strm,n.header),n.dictionary){var h;if(h="string"==typeof n.dictionary?o.string2buf(n.dictionary):"[object ArrayBuffer]"===l.call(n.dictionary)?new Uint8Array(n.dictionary):n.dictionary,(t=r.deflateSetDictionary(this.strm,h))!==u)throw new Error(i[t]);this._dict_set=!0}}function h(e,n){var t=new f(n);if(t.push(e,!0),t.err)throw t.msg||i[t.err];return t.result}f.prototype.push=function(e,n){var t,i,s=this.strm,c=this.options.chunkSize;if(this.ended)return!1;i=n===~~n?n:!0===n?4:0,"string"==typeof e?s.input=o.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;do{if(0===s.avail_out&&(s.output=new a.Buf8(c),s.next_out=0,s.avail_out=c),1!==(t=r.deflate(s,i))&&t!==u)return this.onEnd(t),!(this.ended=!0);0!==s.avail_out&&(0!==s.avail_in||4!==i&&2!==i)||("string"===this.options.to?this.onData(o.buf2binstring(a.shrinkBuf(s.output,s.next_out))):this.onData(a.shrinkBuf(s.output,s.next_out)))}while((0<s.avail_in||0===s.avail_out)&&1!==t);return 4===i?(t=r.deflateEnd(this.strm),this.onEnd(t),this.ended=!0,t===u):2!==i||(this.onEnd(u),!(s.avail_out=0))},f.prototype.onData=function(e){this.chunks.push(e)},f.prototype.onEnd=function(e){e===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=f,t.deflate=h,t.deflateRaw=function(e,n){return(n=n||{}).raw=!0,h(e,n)},t.gzip=function(e,n){return(n=n||{}).gzip=!0,h(e,n)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,n,t){"use strict";var r=e("./zlib/inflate"),a=e("./utils/common"),o=e("./utils/strings"),i=e("./zlib/constants"),s=e("./zlib/messages"),l=e("./zlib/zstream"),u=e("./zlib/gzheader"),c=Object.prototype.toString;function d(e){if(!(this instanceof d))return new d(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var n=this.options;n.raw&&0<=n.windowBits&&n.windowBits<16&&(n.windowBits=-n.windowBits,0===n.windowBits&&(n.windowBits=-15)),!(0<=n.windowBits&&n.windowBits<16)||e&&e.windowBits||(n.windowBits+=32),15<n.windowBits&&n.windowBits<48&&0==(15&n.windowBits)&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var t=r.inflateInit2(this.strm,n.windowBits);if(t!==i.Z_OK)throw new Error(s[t]);this.header=new u,r.inflateGetHeader(this.strm,this.header)}function p(e,n){var t=new d(n);if(t.push(e,!0),t.err)throw t.msg||s[t.err];return t.result}d.prototype.push=function(e,n){var t,s,l,u,d,p,f=this.strm,h=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;s=n===~~n?n:!0===n?i.Z_FINISH:i.Z_NO_FLUSH,"string"==typeof e?f.input=o.binstring2buf(e):"[object ArrayBuffer]"===c.call(e)?f.input=new Uint8Array(e):f.input=e,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new a.Buf8(h),f.next_out=0,f.avail_out=h),(t=r.inflate(f,i.Z_NO_FLUSH))===i.Z_NEED_DICT&&m&&(p="string"==typeof m?o.string2buf(m):"[object ArrayBuffer]"===c.call(m)?new Uint8Array(m):m,t=r.inflateSetDictionary(this.strm,p)),t===i.Z_BUF_ERROR&&!0===g&&(t=i.Z_OK,g=!1),t!==i.Z_STREAM_END&&t!==i.Z_OK)return this.onEnd(t),!(this.ended=!0);f.next_out&&(0!==f.avail_out&&t!==i.Z_STREAM_END&&(0!==f.avail_in||s!==i.Z_FINISH&&s!==i.Z_SYNC_FLUSH)||("string"===this.options.to?(l=o.utf8border(f.output,f.next_out),u=f.next_out-l,d=o.buf2string(f.output,l),f.next_out=u,f.avail_out=h-u,u&&a.arraySet(f.output,f.output,l,u,0),this.onData(d)):this.onData(a.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(g=!0)}while((0<f.avail_in||0===f.avail_out)&&t!==i.Z_STREAM_END);return t===i.Z_STREAM_END&&(s=i.Z_FINISH),s===i.Z_FINISH?(t=r.inflateEnd(this.strm),this.onEnd(t),this.ended=!0,t===i.Z_OK):s!==i.Z_SYNC_FLUSH||(this.onEnd(i.Z_OK),!(f.avail_out=0))},d.prototype.onData=function(e){this.chunks.push(e)},d.prototype.onEnd=function(e){e===i.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=d,t.inflate=p,t.inflateRaw=function(e,n){return(n=n||{}).raw=!0,p(e,n)},t.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,n,t){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var n=Array.prototype.slice.call(arguments,1);n.length;){var t=n.shift();if(t){if("object"!=typeof t)throw new TypeError(t+"must be non-object");for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}}return e},t.shrinkBuf=function(e,n){return e.length===n?e:e.subarray?e.subarray(0,n):(e.length=n,e)};var a={arraySet:function(e,n,t,r,a){if(n.subarray&&e.subarray)e.set(n.subarray(t,t+r),a);else for(var o=0;o<r;o++)e[a+o]=n[t+o]},flattenChunks:function(e){var n,t,r,a,o,i;for(n=r=0,t=e.length;n<t;n++)r+=e[n].length;for(i=new Uint8Array(r),n=a=0,t=e.length;n<t;n++)o=e[n],i.set(o,a),a+=o.length;return i}},o={arraySet:function(e,n,t,r,a){for(var o=0;o<r;o++)e[a+o]=n[t+o]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,o))},t.setTyped(r)},{}],42:[function(e,n,t){"use strict";var r=e("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(e){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){o=!1}for(var i=new r.Buf8(256),s=0;s<256;s++)i[s]=252<=s?6:248<=s?5:240<=s?4:224<=s?3:192<=s?2:1;function l(e,n){if(n<65537&&(e.subarray&&o||!e.subarray&&a))return String.fromCharCode.apply(null,r.shrinkBuf(e,n));for(var t="",i=0;i<n;i++)t+=String.fromCharCode(e[i]);return t}i[254]=i[254]=1,t.string2buf=function(e){var n,t,a,o,i,s=e.length,l=0;for(o=0;o<s;o++)55296==(64512&(t=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(a=e.charCodeAt(o+1)))&&(t=65536+(t-55296<<10)+(a-56320),o++),l+=t<128?1:t<2048?2:t<65536?3:4;for(n=new r.Buf8(l),o=i=0;i<l;o++)55296==(64512&(t=e.charCodeAt(o)))&&o+1<s&&56320==(64512&(a=e.charCodeAt(o+1)))&&(t=65536+(t-55296<<10)+(a-56320),o++),t<128?n[i++]=t:(t<2048?n[i++]=192|t>>>6:(t<65536?n[i++]=224|t>>>12:(n[i++]=240|t>>>18,n[i++]=128|t>>>12&63),n[i++]=128|t>>>6&63),n[i++]=128|63&t);return n},t.buf2binstring=function(e){return l(e,e.length)},t.binstring2buf=function(e){for(var n=new r.Buf8(e.length),t=0,a=n.length;t<a;t++)n[t]=e.charCodeAt(t);return n},t.buf2string=function(e,n){var t,r,a,o,s=n||e.length,u=new Array(2*s);for(t=r=0;t<s;)if((a=e[t++])<128)u[r++]=a;else if(4<(o=i[a]))u[r++]=65533,t+=o-1;else{for(a&=2===o?31:3===o?15:7;1<o&&t<s;)a=a<<6|63&e[t++],o--;1<o?u[r++]=65533:a<65536?u[r++]=a:(a-=65536,u[r++]=55296|a>>10&1023,u[r++]=56320|1023&a)}return l(u,r)},t.utf8border=function(e,n){var t;for((n=n||e.length)>e.length&&(n=e.length),t=n-1;0<=t&&128==(192&e[t]);)t--;return t<0||0===t?n:t+i[e[t]]>n?t:n}},{"./common":41}],43:[function(e,n,t){"use strict";n.exports=function(e,n,t,r){for(var a=65535&e|0,o=e>>>16&65535|0,i=0;0!==t;){for(t-=i=2e3<t?2e3:t;o=o+(a=a+n[r++]|0)|0,--i;);a%=65521,o%=65521}return a|o<<16|0}},{}],44:[function(e,n,t){"use strict";n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,n,t){"use strict";var r=function(){for(var e,n=[],t=0;t<256;t++){e=t;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;n[t]=e}return n}();n.exports=function(e,n,t,a){var o=r,i=a+t;e^=-1;for(var s=a;s<i;s++)e=e>>>8^o[255&(e^n[s])];return-1^e}},{}],46:[function(e,n,t){"use strict";var r,a=e("../utils/common"),o=e("./trees"),i=e("./adler32"),s=e("./crc32"),l=e("./messages"),u=0,c=4,d=0,p=-2,f=-1,h=4,m=2,g=8,y=9,b=286,v=30,w=19,S=2*b+1,k=15,x=3,I=258,_=I+x+1,A=42,T=113,E=1,O=2,C=3,N=4;function M(e,n){return e.msg=l[n],n}function P(e){return(e<<1)-(4<e?9:0)}function F(e){for(var n=e.length;0<=--n;)e[n]=0}function R(e){var n=e.state,t=n.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(a.arraySet(e.output,n.pending_buf,n.pending_out,t,e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,0===n.pending&&(n.pending_out=0))}function L(e,n){o._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,R(e.strm)}function D(e,n){e.pending_buf[e.pending++]=n}function j(e,n){e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=255&n}function z(e,n){var t,r,a=e.max_chain_length,o=e.strstart,i=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-_?e.strstart-(e.w_size-_):0,u=e.window,c=e.w_mask,d=e.prev,p=e.strstart+I,f=u[o+i-1],h=u[o+i];e.prev_length>=e.good_match&&(a>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(t=n)+i]===h&&u[t+i-1]===f&&u[t]===u[o]&&u[++t]===u[o+1]){o+=2,t++;do{}while(u[++o]===u[++t]&&u[++o]===u[++t]&&u[++o]===u[++t]&&u[++o]===u[++t]&&u[++o]===u[++t]&&u[++o]===u[++t]&&u[++o]===u[++t]&&u[++o]===u[++t]&&o<p);if(r=I-(p-o),o=p-I,i<r){if(e.match_start=n,s<=(i=r))break;f=u[o+i-1],h=u[o+i]}}}while((n=d[n&c])>l&&0!=--a);return i<=e.lookahead?i:e.lookahead}function B(e){var n,t,r,o,l,u,c,d,p,f,h=e.w_size;do{if(o=e.window_size-e.lookahead-e.strstart,e.strstart>=h+(h-_)){for(a.arraySet(e.window,e.window,h,h,0),e.match_start-=h,e.strstart-=h,e.block_start-=h,n=t=e.hash_size;r=e.head[--n],e.head[n]=h<=r?r-h:0,--t;);for(n=t=h;r=e.prev[--n],e.prev[n]=h<=r?r-h:0,--t;);o+=h}if(0===e.strm.avail_in)break;if(u=e.strm,c=e.window,d=e.strstart+e.lookahead,f=void 0,(p=o)<(f=u.avail_in)&&(f=p),t=0===f?0:(u.avail_in-=f,a.arraySet(c,u.input,u.next_in,f,d),1===u.state.wrap?u.adler=i(u.adler,c,f,d):2===u.state.wrap&&(u.adler=s(u.adler,c,f,d)),u.next_in+=f,u.total_in+=f,f),e.lookahead+=t,e.lookahead+e.insert>=x)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+x-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<x)););}while(e.lookahead<_&&0!==e.strm.avail_in)}function U(e,n){for(var t,r;;){if(e.lookahead<_){if(B(e),e.lookahead<_&&n===u)return E;if(0===e.lookahead)break}if(t=0,e.lookahead>=x&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==t&&e.strstart-t<=e.w_size-_&&(e.match_length=z(e,t)),e.match_length>=x)if(r=o._tr_tally(e,e.strstart-e.match_start,e.match_length-x),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=x){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(L(e,!1),0===e.strm.avail_out))return E}return e.insert=e.strstart<x-1?e.strstart:x-1,n===c?(L(e,!0),0===e.strm.avail_out?C:N):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?E:O}function W(e,n){for(var t,r,a;;){if(e.lookahead<_){if(B(e),e.lookahead<_&&n===u)return E;if(0===e.lookahead)break}if(t=0,e.lookahead>=x&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=x-1,0!==t&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-_&&(e.match_length=z(e,t),e.match_length<=5&&(1===e.strategy||e.match_length===x&&4096<e.strstart-e.match_start)&&(e.match_length=x-1)),e.prev_length>=x&&e.match_length<=e.prev_length){for(a=e.strstart+e.lookahead-x,r=o._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-x),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=a&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+x-1])&e.hash_mask,t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=x-1,e.strstart++,r&&(L(e,!1),0===e.strm.avail_out))return E}else if(e.match_available){if((r=o._tr_tally(e,0,e.window[e.strstart-1]))&&L(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return E}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=o._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<x-1?e.strstart:x-1,n===c?(L(e,!0),0===e.strm.avail_out?C:N):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?E:O}function $(e,n,t,r,a){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=r,this.func=a}function V(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new a.Buf16(2*S),this.dyn_dtree=new a.Buf16(2*(2*v+1)),this.bl_tree=new a.Buf16(2*(2*w+1)),F(this.dyn_ltree),F(this.dyn_dtree),F(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new a.Buf16(k+1),this.heap=new a.Buf16(2*b+1),F(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new a.Buf16(2*b+1),F(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function G(e){var n;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=m,(n=e.state).pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap?A:T,e.adler=2===n.wrap?0:1,n.last_flush=u,o._tr_init(n),d):M(e,p)}function H(e){var n=G(e);return n===d&&function(e){e.window_size=2*e.w_size,F(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=x-1,e.match_available=0,e.ins_h=0}(e.state),n}function K(e,n,t,r,o,i){if(!e)return p;var s=1;if(n===f&&(n=6),r<0?(s=0,r=-r):15<r&&(s=2,r-=16),o<1||y<o||t!==g||r<8||15<r||n<0||9<n||i<0||h<i)return M(e,p);8===r&&(r=9);var l=new V;return(e.state=l).strm=e,l.wrap=s,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+x-1)/x),l.window=new a.Buf8(2*l.w_size),l.head=new a.Buf16(l.hash_size),l.prev=new a.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new a.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=n,l.strategy=i,l.method=t,H(e)}r=[new $(0,0,0,0,(function(e,n){var t=65535;for(t>e.pending_buf_size-5&&(t=e.pending_buf_size-5);;){if(e.lookahead<=1){if(B(e),0===e.lookahead&&n===u)return E;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+t;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,L(e,!1),0===e.strm.avail_out))return E;if(e.strstart-e.block_start>=e.w_size-_&&(L(e,!1),0===e.strm.avail_out))return E}return e.insert=0,n===c?(L(e,!0),0===e.strm.avail_out?C:N):(e.strstart>e.block_start&&(L(e,!1),e.strm.avail_out),E)})),new $(4,4,8,4,U),new $(4,5,16,8,U),new $(4,6,32,32,U),new $(4,4,16,16,W),new $(8,16,32,32,W),new $(8,16,128,128,W),new $(8,32,128,256,W),new $(32,128,258,1024,W),new $(32,258,258,4096,W)],t.deflateInit=function(e,n){return K(e,n,g,15,8,0)},t.deflateInit2=K,t.deflateReset=H,t.deflateResetKeep=G,t.deflateSetHeader=function(e,n){return e&&e.state?2!==e.state.wrap?p:(e.state.gzhead=n,d):p},t.deflate=function(e,n){var t,a,i,l;if(!e||!e.state||5<n||n<0)return e?M(e,p):p;if(a=e.state,!e.output||!e.input&&0!==e.avail_in||666===a.status&&n!==c)return M(e,0===e.avail_out?-5:p);if(a.strm=e,t=a.last_flush,a.last_flush=n,a.status===A)if(2===a.wrap)e.adler=0,D(a,31),D(a,139),D(a,8),a.gzhead?(D(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),D(a,255&a.gzhead.time),D(a,a.gzhead.time>>8&255),D(a,a.gzhead.time>>16&255),D(a,a.gzhead.time>>24&255),D(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),D(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(D(a,255&a.gzhead.extra.length),D(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(e.adler=s(e.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(D(a,0),D(a,0),D(a,0),D(a,0),D(a,0),D(a,9===a.level?2:2<=a.strategy||a.level<2?4:0),D(a,3),a.status=T);else{var f=g+(a.w_bits-8<<4)<<8;f|=(2<=a.strategy||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(f|=32),f+=31-f%31,a.status=T,j(a,f),0!==a.strstart&&(j(a,e.adler>>>16),j(a,65535&e.adler)),e.adler=1}if(69===a.status)if(a.gzhead.extra){for(i=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>i&&(e.adler=s(e.adler,a.pending_buf,a.pending-i,i)),R(e),i=a.pending,a.pending!==a.pending_buf_size));)D(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>i&&(e.adler=s(e.adler,a.pending_buf,a.pending-i,i)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){i=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>i&&(e.adler=s(e.adler,a.pending_buf,a.pending-i,i)),R(e),i=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,D(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>i&&(e.adler=s(e.adler,a.pending_buf,a.pending-i,i)),0===l&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){i=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>i&&(e.adler=s(e.adler,a.pending_buf,a.pending-i,i)),R(e),i=a.pending,a.pending===a.pending_buf_size)){l=1;break}l=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,D(a,l)}while(0!==l);a.gzhead.hcrc&&a.pending>i&&(e.adler=s(e.adler,a.pending_buf,a.pending-i,i)),0===l&&(a.status=103)}else a.status=103;if(103===a.status&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&R(e),a.pending+2<=a.pending_buf_size&&(D(a,255&e.adler),D(a,e.adler>>8&255),e.adler=0,a.status=T)):a.status=T),0!==a.pending){if(R(e),0===e.avail_out)return a.last_flush=-1,d}else if(0===e.avail_in&&P(n)<=P(t)&&n!==c)return M(e,-5);if(666===a.status&&0!==e.avail_in)return M(e,-5);if(0!==e.avail_in||0!==a.lookahead||n!==u&&666!==a.status){var h=2===a.strategy?function(e,n){for(var t;;){if(0===e.lookahead&&(B(e),0===e.lookahead)){if(n===u)return E;break}if(e.match_length=0,t=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(L(e,!1),0===e.strm.avail_out))return E}return e.insert=0,n===c?(L(e,!0),0===e.strm.avail_out?C:N):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?E:O}(a,n):3===a.strategy?function(e,n){for(var t,r,a,i,s=e.window;;){if(e.lookahead<=I){if(B(e),e.lookahead<=I&&n===u)return E;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=x&&0<e.strstart&&(r=s[a=e.strstart-1])===s[++a]&&r===s[++a]&&r===s[++a]){i=e.strstart+I;do{}while(r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&a<i);e.match_length=I-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=x?(t=o._tr_tally(e,1,e.match_length-x),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=o._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(L(e,!1),0===e.strm.avail_out))return E}return e.insert=0,n===c?(L(e,!0),0===e.strm.avail_out?C:N):e.last_lit&&(L(e,!1),0===e.strm.avail_out)?E:O}(a,n):r[a.level].func(a,n);if(h!==C&&h!==N||(a.status=666),h===E||h===C)return 0===e.avail_out&&(a.last_flush=-1),d;if(h===O&&(1===n?o._tr_align(a):5!==n&&(o._tr_stored_block(a,0,0,!1),3===n&&(F(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),R(e),0===e.avail_out))return a.last_flush=-1,d}return n!==c?d:a.wrap<=0?1:(2===a.wrap?(D(a,255&e.adler),D(a,e.adler>>8&255),D(a,e.adler>>16&255),D(a,e.adler>>24&255),D(a,255&e.total_in),D(a,e.total_in>>8&255),D(a,e.total_in>>16&255),D(a,e.total_in>>24&255)):(j(a,e.adler>>>16),j(a,65535&e.adler)),R(e),0<a.wrap&&(a.wrap=-a.wrap),0!==a.pending?d:1)},t.deflateEnd=function(e){var n;return e&&e.state?(n=e.state.status)!==A&&69!==n&&73!==n&&91!==n&&103!==n&&n!==T&&666!==n?M(e,p):(e.state=null,n===T?M(e,-3):d):p},t.deflateSetDictionary=function(e,n){var t,r,o,s,l,u,c,f,h=n.length;if(!e||!e.state)return p;if(2===(s=(t=e.state).wrap)||1===s&&t.status!==A||t.lookahead)return p;for(1===s&&(e.adler=i(e.adler,n,h,0)),t.wrap=0,h>=t.w_size&&(0===s&&(F(t.head),t.strstart=0,t.block_start=0,t.insert=0),f=new a.Buf8(t.w_size),a.arraySet(f,n,h-t.w_size,t.w_size,0),n=f,h=t.w_size),l=e.avail_in,u=e.next_in,c=e.input,e.avail_in=h,e.next_in=0,e.input=n,B(t);t.lookahead>=x;){for(r=t.strstart,o=t.lookahead-(x-1);t.ins_h=(t.ins_h<<t.hash_shift^t.window[r+x-1])&t.hash_mask,t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,--o;);t.strstart=r,t.lookahead=x-1,B(t)}return t.strstart+=t.lookahead,t.block_start=t.strstart,t.insert=t.lookahead,t.lookahead=0,t.match_length=t.prev_length=x-1,t.match_available=0,e.next_in=u,e.input=c,e.avail_in=l,t.wrap=s,d},t.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,n,t){"use strict";n.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,n,t){"use strict";n.exports=function(e,n){var t,r,a,o,i,s,l,u,c,d,p,f,h,m,g,y,b,v,w,S,k,x,I,_,A;t=e.state,r=e.next_in,_=e.input,a=r+(e.avail_in-5),o=e.next_out,A=e.output,i=o-(n-e.avail_out),s=o+(e.avail_out-257),l=t.dmax,u=t.wsize,c=t.whave,d=t.wnext,p=t.window,f=t.hold,h=t.bits,m=t.lencode,g=t.distcode,y=(1<<t.lenbits)-1,b=(1<<t.distbits)-1;e:do{h<15&&(f+=_[r++]<<h,h+=8,f+=_[r++]<<h,h+=8),v=m[f&y];n:for(;;){if(f>>>=w=v>>>24,h-=w,0===(w=v>>>16&255))A[o++]=65535&v;else{if(!(16&w)){if(0==(64&w)){v=m[(65535&v)+(f&(1<<w)-1)];continue n}if(32&w){t.mode=12;break e}e.msg="invalid literal/length code",t.mode=30;break e}S=65535&v,(w&=15)&&(h<w&&(f+=_[r++]<<h,h+=8),S+=f&(1<<w)-1,f>>>=w,h-=w),h<15&&(f+=_[r++]<<h,h+=8,f+=_[r++]<<h,h+=8),v=g[f&b];t:for(;;){if(f>>>=w=v>>>24,h-=w,!(16&(w=v>>>16&255))){if(0==(64&w)){v=g[(65535&v)+(f&(1<<w)-1)];continue t}e.msg="invalid distance code",t.mode=30;break e}if(k=65535&v,h<(w&=15)&&(f+=_[r++]<<h,(h+=8)<w&&(f+=_[r++]<<h,h+=8)),l<(k+=f&(1<<w)-1)){e.msg="invalid distance too far back",t.mode=30;break e}if(f>>>=w,h-=w,(w=o-i)<k){if(c<(w=k-w)&&t.sane){e.msg="invalid distance too far back",t.mode=30;break e}if(I=p,(x=0)===d){if(x+=u-w,w<S){for(S-=w;A[o++]=p[x++],--w;);x=o-k,I=A}}else if(d<w){if(x+=u+d-w,(w-=d)<S){for(S-=w;A[o++]=p[x++],--w;);if(x=0,d<S){for(S-=w=d;A[o++]=p[x++],--w;);x=o-k,I=A}}}else if(x+=d-w,w<S){for(S-=w;A[o++]=p[x++],--w;);x=o-k,I=A}for(;2<S;)A[o++]=I[x++],A[o++]=I[x++],A[o++]=I[x++],S-=3;S&&(A[o++]=I[x++],1<S&&(A[o++]=I[x++]))}else{for(x=o-k;A[o++]=A[x++],A[o++]=A[x++],A[o++]=A[x++],2<(S-=3););S&&(A[o++]=A[x++],1<S&&(A[o++]=A[x++]))}break}}break}}while(r<a&&o<s);r-=S=h>>3,f&=(1<<(h-=S<<3))-1,e.next_in=r,e.next_out=o,e.avail_in=r<a?a-r+5:5-(r-a),e.avail_out=o<s?s-o+257:257-(o-s),t.hold=f,t.bits=h}},{}],49:[function(e,n,t){"use strict";var r=e("../utils/common"),a=e("./adler32"),o=e("./crc32"),i=e("./inffast"),s=e("./inftrees"),l=1,u=2,c=0,d=-2,p=1,f=852,h=592;function m(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function y(e){var n;return e&&e.state?(n=e.state,e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=1&n.wrap),n.mode=p,n.last=0,n.havedict=0,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new r.Buf32(f),n.distcode=n.distdyn=new r.Buf32(h),n.sane=1,n.back=-1,c):d}function b(e){var n;return e&&e.state?((n=e.state).wsize=0,n.whave=0,n.wnext=0,y(e)):d}function v(e,n){var t,r;return e&&e.state?(r=e.state,n<0?(t=0,n=-n):(t=1+(n>>4),n<48&&(n&=15)),n&&(n<8||15<n)?d:(null!==r.window&&r.wbits!==n&&(r.window=null),r.wrap=t,r.wbits=n,b(e))):d}function w(e,n){var t,r;return e?(r=new g,(e.state=r).window=null,(t=v(e,n))!==c&&(e.state=null),t):d}var S,k,x=!0;function I(e){if(x){var n;for(S=new r.Buf32(512),k=new r.Buf32(32),n=0;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(s(l,e.lens,0,288,S,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;s(u,e.lens,0,32,k,0,e.work,{bits:5}),x=!1}e.lencode=S,e.lenbits=9,e.distcode=k,e.distbits=5}function _(e,n,t,a){var o,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new r.Buf8(i.wsize)),a>=i.wsize?(r.arraySet(i.window,n,t-i.wsize,i.wsize,0),i.wnext=0,i.whave=i.wsize):(a<(o=i.wsize-i.wnext)&&(o=a),r.arraySet(i.window,n,t-a,o,i.wnext),(a-=o)?(r.arraySet(i.window,n,t-a,a,0),i.wnext=a,i.whave=i.wsize):(i.wnext+=o,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=o))),0}t.inflateReset=b,t.inflateReset2=v,t.inflateResetKeep=y,t.inflateInit=function(e){return w(e,15)},t.inflateInit2=w,t.inflate=function(e,n){var t,f,h,g,y,b,v,w,S,k,x,A,T,E,O,C,N,M,P,F,R,L,D,j,z=0,B=new r.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return d;12===(t=e.state).mode&&(t.mode=13),y=e.next_out,h=e.output,v=e.avail_out,g=e.next_in,f=e.input,b=e.avail_in,w=t.hold,S=t.bits,k=b,x=v,L=c;e:for(;;)switch(t.mode){case p:if(0===t.wrap){t.mode=13;break}for(;S<16;){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}if(2&t.wrap&&35615===w){B[t.check=0]=255&w,B[1]=w>>>8&255,t.check=o(t.check,B,2,0),S=w=0,t.mode=2;break}if(t.flags=0,t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&w)<<8)+(w>>8))%31){e.msg="incorrect header check",t.mode=30;break}if(8!=(15&w)){e.msg="unknown compression method",t.mode=30;break}if(S-=4,R=8+(15&(w>>>=4)),0===t.wbits)t.wbits=R;else if(R>t.wbits){e.msg="invalid window size",t.mode=30;break}t.dmax=1<<R,e.adler=t.check=1,t.mode=512&w?10:12,S=w=0;break;case 2:for(;S<16;){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}if(t.flags=w,8!=(255&t.flags)){e.msg="unknown compression method",t.mode=30;break}if(57344&t.flags){e.msg="unknown header flags set",t.mode=30;break}t.head&&(t.head.text=w>>8&1),512&t.flags&&(B[0]=255&w,B[1]=w>>>8&255,t.check=o(t.check,B,2,0)),S=w=0,t.mode=3;case 3:for(;S<32;){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}t.head&&(t.head.time=w),512&t.flags&&(B[0]=255&w,B[1]=w>>>8&255,B[2]=w>>>16&255,B[3]=w>>>24&255,t.check=o(t.check,B,4,0)),S=w=0,t.mode=4;case 4:for(;S<16;){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}t.head&&(t.head.xflags=255&w,t.head.os=w>>8),512&t.flags&&(B[0]=255&w,B[1]=w>>>8&255,t.check=o(t.check,B,2,0)),S=w=0,t.mode=5;case 5:if(1024&t.flags){for(;S<16;){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}t.length=w,t.head&&(t.head.extra_len=w),512&t.flags&&(B[0]=255&w,B[1]=w>>>8&255,t.check=o(t.check,B,2,0)),S=w=0}else t.head&&(t.head.extra=null);t.mode=6;case 6:if(1024&t.flags&&(b<(A=t.length)&&(A=b),A&&(t.head&&(R=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Array(t.head.extra_len)),r.arraySet(t.head.extra,f,g,A,R)),512&t.flags&&(t.check=o(t.check,f,A,g)),b-=A,g+=A,t.length-=A),t.length))break e;t.length=0,t.mode=7;case 7:if(2048&t.flags){if(0===b)break e;for(A=0;R=f[g+A++],t.head&&R&&t.length<65536&&(t.head.name+=String.fromCharCode(R)),R&&A<b;);if(512&t.flags&&(t.check=o(t.check,f,A,g)),b-=A,g+=A,R)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=8;case 8:if(4096&t.flags){if(0===b)break e;for(A=0;R=f[g+A++],t.head&&R&&t.length<65536&&(t.head.comment+=String.fromCharCode(R)),R&&A<b;);if(512&t.flags&&(t.check=o(t.check,f,A,g)),b-=A,g+=A,R)break e}else t.head&&(t.head.comment=null);t.mode=9;case 9:if(512&t.flags){for(;S<16;){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}if(w!==(65535&t.check)){e.msg="header crc mismatch",t.mode=30;break}S=w=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=12;break;case 10:for(;S<32;){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}e.adler=t.check=m(w),S=w=0,t.mode=11;case 11:if(0===t.havedict)return e.next_out=y,e.avail_out=v,e.next_in=g,e.avail_in=b,t.hold=w,t.bits=S,2;e.adler=t.check=1,t.mode=12;case 12:if(5===n||6===n)break e;case 13:if(t.last){w>>>=7&S,S-=7&S,t.mode=27;break}for(;S<3;){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}switch(t.last=1&w,S-=1,3&(w>>>=1)){case 0:t.mode=14;break;case 1:if(I(t),t.mode=20,6!==n)break;w>>>=2,S-=2;break e;case 2:t.mode=17;break;case 3:e.msg="invalid block type",t.mode=30}w>>>=2,S-=2;break;case 14:for(w>>>=7&S,S-=7&S;S<32;){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}if((65535&w)!=(w>>>16^65535)){e.msg="invalid stored block lengths",t.mode=30;break}if(t.length=65535&w,S=w=0,t.mode=15,6===n)break e;case 15:t.mode=16;case 16:if(A=t.length){if(b<A&&(A=b),v<A&&(A=v),0===A)break e;r.arraySet(h,f,g,A,y),b-=A,g+=A,v-=A,y+=A,t.length-=A;break}t.mode=12;break;case 17:for(;S<14;){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}if(t.nlen=257+(31&w),w>>>=5,S-=5,t.ndist=1+(31&w),w>>>=5,S-=5,t.ncode=4+(15&w),w>>>=4,S-=4,286<t.nlen||30<t.ndist){e.msg="too many length or distance symbols",t.mode=30;break}t.have=0,t.mode=18;case 18:for(;t.have<t.ncode;){for(;S<3;){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}t.lens[U[t.have++]]=7&w,w>>>=3,S-=3}for(;t.have<19;)t.lens[U[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,D={bits:t.lenbits},L=s(0,t.lens,0,19,t.lencode,0,t.work,D),t.lenbits=D.bits,L){e.msg="invalid code lengths set",t.mode=30;break}t.have=0,t.mode=19;case 19:for(;t.have<t.nlen+t.ndist;){for(;C=(z=t.lencode[w&(1<<t.lenbits)-1])>>>16&255,N=65535&z,!((O=z>>>24)<=S);){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}if(N<16)w>>>=O,S-=O,t.lens[t.have++]=N;else{if(16===N){for(j=O+2;S<j;){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}if(w>>>=O,S-=O,0===t.have){e.msg="invalid bit length repeat",t.mode=30;break}R=t.lens[t.have-1],A=3+(3&w),w>>>=2,S-=2}else if(17===N){for(j=O+3;S<j;){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}S-=O,R=0,A=3+(7&(w>>>=O)),w>>>=3,S-=3}else{for(j=O+7;S<j;){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}S-=O,R=0,A=11+(127&(w>>>=O)),w>>>=7,S-=7}if(t.have+A>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=30;break}for(;A--;)t.lens[t.have++]=R}}if(30===t.mode)break;if(0===t.lens[256]){e.msg="invalid code -- missing end-of-block",t.mode=30;break}if(t.lenbits=9,D={bits:t.lenbits},L=s(l,t.lens,0,t.nlen,t.lencode,0,t.work,D),t.lenbits=D.bits,L){e.msg="invalid literal/lengths set",t.mode=30;break}if(t.distbits=6,t.distcode=t.distdyn,D={bits:t.distbits},L=s(u,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,D),t.distbits=D.bits,L){e.msg="invalid distances set",t.mode=30;break}if(t.mode=20,6===n)break e;case 20:t.mode=21;case 21:if(6<=b&&258<=v){e.next_out=y,e.avail_out=v,e.next_in=g,e.avail_in=b,t.hold=w,t.bits=S,i(e,x),y=e.next_out,h=e.output,v=e.avail_out,g=e.next_in,f=e.input,b=e.avail_in,w=t.hold,S=t.bits,12===t.mode&&(t.back=-1);break}for(t.back=0;C=(z=t.lencode[w&(1<<t.lenbits)-1])>>>16&255,N=65535&z,!((O=z>>>24)<=S);){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}if(C&&0==(240&C)){for(M=O,P=C,F=N;C=(z=t.lencode[F+((w&(1<<M+P)-1)>>M)])>>>16&255,N=65535&z,!(M+(O=z>>>24)<=S);){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}w>>>=M,S-=M,t.back+=M}if(w>>>=O,S-=O,t.back+=O,t.length=N,0===C){t.mode=26;break}if(32&C){t.back=-1,t.mode=12;break}if(64&C){e.msg="invalid literal/length code",t.mode=30;break}t.extra=15&C,t.mode=22;case 22:if(t.extra){for(j=t.extra;S<j;){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}t.length+=w&(1<<t.extra)-1,w>>>=t.extra,S-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=23;case 23:for(;C=(z=t.distcode[w&(1<<t.distbits)-1])>>>16&255,N=65535&z,!((O=z>>>24)<=S);){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}if(0==(240&C)){for(M=O,P=C,F=N;C=(z=t.distcode[F+((w&(1<<M+P)-1)>>M)])>>>16&255,N=65535&z,!(M+(O=z>>>24)<=S);){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}w>>>=M,S-=M,t.back+=M}if(w>>>=O,S-=O,t.back+=O,64&C){e.msg="invalid distance code",t.mode=30;break}t.offset=N,t.extra=15&C,t.mode=24;case 24:if(t.extra){for(j=t.extra;S<j;){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}t.offset+=w&(1<<t.extra)-1,w>>>=t.extra,S-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=30;break}t.mode=25;case 25:if(0===v)break e;if(A=x-v,t.offset>A){if((A=t.offset-A)>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=30;break}T=A>t.wnext?(A-=t.wnext,t.wsize-A):t.wnext-A,A>t.length&&(A=t.length),E=t.window}else E=h,T=y-t.offset,A=t.length;for(v<A&&(A=v),v-=A,t.length-=A;h[y++]=E[T++],--A;);0===t.length&&(t.mode=21);break;case 26:if(0===v)break e;h[y++]=t.length,v--,t.mode=21;break;case 27:if(t.wrap){for(;S<32;){if(0===b)break e;b--,w|=f[g++]<<S,S+=8}if(x-=v,e.total_out+=x,t.total+=x,x&&(e.adler=t.check=t.flags?o(t.check,h,x,y-x):a(t.check,h,x,y-x)),x=v,(t.flags?w:m(w))!==t.check){e.msg="incorrect data check",t.mode=30;break}S=w=0}t.mode=28;case 28:if(t.wrap&&t.flags){for(;S<32;){if(0===b)break e;b--,w+=f[g++]<<S,S+=8}if(w!==(4294967295&t.total)){e.msg="incorrect length check",t.mode=30;break}S=w=0}t.mode=29;case 29:L=1;break e;case 30:L=-3;break e;case 31:return-4;default:return d}return e.next_out=y,e.avail_out=v,e.next_in=g,e.avail_in=b,t.hold=w,t.bits=S,(t.wsize||x!==e.avail_out&&t.mode<30&&(t.mode<27||4!==n))&&_(e,e.output,e.next_out,x-e.avail_out)?(t.mode=31,-4):(k-=e.avail_in,x-=e.avail_out,e.total_in+=k,e.total_out+=x,t.total+=x,t.wrap&&x&&(e.adler=t.check=t.flags?o(t.check,h,x,e.next_out-x):a(t.check,h,x,e.next_out-x)),e.data_type=t.bits+(t.last?64:0)+(12===t.mode?128:0)+(20===t.mode||15===t.mode?256:0),(0==k&&0===x||4===n)&&L===c&&(L=-5),L)},t.inflateEnd=function(e){if(!e||!e.state)return d;var n=e.state;return n.window&&(n.window=null),e.state=null,c},t.inflateGetHeader=function(e,n){var t;return e&&e.state?0==(2&(t=e.state).wrap)?d:((t.head=n).done=!1,c):d},t.inflateSetDictionary=function(e,n){var t,r=n.length;return e&&e.state?0!==(t=e.state).wrap&&11!==t.mode?d:11===t.mode&&a(1,n,r,0)!==t.check?-3:_(e,n,r,r)?(t.mode=31,-4):(t.havedict=1,c):d},t.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,n,t){"use strict";var r=e("../utils/common"),a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],o=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],i=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],s=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(e,n,t,l,u,c,d,p){var f,h,m,g,y,b,v,w,S,k=p.bits,x=0,I=0,_=0,A=0,T=0,E=0,O=0,C=0,N=0,M=0,P=null,F=0,R=new r.Buf16(16),L=new r.Buf16(16),D=null,j=0;for(x=0;x<=15;x++)R[x]=0;for(I=0;I<l;I++)R[n[t+I]]++;for(T=k,A=15;1<=A&&0===R[A];A--);if(A<T&&(T=A),0===A)return u[c++]=20971520,u[c++]=20971520,p.bits=1,0;for(_=1;_<A&&0===R[_];_++);for(T<_&&(T=_),x=C=1;x<=15;x++)if(C<<=1,(C-=R[x])<0)return-1;if(0<C&&(0===e||1!==A))return-1;for(L[1]=0,x=1;x<15;x++)L[x+1]=L[x]+R[x];for(I=0;I<l;I++)0!==n[t+I]&&(d[L[n[t+I]]++]=I);if(b=0===e?(P=D=d,19):1===e?(P=a,F-=257,D=o,j-=257,256):(P=i,D=s,-1),x=_,y=c,O=I=M=0,m=-1,g=(N=1<<(E=T))-1,1===e&&852<N||2===e&&592<N)return 1;for(;;){for(v=x-O,S=d[I]<b?(w=0,d[I]):d[I]>b?(w=D[j+d[I]],P[F+d[I]]):(w=96,0),f=1<<x-O,_=h=1<<E;u[y+(M>>O)+(h-=f)]=v<<24|w<<16|S|0,0!==h;);for(f=1<<x-1;M&f;)f>>=1;if(0!==f?(M&=f-1,M+=f):M=0,I++,0==--R[x]){if(x===A)break;x=n[t+d[I]]}if(T<x&&(M&g)!==m){for(0===O&&(O=T),y+=_,C=1<<(E=x-O);E+O<A&&!((C-=R[E+O])<=0);)E++,C<<=1;if(N+=1<<E,1===e&&852<N||2===e&&592<N)return 1;u[m=M&g]=T<<24|E<<16|y-c|0}}return 0!==M&&(u[y+M]=x-O<<24|64<<16|0),p.bits=T,0}},{"../utils/common":41}],51:[function(e,n,t){"use strict";n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,n,t){"use strict";var r=e("../utils/common"),a=0,o=1;function i(e){for(var n=e.length;0<=--n;)e[n]=0}var s=0,l=29,u=256,c=u+1+l,d=30,p=19,f=2*c+1,h=15,m=16,g=7,y=256,b=16,v=17,w=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],k=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],_=new Array(2*(c+2));i(_);var A=new Array(2*d);i(A);var T=new Array(512);i(T);var E=new Array(256);i(E);var O=new Array(l);i(O);var C,N,M,P=new Array(d);function F(e,n,t,r,a){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function R(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}function L(e){return e<256?T[e]:T[256+(e>>>7)]}function D(e,n){e.pending_buf[e.pending++]=255&n,e.pending_buf[e.pending++]=n>>>8&255}function j(e,n,t){e.bi_valid>m-t?(e.bi_buf|=n<<e.bi_valid&65535,D(e,e.bi_buf),e.bi_buf=n>>m-e.bi_valid,e.bi_valid+=t-m):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)}function z(e,n,t){j(e,t[2*n],t[2*n+1])}function B(e,n){for(var t=0;t|=1&e,e>>>=1,t<<=1,0<--n;);return t>>>1}function U(e,n,t){var r,a,o=new Array(h+1),i=0;for(r=1;r<=h;r++)o[r]=i=i+t[r-1]<<1;for(a=0;a<=n;a++){var s=e[2*a+1];0!==s&&(e[2*a]=B(o[s]++,s))}}function W(e){var n;for(n=0;n<c;n++)e.dyn_ltree[2*n]=0;for(n=0;n<d;n++)e.dyn_dtree[2*n]=0;for(n=0;n<p;n++)e.bl_tree[2*n]=0;e.dyn_ltree[2*y]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function $(e){8<e.bi_valid?D(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function V(e,n,t,r){var a=2*n,o=2*t;return e[a]<e[o]||e[a]===e[o]&&r[n]<=r[t]}function G(e,n,t){for(var r=e.heap[t],a=t<<1;a<=e.heap_len&&(a<e.heap_len&&V(n,e.heap[a+1],e.heap[a],e.depth)&&a++,!V(n,r,e.heap[a],e.depth));)e.heap[t]=e.heap[a],t=a,a<<=1;e.heap[t]=r}function H(e,n,t){var r,a,o,i,s=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*s]<<8|e.pending_buf[e.d_buf+2*s+1],a=e.pending_buf[e.l_buf+s],s++,0===r?z(e,a,n):(z(e,(o=E[a])+u+1,n),0!==(i=S[o])&&j(e,a-=O[o],i),z(e,o=L(--r),t),0!==(i=k[o])&&j(e,r-=P[o],i)),s<e.last_lit;);z(e,y,n)}function K(e,n){var t,r,a,o=n.dyn_tree,i=n.stat_desc.static_tree,s=n.stat_desc.has_stree,l=n.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=f,t=0;t<l;t++)0!==o[2*t]?(e.heap[++e.heap_len]=u=t,e.depth[t]=0):o[2*t+1]=0;for(;e.heap_len<2;)o[2*(a=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[a]=0,e.opt_len--,s&&(e.static_len-=i[2*a+1]);for(n.max_code=u,t=e.heap_len>>1;1<=t;t--)G(e,o,t);for(a=l;t=e.heap[1],e.heap[1]=e.heap[e.heap_len--],G(e,o,1),r=e.heap[1],e.heap[--e.heap_max]=t,e.heap[--e.heap_max]=r,o[2*a]=o[2*t]+o[2*r],e.depth[a]=(e.depth[t]>=e.depth[r]?e.depth[t]:e.depth[r])+1,o[2*t+1]=o[2*r+1]=a,e.heap[1]=a++,G(e,o,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,n){var t,r,a,o,i,s,l=n.dyn_tree,u=n.max_code,c=n.stat_desc.static_tree,d=n.stat_desc.has_stree,p=n.stat_desc.extra_bits,m=n.stat_desc.extra_base,g=n.stat_desc.max_length,y=0;for(o=0;o<=h;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,t=e.heap_max+1;t<f;t++)g<(o=l[2*l[2*(r=e.heap[t])+1]+1]+1)&&(o=g,y++),l[2*r+1]=o,u<r||(e.bl_count[o]++,i=0,m<=r&&(i=p[r-m]),s=l[2*r],e.opt_len+=s*(o+i),d&&(e.static_len+=s*(c[2*r+1]+i)));if(0!==y){do{for(o=g-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[g]--,y-=2}while(0<y);for(o=g;0!==o;o--)for(r=e.bl_count[o];0!==r;)u<(a=e.heap[--t])||(l[2*a+1]!==o&&(e.opt_len+=(o-l[2*a+1])*l[2*a],l[2*a+1]=o),r--)}}(e,n),U(o,u,e.bl_count)}function q(e,n,t){var r,a,o=-1,i=n[1],s=0,l=7,u=4;for(0===i&&(l=138,u=3),n[2*(t+1)+1]=65535,r=0;r<=t;r++)a=i,i=n[2*(r+1)+1],++s<l&&a===i||(s<u?e.bl_tree[2*a]+=s:0!==a?(a!==o&&e.bl_tree[2*a]++,e.bl_tree[2*b]++):s<=10?e.bl_tree[2*v]++:e.bl_tree[2*w]++,o=a,u=(s=0)===i?(l=138,3):a===i?(l=6,3):(l=7,4))}function Y(e,n,t){var r,a,o=-1,i=n[1],s=0,l=7,u=4;for(0===i&&(l=138,u=3),r=0;r<=t;r++)if(a=i,i=n[2*(r+1)+1],!(++s<l&&a===i)){if(s<u)for(;z(e,a,e.bl_tree),0!=--s;);else 0!==a?(a!==o&&(z(e,a,e.bl_tree),s--),z(e,b,e.bl_tree),j(e,s-3,2)):s<=10?(z(e,v,e.bl_tree),j(e,s-3,3)):(z(e,w,e.bl_tree),j(e,s-11,7));o=a,u=(s=0)===i?(l=138,3):a===i?(l=6,3):(l=7,4)}}i(P);var X=!1;function J(e,n,t,a){j(e,(s<<1)+(a?1:0),3),function(e,n,t,a){$(e),a&&(D(e,t),D(e,~t)),r.arraySet(e.pending_buf,e.window,n,t,e.pending),e.pending+=t}(e,n,t,!0)}t._tr_init=function(e){X||(function(){var e,n,t,r,a,o=new Array(h+1);for(r=t=0;r<l-1;r++)for(O[r]=t,e=0;e<1<<S[r];e++)E[t++]=r;for(E[t-1]=r,r=a=0;r<16;r++)for(P[r]=a,e=0;e<1<<k[r];e++)T[a++]=r;for(a>>=7;r<d;r++)for(P[r]=a<<7,e=0;e<1<<k[r]-7;e++)T[256+a++]=r;for(n=0;n<=h;n++)o[n]=0;for(e=0;e<=143;)_[2*e+1]=8,e++,o[8]++;for(;e<=255;)_[2*e+1]=9,e++,o[9]++;for(;e<=279;)_[2*e+1]=7,e++,o[7]++;for(;e<=287;)_[2*e+1]=8,e++,o[8]++;for(U(_,c+1,o),e=0;e<d;e++)A[2*e+1]=5,A[2*e]=B(e,5);C=new F(_,S,u+1,c,h),N=new F(A,k,0,d,h),M=new F(new Array(0),x,0,p,g)}(),X=!0),e.l_desc=new R(e.dyn_ltree,C),e.d_desc=new R(e.dyn_dtree,N),e.bl_desc=new R(e.bl_tree,M),e.bi_buf=0,e.bi_valid=0,W(e)},t._tr_stored_block=J,t._tr_flush_block=function(e,n,t,r){var i,s,l=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var n,t=4093624447;for(n=0;n<=31;n++,t>>>=1)if(1&t&&0!==e.dyn_ltree[2*n])return a;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return o;for(n=32;n<u;n++)if(0!==e.dyn_ltree[2*n])return o;return a}(e)),K(e,e.l_desc),K(e,e.d_desc),l=function(e){var n;for(q(e,e.dyn_ltree,e.l_desc.max_code),q(e,e.dyn_dtree,e.d_desc.max_code),K(e,e.bl_desc),n=p-1;3<=n&&0===e.bl_tree[2*I[n]+1];n--);return e.opt_len+=3*(n+1)+5+5+4,n}(e),i=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=i&&(i=s)):i=s=t+5,t+4<=i&&-1!==n?J(e,n,t,r):4===e.strategy||s===i?(j(e,2+(r?1:0),3),H(e,_,A)):(j(e,4+(r?1:0),3),function(e,n,t,r){var a;for(j(e,n-257,5),j(e,t-1,5),j(e,r-4,4),a=0;a<r;a++)j(e,e.bl_tree[2*I[a]+1],3);Y(e,e.dyn_ltree,n-1),Y(e,e.dyn_dtree,t-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),H(e,e.dyn_ltree,e.dyn_dtree)),W(e),r&&$(e)},t._tr_tally=function(e,n,t){return e.pending_buf[e.d_buf+2*e.last_lit]=n>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&n,e.pending_buf[e.l_buf+e.last_lit]=255&t,e.last_lit++,0===n?e.dyn_ltree[2*t]++:(e.matches++,n--,e.dyn_ltree[2*(E[t]+u+1)]++,e.dyn_dtree[2*L(n)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){j(e,2,3),z(e,y,_),function(e){16===e.bi_valid?(D(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,n,t){"use strict";n.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,n,r){(function(e){!function(e,n){"use strict";if(!e.setImmediate){var t,r,a,o,i=1,s={},l=!1,u=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,t="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){p(e)}))}:function(){if(e.postMessage&&!e.importScripts){var n=!0,t=e.onmessage;return e.onmessage=function(){n=!1},e.postMessage("","*"),e.onmessage=t,n}}()?(o="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",f,!1):e.attachEvent("onmessage",f),function(n){e.postMessage(o+n,"*")}):e.MessageChannel?((a=new MessageChannel).port1.onmessage=function(e){p(e.data)},function(e){a.port2.postMessage(e)}):u&&"onreadystatechange"in u.createElement("script")?(r=u.documentElement,function(e){var n=u.createElement("script");n.onreadystatechange=function(){p(e),n.onreadystatechange=null,r.removeChild(n),n=null},r.appendChild(n)}):function(e){setTimeout(p,0,e)},c.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var n=new Array(arguments.length-1),r=0;r<n.length;r++)n[r]=arguments[r+1];var a={callback:e,args:n};return s[i]=a,t(i),i++},c.clearImmediate=d}function d(e){delete s[e]}function p(e){if(l)setTimeout(p,0,e);else{var t=s[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{d(e),l=!1}}}}function f(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(o)&&p(+n.data.slice(o.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,"undefined"!=typeof t.g?t.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},888:(e,n,t)=>{"use strict";var r=t(47);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,n,t,a,o,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function n(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:o,resetWarningCache:a};return t.PropTypes=t,t}},7:(e,n,t)=>{e.exports=t(888)()},47:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:(e,n,t)=>{"use strict";var r=t(791),a=t(296);function o(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function l(e,n){u(e,n),u(e+"Capture",n)}function u(e,n){for(s[e]=n,e=0;e<n.length;e++)i.add(n[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},h={};function m(e,n,t,r,a,o,i){this.acceptsBooleans=2===n||3===n||4===n,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=o,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var n=e[0];g[n]=new m(n,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function v(e,n,t,r){var a=g.hasOwnProperty(n)?g[n]:null;(null!==a?0!==a.type:r||!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&(function(e,n,t,r){if(null===n||"undefined"===typeof n||function(e,n,t,r){if(null!==t&&0===t.type)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==t?!t.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,n,t,r))return!0;if(r)return!1;if(null!==t)switch(t.type){case 3:return!n;case 4:return!1===n;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}(n,t,a,r)&&(t=null),r||null===a?function(e){return!!d.call(h,e)||!d.call(f,e)&&(p.test(e)?h[e]=!0:(f[e]=!0,!1))}(n)&&(null===t?e.removeAttribute(n):e.setAttribute(n,""+t)):a.mustUseProperty?e[a.propertyName]=null===t?3!==a.type&&"":t:(n=a.attributeName,r=a.attributeNamespace,null===t?e.removeAttribute(n):(t=3===(a=a.type)||4===a&&!0===t?"":""+t,r?e.setAttributeNS(r,n,t):e.setAttribute(n,t))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var n=e.replace(y,b);g[n]=new m(n,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var n=e.replace(y,b);g[n]=new m(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var n=e.replace(y,b);g[n]=new m(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),k=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),T=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var F=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=F&&e[F]||e["@@iterator"])?e:null}var L,D=Object.assign;function j(e){if(void 0===L)try{throw Error()}catch(t){var n=t.stack.trim().match(/\n( *(at )?)/);L=n&&n[1]||""}return"\n"+L+e}var z=!1;function B(e,n){if(!e||z)return"";z=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(u){var r=u}Reflect.construct(e,[],n)}else{try{n.call()}catch(u){r=u}e.call(n.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var a=u.stack.split("\n"),o=r.stack.split("\n"),i=a.length-1,s=o.length-1;1<=i&&0<=s&&a[i]!==o[s];)s--;for(;1<=i&&0<=s;i--,s--)if(a[i]!==o[s]){if(1!==i||1!==s)do{if(i--,0>--s||a[i]!==o[s]){var l="\n"+a[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=s);break}}}finally{z=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?j(e):""}function U(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function W(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case k:return"Portal";case _:return"Profiler";case I:return"StrictMode";case O:return"Suspense";case C:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case E:var n=e.render;return(e=e.displayName)||(e=""!==(e=n.displayName||n.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(n=e.displayName||null)?n:W(e.type)||"Memo";case M:n=e._payload,e=e._init;try{return W(e(n))}catch(t){}}return null}function $(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=n.render).displayName||e.name||"",n.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(n);case 8:return n===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof n)return n.displayName||n.name||null;if("string"===typeof n)return n}return null}function V(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var n=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===n||"radio"===n)}function H(e){e._valueTracker||(e._valueTracker=function(e){var n=G(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),r=""+e[n];if(!e.hasOwnProperty(n)&&"undefined"!==typeof t&&"function"===typeof t.get&&"function"===typeof t.set){var a=t.get,o=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}(e))}function K(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==t&&(n.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(n){return e.body}}function Y(e,n){var t=n.checked;return D({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=t?t:e._wrapperState.initialChecked})}function X(e,n){var t=null==n.defaultValue?"":n.defaultValue,r=null!=n.checked?n.checked:n.defaultChecked;t=V(null!=n.value?n.value:t),e._wrapperState={initialChecked:r,initialValue:t,controlled:"checkbox"===n.type||"radio"===n.type?null!=n.checked:null!=n.value}}function J(e,n){null!=(n=n.checked)&&v(e,"checked",n,!1)}function Z(e,n){J(e,n);var t=V(n.value),r=n.type;if(null!=t)"number"===r?(0===t&&""===e.value||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");n.hasOwnProperty("value")?ee(e,n.type,t):n.hasOwnProperty("defaultValue")&&ee(e,n.type,V(n.defaultValue)),null==n.checked&&null!=n.defaultChecked&&(e.defaultChecked=!!n.defaultChecked)}function Q(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var r=n.type;if(!("submit"!==r&&"reset"!==r||void 0!==n.value&&null!==n.value))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==t&&(e.name=t)}function ee(e,n,t){"number"===n&&q(e.ownerDocument)===e||(null==t?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var ne=Array.isArray;function te(e,n,t,r){if(e=e.options,n){n={};for(var a=0;a<t.length;a++)n["$"+t[a]]=!0;for(t=0;t<e.length;t++)a=n.hasOwnProperty("$"+e[t].value),e[t].selected!==a&&(e[t].selected=a),a&&r&&(e[t].defaultSelected=!0)}else{for(t=""+V(t),n=null,a=0;a<e.length;a++){if(e[a].value===t)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==n||e[a].disabled||(n=e[a])}null!==n&&(n.selected=!0)}}function re(e,n){if(null!=n.dangerouslySetInnerHTML)throw Error(o(91));return D({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,n){var t=n.value;if(null==t){if(t=n.children,n=n.defaultValue,null!=t){if(null!=n)throw Error(o(92));if(ne(t)){if(1<t.length)throw Error(o(93));t=t[0]}n=t}null==n&&(n=""),t=n}e._wrapperState={initialValue:V(t)}}function oe(e,n){var t=V(n.value),r=V(n.defaultValue);null!=t&&((t=""+t)!==e.value&&(e.value=t),null==n.defaultValue&&e.defaultValue!==t&&(e.defaultValue=t)),null!=r&&(e.defaultValue=""+r)}function ie(e){var n=e.textContent;n===e._wrapperState.initialValue&&""!==n&&null!==n&&(e.value=n)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,n){return null==e||"http://www.w3.org/1999/xhtml"===e?se(n):"http://www.w3.org/2000/svg"===e&&"foreignObject"===n?"http://www.w3.org/1999/xhtml":e}var ue,ce,de=(ce=function(e,n){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=n;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,t,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,n)}))}:ce);function pe(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&3===t.nodeType)return void(t.nodeValue=n)}e.textContent=n}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},he=["Webkit","ms","Moz","O"];function me(e,n,t){return null==n||"boolean"===typeof n||""===n?"":t||"number"!==typeof n||0===n||fe.hasOwnProperty(e)&&fe[e]?(""+n).trim():n+"px"}function ge(e,n){for(var t in e=e.style,n)if(n.hasOwnProperty(t)){var r=0===t.indexOf("--"),a=me(t,n[t],r);"float"===t&&(t="cssFloat"),r?e.setProperty(t,a):e[t]=a}}Object.keys(fe).forEach((function(e){he.forEach((function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),fe[n]=fe[e]}))}));var ye=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,n){if(n){if(ye[e]&&(null!=n.children||null!=n.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=n.dangerouslySetInnerHTML){if(null!=n.children)throw Error(o(60));if("object"!==typeof n.dangerouslySetInnerHTML||!("__html"in n.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=n.style&&"object"!==typeof n.style)throw Error(o(62))}}function ve(e,n){if(-1===e.indexOf("-"))return"string"===typeof n.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,xe=null,Ie=null;function _e(e){if(e=va(e)){if("function"!==typeof ke)throw Error(o(280));var n=e.stateNode;n&&(n=Sa(n),ke(e.stateNode,e.type,n))}}function Ae(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Te(){if(xe){var e=xe,n=Ie;if(Ie=xe=null,_e(e),n)for(e=0;e<n.length;e++)_e(n[e])}}function Ee(e,n){return e(n)}function Oe(){}var Ce=!1;function Ne(e,n,t){if(Ce)return e(n,t);Ce=!0;try{return Ee(e,n,t)}finally{Ce=!1,(null!==xe||null!==Ie)&&(Oe(),Te())}}function Me(e,n){var t=e.stateNode;if(null===t)return null;var r=Sa(t);if(null===r)return null;t=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(t&&"function"!==typeof t)throw Error(o(231,n,typeof t));return t}var Pe=!1;if(c)try{var Fe={};Object.defineProperty(Fe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Fe,Fe),window.removeEventListener("test",Fe,Fe)}catch(ce){Pe=!1}function Re(e,n,t,r,a,o,i,s,l){var u=Array.prototype.slice.call(arguments,3);try{n.apply(t,u)}catch(c){this.onError(c)}}var Le=!1,De=null,je=!1,ze=null,Be={onError:function(e){Le=!0,De=e}};function Ue(e,n,t,r,a,o,i,s,l){Le=!1,De=null,Re.apply(Be,arguments)}function We(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do{0!==(4098&(n=e).flags)&&(t=n.return),e=n.return}while(e)}return 3===n.tag?t:null}function $e(e){if(13===e.tag){var n=e.memoizedState;if(null===n&&(null!==(e=e.alternate)&&(n=e.memoizedState)),null!==n)return n.dehydrated}return null}function Ve(e){if(We(e)!==e)throw Error(o(188))}function Ge(e){return null!==(e=function(e){var n=e.alternate;if(!n){if(null===(n=We(e)))throw Error(o(188));return n!==e?null:e}for(var t=e,r=n;;){var a=t.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){t=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===t)return Ve(a),e;if(i===r)return Ve(a),n;i=i.sibling}throw Error(o(188))}if(t.return!==r.return)t=a,r=i;else{for(var s=!1,l=a.child;l;){if(l===t){s=!0,t=a,r=i;break}if(l===r){s=!0,r=a,t=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===t){s=!0,t=i,r=a;break}if(l===r){s=!0,r=i,t=a;break}l=l.sibling}if(!s)throw Error(o(189))}}if(t.alternate!==r)throw Error(o(190))}if(3!==t.tag)throw Error(o(188));return t.stateNode.current===t?e:n}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var n=He(e);if(null!==n)return n;e=e.sibling}return null}var Ke=a.unstable_scheduleCallback,qe=a.unstable_cancelCallback,Ye=a.unstable_shouldYield,Xe=a.unstable_requestPaint,Je=a.unstable_now,Ze=a.unstable_getCurrentPriorityLevel,Qe=a.unstable_ImmediatePriority,en=a.unstable_UserBlockingPriority,nn=a.unstable_NormalPriority,tn=a.unstable_LowPriority,rn=a.unstable_IdlePriority,an=null,on=null;var sn=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ln(e)/un|0)|0},ln=Math.log,un=Math.LN2;var cn=64,dn=4194304;function pn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function fn(e,n){var t=e.pendingLanes;if(0===t)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,i=268435455&t;if(0!==i){var s=i&~a;0!==s?r=pn(s):0!==(o&=i)&&(r=pn(o))}else 0!==(i=t&~a)?r=pn(i):0!==o&&(r=pn(o));if(0===r)return 0;if(0!==n&&n!==r&&0===(n&a)&&((a=r&-r)>=(o=n&-n)||16===a&&0!==(4194240&o)))return n;if(0!==(4&r)&&(r|=16&t),0!==(n=e.entangledLanes))for(e=e.entanglements,n&=r;0<n;)a=1<<(t=31-sn(n)),r|=e[t],n&=~a;return r}function hn(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;default:return-1}}function mn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gn(){var e=cn;return 0===(4194240&(cn<<=1))&&(cn=64),e}function yn(e){for(var n=[],t=0;31>t;t++)n.push(e);return n}function bn(e,n,t){e.pendingLanes|=n,536870912!==n&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[n=31-sn(n)]=t}function vn(e,n){var t=e.entangledLanes|=n;for(e=e.entanglements;t;){var r=31-sn(t),a=1<<r;a&n|e[r]&n&&(e[r]|=n),t&=~a}}var wn=0;function Sn(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kn,xn,In,_n,An,Tn=!1,En=[],On=null,Cn=null,Nn=null,Mn=new Map,Pn=new Map,Fn=[],Rn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ln(e,n){switch(e){case"focusin":case"focusout":On=null;break;case"dragenter":case"dragleave":Cn=null;break;case"mouseover":case"mouseout":Nn=null;break;case"pointerover":case"pointerout":Mn.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pn.delete(n.pointerId)}}function Dn(e,n,t,r,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:n,domEventName:t,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},null!==n&&(null!==(n=va(n))&&xn(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,null!==a&&-1===n.indexOf(a)&&n.push(a),e)}function jn(e){var n=ba(e.target);if(null!==n){var t=We(n);if(null!==t)if(13===(n=t.tag)){if(null!==(n=$e(t)))return e.blockedOn=n,void An(e.priority,(function(){In(t)}))}else if(3===n&&t.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===t.tag?t.stateNode.containerInfo:null)}e.blockedOn=null}function zn(e){if(null!==e.blockedOn)return!1;for(var n=e.targetContainers;0<n.length;){var t=Xn(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(null!==t)return null!==(n=va(t))&&xn(n),e.blockedOn=t,!1;var r=new(t=e.nativeEvent).constructor(t.type,t);we=r,t.target.dispatchEvent(r),we=null,n.shift()}return!0}function Bn(e,n,t){zn(e)&&t.delete(n)}function Un(){Tn=!1,null!==On&&zn(On)&&(On=null),null!==Cn&&zn(Cn)&&(Cn=null),null!==Nn&&zn(Nn)&&(Nn=null),Mn.forEach(Bn),Pn.forEach(Bn)}function Wn(e,n){e.blockedOn===n&&(e.blockedOn=null,Tn||(Tn=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Un)))}function $n(e){function n(n){return Wn(n,e)}if(0<En.length){Wn(En[0],e);for(var t=1;t<En.length;t++){var r=En[t];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==On&&Wn(On,e),null!==Cn&&Wn(Cn,e),null!==Nn&&Wn(Nn,e),Mn.forEach(n),Pn.forEach(n),t=0;t<Fn.length;t++)(r=Fn[t]).blockedOn===e&&(r.blockedOn=null);for(;0<Fn.length&&null===(t=Fn[0]).blockedOn;)jn(t),null===t.blockedOn&&Fn.shift()}var Vn=w.ReactCurrentBatchConfig,Gn=!0;function Hn(e,n,t,r){var a=wn,o=Vn.transition;Vn.transition=null;try{wn=1,qn(e,n,t,r)}finally{wn=a,Vn.transition=o}}function Kn(e,n,t,r){var a=wn,o=Vn.transition;Vn.transition=null;try{wn=4,qn(e,n,t,r)}finally{wn=a,Vn.transition=o}}function qn(e,n,t,r){if(Gn){var a=Xn(e,n,t,r);if(null===a)Vr(e,n,r,Yn,t),Ln(e,r);else if(function(e,n,t,r,a){switch(n){case"focusin":return On=Dn(On,e,n,t,r,a),!0;case"dragenter":return Cn=Dn(Cn,e,n,t,r,a),!0;case"mouseover":return Nn=Dn(Nn,e,n,t,r,a),!0;case"pointerover":var o=a.pointerId;return Mn.set(o,Dn(Mn.get(o)||null,e,n,t,r,a)),!0;case"gotpointercapture":return o=a.pointerId,Pn.set(o,Dn(Pn.get(o)||null,e,n,t,r,a)),!0}return!1}(a,e,n,t,r))r.stopPropagation();else if(Ln(e,r),4&n&&-1<Rn.indexOf(e)){for(;null!==a;){var o=va(a);if(null!==o&&kn(o),null===(o=Xn(e,n,t,r))&&Vr(e,n,r,Yn,t),o===a)break;a=o}null!==a&&r.stopPropagation()}else Vr(e,n,r,null,t)}}var Yn=null;function Xn(e,n,t,r){if(Yn=null,null!==(e=ba(e=Se(r))))if(null===(n=We(e)))e=null;else if(13===(t=n.tag)){if(null!==(e=$e(n)))return e;e=null}else if(3===t){if(n.stateNode.current.memoizedState.isDehydrated)return 3===n.tag?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Yn=e,null}function Jn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Qe:return 1;case en:return 4;case nn:case tn:return 16;case rn:return 536870912;default:return 16}default:return 16}}var Zn=null,Qn=null,et=null;function nt(){if(et)return et;var e,n,t=Qn,r=t.length,a="value"in Zn?Zn.value:Zn.textContent,o=a.length;for(e=0;e<r&&t[e]===a[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===a[o-n];n++);return et=a.slice(e,1<n?1-n:void 0)}function tt(e){var n=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===n&&(e=13):e=n,10===e&&(e=13),32<=e||13===e?e:0}function rt(){return!0}function at(){return!1}function ot(e){function n(n,t,r,a,o){for(var i in this._reactName=n,this._targetInst=r,this.type=t,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rt:at,this.isPropagationStopped=at,this}return D(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rt)},persist:function(){},isPersistent:rt}),n}var it,st,lt,ut={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ct=ot(ut),dt=D({},ut,{view:0,detail:0}),pt=ot(dt),ft=D({},dt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_t,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lt&&(lt&&"mousemove"===e.type?(it=e.screenX-lt.screenX,st=e.screenY-lt.screenY):st=it=0,lt=e),it)},movementY:function(e){return"movementY"in e?e.movementY:st}}),ht=ot(ft),mt=ot(D({},ft,{dataTransfer:0})),gt=ot(D({},dt,{relatedTarget:0})),yt=ot(D({},ut,{animationName:0,elapsedTime:0,pseudoElement:0})),bt=D({},ut,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vt=ot(bt),wt=ot(D({},ut,{data:0})),St={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function It(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):!!(e=xt[e])&&!!n[e]}function _t(){return It}var At=D({},dt,{key:function(e){if(e.key){var n=St[e.key]||e.key;if("Unidentified"!==n)return n}return"keypress"===e.type?13===(e=tt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_t,charCode:function(e){return"keypress"===e.type?tt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tt=ot(At),Et=ot(D({},ft,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ot=ot(D({},dt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_t})),Ct=ot(D({},ut,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nt=D({},ft,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mt=ot(Nt),Pt=[9,13,27,32],Ft=c&&"CompositionEvent"in window,Rt=null;c&&"documentMode"in document&&(Rt=document.documentMode);var Lt=c&&"TextEvent"in window&&!Rt,Dt=c&&(!Ft||Rt&&8<Rt&&11>=Rt),jt=String.fromCharCode(32),zt=!1;function Bt(e,n){switch(e){case"keyup":return-1!==Pt.indexOf(n.keyCode);case"keydown":return 229!==n.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ut(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Wt=!1;var $t={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vt(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===n?!!$t[e.type]:"textarea"===n}function Gt(e,n,t,r){Ae(r),0<(n=Hr(n,"onChange")).length&&(t=new ct("onChange","change",null,t,r),e.push({event:t,listeners:n}))}var Ht=null,Kt=null;function qt(e){jr(e,0)}function Yt(e){if(K(wa(e)))return e}function Xt(e,n){if("change"===e)return n}var Jt=!1;if(c){var Zt;if(c){var Qt="oninput"in document;if(!Qt){var er=document.createElement("div");er.setAttribute("oninput","return;"),Qt="function"===typeof er.oninput}Zt=Qt}else Zt=!1;Jt=Zt&&(!document.documentMode||9<document.documentMode)}function nr(){Ht&&(Ht.detachEvent("onpropertychange",tr),Kt=Ht=null)}function tr(e){if("value"===e.propertyName&&Yt(Kt)){var n=[];Gt(n,Kt,e,Se(e)),Ne(qt,n)}}function rr(e,n,t){"focusin"===e?(nr(),Kt=t,(Ht=n).attachEvent("onpropertychange",tr)):"focusout"===e&&nr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yt(Kt)}function or(e,n){if("click"===e)return Yt(n)}function ir(e,n){if("input"===e||"change"===e)return Yt(n)}var sr="function"===typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e===1/n)||e!==e&&n!==n};function lr(e,n){if(sr(e,n))return!0;if("object"!==typeof e||null===e||"object"!==typeof n||null===n)return!1;var t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var a=t[r];if(!d.call(n,a)||!sr(e[a],n[a]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,n){var t,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(t=e+r.textContent.length,e<=n&&t>=n)return{node:r,offset:n-e};e=t}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function dr(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?dr(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}function pr(){for(var e=window,n=q();n instanceof e.HTMLIFrameElement;){try{var t="string"===typeof n.contentWindow.location.href}catch(r){t=!1}if(!t)break;n=q((e=n.contentWindow).document)}return n}function fr(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&("input"===n&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===n||"true"===e.contentEditable)}function hr(e){var n=pr(),t=e.focusedElem,r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&dr(t.ownerDocument.documentElement,t)){if(null!==r&&fr(t))if(n=r.start,void 0===(e=r.end)&&(e=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(e,t.value.length);else if((e=(n=t.ownerDocument||document)&&n.defaultView||window).getSelection){e=e.getSelection();var a=t.textContent.length,o=Math.min(r.start,a);r=void 0===r.end?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=cr(t,o);var i=cr(t,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((n=n.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(n),e.extend(i.node,i.offset)):(n.setEnd(i.node,i.offset),e.addRange(n)))}for(n=[],e=t;e=e.parentNode;)1===e.nodeType&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<n.length;t++)(e=n[t]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,br=null,vr=!1;function wr(e,n,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;vr||null==gr||gr!==q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&lr(br,r)||(br=r,0<(r=Hr(yr,"onSelect")).length&&(n=new ct("onSelect","select",null,n,t),e.push({event:n,listeners:r}),n.target=gr)))}function Sr(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var kr={animationend:Sr("Animation","AnimationEnd"),animationiteration:Sr("Animation","AnimationIteration"),animationstart:Sr("Animation","AnimationStart"),transitionend:Sr("Transition","TransitionEnd")},xr={},Ir={};function _r(e){if(xr[e])return xr[e];if(!kr[e])return e;var n,t=kr[e];for(n in t)if(t.hasOwnProperty(n)&&n in Ir)return xr[e]=t[n];return e}c&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Ar=_r("animationend"),Tr=_r("animationiteration"),Er=_r("animationstart"),Or=_r("transitionend"),Cr=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,n){Cr.set(e,n),l(n,[e])}for(var Pr=0;Pr<Nr.length;Pr++){var Fr=Nr[Pr];Mr(Fr.toLowerCase(),"on"+(Fr[0].toUpperCase()+Fr.slice(1)))}Mr(Ar,"onAnimationEnd"),Mr(Tr,"onAnimationIteration"),Mr(Er,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Or,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Dr(e,n,t){var r=e.type||"unknown-event";e.currentTarget=t,function(e,n,t,r,a,i,s,l,u){if(Ue.apply(this,arguments),Le){if(!Le)throw Error(o(198));var c=De;Le=!1,De=null,je||(je=!0,ze=c)}}(r,n,void 0,e),e.currentTarget=null}function jr(e,n){n=0!==(4&n);for(var t=0;t<e.length;t++){var r=e[t],a=r.event;r=r.listeners;e:{var o=void 0;if(n)for(var i=r.length-1;0<=i;i--){var s=r[i],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&a.isPropagationStopped())break e;Dr(a,s,u),o=l}else for(i=0;i<r.length;i++){if(l=(s=r[i]).instance,u=s.currentTarget,s=s.listener,l!==o&&a.isPropagationStopped())break e;Dr(a,s,u),o=l}}}if(je)throw e=ze,je=!1,ze=null,e}function zr(e,n){var t=n[ma];void 0===t&&(t=n[ma]=new Set);var r=e+"__bubble";t.has(r)||($r(n,e,2,!1),t.add(r))}function Br(e,n,t){var r=0;n&&(r|=4),$r(t,e,r,n)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Wr(e){if(!e[Ur]){e[Ur]=!0,i.forEach((function(n){"selectionchange"!==n&&(Lr.has(n)||Br(n,!1,e),Br(n,!0,e))}));var n=9===e.nodeType?e:e.ownerDocument;null===n||n[Ur]||(n[Ur]=!0,Br("selectionchange",!1,n))}}function $r(e,n,t,r){switch(Jn(n)){case 1:var a=Hn;break;case 4:a=Kn;break;default:a=qn}t=a.bind(null,n,t,e),a=void 0,!Pe||"touchstart"!==n&&"touchmove"!==n&&"wheel"!==n||(a=!0),r?void 0!==a?e.addEventListener(n,t,{capture:!0,passive:a}):e.addEventListener(n,t,!0):void 0!==a?e.addEventListener(n,t,{passive:a}):e.addEventListener(n,t,!1)}function Vr(e,n,t,r,a){var o=r;if(0===(1&n)&&0===(2&n)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===a||8===l.nodeType&&l.parentNode===a))return;i=i.return}for(;null!==s;){if(null===(i=ba(s)))return;if(5===(l=i.tag)||6===l){r=o=i;continue e}s=s.parentNode}}r=r.return}Ne((function(){var r=o,a=Se(t),i=[];e:{var s=Cr.get(e);if(void 0!==s){var l=ct,u=e;switch(e){case"keypress":if(0===tt(t))break e;case"keydown":case"keyup":l=Tt;break;case"focusin":u="focus",l=gt;break;case"focusout":u="blur",l=gt;break;case"beforeblur":case"afterblur":l=gt;break;case"click":if(2===t.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=ht;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ot;break;case Ar:case Tr:case Er:l=yt;break;case Or:l=Ct;break;case"scroll":l=pt;break;case"wheel":l=Mt;break;case"copy":case"cut":case"paste":l=vt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Et}var c=0!==(4&n),d=!c&&"scroll"===e,p=c?null!==s?s+"Capture":null:s;c=[];for(var f,h=r;null!==h;){var m=(f=h).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==p&&(null!=(m=Me(h,p))&&c.push(Gr(h,m,f)))),d)break;h=h.return}0<c.length&&(s=new l(s,u,null,t,a),i.push({event:s,listeners:c}))}}if(0===(7&n)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||t===we||!(u=t.relatedTarget||t.fromElement)||!ba(u)&&!u[ha])&&(l||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=t.relatedTarget||t.toElement)?ba(u):null)&&(u!==(d=We(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=ht,m="onMouseLeave",p="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(c=Et,m="onPointerLeave",p="onPointerEnter",h="pointer"),d=null==l?s:wa(l),f=null==u?s:wa(u),(s=new c(m,h+"leave",l,t,a)).target=d,s.relatedTarget=f,m=null,ba(a)===r&&((c=new c(p,h+"enter",u,t,a)).target=f,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(p=u,h=0,f=c=l;f;f=Kr(f))h++;for(f=0,m=p;m;m=Kr(m))f++;for(;0<h-f;)c=Kr(c),h--;for(;0<f-h;)p=Kr(p),f--;for(;h--;){if(c===p||null!==p&&c===p.alternate)break e;c=Kr(c),p=Kr(p)}c=null}else c=null;null!==l&&qr(i,s,l,c,!1),null!==u&&null!==d&&qr(i,d,u,c,!0)}if("select"===(l=(s=r?wa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Xt;else if(Vt(s))if(Jt)g=ir;else{g=ar;var y=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Gt(i,g,t,a):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?wa(r):window,e){case"focusin":(Vt(y)||"true"===y.contentEditable)&&(gr=y,yr=r,br=null);break;case"focusout":br=yr=gr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,wr(i,t,a);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":wr(i,t,a)}var b;if(Ft)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Wt?Bt(e,t)&&(v="onCompositionEnd"):"keydown"===e&&229===t.keyCode&&(v="onCompositionStart");v&&(Dt&&"ko"!==t.locale&&(Wt||"onCompositionStart"!==v?"onCompositionEnd"===v&&Wt&&(b=nt()):(Qn="value"in(Zn=a)?Zn.value:Zn.textContent,Wt=!0)),0<(y=Hr(r,v)).length&&(v=new wt(v,e,null,t,a),i.push({event:v,listeners:y}),b?v.data=b:null!==(b=Ut(t))&&(v.data=b))),(b=Lt?function(e,n){switch(e){case"compositionend":return Ut(n);case"keypress":return 32!==n.which?null:(zt=!0,jt);case"textInput":return(e=n.data)===jt&&zt?null:e;default:return null}}(e,t):function(e,n){if(Wt)return"compositionend"===e||!Ft&&Bt(e,n)?(e=nt(),et=Qn=Zn=null,Wt=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Dt&&"ko"!==n.locale?null:n.data}}(e,t))&&(0<(r=Hr(r,"onBeforeInput")).length&&(a=new wt("onBeforeInput","beforeinput",null,t,a),i.push({event:a,listeners:r}),a.data=b))}jr(i,n)}))}function Gr(e,n,t){return{instance:e,listener:n,currentTarget:t}}function Hr(e,n){for(var t=n+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;5===a.tag&&null!==o&&(a=o,null!=(o=Me(e,t))&&r.unshift(Gr(e,o,a)),null!=(o=Me(e,n))&&r.push(Gr(e,o,a))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,n,t,r,a){for(var o=n._reactName,i=[];null!==t&&t!==r;){var s=t,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,a?null!=(l=Me(t,o))&&i.unshift(Gr(t,l,s)):a||null!=(l=Me(t,o))&&i.push(Gr(t,l,s))),t=t.return}0!==i.length&&e.push({event:n,listeners:i})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Zr(e,n,t){if(n=Jr(n),Jr(e)!==n&&t)throw Error(o(425))}function Qr(){}var ea=null,na=null;function ta(e,n){return"textarea"===e||"noscript"===e||"string"===typeof n.children||"number"===typeof n.children||"object"===typeof n.dangerouslySetInnerHTML&&null!==n.dangerouslySetInnerHTML&&null!=n.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,oa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oa?function(e){return oa.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function la(e,n){var t=n,r=0;do{var a=t.nextSibling;if(e.removeChild(t),a&&8===a.nodeType)if("/$"===(t=a.data)){if(0===r)return e.removeChild(a),void $n(n);r--}else"$"!==t&&"$?"!==t&&"$!"!==t||r++;t=a}while(t);$n(n)}function ua(e){for(;null!=e;e=e.nextSibling){var n=e.nodeType;if(1===n||3===n)break;if(8===n){if("$"===(n=e.data)||"$!"===n||"$?"===n)break;if("/$"===n)return null}}return e}function ca(e){e=e.previousSibling;for(var n=0;e;){if(8===e.nodeType){var t=e.data;if("$"===t||"$!"===t||"$?"===t){if(0===n)return e;n--}else"/$"===t&&n++}e=e.previousSibling}return null}var da=Math.random().toString(36).slice(2),pa="__reactFiber$"+da,fa="__reactProps$"+da,ha="__reactContainer$"+da,ma="__reactEvents$"+da,ga="__reactListeners$"+da,ya="__reactHandles$"+da;function ba(e){var n=e[pa];if(n)return n;for(var t=e.parentNode;t;){if(n=t[ha]||t[pa]){if(t=n.alternate,null!==n.child||null!==t&&null!==t.child)for(e=ca(e);null!==e;){if(t=e[pa])return t;e=ca(e)}return n}t=(e=t).parentNode}return null}function va(e){return!(e=e[pa]||e[ha])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function Sa(e){return e[fa]||null}var ka=[],xa=-1;function Ia(e){return{current:e}}function _a(e){0>xa||(e.current=ka[xa],ka[xa]=null,xa--)}function Aa(e,n){xa++,ka[xa]=e.current,e.current=n}var Ta={},Ea=Ia(Ta),Oa=Ia(!1),Ca=Ta;function Na(e,n){var t=e.type.contextTypes;if(!t)return Ta;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in t)o[a]=n[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ma(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Pa(){_a(Oa),_a(Ea)}function Fa(e,n,t){if(Ea.current!==Ta)throw Error(o(168));Aa(Ea,n),Aa(Oa,t)}function Ra(e,n,t){var r=e.stateNode;if(n=n.childContextTypes,"function"!==typeof r.getChildContext)return t;for(var a in r=r.getChildContext())if(!(a in n))throw Error(o(108,$(e)||"Unknown",a));return D({},t,r)}function La(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ta,Ca=Ea.current,Aa(Ea,e),Aa(Oa,Oa.current),!0}function Da(e,n,t){var r=e.stateNode;if(!r)throw Error(o(169));t?(e=Ra(e,n,Ca),r.__reactInternalMemoizedMergedChildContext=e,_a(Oa),_a(Ea),Aa(Ea,e)):_a(Oa),Aa(Oa,t)}var ja=null,za=!1,Ba=!1;function Ua(e){null===ja?ja=[e]:ja.push(e)}function Wa(){if(!Ba&&null!==ja){Ba=!0;var e=0,n=wn;try{var t=ja;for(wn=1;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}ja=null,za=!1}catch(a){throw null!==ja&&(ja=ja.slice(e+1)),Ke(Qe,Wa),a}finally{wn=n,Ba=!1}}return null}var $a=[],Va=0,Ga=null,Ha=0,Ka=[],qa=0,Ya=null,Xa=1,Ja="";function Za(e,n){$a[Va++]=Ha,$a[Va++]=Ga,Ga=e,Ha=n}function Qa(e,n,t){Ka[qa++]=Xa,Ka[qa++]=Ja,Ka[qa++]=Ya,Ya=e;var r=Xa;e=Ja;var a=32-sn(r)-1;r&=~(1<<a),t+=1;var o=32-sn(n)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Xa=1<<32-sn(n)+a|t<<a|r,Ja=o+e}else Xa=1<<o|t<<a|r,Ja=e}function eo(e){null!==e.return&&(Za(e,1),Qa(e,1,0))}function no(e){for(;e===Ga;)Ga=$a[--Va],$a[Va]=null,Ha=$a[--Va],$a[Va]=null;for(;e===Ya;)Ya=Ka[--qa],Ka[qa]=null,Ja=Ka[--qa],Ka[qa]=null,Xa=Ka[--qa],Ka[qa]=null}var to=null,ro=null,ao=!1,oo=null;function io(e,n){var t=Mu(5,null,null,0);t.elementType="DELETED",t.stateNode=n,t.return=e,null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)}function so(e,n){switch(e.tag){case 5:var t=e.type;return null!==(n=1!==n.nodeType||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n)&&(e.stateNode=n,to=e,ro=ua(n.firstChild),!0);case 6:return null!==(n=""===e.pendingProps||3!==n.nodeType?null:n)&&(e.stateNode=n,to=e,ro=null,!0);case 13:return null!==(n=8!==n.nodeType?null:n)&&(t=null!==Ya?{id:Xa,overflow:Ja}:null,e.memoizedState={dehydrated:n,treeContext:t,retryLane:1073741824},(t=Mu(18,null,null,0)).stateNode=n,t.return=e,e.child=t,to=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function uo(e){if(ao){var n=ro;if(n){var t=n;if(!so(e,n)){if(lo(e))throw Error(o(418));n=ua(t.nextSibling);var r=to;n&&so(e,n)?io(r,t):(e.flags=-4097&e.flags|2,ao=!1,to=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,ao=!1,to=e}}}function co(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;to=e}function po(e){if(e!==to)return!1;if(!ao)return co(e),ao=!0,!1;var n;if((n=3!==e.tag)&&!(n=5!==e.tag)&&(n="head"!==(n=e.type)&&"body"!==n&&!ta(e.type,e.memoizedProps)),n&&(n=ro)){if(lo(e))throw fo(),Error(o(418));for(;n;)io(e,n),n=ua(n.nextSibling)}if(co(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType){var t=e.data;if("/$"===t){if(0===n){ro=ua(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++}e=e.nextSibling}ro=null}}else ro=to?ua(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ua(e.nextSibling)}function ho(){ro=to=null,ao=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=w.ReactCurrentBatchConfig;function yo(e,n){if(e&&e.defaultProps){for(var t in n=D({},n),e=e.defaultProps)void 0===n[t]&&(n[t]=e[t]);return n}return n}var bo=Ia(null),vo=null,wo=null,So=null;function ko(){So=wo=vo=null}function xo(e){var n=bo.current;_a(bo),e._currentValue=n}function Io(e,n,t){for(;null!==e;){var r=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,null!==r&&(r.childLanes|=n)):null!==r&&(r.childLanes&n)!==n&&(r.childLanes|=n),e===t)break;e=e.return}}function _o(e,n){vo=e,So=wo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&n)&&(ws=!0),e.firstContext=null)}function Ao(e){var n=e._currentValue;if(So!==e)if(e={context:e,memoizedValue:n,next:null},null===wo){if(null===vo)throw Error(o(308));wo=e,vo.dependencies={lanes:0,firstContext:e}}else wo=wo.next=e;return n}var To=null;function Eo(e){null===To?To=[e]:To.push(e)}function Oo(e,n,t,r){var a=n.interleaved;return null===a?(t.next=t,Eo(n)):(t.next=a.next,a.next=t),n.interleaved=t,Co(e,r)}function Co(e,n){e.lanes|=n;var t=e.alternate;for(null!==t&&(t.lanes|=n),t=e,e=e.return;null!==e;)e.childLanes|=n,null!==(t=e.alternate)&&(t.childLanes|=n),t=e,e=e.return;return 3===t.tag?t.stateNode:null}var No=!1;function Mo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Po(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fo(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Ro(e,n,t){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ol)){var a=r.pending;return null===a?n.next=n:(n.next=a.next,a.next=n),r.pending=n,Co(e,t)}return null===(a=r.interleaved)?(n.next=n,Eo(r)):(n.next=a.next,a.next=n),r.interleaved=n,Co(e,t)}function Lo(e,n,t){if(null!==(n=n.updateQueue)&&(n=n.shared,0!==(4194240&t))){var r=n.lanes;t|=r&=e.pendingLanes,n.lanes=t,vn(e,t)}}function Do(e,n){var t=e.updateQueue,r=e.alternate;if(null!==r&&t===(r=r.updateQueue)){var a=null,o=null;if(null!==(t=t.firstBaseUpdate)){do{var i={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};null===o?a=o=i:o=o.next=i,t=t.next}while(null!==t);null===o?a=o=n:o=o.next=n}else a=o=n;return t={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=t)}null===(e=t.lastBaseUpdate)?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function jo(e,n,t,r){var a=e.updateQueue;No=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var l=s,u=l.next;l.next=null,null===i?o=u:i.next=u,i=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==i&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==o){var d=a.baseState;for(i=0,c=u=l=null,s=o;;){var p=s.lane,f=s.eventTime;if((r&p)===p){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,m=s;switch(p=n,f=t,m.tag){case 1:if("function"===typeof(h=m.payload)){d=h.call(f,d,p);break e}d=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(p="function"===typeof(h=m.payload)?h.call(f,d,p):h)||void 0===p)break e;d=D({},d,p);break e;case 2:No=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(p=a.effects)?a.effects=[s]:p.push(s))}else f={eventTime:f,lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=d):c=c.next=f,i|=p;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(p=s).next,p.next=null,a.lastBaseUpdate=p,a.shared.pending=null}}if(null===c&&(l=d),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,null!==(n=a.shared.interleaved)){a=n;do{i|=a.lane,a=a.next}while(a!==n)}else null===o&&(a.shared.lanes=0);Dl|=i,e.lanes=i,e.memoizedState=d}}function zo(e,n,t){if(e=n.effects,n.effects=null,null!==e)for(n=0;n<e.length;n++){var r=e[n],a=r.callback;if(null!==a){if(r.callback=null,r=t,"function"!==typeof a)throw Error(o(191,a));a.call(r)}}}var Bo=(new r.Component).refs;function Uo(e,n,t,r){t=null===(t=t(r,n=e.memoizedState))||void 0===t?n:D({},n,t),e.memoizedState=t,0===e.lanes&&(e.updateQueue.baseState=t)}var Wo={isMounted:function(e){return!!(e=e._reactInternals)&&We(e)===e},enqueueSetState:function(e,n,t){e=e._reactInternals;var r=nu(),a=tu(e),o=Fo(r,a);o.payload=n,void 0!==t&&null!==t&&(o.callback=t),null!==(n=Ro(e,o,a))&&(ru(n,e,a,r),Lo(n,e,a))},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var r=nu(),a=tu(e),o=Fo(r,a);o.tag=1,o.payload=n,void 0!==t&&null!==t&&(o.callback=t),null!==(n=Ro(e,o,a))&&(ru(n,e,a,r),Lo(n,e,a))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=nu(),r=tu(e),a=Fo(t,r);a.tag=2,void 0!==n&&null!==n&&(a.callback=n),null!==(n=Ro(e,a,r))&&(ru(n,e,r,t),Lo(n,e,r))}};function $o(e,n,t,r,a,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!n.prototype||!n.prototype.isPureReactComponent||(!lr(t,r)||!lr(a,o))}function Vo(e,n,t){var r=!1,a=Ta,o=n.contextType;return"object"===typeof o&&null!==o?o=Ao(o):(a=Ma(n)?Ca:Ea.current,o=(r=null!==(r=n.contextTypes)&&void 0!==r)?Na(e,a):Ta),n=new n(t,o),e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,n.updater=Wo,e.stateNode=n,n._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),n}function Go(e,n,t,r){e=n.state,"function"===typeof n.componentWillReceiveProps&&n.componentWillReceiveProps(t,r),"function"===typeof n.UNSAFE_componentWillReceiveProps&&n.UNSAFE_componentWillReceiveProps(t,r),n.state!==e&&Wo.enqueueReplaceState(n,n.state,null)}function Ho(e,n,t,r){var a=e.stateNode;a.props=t,a.state=e.memoizedState,a.refs=Bo,Mo(e);var o=n.contextType;"object"===typeof o&&null!==o?a.context=Ao(o):(o=Ma(n)?Ca:Ea.current,a.context=Na(e,o)),a.state=e.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(Uo(e,n,o,t),a.state=e.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(n=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),n!==a.state&&Wo.enqueueReplaceState(a,a.state,null),jo(e,t,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function Ko(e,n,t){if(null!==(e=t.ref)&&"function"!==typeof e&&"object"!==typeof e){if(t._owner){if(t=t._owner){if(1!==t.tag)throw Error(o(309));var r=t.stateNode}if(!r)throw Error(o(147,e));var a=r,i=""+e;return null!==n&&null!==n.ref&&"function"===typeof n.ref&&n.ref._stringRef===i?n.ref:(n=function(e){var n=a.refs;n===Bo&&(n=a.refs={}),null===e?delete n[i]:n[i]=e},n._stringRef=i,n)}if("string"!==typeof e)throw Error(o(284));if(!t._owner)throw Error(o(290,e))}return e}function qo(e,n){throw e=Object.prototype.toString.call(n),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Yo(e){return(0,e._init)(e._payload)}function Xo(e){function n(n,t){if(e){var r=n.deletions;null===r?(n.deletions=[t],n.flags|=16):r.push(t)}}function t(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function r(e,n){for(e=new Map;null!==n;)null!==n.key?e.set(n.key,n):e.set(n.index,n),n=n.sibling;return e}function a(e,n){return(e=Fu(e,n)).index=0,e.sibling=null,e}function i(n,t,r){return n.index=r,e?null!==(r=n.alternate)?(r=r.index)<t?(n.flags|=2,t):r:(n.flags|=2,t):(n.flags|=1048576,t)}function s(n){return e&&null===n.alternate&&(n.flags|=2),n}function l(e,n,t,r){return null===n||6!==n.tag?((n=ju(t,e.mode,r)).return=e,n):((n=a(n,t)).return=e,n)}function u(e,n,t,r){var o=t.type;return o===x?d(e,n,t.props.children,r,t.key):null!==n&&(n.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===M&&Yo(o)===n.type)?((r=a(n,t.props)).ref=Ko(e,n,t),r.return=e,r):((r=Ru(t.type,t.key,t.props,null,e.mode,r)).ref=Ko(e,n,t),r.return=e,r)}function c(e,n,t,r){return null===n||4!==n.tag||n.stateNode.containerInfo!==t.containerInfo||n.stateNode.implementation!==t.implementation?((n=zu(t,e.mode,r)).return=e,n):((n=a(n,t.children||[])).return=e,n)}function d(e,n,t,r,o){return null===n||7!==n.tag?((n=Lu(t,e.mode,r,o)).return=e,n):((n=a(n,t)).return=e,n)}function p(e,n,t){if("string"===typeof n&&""!==n||"number"===typeof n)return(n=ju(""+n,e.mode,t)).return=e,n;if("object"===typeof n&&null!==n){switch(n.$$typeof){case S:return(t=Ru(n.type,n.key,n.props,null,e.mode,t)).ref=Ko(e,null,n),t.return=e,t;case k:return(n=zu(n,e.mode,t)).return=e,n;case M:return p(e,(0,n._init)(n._payload),t)}if(ne(n)||R(n))return(n=Lu(n,e.mode,t,null)).return=e,n;qo(e,n)}return null}function f(e,n,t,r){var a=null!==n?n.key:null;if("string"===typeof t&&""!==t||"number"===typeof t)return null!==a?null:l(e,n,""+t,r);if("object"===typeof t&&null!==t){switch(t.$$typeof){case S:return t.key===a?u(e,n,t,r):null;case k:return t.key===a?c(e,n,t,r):null;case M:return f(e,n,(a=t._init)(t._payload),r)}if(ne(t)||R(t))return null!==a?null:d(e,n,t,r,null);qo(e,t)}return null}function h(e,n,t,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return l(n,e=e.get(t)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case S:return u(n,e=e.get(null===r.key?t:r.key)||null,r,a);case k:return c(n,e=e.get(null===r.key?t:r.key)||null,r,a);case M:return h(e,n,t,(0,r._init)(r._payload),a)}if(ne(r)||R(r))return d(n,e=e.get(t)||null,r,a,null);qo(n,r)}return null}function m(a,o,s,l){for(var u=null,c=null,d=o,m=o=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(a,d,s[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&n(a,d),o=i(y,o,m),null===c?u=y:c.sibling=y,c=y,d=g}if(m===s.length)return t(a,d),ao&&Za(a,m),u;if(null===d){for(;m<s.length;m++)null!==(d=p(a,s[m],l))&&(o=i(d,o,m),null===c?u=d:c.sibling=d,c=d);return ao&&Za(a,m),u}for(d=r(a,d);m<s.length;m++)null!==(g=h(d,a,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=i(g,o,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach((function(e){return n(a,e)})),ao&&Za(a,m),u}function g(a,s,l,u){var c=R(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var d=c=null,m=s,g=s=0,y=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var v=f(a,m,b.value,u);if(null===v){null===m&&(m=y);break}e&&m&&null===v.alternate&&n(a,m),s=i(v,s,g),null===d?c=v:d.sibling=v,d=v,m=y}if(b.done)return t(a,m),ao&&Za(a,g),c;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=p(a,b.value,u))&&(s=i(b,s,g),null===d?c=b:d.sibling=b,d=b);return ao&&Za(a,g),c}for(m=r(a,m);!b.done;g++,b=l.next())null!==(b=h(m,a,g,b.value,u))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),s=i(b,s,g),null===d?c=b:d.sibling=b,d=b);return e&&m.forEach((function(e){return n(a,e)})),ao&&Za(a,g),c}return function e(r,o,i,l){if("object"===typeof i&&null!==i&&i.type===x&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case S:e:{for(var u=i.key,c=o;null!==c;){if(c.key===u){if((u=i.type)===x){if(7===c.tag){t(r,c.sibling),(o=a(c,i.props.children)).return=r,r=o;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===M&&Yo(u)===c.type){t(r,c.sibling),(o=a(c,i.props)).ref=Ko(r,c,i),o.return=r,r=o;break e}t(r,c);break}n(r,c),c=c.sibling}i.type===x?((o=Lu(i.props.children,r.mode,l,i.key)).return=r,r=o):((l=Ru(i.type,i.key,i.props,null,r.mode,l)).ref=Ko(r,o,i),l.return=r,r=l)}return s(r);case k:e:{for(c=i.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===i.containerInfo&&o.stateNode.implementation===i.implementation){t(r,o.sibling),(o=a(o,i.children||[])).return=r,r=o;break e}t(r,o);break}n(r,o),o=o.sibling}(o=zu(i,r.mode,l)).return=r,r=o}return s(r);case M:return e(r,o,(c=i._init)(i._payload),l)}if(ne(i))return m(r,o,i,l);if(R(i))return g(r,o,i,l);qo(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==o&&6===o.tag?(t(r,o.sibling),(o=a(o,i)).return=r,r=o):(t(r,o),(o=ju(i,r.mode,l)).return=r,r=o),s(r)):t(r,o)}}var Jo=Xo(!0),Zo=Xo(!1),Qo={},ei=Ia(Qo),ni=Ia(Qo),ti=Ia(Qo);function ri(e){if(e===Qo)throw Error(o(174));return e}function ai(e,n){switch(Aa(ti,n),Aa(ni,e),Aa(ei,Qo),e=n.nodeType){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:le(null,"");break;default:n=le(n=(e=8===e?n.parentNode:n).namespaceURI||null,e=e.tagName)}_a(ei),Aa(ei,n)}function oi(){_a(ei),_a(ni),_a(ti)}function ii(e){ri(ti.current);var n=ri(ei.current),t=le(n,e.type);n!==t&&(Aa(ni,e),Aa(ei,t))}function si(e){ni.current===e&&(_a(ei),_a(ni))}var li=Ia(0);function ui(e){for(var n=e;null!==n;){if(13===n.tag){var t=n.memoizedState;if(null!==t&&(null===(t=t.dehydrated)||"$?"===t.data||"$!"===t.data))return n}else if(19===n.tag&&void 0!==n.memoizedProps.revealOrder){if(0!==(128&n.flags))return n}else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ci=[];function di(){for(var e=0;e<ci.length;e++)ci[e]._workInProgressVersionPrimary=null;ci.length=0}var pi=w.ReactCurrentDispatcher,fi=w.ReactCurrentBatchConfig,hi=0,mi=null,gi=null,yi=null,bi=!1,vi=!1,wi=0,Si=0;function ki(){throw Error(o(321))}function xi(e,n){if(null===n)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!sr(e[t],n[t]))return!1;return!0}function Ii(e,n,t,r,a,i){if(hi=i,mi=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,pi.current=null===e||null===e.memoizedState?ss:ls,e=t(r,a),vi){i=0;do{if(vi=!1,wi=0,25<=i)throw Error(o(301));i+=1,yi=gi=null,n.updateQueue=null,pi.current=us,e=t(r,a)}while(vi)}if(pi.current=is,n=null!==gi&&null!==gi.next,hi=0,yi=gi=mi=null,bi=!1,n)throw Error(o(300));return e}function _i(){var e=0!==wi;return wi=0,e}function Ai(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yi?mi.memoizedState=yi=e:yi=yi.next=e,yi}function Ti(){if(null===gi){var e=mi.alternate;e=null!==e?e.memoizedState:null}else e=gi.next;var n=null===yi?mi.memoizedState:yi.next;if(null!==n)yi=n,gi=e;else{if(null===e)throw Error(o(310));e={memoizedState:(gi=e).memoizedState,baseState:gi.baseState,baseQueue:gi.baseQueue,queue:gi.queue,next:null},null===yi?mi.memoizedState=yi=e:yi=yi.next=e}return yi}function Ei(e,n){return"function"===typeof n?n(e):n}function Oi(e){var n=Ti(),t=n.queue;if(null===t)throw Error(o(311));t.lastRenderedReducer=e;var r=gi,a=r.baseQueue,i=t.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,t.pending=null}if(null!==a){i=a.next,r=r.baseState;var l=s=null,u=null,c=i;do{var d=c.lane;if((hi&d)===d)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var p={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=p,s=r):u=u.next=p,mi.lanes|=d,Dl|=d}c=c.next}while(null!==c&&c!==i);null===u?s=r:u.next=l,sr(r,n.memoizedState)||(ws=!0),n.memoizedState=r,n.baseState=s,n.baseQueue=u,t.lastRenderedState=r}if(null!==(e=t.interleaved)){a=e;do{i=a.lane,mi.lanes|=i,Dl|=i,a=a.next}while(a!==e)}else null===a&&(t.lanes=0);return[n.memoizedState,t.dispatch]}function Ci(e){var n=Ti(),t=n.queue;if(null===t)throw Error(o(311));t.lastRenderedReducer=e;var r=t.dispatch,a=t.pending,i=n.memoizedState;if(null!==a){t.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);sr(i,n.memoizedState)||(ws=!0),n.memoizedState=i,null===n.baseQueue&&(n.baseState=i),t.lastRenderedState=i}return[i,r]}function Ni(){}function Mi(e,n){var t=mi,r=Ti(),a=n(),i=!sr(r.memoizedState,a);if(i&&(r.memoizedState=a,ws=!0),r=r.queue,Vi(Ri.bind(null,t,r,e),[e]),r.getSnapshot!==n||i||null!==yi&&1&yi.memoizedState.tag){if(t.flags|=2048,zi(9,Fi.bind(null,t,r,a,n),void 0,null),null===Cl)throw Error(o(349));0!==(30&hi)||Pi(t,n,a)}return a}function Pi(e,n,t){e.flags|=16384,e={getSnapshot:n,value:t},null===(n=mi.updateQueue)?(n={lastEffect:null,stores:null},mi.updateQueue=n,n.stores=[e]):null===(t=n.stores)?n.stores=[e]:t.push(e)}function Fi(e,n,t,r){n.value=t,n.getSnapshot=r,Li(n)&&Di(e)}function Ri(e,n,t){return t((function(){Li(n)&&Di(e)}))}function Li(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!sr(e,t)}catch(r){return!0}}function Di(e){var n=Co(e,1);null!==n&&ru(n,e,1,-1)}function ji(e){var n=Ai();return"function"===typeof e&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ei,lastRenderedState:e},n.queue=e,e=e.dispatch=ts.bind(null,mi,e),[n.memoizedState,e]}function zi(e,n,t,r){return e={tag:e,create:n,destroy:t,deps:r,next:null},null===(n=mi.updateQueue)?(n={lastEffect:null,stores:null},mi.updateQueue=n,n.lastEffect=e.next=e):null===(t=n.lastEffect)?n.lastEffect=e.next=e:(r=t.next,t.next=e,e.next=r,n.lastEffect=e),e}function Bi(){return Ti().memoizedState}function Ui(e,n,t,r){var a=Ai();mi.flags|=e,a.memoizedState=zi(1|n,t,void 0,void 0===r?null:r)}function Wi(e,n,t,r){var a=Ti();r=void 0===r?null:r;var o=void 0;if(null!==gi){var i=gi.memoizedState;if(o=i.destroy,null!==r&&xi(r,i.deps))return void(a.memoizedState=zi(n,t,o,r))}mi.flags|=e,a.memoizedState=zi(1|n,t,o,r)}function $i(e,n){return Ui(8390656,8,e,n)}function Vi(e,n){return Wi(2048,8,e,n)}function Gi(e,n){return Wi(4,2,e,n)}function Hi(e,n){return Wi(4,4,e,n)}function Ki(e,n){return"function"===typeof n?(e=e(),n(e),function(){n(null)}):null!==n&&void 0!==n?(e=e(),n.current=e,function(){n.current=null}):void 0}function qi(e,n,t){return t=null!==t&&void 0!==t?t.concat([e]):null,Wi(4,4,Ki.bind(null,n,e),t)}function Yi(){}function Xi(e,n){var t=Ti();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&xi(n,r[1])?r[0]:(t.memoizedState=[e,n],e)}function Ji(e,n){var t=Ti();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&xi(n,r[1])?r[0]:(e=e(),t.memoizedState=[e,n],e)}function Zi(e,n,t){return 0===(21&hi)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=t):(sr(t,n)||(t=gn(),mi.lanes|=t,Dl|=t,e.baseState=!0),n)}function Qi(e,n){var t=wn;wn=0!==t&&4>t?t:4,e(!0);var r=fi.transition;fi.transition={};try{e(!1),n()}finally{wn=t,fi.transition=r}}function es(){return Ti().memoizedState}function ns(e,n,t){var r=tu(e);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},rs(e))as(n,t);else if(null!==(t=Oo(e,n,t,r))){ru(t,e,r,nu()),os(t,n,r)}}function ts(e,n,t){var r=tu(e),a={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(rs(e))as(n,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=n.lastRenderedReducer))try{var i=n.lastRenderedState,s=o(i,t);if(a.hasEagerState=!0,a.eagerState=s,sr(s,i)){var l=n.interleaved;return null===l?(a.next=a,Eo(n)):(a.next=l.next,l.next=a),void(n.interleaved=a)}}catch(u){}null!==(t=Oo(e,n,a,r))&&(ru(t,e,r,a=nu()),os(t,n,r))}}function rs(e){var n=e.alternate;return e===mi||null!==n&&n===mi}function as(e,n){vi=bi=!0;var t=e.pending;null===t?n.next=n:(n.next=t.next,t.next=n),e.pending=n}function os(e,n,t){if(0!==(4194240&t)){var r=n.lanes;t|=r&=e.pendingLanes,n.lanes=t,vn(e,t)}}var is={readContext:Ao,useCallback:ki,useContext:ki,useEffect:ki,useImperativeHandle:ki,useInsertionEffect:ki,useLayoutEffect:ki,useMemo:ki,useReducer:ki,useRef:ki,useState:ki,useDebugValue:ki,useDeferredValue:ki,useTransition:ki,useMutableSource:ki,useSyncExternalStore:ki,useId:ki,unstable_isNewReconciler:!1},ss={readContext:Ao,useCallback:function(e,n){return Ai().memoizedState=[e,void 0===n?null:n],e},useContext:Ao,useEffect:$i,useImperativeHandle:function(e,n,t){return t=null!==t&&void 0!==t?t.concat([e]):null,Ui(4194308,4,Ki.bind(null,n,e),t)},useLayoutEffect:function(e,n){return Ui(4194308,4,e,n)},useInsertionEffect:function(e,n){return Ui(4,2,e,n)},useMemo:function(e,n){var t=Ai();return n=void 0===n?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var r=Ai();return n=void 0!==t?t(n):n,r.memoizedState=r.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},r.queue=e,e=e.dispatch=ns.bind(null,mi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ai().memoizedState=e},useState:ji,useDebugValue:Yi,useDeferredValue:function(e){return Ai().memoizedState=e},useTransition:function(){var e=ji(!1),n=e[0];return e=Qi.bind(null,e[1]),Ai().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,t){var r=mi,a=Ai();if(ao){if(void 0===t)throw Error(o(407));t=t()}else{if(t=n(),null===Cl)throw Error(o(349));0!==(30&hi)||Pi(r,n,t)}a.memoizedState=t;var i={value:t,getSnapshot:n};return a.queue=i,$i(Ri.bind(null,r,i,e),[e]),r.flags|=2048,zi(9,Fi.bind(null,r,i,t,n),void 0,null),t},useId:function(){var e=Ai(),n=Cl.identifierPrefix;if(ao){var t=Ja;n=":"+n+"R"+(t=(Xa&~(1<<32-sn(Xa)-1)).toString(32)+t),0<(t=wi++)&&(n+="H"+t.toString(32)),n+=":"}else n=":"+n+"r"+(t=Si++).toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},ls={readContext:Ao,useCallback:Xi,useContext:Ao,useEffect:Vi,useImperativeHandle:qi,useInsertionEffect:Gi,useLayoutEffect:Hi,useMemo:Ji,useReducer:Oi,useRef:Bi,useState:function(){return Oi(Ei)},useDebugValue:Yi,useDeferredValue:function(e){return Zi(Ti(),gi.memoizedState,e)},useTransition:function(){return[Oi(Ei)[0],Ti().memoizedState]},useMutableSource:Ni,useSyncExternalStore:Mi,useId:es,unstable_isNewReconciler:!1},us={readContext:Ao,useCallback:Xi,useContext:Ao,useEffect:Vi,useImperativeHandle:qi,useInsertionEffect:Gi,useLayoutEffect:Hi,useMemo:Ji,useReducer:Ci,useRef:Bi,useState:function(){return Ci(Ei)},useDebugValue:Yi,useDeferredValue:function(e){var n=Ti();return null===gi?n.memoizedState=e:Zi(n,gi.memoizedState,e)},useTransition:function(){return[Ci(Ei)[0],Ti().memoizedState]},useMutableSource:Ni,useSyncExternalStore:Mi,useId:es,unstable_isNewReconciler:!1};function cs(e,n){try{var t="",r=n;do{t+=U(r),r=r.return}while(r);var a=t}catch(o){a="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:n,stack:a,digest:null}}function ds(e,n,t){return{value:e,source:null,stack:null!=t?t:null,digest:null!=n?n:null}}function ps(e,n){try{console.error(n.value)}catch(t){setTimeout((function(){throw t}))}}var fs="function"===typeof WeakMap?WeakMap:Map;function hs(e,n,t){(t=Fo(-1,t)).tag=3,t.payload={element:null};var r=n.value;return t.callback=function(){Gl||(Gl=!0,Hl=r),ps(0,n)},t}function ms(e,n,t){(t=Fo(-1,t)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=n.value;t.payload=function(){return r(a)},t.callback=function(){ps(0,n)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(t.callback=function(){ps(0,n),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})}),t}function gs(e,n,t){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var a=new Set;r.set(n,a)}else void 0===(a=r.get(n))&&(a=new Set,r.set(n,a));a.has(t)||(a.add(t),e=Au.bind(null,e,n,t),n.then(e,e))}function ys(e){do{var n;if((n=13===e.tag)&&(n=null===(n=e.memoizedState)||null!==n.dehydrated),n)return e;e=e.return}while(null!==e);return null}function bs(e,n,t,r,a){return 0===(1&e.mode)?(e===n?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,1===t.tag&&(null===t.alternate?t.tag=17:((n=Fo(-1,1)).tag=2,Ro(t,n,1))),t.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var vs=w.ReactCurrentOwner,ws=!1;function Ss(e,n,t,r){n.child=null===e?Zo(n,null,t,r):Jo(n,e.child,t,r)}function ks(e,n,t,r,a){t=t.render;var o=n.ref;return _o(n,a),r=Ii(e,n,t,r,o,a),t=_i(),null===e||ws?(ao&&t&&eo(n),n.flags|=1,Ss(e,n,r,a),n.child):(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,Gs(e,n,a))}function xs(e,n,t,r,a){if(null===e){var o=t.type;return"function"!==typeof o||Pu(o)||void 0!==o.defaultProps||null!==t.compare||void 0!==t.defaultProps?((e=Ru(t.type,null,r,n,n.mode,a)).ref=n.ref,e.return=n,n.child=e):(n.tag=15,n.type=o,Is(e,n,o,r,a))}if(o=e.child,0===(e.lanes&a)){var i=o.memoizedProps;if((t=null!==(t=t.compare)?t:lr)(i,r)&&e.ref===n.ref)return Gs(e,n,a)}return n.flags|=1,(e=Fu(o,r)).ref=n.ref,e.return=n,n.child=e}function Is(e,n,t,r,a){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===n.ref){if(ws=!1,n.pendingProps=r=o,0===(e.lanes&a))return n.lanes=e.lanes,Gs(e,n,a);0!==(131072&e.flags)&&(ws=!0)}}return Ts(e,n,t,r,a)}function _s(e,n,t){var r=n.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&n.mode))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Aa(Fl,Pl),Pl|=t;else{if(0===(1073741824&t))return e=null!==o?o.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Aa(Fl,Pl),Pl|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:t,Aa(Fl,Pl),Pl|=r}else null!==o?(r=o.baseLanes|t,n.memoizedState=null):r=t,Aa(Fl,Pl),Pl|=r;return Ss(e,n,a,t),n.child}function As(e,n){var t=n.ref;(null===e&&null!==t||null!==e&&e.ref!==t)&&(n.flags|=512,n.flags|=2097152)}function Ts(e,n,t,r,a){var o=Ma(t)?Ca:Ea.current;return o=Na(n,o),_o(n,a),t=Ii(e,n,t,r,o,a),r=_i(),null===e||ws?(ao&&r&&eo(n),n.flags|=1,Ss(e,n,t,a),n.child):(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,Gs(e,n,a))}function Es(e,n,t,r,a){if(Ma(t)){var o=!0;La(n)}else o=!1;if(_o(n,a),null===n.stateNode)Vs(e,n),Vo(n,t,r),Ho(n,t,r,a),r=!0;else if(null===e){var i=n.stateNode,s=n.memoizedProps;i.props=s;var l=i.context,u=t.contextType;"object"===typeof u&&null!==u?u=Ao(u):u=Na(n,u=Ma(t)?Ca:Ea.current);var c=t.getDerivedStateFromProps,d="function"===typeof c||"function"===typeof i.getSnapshotBeforeUpdate;d||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==r||l!==u)&&Go(n,i,r,u),No=!1;var p=n.memoizedState;i.state=p,jo(n,r,i,a),l=n.memoizedState,s!==r||p!==l||Oa.current||No?("function"===typeof c&&(Uo(n,t,c,r),l=n.memoizedState),(s=No||$o(n,t,s,r,p,l,u))?(d||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(n.flags|=4194308)):("function"===typeof i.componentDidMount&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=l),i.props=r,i.state=l,i.context=u,r=s):("function"===typeof i.componentDidMount&&(n.flags|=4194308),r=!1)}else{i=n.stateNode,Po(e,n),s=n.memoizedProps,u=n.type===n.elementType?s:yo(n.type,s),i.props=u,d=n.pendingProps,p=i.context,"object"===typeof(l=t.contextType)&&null!==l?l=Ao(l):l=Na(n,l=Ma(t)?Ca:Ea.current);var f=t.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==d||p!==l)&&Go(n,i,r,l),No=!1,p=n.memoizedState,i.state=p,jo(n,r,i,a);var h=n.memoizedState;s!==d||p!==h||Oa.current||No?("function"===typeof f&&(Uo(n,t,f,r),h=n.memoizedState),(u=No||$o(n,t,u,r,p,h,l)||!1)?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,h,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,h,l)),"function"===typeof i.componentDidUpdate&&(n.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(n.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(n.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=h),i.props=r,i.state=h,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&p===e.memoizedState||(n.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&p===e.memoizedState||(n.flags|=1024),r=!1)}return Os(e,n,t,r,o,a)}function Os(e,n,t,r,a,o){As(e,n);var i=0!==(128&n.flags);if(!r&&!i)return a&&Da(n,t,!1),Gs(e,n,o);r=n.stateNode,vs.current=n;var s=i&&"function"!==typeof t.getDerivedStateFromError?null:r.render();return n.flags|=1,null!==e&&i?(n.child=Jo(n,e.child,null,o),n.child=Jo(n,null,s,o)):Ss(e,n,s,o),n.memoizedState=r.state,a&&Da(n,t,!0),n.child}function Cs(e){var n=e.stateNode;n.pendingContext?Fa(0,n.pendingContext,n.pendingContext!==n.context):n.context&&Fa(0,n.context,!1),ai(e,n.containerInfo)}function Ns(e,n,t,r,a){return ho(),mo(a),n.flags|=256,Ss(e,n,t,r),n.child}var Ms,Ps,Fs,Rs,Ls={dehydrated:null,treeContext:null,retryLane:0};function Ds(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,n,t){var r,a=n.pendingProps,i=li.current,s=!1,l=0!==(128&n.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(s=!0,n.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Aa(li,1&i),null===e)return uo(n),null!==(e=n.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&n.mode)?n.lanes=1:"$!"===e.data?n.lanes=8:n.lanes=1073741824,null):(l=a.children,e=a.fallback,s?(a=n.mode,s=n.child,l={mode:"hidden",children:l},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Du(l,a,0,null),e=Lu(e,a,t,null),s.return=n,e.return=n,s.sibling=e,n.child=s,n.child.memoizedState=Ds(t),n.memoizedState=Ls,e):zs(n,l));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,n,t,r,a,i,s){if(t)return 256&n.flags?(n.flags&=-257,Bs(e,n,s,r=ds(Error(o(422))))):null!==n.memoizedState?(n.child=e.child,n.flags|=128,null):(i=r.fallback,a=n.mode,r=Du({mode:"visible",children:r.children},a,0,null),(i=Lu(i,a,s,null)).flags|=2,r.return=n,i.return=n,r.sibling=i,n.child=r,0!==(1&n.mode)&&Jo(n,e.child,null,s),n.child.memoizedState=Ds(s),n.memoizedState=Ls,i);if(0===(1&n.mode))return Bs(e,n,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var l=r.dgst;return r=l,Bs(e,n,s,r=ds(i=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),ws||l){if(null!==(r=Cl)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Co(e,a),ru(r,e,a,-1))}return gu(),Bs(e,n,s,r=ds(Error(o(421))))}return"$?"===a.data?(n.flags|=128,n.child=e.child,n=Eu.bind(null,e),a._reactRetry=n,null):(e=i.treeContext,ro=ua(a.nextSibling),to=n,ao=!0,oo=null,null!==e&&(Ka[qa++]=Xa,Ka[qa++]=Ja,Ka[qa++]=Ya,Xa=e.id,Ja=e.overflow,Ya=n),n=zs(n,r.children),n.flags|=4096,n)}(e,n,l,a,r,i,t);if(s){s=a.fallback,l=n.mode,r=(i=e.child).sibling;var u={mode:"hidden",children:a.children};return 0===(1&l)&&n.child!==i?((a=n.child).childLanes=0,a.pendingProps=u,n.deletions=null):(a=Fu(i,u)).subtreeFlags=14680064&i.subtreeFlags,null!==r?s=Fu(r,s):(s=Lu(s,l,t,null)).flags|=2,s.return=n,a.return=n,a.sibling=s,n.child=a,a=s,s=n.child,l=null===(l=e.child.memoizedState)?Ds(t):{baseLanes:l.baseLanes|t,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~t,n.memoizedState=Ls,a}return e=(s=e.child).sibling,a=Fu(s,{mode:"visible",children:a.children}),0===(1&n.mode)&&(a.lanes=t),a.return=n,a.sibling=null,null!==e&&(null===(t=n.deletions)?(n.deletions=[e],n.flags|=16):t.push(e)),n.child=a,n.memoizedState=null,a}function zs(e,n){return(n=Du({mode:"visible",children:n},e.mode,0,null)).return=e,e.child=n}function Bs(e,n,t,r){return null!==r&&mo(r),Jo(n,e.child,null,t),(e=zs(n,n.pendingProps.children)).flags|=2,n.memoizedState=null,e}function Us(e,n,t){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n),Io(e.return,n,t)}function Ws(e,n,t,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:a}:(o.isBackwards=n,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=t,o.tailMode=a)}function $s(e,n,t){var r=n.pendingProps,a=r.revealOrder,o=r.tail;if(Ss(e,n,r.children,t),0!==(2&(r=li.current)))r=1&r|2,n.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=n.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,t,n);else if(19===e.tag)Us(e,t,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Aa(li,r),0===(1&n.mode))n.memoizedState=null;else switch(a){case"forwards":for(t=n.child,a=null;null!==t;)null!==(e=t.alternate)&&null===ui(e)&&(a=t),t=t.sibling;null===(t=a)?(a=n.child,n.child=null):(a=t.sibling,t.sibling=null),Ws(n,!1,a,t,o);break;case"backwards":for(t=null,a=n.child,n.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ui(e)){n.child=a;break}e=a.sibling,a.sibling=t,t=a,a=e}Ws(n,!0,t,null,o);break;case"together":Ws(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Vs(e,n){0===(1&n.mode)&&null!==e&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Gs(e,n,t){if(null!==e&&(n.dependencies=e.dependencies),Dl|=n.lanes,0===(t&n.childLanes))return null;if(null!==e&&n.child!==e.child)throw Error(o(153));if(null!==n.child){for(t=Fu(e=n.child,e.pendingProps),n.child=t,t.return=n;null!==e.sibling;)e=e.sibling,(t=t.sibling=Fu(e,e.pendingProps)).return=n;t.sibling=null}return n.child}function Hs(e,n){if(!ao)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;null!==n;)null!==n.alternate&&(t=n),n=n.sibling;null===t?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?n||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ks(e){var n=null!==e.alternate&&e.alternate.child===e.child,t=0,r=0;if(n)for(var a=e.child;null!==a;)t|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)t|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=t,n}function qs(e,n,t){var r=n.pendingProps;switch(no(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ks(n),null;case 1:case 17:return Ma(n.type)&&Pa(),Ks(n),null;case 3:return r=n.stateNode,oi(),_a(Oa),_a(Ea),di(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(po(n)?n.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&n.flags)||(n.flags|=1024,null!==oo&&(su(oo),oo=null))),Ps(e,n),Ks(n),null;case 5:si(n);var a=ri(ti.current);if(t=n.type,null!==e&&null!=n.stateNode)Fs(e,n,t,r,a),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!r){if(null===n.stateNode)throw Error(o(166));return Ks(n),null}if(e=ri(ei.current),po(n)){r=n.stateNode,t=n.type;var i=n.memoizedProps;switch(r[pa]=n,r[fa]=i,e=0!==(1&n.mode),t){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(a=0;a<Rr.length;a++)zr(Rr[a],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":X(r,i),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},zr("invalid",r);break;case"textarea":ae(r,i),zr("invalid",r)}for(var l in be(t,i),a=null,i)if(i.hasOwnProperty(l)){var u=i[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,u,e),a=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==i.suppressHydrationWarning&&Zr(r.textContent,u,e),a=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&zr("scroll",r)}switch(t){case"input":H(r),Q(r,i,!0);break;case"textarea":H(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Qr)}r=a,n.updateQueue=r,null!==r&&(n.flags|=4)}else{l=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(t)),"http://www.w3.org/1999/xhtml"===e?"script"===t?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(t,{is:r.is}):(e=l.createElement(t),"select"===t&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,t),e[pa]=n,e[fa]=r,Ms(e,n,!1,!1),n.stateNode=e;e:{switch(l=ve(t,r),t){case"dialog":zr("cancel",e),zr("close",e),a=r;break;case"iframe":case"object":case"embed":zr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Rr.length;a++)zr(Rr[a],e);a=r;break;case"source":zr("error",e),a=r;break;case"img":case"image":case"link":zr("error",e),zr("load",e),a=r;break;case"details":zr("toggle",e),a=r;break;case"input":X(e,r),a=Y(e,r),zr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=D({},r,{value:void 0}),zr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),zr("invalid",e)}for(i in be(t,a),u=a)if(u.hasOwnProperty(i)){var c=u[i];"style"===i?ge(e,c):"dangerouslySetInnerHTML"===i?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===i?"string"===typeof c?("textarea"!==t||""!==c)&&pe(e,c):"number"===typeof c&&pe(e,""+c):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(s.hasOwnProperty(i)?null!=c&&"onScroll"===i&&zr("scroll",e):null!=c&&v(e,i,c,l))}switch(t){case"input":H(e),Q(e,r,!1);break;case"textarea":H(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+V(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?te(e,!!r.multiple,i,!1):null!=r.defaultValue&&te(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Qr)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(n.flags|=4)}null!==n.ref&&(n.flags|=512,n.flags|=2097152)}return Ks(n),null;case 6:if(e&&null!=n.stateNode)Rs(e,n,e.memoizedProps,r);else{if("string"!==typeof r&&null===n.stateNode)throw Error(o(166));if(t=ri(ti.current),ri(ei.current),po(n)){if(r=n.stateNode,t=n.memoizedProps,r[pa]=n,(i=r.nodeValue!==t)&&null!==(e=to))switch(e.tag){case 3:Zr(r.nodeValue,t,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,t,0!==(1&e.mode))}i&&(n.flags|=4)}else(r=(9===t.nodeType?t:t.ownerDocument).createTextNode(r))[pa]=n,n.stateNode=r}return Ks(n),null;case 13:if(_a(li),r=n.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ao&&null!==ro&&0!==(1&n.mode)&&0===(128&n.flags))fo(),ho(),n.flags|=98560,i=!1;else if(i=po(n),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=n.memoizedState)?i.dehydrated:null))throw Error(o(317));i[pa]=n}else ho(),0===(128&n.flags)&&(n.memoizedState=null),n.flags|=4;Ks(n),i=!1}else null!==oo&&(su(oo),oo=null),i=!0;if(!i)return 65536&n.flags?n:null}return 0!==(128&n.flags)?(n.lanes=t,n):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(n.child.flags|=8192,0!==(1&n.mode)&&(null===e||0!==(1&li.current)?0===Rl&&(Rl=3):gu())),null!==n.updateQueue&&(n.flags|=4),Ks(n),null);case 4:return oi(),Ps(e,n),null===e&&Wr(n.stateNode.containerInfo),Ks(n),null;case 10:return xo(n.type._context),Ks(n),null;case 19:if(_a(li),null===(i=n.memoizedState))return Ks(n),null;if(r=0!==(128&n.flags),null===(l=i.rendering))if(r)Hs(i,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=n.child;null!==e;){if(null!==(l=ui(e))){for(n.flags|=128,Hs(i,!1),null!==(r=l.updateQueue)&&(n.updateQueue=r,n.flags|=4),n.subtreeFlags=0,r=t,t=n.child;null!==t;)e=r,(i=t).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return Aa(li,1&li.current|2),n.child}e=e.sibling}null!==i.tail&&Je()>$l&&(n.flags|=128,r=!0,Hs(i,!1),n.lanes=4194304)}else{if(!r)if(null!==(e=ui(l))){if(n.flags|=128,r=!0,null!==(t=e.updateQueue)&&(n.updateQueue=t,n.flags|=4),Hs(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!ao)return Ks(n),null}else 2*Je()-i.renderingStartTime>$l&&1073741824!==t&&(n.flags|=128,r=!0,Hs(i,!1),n.lanes=4194304);i.isBackwards?(l.sibling=n.child,n.child=l):(null!==(t=i.last)?t.sibling=l:n.child=l,i.last=l)}return null!==i.tail?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.renderingStartTime=Je(),n.sibling=null,t=li.current,Aa(li,r?1&t|2:1&t),n):(Ks(n),null);case 22:case 23:return pu(),r=null!==n.memoizedState,null!==e&&null!==e.memoizedState!==r&&(n.flags|=8192),r&&0!==(1&n.mode)?0!==(1073741824&Pl)&&(Ks(n),6&n.subtreeFlags&&(n.flags|=8192)):Ks(n),null;case 24:case 25:return null}throw Error(o(156,n.tag))}function Ys(e,n){switch(no(n),n.tag){case 1:return Ma(n.type)&&Pa(),65536&(e=n.flags)?(n.flags=-65537&e|128,n):null;case 3:return oi(),_a(Oa),_a(Ea),di(),0!==(65536&(e=n.flags))&&0===(128&e)?(n.flags=-65537&e|128,n):null;case 5:return si(n),null;case 13:if(_a(li),null!==(e=n.memoizedState)&&null!==e.dehydrated){if(null===n.alternate)throw Error(o(340));ho()}return 65536&(e=n.flags)?(n.flags=-65537&e|128,n):null;case 19:return _a(li),null;case 4:return oi(),null;case 10:return xo(n.type._context),null;case 22:case 23:return pu(),null;default:return null}}Ms=function(e,n){for(var t=n.child;null!==t;){if(5===t.tag||6===t.tag)e.appendChild(t.stateNode);else if(4!==t.tag&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}},Ps=function(){},Fs=function(e,n,t,r){var a=e.memoizedProps;if(a!==r){e=n.stateNode,ri(ei.current);var o,i=null;switch(t){case"input":a=Y(e,a),r=Y(e,r),i=[];break;case"select":a=D({},a,{value:void 0}),r=D({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Qr)}for(c in be(t,r),t=null,a)if(!r.hasOwnProperty(c)&&a.hasOwnProperty(c)&&null!=a[c])if("style"===c){var l=a[c];for(o in l)l.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=a?a[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(t||(t={}),t[o]=u[o])}else t||(i||(i=[]),i.push(c,t)),t=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(i=i||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(i=i||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&zr("scroll",e),i||l===u||(i=[])):(i=i||[]).push(c,u))}t&&(i=i||[]).push("style",t);var c=i;(n.updateQueue=c)&&(n.flags|=4)}},Rs=function(e,n,t,r){t!==r&&(n.flags|=4)};var Xs=!1,Js=!1,Zs="function"===typeof WeakSet?WeakSet:Set,Qs=null;function el(e,n){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(r){_u(e,n,r)}else t.current=null}function nl(e,n,t){try{t()}catch(r){_u(e,n,r)}}var tl=!1;function rl(e,n,t){var r=n.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,void 0!==o&&nl(n,t,o)}a=a.next}while(a!==r)}}function al(e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var t=n=n.next;do{if((t.tag&e)===e){var r=t.create;t.destroy=r()}t=t.next}while(t!==n)}}function ol(e){var n=e.ref;if(null!==n){var t=e.stateNode;e.tag,e=t,"function"===typeof n?n(e):n.current=e}}function il(e){var n=e.alternate;null!==n&&(e.alternate=null,il(n)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(n=e.stateNode)&&(delete n[pa],delete n[fa],delete n[ma],delete n[ga],delete n[ya])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,n,t){var r=e.tag;if(5===r||6===r)e=e.stateNode,n?8===t.nodeType?t.parentNode.insertBefore(e,n):t.insertBefore(e,n):(8===t.nodeType?(n=t.parentNode).insertBefore(e,t):(n=t).appendChild(e),null!==(t=t._reactRootContainer)&&void 0!==t||null!==n.onclick||(n.onclick=Qr));else if(4!==r&&null!==(e=e.child))for(ul(e,n,t),e=e.sibling;null!==e;)ul(e,n,t),e=e.sibling}function cl(e,n,t){var r=e.tag;if(5===r||6===r)e=e.stateNode,n?t.insertBefore(e,n):t.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,n,t),e=e.sibling;null!==e;)cl(e,n,t),e=e.sibling}var dl=null,pl=!1;function fl(e,n,t){for(t=t.child;null!==t;)hl(e,n,t),t=t.sibling}function hl(e,n,t){if(on&&"function"===typeof on.onCommitFiberUnmount)try{on.onCommitFiberUnmount(an,t)}catch(s){}switch(t.tag){case 5:Js||el(t,n);case 6:var r=dl,a=pl;dl=null,fl(e,n,t),pl=a,null!==(dl=r)&&(pl?(e=dl,t=t.stateNode,8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)):dl.removeChild(t.stateNode));break;case 18:null!==dl&&(pl?(e=dl,t=t.stateNode,8===e.nodeType?la(e.parentNode,t):1===e.nodeType&&la(e,t),$n(e)):la(dl,t.stateNode));break;case 4:r=dl,a=pl,dl=t.stateNode.containerInfo,pl=!0,fl(e,n,t),dl=r,pl=a;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=t.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var o=a,i=o.destroy;o=o.tag,void 0!==i&&(0!==(2&o)||0!==(4&o))&&nl(t,n,i),a=a.next}while(a!==r)}fl(e,n,t);break;case 1:if(!Js&&(el(t,n),"function"===typeof(r=t.stateNode).componentWillUnmount))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(s){_u(t,n,s)}fl(e,n,t);break;case 21:fl(e,n,t);break;case 22:1&t.mode?(Js=(r=Js)||null!==t.memoizedState,fl(e,n,t),Js=r):fl(e,n,t);break;default:fl(e,n,t)}}function ml(e){var n=e.updateQueue;if(null!==n){e.updateQueue=null;var t=e.stateNode;null===t&&(t=e.stateNode=new Zs),n.forEach((function(n){var r=Ou.bind(null,e,n);t.has(n)||(t.add(n),n.then(r,r))}))}}function gl(e,n){var t=n.deletions;if(null!==t)for(var r=0;r<t.length;r++){var a=t[r];try{var i=e,s=n,l=s;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,pl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,pl=!0;break e}l=l.return}if(null===dl)throw Error(o(160));hl(i,s,a),dl=null,pl=!1;var u=a.alternate;null!==u&&(u.return=null),a.return=null}catch(c){_u(a,n,c)}}if(12854&n.subtreeFlags)for(n=n.child;null!==n;)yl(n,e),n=n.sibling}function yl(e,n){var t=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(n,e),bl(e),4&r){try{rl(3,e,e.return),al(3,e)}catch(g){_u(e,e.return,g)}try{rl(5,e,e.return)}catch(g){_u(e,e.return,g)}}break;case 1:gl(n,e),bl(e),512&r&&null!==t&&el(t,t.return);break;case 5:if(gl(n,e),bl(e),512&r&&null!==t&&el(t,t.return),32&e.flags){var a=e.stateNode;try{pe(a,"")}catch(g){_u(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,s=null!==t?t.memoizedProps:i,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===i.type&&null!=i.name&&J(a,i),ve(l,s);var c=ve(l,i);for(s=0;s<u.length;s+=2){var d=u[s],p=u[s+1];"style"===d?ge(a,p):"dangerouslySetInnerHTML"===d?de(a,p):"children"===d?pe(a,p):v(a,d,p,c)}switch(l){case"input":Z(a,i);break;case"textarea":oe(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var h=i.value;null!=h?te(a,!!i.multiple,h,!1):f!==!!i.multiple&&(null!=i.defaultValue?te(a,!!i.multiple,i.defaultValue,!0):te(a,!!i.multiple,i.multiple?[]:"",!1))}a[fa]=i}catch(g){_u(e,e.return,g)}}break;case 6:if(gl(n,e),bl(e),4&r){if(null===e.stateNode)throw Error(o(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){_u(e,e.return,g)}}break;case 3:if(gl(n,e),bl(e),4&r&&null!==t&&t.memoizedState.isDehydrated)try{$n(n.containerInfo)}catch(g){_u(e,e.return,g)}break;case 4:default:gl(n,e),bl(e);break;case 13:gl(n,e),bl(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Wl=Je())),4&r&&ml(e);break;case 22:if(d=null!==t&&null!==t.memoizedState,1&e.mode?(Js=(c=Js)||d,gl(n,e),Js=c):gl(n,e),bl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!d&&0!==(1&e.mode))for(Qs=e,d=e.child;null!==d;){for(p=Qs=d;null!==Qs;){switch(h=(f=Qs).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,t=f.return;try{n=r,m.props=n.memoizedProps,m.state=n.memoizedState,m.componentWillUnmount()}catch(g){_u(r,t,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){kl(p);continue}}null!==h?(h.return=f,Qs=h):kl(p)}d=d.sibling}e:for(d=null,p=e;;){if(5===p.tag){if(null===d){d=p;try{a=p.stateNode,c?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=p.stateNode,s=void 0!==(u=p.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=me("display",s))}catch(g){_u(e,e.return,g)}}}else if(6===p.tag){if(null===d)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(g){_u(e,e.return,g)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===e)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===e)break e;for(;null===p.sibling;){if(null===p.return||p.return===e)break e;d===p&&(d=null),p=p.return}d===p&&(d=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:gl(n,e),bl(e),4&r&&ml(e);case 21:}}function bl(e){var n=e.flags;if(2&n){try{e:{for(var t=e.return;null!==t;){if(sl(t)){var r=t;break e}t=t.return}throw Error(o(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(pe(a,""),r.flags&=-33),cl(e,ll(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;ul(e,ll(e),i);break;default:throw Error(o(161))}}catch(s){_u(e,e.return,s)}e.flags&=-3}4096&n&&(e.flags&=-4097)}function vl(e,n,t){Qs=e,wl(e,n,t)}function wl(e,n,t){for(var r=0!==(1&e.mode);null!==Qs;){var a=Qs,o=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Xs;if(!i){var s=a.alternate,l=null!==s&&null!==s.memoizedState||Js;s=Xs;var u=Js;if(Xs=i,(Js=l)&&!u)for(Qs=a;null!==Qs;)l=(i=Qs).child,22===i.tag&&null!==i.memoizedState?xl(a):null!==l?(l.return=i,Qs=l):xl(a);for(;null!==o;)Qs=o,wl(o,n,t),o=o.sibling;Qs=a,Xs=s,Js=u}Sl(e)}else 0!==(8772&a.subtreeFlags)&&null!==o?(o.return=a,Qs=o):Sl(e)}}function Sl(e){for(;null!==Qs;){var n=Qs;if(0!==(8772&n.flags)){var t=n.alternate;try{if(0!==(8772&n.flags))switch(n.tag){case 0:case 11:case 15:Js||al(5,n);break;case 1:var r=n.stateNode;if(4&n.flags&&!Js)if(null===t)r.componentDidMount();else{var a=n.elementType===n.type?t.memoizedProps:yo(n.type,t.memoizedProps);r.componentDidUpdate(a,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=n.updateQueue;null!==i&&zo(n,i,r);break;case 3:var s=n.updateQueue;if(null!==s){if(t=null,null!==n.child)switch(n.child.tag){case 5:case 1:t=n.child.stateNode}zo(n,s,t)}break;case 5:var l=n.stateNode;if(null===t&&4&n.flags){t=l;var u=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===n.memoizedState){var c=n.alternate;if(null!==c){var d=c.memoizedState;if(null!==d){var p=d.dehydrated;null!==p&&$n(p)}}}break;default:throw Error(o(163))}Js||512&n.flags&&ol(n)}catch(f){_u(n,n.return,f)}}if(n===e){Qs=null;break}if(null!==(t=n.sibling)){t.return=n.return,Qs=t;break}Qs=n.return}}function kl(e){for(;null!==Qs;){var n=Qs;if(n===e){Qs=null;break}var t=n.sibling;if(null!==t){t.return=n.return,Qs=t;break}Qs=n.return}}function xl(e){for(;null!==Qs;){var n=Qs;try{switch(n.tag){case 0:case 11:case 15:var t=n.return;try{al(4,n)}catch(l){_u(n,t,l)}break;case 1:var r=n.stateNode;if("function"===typeof r.componentDidMount){var a=n.return;try{r.componentDidMount()}catch(l){_u(n,a,l)}}var o=n.return;try{ol(n)}catch(l){_u(n,o,l)}break;case 5:var i=n.return;try{ol(n)}catch(l){_u(n,i,l)}}}catch(l){_u(n,n.return,l)}if(n===e){Qs=null;break}var s=n.sibling;if(null!==s){s.return=n.return,Qs=s;break}Qs=n.return}}var Il,_l=Math.ceil,Al=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,El=w.ReactCurrentBatchConfig,Ol=0,Cl=null,Nl=null,Ml=0,Pl=0,Fl=Ia(0),Rl=0,Ll=null,Dl=0,jl=0,zl=0,Bl=null,Ul=null,Wl=0,$l=1/0,Vl=null,Gl=!1,Hl=null,Kl=null,ql=!1,Yl=null,Xl=0,Jl=0,Zl=null,Ql=-1,eu=0;function nu(){return 0!==(6&Ol)?Je():-1!==Ql?Ql:Ql=Je()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Ol)&&0!==Ml?Ml&-Ml:null!==go.transition?(0===eu&&(eu=gn()),eu):0!==(e=wn)?e:e=void 0===(e=window.event)?16:Jn(e.type)}function ru(e,n,t,r){if(50<Jl)throw Jl=0,Zl=null,Error(o(185));bn(e,t,r),0!==(2&Ol)&&e===Cl||(e===Cl&&(0===(2&Ol)&&(jl|=t),4===Rl&&lu(e,Ml)),au(e,r),1===t&&0===Ol&&0===(1&n.mode)&&($l=Je()+500,za&&Wa()))}function au(e,n){var t=e.callbackNode;!function(e,n){for(var t=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-sn(o),s=1<<i,l=a[i];-1===l?0!==(s&t)&&0===(s&r)||(a[i]=hn(s,n)):l<=n&&(e.expiredLanes|=s),o&=~s}}(e,n);var r=fn(e,e===Cl?Ml:0);if(0===r)null!==t&&qe(t),e.callbackNode=null,e.callbackPriority=0;else if(n=r&-r,e.callbackPriority!==n){if(null!=t&&qe(t),1===n)0===e.tag?function(e){za=!0,Ua(e)}(uu.bind(null,e)):Ua(uu.bind(null,e)),ia((function(){0===(6&Ol)&&Wa()})),t=null;else{switch(Sn(r)){case 1:t=Qe;break;case 4:t=en;break;case 16:default:t=nn;break;case 536870912:t=rn}t=Cu(t,ou.bind(null,e))}e.callbackPriority=n,e.callbackNode=t}}function ou(e,n){if(Ql=-1,eu=0,0!==(6&Ol))throw Error(o(327));var t=e.callbackNode;if(xu()&&e.callbackNode!==t)return null;var r=fn(e,e===Cl?Ml:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||n)n=yu(e,r);else{n=r;var a=Ol;Ol|=2;var i=mu();for(Cl===e&&Ml===n||(Vl=null,$l=Je()+500,fu(e,n));;)try{vu();break}catch(l){hu(e,l)}ko(),Al.current=i,Ol=a,null!==Nl?n=0:(Cl=null,Ml=0,n=Rl)}if(0!==n){if(2===n&&(0!==(a=mn(e))&&(r=a,n=iu(e,a))),1===n)throw t=Ll,fu(e,0),lu(e,r),au(e,Je()),t;if(6===n)lu(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var n=e;;){if(16384&n.flags){var t=n.updateQueue;if(null!==t&&null!==(t=t.stores))for(var r=0;r<t.length;r++){var a=t[r],o=a.getSnapshot;a=a.value;try{if(!sr(o(),a))return!1}catch(s){return!1}}}if(t=n.child,16384&n.subtreeFlags&&null!==t)t.return=n,n=t;else{if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}(a)&&(2===(n=yu(e,r))&&(0!==(i=mn(e))&&(r=i,n=iu(e,i))),1===n))throw t=Ll,fu(e,0),lu(e,r),au(e,Je()),t;switch(e.finishedWork=a,e.finishedLanes=r,n){case 0:case 1:throw Error(o(345));case 2:case 5:ku(e,Ul,Vl);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(n=Wl+500-Je())){if(0!==fn(e,0))break;if(((a=e.suspendedLanes)&r)!==r){nu(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(ku.bind(null,e,Ul,Vl),n);break}ku(e,Ul,Vl);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(n=e.eventTimes,a=-1;0<r;){var s=31-sn(r);i=1<<s,(s=n[s])>a&&(a=s),r&=~i}if(r=a,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_l(r/1960))-r)){e.timeoutHandle=ra(ku.bind(null,e,Ul,Vl),r);break}ku(e,Ul,Vl);break;default:throw Error(o(329))}}}return au(e,Je()),e.callbackNode===t?ou.bind(null,e):null}function iu(e,n){var t=Bl;return e.current.memoizedState.isDehydrated&&(fu(e,n).flags|=256),2!==(e=yu(e,n))&&(n=Ul,Ul=t,null!==n&&su(n)),e}function su(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function lu(e,n){for(n&=~zl,n&=~jl,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-sn(n),r=1<<t;e[t]=-1,n&=~r}}function uu(e){if(0!==(6&Ol))throw Error(o(327));xu();var n=fn(e,0);if(0===(1&n))return au(e,Je()),null;var t=yu(e,n);if(0!==e.tag&&2===t){var r=mn(e);0!==r&&(n=r,t=iu(e,r))}if(1===t)throw t=Ll,fu(e,0),lu(e,n),au(e,Je()),t;if(6===t)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,ku(e,Ul,Vl),au(e,Je()),null}function cu(e,n){var t=Ol;Ol|=1;try{return e(n)}finally{0===(Ol=t)&&($l=Je()+500,za&&Wa())}}function du(e){null!==Yl&&0===Yl.tag&&0===(6&Ol)&&xu();var n=Ol;Ol|=1;var t=El.transition,r=wn;try{if(El.transition=null,wn=1,e)return e()}finally{wn=r,El.transition=t,0===(6&(Ol=n))&&Wa()}}function pu(){Pl=Fl.current,_a(Fl)}function fu(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(-1!==t&&(e.timeoutHandle=-1,aa(t)),null!==Nl)for(t=Nl.return;null!==t;){var r=t;switch(no(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Pa();break;case 3:oi(),_a(Oa),_a(Ea),di();break;case 5:si(r);break;case 4:oi();break;case 13:case 19:_a(li);break;case 10:xo(r.type._context);break;case 22:case 23:pu()}t=t.return}if(Cl=e,Nl=e=Fu(e.current,null),Ml=Pl=n,Rl=0,Ll=null,zl=jl=Dl=0,Ul=Bl=null,null!==To){for(n=0;n<To.length;n++)if(null!==(r=(t=To[n]).interleaved)){t.interleaved=null;var a=r.next,o=t.pending;if(null!==o){var i=o.next;o.next=a,r.next=i}t.pending=r}To=null}return e}function hu(e,n){for(;;){var t=Nl;try{if(ko(),pi.current=is,bi){for(var r=mi.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}bi=!1}if(hi=0,yi=gi=mi=null,vi=!1,wi=0,Tl.current=null,null===t||null===t.return){Rl=1,Ll=n,Nl=null;break}e:{var i=e,s=t.return,l=t,u=n;if(n=Ml,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,d=l,p=d.tag;if(0===(1&d.mode)&&(0===p||11===p||15===p)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var h=ys(s);if(null!==h){h.flags&=-257,bs(h,s,l,0,n),1&h.mode&&gs(i,c,n),u=c;var m=(n=h).updateQueue;if(null===m){var g=new Set;g.add(u),n.updateQueue=g}else m.add(u);break e}if(0===(1&n)){gs(i,c,n),gu();break e}u=Error(o(426))}else if(ao&&1&l.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),bs(y,s,l,0,n),mo(cs(u,l));break e}}i=u=cs(u,l),4!==Rl&&(Rl=2),null===Bl?Bl=[i]:Bl.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,n&=-n,i.lanes|=n,Do(i,hs(0,u,n));break e;case 1:l=u;var b=i.type,v=i.stateNode;if(0===(128&i.flags)&&("function"===typeof b.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Kl||!Kl.has(v)))){i.flags|=65536,n&=-n,i.lanes|=n,Do(i,ms(i,l,n));break e}}i=i.return}while(null!==i)}Su(t)}catch(w){n=w,Nl===t&&null!==t&&(Nl=t=t.return);continue}break}}function mu(){var e=Al.current;return Al.current=is,null===e?is:e}function gu(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Cl||0===(268435455&Dl)&&0===(268435455&jl)||lu(Cl,Ml)}function yu(e,n){var t=Ol;Ol|=2;var r=mu();for(Cl===e&&Ml===n||(Vl=null,fu(e,n));;)try{bu();break}catch(a){hu(e,a)}if(ko(),Ol=t,Al.current=r,null!==Nl)throw Error(o(261));return Cl=null,Ml=0,Rl}function bu(){for(;null!==Nl;)wu(Nl)}function vu(){for(;null!==Nl&&!Ye();)wu(Nl)}function wu(e){var n=Il(e.alternate,e,Pl);e.memoizedProps=e.pendingProps,null===n?Su(e):Nl=n,Tl.current=null}function Su(e){var n=e;do{var t=n.alternate;if(e=n.return,0===(32768&n.flags)){if(null!==(t=qs(t,n,Pl)))return void(Nl=t)}else{if(null!==(t=Ys(t,n)))return t.flags&=32767,void(Nl=t);if(null===e)return Rl=6,void(Nl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(n=n.sibling))return void(Nl=n);Nl=n=e}while(null!==n);0===Rl&&(Rl=5)}function ku(e,n,t){var r=wn,a=El.transition;try{El.transition=null,wn=1,function(e,n,t,r){do{xu()}while(null!==Yl);if(0!==(6&Ol))throw Error(o(327));t=e.finishedWork;var a=e.finishedLanes;if(null===t)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var i=t.lanes|t.childLanes;if(function(e,n){var t=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<t;){var a=31-sn(t),o=1<<a;n[a]=0,r[a]=-1,e[a]=-1,t&=~o}}(e,i),e===Cl&&(Nl=Cl=null,Ml=0),0===(2064&t.subtreeFlags)&&0===(2064&t.flags)||ql||(ql=!0,Cu(nn,(function(){return xu(),null}))),i=0!==(15990&t.flags),0!==(15990&t.subtreeFlags)||i){i=El.transition,El.transition=null;var s=wn;wn=1;var l=Ol;Ol|=4,Tl.current=null,function(e,n){if(ea=Gn,fr(e=pr())){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(r&&0!==r.rangeCount){t=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch(S){t=null;break e}var s=0,l=-1,u=-1,c=0,d=0,p=e,f=null;n:for(;;){for(var h;p!==t||0!==a&&3!==p.nodeType||(l=s+a),p!==i||0!==r&&3!==p.nodeType||(u=s+r),3===p.nodeType&&(s+=p.nodeValue.length),null!==(h=p.firstChild);)f=p,p=h;for(;;){if(p===e)break n;if(f===t&&++c===a&&(l=s),f===i&&++d===r&&(u=s),null!==(h=p.nextSibling))break;f=(p=f).parentNode}p=h}t=-1===l||-1===u?null:{start:l,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(na={focusedElem:e,selectionRange:t},Gn=!1,Qs=n;null!==Qs;)if(e=(n=Qs).child,0!==(1028&n.subtreeFlags)&&null!==e)e.return=n,Qs=e;else for(;null!==Qs;){n=Qs;try{var m=n.alternate;if(0!==(1024&n.flags))switch(n.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,b=n.stateNode,v=b.getSnapshotBeforeUpdate(n.elementType===n.type?g:yo(n.type,g),y);b.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=n.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(o(163))}}catch(S){_u(n,n.return,S)}if(null!==(e=n.sibling)){e.return=n.return,Qs=e;break}Qs=n.return}m=tl,tl=!1}(e,t),yl(t,e),hr(na),Gn=!!ea,na=ea=null,e.current=t,vl(t,e,a),Xe(),Ol=l,wn=s,El.transition=i}else e.current=t;if(ql&&(ql=!1,Yl=e,Xl=a),i=e.pendingLanes,0===i&&(Kl=null),function(e){if(on&&"function"===typeof on.onCommitFiberRoot)try{on.onCommitFiberRoot(an,e,void 0,128===(128&e.current.flags))}catch(n){}}(t.stateNode),au(e,Je()),null!==n)for(r=e.onRecoverableError,t=0;t<n.length;t++)a=n[t],r(a.value,{componentStack:a.stack,digest:a.digest});if(Gl)throw Gl=!1,e=Hl,Hl=null,e;0!==(1&Xl)&&0!==e.tag&&xu(),i=e.pendingLanes,0!==(1&i)?e===Zl?Jl++:(Jl=0,Zl=e):Jl=0,Wa()}(e,n,t,r)}finally{El.transition=a,wn=r}return null}function xu(){if(null!==Yl){var e=Sn(Xl),n=El.transition,t=wn;try{if(El.transition=null,wn=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&Ol))throw Error(o(331));var a=Ol;for(Ol|=4,Qs=e.current;null!==Qs;){var i=Qs,s=i.child;if(0!==(16&Qs.flags)){var l=i.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Qs=c;null!==Qs;){var d=Qs;switch(d.tag){case 0:case 11:case 15:rl(8,d,i)}var p=d.child;if(null!==p)p.return=d,Qs=p;else for(;null!==Qs;){var f=(d=Qs).sibling,h=d.return;if(il(d),d===c){Qs=null;break}if(null!==f){f.return=h,Qs=f;break}Qs=h}}}var m=i.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Qs=i}}if(0!==(2064&i.subtreeFlags)&&null!==s)s.return=i,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(i=Qs).flags))switch(i.tag){case 0:case 11:case 15:rl(9,i,i.return)}var b=i.sibling;if(null!==b){b.return=i.return,Qs=b;break e}Qs=i.return}}var v=e.current;for(Qs=v;null!==Qs;){var w=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==w)w.return=s,Qs=w;else e:for(s=v;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:al(9,l)}}catch(k){_u(l,l.return,k)}if(l===s){Qs=null;break e}var S=l.sibling;if(null!==S){S.return=l.return,Qs=S;break e}Qs=l.return}}if(Ol=a,Wa(),on&&"function"===typeof on.onPostCommitFiberRoot)try{on.onPostCommitFiberRoot(an,e)}catch(k){}r=!0}return r}finally{wn=t,El.transition=n}}return!1}function Iu(e,n,t){e=Ro(e,n=hs(0,n=cs(t,n),1),1),n=nu(),null!==e&&(bn(e,1,n),au(e,n))}function _u(e,n,t){if(3===e.tag)Iu(e,e,t);else for(;null!==n;){if(3===n.tag){Iu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){n=Ro(n,e=ms(n,e=cs(t,e),1),1),e=nu(),null!==n&&(bn(n,1,e),au(n,e));break}}n=n.return}}function Au(e,n,t){var r=e.pingCache;null!==r&&r.delete(n),n=nu(),e.pingedLanes|=e.suspendedLanes&t,Cl===e&&(Ml&t)===t&&(4===Rl||3===Rl&&(130023424&Ml)===Ml&&500>Je()-Wl?fu(e,0):zl|=t),au(e,n)}function Tu(e,n){0===n&&(0===(1&e.mode)?n=1:(n=dn,0===(130023424&(dn<<=1))&&(dn=4194304)));var t=nu();null!==(e=Co(e,n))&&(bn(e,n,t),au(e,t))}function Eu(e){var n=e.memoizedState,t=0;null!==n&&(t=n.retryLane),Tu(e,t)}function Ou(e,n){var t=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(t=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(n),Tu(e,t)}function Cu(e,n){return Ke(e,n)}function Nu(e,n,t,r){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mu(e,n,t,r){return new Nu(e,n,t,r)}function Pu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fu(e,n){var t=e.alternate;return null===t?((t=Mu(e.tag,n,e.key,e.mode)).elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=14680064&e.flags,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function Ru(e,n,t,r,a,i){var s=2;if(r=e,"function"===typeof e)Pu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case x:return Lu(t.children,a,i,n);case I:s=8,a|=8;break;case _:return(e=Mu(12,t,n,2|a)).elementType=_,e.lanes=i,e;case O:return(e=Mu(13,t,n,a)).elementType=O,e.lanes=i,e;case C:return(e=Mu(19,t,n,a)).elementType=C,e.lanes=i,e;case P:return Du(t,a,i,n);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:s=10;break e;case T:s=9;break e;case E:s=11;break e;case N:s=14;break e;case M:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(n=Mu(s,t,n,a)).elementType=e,n.type=r,n.lanes=i,n}function Lu(e,n,t,r){return(e=Mu(7,e,r,n)).lanes=t,e}function Du(e,n,t,r){return(e=Mu(22,e,r,n)).elementType=P,e.lanes=t,e.stateNode={isHidden:!1},e}function ju(e,n,t){return(e=Mu(6,e,null,n)).lanes=t,e}function zu(e,n,t){return(n=Mu(4,null!==e.children?e.children:[],e.key,n)).lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function Bu(e,n,t,r,a){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yn(0),this.expirationTimes=yn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yn(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Uu(e,n,t,r,a,o,i,s,l){return e=new Bu(e,n,t,s,l),1===n?(n=1,!0===o&&(n|=8)):n=0,o=Mu(3,null,null,n),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mo(o),e}function Wu(e){if(!e)return Ta;e:{if(We(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Ma(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(null!==n);throw Error(o(171))}if(1===e.tag){var t=e.type;if(Ma(t))return Ra(e,t,n)}return n}function $u(e,n,t,r,a,o,i,s,l){return(e=Uu(t,r,!0,e,0,o,0,s,l)).context=Wu(null),t=e.current,(o=Fo(r=nu(),a=tu(t))).callback=void 0!==n&&null!==n?n:null,Ro(t,o,a),e.current.lanes=a,bn(e,a,r),au(e,r),e}function Vu(e,n,t,r){var a=n.current,o=nu(),i=tu(a);return t=Wu(t),null===n.context?n.context=t:n.pendingContext=t,(n=Fo(o,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(n.callback=r),null!==(e=Ro(a,n,i))&&(ru(e,a,i,o),Lo(e,a,i)),i}function Gu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hu(e,n){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var t=e.retryLane;e.retryLane=0!==t&&t<n?t:n}}function Ku(e,n){Hu(e,n),(e=e.alternate)&&Hu(e,n)}Il=function(e,n,t){if(null!==e)if(e.memoizedProps!==n.pendingProps||Oa.current)ws=!0;else{if(0===(e.lanes&t)&&0===(128&n.flags))return ws=!1,function(e,n,t){switch(n.tag){case 3:Cs(n),ho();break;case 5:ii(n);break;case 1:Ma(n.type)&&La(n);break;case 4:ai(n,n.stateNode.containerInfo);break;case 10:var r=n.type._context,a=n.memoizedProps.value;Aa(bo,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=n.memoizedState))return null!==r.dehydrated?(Aa(li,1&li.current),n.flags|=128,null):0!==(t&n.child.childLanes)?js(e,n,t):(Aa(li,1&li.current),null!==(e=Gs(e,n,t))?e.sibling:null);Aa(li,1&li.current);break;case 19:if(r=0!==(t&n.childLanes),0!==(128&e.flags)){if(r)return $s(e,n,t);n.flags|=128}if(null!==(a=n.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Aa(li,li.current),r)break;return null;case 22:case 23:return n.lanes=0,_s(e,n,t)}return Gs(e,n,t)}(e,n,t);ws=0!==(131072&e.flags)}else ws=!1,ao&&0!==(1048576&n.flags)&&Qa(n,Ha,n.index);switch(n.lanes=0,n.tag){case 2:var r=n.type;Vs(e,n),e=n.pendingProps;var a=Na(n,Ea.current);_o(n,t),a=Ii(null,n,r,e,a,t);var i=_i();return n.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Ma(r)?(i=!0,La(n)):i=!1,n.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Mo(n),a.updater=Wo,n.stateNode=a,a._reactInternals=n,Ho(n,r,e,t),n=Os(null,n,r,!0,i,t)):(n.tag=0,ao&&i&&eo(n),Ss(null,n,a,t),n=n.child),n;case 16:r=n.elementType;e:{switch(Vs(e,n),e=n.pendingProps,r=(a=r._init)(r._payload),n.type=r,a=n.tag=function(e){if("function"===typeof e)return Pu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===N)return 14}return 2}(r),e=yo(r,e),a){case 0:n=Ts(null,n,r,e,t);break e;case 1:n=Es(null,n,r,e,t);break e;case 11:n=ks(null,n,r,e,t);break e;case 14:n=xs(null,n,r,yo(r.type,e),t);break e}throw Error(o(306,r,""))}return n;case 0:return r=n.type,a=n.pendingProps,Ts(e,n,r,a=n.elementType===r?a:yo(r,a),t);case 1:return r=n.type,a=n.pendingProps,Es(e,n,r,a=n.elementType===r?a:yo(r,a),t);case 3:e:{if(Cs(n),null===e)throw Error(o(387));r=n.pendingProps,a=(i=n.memoizedState).element,Po(e,n),jo(n,r,null,t);var s=n.memoizedState;if(r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},n.updateQueue.baseState=i,n.memoizedState=i,256&n.flags){n=Ns(e,n,r,t,a=cs(Error(o(423)),n));break e}if(r!==a){n=Ns(e,n,r,t,a=cs(Error(o(424)),n));break e}for(ro=ua(n.stateNode.containerInfo.firstChild),to=n,ao=!0,oo=null,t=Zo(n,null,r,t),n.child=t;t;)t.flags=-3&t.flags|4096,t=t.sibling}else{if(ho(),r===a){n=Gs(e,n,t);break e}Ss(e,n,r,t)}n=n.child}return n;case 5:return ii(n),null===e&&uo(n),r=n.type,a=n.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,ta(r,a)?s=null:null!==i&&ta(r,i)&&(n.flags|=32),As(e,n),Ss(e,n,s,t),n.child;case 6:return null===e&&uo(n),null;case 13:return js(e,n,t);case 4:return ai(n,n.stateNode.containerInfo),r=n.pendingProps,null===e?n.child=Jo(n,null,r,t):Ss(e,n,r,t),n.child;case 11:return r=n.type,a=n.pendingProps,ks(e,n,r,a=n.elementType===r?a:yo(r,a),t);case 7:return Ss(e,n,n.pendingProps,t),n.child;case 8:case 12:return Ss(e,n,n.pendingProps.children,t),n.child;case 10:e:{if(r=n.type._context,a=n.pendingProps,i=n.memoizedProps,s=a.value,Aa(bo,r._currentValue),r._currentValue=s,null!==i)if(sr(i.value,s)){if(i.children===a.children&&!Oa.current){n=Gs(e,n,t);break e}}else for(null!==(i=n.child)&&(i.return=n);null!==i;){var l=i.dependencies;if(null!==l){s=i.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===i.tag){(u=Fo(-1,t&-t)).tag=2;var c=i.updateQueue;if(null!==c){var d=(c=c.shared).pending;null===d?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=t,null!==(u=i.alternate)&&(u.lanes|=t),Io(i.return,t,n),l.lanes|=t;break}u=u.next}}else if(10===i.tag)s=i.type===n.type?null:i.child;else if(18===i.tag){if(null===(s=i.return))throw Error(o(341));s.lanes|=t,null!==(l=s.alternate)&&(l.lanes|=t),Io(s,t,n),s=i.sibling}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===n){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}Ss(e,n,a.children,t),n=n.child}return n;case 9:return a=n.type,r=n.pendingProps.children,_o(n,t),r=r(a=Ao(a)),n.flags|=1,Ss(e,n,r,t),n.child;case 14:return a=yo(r=n.type,n.pendingProps),xs(e,n,r,a=yo(r.type,a),t);case 15:return Is(e,n,n.type,n.pendingProps,t);case 17:return r=n.type,a=n.pendingProps,a=n.elementType===r?a:yo(r,a),Vs(e,n),n.tag=1,Ma(r)?(e=!0,La(n)):e=!1,_o(n,t),Vo(n,r,a),Ho(n,r,a,t),Os(null,n,r,!0,e,t);case 19:return $s(e,n,t);case 22:return _s(e,n,t)}throw Error(o(156,n.tag))};var qu="function"===typeof reportError?reportError:function(e){console.error(e)};function Yu(e){this._internalRoot=e}function Xu(e){this._internalRoot=e}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qu(){}function ec(e,n,t,r,a){var o=t._reactRootContainer;if(o){var i=o;if("function"===typeof a){var s=a;a=function(){var e=Gu(i);s.call(e)}}Vu(n,i,e,a)}else i=function(e,n,t,r,a){if(a){if("function"===typeof r){var o=r;r=function(){var e=Gu(i);o.call(e)}}var i=$u(n,r,e,0,null,!1,0,"",Qu);return e._reactRootContainer=i,e[ha]=i.current,Wr(8===e.nodeType?e.parentNode:e),du(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=Gu(l);s.call(e)}}var l=Uu(e,0,!1,null,0,!1,0,"",Qu);return e._reactRootContainer=l,e[ha]=l.current,Wr(8===e.nodeType?e.parentNode:e),du((function(){Vu(n,l,t,r)})),l}(t,n,e,a,r);return Gu(i)}Xu.prototype.render=Yu.prototype.render=function(e){var n=this._internalRoot;if(null===n)throw Error(o(409));Vu(e,n,null,null)},Xu.prototype.unmount=Yu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var n=e.containerInfo;du((function(){Vu(null,e,null,null)})),n[ha]=null}},Xu.prototype.unstable_scheduleHydration=function(e){if(e){var n=_n();e={blockedOn:null,target:e,priority:n};for(var t=0;t<Fn.length&&0!==n&&n<Fn[t].priority;t++);Fn.splice(t,0,e),0===t&&jn(e)}},kn=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var t=pn(n.pendingLanes);0!==t&&(vn(n,1|t),au(n,Je()),0===(6&Ol)&&($l=Je()+500,Wa()))}break;case 13:du((function(){var n=Co(e,1);if(null!==n){var t=nu();ru(n,e,1,t)}})),Ku(e,1)}},xn=function(e){if(13===e.tag){var n=Co(e,134217728);if(null!==n)ru(n,e,134217728,nu());Ku(e,134217728)}},In=function(e){if(13===e.tag){var n=tu(e),t=Co(e,n);if(null!==t)ru(t,e,n,nu());Ku(e,n)}},_n=function(){return wn},An=function(e,n){var t=wn;try{return wn=e,n()}finally{wn=t}},ke=function(e,n,t){switch(n){case"input":if(Z(e,t),n=t.name,"radio"===t.type&&null!=n){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<t.length;n++){var r=t[n];if(r!==e&&r.form===e.form){var a=Sa(r);if(!a)throw Error(o(90));K(r),Z(r,a)}}}break;case"textarea":oe(e,t);break;case"select":null!=(n=t.value)&&te(e,!!t.multiple,n,!1)}},Ee=cu,Oe=du;var nc={usingClientEntryPoint:!1,Events:[va,wa,Sa,Ae,Te,cu]},tc={findFiberByHostInstance:ba,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{an=ac.inject(rc),on=ac}catch(ce){}}n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nc,n.createPortal=function(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(n))throw Error(o(200));return function(e,n,t){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:n,implementation:t}}(e,n,null,t)},n.createRoot=function(e,n){if(!Ju(e))throw Error(o(299));var t=!1,r="",a=qu;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(t=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),n=Uu(e,1,!1,null,0,t,0,r,a),e[ha]=n.current,Wr(8===e.nodeType?e.parentNode:e),new Yu(n)},n.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var n=e._reactInternals;if(void 0===n){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ge(n))?null:e.stateNode},n.flushSync=function(e){return du(e)},n.hydrate=function(e,n,t){if(!Zu(n))throw Error(o(200));return ec(null,e,n,!0,t)},n.hydrateRoot=function(e,n,t){if(!Ju(e))throw Error(o(405));var r=null!=t&&t.hydratedSources||null,a=!1,i="",s=qu;if(null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(a=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),n=$u(n,null,e,1,null!=t?t:null,a,0,i,s),e[ha]=n.current,Wr(e),r)for(e=0;e<r.length;e++)a=(a=(t=r[e])._getVersion)(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a);return new Xu(n)},n.render=function(e,n,t){if(!Zu(n))throw Error(o(200));return ec(null,e,n,!1,t)},n.unmountComponentAtNode=function(e){if(!Zu(e))throw Error(o(40));return!!e._reactRootContainer&&(du((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[ha]=null}))})),!0)},n.unstable_batchedUpdates=cu,n.unstable_renderSubtreeIntoContainer=function(e,n,t,r){if(!Zu(t))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return ec(e,n,t,!1,r)},n.version="18.2.0-next-9e3b772b8-20220608"},250:(e,n,t)=>{"use strict";var r=t(164);n.createRoot=r.createRoot,n.hydrateRoot=r.hydrateRoot},164:(e,n,t)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}(),e.exports=t(463)},372:(e,n)=>{"use strict";var t,r=Symbol.for("react.element"),a=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.server_context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var n=e.$$typeof;switch(n){case r:switch(e=e.type){case o:case s:case i:case p:case f:return e;default:switch(e=e&&e.$$typeof){case c:case u:case d:case m:case h:case l:return e;default:return n}}case a:return n}}}t=Symbol.for("react.module.reference"),n.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===s||e===i||e===p||e===f||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===h||e.$$typeof===l||e.$$typeof===u||e.$$typeof===d||e.$$typeof===t||void 0!==e.getModuleId)},n.typeOf=y},441:(e,n,t)=>{"use strict";e.exports=t(372)},374:(e,n,t)=>{"use strict";var r=t(791),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,n,t){var r,o={},u=null,c=null;for(r in void 0!==t&&(u=""+t),void 0!==n.key&&(u=""+n.key),void 0!==n.ref&&(c=n.ref),n)i.call(n,r)&&!l.hasOwnProperty(r)&&(o[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps)void 0===o[r]&&(o[r]=n[r]);return{$$typeof:a,type:e,key:u,ref:c,props:o,_owner:s.current}}n.Fragment=o,n.jsx=u,n.jsxs=u},117:(e,n)=>{"use strict";var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),f=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,n,t){this.props=e,this.context=n,this.refs=g,this.updater=t||h}function b(){}function v(e,n,t){this.props=e,this.context=n,this.refs=g,this.updater=t||h}y.prototype.isReactComponent={},y.prototype.setState=function(e,n){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=y.prototype;var w=v.prototype=new b;w.constructor=v,m(w,y.prototype),w.isPureReactComponent=!0;var S=Array.isArray,k=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function _(e,n,r){var a,o={},i=null,s=null;if(null!=n)for(a in void 0!==n.ref&&(s=n.ref),void 0!==n.key&&(i=""+n.key),n)k.call(n,a)&&!I.hasOwnProperty(a)&&(o[a]=n[a]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(a in l=e.defaultProps)void 0===o[a]&&(o[a]=l[a]);return{$$typeof:t,type:e,key:i,ref:s,props:o,_owner:x.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===t}var T=/\/+/g;function E(e,n){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return n[e]}))}(""+e.key):n.toString(36)}function O(e,n,a,o,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case t:case r:l=!0}}if(l)return i=i(l=e),e=""===o?"."+E(l,0):o,S(i)?(a="",null!=e&&(a=e.replace(T,"$&/")+"/"),O(i,n,a,"",(function(e){return e}))):null!=i&&(A(i)&&(i=function(e,n){return{$$typeof:t,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(T,"$&/")+"/")+e)),n.push(i)),1;if(l=0,o=""===o?".":o+":",S(e))for(var u=0;u<e.length;u++){var c=o+E(s=e[u],u);l+=O(s,n,a,c,i)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=O(s=s.value,n,a,c=o+E(s,u++),i);else if("object"===s)throw n=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return l}function C(e,n,t){if(null==e)return e;var r=[],a=0;return O(e,r,"","",(function(e){return n.call(t,e,a++)})),r}function N(e){if(-1===e._status){var n=e._result;(n=n()).then((function(n){0!==e._status&&-1!==e._status||(e._status=1,e._result=n)}),(function(n){0!==e._status&&-1!==e._status||(e._status=2,e._result=n)})),-1===e._status&&(e._status=0,e._result=n)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},P={transition:null},F={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:P,ReactCurrentOwner:x};n.Children={map:C,forEach:function(e,n,t){C(e,(function(){n.apply(this,arguments)}),t)},count:function(e){var n=0;return C(e,(function(){n++})),n},toArray:function(e){return C(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},n.Component=y,n.Fragment=a,n.Profiler=i,n.PureComponent=v,n.StrictMode=o,n.Suspense=c,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,n.cloneElement=function(e,n,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),o=e.key,i=e.ref,s=e._owner;if(null!=n){if(void 0!==n.ref&&(i=n.ref,s=x.current),void 0!==n.key&&(o=""+n.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in n)k.call(n,u)&&!I.hasOwnProperty(u)&&(a[u]=void 0===n[u]&&void 0!==l?l[u]:n[u])}var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];a.children=l}return{$$typeof:t,type:e.type,key:o,ref:i,props:a,_owner:s}},n.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},n.createElement=_,n.createFactory=function(e){var n=_.bind(null,e);return n.type=e,n},n.createRef=function(){return{current:null}},n.forwardRef=function(e){return{$$typeof:u,render:e}},n.isValidElement=A,n.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:N}},n.memo=function(e,n){return{$$typeof:d,type:e,compare:void 0===n?null:n}},n.startTransition=function(e){var n=P.transition;P.transition={};try{e()}finally{P.transition=n}},n.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},n.useCallback=function(e,n){return M.current.useCallback(e,n)},n.useContext=function(e){return M.current.useContext(e)},n.useDebugValue=function(){},n.useDeferredValue=function(e){return M.current.useDeferredValue(e)},n.useEffect=function(e,n){return M.current.useEffect(e,n)},n.useId=function(){return M.current.useId()},n.useImperativeHandle=function(e,n,t){return M.current.useImperativeHandle(e,n,t)},n.useInsertionEffect=function(e,n){return M.current.useInsertionEffect(e,n)},n.useLayoutEffect=function(e,n){return M.current.useLayoutEffect(e,n)},n.useMemo=function(e,n){return M.current.useMemo(e,n)},n.useReducer=function(e,n,t){return M.current.useReducer(e,n,t)},n.useRef=function(e){return M.current.useRef(e)},n.useState=function(e){return M.current.useState(e)},n.useSyncExternalStore=function(e,n,t){return M.current.useSyncExternalStore(e,n,t)},n.useTransition=function(){return M.current.useTransition()},n.version="18.2.0"},791:(e,n,t)=>{"use strict";e.exports=t(117)},184:(e,n,t)=>{"use strict";e.exports=t(374)},457:(e,n,t)=>{"use strict";n.Z=void 0;var r,a=t(588),o=(r=t(936))&&r.__esModule?r:{default:r};function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e){var n,t=e.store,r=e.params,i=e.replaceState,s=e.initialTruth,l=e.history,u=void 0===l?(0,a.createBrowserHistory)():l,c=t.dispatch,d=!1,p=!1;function f(e){return Object.hasOwnProperty.call(e,"location")?e.location:Object.hasOwnProperty.call(e,"getCurrentLocation")?e.getCurrentLocation():void 0}function h(e){var n=new o.default(e.search),t={};return Object.keys(r).forEach((function(e){var a=r[e],o=a.defaultValue,i=a.stringToValue,s=void 0===i?function(e){return e}:i,l=n.get(e),u=null===l?o:s(l);t[e]=u})),t}function m(e){if(void 0!==e.location&&(e=e.location),!d){var a=t.getState(),o=h(e),i=[];Object.keys(o).forEach((function(e){var t=o[e];if(void 0===n||n[e]!==t){var s=r[e],l=s.selector,u=s.action;l(a)!==t&&i.push(u(t))}})),n=o,p=!0,i.forEach((function(e){c(e)})),p=!1,g({replaceState:!0})}}function g(e){var a=e.replaceState;if(!p){var i=t.getState(),s=f(u),l=new o.default(s.search);Object.keys(r).forEach((function(e){var t=r[e],a=t.selector,o=t.defaultValue,s=t.valueToString,u=void 0===s?function(e){return"".concat(e)}:s,c=a(i);c===o?l.delete(e):l.set(e,u(c)),n[e]=c}));var c="?".concat(l);if(c!==(s.search||"?")){d=!0;var h={pathname:s.pathname,search:c,hash:s.hash,state:s.state};a?u.replace(h):u.push(h),d=!1}}}var y=u.listen(m),b=t.subscribe((function(){return g({replaceState:i})}));return"location"===s?m(f(u)):n=h(f(u)),"store"===s&&g({replaceState:!0}),function(){y(),b()}}l.enhancer=function(e){return function(n){return function(t,r,a){var o=n(t,r,a);return l(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(t,!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({store:o},e)),o}}};var u=l;n.Z=u},813:(e,n)=>{"use strict";function t(e,n){var t=e.length;e.push(n);e:for(;0<t;){var r=t-1>>>1,a=e[r];if(!(0<o(a,n)))break e;e[r]=n,e[t]=a,t=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var n=e[0],t=e.pop();if(t!==n){e[0]=t;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>o(l,t))u<a&&0>o(c,l)?(e[r]=c,e[u]=t,r=u):(e[r]=l,e[s]=t,r=s);else{if(!(u<a&&0>o(c,t)))break e;e[r]=c,e[u]=t,r=u}}}return n}function o(e,n){var t=e.sortIndex-n.sortIndex;return 0!==t?t:e.id-n.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;n.unstable_now=function(){return i.now()}}else{var s=Date,l=s.now();n.unstable_now=function(){return s.now()-l}}var u=[],c=[],d=1,p=null,f=3,h=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var n=r(c);null!==n;){if(null===n.callback)a(c);else{if(!(n.startTime<=e))break;a(c),n.sortIndex=n.expirationTime,t(u,n)}n=r(c)}}function S(e){if(g=!1,w(e),!m)if(null!==r(u))m=!0,P(k);else{var n=r(c);null!==n&&F(S,n.startTime-e)}}function k(e,t){m=!1,g&&(g=!1,b(A),A=-1),h=!0;var o=f;try{for(w(t),p=r(u);null!==p&&(!(p.expirationTime>t)||e&&!O());){var i=p.callback;if("function"===typeof i){p.callback=null,f=p.priorityLevel;var s=i(p.expirationTime<=t);t=n.unstable_now(),"function"===typeof s?p.callback=s:p===r(u)&&a(u),w(t)}else a(u);p=r(u)}if(null!==p)var l=!0;else{var d=r(c);null!==d&&F(S,d.startTime-t),l=!1}return l}finally{p=null,f=o,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,_=null,A=-1,T=5,E=-1;function O(){return!(n.unstable_now()-E<T)}function C(){if(null!==_){var e=n.unstable_now();E=e;var t=!0;try{t=_(!0,e)}finally{t?x():(I=!1,_=null)}}else I=!1}if("function"===typeof v)x=function(){v(C)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,M=N.port2;N.port1.onmessage=C,x=function(){M.postMessage(null)}}else x=function(){y(C,0)};function P(e){_=e,I||(I=!0,x())}function F(e,t){A=y((function(){e(n.unstable_now())}),t)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(e){e.callback=null},n.unstable_continueExecution=function(){m||h||(m=!0,P(k))},n.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return r(u)},n.unstable_next=function(e){switch(f){case 1:case 2:case 3:var n=3;break;default:n=f}var t=f;f=n;try{return e()}finally{f=t}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var t=f;f=e;try{return n()}finally{f=t}},n.unstable_scheduleCallback=function(e,a,o){var i=n.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?i+o:i:o=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>i?(e.sortIndex=o,t(c,e),null===r(u)&&e===r(c)&&(g?(b(A),A=-1):g=!0,F(S,o-i))):(e.sortIndex=s,t(u,e),m||h||(m=!0,P(k))),e},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(e){var n=f;return function(){var t=f;f=n;try{return e.apply(this,arguments)}finally{f=t}}}},296:(e,n,t)=>{"use strict";e.exports=t(813)},613:e=>{e.exports=function(e,n,t,r){var a=t?t.call(r,e,n):void 0;if(void 0!==a)return!!a;if(e===n)return!0;if("object"!==typeof e||!e||"object"!==typeof n||!n)return!1;var o=Object.keys(e),i=Object.keys(n);if(o.length!==i.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(n),l=0;l<o.length;l++){var u=o[l];if(!s(u))return!1;var c=e[u],d=n[u];if(!1===(a=t?t.call(r,c,d,u):void 0)||void 0===a&&c!==d)return!1}return!0}},561:(e,n,t)=>{"use strict";var r=t(791);var a="function"===typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e===1/n)||e!==e&&n!==n},o=r.useState,i=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function u(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!a(e,t)}catch(r){return!0}}var c="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,n){return n()}:function(e,n){var t=n(),r=o({inst:{value:t,getSnapshot:n}}),a=r[0].inst,c=r[1];return s((function(){a.value=t,a.getSnapshot=n,u(a)&&c({inst:a})}),[e,t,n]),i((function(){return u(a)&&c({inst:a}),e((function(){u(a)&&c({inst:a})}))}),[e]),l(t),t};n.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:c},595:(e,n,t)=>{"use strict";var r=t(791),a=t(248);var o="function"===typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e===1/n)||e!==e&&n!==n},i=a.useSyncExternalStore,s=r.useRef,l=r.useEffect,u=r.useMemo,c=r.useDebugValue;n.useSyncExternalStoreWithSelector=function(e,n,t,r,a){var d=s(null);if(null===d.current){var p={hasValue:!1,value:null};d.current=p}else p=d.current;d=u((function(){function e(e){if(!l){if(l=!0,i=e,e=r(e),void 0!==a&&p.hasValue){var n=p.value;if(a(n,e))return s=n}return s=e}if(n=s,o(i,e))return n;var t=r(e);return void 0!==a&&a(n,t)?n:(i=e,s=t)}var i,s,l=!1,u=void 0===t?null:t;return[function(){return e(n())},null===u?void 0:function(){return e(u())}]}),[n,t,r,a]);var f=i(e,d[0],d[1]);return l((function(){p.hasValue=!0,p.value=f}),[f]),c(f),f}},248:(e,n,t)=>{"use strict";e.exports=t(561)},327:(e,n,t)=>{"use strict";e.exports=t(595)},494:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAfEAAABTCAYAAACPkT4sAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAABGRJREFUeJzt3b2LpWcdxvHrPjsYk0IlWARTpFhlTmwkWmhnLIyBWDwklYhV8K1KlZkJmGYRnBlsgghGgoJJBAvjIyiolfGlFDW+7BxICgNbicKKLyjJ3P4FSnafM3PPL/v59PM71zzDme9wmmmbHPQs87396eThhTeG+9K8+7FV2o+W3Gjpn9ubNk9va9NZOJzXP23Jh0fvWKqlf3xv2vxw9I7/52i+9+WkXx69Y6me1fsOpj++NHrHWTqedx/qaT8YvWOpnrx4MJ3cP3rHWTuc1z9uyQOjdyzV0h7Zm66+sOTGaltjAIDzJeIAUJSIA0BRIg4ARYk4ABQl4gBQlIgDQFEiDgBFiTgAFCXiAFCUiANAUSIOAEWJOAAUJeIAUJSIA0BRO6MHJMnh/N6PrHL6niU3ruWt33hq+s1r29rE//TvpH9r9IjXk1dHbzh77a/J6XfHbljd19IfOZ7XH7rZCz25vj+dfGebqy6onyV9M3JAS/vg8bz+zLIb/ZePT5s/bGvTBfVa0r85dkK7fJr+0eN5/c4lVy5ExFc5fbQnn1xy4878/fkkIn7GWvLPvWmz6JcEb1S/tj/4WR/O6ydbcqUvutJeSXIrRPzZ/WnzzMgBR/P6zz15etmV1WNJ3tQR78l/Dga/t47n9SeSfHvZe8vH6QBQlogDQFEiDgBFiTgAFCXiAFCUiANAUSIOAEWJOAAUJeIAUJSIA0BRIg4ARYk4ABQl4gBQlIgDQFEiDgBFXYj/J04dPXnb4bz7q9E7WvLY/rT5xegdZ+zdo591S+4a+frFfOFw3v384A2vnCYPLjmwk7y6rTGcPRHnRl1qae8fPaKlv330hnNw+0V41rxh97S0e0YO6MmLT0wnw//I5vz4OB0AihJxAChKxAGgKBEHgKJEHACKEnEAKErEAaAoEQeAokQcAIoScQAoSsQBoCgRB4CiRBwAihJxACjKvyLlRr3e0387ekSS66MHnIN/9fSrIwe0tLuSvGvkhkL+1NP/MnJAS9uMfH3On4hzQ1ryt/1p84HRO24RLx8MftaH8/rJllwZuaGQLx5Mm2dGj+DW4uN0AChKxAGgKBEHgKJEHACKEnEAKErEAaAoEQeAokQcAIoScQAoSsQBoCgRB4CiRBwAihJxAChKxAGgKBEHgKJ2WvLZJQdO095xNO9+fcmNnv77lrZox23Z+fLRvHvp5jfk+tJnkfSfL/v6i68ndyz9eW/DafKVJ6bN70bvOFvt7vHPut2X5EpLv3azF3r69S0OgsVa8pbR762eXO7J11bJr5fc2dmbThZ9I8fzvQ/3tKMlN3r6p/ank+eW3Dic1/9I2h0LTvxkbzp5fMmGW8RtSfv06BGX0r+f5E0e8X7n+Gfd07N6dH+6+tLYHbBVO+PfW8kq7at709UXlt0AAEoScQAoSsQBoCgRB4CiRBwAihJxAChKxAGgKBEHgKJEHACKEnEAKErEAaAoEQeAokQcAIoScQAoSsQBoKj/ApGS0l+mZnzQAAAAAElFTkSuQmCC"},462:(e,n,t)=>{"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},r.apply(this,arguments)}t.d(n,{Z:()=>r})}},n={};function t(r){var a=n[r];if(void 0!==a)return a.exports;var o=n[r]={exports:{}};return e[r](o,o.exports,t),o.exports}t.m=e,t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.f={},t.e=e=>Promise.all(Object.keys(t.f).reduce(((n,r)=>(t.f[r](e,n),n)),[])),t.u=e=>"static/js/"+e+".4f652202.chunk.js",t.miniCssF=e=>{},t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={},n="webpd_website:";t.l=(r,a,o,i)=>{if(e[r])e[r].push(a);else{var s,l;if(void 0!==o)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var d=u[c];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==n+o){s=d;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,t.nc&&s.setAttribute("nonce",t.nc),s.setAttribute("data-webpack",n+o),s.src=r),e[r]=[a];var p=(n,t)=>{s.onerror=s.onload=null,clearTimeout(f);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((e=>e(t))),n)return n(t)},f=setTimeout(p.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=p.bind(null,s.onerror),s.onload=p.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.p="./",(()=>{t.b=document.baseURI||self.location.href;var e={179:0};t.f.j=(n,r)=>{var a=t.o(e,n)?e[n]:void 0;if(0!==a)if(a)r.push(a[2]);else{var o=new Promise(((t,r)=>a=e[n]=[t,r]));r.push(a[2]=o);var i=t.p+t.u(n),s=new Error;t.l(i,(r=>{if(t.o(e,n)&&(0!==(a=e[n])&&(e[n]=void 0),a)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+n+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,a[1](s)}}),"chunk-"+n,n)}};var n=(n,r)=>{var a,o,i=r[0],s=r[1],l=r[2],u=0;if(i.some((n=>0!==e[n]))){for(a in s)t.o(s,a)&&(t.m[a]=s[a]);if(l)l(t)}for(n&&n(r);u<i.length;u++)o=i[u],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkwebpd_website=self.webpackChunkwebpd_website||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))})(),t.nc=void 0,(()=>{"use strict";var e=t(791),n=t(250);function r(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var a=t(441),o=t(613),i=t.n(o);const s=function(e){function n(e,r,l,u,p){for(var f,h,m,g,w,k=0,x=0,I=0,_=0,A=0,M=0,F=m=f=0,L=0,D=0,j=0,z=0,B=l.length,U=B-1,W="",$="",V="",G="";L<B;){if(h=l.charCodeAt(L),L===U&&0!==x+_+I+k&&(0!==x&&(h=47===x?10:47),_=I=k=0,B++,U++),0===x+_+I+k){if(L===U&&(0<D&&(W=W.replace(d,"")),0<W.trim().length)){switch(h){case 32:case 9:case 59:case 13:case 10:break;default:W+=l.charAt(L)}h=59}switch(h){case 123:for(f=(W=W.trim()).charCodeAt(0),m=1,z=++L;L<B;){switch(h=l.charCodeAt(L)){case 123:m++;break;case 125:m--;break;case 47:switch(h=l.charCodeAt(L+1)){case 42:case 47:e:{for(F=L+1;F<U;++F)switch(l.charCodeAt(F)){case 47:if(42===h&&42===l.charCodeAt(F-1)&&L+2!==F){L=F+1;break e}break;case 10:if(47===h){L=F+1;break e}}L=F}}break;case 91:h++;case 40:h++;case 34:case 39:for(;L++<U&&l.charCodeAt(L)!==h;);}if(0===m)break;L++}if(m=l.substring(z,L),0===f&&(f=(W=W.replace(c,"").trim()).charCodeAt(0)),64===f){switch(0<D&&(W=W.replace(d,"")),h=W.charCodeAt(1)){case 100:case 109:case 115:case 45:D=r;break;default:D=N}if(z=(m=n(r,D,m,h,p+1)).length,0<P&&(w=s(3,m,D=t(N,W,j),r,E,T,z,h,p,u),W=D.join(""),void 0!==w&&0===(z=(m=w.trim()).length)&&(h=0,m="")),0<z)switch(h){case 115:W=W.replace(S,i);case 100:case 109:case 45:m=W+"{"+m+"}";break;case 107:m=(W=W.replace(y,"$1 $2"))+"{"+m+"}",m=1===C||2===C&&o("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=W+m,112===u&&($+=m,m="")}else m=""}else m=n(r,t(r,W,j),m,u,p+1);V+=m,m=j=D=F=f=0,W="",h=l.charCodeAt(++L);break;case 125:case 59:if(1<(z=(W=(0<D?W.replace(d,""):W).trim()).length))switch(0===F&&(f=W.charCodeAt(0),45===f||96<f&&123>f)&&(z=(W=W.replace(" ",":")).length),0<P&&void 0!==(w=s(1,W,r,e,E,T,$.length,u,p,u))&&0===(z=(W=w.trim()).length)&&(W="\0\0"),f=W.charCodeAt(0),h=W.charCodeAt(1),f){case 0:break;case 64:if(105===h||99===h){G+=W+l.charAt(L);break}default:58!==W.charCodeAt(z-1)&&($+=a(W,f,h,W.charCodeAt(2)))}j=D=F=f=0,W="",h=l.charCodeAt(++L)}}switch(h){case 13:case 10:47===x?x=0:0===1+f&&107!==u&&0<W.length&&(D=1,W+="\0"),0<P*R&&s(0,W,r,e,E,T,$.length,u,p,u),T=1,E++;break;case 59:case 125:if(0===x+_+I+k){T++;break}default:switch(T++,g=l.charAt(L),h){case 9:case 32:if(0===_+k+x)switch(A){case 44:case 58:case 9:case 32:g="";break;default:32!==h&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===_+x+k&&(D=j=1,g="\f"+g);break;case 108:if(0===_+x+k+O&&0<F)switch(L-F){case 2:112===A&&58===l.charCodeAt(L-3)&&(O=A);case 8:111===M&&(O=M)}break;case 58:0===_+x+k&&(F=L);break;case 44:0===x+I+_+k&&(D=1,g+="\r");break;case 34:case 39:0===x&&(_=_===h?0:0===_?h:_);break;case 91:0===_+x+I&&k++;break;case 93:0===_+x+I&&k--;break;case 41:0===_+x+k&&I--;break;case 40:if(0===_+x+k){if(0===f)if(2*A+3*M===533);else f=1;I++}break;case 64:0===x+I+_+k+F+m&&(m=1);break;case 42:case 47:if(!(0<_+k+I))switch(x){case 0:switch(2*h+3*l.charCodeAt(L+1)){case 235:x=47;break;case 220:z=L,x=42}break;case 42:47===h&&42===A&&z+2!==L&&(33===l.charCodeAt(z+2)&&($+=l.substring(z,L+1)),g="",x=0)}}0===x&&(W+=g)}M=A,A=h,L++}if(0<(z=$.length)){if(D=r,0<P&&(void 0!==(w=s(2,$,D,e,E,T,z,u,p,u))&&0===($=w).length))return G+$+V;if($=D.join(",")+"{"+$+"}",0!==C*O){switch(2!==C||o($,2)||(O=0),O){case 111:$=$.replace(v,":-moz-$1")+$;break;case 112:$=$.replace(b,"::-webkit-input-$1")+$.replace(b,"::-moz-$1")+$.replace(b,":-ms-input-$1")+$}O=0}}return G+$+V}function t(e,n,t){var a=n.trim().split(m);n=a;var o=a.length,i=e.length;switch(i){case 0:case 1:var s=0;for(e=0===i?"":e[0]+" ";s<o;++s)n[s]=r(e,n[s],t).trim();break;default:var l=s=0;for(n=[];s<o;++s)for(var u=0;u<i;++u)n[l++]=r(e[u]+" ",a[s],t).trim()}return n}function r(e,n,t){var r=n.charCodeAt(0);switch(33>r&&(r=(n=n.trim()).charCodeAt(0)),r){case 38:return n.replace(g,"$1"+e.trim());case 58:return e.trim()+n.replace(g,"$1"+e.trim());default:if(0<1*t&&0<n.indexOf("\f"))return n.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+n}function a(e,n,t,r){var i=e+";",s=2*n+3*t+4*r;if(944===s){e=i.indexOf(":",9)+1;var l=i.substring(e,i.length-1).trim();return l=i.substring(0,e).trim()+l+";",1===C||2===C&&o(l,1)?"-webkit-"+l+l:l}if(0===C||2===C&&!o(i,1))return i;switch(s){case 1015:return 97===i.charCodeAt(10)?"-webkit-"+i+i:i;case 951:return 116===i.charCodeAt(3)?"-webkit-"+i+i:i;case 963:return 110===i.charCodeAt(5)?"-webkit-"+i+i:i;case 1009:if(100!==i.charCodeAt(4))break;case 969:case 942:return"-webkit-"+i+i;case 978:return"-webkit-"+i+"-moz-"+i+i;case 1019:case 983:return"-webkit-"+i+"-moz-"+i+"-ms-"+i+i;case 883:if(45===i.charCodeAt(8))return"-webkit-"+i+i;if(0<i.indexOf("image-set(",11))return i.replace(A,"$1-webkit-$2")+i;break;case 932:if(45===i.charCodeAt(4))switch(i.charCodeAt(5)){case 103:return"-webkit-box-"+i.replace("-grow","")+"-webkit-"+i+"-ms-"+i.replace("grow","positive")+i;case 115:return"-webkit-"+i+"-ms-"+i.replace("shrink","negative")+i;case 98:return"-webkit-"+i+"-ms-"+i.replace("basis","preferred-size")+i}return"-webkit-"+i+"-ms-"+i+i;case 964:return"-webkit-"+i+"-ms-flex-"+i+i;case 1023:if(99!==i.charCodeAt(8))break;return"-webkit-box-pack"+(l=i.substring(i.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+i+"-ms-flex-pack"+l+i;case 1005:return f.test(i)?i.replace(p,":-webkit-")+i.replace(p,":-moz-")+i:i;case 1e3:switch(n=(l=i.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(n)){case 226:l=i.replace(w,"tb");break;case 232:l=i.replace(w,"tb-rl");break;case 220:l=i.replace(w,"lr");break;default:return i}return"-webkit-"+i+"-ms-"+l+i;case 1017:if(-1===i.indexOf("sticky",9))break;case 975:switch(n=(i=e).length-10,s=(l=(33===i.charCodeAt(n)?i.substring(0,n):i).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:i=i.replace(l,"-webkit-"+l)+";"+i;break;case 207:case 102:i=i.replace(l,"-webkit-"+(102<s?"inline-":"")+"box")+";"+i.replace(l,"-webkit-"+l)+";"+i.replace(l,"-ms-"+l+"box")+";"+i}return i+";";case 938:if(45===i.charCodeAt(5))switch(i.charCodeAt(6)){case 105:return l=i.replace("-items",""),"-webkit-"+i+"-webkit-box-"+l+"-ms-flex-"+l+i;case 115:return"-webkit-"+i+"-ms-flex-item-"+i.replace(x,"")+i;default:return"-webkit-"+i+"-ms-flex-line-pack"+i.replace("align-content","").replace(x,"")+i}break;case 973:case 989:if(45!==i.charCodeAt(3)||122===i.charCodeAt(4))break;case 931:case 953:if(!0===_.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?a(e.replace("stretch","fill-available"),n,t,r).replace(":fill-available",":stretch"):i.replace(l,"-webkit-"+l)+i.replace(l,"-moz-"+l.replace("fill-",""))+i;break;case 962:if(i="-webkit-"+i+(102===i.charCodeAt(5)?"-ms-"+i:"")+i,211===t+r&&105===i.charCodeAt(13)&&0<i.indexOf("transform",10))return i.substring(0,i.indexOf(";",27)+1).replace(h,"$1-webkit-$2")+i}return i}function o(e,n){var t=e.indexOf(1===n?":":"{"),r=e.substring(0,3!==n?t:10);return t=e.substring(t+1,e.length-1),F(2!==n?r:r.replace(I,"$1"),t,n)}function i(e,n){var t=a(n,n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2));return t!==n+";"?t.replace(k," or ($1)").substring(4):"("+n+")"}function s(e,n,t,r,a,o,i,s,l,c){for(var d,p=0,f=n;p<P;++p)switch(d=M[p].call(u,e,f,t,r,a,o,i,s,l,c)){case void 0:case!1:case!0:case null:break;default:f=d}if(f!==n)return f}function l(e){return void 0!==(e=e.prefix)&&(F=null,e?"function"!==typeof e?C=1:(C=2,F=e):C=0),l}function u(e,t){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<P){var a=s(-1,t,r,r,E,T,0,0,0,0);void 0!==a&&"string"===typeof a&&(t=a)}var o=n(N,r,t,0,0);return 0<P&&(void 0!==(a=s(-2,o,r,r,E,T,o.length,0,0,0))&&(o=a)),"",O=0,T=E=1,o}var c=/^\0+/g,d=/[\0\r\f]/g,p=/: */g,f=/zoo|gra/,h=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,y=/@(k\w+)\s*(\S*)\s*/,b=/::(place)/g,v=/:(read-only)/g,w=/[svh]\w+-[tblr]{2}/,S=/\(\s*(.*)\s*\)/g,k=/([\s\S]*?);/g,x=/-self|flex-/g,I=/[^]*?(:[rp][el]a[\w-]+)[^]*/,_=/stretch|:\s*\w+\-(?:conte|avail)/,A=/([^-])(image-set\()/,T=1,E=1,O=0,C=1,N=[],M=[],P=0,F=null,R=0;return u.use=function e(n){switch(n){case void 0:case null:P=M.length=0;break;default:if("function"===typeof n)M[P++]=n;else if("object"===typeof n)for(var t=0,r=n.length;t<r;++t)e(n[t]);else R=0|!!n}return e},u.set=l,void 0!==e&&l(e),u};const l={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function u(e){var n=Object.create(null);return function(t){return void 0===n[t]&&(n[t]=e(t)),n[t]}}var c=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,d=u((function(e){return c.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),p=t(110),f=t.n(p);function h(){return(h=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var m=function(e,n){for(var t=[e[0]],r=0,a=n.length;r<a;r+=1)t.push(n[r],e[r+1]);return t},g=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,a.typeOf)(e)},y=Object.freeze([]),b=Object.freeze({});function v(e){return"function"==typeof e}function w(e){return e.displayName||e.name||"Component"}function S(e){return e&&"string"==typeof e.styledComponentId}var k="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",x="undefined"!=typeof window&&"HTMLElement"in window,I=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&(void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY))),_={};function A(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(t.length>0?" Args: "+t.join(", "):""))}var T=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var n=e.prototype;return n.indexOfGroup=function(e){for(var n=0,t=0;t<e;t++)n+=this.groupSizes[t];return n},n.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var t=this.groupSizes,r=t.length,a=r;e>=a;)(a<<=1)<0&&A(16,""+e);this.groupSizes=new Uint32Array(a),this.groupSizes.set(t),this.length=a;for(var o=r;o<a;o++)this.groupSizes[o]=0}for(var i=this.indexOfGroup(e+1),s=0,l=n.length;s<l;s++)this.tag.insertRule(i,n[s])&&(this.groupSizes[e]++,i++)},n.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],t=this.indexOfGroup(e),r=t+n;this.groupSizes[e]=0;for(var a=t;a<r;a++)this.tag.deleteRule(t)}},n.getGroup=function(e){var n="";if(e>=this.length||0===this.groupSizes[e])return n;for(var t=this.groupSizes[e],r=this.indexOfGroup(e),a=r+t,o=r;o<a;o++)n+=this.tag.getRule(o)+"/*!sc*/\n";return n},e}(),E=new Map,O=new Map,C=1,N=function(e){if(E.has(e))return E.get(e);for(;O.has(C);)C++;var n=C++;return E.set(e,n),O.set(n,e),n},M=function(e){return O.get(e)},P=function(e,n){n>=C&&(C=n+1),E.set(e,n),O.set(n,e)},F="style["+k+'][data-styled-version="5.3.11"]',R=new RegExp("^"+k+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),L=function(e,n,t){for(var r,a=t.split(","),o=0,i=a.length;o<i;o++)(r=a[o])&&e.registerName(n,r)},D=function(e,n){for(var t=(n.textContent||"").split("/*!sc*/\n"),r=[],a=0,o=t.length;a<o;a++){var i=t[a].trim();if(i){var s=i.match(R);if(s){var l=0|parseInt(s[1],10),u=s[2];0!==l&&(P(u,l),L(e,u,s[3]),e.getTag().insertRules(l,r)),r.length=0}else r.push(i)}}},j=function(){return t.nc},z=function(e){var n=document.head,t=e||n,r=document.createElement("style"),a=function(e){for(var n=e.childNodes,t=n.length;t>=0;t--){var r=n[t];if(r&&1===r.nodeType&&r.hasAttribute(k))return r}}(t),o=void 0!==a?a.nextSibling:null;r.setAttribute(k,"active"),r.setAttribute("data-styled-version","5.3.11");var i=j();return i&&r.setAttribute("nonce",i),t.insertBefore(r,o),r},B=function(){function e(e){var n=this.element=z(e);n.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var n=document.styleSheets,t=0,r=n.length;t<r;t++){var a=n[t];if(a.ownerNode===e)return a}A(17)}(n),this.length=0}var n=e.prototype;return n.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch(e){return!1}},n.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},n.getRule=function(e){var n=this.sheet.cssRules[e];return void 0!==n&&"string"==typeof n.cssText?n.cssText:""},e}(),U=function(){function e(e){var n=this.element=z(e);this.nodes=n.childNodes,this.length=0}var n=e.prototype;return n.insertRule=function(e,n){if(e<=this.length&&e>=0){var t=document.createTextNode(n),r=this.nodes[e];return this.element.insertBefore(t,r||null),this.length++,!0}return!1},n.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},n.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),W=function(){function e(e){this.rules=[],this.length=0}var n=e.prototype;return n.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},n.deleteRule=function(e){this.rules.splice(e,1),this.length--},n.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),$=x,V={isServer:!x,useCSSOMInjection:!I},G=function(){function e(e,n,t){void 0===e&&(e=b),void 0===n&&(n={}),this.options=h({},V,{},e),this.gs=n,this.names=new Map(t),this.server=!!e.isServer,!this.server&&x&&$&&($=!1,function(e){for(var n=document.querySelectorAll(F),t=0,r=n.length;t<r;t++){var a=n[t];a&&"active"!==a.getAttribute(k)&&(D(e,a),a.parentNode&&a.parentNode.removeChild(a))}}(this))}e.registerId=function(e){return N(e)};var n=e.prototype;return n.reconstructWithOptions=function(n,t){return void 0===t&&(t=!0),new e(h({},this.options,{},n),this.gs,t&&this.names||void 0)},n.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},n.getTag=function(){return this.tag||(this.tag=(t=(n=this.options).isServer,r=n.useCSSOMInjection,a=n.target,e=t?new W(a):r?new B(a):new U(a),new T(e)));var e,n,t,r,a},n.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},n.registerName=function(e,n){if(N(e),this.names.has(e))this.names.get(e).add(n);else{var t=new Set;t.add(n),this.names.set(e,t)}},n.insertRules=function(e,n,t){this.registerName(e,n),this.getTag().insertRules(N(e),t)},n.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},n.clearRules=function(e){this.getTag().clearGroup(N(e)),this.clearNames(e)},n.clearTag=function(){this.tag=void 0},n.toString=function(){return function(e){for(var n=e.getTag(),t=n.length,r="",a=0;a<t;a++){var o=M(a);if(void 0!==o){var i=e.names.get(o),s=n.getGroup(a);if(i&&s&&i.size){var l=k+".g"+a+'[id="'+o+'"]',u="";void 0!==i&&i.forEach((function(e){e.length>0&&(u+=e+",")})),r+=""+s+l+'{content:"'+u+'"}/*!sc*/\n'}}}return r}(this)},e}(),H=/(a)(d)/gi,K=function(e){return String.fromCharCode(e+(e>25?39:97))};function q(e){var n,t="";for(n=Math.abs(e);n>52;n=n/52|0)t=K(n%52)+t;return(K(n%52)+t).replace(H,"$1-$2")}var Y=function(e,n){for(var t=n.length;t;)e=33*e^n.charCodeAt(--t);return e},X=function(e){return Y(5381,e)};function J(e){for(var n=0;n<e.length;n+=1){var t=e[n];if(v(t)&&!S(t))return!1}return!0}var Z=X("5.3.11"),Q=function(){function e(e,n,t){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===t||t.isStatic)&&J(e),this.componentId=n,this.baseHash=Y(Z,n),this.baseStyle=t,G.registerId(n)}return e.prototype.generateAndInjectStyles=function(e,n,t){var r=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(e,n,t)),this.isStatic&&!t.hash)if(this.staticRulesId&&n.hasNameForId(r,this.staticRulesId))a.push(this.staticRulesId);else{var o=ye(this.rules,e,n,t).join(""),i=q(Y(this.baseHash,o)>>>0);if(!n.hasNameForId(r,i)){var s=t(o,"."+i,void 0,r);n.insertRules(r,i,s)}a.push(i),this.staticRulesId=i}else{for(var l=this.rules.length,u=Y(this.baseHash,t.hash),c="",d=0;d<l;d++){var p=this.rules[d];if("string"==typeof p)c+=p;else if(p){var f=ye(p,e,n,t),h=Array.isArray(f)?f.join(""):f;u=Y(u,h+d),c+=h}}if(c){var m=q(u>>>0);if(!n.hasNameForId(r,m)){var g=t(c,"."+m,void 0,r);n.insertRules(r,m,g)}a.push(m)}}return a.join(" ")},e}(),ee=/^\s*\/\/.*$/gm,ne=[":","[",".","#"];function te(e){var n,t,r,a,o=void 0===e?b:e,i=o.options,l=void 0===i?b:i,u=o.plugins,c=void 0===u?y:u,d=new s(l),p=[],f=function(e){function n(n){if(n)try{e(n+"}")}catch(e){}}return function(t,r,a,o,i,s,l,u,c,d){switch(t){case 1:if(0===c&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===u)return r+"/*|*/";break;case 3:switch(u){case 102:case 112:return e(a[0]+r),"";default:return r+(0===d?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(n)}}}((function(e){p.push(e)})),h=function(e,r,o){return 0===r&&-1!==ne.indexOf(o[t.length])||o.match(a)?e:"."+n};function m(e,o,i,s){void 0===s&&(s="&");var l=e.replace(ee,""),u=o&&i?i+" "+o+" { "+l+" }":l;return n=s,t=o,r=new RegExp("\\"+t+"\\b","g"),a=new RegExp("(\\"+t+"\\b){2,}"),d(i||!o?"":o,u)}return d.use([].concat(c,[function(e,n,a){2===e&&a.length&&a[0].lastIndexOf(t)>0&&(a[0]=a[0].replace(r,h))},f,function(e){if(-2===e){var n=p;return p=[],n}}])),m.hash=c.length?c.reduce((function(e,n){return n.name||A(15),Y(e,n.name)}),5381).toString():"",m}var re=e.createContext(),ae=(re.Consumer,e.createContext()),oe=(ae.Consumer,new G),ie=te();function se(){return(0,e.useContext)(re)||oe}function le(){return(0,e.useContext)(ae)||ie}function ue(n){var t=(0,e.useState)(n.stylisPlugins),r=t[0],a=t[1],o=se(),s=(0,e.useMemo)((function(){var e=o;return n.sheet?e=n.sheet:n.target&&(e=e.reconstructWithOptions({target:n.target},!1)),n.disableCSSOMInjection&&(e=e.reconstructWithOptions({useCSSOMInjection:!1})),e}),[n.disableCSSOMInjection,n.sheet,n.target]),l=(0,e.useMemo)((function(){return te({options:{prefix:!n.disableVendorPrefixes},plugins:r})}),[n.disableVendorPrefixes,r]);return(0,e.useEffect)((function(){i()(r,n.stylisPlugins)||a(n.stylisPlugins)}),[n.stylisPlugins]),e.createElement(re.Provider,{value:s},e.createElement(ae.Provider,{value:l},n.children))}var ce=function(){function e(e,n){var t=this;this.inject=function(e,n){void 0===n&&(n=ie);var r=t.name+n.hash;e.hasNameForId(t.id,r)||e.insertRules(t.id,r,n(t.rules,r,"@keyframes"))},this.toString=function(){return A(12,String(t.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=n}return e.prototype.getName=function(e){return void 0===e&&(e=ie),this.name+e.hash},e}(),de=/([A-Z])/,pe=/([A-Z])/g,fe=/^ms-/,he=function(e){return"-"+e.toLowerCase()};function me(e){return de.test(e)?e.replace(pe,he).replace(fe,"-ms-"):e}var ge=function(e){return null==e||!1===e||""===e};function ye(e,n,t,r){if(Array.isArray(e)){for(var a,o=[],i=0,s=e.length;i<s;i+=1)""!==(a=ye(e[i],n,t,r))&&(Array.isArray(a)?o.push.apply(o,a):o.push(a));return o}return ge(e)?"":S(e)?"."+e.styledComponentId:v(e)?"function"!=typeof(u=e)||u.prototype&&u.prototype.isReactComponent||!n?e:ye(e(n),n,t,r):e instanceof ce?t?(e.inject(t,r),e.getName(r)):e:g(e)?function e(n,t){var r,a,o=[];for(var i in n)n.hasOwnProperty(i)&&!ge(n[i])&&(Array.isArray(n[i])&&n[i].isCss||v(n[i])?o.push(me(i)+":",n[i],";"):g(n[i])?o.push.apply(o,e(n[i],i)):o.push(me(i)+": "+(r=i,(null==(a=n[i])||"boolean"==typeof a||""===a?"":"number"!=typeof a||0===a||r in l||r.startsWith("--")?String(a).trim():a+"px")+";")));return t?[t+" {"].concat(o,["}"]):o}(e):e.toString();var u}var be=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function ve(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return v(e)||g(e)?be(ye(m(y,[e].concat(t)))):0===t.length&&1===e.length&&"string"==typeof e[0]?e:be(ye(m(e,t)))}new Set;var we=function(e,n,t){return void 0===t&&(t=b),e.theme!==t.theme&&e.theme||n||t.theme},Se=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,ke=/(^-|-$)/g;function xe(e){return e.replace(Se,"-").replace(ke,"")}var Ie=function(e){return q(X(e)>>>0)};function _e(e){return"string"==typeof e&&!0}var Ae=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Te=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Ee(e,n,t){var r=e[t];Ae(n)&&Ae(r)?Oe(r,n):e[t]=n}function Oe(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];for(var a=0,o=t;a<o.length;a++){var i=o[a];if(Ae(i))for(var s in i)Te(s)&&Ee(e,i[s],s)}return e}var Ce=e.createContext();Ce.Consumer;var Ne={};function Me(n,t,r){var a=S(n),o=!_e(n),i=t.attrs,s=void 0===i?y:i,l=t.componentId,u=void 0===l?function(e,n){var t="string"!=typeof e?"sc":xe(e);Ne[t]=(Ne[t]||0)+1;var r=t+"-"+Ie("5.3.11"+t+Ne[t]);return n?n+"-"+r:r}(t.displayName,t.parentComponentId):l,c=t.displayName,p=void 0===c?function(e){return _e(e)?"styled."+e:"Styled("+w(e)+")"}(n):c,m=t.displayName&&t.componentId?xe(t.displayName)+"-"+t.componentId:t.componentId||u,g=a&&n.attrs?Array.prototype.concat(n.attrs,s).filter(Boolean):s,k=t.shouldForwardProp;a&&n.shouldForwardProp&&(k=t.shouldForwardProp?function(e,r,a){return n.shouldForwardProp(e,r,a)&&t.shouldForwardProp(e,r,a)}:n.shouldForwardProp);var x,I=new Q(r,m,a?n.componentStyle:void 0),_=I.isStatic&&0===s.length,A=function(n,t){return function(n,t,r,a){var o=n.attrs,i=n.componentStyle,s=n.defaultProps,l=n.foldedComponentIds,u=n.shouldForwardProp,c=n.styledComponentId,p=n.target,f=function(e,n,t){void 0===e&&(e=b);var r=h({},n,{theme:e}),a={};return t.forEach((function(e){var n,t,o,i=e;for(n in v(i)&&(i=i(r)),i)r[n]=a[n]="className"===n?(t=a[n],o=i[n],t&&o?t+" "+o:t||o):i[n]})),[r,a]}(we(t,(0,e.useContext)(Ce),s)||b,t,o),m=f[0],g=f[1],y=function(e,n,t,r){var a=se(),o=le();return n?e.generateAndInjectStyles(b,a,o):e.generateAndInjectStyles(t,a,o)}(i,a,m),w=r,S=g.$as||t.$as||g.as||t.as||p,k=_e(S),x=g!==t?h({},t,{},g):t,I={};for(var _ in x)"$"!==_[0]&&"as"!==_&&("forwardedAs"===_?I.as=x[_]:(u?u(_,d,S):!k||d(_))&&(I[_]=x[_]));return t.style&&g.style!==t.style&&(I.style=h({},t.style,{},g.style)),I.className=Array.prototype.concat(l,c,y!==c?y:null,t.className,g.className).filter(Boolean).join(" "),I.ref=w,(0,e.createElement)(S,I)}(x,n,t,_)};return A.displayName=p,(x=e.forwardRef(A)).attrs=g,x.componentStyle=I,x.displayName=p,x.shouldForwardProp=k,x.foldedComponentIds=a?Array.prototype.concat(n.foldedComponentIds,n.styledComponentId):y,x.styledComponentId=m,x.target=a?n.target:n,x.withComponent=function(e){var n=t.componentId,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(t,["componentId"]),o=n&&n+"-"+(_e(e)?e:xe(w(e)));return Me(e,h({},a,{attrs:g,componentId:o}),r)},Object.defineProperty(x,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=a?Oe({},n.defaultProps,e):e}}),Object.defineProperty(x,"toString",{value:function(){return"."+x.styledComponentId}}),o&&f()(x,n,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),x}var Pe=function(e){return function e(n,t,r){if(void 0===r&&(r=b),!(0,a.isValidElementType)(t))return A(1,String(t));var o=function(){return n(t,r,ve.apply(void 0,arguments))};return o.withConfig=function(a){return e(n,t,h({},r,{},a))},o.attrs=function(a){return e(n,t,h({},r,{attrs:Array.prototype.concat(r.attrs,a).filter(Boolean)}))},o}(Me,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){Pe[e]=Pe(e)}));var Fe=function(){function e(e,n){this.rules=e,this.componentId=n,this.isStatic=J(e),G.registerId(this.componentId+1)}var n=e.prototype;return n.createStyles=function(e,n,t,r){var a=r(ye(this.rules,n,t,r).join(""),""),o=this.componentId+e;t.insertRules(o,o,a)},n.removeStyles=function(e,n){n.clearRules(this.componentId+e)},n.renderStyles=function(e,n,t,r){e>2&&G.registerId(this.componentId+e),this.removeStyles(e,t),this.createStyles(e,n,t,r)},e}();!function(){function n(){var n=this;this._emitSheetCSS=function(){var e=n.instance.toString();if(!e)return"";var t=j();return"<style "+[t&&'nonce="'+t+'"',k+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+e+"</style>"},this.getStyleTags=function(){return n.sealed?A(2):n._emitSheetCSS()},this.getStyleElement=function(){var t;if(n.sealed)return A(2);var r=((t={})[k]="",t["data-styled-version"]="5.3.11",t.dangerouslySetInnerHTML={__html:n.instance.toString()},t),a=j();return a&&(r.nonce=a),[e.createElement("style",h({},r,{key:"sc-0-0"}))]},this.seal=function(){n.sealed=!0},this.instance=new G({isServer:!0}),this.sealed=!1}var t=n.prototype;t.collectStyles=function(n){return this.sealed?A(2):e.createElement(ue,{sheet:this.instance},n)},t.interleaveWithNodeStream=function(e){return A(3)}}();const Re=Pe,Le=(e=>{const n=[],t=10;switch(e%2){case 0:for(let e=0;e<t;e++){const r=0,a=180+60*(t-e)/t,o=100+150*e/t;n.push("rgba(".concat(Math.round(r),", ").concat(Math.round(a),", ").concat(Math.round(o),")"))}break;case 1:for(let e=0;e<t;e++){const r=160+95*e/t,a=80+100*(t-e)/t,o=0;n.push("rgba(".concat(Math.round(r),", ").concat(Math.round(o),", ").concat(Math.round(a),")"))}}return{colors:n,counter:0,next(){return n[this.counter++%n.length]}}})(1);Le.counter=5;const De={devices:{desktop:{fontSize:20},mobile:{fontSize:16,maxWidth:600}},dimensions:{maxContentWidth:"900px"},fonts:{title:"Silkscreen",default:"Rajdhani"},fontSizes:{h1:"300%",h2:"140%"},colors:{bg1:"#333333",bg1p5:"#222222",bg2:"#1a1a1a",bg3:"#444444",fg1:"#d1d1d1",fg1p5:"#a1a1a1",fg2:"#555555",colorScheme:Le},spacings:{space1:"1rem",space2:"2rem",space0p1:"0.25rem"},controls:{gridSize:50},zIndexes:{closeButton:2,spinner:3}};var je,ze,Be,Ue,We,$e,Ve,Ge,He,Ke,qe,Ye,Xe,Je,Ze,Qe=t(184);const en=Re.h2(je||(je=r(["\n    font-family: ",";\n    font-size: 140%;\n    color: ",";\n    margin: 0;\n    padding: 0;\n"])),De.fonts.title,De.colors.colorScheme.next()),nn=Re.h3(ze||(ze=r(["\n    text-transform: uppercase;\n    font-weight: bold;\n    font-family: ",";\n    margin: 0;\n    padding: 0;\n"])),De.fonts.title),tn=Re.div(Be||(Be=r(["\n    background-color: ",";\n    margin: "," auto 0 auto;\n    padding: ",";\n    width: 100%;\n    max-width: ",";\n"])),De.colors.bg2,De.spacings.space1,De.spacings.space1,De.dimensions.maxContentWidth),rn="\n    border: none;\n    cursor: pointer;\n    background-color: ".concat(De.colors.bg3,";\n"),an="\n    font-family: ".concat(De.fonts.title,";\n"),on=Re.button(Ue||(Ue=r(["\n    ","\n"])),rn),sn=Re(on)(We||(We=r(["\n    ","\n    background-color: ",";\n"])),an,(()=>De.colors.colorScheme.next())),ln=Re.select($e||($e=r(["\n    border: none;\n    background-color: ",";\n    cursor: pointer;\n"])),De.colors.bg1p5),un=Re.span(Ve||(Ve=r(["\n    position: absolute;\n    bottom: ",";\n    right: ",";\n    color: ",";\n"])),De.spacings.space0p1,De.spacings.space0p1,De.colors.fg1p5),cn=e=>{let{filename:n}=e;const t=n.split("/").slice(-1)[0]||null;return(0,Qe.jsx)(un,{children:t})},dn=Re.span(Ge||(Ge=r(["\n    position: absolute;\n    bottom: ",";\n    left: ",";\n    color: ",";\n"])),De.spacings.space0p1,De.spacings.space0p1,De.colors.fg1p5),pn="\n    height: 20vh;\n    max-height: 10em;\n    user-select: none;\n",fn="\n    letter-spacing: 0.1em;\n    opacity: 0.3;\n    user-select: none;\n",hn=Re.span(He||(He=r(["\n    font-size: 120%;\n    font-weight: bold;\n    color: ",";\n    min-width: 1.5em;\n    @media (max-width: ","px) {\n        text-align: center;\n    }\n"])),De.colors.fg2,De.devices.mobile.maxWidth),mn=Re.div(Ke||(Ke=r(["\n    color: ",";\n    ::before {\n        content: '\u2192 ';\n    }\n    a {\n        color: ",";\n    }\n"])),De.colors.fg2,De.colors.fg2),gn=Re(tn)(qe||(qe=r(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n"]))),yn=Re.div(Ye||(Ye=r(["\n    min-width: 6.5rem;\n    transform: translateX(-20%);\n"]))),bn=Re.div(Xe||(Xe=r(["\n    flex: auto;\n"]))),vn=Re.div(Je||(Je=r(["\n    font-family: ",";\n    color: ",";\n"])),De.fonts.title,De.colors.colorScheme.next()),wn=Re.div(Ze||(Ze=r(["\n& > * {\n    font-size: 90%;\n    margin-right: ",";\n    &:last-child {\n        margin-right: 0;\n    }\n}\n"])),De.spacings.space0p1);var Sn,kn,xn;const In=Re.div(Sn||(Sn=r(["\n    position: relative;\n    background-color: ",";\n"])),De.colors.bg1p5),_n=Re.pre(kn||(kn=r(["\n    ","\n    ","\n    overflow: auto;\n    margin: 0;\n    padding: 0;\n"])),pn,fn),An=Re(wn)(xn||(xn=r(["\n    position: absolute;\n    top: calc(",");\n    right: calc(",");\n"])),De.spacings.space0p1,De.spacings.space0p1),Tn=e=>{let{pd:n,filename:t,extraButtons:r}=e;return(0,Qe.jsxs)(In,{children:[(0,Qe.jsx)(_n,{children:n}),t?(0,Qe.jsx)(cn,{filename:t}):null,r?(0,Qe.jsx)(An,{children:r}):null]})},En=(e,n,t)=>{const r=new Blob([n],{type:t});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(r,e);else{const n=window.document.createElement("a");n.href=window.URL.createObjectURL(r),n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}},On="array",Cn="bit",Nn="bits",Mn="byte",Pn="bytes",Fn="",Rn="exponent",Ln="function",Dn="iec",jn="Invalid number",zn="Invalid rounding method",Bn="jedec",Un="object",Wn=".",$n="round",Vn="s",Gn="si",Hn="kbit",Kn="kB",qn=" ",Yn="string",Xn="0",Jn={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function Zn(e){let{bits:n=!1,pad:t=!1,base:r=-1,round:a=2,locale:o=Fn,localeOptions:i={},separator:s=Fn,spacer:l=qn,symbols:u={},standard:c=Fn,output:d=Yn,fullform:p=!1,fullforms:f=[],exponent:h=-1,roundingMethod:m=$n,precision:g=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},y=h,b=Number(e),v=[],w=0,S=Fn;c===Gn?(r=10,c=Bn):c===Dn||c===Bn?r=2:2===r?c=Dn:(r=10,c=Bn);const k=10===r?1e3:1024,x=!0===p,I=b<0,_=Math[m];if("bigint"!==typeof e&&isNaN(e))throw new TypeError(jn);if(typeof _!==Ln)throw new TypeError(zn);if(I&&(b=-b),(-1===y||isNaN(y))&&(y=Math.floor(Math.log(b)/Math.log(k)),y<0&&(y=0)),y>8&&(g>0&&(g+=8-y),y=8),d===Rn)return y;if(0===b)v[0]=0,S=v[1]=Jn.symbol[c][n?Nn:Pn][y];else{w=b/(2===r?Math.pow(2,10*y):Math.pow(1e3,y)),n&&(w*=8,w>=k&&y<8&&(w/=k,y++));const e=Math.pow(10,y>0?a:0);v[0]=_(w*e)/e,v[0]===k&&y<8&&-1===h&&(v[0]=1,y++),S=v[1]=10===r&&1===y?n?Hn:Kn:Jn.symbol[c][n?Nn:Pn][y]}if(I&&(v[0]=-v[0]),g>0&&(v[0]=v[0].toPrecision(g)),v[1]=u[v[1]]||v[1],!0===o?v[0]=v[0].toLocaleString():o.length>0?v[0]=v[0].toLocaleString(o,i):s.length>0&&(v[0]=v[0].toString().replace(Wn,s)),t&&!1===Number.isInteger(v[0])&&a>0){const e=s||Wn,n=v[0].toString().split(e),t=n[1]||Fn,r=t.length,o=a-r;v[0]="".concat(n[0]).concat(e).concat(t.padEnd(r+o,Xn))}return x&&(v[1]=f[y]?f[y]:Jn.fullform[c][y]+(n?Cn:Mn)+(1===v[0]?Fn:Vn)),d===On?v:d===Un?{value:v[0],symbol:v[1],exponent:y,unit:S}:v.join(l)}var Qn,et,nt;const tt=["\u2591","\u2592","\u2593","\u2594","\u2599","\u259a","\u259b","\u259c","\u259d","\u259e","\u259f"],rt=Re.div(Qn||(Qn=r(["\n    position: relative;\n"]))),at=Re.div(et||(et=r(["\n    ","\n    word-break: break-all;\n    overflow: hidden;\n    opacity: 0.1;\n    text-align: justify;\n"])),pn),ot=Re(wn)(nt||(nt=r(["\n    position: absolute;\n    top: calc(",");\n    right: calc(",");\n"])),De.spacings.space0p1,De.spacings.space0p1),it=n=>{let{wasm:t,filename:r,showDownloadButton:a,showFileSize:o,extraButtons:i}=n;if(a){const e=()=>{En(r,t,"application/wasm")};i=[...i||[],(0,Qe.jsx)(on,{onClick:e,children:"download"},"download")]}const s=(0,e.useMemo)((()=>Array.from(new Uint8Array(t))),[t]),l=Zn(t.byteLength);return(0,Qe.jsxs)(rt,{children:[r?(0,Qe.jsx)(cn,{filename:r}):null,o?(0,Qe.jsx)(dn,{children:l}):null,(0,Qe.jsx)(at,{children:s.slice(0,1e3).map(((e,n)=>(0,Qe.jsxs)("span",{children:[tt[e%tt.length]," "]},n)))}),i?(0,Qe.jsx)(ot,{children:i}):null]})};var st,lt,ut,ct,dt,pt,ft;const ht=e=>{const n=Math.floor(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return Math.floor(e*Math.pow(10,n))/Math.pow(10,n)}(e,2));return"".concat(n.toString().padStart(3,"0"))},mt=Re.div(st||(st=r(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    @media (max-width: ","px) {\n        flex-direction: column-reverse;\n        align-items: flex-end;\n    }\n"])),De.devices.mobile.maxWidth),gt=Re.div(lt||(lt=r(["\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    min-width: 4em;\n    margin: 0 ",";\n    font-size: ",";\n    @media (max-width: ","px) {\n        font-size: 120%;\n    }\n    & > span {\n        font-size: 100%;\n    }\n    & > span:nth-child(1) {\n        text-align: right;\n    }\n    & > span:nth-child(2) {\n        text-align: center;\n    }\n"])),De.spacings.space1,De.fontSizes.h2,De.devices.mobile.maxWidth),yt=Re.div(ut||(ut=r(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    flex: auto;\n    margin-right: ",";\n    @media (max-width: ","px) {\n        align-self: stretch;\n        margin-right: 0;\n    }\n    @media (max-width: 400px) {\n        font-size: 50%;\n    }\n\n"])),De.spacings.space1,De.devices.mobile.maxWidth),bt=Re(sn)(ct||(ct=r(["\n    min-width: 4.5em;\n    align-self: stretch;\n    @media (max-width: 700px) {\n        font-size: 80%;\n    }\n"]))),vt=Re.div(dt||(dt=r(["\n    display: flex;\n    flex-direction: row;\n    align-self: stretch;\n"]))),wt=Re(sn)(pt||(pt=r(["\n    min-width: 3em;\n    @media (max-width: 700px) {\n        font-size: 80%;\n    }\n"]))),St=Re(wn)(ft||(ft=r(["\n    align-self: stretch;\n    display: flex;\n    align-items: stretch;\n    @media (max-width: ","px) {\n        justify-content: flex-end;\n        margin-bottom: ",";\n    }\n"])),De.devices.mobile.maxWidth,De.spacings.space1),kt=n=>{let{wav:t,showDownloadButton:r,extraButtons:a}=n;const[o,i]=(0,e.useState)(!1),[,s]=(0,e.useState)(0),l=(0,e.useMemo)((()=>{const e=new Audio(URL.createObjectURL(new Blob([t],{type:"audio/wav"})));return e.onplay=()=>{i(!0)},e.onpause=()=>{i(!1)},e.onended=()=>{i(!1)},e}),[t]);(0,e.useEffect)((()=>{if(!o)return;const e=setInterval((()=>{s(l.currentTime)}),100);return()=>clearInterval(e)}),[o]);return(0,Qe.jsxs)(mt,{children:[(0,Qe.jsxs)(yt,{children:[o?(0,Qe.jsx)(bt,{onClick:()=>{l.paused&&i(!1),l.pause()},children:"Pause"}):(0,Qe.jsx)(bt,{onClick:()=>{l.paused||i(!0),l.play()},children:"Play"}),(0,Qe.jsxs)(gt,{children:[(0,Qe.jsx)("span",{children:ht(l.currentTime)}),(0,Qe.jsx)("span",{children:"/"}),(0,Qe.jsx)("span",{children:isNaN(l.duration)?ht(0):ht(l.duration)})]}),(0,Qe.jsxs)(vt,{children:[(0,Qe.jsx)(wt,{onClick:()=>{l.volume=Math.max(l.volume-.1,0)},children:"-"}),(0,Qe.jsx)(wt,{onClick:()=>{l.volume=Math.min(l.volume+.1,1)},children:"+"})]})]}),(0,Qe.jsxs)(St,{children:[a||null,r?(0,Qe.jsx)(on,{onClick:()=>{En("audio.webpd.wav",t,"audio/wav")},children:"download"}):null]})]})};var xt,It,_t,At,Tt=t(587),Et=t.n(Tt);const Ot=Re.div(xt||(xt=r(["\n    position: relative;\n    background-color: ",";\n"])),De.colors.bg1p5),Ct=Re.div(It||(It=r(["\n    ","\n    font-weight: bold;\n    margin: 0;\n    padding: 0;\n"])),fn),Nt=Re.table(_t||(_t=r(["\n    ","\n    word-break: break-all;\n    overflow: hidden;\n    text-align: justify;\n    padding-left: 0.5em;\n\n    & td {\n        padding-right: 0.5em;\n    }\n"])),fn),Mt=Re(wn)(At||(At=r(["\n    position: absolute;\n    top: calc(",");\n    right: calc(",");\n"])),De.spacings.space0p1,De.spacings.space0p1),Pt=e=>{let{app:n,filename:t,showDownloadButton:r,extraButtons:a}=e;if(r){const e=()=>{var e=new(Et());Object.entries(n).forEach((n=>{let[t,r]=n;e.file(t,r)})),e.generateAsync({type:"arraybuffer"}).then((e=>{En(t,e,"application/zip")}))};a=[...a||[],(0,Qe.jsx)(on,{onClick:e,children:"download"},"download")]}return(0,Qe.jsxs)(Ot,{children:[(0,Qe.jsx)(Ct,{children:t}),(0,Qe.jsx)(Nt,{children:(0,Qe.jsx)("tbody",{children:Object.entries(n).map((e=>{let[n,t]=e;return(0,Qe.jsxs)("tr",{children:[(0,Qe.jsxs)("td",{children:[" \u221f ",n]}),(0,Qe.jsx)("td",{children:Zn("string"===typeof t?(r=t,new Blob([r]).size):t.byteLength)})]},n);var r}))})}),a?(0,Qe.jsx)(Mt,{children:a}):null]})},Ft=e=>{let{format:n,artefacts:t,filename:r,showDownloadButton:a,extraButtons:o}=e;switch(n){case"pd":return t.pd?(0,Qe.jsx)(Tn,{pd:t.pd,filename:r,extraButtons:o}):null;case"wasm":return t.wasm?(0,Qe.jsx)(it,{wasm:t.wasm,filename:r||"patch.wasm",showDownloadButton:a,extraButtons:o,showFileSize:!0}):null;case"wav":return t.wav?(0,Qe.jsx)(kt,{wav:t.wav,showDownloadButton:a,extraButtons:o}):null;case"app":return t.app?(0,Qe.jsx)(Pt,{app:t.app,filename:r||"app.zip",extraButtons:o,showDownloadButton:a}):null}return null};function Rt(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(t.length?" "+t.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Lt(e){return!!e&&!!e[_r]}function Dt(e){var n;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var n=Object.getPrototypeOf(e);if(null===n)return!0;var t=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return t===Object||"function"==typeof t&&Function.toString.call(t)===Ar}(e)||Array.isArray(e)||!!e[Ir]||!!(null===(n=e.constructor)||void 0===n?void 0:n[Ir])||Vt(e)||Gt(e))}function jt(e,n,t){void 0===t&&(t=!1),0===zt(e)?(t?Object.keys:Tr)(e).forEach((function(r){t&&"symbol"==typeof r||n(r,e[r],e)})):e.forEach((function(t,r){return n(r,t,e)}))}function zt(e){var n=e[_r];return n?n.i>3?n.i-4:n.i:Array.isArray(e)?1:Vt(e)?2:Gt(e)?3:0}function Bt(e,n){return 2===zt(e)?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function Ut(e,n){return 2===zt(e)?e.get(n):e[n]}function Wt(e,n,t){var r=zt(e);2===r?e.set(n,t):3===r?e.add(t):e[n]=t}function $t(e,n){return e===n?0!==e||1/e==1/n:e!=e&&n!=n}function Vt(e){return wr&&e instanceof Map}function Gt(e){return Sr&&e instanceof Set}function Ht(e){return e.o||e.t}function Kt(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var n=Er(e);delete n[_r];for(var t=Tr(n),r=0;r<t.length;r++){var a=t[r],o=n[a];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),n)}function qt(e,n){return void 0===n&&(n=!1),Xt(e)||Lt(e)||!Dt(e)||(zt(e)>1&&(e.set=e.add=e.clear=e.delete=Yt),Object.freeze(e),n&&jt(e,(function(e,n){return qt(n,!0)}),!0)),e}function Yt(){Rt(2)}function Xt(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Jt(e){var n=Or[e];return n||Rt(18,e),n}function Zt(e,n){Or[e]||(Or[e]=n)}function Qt(){return br}function er(e,n){n&&(Jt("Patches"),e.u=[],e.s=[],e.v=n)}function nr(e){tr(e),e.p.forEach(ar),e.p=null}function tr(e){e===br&&(br=e.l)}function rr(e){return br={p:[],l:br,h:e,m:!0,_:0}}function ar(e){var n=e[_r];0===n.i||1===n.i?n.j():n.g=!0}function or(e,n){n._=n.p.length;var t=n.p[0],r=void 0!==e&&e!==t;return n.h.O||Jt("ES5").S(n,e,r),r?(t[_r].P&&(nr(n),Rt(4)),Dt(e)&&(e=ir(n,e),n.l||lr(n,e)),n.u&&Jt("Patches").M(t[_r].t,e,n.u,n.s)):e=ir(n,t,[]),nr(n),n.u&&n.v(n.u,n.s),e!==xr?e:void 0}function ir(e,n,t){if(Xt(n))return n;var r=n[_r];if(!r)return jt(n,(function(a,o){return sr(e,r,n,a,o,t)}),!0),n;if(r.A!==e)return n;if(!r.P)return lr(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var a=4===r.i||5===r.i?r.o=Kt(r.k):r.o,o=a,i=!1;3===r.i&&(o=new Set(a),a.clear(),i=!0),jt(o,(function(n,o){return sr(e,r,a,n,o,t,i)})),lr(e,a,!1),t&&e.u&&Jt("Patches").N(r,t,e.u,e.s)}return r.o}function sr(e,n,t,r,a,o,i){if(Lt(a)){var s=ir(e,a,o&&n&&3!==n.i&&!Bt(n.R,r)?o.concat(r):void 0);if(Wt(t,r,s),!Lt(s))return;e.m=!1}else i&&t.add(a);if(Dt(a)&&!Xt(a)){if(!e.h.D&&e._<1)return;ir(e,a),n&&n.A.l||lr(e,a)}}function lr(e,n,t){void 0===t&&(t=!1),!e.l&&e.h.D&&e.m&&qt(n,t)}function ur(e,n){var t=e[_r];return(t?Ht(t):e)[n]}function cr(e,n){if(n in e)for(var t=Object.getPrototypeOf(e);t;){var r=Object.getOwnPropertyDescriptor(t,n);if(r)return r;t=Object.getPrototypeOf(t)}}function dr(e){e.P||(e.P=!0,e.l&&dr(e.l))}function pr(e){e.o||(e.o=Kt(e.t))}function fr(e,n,t){var r=Vt(n)?Jt("MapSet").F(n,t):Gt(n)?Jt("MapSet").T(n,t):e.O?function(e,n){var t=Array.isArray(e),r={i:t?1:0,A:n?n.A:Qt(),P:!1,I:!1,R:{},l:n,t:e,k:null,o:null,j:null,C:!1},a=r,o=Cr;t&&(a=[r],o=Nr);var i=Proxy.revocable(a,o),s=i.revoke,l=i.proxy;return r.k=l,r.j=s,l}(n,t):Jt("ES5").J(n,t);return(t?t.A:Qt()).p.push(r),r}function hr(e){return Lt(e)||Rt(22,e),function e(n){if(!Dt(n))return n;var t,r=n[_r],a=zt(n);if(r){if(!r.P&&(r.i<4||!Jt("ES5").K(r)))return r.t;r.I=!0,t=mr(n,a),r.I=!1}else t=mr(n,a);return jt(t,(function(n,a){r&&Ut(r.t,n)===a||Wt(t,n,e(a))})),3===a?new Set(t):t}(e)}function mr(e,n){switch(n){case 2:return new Map(e);case 3:return Array.from(e)}return Kt(e)}function gr(){function e(e,n){var t=a[e];return t?t.enumerable=n:a[e]=t={configurable:!0,enumerable:n,get:function(){var n=this[_r];return Cr.get(n,e)},set:function(n){var t=this[_r];Cr.set(t,e,n)}},t}function n(e){for(var n=e.length-1;n>=0;n--){var a=e[n][_r];if(!a.P)switch(a.i){case 5:r(a)&&dr(a);break;case 4:t(a)&&dr(a)}}}function t(e){for(var n=e.t,t=e.k,r=Tr(t),a=r.length-1;a>=0;a--){var o=r[a];if(o!==_r){var i=n[o];if(void 0===i&&!Bt(n,o))return!0;var s=t[o],l=s&&s[_r];if(l?l.t!==i:!$t(s,i))return!0}}var u=!!n[_r];return r.length!==Tr(n).length+(u?0:1)}function r(e){var n=e.k;if(n.length!==e.t.length)return!0;var t=Object.getOwnPropertyDescriptor(n,n.length-1);if(t&&!t.get)return!0;for(var r=0;r<n.length;r++)if(!n.hasOwnProperty(r))return!0;return!1}var a={};Zt("ES5",{J:function(n,t){var r=Array.isArray(n),a=function(n,t){if(n){for(var r=Array(t.length),a=0;a<t.length;a++)Object.defineProperty(r,""+a,e(a,!0));return r}var o=Er(t);delete o[_r];for(var i=Tr(o),s=0;s<i.length;s++){var l=i[s];o[l]=e(l,n||!!o[l].enumerable)}return Object.create(Object.getPrototypeOf(t),o)}(r,n),o={i:r?5:4,A:t?t.A:Qt(),P:!1,I:!1,R:{},l:t,t:n,k:a,o:null,g:!1,C:!1};return Object.defineProperty(a,_r,{value:o,writable:!0}),a},S:function(e,t,a){a?Lt(t)&&t[_r].A===e&&n(e.p):(e.u&&function e(n){if(n&&"object"==typeof n){var t=n[_r];if(t){var a=t.t,o=t.k,i=t.R,s=t.i;if(4===s)jt(o,(function(n){n!==_r&&(void 0!==a[n]||Bt(a,n)?i[n]||e(o[n]):(i[n]=!0,dr(t)))})),jt(a,(function(e){void 0!==o[e]||Bt(o,e)||(i[e]=!1,dr(t))}));else if(5===s){if(r(t)&&(dr(t),i.length=!0),o.length<a.length)for(var l=o.length;l<a.length;l++)i[l]=!1;else for(var u=a.length;u<o.length;u++)i[u]=!0;for(var c=Math.min(o.length,a.length),d=0;d<c;d++)o.hasOwnProperty(d)||(i[d]=!0),void 0===i[d]&&e(o[d])}}}}(e.p[0]),n(e.p))},K:function(e){return 4===e.i?t(e):r(e)}})}var yr,br,vr="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),wr="undefined"!=typeof Map,Sr="undefined"!=typeof Set,kr="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,xr=vr?Symbol.for("immer-nothing"):((yr={})["immer-nothing"]=!0,yr),Ir=vr?Symbol.for("immer-draftable"):"__$immer_draftable",_r=vr?Symbol.for("immer-state"):"__$immer_state",Ar=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Tr="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Er=Object.getOwnPropertyDescriptors||function(e){var n={};return Tr(e).forEach((function(t){n[t]=Object.getOwnPropertyDescriptor(e,t)})),n},Or={},Cr={get:function(e,n){if(n===_r)return e;var t=Ht(e);if(!Bt(t,n))return function(e,n,t){var r,a=cr(n,t);return a?"value"in a?a.value:null===(r=a.get)||void 0===r?void 0:r.call(e.k):void 0}(e,t,n);var r=t[n];return e.I||!Dt(r)?r:r===ur(e.t,n)?(pr(e),e.o[n]=fr(e.A.h,r,e)):r},has:function(e,n){return n in Ht(e)},ownKeys:function(e){return Reflect.ownKeys(Ht(e))},set:function(e,n,t){var r=cr(Ht(e),n);if(null==r?void 0:r.set)return r.set.call(e.k,t),!0;if(!e.P){var a=ur(Ht(e),n),o=null==a?void 0:a[_r];if(o&&o.t===t)return e.o[n]=t,e.R[n]=!1,!0;if($t(t,a)&&(void 0!==t||Bt(e.t,n)))return!0;pr(e),dr(e)}return e.o[n]===t&&(void 0!==t||n in e.o)||Number.isNaN(t)&&Number.isNaN(e.o[n])||(e.o[n]=t,e.R[n]=!0),!0},deleteProperty:function(e,n){return void 0!==ur(e.t,n)||n in e.t?(e.R[n]=!1,pr(e),dr(e)):delete e.R[n],e.o&&delete e.o[n],!0},getOwnPropertyDescriptor:function(e,n){var t=Ht(e),r=Reflect.getOwnPropertyDescriptor(t,n);return r?{writable:!0,configurable:1!==e.i||"length"!==n,enumerable:r.enumerable,value:t[n]}:r},defineProperty:function(){Rt(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Rt(12)}},Nr={};jt(Cr,(function(e,n){Nr[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}})),Nr.deleteProperty=function(e,n){return Nr.set.call(this,e,n,void 0)},Nr.set=function(e,n,t){return Cr.set.call(this,e[0],n,t,e[0])};var Mr=function(){function e(e){var n=this;this.O=kr,this.D=!0,this.produce=function(e,t,r){if("function"==typeof e&&"function"!=typeof t){var a=t;t=e;var o=n;return function(e){var n=this;void 0===e&&(e=a);for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return o.produce(e,(function(e){var r;return(r=t).call.apply(r,[n,e].concat(i))}))}}var i;if("function"!=typeof t&&Rt(6),void 0!==r&&"function"!=typeof r&&Rt(7),Dt(e)){var s=rr(n),l=fr(n,e,void 0),u=!0;try{i=t(l),u=!1}finally{u?nr(s):tr(s)}return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return er(s,r),or(e,s)}),(function(e){throw nr(s),e})):(er(s,r),or(i,s))}if(!e||"object"!=typeof e){if(void 0===(i=t(e))&&(i=e),i===xr&&(i=void 0),n.D&&qt(i,!0),r){var c=[],d=[];Jt("Patches").M(e,i,c,d),r(c,d)}return i}Rt(21,e)},this.produceWithPatches=function(e,t){if("function"==typeof e)return function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return n.produceWithPatches(t,(function(n){return e.apply(void 0,[n].concat(a))}))};var r,a,o=n.produce(e,t,(function(e,n){r=e,a=n}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,r,a]})):[o,r,a]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var n=e.prototype;return n.createDraft=function(e){Dt(e)||Rt(8),Lt(e)&&(e=hr(e));var n=rr(this),t=fr(this,e,void 0);return t[_r].C=!0,tr(n),t},n.finishDraft=function(e,n){var t=(e&&e[_r]).A;return er(t,n),or(void 0,t)},n.setAutoFreeze=function(e){this.D=e},n.setUseProxies=function(e){e&&!kr&&Rt(20),this.O=e},n.applyPatches=function(e,n){var t;for(t=n.length-1;t>=0;t--){var r=n[t];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}t>-1&&(n=n.slice(t+1));var a=Jt("Patches").$;return Lt(e)?a(e,n):this.produce(e,(function(e){return a(e,n)}))},e}(),Pr=new Mr,Fr=Pr.produce;Pr.produceWithPatches.bind(Pr),Pr.setAutoFreeze.bind(Pr),Pr.setUseProxies.bind(Pr),Pr.applyPatches.bind(Pr),Pr.createDraft.bind(Pr),Pr.finishDraft.bind(Pr);const Rr=Fr;function Lr(e){return Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lr(e)}function Dr(e){var n=function(e,n){if("object"!=Lr(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!=Lr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"==Lr(n)?n:String(n)}function jr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function zr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?jr(Object(t),!0).forEach((function(n){var r,a,o;r=e,a=n,o=t[n],(a=Dr(a))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Br(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Ur="function"===typeof Symbol&&Symbol.observable||"@@observable",Wr=function(){return Math.random().toString(36).substring(7).split("").join(".")},$r={INIT:"@@redux/INIT"+Wr(),REPLACE:"@@redux/REPLACE"+Wr(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Wr()}};function Vr(e){if("object"!==typeof e||null===e)return!1;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}function Gr(e,n,t){var r;if("function"===typeof n&&"function"===typeof t||"function"===typeof t&&"function"===typeof arguments[3])throw new Error(Br(0));if("function"===typeof n&&"undefined"===typeof t&&(t=n,n=void 0),"undefined"!==typeof t){if("function"!==typeof t)throw new Error(Br(1));return t(Gr)(e,n)}if("function"!==typeof e)throw new Error(Br(2));var a=e,o=n,i=[],s=i,l=!1;function u(){s===i&&(s=i.slice())}function c(){if(l)throw new Error(Br(3));return o}function d(e){if("function"!==typeof e)throw new Error(Br(4));if(l)throw new Error(Br(5));var n=!0;return u(),s.push(e),function(){if(n){if(l)throw new Error(Br(6));n=!1,u();var t=s.indexOf(e);s.splice(t,1),i=null}}}function p(e){if(!Vr(e))throw new Error(Br(7));if("undefined"===typeof e.type)throw new Error(Br(8));if(l)throw new Error(Br(9));try{l=!0,o=a(o,e)}finally{l=!1}for(var n=i=s,t=0;t<n.length;t++){(0,n[t])()}return e}return p({type:$r.INIT}),(r={dispatch:p,subscribe:d,getState:c,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Br(10));a=e,p({type:$r.REPLACE})}})[Ur]=function(){var e,n=d;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(Br(11));function t(){e.next&&e.next(c())}return t(),{unsubscribe:n(t)}}})[Ur]=function(){return this},e},r}function Hr(e){for(var n=Object.keys(e),t={},r=0;r<n.length;r++){var a=n[r];0,"function"===typeof e[a]&&(t[a]=e[a])}var o,i=Object.keys(t);try{!function(e){Object.keys(e).forEach((function(n){var t=e[n];if("undefined"===typeof t(void 0,{type:$r.INIT}))throw new Error(Br(12));if("undefined"===typeof t(void 0,{type:$r.PROBE_UNKNOWN_ACTION()}))throw new Error(Br(13))}))}(t)}catch(s){o=s}return function(e,n){if(void 0===e&&(e={}),o)throw o;for(var r=!1,a={},s=0;s<i.length;s++){var l=i[s],u=t[l],c=e[l],d=u(c,n);if("undefined"===typeof d){n&&n.type;throw new Error(Br(14))}a[l]=d,r=r||d!==c}return(r=r||i.length!==Object.keys(e).length)?a:e}}function Kr(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return 0===n.length?function(e){return e}:1===n.length?n[0]:n.reduce((function(e,n){return function(){return e(n.apply(void 0,arguments))}}))}function qr(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){return function(){var t=e.apply(void 0,arguments),r=function(){throw new Error(Br(15))},a={getState:t.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=n.map((function(e){return e(a)}));return r=Kr.apply(void 0,o)(t.dispatch),zr(zr({},t),{},{dispatch:r})}}}function Yr(e){return function(n){var t=n.dispatch,r=n.getState;return function(n){return function(a){return"function"===typeof a?a(t,r,e):n(a)}}}}var Xr=Yr();Xr.withExtraArgument=Yr;const Jr=Xr;var Zr=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Qr=function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=n.call(e,i)}catch(s){o=[6,s],r=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},ea=function(e,n){for(var t=0,r=n.length,a=e.length;t<r;t++,a++)e[a]=n[t];return e},na=Object.defineProperty,ta=Object.defineProperties,ra=Object.getOwnPropertyDescriptors,aa=Object.getOwnPropertySymbols,oa=Object.prototype.hasOwnProperty,ia=Object.prototype.propertyIsEnumerable,sa=function(e,n,t){return n in e?na(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t},la=function(e,n){for(var t in n||(n={}))oa.call(n,t)&&sa(e,t,n[t]);if(aa)for(var r=0,a=aa(n);r<a.length;r++){t=a[r];ia.call(n,t)&&sa(e,t,n[t])}return e},ua=function(e,n){return ta(e,ra(n))},ca=function(e,n,t){return new Promise((function(r,a){var o=function(e){try{s(t.next(e))}catch(n){a(n)}},i=function(e){try{s(t.throw(e))}catch(n){a(n)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(o,i)};s((t=t.apply(e,n)).next())}))},da="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Kr:Kr.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function pa(e){if("object"!==typeof e||null===e)return!1;var n=Object.getPrototypeOf(e);if(null===n)return!0;for(var t=n;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return n===t}function fa(e,n){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(n){var a=n.apply(void 0,t);if(!a)throw new Error("prepareAction did not return an object");return la(la({type:e,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:e,payload:t[0]}}return t.toString=function(){return""+e},t.type=e,t.match=function(n){return n.type===e},t}var ha=function(e){function n(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=e.apply(this,t)||this;return Object.setPrototypeOf(a,n.prototype),a}return Zr(n,e),Object.defineProperty(n,Symbol.species,{get:function(){return n},enumerable:!1,configurable:!0}),n.prototype.concat=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.prototype.concat.apply(this,n)},n.prototype.prepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length&&Array.isArray(e[0])?new(n.bind.apply(n,ea([void 0],e[0].concat(this)))):new(n.bind.apply(n,ea([void 0],e.concat(this))))},n}(Array),ma=function(e){function n(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=e.apply(this,t)||this;return Object.setPrototypeOf(a,n.prototype),a}return Zr(n,e),Object.defineProperty(n,Symbol.species,{get:function(){return n},enumerable:!1,configurable:!0}),n.prototype.concat=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.prototype.concat.apply(this,n)},n.prototype.prepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length&&Array.isArray(e[0])?new(n.bind.apply(n,ea([void 0],e[0].concat(this)))):new(n.bind.apply(n,ea([void 0],e.concat(this))))},n}(Array);function ga(e){return Dt(e)?Rr(e,(function(){})):e}function ya(){return function(e){return function(e){void 0===e&&(e={});var n=e.thunk,t=void 0===n||n,r=(e.immutableCheck,e.serializableCheck,e.actionCreatorCheck,new ha);t&&(!function(e){return"boolean"===typeof e}(t)?r.push(Jr.withExtraArgument(t.extraArgument)):r.push(Jr));0;return r}(e)}}function ba(e){var n,t={},r=[],a={addCase:function(e,n){var r="string"===typeof e?e:e.type;if(!r)throw new Error("`builder.addCase` cannot be called with an empty action type");if(r in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[r]=n,a},addMatcher:function(e,n){return r.push({matcher:e,reducer:n}),a},addDefaultCase:function(e){return n=e,a}};return e(a),[t,r,n]}function va(e){var n=e.name;if(!n)throw new Error("`name` is a required option for createSlice");var t,r="function"==typeof e.initialState?e.initialState:ga(e.initialState),a=e.reducers||{},o=Object.keys(a),i={},s={},l={};function u(){var n="function"===typeof e.extraReducers?ba(e.extraReducers):[e.extraReducers],t=n[0],a=void 0===t?{}:t,o=n[1],i=void 0===o?[]:o,l=n[2],u=void 0===l?void 0:l,c=la(la({},a),s);return function(e,n,t,r){void 0===t&&(t=[]);var a,o="function"===typeof n?ba(n):[n,t,r],i=o[0],s=o[1],l=o[2];if(function(e){return"function"===typeof e}(e))a=function(){return ga(e())};else{var u=ga(e);a=function(){return u}}function c(e,n){void 0===e&&(e=a());var t=ea([i[n.type]],s.filter((function(e){return(0,e.matcher)(n)})).map((function(e){return e.reducer})));return 0===t.filter((function(e){return!!e})).length&&(t=[l]),t.reduce((function(e,t){if(t){var r;if(Lt(e))return void 0===(r=t(e,n))?e:r;if(Dt(e))return Rr(e,(function(e){return t(e,n)}));if(void 0===(r=t(e,n))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return c.getInitialState=a,c}(r,(function(e){for(var n in c)e.addCase(n,c[n]);for(var t=0,r=i;t<r.length;t++){var a=r[t];e.addMatcher(a.matcher,a.reducer)}u&&e.addDefaultCase(u)}))}return o.forEach((function(e){var t,r,o=a[e],u=n+"/"+e;"reducer"in o?(t=o.reducer,r=o.prepare):t=o,i[e]=t,s[u]=t,l[e]=r?fa(u,r):fa(u)})),{name:n,reducer:function(e,n){return t||(t=u()),t(e,n)},actions:l,caseReducers:i,getInitialState:function(){return t||(t=u()),t.getInitialState()}}}var wa=function(e){void 0===e&&(e=21);for(var n="",t=e;t--;)n+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return n},Sa=["name","message","stack","code"],ka=function(e,n){this.payload=e,this.meta=n},xa=function(e,n){this.payload=e,this.meta=n},Ia=function(e){if("object"===typeof e&&null!==e){for(var n={},t=0,r=Sa;t<r.length;t++){var a=r[t];"string"===typeof e[a]&&(n[a]=e[a])}return n}return{message:String(e)}};!function(){function e(e,n,t){var r=fa(e+"/fulfilled",(function(e,n,t,r){return{payload:e,meta:ua(la({},r||{}),{arg:t,requestId:n,requestStatus:"fulfilled"})}})),a=fa(e+"/pending",(function(e,n,t){return{payload:void 0,meta:ua(la({},t||{}),{arg:n,requestId:e,requestStatus:"pending"})}})),o=fa(e+"/rejected",(function(e,n,r,a,o){return{payload:a,error:(t&&t.serializeError||Ia)(e||"Rejected"),meta:ua(la({},o||{}),{arg:r,requestId:n,rejectedWithValue:!!a,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),i="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(s,l,u){var c,d=(null==t?void 0:t.idGenerator)?t.idGenerator(e):wa(),p=new i;function f(e){c=e,p.abort()}var h=function(){return ca(this,null,(function(){var i,h,m,g,y,b;return Qr(this,(function(v){switch(v.label){case 0:return v.trys.push([0,4,,5]),g=null==(i=null==t?void 0:t.condition)?void 0:i.call(t,e,{getState:l,extra:u}),null===(w=g)||"object"!==typeof w||"function"!==typeof w.then?[3,2]:[4,g];case 1:g=v.sent(),v.label=2;case 2:if(!1===g||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,y=new Promise((function(e,n){return p.signal.addEventListener("abort",(function(){return n({name:"AbortError",message:c||"Aborted"})}))})),s(a(d,e,null==(h=null==t?void 0:t.getPendingMeta)?void 0:h.call(t,{requestId:d,arg:e},{getState:l,extra:u}))),[4,Promise.race([y,Promise.resolve(n(e,{dispatch:s,getState:l,extra:u,requestId:d,signal:p.signal,abort:f,rejectWithValue:function(e,n){return new ka(e,n)},fulfillWithValue:function(e,n){return new xa(e,n)}})).then((function(n){if(n instanceof ka)throw n;return n instanceof xa?r(n.payload,d,e,n.meta):r(n,d,e)}))])];case 3:return m=v.sent(),[3,5];case 4:return b=v.sent(),m=b instanceof ka?o(null,d,e,b.payload,b.meta):o(b,d,e),[3,5];case 5:return t&&!t.dispatchConditionRejection&&o.match(m)&&m.meta.condition||s(m),[2,m]}var w}))}))}();return Object.assign(h,{abort:f,requestId:d,arg:e,unwrap:function(){return h.then(_a)}})}}),{pending:a,rejected:o,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}();function _a(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var Aa="listenerMiddleware";fa(Aa+"/add"),fa(Aa+"/removeAll"),fa(Aa+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof t.g?t.g:globalThis);var Ta,Ea=function(e){return function(n){setTimeout(n,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Ea(10);gr();var Oa=t(248),Ca=t(327),Na=t(164);let Ma=function(e){e()};const Pa=()=>Ma,Fa=Symbol.for("react-redux-context"),Ra="undefined"!==typeof globalThis?globalThis:{};function La(){var n;if(!e.createContext)return{};const t=null!=(n=Ra[Fa])?n:Ra[Fa]=new Map;let r=t.get(e.createContext);return r||(r=e.createContext(null),t.set(e.createContext,r)),r}const Da=La();function ja(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Da;return function(){return(0,e.useContext)(n)}}const za=ja();let Ba=()=>{throw new Error("uSES not initialized!")};const Ua=(e,n)=>e===n;function Wa(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Da;const t=n===Da?za:ja(n);return function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{equalityFn:a=Ua,stabilityCheck:o,noopCheck:i}="function"===typeof r?{equalityFn:r}:r;const{store:s,subscription:l,getServerState:u,stabilityCheck:c,noopCheck:d}=t(),p=((0,e.useRef)(!0),(0,e.useCallback)({[n.name]:e=>n(e)}[n.name],[n,c,o])),f=Ba(l.addNestedSub,s.getState,u||s.getState,p,a);return(0,e.useDebugValue)(f),f}}const $a=Wa();const Va={notify(){},get:()=>[]};function Ga(e,n){let t,r=Va,a=0,o=!1;function i(){u.onStateChange&&u.onStateChange()}function s(){a++,t||(t=n?n.addNestedSub(i):e.subscribe(i),r=function(){const e=Pa();let n=null,t=null;return{clear(){n=null,t=null},notify(){e((()=>{let e=n;for(;e;)e.callback(),e=e.next}))},get(){let e=[],t=n;for(;t;)e.push(t),t=t.next;return e},subscribe(e){let r=!0,a=t={callback:e,next:null,prev:t};return a.prev?a.prev.next=a:n=a,function(){r&&null!==n&&(r=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:n=a.next)}}}}())}function l(){a--,t&&0===a&&(t(),t=void 0,r.clear(),r=Va)}const u={addNestedSub:function(e){s();const n=r.subscribe(e);let t=!1;return()=>{t||(t=!0,n(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return o},trySubscribe:function(){o||(o=!0,s())},tryUnsubscribe:function(){o&&(o=!1,l())},getListeners:()=>r};return u}const Ha=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?e.useLayoutEffect:e.useEffect;let Ka=null;const qa=function(n){let{store:t,context:r,children:a,serverState:o,stabilityCheck:i="once",noopCheck:s="once"}=n;const l=e.useMemo((()=>{const e=Ga(t);return{store:t,subscription:e,getServerState:o?()=>o:void 0,stabilityCheck:i,noopCheck:s}}),[t,o,i,s]),u=e.useMemo((()=>t.getState()),[t]);Ha((()=>{const{subscription:e}=l;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==t.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}}),[l,u]);const c=r||Da;return e.createElement(c.Provider,{value:l},a)};function Ya(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Da;const n=e===Da?za:ja(e);return function(){const{store:e}=n();return e}}const Xa=Ya();function Ja(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Da;const n=e===Da?Xa:Ya(e);return function(){return n().dispatch}}const Za=Ja();var Qa;(e=>{Ba=e})(Ca.useSyncExternalStoreWithSelector),(e=>{Ka=e})(Oa.useSyncExternalStore),Qa=Na.unstable_batchedUpdates,Ma=Qa;const eo=["pd","wasm"],no={url:null,filepath:null,arrayBuffer:null,focusOn:"local"},to=va({name:"buildInput",initialState:no,reducers:{setUrl:(e,n)=>{e.url=n.payload,e.focusOn="url"},fetchUrlError:(e,n)=>{},fetchUrlSuccess:(e,n)=>{e.filepath=null,e.url=n.payload.url,e.arrayBuffer=n.payload.arrayBuffer},setLocalFile:(e,n)=>{e.url=null,e.filepath=n.payload.filepath,e.arrayBuffer=n.payload.arrayBuffer,e.focusOn="local"},setFocusOn:(e,n)=>{e.focusOn=n.payload},clear:()=>no}}),ro=["wav","app"],ao={format:null,codeTarget:"JavaScript",previewDurationSeconds:30},oo=va({name:"buildOutput",initialState:ao,reducers:{setFormat:(e,n)=>{e.format=n.payload},setCodeTarget:(e,n)=>{e.codeTarget=n.payload},setPreviewDurationSeconds:(e,n)=>{e.previewDurationSeconds=n.payload},clear:()=>ao},extraReducers(e){e.addCase(to.actions.setFocusOn,(e=>{e.format=null}))}});let io=null;const so=/\\(\$\d+)/g,lo=/\\\\\\,/g,uo=/\\\\\\;/g,co=e=>{try{return po(e)}catch(n){if(!(n instanceof go))throw n}try{return mo(e)}catch(n){if(!(n instanceof go))throw n}throw new go("Not a valid arg ".concat(e))},po=e=>{if(yo(e))return e;if(bo(e)){const n=Number(e);if(isNaN(n))throw new go("Not a valid number arg ".concat(e));return n}throw new go("Not a valid number arg ".concat(e))},fo=e=>{if(void 0===e)throw new go("Received undefined");const n=parseInt(e,10);if(isNaN(n))throw new go("Invalid int received");return n},ho=e=>{const n=po(e);if(0===n||1===n)return n;throw new go("Should be 0 or 1")},mo=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!bo(e))throw new go("Not a valid string arg ".concat(e));if(null!==n&&e===n)return"";let t,r=e.replace(lo,",").replace(uo,";");for(;t=so.exec(r);)r=r.replace(t[0],t[1]);return r};class go extends Error{}const yo=e=>Number.isFinite(e),bo=e=>"string"===typeof e,vo={floatatom:"floatatom",symbolatom:"symbolatom",listbox:"listbox",bng:"bng",tgl:"tgl",nbx:"nbx",vsl:"vsl",hsl:"hsl",vradio:"vradio",hradio:"hradio",vu:"vu",cnv:"cnv",msg:"msg"},wo=(e,n)=>{let{tokens:t}=n;const r=mo(t[2]),a=co(t[3]),o=fo(t[5]);return{id:e,args:[r,a,o%2],data:null,layout:{drawAs:["polygon","points","bezier"][o>>>1]}}},So=(e,n)=>{let{tokens:t}=n;const r=t[4],a=[];if("pd"!==r&&"graph"!==r&&"table"!==r)throw new Error("unknown canvasType : ".concat(r));return"pd"===r&&void 0!==t[5]&&a.push(mo(t[5])),{id:e,type:r,patchId:mo(t[1]),nodeClass:"subpatch",args:a,layout:Oo(t)}},ko=(e,n)=>{let{tokens:t}=n;return{id:e,args:[],type:"array",nodeClass:"array",arrayId:mo(t[1]),layout:{}}},xo=e=>{const n=e[1];let t="";switch(n){case"text":return{type:"text",args:[e.slice(4).join(" ")],nodeClass:"text"};case"obj":return t=mo(e[4]),{type:t,args:e.slice(5),nodeClass:Object.keys(vo).includes(t)?"control":"generic"};default:return t=mo(n),{type:t,args:e.slice(4),nodeClass:Object.keys(vo).includes(t)?"control":"generic"}}},Io=e=>{let{tokens:n}=e;return{source:{nodeId:mo(n[2]),portletId:fo(n[3])},sink:{nodeId:mo(n[4]),portletId:fo(n[5])}}},_o=(e,n,t,r)=>({id:e,type:n,args:t.map(co),nodeClass:"generic",layout:r}),Ao=(e,n,t)=>({id:e,type:"text",args:n.map(co),nodeClass:"text",layout:t}),To=(e,n,t,r)=>{const a={id:e,type:n,args:t,nodeClass:"control",layout:r};if("floatatom"===a.type||"symbolatom"===a.type||"listbox"===a.type)a.layout={...a.layout,widthInChars:po(t[0]),labelPos:po(t[3]),label:mo(t[4],"-")},a.args=[po(t[1]),po(t[2]),mo(t[5],"-"),mo(t[6],"-")];else if("msg"===a.type)a.args=a.args.map(co);else if("bng"===a.type)a.layout={...a.layout,size:po(t[0]),hold:po(t[1]),interrupt:po(t[2]),label:mo(t[6],"empty"),labelX:po(t[7]),labelY:po(t[8]),labelFont:t[9],labelFontSize:po(t[10]),bgColor:t[11],fgColor:t[12],labelColor:t[13]},a.args=[ho(t[3]),mo(t[5],"empty"),mo(t[4],"empty")];else if("tgl"===a.type)a.layout={...a.layout,size:po(t[0]),label:mo(t[4],"empty"),labelX:po(t[5]),labelY:po(t[6]),labelFont:t[7],labelFontSize:po(t[8]),bgColor:t[9],fgColor:t[10],labelColor:t[11]},a.args=[po(t[13]),ho(t[1]),po(t[12]),mo(t[3],"empty"),mo(t[2],"empty")];else if("nbx"===a.type)a.layout={...a.layout,widthInChars:po(t[0]),height:po(t[1]),log:po(t[4]),label:mo(t[8],"empty"),labelX:po(t[9]),labelY:po(t[10]),labelFont:t[11],labelFontSize:po(t[12]),bgColor:t[13],fgColor:t[14],labelColor:t[15],logHeight:t[17]},a.args=[po(t[2]),po(t[3]),ho(t[5]),po(t[16]),mo(t[7],"empty"),mo(t[6],"empty")];else if("vsl"===a.type||"hsl"===a.type){a.layout={...a.layout,width:po(t[0]),height:po(t[1]),log:po(t[4]),label:mo(t[8],"empty"),labelX:po(t[9]),labelY:po(t[10]),labelFont:t[11],labelFontSize:po(t[12]),bgColor:t[13],fgColor:t[14],labelColor:t[15],steadyOnClick:t[17]};const e=po(t[2]),n=po(t[3]),r=ho(t[4]),o=po(t[16]),i="hsl"===a.type?a.layout.width:a.layout.height;let s=0;if(r){const t=Math.log(n/e)/(i-1);s=e*Math.exp(t*o*.01)}else s=e+(n-e)*o/(100*(i-1));a.args=[e,n,ho(t[5]),s,mo(t[7],"empty"),mo(t[6],"empty")]}else if("vradio"===a.type||"hradio"===a.type)a.layout={...a.layout,size:po(t[0]),label:mo(t[6],"empty"),labelX:po(t[7]),labelY:po(t[8]),labelFont:t[9],labelFontSize:po(t[10]),bgColor:t[11],fgColor:t[12],labelColor:t[13]},a.args=[po(t[3]),ho(t[2]),po(t[14]),mo(t[5],"empty"),mo(t[4],"empty"),ho(t[2])];else if("vu"===a.type)a.layout={...a.layout,width:po(t[0]),height:po(t[1]),label:mo(t[3],"empty"),labelX:po(t[4]),labelY:po(t[5]),labelFont:t[6],labelFontSize:po(t[7]),bgColor:t[8],labelColor:t[9],log:po(t[10])},a.args=[mo(t[2],"empty"),mo(t[11])];else{if("cnv"!==a.type)throw new Error("Unexpected control node ".concat(a.type));a.layout={...a.layout,size:po(t[0]),width:po(t[1]),height:po(t[2]),label:mo(t[5],"empty"),labelX:po(t[6]),labelY:po(t[7]),labelFont:t[8],labelFontSize:po(t[9]),bgColor:t[10],labelColor:t[11]},a.args=[mo(t[4],"empty"),mo(t[3],"empty"),mo(t[12])]}return a};function Eo(e,n){if(n){const t=n;for(;t.length;){"f"===t.shift()&&(e.layout.width=po(t.shift()))}}return e}const Oo=e=>({x:fo(e[2]),y:fo(e[3])}),Co=/(?<comma>((?<!\\)\s*)((?<!\\\\)\\,)((?<!\\)\s*))|(?<semi>((?<!\\)\s*)((?<!\\\\)\\;)((?<!\\)\s*))|((?<!\\)\s)+|\r\n?|\n/,No=/,(?!\\)/,Mo=/(#((.|\r|\n)*?)[^\\\\])\r{0,1}\n{0,1};\r{0,1}(\n|$)/gi,Po=e=>e.split("").reverse().join("");const Fo=e=>{const n=Array.from(e.matchAll(new RegExp(Co,"g"))),t=[];n.forEach(((r,a)=>{const o=0===a?0:n[a-1].index+n[a-1][0].length,i=r.index,s=e.slice(o,i);s.length&&t.push(s),r[1]?t.push(","):r[5]&&t.push(";")}));const r=n.slice(-1)[0];if(r){const n=e.slice(r.index+r[0].length);n.length&&t.push(n)}return t},Ro=["obj","floatatom","symbolatom","listbox","msg","text"],Lo=()=>"".concat(++Lo.counter);Lo.counter=-1;const Do=()=>"".concat(++Do.counter);Do.counter=-1;const jo=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return t.every(((n,t)=>n===e[t]))};var zo=e=>{let n=(e=>{const n=[];Mo.lastIndex=0;let t=null;for(;t=Mo.exec(e);){const r=Po(t[1]).split(No).reverse().map(Po),a=e.slice(0,t.index).split("\n").length-1;n.push({tokens:Fo(r[0]),lineAfterComma:r[1]?Fo(r[1]):void 0,lineIndex:a})}return n})(e);const t={pd:{rootPatchId:"0",patches:{},arrays:{}},errors:[],warnings:[],tokenizedLines:n,patchTokenizedLinesMap:{}};return Bo(t,!0),Object.keys(t.pd.patches).forEach((e=>{Wo(t,e),$o(t,e),Uo(t,e),t.patchTokenizedLinesMap[e].length&&t.patchTokenizedLinesMap[e].forEach((e=>{let{tokens:n,lineIndex:r}=e;t.errors.push({message:'"'.concat(n[0]," ").concat(n[1],'" unexpected chunk'),lineIndex:r})}))})),t.errors.length?{status:1,warnings:t.warnings,errors:t.errors}:{status:0,warnings:t.warnings,pd:t.pd}};const Bo=(e,n)=>{const t=Lo(),r=[];let a=null,o=null,i=-1,s=!0,l=e.tokenizedLines[0]?e.tokenizedLines[0].lineIndex:-1;for(;e.tokenizedLines.length&&s;){const{tokens:n,lineIndex:l}=e.tokenizedLines[0];jo(n,"#N","struct")||jo(n,"#X","declare")||jo(n,"#X","scalar")||jo(n,"#X","f")?(e.warnings.push({message:'"'.concat(n[0]," ").concat(n[1],'" chunk is not supported'),lineIndex:l}),e.tokenizedLines.shift()):(i++,Vo(e,l,(()=>{if(jo(n,"#N","canvas")&&0===i)a=e.tokenizedLines.shift();else if(jo(n,"#N","canvas"))Bo(e,!1);else if(jo(n,"#X","obj",n[2],n[3],"table")){const n=e.tokenizedLines.shift().tokens;e.tokenizedLines=[{tokens:["#N","canvas","0","0","100","100","(subpatch)","0"],lineIndex:l},{tokens:["#N","canvas","0","0","100","100","(subpatch)","0"],lineIndex:l},{tokens:["#X","array",mo(n[5]),n[6]||100..toString(),"float","0"],lineIndex:l},{tokens:["#X","restore","0","0","graph"],lineIndex:l},{tokens:["#X","restore",n[2],n[3],"table"],lineIndex:l},...e.tokenizedLines],Bo(e,!1)}else jo(n,"#X","coords")?o=e.tokenizedLines.shift():jo(n,"#X","restore")?(e.tokenizedLines[0].tokens=["PATCH",t,...e.tokenizedLines[0].tokens.slice(2)],s=!1):r.push(e.tokenizedLines.shift())})))}null!==a?(n&&(e.pd.rootPatchId=t),e.pd.patches[t]=((e,n,t,r)=>{const{tokens:a}=t,o=r?r.tokens:null;let i={windowX:fo(a[2]),windowY:fo(a[3]),windowWidth:fo(a[4]),windowHeight:fo(a[5])};if("undefined"!==typeof a[7]&&(i.openOnLoad=ho(a[7])),o&&"undefined"!==typeof o[8]){const e=po(o[8]);i.graphOnParent=e>0?1:0,1===i.graphOnParent&&(i={...i,hideObjectNameAndArguments:2===e?1:0,viewportX:o[9]?fo(o[9]):0,viewportY:o[10]?fo(o[10]):0,viewportWidth:fo(o[6]),viewportHeight:fo(o[7])})}return{id:e,isRoot:n,layout:i,args:[],nodes:{},connections:[],inlets:[],outlets:[]}})(t,n,a,o),e.patchTokenizedLinesMap[t]=r):e.errors.push({message:"Parsing failed #canvas missing",lineIndex:l})},Uo=(e,n)=>{const t=e.pd.patches[n],r=(e,n)=>parseFloat(e.id)-parseFloat(n.id),a=(e,n)=>e.layout.x-n.layout.x,o=Object.values(t.nodes).filter((e=>["inlet","inlet~"].includes(e.type))),i=o.every((e=>!!e.layout))?a:r;o.sort(i);const s=Object.values(t.nodes).filter((e=>["outlet","outlet~"].includes(e.type))),l=s.every((e=>!!e.layout))?a:r;s.sort(l),e.pd.patches[n]={...t,inlets:o.map((e=>e.id)),outlets:s.map((e=>e.id))}},Wo=(e,n)=>{const t=e.patchTokenizedLinesMap[n],r=[];let a=null;for(;t.length;){const{tokens:n,lineIndex:o}=t[0];Vo(e,o,(()=>{if(jo(n,"#X","array"))a=wo(Do(),t.shift()),e.pd.arrays[a.id]=a,r.push({tokens:["ARRAY",a.id],lineAfterComma:[],lineIndex:o});else if(jo(n,"#A")){if(!a)throw new Error("line ".concat(o,": Unsupported data chunk #A."));if(0===a.args[2])throw new Error("got array data for an array that doesn't save contents.");const e=a.data||[];a.data=e;const r=po(n[1]);n.slice(2).forEach(((n,t)=>{const a=po(n);Number.isFinite(a)&&(e[r+t]=a)})),t.shift()}else r.push(t.shift())}))}e.patchTokenizedLinesMap[n]=r},$o=(e,n)=>{const t=e.pd.patches[n],r=e.patchTokenizedLinesMap[n],a=[];let o=-1;const i=()=>"".concat(++o);for(;r.length;){const{tokens:n,lineIndex:o}=r[0];Vo(e,o,(()=>{let e=null;if(jo(n,"PATCH"))e=So(i(),r.shift());else if(jo(n,"ARRAY"))e=ko(i(),r.shift());else if(Ro.some((e=>jo(n,"#X",e)))){const n=r.shift(),{nodeClass:t,type:a,args:o}=xo(n.tokens),s=Oo(n.tokens);e="control"===t?To(i(),a,o,s):"text"===t?Ao(i(),o,s):_o(i(),a,o,s),e=Eo(e,n.lineAfterComma)}e?t.nodes[e.id]=e:jo(n,"#X","connect")?t.connections.push(Io(r.shift())):a.push(r.shift())}))}e.patchTokenizedLinesMap[n]=a},Vo=(e,n,t)=>{try{t()}catch(r){if(!(r instanceof go))throw r;e.errors.push({message:r.message,lineIndex:n})}},Go=e=>async n=>{let t=null;try{t=await e(n)}catch(a){if(a instanceof Ho)return{status:1,unknownNodeType:n};throw a}const r=zo(t);return 0===r.status?{status:0,pd:r.pd,parsingWarnings:r.warnings}:{status:1,parsingErrors:r.errors,parsingWarnings:r.warnings}};class Ho extends Error{}const Ko=(e,n)=>{const t=e[n];if(!t)throw new Error("no artefact was generated for ".concat(n));return t},qo=e=>(new TextDecoder).decode(e);var Yo="0.1.0";const Xo=e=>{let{variableNamesReadOnly:n,precompiledCode:{dependencies:t},settings:{audio:r,io:a,customMetadata:o}}=e;const i={},s=[...t.exports,...t.imports.map((e=>e.name))];return Object.entries(n.globals).forEach((e=>{let[n,t]=e;return Object.entries(t||{}).forEach((e=>{let[t,r]=e;s.includes(r)&&(i[n]||(i[n]={}),i[n][t]=r)}))})),{libVersion:Yo,customMetadata:o,settings:{audio:{...r,sampleRate:0,blockSize:0},io:a},compilation:{variableNamesIndex:{io:n.io,globals:i}}}},Jo=e=>{const n=[];for(let t=0;t<e;t++)n.push(t);return n},Zo=(e,n)=>{const t={};return e.forEach(((e,r)=>{const[a,o]=n(e,r);t[a]=o})),t},Qo=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];const r=n.find((e=>{let[n]=e;return n}));if(!r)throw new Error("no route found");return r[1]},ei=(e,n,t)=>ui({astType:"Var",name:n,type:e,value:void 0!==t?ci(t):void 0}),ni=(e,n,t)=>ui({astType:"ConstVar",name:n,type:e,value:ci(t)}),ti=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"void";return function(r){for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];return ui({astType:"Func",name:e,args:n,returnType:t,body:ii(r,...o)})}},ri=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"void";return function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return ui({astType:"Func",name:null,args:e,returnType:n,body:ii(t,...a)})}},ai=(e,n)=>ui({astType:"Class",name:e,members:n}),oi=e=>({astType:"Sequence",content:si(li(e,Jo(e.length-1).map((()=>"\n"))))}),ii=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return ui({astType:"Sequence",content:si(li(e,t))})},si=e=>{const n=e.flatMap((e=>"string"===typeof e?[e]:"number"===typeof e?[e.toString()]:null===e?[]:Array.isArray(e)?si(li(e,Jo(e.length-1).map((()=>"\n")))):"object"===typeof e&&"Sequence"===e.astType?e.content:[e])),[t,r]=n.reduce(((e,n)=>{let[t,r]=e;return"string"===typeof n?[t,r+n]:r.length?[[...t,r,n],""]:[[...t,n],""]}),[[],""]);return r.length&&t.push(r),t},li=(e,n)=>0===e.length?[]:e.slice(1).reduce(((e,t,r)=>e.concat([n[r],t])),[e[0]]),ui=e=>({...e}),ci=e=>"number"===typeof e?oi([e.toString()]):"string"===typeof e?oi([e]):e,di=(e,n)=>{const t=e[n];if(t)return t;throw new Error('Node "'.concat(n,'" not found in graph'))},pi=(e,n)=>{const t=e.inlets[n];if(t)return t;throw new Error('Inlet "'.concat(n,'" not found in node ').concat(e.id," of type ").concat(e.type))},fi=(e,n)=>{const t=e.outlets[n];if(t)return t;throw new Error('Outlet "'.concat(n,'" not found in node ').concat(e.id," of type ").concat(e.type))},hi=(e,n)=>e.sinks[n]||[],mi=(e,n)=>e.sources[n]||[],gi=(e,n)=>n.map((n=>di(e,n))),yi=(e,n,t)=>wi(n.sinks,fi,e,n,t),bi=(e,n)=>vi(e.sinks,fi,e,n),vi=(e,n,t,r)=>Object.entries(e).reduce(((e,a)=>{let[o,i]=a;const s={portletId:o,nodeId:t.id};return n(t,o).type===r||void 0===r?[...e,...i.map((e=>[s,e]))]:e}),[]),wi=(e,n,t,r,a)=>vi(e,n,r,a).reduce(((e,n)=>{let[t,r]=n;return e.includes(r.nodeId)?e:[...e,r.nodeId]}),[]).map((e=>di(t,e))),Si=(e,n,t)=>{const r=[];return n.forEach((n=>ki(r,[],e,n,t))),r},ki=(e,n,t,r,a)=>{if(a&&!a(r))return;const o=[...n,r.id];((e,n,t)=>wi(n.sources,pi,e,n,t))(t,r,"signal").forEach((r=>{-1===n.indexOf(r.id)&&ki(e,o,t,r,a)})),-1===e.indexOf(r.id)&&e.push(r.id)},xi=(e,n)=>{const t=[];return n.forEach((n=>{Ii(t,e,n)})),t},Ii=(e,n,t)=>{-1===e.indexOf(t.id)&&(e.push(t.id),yi(n,t,"message").forEach((t=>{Ii(e,n,t)})))},_i=(e,n)=>{const t={};return Object.entries(e).forEach((e=>{let[r,a]=e;const o=a.filter((e=>{let{nodeId:t}=e;return n.includes(t)}));o.length&&(t[r]=o)})),t},Ai=(e,n)=>{const t={};return Object.entries(e).forEach((e=>{let[r,a]=e;const o=a.filter((e=>{let{nodeId:t}=e;return n.includes(t)}));o.length&&(t[r]=o)})),t},Ti=function(e){return{id:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DUMMY",args:{},sources:{},sinks:{},inlets:{},outlets:{}}},Ei=(e,n)=>e.portletId===n.portletId&&e.nodeId===n.nodeId,Oi={Var:(e,n)=>"let ".concat(e.name).concat(n?" = ".concat(n):""),ConstVar:(e,n)=>"const ".concat(e.name," = ").concat(n),Func:(e,n,t)=>"function ".concat(null!==e.name?e.name:"","(").concat(e.args.map(((e,t)=>n[t]?"".concat(e.name,"=").concat(n[t]):e.name)).join(", "),") {").concat(t,"}"),Class:()=>""},Ci={Var:(e,n)=>"let ".concat(e.name,": ").concat(e.type).concat(n?" = ".concat(n):""),ConstVar:(e,n)=>"const ".concat(e.name,": ").concat(e.type," = ").concat(n),Func:(e,n,t)=>"function ".concat(null!==e.name?e.name:"","(").concat(e.args.map(((e,t)=>"".concat(e.name,": ").concat(e.type).concat(n[t]?"=".concat(n[t]):""))).join(", "),"): ").concat(e.returnType," {").concat(t,"}"),Class:e=>"class ".concat(e.name," {\n").concat(e.members.map((e=>"".concat(e.name,": ").concat(e.type))).join("\n"),"\n}")},Ni=(e,n)=>{const t=e[n];if(!t)throw new Error("node [".concat(n,"] is not implemented"));return{dependencies:[],...t}},Mi=e=>{const n=Object.values(e).filter((e=>!!e.isPullingSignal)),t=Object.values(e).filter((e=>!!e.isPushingMessages));return Array.from(new Set([...xi(e,t),...Si(e,n)]))},Pi=e=>Si(e,Fi(e)),Fi=e=>Object.values(e).filter((e=>!!e.isPullingSignal)),Ri=(e,n)=>gi(e.graph,n.traversal).reduce(((n,t)=>{if(!ji(e,t)||yi(e.graph,t,"signal").every((n=>ji(e,n))))return n;let r=!0;const a={outNodesIds:[t.id],traversal:Si(e.graph,[t],(n=>(r=r&&ji(e,n),r)))};return r?[...n,a]:n}),[]),Li=(e,n)=>gi(e,n.outNodesIds).flatMap((e=>bi(e,"signal"))),Di=(e,n)=>e.filter((e=>!n.includes(e))),ji=(e,n)=>{let{precompiledCodeAssigner:t}=e;const r=t.nodes[n.id],a=t.nodeImplementations[r.nodeType];return!!a.nodeImplementation.flags&&!!a.nodeImplementation.flags.isPureFunction},zi=(e,n)=>{let{precompiledCodeAssigner:t}=e;const r=bi(n,"signal").map((e=>{let[n,t]=e;return t})).reduce(((e,n)=>e.every((e=>!Ei(e,n)))?[...e,n]:e),[]),a=t.nodes[n.id],o=t.nodeImplementations[a.nodeType];return!!o.nodeImplementation.flags&&!!o.nodeImplementation.flags.isDspInline&&1===r.length};var Bi,Ui,Wi,$i,Vi,Gi,Hi;var Ki=e=>{let{precompiledCode:n}=e;return n.dependencies.ast},qi=e=>{let{precompiledCode:{nodeImplementations:n}}=e;return oi(Object.values(n).map((e=>[e.stateClass,e.core])))},Yi=e=>{let{precompiledCode:{graph:n,nodes:t,nodeImplementations:a}}=e;return oi([n.fullTraversal.reduce(((e,n)=>{const o=t[n],i=a[o.nodeType];if(o.state){if(!i.stateClass)throw new Error('Node "'.concat(n,'" of type ').concat(o.nodeType," has a state but no state class"));return[...e,ni(i.stateClass.name,o.state.name,ii(Bi||(Bi=r(["{\n                                ","\n                            }"])),Object.entries(o.state.initialization).map((e=>{let[n,t]=e;return ii(Ui||(Ui=r(["",": ",","])),n,t)}))))]}return e}),[])])},Xi=e=>{let{precompiledCode:{graph:n,nodes:t}}=e;return oi([n.fullTraversal.map((e=>t[e].initialization))])},Ji=e=>{let{globals:{msg:n},precompiledCode:{io:t}}=e;return oi(Object.values(t.messageReceivers).map((e=>Object.values(e).map((e=>ti(e.functionName,[ei(n.Message,"m")],"void")(Wi||(Wi=r(["\n                    ","(m)\n                "])),e.getSinkFunctionName()))))))},Zi=(e,n)=>{let{precompiledCode:t}=e;return oi(Object.entries(t.io.messageSenders).map((e=>{let[t,r]=e;return Object.entries(r).map((e=>{let[r,a]=e;return n(a.functionName,t,r)}))})))},Qi=e=>{let{globals:{msg:n},precompiledCode:{graph:t,nodes:a},settings:{debug:o}}=e;return oi([t.fullTraversal.map((e=>[a[e],e])).map((e=>{let[t,a]=e;return[Object.values(t.signalOuts).map((e=>ei("Float",e,"0"))),Object.entries(t.messageReceivers).map((e=>{let[t,i]=e;return ti(i.name,i.args,i.returnType)($i||($i=r(["\n                            ","\n                            throw new Error('Node \"",'", inlet "',"\", unsupported message : ' + ","(",")",")\n                        "])),i.body,a,t,n.display,i.args[0].name,o?" + '\\nDEBUG : remember, you must return from message receiver'":"")}))]})),t.fullTraversal.flatMap((e=>Object.values(a[e].messageSenders))).filter((e=>{let{sinkFunctionNames:n}=e;return n.length>0})).map((e=>{let{messageSenderName:t,sinkFunctionNames:a}=e;return ti(t,[ei(n.Message,"m")],"void")(Vi||(Vi=r(["\n                        ","\n                    "])),a.map((e=>"".concat(e,"(m)"))))}))])},es=e=>{let{globals:{core:n,commons:t},precompiledCode:{nodes:a,graph:{hotDspGroup:o,coldDspGroups:i}}}=e;return ii(Gi||(Gi=r(["\n        for ("," = 0; "," < ","; ","++) {\n            ","(",")\n            ","\n            ","++\n        }\n    "])),n.IT_FRAME,n.IT_FRAME,n.BLOCK_SIZE,n.IT_FRAME,t._emitFrame,n.FRAME,o.traversal.map((e=>[...Object.entries(a[e].dsp.inlets).filter((n=>{let[t]=n;return void 0===(r=i,a={nodeId:e,portletId:t},Object.values(r).find((e=>{let{sinkConnections:n}=e;return n.find((e=>{let[n,t]=e;return Ei(t,a)}))})));var r,a})).map((e=>{let[n,t]=e;return t})),a[e].dsp.loop])),n.FRAME)},ns=e=>{let{globals:{msg:n},precompiledCode:{graph:t}}=e;return oi(Object.values(t.coldDspGroups).map((e=>{let{functionName:t}=e;return"".concat(t,"(").concat(n.EMPTY_MESSAGE,")")})))},ts=e=>{let{globals:{msg:n},precompiledCode:{graph:{coldDspGroups:t},nodes:a}}=e;return oi(Object.values(t).map((e=>{let{dspGroup:t,sinkConnections:o,functionName:i}=e;return ti(i,[ei(n.Message,"m")],"void")(Hi||(Hi=r(["\n                    ","\n                    ","\n                "])),t.traversal.map((e=>a[e].dsp.loop)),o.filter((e=>{let[n,t]=e;return t.portletId in a[t.nodeId].dsp.inlets})).map((e=>{let[n,t]=e;return a[t.nodeId].dsp.inlets[t.portletId]})))})))},rs=(e,n,t)=>{let{precompiledCode:{dependencies:r}}=e;return oi([r.imports.map(n),r.exports.map(t)])};const as=(e,n)=>{if("string"===typeof n)return n;if("Var"===n.astType)return n.value?e.Var(n,as(e,n.value)):e.Var(n);if("ConstVar"===n.astType){if(!n.value)throw new Error("ConstVar ".concat(n.name," must have an initial value"));return e.ConstVar(n,as(e,n.value))}if("Func"===n.astType)return e.Func(n,n.args.map((n=>n.value?as(e,n.value):null)),as(e,n.body));if("Class"===n.astType)return e.Class(n);if("Sequence"===n.astType)return n.content.map((n=>as(e,n))).join("");throw new Error("Unexpected element in AST ".concat(n))},os=(e,n,t)=>{const r=is(t);return{keys:[...r.keys,n],parents:[...r.parents,e]}},is=e=>e||{keys:[],parents:[]},ss=()=>{throw new Error("This Proxy is read-only.")},ls=(e,n,t)=>{if(!(n in e)){if(["toJSON","Symbol(Symbol.toStringTag)","constructor","$typeof","$$typeof","@@__IMMUTABLE_ITERABLE__@@","@@__IMMUTABLE_RECORD__@@","then"].includes(n))return!0;throw new Error("namespace".concat(t?" <".concat(t.keys.join("."),">"):""," doesn't know key \"").concat(String(n),'"'))}return!1},us=(e,n,t,r)=>{const a=r||{keys:[],parents:[]},o=us.ensureValue(n,e,t,a);if(r){const n=r.parents[r.parents.length-1],t=r.keys[r.keys.length-1];t in n&&!("LiteralDefaultNull"in e)||(n[t]=o)}return"Literal"in e||"LiteralDefaultNull"in e?o:new Proxy(o,{get:(n,r)=>{const i=String(r);let s;if("Index"in e)s=e.Index(i,t,a);else{if(!("Interface"in e))throw new Error("no builder");if(!(i in e.Interface))throw new Error('Interface has no entry "'.concat(String(i),'"'));s=e.Interface[i]}return us(s,i in o?o[i]:void 0,t,os(o,i,a))},set:ss})};us.ensureValue=(e,n,t,r,a)=>{if("Index"in n)return e||n.indexConstructor(t,is(r));if("Interface"in n){const o=e||{};return Object.entries(n.Interface).forEach((e=>{let[n,i]=e;o[n]=us.ensureValue(o[n],i,t,os(o,n,r),os(o,n,a))})),o}if("Literal"in n)return e||n.Literal(t,is(r));if("LiteralDefaultNull"in n)return a?e||null:e||n.LiteralDefaultNull(t,is(r));throw new Error("Invalid Assigner")},us.Interface=e=>({Interface:e}),us.Index=(e,n)=>({Index:e,indexConstructor:n||(()=>({}))}),us.Literal=e=>({Literal:e}),us.LiteralDefaultNull=e=>({LiteralDefaultNull:e});const cs=(e,n)=>new Proxy(e,{get:(e,t)=>{const r=String(t);if(!ls(e,r,n))return e[r]},set:(e,n,t)=>{const r=fs(String(n));if(e.hasOwnProperty(r))throw new Error('Key "'.concat(String(r),'" is protected and cannot be overwritten.'));return e[r]=t,t}}),ds=(e,n)=>new Proxy(e,{get:(e,t)=>{const r=String(t);if(ls(e,r,n))return;const a=e[r];return"object"===typeof a&&null!==a?ds(a,os(e,r,n)):a},set:ss}),ps=(e,n,t)=>new Proxy(e,{get:(e,r)=>{const a=fs(String(r));if(!ls(e,a,{parents:[e],keys:[n,t]}))return e[a]},set:ss}),fs=e=>{const n=/\$(.*)/.exec(e);return n?n[1]:e};var hs,ms,gs,ys,bs,vs,ws,Ss,ks,xs,Is,_s;const As="G",Ts="N",Es="NT",Os="IO",Cs="COLD",Ns=us.Interface({nodes:us.Index((e=>us.Interface({signalOuts:us.Index((n=>us.Literal((()=>Rs(Ts,e,"outs",n))))),messageSenders:us.Index((n=>us.Literal((()=>Rs(Ts,e,"snds",n))))),messageReceivers:us.Index((n=>us.Literal((()=>Rs(Ts,e,"rcvs",n))))),state:us.LiteralDefaultNull((()=>Rs(Ts,e,"state")))}))),nodeImplementations:us.Index(((e,n)=>{let{nodeImplementations:t}=n;const r=Ni(t,e),a=(r.flags?r.flags.alphaName:null)||e;return us.Index((e=>us.Literal((()=>Rs(Es,a,e)))))})),globals:us.Index((e=>us.Index((n=>["fs"].includes(e)?us.Literal((()=>Rs(As,e,n))):"core"===e?us.Literal((()=>n)):us.Literal((()=>Rs(As,e,n))))))),io:us.Interface({messageReceivers:us.Index((e=>us.Index((n=>us.Literal((()=>Rs(Os,"rcv",e,n))))))),messageSenders:us.Index((e=>us.Index((n=>us.Literal((()=>Rs(Os,"snd",e,n)))))))}),coldDspGroups:us.Index((e=>us.Literal((()=>Rs(Cs,e)))))}),Ms=e=>{let{input:n,variableNamesIndex:t}=e;return us(Ns,t,n)},Ps=us.Interface({graph:us.Literal(((e,n)=>({fullTraversal:[],hotDspGroup:{traversal:[],outNodesIds:[]},coldDspGroups:cs({},n)}))),nodeImplementations:us.Index(((e,n)=>{let{nodeImplementations:t}=n;return us.Literal((()=>({nodeImplementation:Ni(t,e),stateClass:null,core:null})))}),((e,n)=>cs({},n))),nodes:us.Index(((e,n)=>{let{graph:t}=n;return us.Literal((()=>({nodeType:di(t,e).type,messageReceivers:{},messageSenders:{},signalOuts:{},signalIns:{},initialization:ii(Is||(Is=r([""]))),dsp:{loop:ii(_s||(_s=r([""]))),inlets:{}},state:null})))}),((e,n)=>cs({},n))),dependencies:us.Literal((()=>({imports:[],exports:[],ast:oi([])}))),io:us.Interface({messageReceivers:us.Index((e=>us.Literal(((e,n)=>cs({},n)))),((e,n)=>cs({},n))),messageSenders:us.Index((e=>us.Literal(((e,n)=>cs({},n)))),((e,n)=>cs({},n)))})}),Fs=e=>{let{input:n,precompiledCode:t}=e;return us(Ps,t,n)},Rs=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.map(Ls).join("_")},Ls=e=>{if(!Ds.exec(e))throw new Error('Invalid variable name for code generation "'.concat(e,'"'));return e},Ds=/^[a-zA-Z0-9_]+$/;var js,zs,Bs,Us,Ws,$s,Vs,Gs;const Hs={namespace:"sked",code:(e,n,t)=>{let{ns:a}=e,{target:o}=t;const i=[];return"assemblyscript"===o&&i.push("\n                type ".concat(a.Callback," = (event: ").concat(a.Event,") => void\n                type ").concat(a.Id," = Int\n                type ").concat(a.Mode," = Int\n                type ").concat(a.Event," = string\n            ")),oi([...i,ni(a.Id,a.ID_NULL,"-1"),ni(a.Id,a._ID_COUNTER_INIT,"1"),ni("Int",a._MODE_WAIT,"0"),ni("Int",a._MODE_SUBSCRIBE,"1"),ai(a._Request,[ei(a.Id,"id"),ei(a.Mode,"mode"),ei(a.Callback,"callback")]),ai(a.Skeduler,[ei("Map<".concat(a.Event,", Array<").concat(a.Id,">>"),"events"),ei("Map<".concat(a.Id,", ").concat(a._Request,">"),"requests"),ei("boolean","isLoggingEvents"),ei("Set<".concat(a.Event,">"),"eventLog"),ei(a.Id,"idCounter")]),ti(a.create,[ei("boolean","isLoggingEvents")],a.Skeduler)(js||(js=r(["\n                return {\n                    eventLog: new Set(),\n                    events: new Map(),\n                    requests: new Map(),\n                    idCounter: ",",\n                    isLoggingEvents,\n                }\n            "])),a._ID_COUNTER_INIT),ti(a.wait,[ei(a.Skeduler,"skeduler"),ei(a.Event,"event"),ei(a.Callback,"callback")],a.Id)(zs||(zs=r(['\n                if (skeduler.isLoggingEvents === false) {\n                    throw new Error("Please activate skeduler\'s isLoggingEvents")\n                }\n\n                if (skeduler.eventLog.has(event)) {\n                    callback(event)\n                    return ',"\n                } else {\n                    return ","(skeduler, event, callback, ",")\n                }\n            "])),a.ID_NULL,a._createRequest,a._MODE_WAIT),ti(a.waitFuture,[ei(a.Skeduler,"skeduler"),ei(a.Event,"event"),ei(a.Callback,"callback")],a.Id)(Bs||(Bs=r(["\n                return ","(skeduler, event, callback, ",")\n            "])),a._createRequest,a._MODE_WAIT),ti(a.subscribe,[ei(a.Skeduler,"skeduler"),ei(a.Event,"event"),ei(a.Callback,"callback")],a.Id)(Us||(Us=r(["\n                return ","(skeduler, event, callback, ",")\n            "])),a._createRequest,a._MODE_SUBSCRIBE),ti(a.emit,[ei(a.Skeduler,"skeduler"),ei(a.Event,"event")],"void")(Ws||(Ws=r(["\n                if (skeduler.isLoggingEvents === true) {\n                    skeduler.eventLog.add(event)\n                }\n                if (skeduler.events.has(event)) {\n                    ","\n                    ","\n                    for (","; i < skedIds.length; i++) {\n                        if (skeduler.requests.has(skedIds[i])) {\n                            ","\n                            request.callback(event)\n                            if (request.mode === ",") {\n                                skeduler.requests.delete(request.id)\n                            } else {\n                                skedIdsStaying.push(request.id)\n                            }\n                        }\n                    }\n                    skeduler.events.set(event, skedIdsStaying)\n                }\n            "])),ni("Array<".concat(a.Id,">"),"skedIds","skeduler.events.get(event)"),ni("Array<".concat(a.Id,">"),"skedIdsStaying","[]"),ei("Int","i","0"),ni(a._Request,"request","skeduler.requests.get(skedIds[i])"),a._MODE_WAIT),ti(a.cancel,[ei(a.Skeduler,"skeduler"),ei(a.Id,"id")],"void")($s||($s=r(["\n                skeduler.requests.delete(id)\n            "]))),ti(a._createRequest,[ei(a.Skeduler,"skeduler"),ei(a.Event,"event"),ei(a.Callback,"callback"),ei(a.Mode,"mode")],a.Id)(Vs||(Vs=r(["\n                ","\n                ","\n                skeduler.requests.set(id, request)\n                if (!skeduler.events.has(event)) {\n                    skeduler.events.set(event, [id])    \n                } else {\n                    skeduler.events.get(event).push(id)\n                }\n                return id\n            "])),ni(a.Id,"id","".concat(a._nextId,"(skeduler)")),ni(a._Request,"request","{\n                    id, \n                    mode, \n                    callback,\n                }")),ti(a._nextId,[ei(a.Skeduler,"skeduler")],a.Id)(Gs||(Gs=r(["\n                return skeduler.idCounter++\n            "])))])}};var Ks,qs,Ys,Xs,Js,Zs,Qs,el;const nl="commons",tl={namespace:nl,code:(e,n,t)=>{let{ns:a}=e,{sked:o}=n;return oi([ni("Map<string, FloatArray>",a._ARRAYS,"new Map()"),ni(o.Skeduler,a._ARRAYS_SKEDULER,"".concat(o.create,"(false)")),ti(a.getArray,[ei("string","arrayName")],"FloatArray")(Ks||(Ks=r(["\n            if (!",".has(arrayName)) {\n                throw new Error('Unknown array ' + arrayName)\n            }\n            return ",".get(arrayName)\n        "])),a._ARRAYS,a._ARRAYS),ti(a.hasArray,[ei("string","arrayName")],"boolean")(qs||(qs=r(["\n            return ",".has(arrayName)\n        "])),a._ARRAYS),ti(a.setArray,[ei("string","arrayName"),ei("FloatArray","array")],"void")(Ys||(Ys=r(["\n            ",".set(arrayName, array)\n            ","(",", arrayName)\n        "])),a._ARRAYS,o.emit,a._ARRAYS_SKEDULER),ti(a.subscribeArrayChanges,[ei("string","arrayName"),ei(o.Callback,"callback")],o.Id)(Xs||(Xs=r(["\n            const id = ","(",", arrayName, callback)\n            if (",".has(arrayName)) {\n                callback(arrayName)\n            }\n            return id\n        "])),o.subscribe,a._ARRAYS_SKEDULER,a._ARRAYS),ti(a.cancelArrayChangesSubscription,[ei(o.Id,"id")],"void")(Js||(Js=r(["\n            ","(",", id)\n        "])),o.cancel,a._ARRAYS_SKEDULER),Object.entries(t.arrays).map((e=>{let[n,t]=e;return oi(["".concat(a.setArray,'("').concat(n,'", createFloatArray(').concat(t.length,"))"),"".concat(a.getArray,'("').concat(n,'").set(').concat(JSON.stringify(Array.from(t)),")")])}))])},exports:e=>{let{ns:n}=e;return[n.getArray,n.setArray]},dependencies:[Hs]},rl={namespace:nl,code:(e,n)=>{let{ns:t}=e,{sked:a}=n;return oi([ni(a.Skeduler,t._FRAME_SKEDULER,"".concat(a.create,"(false)")),ti(t._emitFrame,[ei("Int","frame")],"void")(Zs||(Zs=r(["\n            ","(",", frame.toString())\n        "])),a.emit,t._FRAME_SKEDULER),ti(t.waitFrame,[ei("Int","frame"),ei(a.Callback,"callback")],a.Id)(Qs||(Qs=r(["\n            return ","(",", frame.toString(), callback)\n        "])),a.waitFuture,t._FRAME_SKEDULER),ti(t.cancelWaitFrame,[ei(a.Id,"id")],"void")(el||(el=r(["\n            ","(",", id)\n        "])),a.cancel,t._FRAME_SKEDULER)])},dependencies:[Hs]};var al,ol,il,sl,ll,ul,cl,dl,pl,fl,hl,ml,gl,yl,bl,vl;const wl={namespace:"core",code:(e,n,t)=>{let{ns:a}=e,{target:o,audio:{bitDepth:i}}=t;const s=32===i?"f32":"f64",l=32===i?"Float32Array":"Float64Array",u=32===i?"getFloat32":"getFloat64",c=32===i?"setFloat32":"setFloat64",d={toInt:ti(a.toInt,[ei("Float","v")],"Int"),toFloat:ti(a.toFloat,[ei("Int","v")],"Float"),createFloatArray:ti(a.createFloatArray,[ei("Int","length")],"FloatArray"),setFloatDataView:ti(a.setFloatDataView,[ei("DataView","dataView"),ei("Int","position"),ei("Float","value")],"void"),getFloatDataView:ti(a.getFloatDataView,[ei("DataView","dataView"),ei("Int","position")],"Float")},p=[ei("Int",a.IT_FRAME,"0"),ei("Int",a.FRAME,"0"),ei("Int",a.BLOCK_SIZE,"0"),ei("Float",a.SAMPLE_RATE,"0"),ei("Float",a.NULL_SIGNAL,"0"),ei("FloatArray",a.INPUT,"createFloatArray(0)"),ei("FloatArray",a.OUTPUT,"createFloatArray(0)")];if("assemblyscript"===o)return oi(["\n                type FloatArray = ".concat(l,"\n                type Float = ").concat(s,"\n                type Int = ").concat("i32","\n                "),d.toInt(al||(al=r(["\n                    return ","(v)\n                "])),"i32"),d.toFloat(ol||(ol=r(["\n                    return ","(v)\n                "])),s),d.createFloatArray(il||(il=r(["\n                    return new ","(length)\n                "])),l),d.setFloatDataView(sl||(sl=r(["\n                    dataView.","(position, value)\n                "])),c),d.getFloatDataView(ll||(ll=r(["\n                    return dataView.","(position)\n                "])),u),ti(a.x_createListOfArrays,[],"FloatArray[]")(ul||(ul=r(["\n                    const arrays: FloatArray[] = []\n                    return arrays\n                "]))),ti(a.x_pushToListOfArrays,[ei("FloatArray[]","arrays"),ei("FloatArray","array")],"void")(cl||(cl=r(["\n                    arrays.push(array)\n                "]))),ti(a.x_getListOfArraysLength,[ei("FloatArray[]","arrays")],"Int")(dl||(dl=r(["\n                    return arrays.length\n                "]))),ti(a.x_getListOfArraysElem,[ei("FloatArray[]","arrays"),ei("Int","index")],"FloatArray")(pl||(pl=r(["\n                    return arrays[index]\n                "]))),ti(a.x_getInput,[],"FloatArray")(fl||(fl=r(["\n                    return ","\n                "])),a.INPUT),ti(a.x_getOutput,[],"FloatArray")(hl||(hl=r(["\n                    return ","\n                "])),a.OUTPUT),...p]);if("javascript"===o)return oi(["\n                const i32 = (v) => v\n                const f32 = i32\n                const f64 = i32\n                ",d.toInt(ml||(ml=r(["\n                    return v\n                "]))),d.toFloat(gl||(gl=r(["\n                    return v\n                "]))),d.createFloatArray(yl||(yl=r(["\n                    return new ","(length)\n                "])),l),d.setFloatDataView(bl||(bl=r(["\n                    dataView.","(position, value)\n                "])),c),d.getFloatDataView(vl||(vl=r(["\n                    return dataView.","(position)\n                "])),u),...p]);throw new Error("Unexpected target: ".concat(o))},exports:(e,n,t)=>{let{ns:r}=e,{target:a}=t;return"assemblyscript"===a?[r.x_createListOfArrays,r.x_pushToListOfArrays,r.x_getListOfArraysLength,r.x_getListOfArraysElem,r.x_getInput,r.x_getOutput,r.createFloatArray]:[]}};var Sl,kl,xl,Il,_l,Al,Tl,El,Ol,Cl,Nl,Ml,Pl,Fl,Rl,Ll,Dl,jl,zl,Bl,Ul,Wl,$l,Vl,Gl,Hl,Kl,ql,Yl,Xl,Jl,Zl,Ql,eu;const nu={namespace:"msg",code:(e,n,t)=>{let{ns:a}=e,{target:o}=t;const i={create:ti(a.create,[ei(a.Template,"template")],a.Message),writeStringToken:ti(a.writeStringToken,[ei(a.Message,"message"),ei("Int","tokenIndex"),ei("string","value")],"void"),writeFloatToken:ti(a.writeFloatToken,[ei(a.Message,"message"),ei("Int","tokenIndex"),ei(a._FloatToken,"value")],"void"),readStringToken:ti(a.readStringToken,[ei(a.Message,"message"),ei("Int","tokenIndex")],"string"),readFloatToken:ti(a.readFloatToken,[ei(a.Message,"message"),ei("Int","tokenIndex")],a._FloatToken),getLength:ti(a.getLength,[ei(a.Message,"message")],"Int"),getTokenType:ti(a.getTokenType,[ei(a.Message,"message"),ei("Int","tokenIndex")],"Int"),isStringToken:ti(a.isStringToken,[ei(a.Message,"message"),ei("Int","tokenIndex")],"boolean"),isFloatToken:ti(a.isFloatToken,[ei(a.Message,"message"),ei("Int","tokenIndex")],"boolean"),isMatching:ti(a.isMatching,[ei(a.Message,"message"),ei("Array<".concat(a._HeaderEntry,">"),"tokenTypes")],"boolean"),floats:ti(a.floats,[ei("Array<Float>","values")],a.Message),strings:ti(a.strings,[ei("Array<string>","values")],a.Message),display:ti(a.display,[ei(a.Message,"message")],"string")},s=[ti(a.VOID_MESSAGE_RECEIVER,[ei(a.Message,"m")],"void")(Sl||(Sl=r([""]))),ei(a.Message,a.EMPTY_MESSAGE,"".concat(a.create,"([])"))];if(a.Template,a.Handler,"assemblyscript"===o)return oi(["\n                type ".concat(a.Template," = Array<Int>\n                \n                type ").concat(a._FloatToken," = Float\n                type ").concat(a._CharToken," = Int\n\n                type ").concat(a._HeaderEntry," = Int\n\n                type ").concat(a.Handler," = (m: ").concat(a.Message,") => void\n                "),ni(a._HeaderEntry,a.FLOAT_TOKEN,"0"),ni(a._HeaderEntry,a.STRING_TOKEN,"1"),i.create(kl||(kl=r(["\n                    let i: Int = 0\n                    let byteCount: Int = 0\n                    let tokenTypes: Array<","> = []\n                    let tokenPositions: Array<","> = []\n\n                    i = 0\n                    while (i < template.length) {\n                        switch(template[i]) {\n                            case ",":\n                                byteCount += sizeof<",">()\n                                tokenTypes.push(",")\n                                tokenPositions.push(byteCount)\n                                i += 1\n                                break\n                            case ",":\n                                byteCount += sizeof<",">() * template[i + 1]\n                                tokenTypes.push(",')\n                                tokenPositions.push(byteCount)\n                                i += 2\n                                break\n                            default:\n                                throw new Error("unknown token type : " + template[i].toString())\n                        }\n                    }\n\n                    const tokenCount = tokenTypes.length\n                    const headerByteCount = ',"(tokenCount) \n                        * sizeof<",">()\n                    byteCount += headerByteCount\n\n                    const buffer = new ArrayBuffer(byteCount)\n                    const dataView = new DataView(buffer)\n                    let writePosition: Int = 0\n                    \n                    dataView.setInt32(writePosition, tokenCount)\n                    writePosition += sizeof<",">()\n\n                    for (i = 0; i < tokenCount; i++) {\n                        dataView.setInt32(writePosition, tokenTypes[i])\n                        writePosition += sizeof<",">()\n                    }\n\n                    dataView.setInt32(writePosition, headerByteCount)\n                    writePosition += sizeof<",">()\n                    for (i = 0; i < tokenCount; i++) {\n                        dataView.setInt32(writePosition, headerByteCount + tokenPositions[i])\n                        writePosition += sizeof<",">()\n                    }\n\n                    const header = ","(dataView, tokenCount)\n                    return {\n                        dataView,\n                        tokenCount,\n                        header,\n                        tokenTypes: ","(header),\n                        tokenPositions: ","(header),\n                    }\n                "])),a._HeaderEntry,a._HeaderEntry,a.FLOAT_TOKEN,a._FloatToken,a.FLOAT_TOKEN,a.STRING_TOKEN,a._CharToken,a.STRING_TOKEN,a._computeHeaderLength,a._HeaderEntry,a._HeaderEntry,a._HeaderEntry,a._HeaderEntry,a._HeaderEntry,a._unpackHeader,a._unpackTokenTypes,a._unpackTokenPositions),i.writeStringToken(xl||(xl=r(["\n                    const startPosition = message.tokenPositions[tokenIndex]\n                    const endPosition = message.tokenPositions[tokenIndex + 1]\n                    const expectedStringLength: Int = (endPosition - startPosition) / sizeof<",">()\n                    if (value.length !== expectedStringLength) {\n                        throw new Error('Invalid string size, specified ' + expectedStringLength.toString() + ', received ' + value.length.toString())\n                    }\n\n                    for (let i = 0; i < value.length; i++) {\n                        message.dataView.setInt32(\n                            startPosition + i * sizeof<",">(), \n                            value.codePointAt(i)\n                        )\n                    }\n                "])),a._CharToken,a._CharToken),i.writeFloatToken(Il||(Il=r(["\n                    setFloatDataView(message.dataView, message.tokenPositions[tokenIndex], value)\n                "]))),i.readStringToken(_l||(_l=r(["\n                    const startPosition = message.tokenPositions[tokenIndex]\n                    const endPosition = message.tokenPositions[tokenIndex + 1]\n                    const stringLength: Int = (endPosition - startPosition) / sizeof<",">()\n                    let value: string = ''\n                    for (let i = 0; i < stringLength; i++) {\n                        value += String.fromCodePoint(message.dataView.getInt32(startPosition + sizeof<",">() * i))\n                    }\n                    return value\n                "])),a._CharToken,a._CharToken),i.readFloatToken(Al||(Al=r(["\n                    return getFloatDataView(message.dataView, message.tokenPositions[tokenIndex])\n                "]))),i.getLength(Tl||(Tl=r(["\n                    return message.tokenTypes.length\n                "]))),i.getTokenType(El||(El=r(["\n                    return message.tokenTypes[tokenIndex]\n                "]))),i.isStringToken(Ol||(Ol=r(["\n                    return ","(message, tokenIndex) === ","\n                "])),a.getTokenType,a.STRING_TOKEN),i.isFloatToken(Cl||(Cl=r(["\n                    return ","(message, tokenIndex) === ","\n                "])),a.getTokenType,a.FLOAT_TOKEN),i.isMatching(Nl||(Nl=r(["\n                    if (message.tokenTypes.length !== tokenTypes.length) {\n                        return false\n                    }\n                    for (let i: Int = 0; i < tokenTypes.length; i++) {\n                        if (message.tokenTypes[i] !== tokenTypes[i]) {\n                            return false\n                        }\n                    }\n                    return true\n                "]))),i.floats(Ml||(Ml=r(["\n                    const message: "," = ","(\n                        values.map<",">(v => ","))\n                    for (let i: Int = 0; i < values.length; i++) {\n                        ","(message, i, values[i])\n                    }\n                    return message\n                "])),a.Message,a.create,a._HeaderEntry,a.FLOAT_TOKEN,a.writeFloatToken),i.strings(Pl||(Pl=r(["\n                    const template: "," = []\n                    for (let i: Int = 0; i < values.length; i++) {\n                        template.push(",")\n                        template.push(values[i].length)\n                    }\n                    const message: "," = ","(template)\n                    for (let i: Int = 0; i < values.length; i++) {\n                        ","(message, i, values[i])\n                    }\n                    return message\n                "])),a.Template,a.STRING_TOKEN,a.Message,a.create,a.writeStringToken),i.display(Fl||(Fl=r(["\n                    let displayArray: Array<string> = []\n                    for (let i: Int = 0; i < ","(message); i++) {\n                        if (","(message, i)) {\n                            displayArray.push(","(message, i).toString())\n                        } else {\n                            displayArray.push('\"' + ","(message, i) + '\"')\n                        }\n                    }\n                    return '[' + displayArray.join(', ') + ']'\n                "])),a.getLength,a.isFloatToken,a.readFloatToken,a.readStringToken),ai(a.Message,[ei("DataView","dataView"),ei(a._Header,"header"),ei(a._HeaderEntry,"tokenCount"),ei(a._Header,"tokenTypes"),ei(a._Header,"tokenPositions")]),ti(a.x_create,[ei("Int32Array","templateTypedArray")],a.Message)(Rl||(Rl=r(["\n                    const template: "," = new Array<Int>(templateTypedArray.length)\n                    for (let i: Int = 0; i < templateTypedArray.length; i++) {\n                        template[i] = templateTypedArray[i]\n                    }\n                    return ","(template)\n                "])),a.Template,a.create),ti(a.x_getTokenTypes,[ei(a.Message,"message")],a._Header)(Ll||(Ll=r(["\n                    return message.tokenTypes\n                "]))),ti(a.x_createTemplate,[ei("i32","length")],"Int32Array")(Dl||(Dl=r(["\n                    return new Int32Array(length)\n                "]))),"type ".concat(a._Header," = Int32Array"),ti(a._computeHeaderLength,[ei("Int","tokenCount")],"Int")(jl||(jl=r(["\n                    return 1 + tokenCount * 2 + 1\n                "]))),ti(a._unpackHeader,[ei("DataView","messageDataView"),ei(a._HeaderEntry,"tokenCount")],a._Header)(zl||(zl=r(["\n                    const headerLength = ","(tokenCount)\n                    // TODO : why is this `wrap` not working ?\n                    // return Int32Array.wrap(messageDataView.buffer, 0, headerLength)\n                    const messageHeader = new Int32Array(headerLength)\n                    for (let i = 0; i < headerLength; i++) {\n                        messageHeader[i] = messageDataView.getInt32(sizeof<",">() * i)\n                    }\n                    return messageHeader\n                "],["\n                    const headerLength = ","(tokenCount)\n                    // TODO : why is this \\`wrap\\` not working ?\n                    // return Int32Array.wrap(messageDataView.buffer, 0, headerLength)\n                    const messageHeader = new Int32Array(headerLength)\n                    for (let i = 0; i < headerLength; i++) {\n                        messageHeader[i] = messageDataView.getInt32(sizeof<",">() * i)\n                    }\n                    return messageHeader\n                "])),a._computeHeaderLength,a._HeaderEntry),ti(a._unpackTokenTypes,[ei(a._Header,"header")],a._Header)(Bl||(Bl=r(["\n                    return header.slice(1, 1 + header[0])\n                "]))),ti(a._unpackTokenPositions,[ei(a._Header,"header")],a._Header)(Ul||(Ul=r(["\n                    return header.slice(1 + header[0])\n                "]))),...s]);if("javascript"===o)return oi([ni("string",a.FLOAT_TOKEN,'"number"'),ni("string",a.STRING_TOKEN,'"string"'),i.create(Wl||(Wl=r(["\n                    const m = []\n                    let i = 0\n                    while (i < template.length) {\n                        if (template[i] === ",") {\n                            m.push('')\n                            i += 2\n                        } else if (template[i] === ",") {\n                            m.push(0)\n                            i += 1\n                        }\n                    }\n                    return m\n                "])),a.STRING_TOKEN,a.FLOAT_TOKEN),i.getLength($l||($l=r(["\n                    return message.length\n                "]))),i.getTokenType(Vl||(Vl=r(["\n                    return typeof message[tokenIndex]\n                "]))),i.isStringToken(Gl||(Gl=r(["\n                    return ","(message, tokenIndex) === 'string'\n                "])),a.getTokenType),i.isFloatToken(Hl||(Hl=r(["\n                    return ","(message, tokenIndex) === 'number'\n                "])),a.getTokenType),i.isMatching(Kl||(Kl=r(["\n                    return (message.length === tokenTypes.length) \n                        && message.every((v, i) => ","(message, i) === tokenTypes[i])\n                "])),a.getTokenType),i.writeFloatToken(ql||(ql=r(["\n                    message[tokenIndex] = value\n                "]))),i.writeStringToken(Yl||(Yl=r(["\n                    message[tokenIndex] = value\n                "]))),i.readFloatToken(Xl||(Xl=r(["\n                    return message[tokenIndex]\n                "]))),i.readStringToken(Jl||(Jl=r(["\n                    return message[tokenIndex]\n                "]))),i.floats(Zl||(Zl=r(["\n                    return values\n                "]))),i.strings(Ql||(Ql=r(["\n                    return values\n                "]))),i.display(eu||(eu=r(["\n                    return '[' + message\n                        .map(t => typeof t === 'string' ? '\"' + t + '\"' : t.toString())\n                        .join(', ') + ']'\n                "]))),...s]);throw new Error("Unexpected target: ".concat(o))},exports:(e,n,t)=>{let{ns:r}=e,{target:a}=t;return"assemblyscript"===a?[r.x_create,r.x_getTokenTypes,r.x_createTemplate,r.writeStringToken,r.writeFloatToken,r.readStringToken,r.readFloatToken,r.FLOAT_TOKEN,r.STRING_TOKEN]:[]}};const tu=(e,n,t,r)=>oi(e.map((e=>e.code(lu(n,e),t,r))).reduce(((e,n)=>e.every((e=>!su(e,n)))?[...e,n]:e),[])),ru=(e,n,t,r)=>e.reduce(((e,a)=>a.exports?[...e,...a.exports(lu(n,a),t,r).filter((n=>e.every((e=>n!==e))))]:e),[]),au=(e,n,t,r)=>e.reduce(((e,a)=>a.imports?[...e,...a.imports(lu(n,a),t,r).filter((n=>e.every((e=>n.name!==e.name))))]:e),[]),ou=e=>e.flatMap((e=>e.dependencies?[...ou(e.dependencies),e]:[e])),iu=e=>{let{graph:n,precompiledCodeAssigner:t}=e;return gi(n,t.graph.fullTraversal).reduce(((e,n)=>{const r=t.nodes[n.id];return[...e,...t.nodeImplementations[r.nodeType].nodeImplementation.dependencies||[]]}),[])},su=(e,n)=>JSON.stringify(e)===JSON.stringify(n),lu=(e,n)=>({ns:uu(e,n)}),uu=(e,n)=>e.globals[n.namespace],cu=e=>"(".concat(e.args.map((e=>"".concat(e.name,": ").concat(e.type))).join(", "),") => ").concat(e.returnType);var du,pu,fu;const hu=(e,n)=>{let{settings:t,variableNamesAssigner:a,precompiledCodeAssigner:o}=e;const i=o.nodes[n.id],s=o.nodeImplementations[i.nodeType],{state:l,snds:u,ns:c,globals:d}=mu(n.id,i,a),p=ps(s.nodeImplementation.messageReceivers?s.nodeImplementation.messageReceivers({ns:c,state:l,snds:u,node:n},d,t):{},n.id,"messageReceivers");Object.keys(i.messageReceivers).forEach((e=>{const t=p[e];((e,n)=>{if("object"!==typeof e||"Func"!==e.astType)throw new Error("Expected an ast Func, got : ".concat(e));if(e.args.length!==n.args.length||e.args.some(((e,t)=>{const r=n.args[t];return!r||e.type!==r.type}))||e.returnType!==n.returnType)throw new Error("Func should be have signature ".concat(cu(n))+" got instead ".concat(cu(e)))})(t,ri([ei(d.msg.Message,"m")],"void")(du||(du=r([""]))));const o=i.messageReceivers[e];o.name=a.nodes[n.id].messageReceivers[e],o.args=t.args,o.body=t.body,o.returnType=t.returnType}))},mu=(e,n,t)=>({globals:ds(t.globals),ns:ds(t.nodeImplementations[n.nodeType]),state:n.state?n.state.name:"",ins:ps(n.signalIns,e,"ins"),outs:ps(n.signalOuts,e,"outs"),snds:ps(Object.entries(n.messageSenders).reduce(((e,n)=>{let[t,{messageSenderName:r}]=n;return{...e,[t]:r}}),{}),e,"snds"),rcvs:ps(Object.entries(n.messageReceivers).reduce(((e,n)=>{let[t,r]=n;return{...e,[t]:r.name}}),{}),e,"rcvs")}),gu=(e,n)=>{const t=di(e,n.outNodesIds[0]);return Object.entries(t.sinks).find((e=>{let[n]=e;return"signal"===fi(t,n).type}))[1][0]};var yu;const bu=(e,n)=>n.nodeImplementations[e],vu=(e,n)=>{if(e[n.id])throw new Error('Node "'.concat(n.id,'" already exists'));return e[n.id]=n,e[n.id]},wu=(e,n,t)=>{const r=di(e,t.nodeId),a=di(e,n.nodeId),o=mi(r,t.portletId),i=hi(a,n.portletId),s=fi(a,n.portletId),l=pi(r,t.portletId);if(!i.some((e=>Ei(t,e)))){if(!s)throw new Error("Undefined outlet ".concat(n.nodeId,":").concat(n.portletId));if(!l)throw new Error("Undefined inlet ".concat(t.nodeId,":").concat(t.portletId));if(s.type!==l.type)throw new Error("Incompatible portlets types ".concat(n.nodeId," | ").concat(n.portletId," (").concat(s.type,") -> ").concat(t.nodeId," | ").concat(t.portletId," (").concat(l.type,")"));if("signal"===l.type&&o.length)throw new Error("Signal inlets can have only one connection");ku(r.sources,t.portletId).push(n),ku(a.sinks,n.portletId).push(t)}},Su=(e,n,t)=>{const r=di(e,n),a=di(e,t);Object.entries(a.sources).forEach((e=>{let[t,r]=e;return a.sources[t]=r.filter((e=>e.nodeId!==n))})),Object.entries(r.sinks).forEach((e=>{let[n,a]=e;return r.sinks[n]=a.filter((e=>e.nodeId!==t))}))},ku=(e,n)=>e[n]=e[n]||[];var xu;const Iu="_messageReceiver",_u={},Au="_messageSender",Tu={messageReceivers:(e,n)=>{let{node:{args:t}}=e,{msg:a}=n;return{0:ri([ei(a.Message,"m")])(xu||(xu=r(["\n                ","(m)\n                return\n            "])),t.messageSenderName)}}},Eu=(e,n,t,r)=>{const a="n_io".concat("messageReceiver"===n?"Rcv":"Snd","_").concat(t,"_").concat(r);if(e[a])throw new Error("Node id ".concat(a," already exists in graph"));return a};var Ou=e=>{const n=Cu(e);var t,a;(e=>{if(e[Iu])throw new Error("Reserved node type '".concat(Iu,"' already exists. Please use a different name."));if(e[Au])throw new Error("Reserved node type '".concat(Au,"' already exists. Please use a different name."));e[Iu]=_u,e[Au]=Tu})(n.nodeImplementations),Object.entries(e.settings.io.messageReceivers).forEach((e=>{let[t,r]=e;r.forEach((e=>{((e,n,t)=>{let{precompiledCode:r,graph:a,variableNamesAssigner:o,precompiledCodeAssigner:i}=e;const s=Eu(a,"messageReceiver",n,t),l={...Ti(s,Iu),isPushingMessages:!0,outlets:{0:{id:"0",type:"message"}}};vu(a,l),wu(a,{nodeId:s,portletId:"0"},{nodeId:n,portletId:t}),i.io.messageReceivers[n][t]={functionName:o.io.messageReceivers[n][t],getSinkFunctionName:()=>r.nodes[s].messageSenders[0].messageSenderName}})(n,t,e)}))})),Object.entries(e.settings.io.messageSenders).forEach((e=>{let[t,r]=e;r.forEach((e=>{((e,n,t)=>{let{graph:r,variableNamesAssigner:a,precompiledCodeAssigner:o}=e;const i=Eu(r,"messageSender",n,t),s=a.io.messageSenders[n][t],l={...Ti(i,Au),args:{messageSenderName:s},inlets:{0:{id:"0",type:"message"}}};vu(r,l),wu(r,{nodeId:n,portletId:t},{nodeId:i,portletId:"0"}),o.io.messageSenders[n][t]={functionName:s}})(n,t,e)}))})),n.graph=(t=n.graph,a=Mi(n.graph),Zo(Object.values(t).filter((e=>a.includes(e.id))),(e=>[e.id,{...e,sources:Ai(e.sources,a),sinks:_i(e.sinks,a)}]))),n.nodeImplementations=((e,n)=>Object.values(e).reduce(((e,t)=>t.type in e?e:{...e,[t.type]:Ni(n,t.type)}),{}))(n.graph,n.nodeImplementations),n.precompiledCode.graph.fullTraversal=Mi(n.graph);const o=gi(n.graph,n.precompiledCode.graph.fullTraversal);((e,n)=>{const{settings:t,variableNamesAssigner:r,precompiledCodeAssigner:a}=e,o=ou([...n,...iu(e)]),i=ds(e.variableNamesIndex.globals);a.dependencies.ast=tu(o,r,i,t),a.dependencies.exports=ru(o,r,i,t),a.dependencies.imports=au(o,r,i,t)})(n,[wl,tl,rl,nu]),Object.keys(n.nodeImplementations).forEach((e=>{((e,n)=>{let{settings:t,variableNamesReadOnly:r,variableNamesAssigner:a,precompiledCodeAssigner:o}=e;const i=o.nodeImplementations[n],s=i.nodeImplementation;s.core&&(i.core=s.core({ns:bu(n,a)},r.globals,t))})(n,e),((e,n)=>{let{graph:t,settings:r,variableNamesReadOnly:a,variableNamesAssigner:o,precompiledCodeAssigner:i}=e;const s=i.nodeImplementations[n];if(s.nodeImplementation.state){const e=Object.values(t).find((e=>e.type===n));if(!e)throw new Error('No node of type "'.concat(n,'" exists in the graph.'));bu(n,o).State;const i=s.nodeImplementation.state({ns:bu(n,a),node:e},a.globals,r);s.stateClass={...i,members:i.members.map((e=>({...e,value:void 0})))}}})(n,e)})),o.forEach((e=>{((e,n)=>{let{settings:t,variableNamesAssigner:r,precompiledCodeAssigner:a}=e;const o=a.nodes[n.id],i=a.nodeImplementations[o.nodeType];if(i.nodeImplementation.state){const{ns:e,globals:a}=mu(n.id,o,r),s=i.nodeImplementation.state({ns:e,node:n},a,t);o.state={name:r.nodes[n.id].state,initialization:s.members.reduce(((e,n)=>({...e,[n.name]:n.value})),{})}}})(n,e)}));const i={traversal:Pi(n.graph),outNodesIds:Fi(n.graph).map((e=>e.id))},s=((e,n)=>Ri(e,n).reduce(((e,n)=>{const t=e.find((e=>e.traversal.some((e=>n.traversal.includes(e)))));return t?[...e.filter((e=>e!==t)),{traversal:[...t.traversal,...n.traversal],outNodesIds:[...t.outNodesIds,...n.outNodesIds]}]:[...e,n]}),[]).map((n=>({traversal:Si(e.graph,gi(e.graph,n.outNodesIds)),outNodesIds:n.outNodesIds}))))(n,i),l=((e,n,t)=>{let{graph:r}=e;return{traversal:t.reduce(((e,n)=>Di(e,n.traversal)),Pi(r)),outNodesIds:n.outNodesIds}})(n,i,s),u=[l,...s],c=u.flatMap((e=>{const t=((e,n)=>gi(e.graph,n.traversal).reduce(((t,r)=>{const a=yi(e.graph,r,"signal");return!zi(e,r)||n.outNodesIds.includes(r.id)||zi(e,a[0])&&!n.outNodesIds.includes(a[0].id)?t:[...t,{traversal:Si(e.graph,[r],(n=>zi(e,n))),outNodesIds:[r.id]}]}),[]))(n,e);return e.traversal=Di(e.traversal,t.flatMap((e=>e.traversal))),t}));return n.precompiledCode.graph.hotDspGroup=l,s.forEach(((e,t)=>{((e,n,t)=>{let{graph:r,variableNamesAssigner:a,precompiledCodeAssigner:o}=e;o.graph.coldDspGroups[t]={functionName:a.coldDspGroups[t],dspGroup:n,sinkConnections:Li(r,n)}})(n,e,"".concat(t))})),o.forEach((e=>{Object.values(e.inlets).forEach((t=>{"signal"===t.type?0===mi(e,t.id).length&&((e,n,t)=>{let{variableNamesAssigner:r,precompiledCodeAssigner:a}=e;a.nodes[n.id].signalIns[t]=r.globals.core.NULL_SIGNAL})(n,e,t.id):"message"===t.type&&((e,n,t)=>{let{variableNamesAssigner:a,precompiledCodeAssigner:o}=e;const i=o.nodes[n.id],s=a.globals;if(mi(n,t).length>=1){const e=a.nodes[n.id].messageReceivers[t];i.messageReceivers[t]=ti(e,[ei(s.msg.Message,"m")],"void")(yu||(yu=r(['throw new Error("This placeholder should have been replaced during precompilation")'])))}})(n,e,t.id)}))})),o.forEach((e=>{Object.values(e.outlets).filter((e=>"message"===e.type)).forEach((t=>{((e,n,t)=>{let{variableNamesAssigner:r,precompiledCodeAssigner:a}=e;const o=hi(n,t),i=a.nodes[n.id],s=[...o.map((e=>{let{nodeId:n,portletId:t}=e;return r.nodes[n].messageReceivers[t]})),...o.reduce(((e,n)=>[...e,...Object.entries(a.graph.coldDspGroups).filter((e=>{let[t,{dspGroup:r}]=e;return((e,n)=>e.traversal.includes(n))(r,n.nodeId)})).map((e=>{let[n]=e;return n})).map((e=>r.coldDspGroups[e]))]),[])];i.messageSenders[t]=s.length>1?{messageSenderName:r.nodes[n.id].messageSenders[t],sinkFunctionNames:s}:1===s.length?{messageSenderName:s[0],sinkFunctionNames:[]}:{messageSenderName:r.globals.msg.VOID_MESSAGE_RECEIVER,sinkFunctionNames:[]}})(n,e,t.id)}))})),u.forEach((e=>{gi(n.graph,e.traversal).forEach((e=>{Object.values(e.outlets).forEach((t=>{((e,n,t)=>{const{variableNamesAssigner:r,precompiledCodeAssigner:a}=e,o=hi(n,t),i=r.nodes[n.id].signalOuts[t];a.nodes[n.id].signalOuts[t]=i,o.forEach((e=>{let{portletId:n,nodeId:t}=e;a.nodes[t].signalIns[n]=i}))})(n,e,t.id)}))}))})),c.forEach((e=>{((e,n)=>{let{graph:t,settings:r,variableNamesAssigner:a,precompiledCodeAssigner:o}=e;const i=n.traversal.reduce(((e,i)=>{const s=o.nodes[i],l=o.nodeImplementations[s.nodeType],{ins:u,outs:c,snds:d,state:p,ns:f,globals:h}=mu(i,s,a),m=di(t,i),g=Zo(Object.values(m.inlets).map((e=>[e,mi(m,e.id)])).filter((e=>{let[t,r]=e;return"signal"===t.type&&r.length>0&&n.traversal.includes(r[0].nodeId)})),(n=>{let[t,r]=n;const a=r[0];if(!(a.nodeId in e))throw new Error("Unexpected error : inlining failed, missing inlined source ".concat(a.nodeId));return[t.id,e[a.nodeId]]}));if(!l.nodeImplementation.dsp)throw new Error("No dsp to generate for node ".concat(m.type,":").concat(m.id));const y=l.nodeImplementation.dsp({ns:f,state:p,ins:ps({...u,...g},i,"ins"),outs:c,snds:d,node:m},h,r);if(!("astType"in y))throw new Error("Inlined dsp can only be an AstSequence");return{...e,[i]:"("+as((b=r.target,{javascript:Oi,assemblyscript:Ci}[b]),y)+")"};var b}),{}),s=gu(t,n);o.nodes[s.nodeId].signalIns[s.portletId]=i[n.outNodesIds[0]]})(n,e)})),u.forEach((e=>{gi(n.graph,e.traversal).forEach((e=>{((e,n)=>{let{settings:t,variableNamesAssigner:a,precompiledCodeAssigner:o}=e;const i=o.nodes[n.id],s=o.nodeImplementations[i.nodeType],{outs:l,ins:u,snds:c,state:d,ns:p,globals:f}=mu(n.id,i,a);if(!s.nodeImplementation.dsp)throw new Error("No dsp to generate for node ".concat(n.type,":").concat(n.id));const h=s.nodeImplementation.dsp({ns:p,node:n,state:d,ins:u,outs:l,snds:c},f,t);if(s.nodeImplementation.flags&&s.nodeImplementation.flags.isDspInline){if("loop"in h)throw new Error("Invalid dsp definition for inlinable node ".concat(n.type,":").concat(n.id));const e=Object.keys(n.outlets)[0];i.dsp.loop=ii(fu||(fu=r([""," = ",""])),a.nodes[n.id].signalOuts[e],h)}else"loop"in h?(i.dsp.loop=h.loop,Object.entries(h.inlets).forEach((e=>{let[n,t]=e;i.dsp.inlets[n]=t}))):i.dsp.loop=h})(n,e)}))})),o.forEach((e=>{((e,n)=>{let{settings:t,variableNamesAssigner:a,precompiledCodeAssigner:o}=e;const i=o.nodes[n.id],s=o.nodeImplementations[i.nodeType],{state:l,snds:u,ns:c,globals:d}=mu(n.id,i,a);i.initialization=s.nodeImplementation.initialization?s.nodeImplementation.initialization({ns:c,state:l,snds:u,node:n},d,t):ii(pu||(pu=r([""])))})(n,e),hu(n,e)})),n};const Cu=e=>{const n={graph:{...e.graph},nodeImplementations:{...e.nodeImplementations},settings:e.settings},t=(e=>us.ensureValue({},Ps,e))(n),r=(e=>us.ensureValue({},Ns,e))(n);return{...n,precompiledCode:t,variableNamesIndex:r,variableNamesAssigner:Ms({variableNamesIndex:r,input:n}),variableNamesReadOnly:ds(r),precompiledCodeAssigner:Fs({precompiledCode:t,input:n})}};class Nu extends Error{}var Mu=(e,n,t,a)=>{const o=((e,n)=>{const t=e.arrays||{},r={messageReceivers:(e.io||{}).messageReceivers||{},messageSenders:(e.io||{}).messageSenders||{}},a=e.debug||!1,o=e.audio||{channelCount:{in:2,out:2},bitDepth:64};if(![32,64].includes(o.bitDepth))throw new Nu('"bitDepth" can be only 32 or 64');return{audio:o,arrays:t,io:r,debug:a,target:n,customMetadata:e.customMetadata||{}}})(a,t),{precompiledCode:i,variableNamesIndex:s}=Ou({graph:e,nodeImplementations:n,settings:o});let l;const u={precompiledCode:i,settings:o,variableNamesReadOnly:ds(s)};if("javascript"===t)l=(e=>{const{precompiledCode:n,settings:t,variableNamesReadOnly:a}=e,o=ds(a),{globals:i}=o,s={settings:t,globals:i,precompiledCode:n},l=Xo(e);return as(Oi,ii(hs||(hs=r(["\n        ","\n        ","\n\n        ","\n        ","\n\n        ","\n        ","\n        ","\n\n        const exports = {\n            metadata: ",",\n            initialize: (sampleRate, blockSize) => {\n                exports.metadata.settings.audio.sampleRate = sampleRate\n                exports.metadata.settings.audio.blockSize = blockSize\n                "," = sampleRate\n                "," = blockSize\n\n                ","\n                ","\n            },\n            dspLoop: (",", ",") => {\n                ","\n            },\n            io: {\n                messageReceivers: {\n                    ","\n                },\n                messageSenders: {\n                    ","\n                },\n            }\n        }\n\n        ","\n    "])),Ki(s),qi(s),Yi(s),Qi(s),ts(s),Ji(s),Zi(s,((e,n,t)=>ii(ms||(ms=r(["const "," = (m) => {exports.io.messageSenders['","']['","'](m)}"])),e,n,t))),JSON.stringify(l),i.core.SAMPLE_RATE,i.core.BLOCK_SIZE,Xi(s),ns(s),i.core.INPUT,i.core.OUTPUT,es(s),Object.entries(n.io.messageReceivers).map((e=>{let[n,t]=e;return ii(gs||(gs=r(["",": {\n                            ","\n                        },"])),n,Object.entries(t).map((e=>{let[n,{functionName:t}]=e;return'"'.concat(n,'": ').concat(t,",")})))})),Object.entries(t.io.messageSenders).map((e=>{let[n,t]=e;return ii(ys||(ys=r(["",": {\n                            ","\n                        },"])),n,t.map((e=>'"'.concat(e,'": () => undefined,'))))})),rs(s,(e=>{let{name:n}=e;return ii(bs||(bs=r(["\n                exports."," = () => { throw new Error('import for "," not provided') }\n                const "," = (...args) => exports.","(...args)\n            "])),n,n,n,n)}),(e=>ii(vs||(vs=r(["exports."," = ",""])),e,e)))))})(u);else{if("assemblyscript"!==t)throw new Error("Invalid target ".concat(t));l=(e=>{const{precompiledCode:n,settings:t,variableNamesReadOnly:a}=e,o=a.globals,i={settings:t,globals:o,precompiledCode:n},{channelCount:s}=t.audio,l=Xo(e);return as(Ci,ii(ws||(ws=r(["\n        const metadata: string = '","'\n\n        ","\n        ","\n\n        ","\n        ","\n\n        ","\n        ","\n        ","\n\n        export function initialize(sampleRate: Float, blockSize: Int): void {\n            "," = createFloatArray(blockSize * ",")\n            "," = createFloatArray(blockSize * ",")\n            "," = sampleRate\n            "," = blockSize\n\n            ","\n            ","\n        }\n\n        export function dspLoop(): void {\n            ","\n        }\n\n        export {\n            metadata,\n            ","\n        }\n\n        ","\n    "])),JSON.stringify(l),Ki(i),qi(i),Yi(i),Qi(i),ts(i),Ji(i),Zi(i,(e=>ii(Ss||(Ss=r(["export declare function ","(m: ","): void"])),e,o.msg.Message))),o.core.INPUT,s.in.toString(),o.core.OUTPUT,s.out.toString(),o.core.SAMPLE_RATE,o.core.BLOCK_SIZE,Xi(i),ns(i),es(i),Object.values(n.io.messageReceivers).map((e=>Object.values(e).map((e=>{let{functionName:n}=e;return n+","})))),rs(i,(e=>{let{name:n,args:t,returnType:a}=e;return ii(ks||(ks=r(["export declare function "," (","): ",""])),n,t.map((e=>"".concat(e.name,": ").concat(e.type))).join(","),a)}),(e=>ii(xs||(xs=r(["export { "," }"])),e)))))})(u)}return{status:0,code:l}};const Pu=e=>64===e?Float64Array:Float32Array,Fu=(e,n)=>new Proxy({},{get:(t,r)=>{if(n.hasOwnProperty(r)){const t=String(r),a=n[t];switch(a.type){case"raw":if(r in e)return e[t];throw new Error("Key ".concat(String(t)," doesn't exist in raw module"));case"proxy":case"callback":return a.value}}},has:function(e,t){return t in n},set:(e,t,r)=>{if(!n.hasOwnProperty(String(t)))throw new Error("Key ".concat(String(t)," is not defined in bindings"));{const e=String(t),a=n[e];if("callback"!==a.type)throw new Error("Binding key ".concat(String(e)," is read-only"));a.value=r}return!0}}),Ru=(e,n)=>Lu(e,{globals:n.globals,io:n.io}),Lu=(e,n)=>{if("string"===typeof n)return e[n];if("object"===typeof n)return new Proxy(e,{get:(t,r)=>{const a=String(r);if(a in e)return Reflect.get(e,a);if(a in n){const t=n[a];return Lu(e,t)}ls(e,a)},has:function(t,r){return r in e||r in n},set:(t,r,a)=>{const o=String(r);if(o in n){const t=n[o];if("string"!==typeof t)throw new Error("Failed to set value for key ".concat(String(r),": variable name is not a string"));return Reflect.set(e,t,a)}throw new Error("Key ".concat(String(r)," is not defined in raw module"))}});throw new Error("Invalid name mapping")},Du=(e,n)=>{if(!n)throw new Error("Cannot lift a null pointer");const t=(n>>>=0)+new Uint32Array(e.memory.buffer)[n-4>>>2]>>>1,r=new Uint16Array(e.memory.buffer);let a=n>>>1,o="";for(;t-a>1024;)o+=String.fromCharCode(...r.subarray(a,a+=1024));return o+String.fromCharCode(...r.subarray(a,t))},ju=(e,n)=>{if(null==n)throw new Error("Cannot lower a null string");const t=n.length,r=e.__new(t<<1,1)>>>0,a=new Uint16Array(e.memory.buffer);for(let o=0;o<t;++o)a[(r>>>1)+o]=n.charCodeAt(o);return r},zu=(e,n,t)=>{if(!t)throw new Error("Cannot lift a null pointer");const r=new Uint32Array(e.memory.buffer);return new n(e.memory.buffer,r[t+4>>>2],r[t+8>>>2]/n.BYTES_PER_ELEMENT)},Bu=(e,n,t)=>{const r=Pu(n),a=e.globals.core.createFloatArray(t.length),o=zu(e,r,a);return o.set(t),{array:o,arrayPointer:a}},Uu=(e,n,t)=>{const r=e.globals.core.x_createListOfArrays();return t.forEach((t=>{const{arrayPointer:a}=Bu(e,n,t);e.globals.core.x_pushToListOfArrays(r,a)})),r},Wu=(e,n,t)=>{const r=e.globals.core.x_getListOfArraysLength(t),a=[],o=Pu(n);for(let i=0;i<r;i++){const n=e.globals.core.x_getListOfArraysElem(t,i);a.push(zu(e,o,n))}return a},$u=async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const t=await WebAssembly.instantiate(e,{env:{abort:(e,n,t,a)=>{const o=Du(r,e);(()=>{throw Error("".concat(o," at ").concat(t,":").concat(a))})()},seed:()=>Date.now()*Math.random(),"console.log":e=>{console.log(Du(r,e))}},...n}),r=t.instance.exports;return t.instance},Vu=async e=>{const n={};WebAssembly.Module.imports(new WebAssembly.Module(e)).filter((e=>"input"===e.module&&"function"===e.kind)).forEach((e=>n[e.name]=()=>{}));const t=(await $u(e,{input:n})).exports,r=t.metadata.valueOf(),a=Du(t,r);return JSON.parse(a)},Gu=e=>{const n=e.metadata.compilation.variableNamesIndex.globals.fs,t=Fu(e,{onReadSoundFile:{type:"callback",value:()=>{}},onWriteSoundFile:{type:"callback",value:()=>{}},onOpenSoundReadStream:{type:"callback",value:()=>{}},onOpenSoundWriteStream:{type:"callback",value:()=>{}},onSoundStreamData:{type:"callback",value:()=>{}},onCloseSoundStream:{type:"callback",value:()=>{}},sendReadSoundFileResponse:{type:"proxy",value:"x_onReadSoundFileResponse"in n?e.globals.fs.x_onReadSoundFileResponse:void 0},sendWriteSoundFileResponse:{type:"proxy",value:"x_onWriteSoundFileResponse"in n?e.globals.fs.x_onWriteSoundFileResponse:void 0},sendSoundStreamData:{type:"proxy",value:"x_onSoundStreamData"in n?e.globals.fs.x_onSoundStreamData:void 0},closeSoundStream:{type:"proxy",value:"x_onCloseSoundStream"in n?e.globals.fs.x_onCloseSoundStream:void 0}});return"i_openSoundWriteStream"in n&&(e.globals.fs.i_openSoundWriteStream=function(){return t.onOpenSoundWriteStream(...arguments)}),"i_sendSoundStreamData"in n&&(e.globals.fs.i_sendSoundStreamData=function(){return t.onSoundStreamData(...arguments)}),"i_openSoundReadStream"in n&&(e.globals.fs.i_openSoundReadStream=function(){return t.onOpenSoundReadStream(...arguments)}),"i_closeSoundStream"in n&&(e.globals.fs.i_closeSoundStream=function(){return t.onCloseSoundStream(...arguments)}),"i_writeSoundFile"in n&&(e.globals.fs.i_writeSoundFile=function(){return t.onWriteSoundFile(...arguments)}),"i_readSoundFile"in n&&(e.globals.fs.i_readSoundFile=function(){return t.onReadSoundFile(...arguments)}),t},Hu=(e,n)=>{const t=Pu(n.settings.audio.bitDepth);return Fu(e,{getArray:{type:"proxy",value:n=>e.globals.commons.getArray(n)},setArray:{type:"proxy",value:(n,r)=>e.globals.commons.setArray(n,new t(r))}})},Ku=e=>{const n=e.metadata.compilation.variableNamesIndex.globals,t={commons:{type:"proxy",value:Hu(e,e.metadata)}};return"fs"in n&&(t.fs={type:"proxy",value:Gu(e)}),{metadata:{type:"raw"},initialize:{type:"raw"},dspLoop:{type:"raw"},io:{type:"raw"},globals:{type:"proxy",value:Fu(e,t)}}},qu=(e,n)=>{const t=(e=>new Function("\n        ".concat(e,"\n        return exports\n    "))())(e),r=Ru(t,t.metadata.compilation.variableNamesIndex);return Fu(t,{...Ku(r),...n||{}})},Yu=async(e,n)=>{switch(e){case"assemblyscript":return Vu(n);case"javascript":return qu(n).metadata}};const Xu=/\$(\d+)/,Ju=(e,n)=>{const t=e.patches[n];if(!t)throw new Error("Patch ".concat(n," not found"));return t},Zu=e=>{const n=e.patches[e.rootPatchId];if(!n)throw new Error("Could not resolve root patch");return n},Qu=(e,n)=>{const t=e.nodes[n];if(!t)throw new Error("Pd node ".concat(n," not found in patch ").concat(e.id));return t},ec=(e,n)=>{const t=e[n];return t?t.aliasTo?ec(e,t.aliasTo):{nodeBuilder:t,nodeType:n}:null},nc=(e,n)=>{const t=parseInt(n.id);if(isNaN(t))throw new Error("Invalid patch id");const r=[t,...n.args],a=new RegExp(Xu,"g");let o;for(;o=a.exec(e);){const n=parseInt(o[1],10),t=0<=n&&n<r.length;if(o[0]===e)return t?r[n]:void 0;t&&(e=e.replace(o[0],r[n].toString()))}return e},tc=(e,n)=>{const t=nc(n[0],e),r="string"===typeof n[1]?nc(n[1],e):n[1];return[(void 0===t?"":t).toString(),void 0===r?0:r,n[2]]},rc=(e,n)=>n.map((n=>"string"===typeof n?nc(n,e):n));const ac=async(e,n,t,r)=>{const{pd:a,abstractionLoader:o,errors:i,warnings:s}=e;t.nodes={...t.nodes};for(let l of Object.values(t.nodes)){if(i.hasOwnProperty(l.type))continue;if("subpatch"===l.nodeClass){l=t.nodes[l.id]={...l,patchId:ic(r.patches,l.patchId)},await ac(e,n,Ju(a,l.patchId),r);continue}if("array"===l.nodeClass){l=t.nodes[l.id]={...l,arrayId:ic(r.arrays,l.arrayId)};continue}if(null!==ec(e.nodeBuilders,l.type))continue;const u=await oc(e,l.type,o);if(u.parsingWarnings&&(s[l.type]=u.parsingWarnings),1===u.status){const{status:e,parsingWarnings:n,...t}=u;i[l.type]=t;continue}const[c,d]=sc(a,u.pd),p=Zu(d);l=t.nodes[l.id]={...l,args:rc(n,l.args),nodeClass:"subpatch",patchId:p.id,type:"pd"},p.args=l.args,Object.values(d.arrays).forEach((e=>e.args=tc(p,e.args))),a.patches={...a.patches,...d.patches},a.arrays={...a.arrays,...d.arrays},await ac(e,p,p,c)}},oc=async(e,n,t)=>{if(!e.abstractions[n]){const r=await t(n);return 0===r.status&&(e.abstractions[n]=r.pd),r}return{status:0,pd:e.abstractions[n]}},ic=(e,n)=>{const t=e.get(n);if(void 0===t)throw new Error("Could not resolve ".concat(n));return t},sc=(e,n)=>{const t={patches:{},arrays:{},rootPatchId:n.rootPatchId},r={patches:new Map,arrays:new Map};let a=Object.keys(e.patches);a=a.length?a:["-1"];let o=Object.keys(e.arrays);o=o.length?o:["-1"];let i=Math.max(...a.map((e=>parseInt(e))))+1,s=Math.max(...o.map((e=>parseInt(e))))+1;return Object.entries(n.patches).forEach((e=>{let[n,a]=e;const o="".concat(i++);r.patches.set(n,o),t.patches[o]={...a,id:o}})),Object.entries(n.arrays).forEach((e=>{let[n,a]=e;const o="".concat(s++);r.arrays.set(n,o),t.arrays[o]={...a,id:o}})),t.rootPatchId=ic(r.patches,t.rootPatchId),[r,t]},lc={translateArgs:()=>({}),build:()=>({inlets:{},outlets:{}})},uc={pd:lc,inlet:lc,outlet:lc,"inlet~":lc,"outlet~":lc},cc=e=>{if("number"!==typeof e)throw new hc("".concat(e," is not a number"));return e},dc=e=>{if("string"!==typeof e)throw new hc("".concat(e," is not a string"));return e},pc=e=>void 0!==e?cc(e):void 0,fc=e=>void 0!==e?dc(e):void 0;class hc extends Error{}var mc;const gc={translateArgs:e=>({channelCount:cc(e.args[0])}),build:e=>({inlets:Zo(Jo(e.channelCount),(e=>["".concat(e),{type:"signal",id:"".concat(e)}])),outlets:{0:{type:"signal",id:"0"}}})},yc={flags:{isPureFunction:!0,isDspInline:!0,alphaName:"_mixer_t"},dsp:e=>{let{node:n,ins:t}=e;return ii(mc||(mc=r(["",""])),Object.keys(n.inlets).map((e=>t[e])).join(" + "))}};var bc,vc,wc;const Sc=(e,n)=>ri([ei(n.Message,"m")])(bc||(bc=r(["\n    if (","(m, [","])) {\n        "," = ","(m, 0)\n        return\n    }\n"])),n.isMatching,n.FLOAT_TOKEN,e,n.readFloatToken),kc=(e,n)=>ri([ei(n.Message,"m")])(vc||(vc=r(["\n    if (","(m, [","])) {\n        "," = ","(m, 0)\n        return\n    }\n"])),n.isMatching,n.STRING_TOKEN,e,n.readStringToken),xc=(e,n,t)=>ri([ei(t.Message,"m")])(wc||(wc=r(["\n    if (","(m, [","])) {\n        ","(",", ","(m, 0))\n        return\n    }\n"])),t.isMatching,t.FLOAT_TOKEN,e,n,t.readFloatToken);var Ic;const _c={translateArgs:e=>{let{args:n}=e;return{initValue:pc(n[0])||0}},build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"signal",id:"0"}}})},Ac={flags:{isPureFunction:!0,isDspInline:!0,alphaName:"sig_t"},state:e=>{let{node:{args:n},ns:t}=e;return ai(t.State,[ei("Float","currentValue",n.initValue)])},dsp:e=>{let{state:n}=e;return ii(Ic||(Ic=r(["",".currentValue"])),n)},messageReceivers:(e,n)=>{let{state:t}=e,{msg:r}=n;return{0:Sc("".concat(t,".currentValue"),r)}}};var Tc;const Ec={translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}}})},Oc={messageReceivers:(e,n)=>{let{snds:t}=e,{msg:a}=n;return{0:ri([ei(a.Message,"m")])(Tc||(Tc=r(["\n            if (","(m, [","])) {\n                ","(m)\n                return\n            } else {\n                ","(m)\n                return\n            }\n        "])),a.isMatching,a.FLOAT_TOKEN,t.$0,t.$1)}}},Cc="_mixer~",Nc="_routemsg",Mc="sig~";var Pc;!function(e){e.PD="n",e.IMPLICIT_NODE="m"}(Pc||(Pc={}));const Fc=(e,n)=>"".concat(Pc.PD,"_").concat(e,"_").concat(n),Rc=e=>e.toString(10),Lc=(e,n)=>(n=n.replaceAll(/[^a-zA-Z0-9_]/g,""),"".concat(Pc.IMPLICIT_NODE,"_").concat(e.nodeId,"_").concat(e.portletId,"_").concat(n));var Dc=async function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:async e=>({status:1,unknownNodeType:e});const r=await(async(e,n,t)=>{const[r,a]=sc({patches:{},arrays:{},rootPatchId:e.rootPatchId},e),o={pd:a,nodeBuilders:n,abstractions:{},errors:{},warnings:{},abstractionLoader:t},i=Zu(o.pd);return Object.values(o.pd.arrays).forEach((e=>e.args=tc(i,e.args))),await ac(o,i,i,r),Object.keys(o.errors).length?{status:1,pd:o.pd,errors:o.errors,warnings:o.warnings}:{status:0,pd:o.pd,abstractions:o.abstractions,warnings:o.warnings}})(e,n,t),a=Object.keys(r.warnings);if(1===r.status)return{status:1,abstractionsLoadingErrors:r.errors,abstractionsLoadingWarnings:a?r.warnings:void 0};const{pd:o}=r,i={pd:o,nodeBuilders:n,graph:{}},s=Zu(o);Kc(i,[s],jc),Bc(i,[s]),Object.values(i.graph).forEach((e=>{Object.keys(uc).includes(e.type)&&((e,n)=>{const t=e[n];t&&(Object.values(t.sources).forEach((t=>t.slice(0).forEach((t=>Su(e,t.nodeId,n))))),Object.values(t.sinks).forEach((t=>t.slice(0).forEach((t=>Su(e,n,t.nodeId))))),delete e[n])})(i.graph,e.id)}));const l=Object.values(i.pd.arrays).reduce(((e,n)=>(e[n.args[0]]=n.data?new Float32Array(n.data):new Float32Array(n.args[1]),e)),{});return{status:0,graph:i.graph,pd:i.pd,arrays:l,abstractionsLoadingWarnings:a?r.warnings:void 0}};const jc=(e,n)=>{const t=qc(n),r=Xc(n);Object.values(t.nodes).forEach((n=>{const a=Fc(t.id,n.id);zc(e,r,t,n,a)}))},zc=(e,n,t,r,a)=>{const o=ec(e.nodeBuilders,r.type);if(null===o)throw new Error("unknown node type ".concat(r.type));const{nodeBuilder:i,nodeType:s}=o;if(!0===i.isNoop)return null;i.skipDollarArgsResolution||(r={...r,args:rc(n,r.args)});const l=i.translateArgs(r,t,e.pd),u=i.build(l);return vu(e.graph,{...Ti(a,s),args:l,...u})},Bc=(e,n)=>{const{graph:t}=e;let r=[];Kc(e,n,((e,n)=>{Vc(e,n,r)}));const a=$c(e,r);Object.values(t).forEach((n=>{Object.values(n.inlets).forEach((r=>{const o={nodeId:n.id,portletId:r.id},i=(a[n.id]?a[n.id][r.id]:void 0)||{signalSources:[],messageSources:[]};if("signal"===r.type){const{nodeBuilder:r}=ec(e.nodeBuilders,n.type),a=r.configureMessageToSignalConnection?r.configureMessageToSignalConnection(o.portletId,n.args):void 0;Wc(t,i.signalSources,i.messageSources,o,a)}else{if(0!==i.signalSources.length)throw new Error("Unexpected signal connection to node id ".concat(o.nodeId,", inlet ").concat(o.portletId));Uc(t,i.messageSources,o)}}))}))},Uc=(e,n,t)=>n.forEach((n=>{wu(e,n,t)})),Wc=(e,n,t,r,a)=>{let o=null;if(1===n.length)wu(e,n[0],r);else if(n.length>1){const t={channelCount:n.length},a=vu(e,{...Ti(Lc(r,Cc),Cc),args:t,...gc.build(t)});wu(e,{nodeId:a.id,portletId:"0"},r),n.forEach(((n,t)=>{wu(e,n,{nodeId:a.id,portletId:Rc(t)})}))}else{const n={initValue:a?a.initialSignalValue:0};o=vu(e,{...Ti(Lc(r,Mc),Mc),args:n,..._c.build(n)}),wu(e,{nodeId:o.id,portletId:"0"},r)}if(t.length){const n={},i=vu(e,{...Ti(Lc(r,Nc),Nc),args:n,...Ec.build(n)});let s=!1;o&&(wu(e,{nodeId:i.id,portletId:"0"},{nodeId:o.id,portletId:"0"}),s=!0),a&&void 0!==a.reroutedMessageInletId&&(wu(e,{nodeId:i.id,portletId:"1"},{nodeId:r.nodeId,portletId:a.reroutedMessageInletId}),s=!0),s&&t.forEach((n=>{wu(e,n,{nodeId:i.id,portletId:"0"})}))}},$c=(e,n)=>{const{graph:t}=e,r={};return n.forEach((e=>{const[a,o]=e,[i,s]=o,l=Fc(qc(i).id,s.nodeId);r[l]=r[l]||{};const u=Rc(s.portletId);if(r[l][u])return;let c=[];n.forEach((e=>{const[n,t]=e;ed(o,t)&&c.push(n)}));const d=[],p=[];c.forEach((e=>{let[n,r]=e;const a=qc(n),o={nodeId:Fc(a.id,r.nodeId),portletId:Rc(r.portletId)},i=di(t,o.nodeId);"signal"===fi(i,o.portletId).type?d.push(o):p.push(o)})),r[l][u]={signalSources:d,messageSources:p}})),r},Vc=(e,n,t)=>{const{graph:r}=e,a=qc(n);a.connections.filter((e=>{let{source:n,sink:t}=e;const o=Fc(a.id,n.nodeId),i=Fc(a.id,t.nodeId);return!(!r[o]||!r[i])})).forEach((r=>{let{source:a,sink:o}=r;const i=Gc(e,[n,a]),s=Hc(e,n,o);i.forEach((e=>s.forEach((n=>{t.some((t=>{let[r,a]=t;return ed(e,r)&&ed(n,a)}))||t.push([e,n])}))))}))},Gc=(e,n)=>{let[t,r]=n;const{pd:a}=e,o=qc(t),i=Qu(o,r.nodeId);if("inlet"===i.type||"inlet~"===i.type){const n=Yc(t);if(!n)return[];const r=Qc(n,o.id),a=Zc(o.inlets,i.id);return n.connections.filter((e=>{let{sink:n}=e;return n.nodeId===r.id&&n.portletId===a})).flatMap((n=>{let{source:r}=n;return Gc(e,[[...t.slice(0,-1)],r])}))}if("subpatch"===i.nodeClass){const n=Ju(a,i.patchId),o=Jc(n.outlets,r.portletId);return n.connections.filter((e=>{let{sink:n}=e;return n.nodeId===o&&0===n.portletId})).flatMap((r=>{let{source:a}=r;return Gc(e,[[...t,n],a])}))}return[[t,r]]},Hc=(e,n,t)=>{const{pd:r}=e,a=qc(n),o=Qu(a,t.nodeId);if("outlet"===o.type||"outlet~"===o.type){const t=Yc(n);if(!t)return[];const r=Qc(t,a.id),i=Zc(a.outlets,o.id);return t.connections.filter((e=>{let{source:n}=e;return n.nodeId===r.id&&n.portletId===i})).flatMap((t=>{let{sink:r}=t;return Hc(e,[...n.slice(0,-1)],r)}))}if("subpatch"===o.nodeClass){const a=Ju(r,o.patchId),i=Jc(a.inlets,t.portletId);return a.connections.filter((e=>{let{source:n}=e;return n.nodeId===i&&0===n.portletId})).flatMap((t=>{let{sink:r}=t;return Hc(e,[...n,a],r)}))}return[[n,t]]},Kc=(e,n,t)=>{const r=qc(n);t(e,n),Object.values(r.nodes).forEach((r=>{if("subpatch"===r.nodeClass){const a=Ju(e.pd,r.patchId);Kc(e,[...n,a],t)}}))},qc=e=>{const n=e.slice(-1)[0];if(!n)throw new Error("patchPath empty !");return n},Yc=e=>e.length<2?null:e.slice(-2)[0],Xc=e=>{const n=e.slice(0).reverse().find((e=>e.isRoot));if(!n)throw new Error("Could not resolve root patch from path");return n},Jc=(e,n)=>{const t=e[n];if(void 0===t)throw new Error("Portlet ".concat(n," is undefined in patch.outlets/patch.inlets"));return t},Zc=(e,n)=>e.findIndex((e=>e===n)),Qc=(e,n)=>{const t=Object.values(e.nodes).find((e=>"subpatch"===e.nodeClass&&e.patchId===n));if(void 0===t)throw new Error("could not find subpatch node with patchId=".concat(n," inside patch ").concat(e.id));return t},ed=(e,n)=>{let[t,r]=e,[a,o]=n;return qc(t).id===qc(a).id&&r.nodeId===o.nodeId&&r.portletId===o.portletId},nd=e=>td(e,Zu(e)),td=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===t&&(t={topLeft:{x:-1/0,y:-1/0},bottomRight:{x:1/0,y:1/0}});const r=[];return Object.values(n.nodes).forEach((a=>{if("pd"===a.type&&"subpatch"===a.nodeClass){const s=e.patches[a.patchId],l=od(a);if(!s.layout.graphOnParent)return;const u=ad(s),c=((e,n)=>{const t=n.x-e.x,r=n.y-e.y;return e=>({x:e.x+t,y:e.y+r})})({x:l.x,y:l.y},{x:u.viewportX,y:u.viewportY}),d={topLeft:c(t.topLeft),bottomRight:c(t.bottomRight)},p={x:u.viewportX,y:u.viewportY},f=((e,n)=>{const t={x:Math.max(e.topLeft.x,n.topLeft.x),y:Math.max(e.topLeft.y,n.topLeft.y)},r={x:Math.min(e.bottomRight.x,n.bottomRight.x),y:Math.min(e.bottomRight.y,n.bottomRight.y)};return r.x<=t.x||r.y<=t.y?null:{topLeft:t,bottomRight:r}})(d,{topLeft:p,bottomRight:(o=p,i={x:u.viewportWidth,y:u.viewportHeight},{x:o.x+i.x,y:o.y+i.y})});if(null===f)return;const h=td(e,s,f),m={nodeClass:"subpatch",patchId:n.id,pdNodeId:a.id,children:h};r.push(m)}else if(a.type in vo&&"control"===a.nodeClass){const e=od(a);if(!((e,n)=>n.topLeft.x<=e.x&&e.x<=n.bottomRight.x&&n.topLeft.y<=e.y&&e.y<=n.bottomRight.y)({x:e.x,y:e.y},t))return;const o={nodeClass:"control",patchId:n.id,pdNodeId:a.id,nodeId:Fc(n.id,a.id)};r.push(o)}else if(n.id===e.rootPatchId&&"text"===a.nodeClass){const e={nodeClass:"text",patchId:n.id,pdNodeId:a.id};r.push(e)}var o,i})),r},rd=(e,n)=>{e.forEach((e=>{"subpatch"===e.nodeClass?(n(e),rd(e.children,n)):n(e)}))},ad=e=>{const n=e.layout,t=n.viewportX,r=n.viewportY,a=n.viewportWidth,o=n.viewportHeight;if("number"!==typeof t||"number"!==typeof r||"number"!==typeof a||"number"!==typeof o)throw new Error("Missing patch layout attributes");return{viewportX:t,viewportY:r,viewportWidth:a,viewportHeight:o}},od=e=>{const n=e.layout.x,t=e.layout.y;if("number"!==typeof n||"number"!==typeof t)throw new Error("Missing node layout attributes");let r=null;return"control"===e.nodeClass?r=e.layout.label:"subpatch"===e.nodeClass&&(r=e.args[0]?e.args[0].toString():null),{x:n,y:t,label:r}},id="webpd-runtime.js";const sd=(e,n,t,r,a)=>{if(Object.keys(e).length){const a={};return rd(n.pdGui,(e=>{"control"===e.nodeClass&&(a[e.nodeId]=e)})),Object.entries(e).flatMap((e=>{let[o,i]=e;return i.map((e=>{const i=di(n.graph,o);if("send"===i.type||"receive"===i.type)return r(i,e);const s=a[o];if(s){if("control"===s.nodeClass){const r=n.pdNodes[s.patchId][s.pdNodeId];return t(i,e,r.layout)}return""}return""}))})).join("")}return a},ld=e=>{let{refs:n,cache:t}=e;t.wasmOutput=zu(n.rawModule,t.arrayType,n.rawModule.globals.core.x_getOutput()),t.wasmInput=zu(n.rawModule,t.arrayType,n.rawModule.globals.core.x_getInput())},ud=e=>{const{refs:n,cache:t,metadata:r}=e;return{initialize:{type:"proxy",value:(a,o)=>{r.settings.audio.blockSize=o,r.settings.audio.sampleRate=a,t.blockSize=o,n.rawModule.initialize(a,o),ld(e)}},dspLoop:{type:"proxy",value:(r,a)=>{for(let e=0;e<r.length;e++)t.wasmInput.set(r[e],e*t.blockSize);ld(e),n.rawModule.dspLoop(),ld(e);for(let e=0;e<a.length;e++)a[e].set(t.wasmOutput.subarray(t.blockSize*e,t.blockSize*(e+1)))}}}},cd=e=>{const{refs:n,cache:t}=e;return{getArray:{type:"proxy",value:e=>{const r=ju(n.rawModule,e),a=n.rawModule.globals.commons.getArray(r);return zu(n.rawModule,t.arrayType,a)}},setArray:{type:"proxy",value:(r,a)=>{const o=ju(n.rawModule,r),{arrayPointer:i}=Bu(n.rawModule,t.bitDepth,a);n.rawModule.globals.commons.setArray(o,i),ld(e)}}}},dd=(e,n)=>{const t=e.globals.msg.x_getTokenTypes(n),r=zu(e,Int32Array,t),a=[];return r.forEach(((t,r)=>{if(t===e.globals.msg.FLOAT_TOKEN.valueOf())a.push(e.globals.msg.readFloatToken(n,r));else if(t===e.globals.msg.STRING_TOKEN.valueOf()){const t=e.globals.msg.readStringToken(n,r);a.push(Du(e,t))}})),a},pd=e=>{let{metadata:n,refs:t}=e;return Object.entries(n.settings.io.messageReceivers).reduce(((e,n)=>{let[r,a]=n;return{...e,[r]:{type:"proxy",value:Zo(a,(e=>[e,n=>{const a=((e,n)=>{const t=n.reduce(((n,t)=>{if("number"===typeof t)n.push(e.globals.msg.FLOAT_TOKEN.valueOf());else{if("string"!==typeof t)throw new Error("invalid message value ".concat(t));n.push(e.globals.msg.STRING_TOKEN.valueOf()),n.push(t.length)}return n}),[]),r=e.globals.msg.x_createTemplate(t.length);zu(e,Int32Array,r).set(t);const a=e.globals.msg.x_create(r);return n.forEach(((n,t)=>{if("number"===typeof n)e.globals.msg.writeFloatToken(a,t,n);else if("string"===typeof n){const r=ju(e,n);e.globals.msg.writeStringToken(a,t,r)}})),a})(t.rawModule,n);t.rawModule.io.messageReceivers[r][e](a)}]))}}}),{})},fd=e=>{let{metadata:n}=e;return Object.entries(n.settings.io.messageSenders).reduce(((e,n)=>{let[t,r]=n;return{...e,[t]:{type:"proxy",value:Zo(r,(e=>[e,e=>{}]))}}}),{})},hd=e=>{let{metadata:n,refs:t}=e;const r={},{variableNamesIndex:a}=n.compilation;return Object.entries(n.settings.io.messageSenders).forEach((e=>{let[n,o]=e;o.forEach((e=>{const o=a.io.messageSenders[n][e];r[o]=r=>{const a=dd(t.rawModule,r);t.engine.io.messageSenders[n][e](a)}}))})),r},md=e=>{const n={},{cache:t,metadata:r,refs:a}=e,o=r.compilation.variableNamesIndex.globals;if("fs"in o){const r=Lu(n,o.fs);"i_readSoundFile"in o.fs&&(r.i_readSoundFile=(e,n,t)=>{const r=Du(a.rawModule,n),o=dd(a.rawModule,t);a.engine.globals.fs.onReadSoundFile(e,r,o)}),"i_writeSoundFile"in o.fs&&(r.i_writeSoundFile=(e,n,r,o)=>{const i=Wu(a.rawModule,t.bitDepth,n),s=Du(a.rawModule,r),l=dd(a.rawModule,o);a.engine.globals.fs.onWriteSoundFile(e,i,s,l)}),"i_openSoundReadStream"in o.fs&&(r.i_openSoundReadStream=(n,t,r)=>{const o=Du(a.rawModule,t),i=dd(a.rawModule,r);ld(e),a.engine.globals.fs.onOpenSoundReadStream(n,o,i)}),"i_openSoundWriteStream"in o.fs&&(r.i_openSoundWriteStream=(e,n,t)=>{const r=Du(a.rawModule,n),o=dd(a.rawModule,t);a.engine.globals.fs.onOpenSoundWriteStream(e,r,o)}),"i_sendSoundStreamData"in o.fs&&(r.i_sendSoundStreamData=(e,n)=>{const r=Wu(a.rawModule,t.bitDepth,n);a.engine.globals.fs.onSoundStreamData(e,r)}),"i_closeSoundStream"in o.fs&&(r.i_closeSoundStream=function(){return a.engine.globals.fs.onCloseSoundStream(...arguments)})}return n},gd=e=>{const{metadata:n,refs:t}=e,r=n.compilation.variableNamesIndex.globals,a={messageReceivers:Fu(t.rawModule,pd(e)),messageSenders:Fu(t.rawModule,fd(e))},o={commons:{type:"proxy",value:Fu(t.rawModule,cd(e))}};if("fs"in r){const n=Fu(t.rawModule,(e=>{const{refs:n,cache:t,metadata:r}=e,a=r.compilation.variableNamesIndex.globals.fs;return{sendReadSoundFileResponse:{type:"proxy",value:"x_onReadSoundFileResponse"in a?(r,a,o)=>{let i=0;o&&(i=Uu(n.rawModule,t.bitDepth,o)),n.rawModule.globals.fs.x_onReadSoundFileResponse(r,a,i),ld(e)}:void 0},sendWriteSoundFileResponse:{type:"proxy",value:"x_onWriteSoundFileResponse"in a?n.rawModule.globals.fs.x_onWriteSoundFileResponse:void 0},sendSoundStreamData:{type:"proxy",value:"x_onSoundStreamData"in a?(r,a)=>{const o=Uu(n.rawModule,t.bitDepth,a),i=n.rawModule.globals.fs.x_onSoundStreamData(r,o);return ld(e),i}:void 0},closeSoundStream:{type:"proxy",value:"x_onCloseSoundStream"in a?n.rawModule.globals.fs.x_onCloseSoundStream:void 0},onReadSoundFile:{type:"callback",value:()=>{}},onWriteSoundFile:{type:"callback",value:()=>{}},onOpenSoundReadStream:{type:"callback",value:()=>{}},onOpenSoundWriteStream:{type:"callback",value:()=>{}},onSoundStreamData:{type:"callback",value:()=>{}},onCloseSoundStream:{type:"callback",value:()=>{}}}})(e));o.fs={type:"proxy",value:n}}return{...ud(e),metadata:{type:"proxy",value:n},globals:{type:"proxy",value:Fu(t.rawModule,o)},io:{type:"proxy",value:a}}},yd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function bd(e,n,t,r){if(["32f","64"].indexOf(n)>-1&&["32f","64"].indexOf(r)>-1)return void t.set(e);kd(n),kd(r);let a=function(e,n){let t=function(e){return e};e!=n&&(t=["32f","64"].includes(e)?wd:["32f","64"].includes(n)?Sd:vd);return t}(n,r),o={oldMin:Math.pow(2,parseInt(n,10))/2,newMin:Math.pow(2,parseInt(r,10))/2,oldMax:Math.pow(2,parseInt(n,10))/2-1,newMax:Math.pow(2,parseInt(r,10))/2-1};xd(n,e,!0);for(let i=0,s=e.length;i<s;i++)t[i]=a(e[i],o);xd(r,t,!1)}function vd(e,n){return e=e>0?parseInt(e/n.oldMax*n.newMax,10):parseInt(e/n.oldMin*n.newMin,10)}function wd(e,n){return parseInt(e>0?e*n.newMax:e*n.newMin,10)}function Sd(e,n){return e>0?e/n.oldMax:e/n.oldMin}function kd(e){if("32f"!=e&&"64"!=e&&(parseInt(e,10)<"8"||parseInt(e,10)>"53"))throw new Error("Invalid bit depth.")}function xd(e,n,t){if("8"==e){let e=t?-128:128;for(let t=0,r=n.length;t<r;t++)n[t]=n[t]+=e}}const Id=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],_d=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767];function Ad(e,n){let t=function(e,n){Ed(e,n);let t=[];return t.push(255&e),t.push(e>>8&255),t.push(n.index),t.push(0),t}(e[0],n);for(let r=3,a=e.length;r<a;r+=2){let a=Ed(e[r],n),o=Ed(e[r+1],n);t.push(o<<4|a)}return t}function Td(e,n){var t;n.predicted=(t=e[1]<<8|e[0])>32768?t-65536:t,n.index=e[2],n.step=_d[n.index];let r=[n.predicted,n.predicted];for(let a=4,o=e.length;a<o;a++){let t=e[a],o=t>>4,i=o<<4^t;r.push(Od(i,n)),r.push(Od(o,n))}return r}function Ed(e,n){let t=e-n.predicted,r=0;t>=0?r=0:(r=8,t=-t);let a=_d[n.index],o=a>>3;return t>a&&(r|=4,t-=a,o+=a),a>>=1,t>a&&(r|=2,t-=a,o+=a),a>>=1,t>a&&(r|=1,o+=a),function(e,n,t){8&e?t.predicted-=n:t.predicted+=n;t.predicted<-32768?t.predicted=-32768:t.predicted>32767&&(t.predicted=32767);t.index+=Id[7&e],t.index<0?t.index=0:t.index>88&&(t.index=88)}(r,o,n),r}function Od(e,n){let t=0;return 4&e&&(t+=n.step),2&e&&(t+=n.step>>1),1&e&&(t+=n.step>>2),t+=n.step>>3,8&e&&(t=-t),n.predicted+=t,n.predicted>32767?n.predicted=32767:n.predicted<-32767&&(n.predicted=-32767),function(e,n){n.index+=Id[e],n.index<0?n.index=0:n.index>88&&(n.index=88);n.step=_d[n.index]}(e,n),n.predicted}const Cd=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];function Nd(e){let n,t=~(e=-32768==e?-32767:e)>>8&128;if(t||(e*=-1),e>32635&&(e=32635),e>=256){let t=Cd[e>>8&127];n=t<<4|e>>t+3&15}else n=e>>4;return 85^n^t}function Md(e){let n=0;0!==(128&(e^=85))&&(e&=-129,n=-1);let t=4+((240&e)>>4),r=0;return r=4!=t?1<<t|(15&e)<<t-4|1<<t-5:e<<1|1,r=0===n?r:-r,8*r*-1}const Pd=132,Fd=32635,Rd=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],Ld=[0,132,396,924,1980,4092,8316,16764];function Dd(e){let n,t,r,a;return n=e>>8&128,0!=n&&(e=-e),(e+=Pd)>Fd&&(e=Fd),t=Rd[e>>7&255],r=e>>t+3&15,a=~(n|t<<4|r),a}function jd(e){let n,t,r,a;return n=128&(e=~e),t=e>>4&7,r=15&e,a=Ld[t]+(r<<t+3),0!=n&&(a=-a),a}function zd(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;for(let a=t;a<r;a+=n)Bd(e,n,a)}function Bd(e,n,t){n--;for(let r=0;r<n;r++){let a=e[t+r];e[t+r]=e[t+n],e[t+n]=a,n--}}function Ud(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0,a=e.length;for(;r<a;){let a=e.codePointAt(r);if(a<128)n[t]=a,t++;else{let e=0,o=0;for(a<=2047?(e=1,o=192):a<=65535?(e=2,o=224):a<=1114111&&(e=3,o=240,r++),n[t]=(a>>6*e)+o,t++;e>0;)n[t]=128|a>>6*(e-1)&63,t++,e--}r++}return t}class Wd{constructor(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.bits=e,this.offset=Math.ceil(e/8),this.max=Math.pow(2,e)-1,this.min=0,this.unpack=this.unpack_,n&&(this.max=Math.pow(2,e)/2-1,this.min=-this.max-1,this.unpack=this.unpackSigned_)}pack(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n=this.clamp_(Math.round(n));for(let r=0,a=this.offset;r<a;r++)e[t]=255&Math.floor(n/Math.pow(2,8*r)),t++;return t}unpack_(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=0;for(let r=0;r<this.offset;r++)t+=e[n+r]*Math.pow(256,r);return t}unpackSigned_(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.sign_(this.unpack_(e,n))}clamp_(e){return e>this.max?this.max:e<this.min?this.min:e}sign_(e){return e>this.max&&(e-=2*this.max+2),e}}class $d{constructor(e,n){this.offset=Math.ceil((e+n)/8),this.ebits=e,this.fbits=n,this.bias=(1<<e-1)-1,this.biasP2=Math.pow(2,this.bias+1),this.ebitsFbits=e+n,this.fbias=Math.pow(2,-(8*this.offset-1-e))}pack(e,n,t){Math.abs(n)>this.biasP2-2*this.ebitsFbits&&(n=n<0?-1/0:1/0);let r=((n=+n)||1/n)<0||n<0?1:0;n=Math.abs(n);let a=Math.min(Math.floor(Math.log(n)/Math.LN2),1023),o=Vd(n/Math.pow(2,a)*Math.pow(2,this.fbits));return n!==n?(o=Math.pow(2,this.fbits-1),a=(1<<this.ebits)-1):0!==n&&(n>=Math.pow(2,1-this.bias)?(o/Math.pow(2,this.fbits)>=2&&(a+=1,o=1),a>this.bias?(a=(1<<this.ebits)-1,o=0):(a+=this.bias,o=Vd(o)-Math.pow(2,this.fbits))):(o=Vd(n/Math.pow(2,1-this.bias-this.fbits)),a=0)),this.packFloatBits_(e,t,r,a,o)}unpack(e,n){let t,r=(1<<this.ebits)-1,a="";for(let s=this.offset-1;s>=0;s--){let t=e[s+n].toString(2);a+="00000000".substring(t.length)+t}let o="1"==a.charAt(0)?-1:1;a=a.substring(1);let i=parseInt(a.substring(0,this.ebits),2);return a=a.substring(this.ebits),i==r?0!==parseInt(a,2)?NaN:o*(1/0):(0===i?(i+=1,t=parseInt(a,2)):t=parseInt("1"+a,2),o*t*this.fbias*Math.pow(2,i-this.bias))}packFloatBits_(e,n,t,r,a){let o=[];o.push(t);for(let c=this.ebits;c>0;c-=1)o[c]=r%2?1:0,r=Math.floor(r/2);let i=o.length;for(let c=this.fbits;c>0;c-=1)o[i+c]=a%2?1:0,a=Math.floor(a/2);let s=o.join(""),l=this.offset+n-1,u=n;for(;l>=n;)e[l]=parseInt(s.substring(0,8),2),s=s.substring(8),l--,u++;return u}}function Vd(e){let n=Math.floor(e),t=e-n;return t<.5?n:t>.5||n%2?n+1:n}function Gd(e){return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r="";for(let a=n;a<t;){let n=128,t=191,o=!1,i=e[a++];if(i>=0&&i<=127)r+=String.fromCharCode(i);else{let s=0;i>=194&&i<=223?s=1:i>=224&&i<=239?(s=2,224===e[a]&&(n=160),237===e[a]&&(t=159)):i>=240&&i<=244?(s=3,240===e[a]&&(n=144),244===e[a]&&(t=143)):o=!0,i&=(1<<8-s-1)-1;for(let r=0;r<s;r++)(e[a]<n||e[a]>t)&&(o=!0),i=i<<6|63&e[a],a++;o?r+=String.fromCharCode(65533):i<=65535?r+=String.fromCharCode(i):(i-=65536,r+=String.fromCharCode(55296+(i>>10&1023),56320+(1023&i)))}}return r}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length)}function Hd(e){let n=[];return Ud(e,n),n}function Kd(e,n){return Ud(e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)}function qd(e,n,t){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=ep((n=n||{}).bits,n.fp,n.signed),o=Math.ceil(n.bits/8),i=0,s=r;for(let l=e.length;i<l;i++)r=a.pack(t,e[i],r);return n.be&&zd(t,o,s,r),r}function Yd(e,n,t){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length,o=ep((n=n||{}).bits,n.fp,n.signed);if(a=function(e,n,t,r){let a=(t-n)%r;return t-a}(0,r,a,o.offset),n.be){let i=function(e){return new Uint8Array(e)}(e);n.be&&zd(i,o.offset,r,a),Qd(i,t,r,a,o)}else Qd(e,t,r,a,o)}function Xd(e,n,t){return qd([e],n,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)}function Jd(e,n){let t=[];return Xd(e,n,t,0),t}function Zd(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];return Yd(e,n,r,t,t+Math.ceil(n.bits/8)),r[0]}function Qd(e,n,t,r,a){let o=a.offset;for(let i=0,s=t;s<r;s+=o,i++)n[i]=a.unpack(e,s)}function ep(e,n,t){return n&&32==e?new $d(8,23):n&&64==e?new $d(11,52):new Wd(e,t)}class np{constructor(){this.container="",this.chunkSize=0,this.format="",this.signature=null,this.head=0,this.uInt32={bits:32,be:!1},this.supported_containers=["RIFF","RIFX"]}setSignature(e){if(this.head=0,this.container=this.readString(e,4),-1===this.supported_containers.indexOf(this.container))throw Error("Not a supported format.");this.uInt32.be="RIFX"===this.container,this.chunkSize=this.readUInt32(e),this.format=this.readString(e,4),this.signature={chunkId:this.container,chunkSize:this.chunkSize,format:this.format,subChunks:this.getSubChunksIndex_(e)}}findChunk(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=this.signature.subChunks,r=[];for(let a=0;a<t.length;a++)if(t[a].chunkId==e){if(!n)return t[a];r.push(t[a])}return"LIST"==e&&r.length?r:null}readString(e,n){let t="";return t=Gd(e,this.head,this.head+n),this.head+=n,t}readUInt32(e){let n=Zd(e,this.uInt32,this.head);return this.head+=4,n}getSubChunksIndex_(e){let n=[],t=this.head;for(;t<=e.length-8;)n.push(this.getSubChunkIndex_(e,t)),t+=8+n[n.length-1].chunkSize,t=t%2?t+1:t;return n}getSubChunkIndex_(e,n){let t={chunkId:this.getChunkId_(e,n),chunkSize:this.getChunkSize_(e,n)};if("LIST"==t.chunkId)t.format=Gd(e,n+8,n+12),this.head+=4,t.subChunks=this.getSubChunksIndex_(e);else{let e=t.chunkSize%2?t.chunkSize+1:t.chunkSize;this.head=n+8+e,t.chunkData={start:n+8,end:this.head}}return t}getChunkId_(e,n){return this.head+=4,Gd(e,n,n+4)}getChunkSize_(e,n){return this.head+=4,Zd(e,this.uInt32,n+4)}}class tp extends np{constructor(){super(),this.supported_containers.push("RF64"),this.fmt={chunkId:"",chunkSize:0,audioFormat:0,numChannels:0,sampleRate:0,byteRate:0,blockAlign:0,bitsPerSample:0,cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]},this.fact={chunkId:"",chunkSize:0,dwSampleLength:0},this.cue={chunkId:"",chunkSize:0,dwCuePoints:0,points:[]},this.smpl={chunkId:"",chunkSize:0,dwManufacturer:0,dwProduct:0,dwSamplePeriod:0,dwMIDIUnityNote:0,dwMIDIPitchFraction:0,dwSMPTEFormat:0,dwSMPTEOffset:0,dwNumSampleLoops:0,dwSamplerData:0,loops:[]},this.bext={chunkId:"",chunkSize:0,description:"",originator:"",originatorReference:"",originationDate:"",originationTime:"",timeReference:[0,0],version:0,UMID:"",loudnessValue:0,loudnessRange:0,maxTruePeakLevel:0,maxMomentaryLoudness:0,maxShortTermLoudness:0,reserved:"",codingHistory:""},this.iXML={chunkId:"",chunkSize:0,value:""},this.ds64={chunkId:"",chunkSize:0,riffSizeHigh:0,riffSizeLow:0,dataSizeHigh:0,dataSizeLow:0,originationTime:0,sampleCountHigh:0,sampleCountLow:0},this.data={chunkId:"",chunkSize:0,samples:new Uint8Array(0)},this.LIST=[],this.junk={chunkId:"",chunkSize:0,chunkData:[]},this._PMX={chunkId:"",chunkSize:0,value:""},this.uInt16={bits:16,be:!1,signed:!1,fp:!1}}fromBuffer(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.clearHeaders(),this.setSignature(e),this.uInt16.be=this.uInt32.be,"WAVE"!=this.format)throw Error('Could not find the "WAVE" format identifier');this.readDs64Chunk_(e),this.readFmtChunk_(e),this.readFactChunk_(e),this.readBextChunk_(e),this.readiXMLChunk_(e),this.readCueChunk_(e),this.readSmplChunk_(e),this.readDataChunk_(e,n),this.readJunkChunk_(e),this.readLISTChunk_(e),this.read_PMXChunk_(e)}clearHeaders(){let e=new tp;Object.assign(this.fmt,e.fmt),Object.assign(this.fact,e.fact),Object.assign(this.cue,e.cue),Object.assign(this.smpl,e.smpl),Object.assign(this.bext,e.bext),Object.assign(this.iXML,e.iXML),Object.assign(this.ds64,e.ds64),Object.assign(this.data,e.data),this.LIST=[],Object.assign(this.junk,e.junk),Object.assign(this._PMX,e._PMX)}readFmtChunk_(e){let n=this.findChunk("fmt ");if(!n)throw Error('Could not find the "fmt " chunk');this.head=n.chunkData.start,this.fmt.chunkId=n.chunkId,this.fmt.chunkSize=n.chunkSize,this.fmt.audioFormat=this.readUInt16_(e),this.fmt.numChannels=this.readUInt16_(e),this.fmt.sampleRate=this.readUInt32(e),this.fmt.byteRate=this.readUInt32(e),this.fmt.blockAlign=this.readUInt16_(e),this.fmt.bitsPerSample=this.readUInt16_(e),this.readFmtExtension_(e)}readFmtExtension_(e){this.fmt.chunkSize>16&&(this.fmt.cbSize=this.readUInt16_(e),this.fmt.chunkSize>18&&(this.fmt.validBitsPerSample=this.readUInt16_(e),this.fmt.chunkSize>20&&(this.fmt.dwChannelMask=this.readUInt32(e),this.fmt.subformat=[this.readUInt32(e),this.readUInt32(e),this.readUInt32(e),this.readUInt32(e)])))}readFactChunk_(e){let n=this.findChunk("fact");n&&(this.head=n.chunkData.start,this.fact.chunkId=n.chunkId,this.fact.chunkSize=n.chunkSize,this.fact.dwSampleLength=this.readUInt32(e))}readCueChunk_(e){let n=this.findChunk("cue ");if(n){this.head=n.chunkData.start,this.cue.chunkId=n.chunkId,this.cue.chunkSize=n.chunkSize,this.cue.dwCuePoints=this.readUInt32(e);for(let n=0;n<this.cue.dwCuePoints;n++)this.cue.points.push({dwName:this.readUInt32(e),dwPosition:this.readUInt32(e),fccChunk:this.readString(e,4),dwChunkStart:this.readUInt32(e),dwBlockStart:this.readUInt32(e),dwSampleOffset:this.readUInt32(e)})}}readSmplChunk_(e){let n=this.findChunk("smpl");if(n){this.head=n.chunkData.start,this.smpl.chunkId=n.chunkId,this.smpl.chunkSize=n.chunkSize,this.smpl.dwManufacturer=this.readUInt32(e),this.smpl.dwProduct=this.readUInt32(e),this.smpl.dwSamplePeriod=this.readUInt32(e),this.smpl.dwMIDIUnityNote=this.readUInt32(e),this.smpl.dwMIDIPitchFraction=this.readUInt32(e),this.smpl.dwSMPTEFormat=this.readUInt32(e),this.smpl.dwSMPTEOffset=this.readUInt32(e),this.smpl.dwNumSampleLoops=this.readUInt32(e),this.smpl.dwSamplerData=this.readUInt32(e);for(let n=0;n<this.smpl.dwNumSampleLoops;n++)this.smpl.loops.push({dwName:this.readUInt32(e),dwType:this.readUInt32(e),dwStart:this.readUInt32(e),dwEnd:this.readUInt32(e),dwFraction:this.readUInt32(e),dwPlayCount:this.readUInt32(e)})}}readDataChunk_(e,n){let t=this.findChunk("data");if(!t)throw Error('Could not find the "data" chunk');this.data.chunkId="data",this.data.chunkSize=t.chunkSize,n&&(this.data.samples=e.slice(t.chunkData.start,t.chunkData.end))}readBextChunk_(e){let n=this.findChunk("bext");n&&(this.head=n.chunkData.start,this.bext.chunkId=n.chunkId,this.bext.chunkSize=n.chunkSize,this.bext.description=this.readString(e,256),this.bext.originator=this.readString(e,32),this.bext.originatorReference=this.readString(e,32),this.bext.originationDate=this.readString(e,10),this.bext.originationTime=this.readString(e,8),this.bext.timeReference=[this.readUInt32(e),this.readUInt32(e)],this.bext.version=this.readUInt16_(e),this.bext.UMID=this.readString(e,64),this.bext.loudnessValue=this.readUInt16_(e),this.bext.loudnessRange=this.readUInt16_(e),this.bext.maxTruePeakLevel=this.readUInt16_(e),this.bext.maxMomentaryLoudness=this.readUInt16_(e),this.bext.maxShortTermLoudness=this.readUInt16_(e),this.bext.reserved=this.readString(e,180),this.bext.codingHistory=this.readString(e,this.bext.chunkSize-602))}readiXMLChunk_(e){let n=this.findChunk("iXML");n&&(this.head=n.chunkData.start,this.iXML.chunkId=n.chunkId,this.iXML.chunkSize=n.chunkSize,this.iXML.value=Gd(e,this.head,this.head+this.iXML.chunkSize))}readDs64Chunk_(e){let n=this.findChunk("ds64");if(n)this.head=n.chunkData.start,this.ds64.chunkId=n.chunkId,this.ds64.chunkSize=n.chunkSize,this.ds64.riffSizeHigh=this.readUInt32(e),this.ds64.riffSizeLow=this.readUInt32(e),this.ds64.dataSizeHigh=this.readUInt32(e),this.ds64.dataSizeLow=this.readUInt32(e),this.ds64.originationTime=this.readUInt32(e),this.ds64.sampleCountHigh=this.readUInt32(e),this.ds64.sampleCountLow=this.readUInt32(e);else if("RF64"==this.container)throw Error('Could not find the "ds64" chunk')}readLISTChunk_(e){let n=this.findChunk("LIST",!0);if(null!==n)for(let t=0;t<n.length;t++){let r=n[t];this.LIST.push({chunkId:r.chunkId,chunkSize:r.chunkSize,format:r.format,subChunks:[]});for(let n=0;n<r.subChunks.length;n++)this.readLISTSubChunks_(r.subChunks[n],r.format,e)}}readLISTSubChunks_(e,n,t){"adtl"==n?["labl","note","ltxt"].indexOf(e.chunkId)>-1&&this.readLISTadtlSubChunks_(t,e):"INFO"==n&&this.readLISTINFOSubChunks_(t,e)}readLISTadtlSubChunks_(e,n){this.head=n.chunkData.start;let t={chunkId:n.chunkId,chunkSize:n.chunkSize,dwName:this.readUInt32(e)};"ltxt"==n.chunkId?(t.dwSampleLength=this.readUInt32(e),t.dwPurposeID=this.readUInt32(e),t.dwCountry=this.readUInt16_(e),t.dwLanguage=this.readUInt16_(e),t.dwDialect=this.readUInt16_(e),t.dwCodePage=this.readUInt16_(e),t.value=""):t.value=this.readZSTR_(e,this.head),this.LIST[this.LIST.length-1].subChunks.push(t)}readLISTINFOSubChunks_(e,n){this.head=n.chunkData.start,this.LIST[this.LIST.length-1].subChunks.push({chunkId:n.chunkId,chunkSize:n.chunkSize,value:this.readZSTR_(e,this.head)})}readJunkChunk_(e){let n=this.findChunk("junk");n&&(this.junk={chunkId:n.chunkId,chunkSize:n.chunkSize,chunkData:[].slice.call(e.slice(n.chunkData.start,n.chunkData.end))})}read_PMXChunk_(e){let n=this.findChunk("_PMX");n&&(this.head=n.chunkData.start,this._PMX.chunkId=n.chunkId,this._PMX.chunkSize=n.chunkSize,this._PMX.value=Gd(e,this.head,this.head+this._PMX.chunkSize))}readZSTR_(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let t=n;t<e.length&&(this.head++,0!==e[t]);t++);return Gd(e,n,this.head-1)}readUInt16_(e){let n=Zd(e,this.uInt16,this.head);return this.head+=2,n}}function rp(e,n){let t=Hd(e);for(let r=t.length;r<n;r++)t.push(0);return t}class ap extends tp{toBuffer(){this.uInt16.be="RIFX"===this.container,this.uInt32.be=this.uInt16.be;let e=[this.getJunkBytes_(),this.getDs64Bytes_(),this.getBextBytes_(),this.getiXMLBytes_(),this.getFmtBytes_(),this.getFactBytes_(),Hd(this.data.chunkId),Jd(this.data.samples.length,this.uInt32),this.data.samples,this.getCueBytes_(),this.getSmplBytes_(),this.getLISTBytes_(),this.get_PMXBytes_()],n=0;for(let a=0;a<e.length;a++)n+=e[a].length;let t=new Uint8Array(n+12),r=0;r=Kd(this.container,t,r),r=Xd(n+4,this.uInt32,t,r),r=Kd(this.format,t,r);for(let a=0;a<e.length;a++)t.set(e[a],r),r+=e[a].length;return t}getBextBytes_(){let e=[];return this.enforceBext_(),this.bext.chunkId&&(this.bext.chunkSize=602+this.bext.codingHistory.length,e=e.concat(Hd(this.bext.chunkId),Jd(602+this.bext.codingHistory.length,this.uInt32),rp(this.bext.description,256),rp(this.bext.originator,32),rp(this.bext.originatorReference,32),rp(this.bext.originationDate,10),rp(this.bext.originationTime,8),Jd(this.bext.timeReference[0],this.uInt32),Jd(this.bext.timeReference[1],this.uInt32),Jd(this.bext.version,this.uInt16),rp(this.bext.UMID,64),Jd(this.bext.loudnessValue,this.uInt16),Jd(this.bext.loudnessRange,this.uInt16),Jd(this.bext.maxTruePeakLevel,this.uInt16),Jd(this.bext.maxMomentaryLoudness,this.uInt16),Jd(this.bext.maxShortTermLoudness,this.uInt16),rp(this.bext.reserved,180),rp(this.bext.codingHistory,this.bext.codingHistory.length))),this.enforceByteLen_(e),e}enforceBext_(){for(let e in this.bext)if(this.bext.hasOwnProperty(e)&&this.bext[e]&&"timeReference"!=e){this.bext.chunkId="bext";break}(this.bext.timeReference[0]||this.bext.timeReference[1])&&(this.bext.chunkId="bext")}getiXMLBytes_(){let e=[];if(this.iXML.chunkId){let n=Hd(this.iXML.value);this.iXML.chunkSize=n.length,e=e.concat(Hd(this.iXML.chunkId),Jd(this.iXML.chunkSize,this.uInt32),n)}return this.enforceByteLen_(e),e}getDs64Bytes_(){let e=[];return this.ds64.chunkId&&(e=e.concat(Hd(this.ds64.chunkId),Jd(this.ds64.chunkSize,this.uInt32),Jd(this.ds64.riffSizeHigh,this.uInt32),Jd(this.ds64.riffSizeLow,this.uInt32),Jd(this.ds64.dataSizeHigh,this.uInt32),Jd(this.ds64.dataSizeLow,this.uInt32),Jd(this.ds64.originationTime,this.uInt32),Jd(this.ds64.sampleCountHigh,this.uInt32),Jd(this.ds64.sampleCountLow,this.uInt32))),this.enforceByteLen_(e),e}getCueBytes_(){let e=[];if(this.cue.chunkId){let n=this.getCuePointsBytes_();e=e.concat(Hd(this.cue.chunkId),Jd(n.length+4,this.uInt32),Jd(this.cue.dwCuePoints,this.uInt32),n)}return this.enforceByteLen_(e),e}getCuePointsBytes_(){let e=[];for(let n=0;n<this.cue.dwCuePoints;n++)e=e.concat(Jd(this.cue.points[n].dwName,this.uInt32),Jd(this.cue.points[n].dwPosition,this.uInt32),Hd(this.cue.points[n].fccChunk),Jd(this.cue.points[n].dwChunkStart,this.uInt32),Jd(this.cue.points[n].dwBlockStart,this.uInt32),Jd(this.cue.points[n].dwSampleOffset,this.uInt32));return e}getSmplBytes_(){let e=[];if(this.smpl.chunkId){let n=this.getSmplLoopsBytes_();e=e.concat(Hd(this.smpl.chunkId),Jd(n.length+36,this.uInt32),Jd(this.smpl.dwManufacturer,this.uInt32),Jd(this.smpl.dwProduct,this.uInt32),Jd(this.smpl.dwSamplePeriod,this.uInt32),Jd(this.smpl.dwMIDIUnityNote,this.uInt32),Jd(this.smpl.dwMIDIPitchFraction,this.uInt32),Jd(this.smpl.dwSMPTEFormat,this.uInt32),Jd(this.smpl.dwSMPTEOffset,this.uInt32),Jd(this.smpl.dwNumSampleLoops,this.uInt32),Jd(this.smpl.dwSamplerData,this.uInt32),n)}return this.enforceByteLen_(e),e}getSmplLoopsBytes_(){let e=[];for(let n=0;n<this.smpl.dwNumSampleLoops;n++)e=e.concat(Jd(this.smpl.loops[n].dwName,this.uInt32),Jd(this.smpl.loops[n].dwType,this.uInt32),Jd(this.smpl.loops[n].dwStart,this.uInt32),Jd(this.smpl.loops[n].dwEnd,this.uInt32),Jd(this.smpl.loops[n].dwFraction,this.uInt32),Jd(this.smpl.loops[n].dwPlayCount,this.uInt32));return e}getFactBytes_(){let e=[];return this.fact.chunkId&&(e=e.concat(Hd(this.fact.chunkId),Jd(this.fact.chunkSize,this.uInt32),Jd(this.fact.dwSampleLength,this.uInt32))),this.enforceByteLen_(e),e}getFmtBytes_(){let e=[];if(this.fmt.chunkId){let n=e.concat(Hd(this.fmt.chunkId),Jd(this.fmt.chunkSize,this.uInt32),Jd(this.fmt.audioFormat,this.uInt16),Jd(this.fmt.numChannels,this.uInt16),Jd(this.fmt.sampleRate,this.uInt32),Jd(this.fmt.byteRate,this.uInt32),Jd(this.fmt.blockAlign,this.uInt16),Jd(this.fmt.bitsPerSample,this.uInt16),this.getFmtExtensionBytes_());return this.enforceByteLen_(n),n}throw Error('Could not find the "fmt " chunk')}getFmtExtensionBytes_(){let e=[];return this.fmt.chunkSize>16&&(e=e.concat(Jd(this.fmt.cbSize,this.uInt16))),this.fmt.chunkSize>18&&(e=e.concat(Jd(this.fmt.validBitsPerSample,this.uInt16))),this.fmt.chunkSize>20&&(e=e.concat(Jd(this.fmt.dwChannelMask,this.uInt32))),this.fmt.chunkSize>24&&(e=e.concat(Jd(this.fmt.subformat[0],this.uInt32),Jd(this.fmt.subformat[1],this.uInt32),Jd(this.fmt.subformat[2],this.uInt32),Jd(this.fmt.subformat[3],this.uInt32))),e}getLISTBytes_(){let e=[];for(let n=0;n<this.LIST.length;n++){let t=this.getLISTSubChunksBytes_(this.LIST[n].subChunks,this.LIST[n].format);e=e.concat(Hd(this.LIST[n].chunkId),Jd(t.length+4,this.uInt32),Hd(this.LIST[n].format),t)}return this.enforceByteLen_(e),e}getLISTSubChunksBytes_(e,n){let t=[];for(let r=0,a=e.length;r<a;r++)"INFO"==n?t=t.concat(this.getLISTINFOSubChunksBytes_(e[r])):"adtl"==n&&(t=t.concat(this.getLISTadtlSubChunksBytes_(e[r]))),this.enforceByteLen_(t);return t}getLISTINFOSubChunksBytes_(e){let n=[],t=rp(e.value,e.value.length);return n=n.concat(Hd(e.chunkId),Jd(t.length+1,this.uInt32),t),n.push(0),n}getLISTadtlSubChunksBytes_(e){let n=[];if(["labl","note"].indexOf(e.chunkId)>-1){let t=rp(e.value,e.value.length);n=n.concat(Hd(e.chunkId),Jd(t.length+4+1,this.uInt32),Jd(e.dwName,this.uInt32),t),n.push(0)}else"ltxt"==e.chunkId&&(n=n.concat(this.getLtxtChunkBytes_(e)));return n}getLtxtChunkBytes_(e){return[].concat(Hd(e.chunkId),Jd(e.value.length+20,this.uInt32),Jd(e.dwName,this.uInt32),Jd(e.dwSampleLength,this.uInt32),Jd(e.dwPurposeID,this.uInt32),Jd(e.dwCountry,this.uInt16),Jd(e.dwLanguage,this.uInt16),Jd(e.dwDialect,this.uInt16),Jd(e.dwCodePage,this.uInt16),rp(e.value,e.value.length))}get_PMXBytes_(){let e=[];if(this._PMX.chunkId){let n=Hd(this._PMX.value);this._PMX.chunkSize=n.length,e=e.concat(Hd(this._PMX.chunkId),Jd(this._PMX.chunkSize,this.uInt32),n)}return this.enforceByteLen_(e),e}getJunkBytes_(){let e=[];return this.junk.chunkId?e.concat(Hd(this.junk.chunkId),Jd(this.junk.chunkData.length,this.uInt32),this.junk.chunkData):(this.enforceByteLen_(e),e)}enforceByteLen_(e){e.length%2&&e.push(0)}}function op(e,n,t){return!(t<1||e*(n/8)*t>4294967295)}class ip extends ap{constructor(){super(),this.bitDepth="0",this.dataType={bits:0,be:!1},this.WAV_AUDIO_FORMATS={4:17,8:1,"8a":6,"8m":7,16:1,24:1,32:1,"32f":3,64:3}}fromScratch(e,n,t,r,a){a=a||{},this.clearHeaders(),this.newWavFile_(e,n,t,r,a)}fromBuffer(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];super.fromBuffer(e,n),this.bitDepthFromFmt_(),this.updateDataType_()}toBuffer(){return this.validateWavHeader_(),super.toBuffer()}getSamples(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Float64Array,t=new n(this.data.samples.length/(this.dataType.bits/8));return Yd(this.data.samples,this.dataType,t,0,this.data.samples.length),!e&&this.fmt.numChannels>1?function(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=[];for(let a=0;a<n;a++)r[a]=new t(e.length/n);for(let a=0;a<n;a++)for(let t=a,o=0;t<e.length;t+=n,o++)r[a][o]=e[t];return r}(t,this.fmt.numChannels,n):t}getSample(e){if((e*=this.dataType.bits/8)+this.dataType.bits/8>this.data.samples.length)throw new Error("Range error");return Zd(this.data.samples.slice(e,e+this.dataType.bits/8),this.dataType)}setSample(e,n){if((e*=this.dataType.bits/8)+this.dataType.bits/8>this.data.samples.length)throw new Error("Range error");Xd(n,this.dataType,this.data.samples,e)}getiXML(){return this.iXML.value}setiXML(e){if("string"!==typeof e)throw new TypeError("iXML value must be a string.");this.iXML.value=e,this.iXML.chunkId="iXML"}get_PMX(){return this._PMX.value}set_PMX(e){if("string"!==typeof e)throw new TypeError("_PMX value must be a string.");this._PMX.value=e,this._PMX.chunkId="_PMX"}newWavFile_(e,n,t,r,a){a.container||(a.container="RIFF"),this.container=a.container,this.bitDepth=t,r=function(e){let n=[];if(e.length>0)if(e[0].constructor!==Number){n=new Float64Array(e[0].length*e.length);for(let t=0,r=e[0].length,a=0;t<r;t++)for(let o=0,i=e.length;o<i;o++,a++)n[a]=e[o][t]}else n=e;return n}(r),this.updateDataType_();let o=this.dataType.bits/8;this.data.samples=new Uint8Array(r.length*o),qd(r,this.dataType,this.data.samples,0),this.makeWavHeader_(t,e,n,o,this.data.samples.length,a),this.data.chunkId="data",this.data.chunkSize=this.data.samples.length,this.validateWavHeader_()}makeWavHeader_(e,n,t,r,a,o){"4"==e?this.createADPCMHeader_(e,n,t,r,a,o):"8a"==e||"8m"==e?this.createALawMulawHeader_(e,n,t,r,a,o):-1==Object.keys(this.WAV_AUDIO_FORMATS).indexOf(e)||n>2?this.createExtensibleHeader_(e,n,t,r,a,o):this.createPCMHeader_(e,n,t,r,a,o)}createPCMHeader_(e,n,t,r,a,o){this.container=o.container,this.chunkSize=36+a,this.format="WAVE",this.bitDepth=e,this.fmt={chunkId:"fmt ",chunkSize:16,audioFormat:this.WAV_AUDIO_FORMATS[e]||65534,numChannels:n,sampleRate:t,byteRate:n*r*t,blockAlign:n*r,bitsPerSample:parseInt(e,10),cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]}}createADPCMHeader_(e,n,t,r,a,o){this.createPCMHeader_(e,n,t,r,a,o),this.chunkSize=40+a,this.fmt.chunkSize=20,this.fmt.byteRate=4055,this.fmt.blockAlign=256,this.fmt.bitsPerSample=4,this.fmt.cbSize=2,this.fmt.validBitsPerSample=505,this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:2*a}}createExtensibleHeader_(e,n,t,r,a,o){this.createPCMHeader_(e,n,t,r,a,o),this.chunkSize=60+a,this.fmt.chunkSize=40,this.fmt.bitsPerSample=1+(parseInt(e,10)-1|7),this.fmt.cbSize=22,this.fmt.validBitsPerSample=parseInt(e,10),this.fmt.dwChannelMask=function(e){let n=0;1===e?n=4:2===e?n=3:4===e?n=51:6===e?n=63:8===e&&(n=1599);return n}(n),this.fmt.subformat=[1,1048576,2852126848,1905997824]}createALawMulawHeader_(e,n,t,r,a,o){this.createPCMHeader_(e,n,t,r,a,o),this.chunkSize=40+a,this.fmt.chunkSize=20,this.fmt.cbSize=2,this.fmt.validBitsPerSample=8,this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:a}}bitDepthFromFmt_(){3===this.fmt.audioFormat&&32===this.fmt.bitsPerSample?this.bitDepth="32f":6===this.fmt.audioFormat?this.bitDepth="8a":7===this.fmt.audioFormat?this.bitDepth="8m":this.bitDepth=this.fmt.bitsPerSample.toString()}validateBitDepth_(){if(!this.WAV_AUDIO_FORMATS[this.bitDepth]){if(parseInt(this.bitDepth,10)>8&&parseInt(this.bitDepth,10)<54)return!0;throw new Error("Invalid bit depth.")}return!0}updateDataType_(){this.dataType={bits:1+(parseInt(this.bitDepth,10)-1|7),fp:"32f"==this.bitDepth||"64"==this.bitDepth,signed:"8"!=this.bitDepth,be:"RIFX"==this.container},["4","8a","8m"].indexOf(this.bitDepth)>-1&&(this.dataType.bits=8,this.dataType.signed=!1)}validateWavHeader_(){if(this.validateBitDepth_(),e=this.fmt.numChannels,n=this.fmt.bitsPerSample,e<1||e*n/8>65535)throw new Error("Invalid number of channels.");var e,n;if(!op(this.fmt.numChannels,this.fmt.bitsPerSample,this.fmt.sampleRate))throw new Error("Invalid sample rate.")}}class sp extends ip{getTag(e){let n=this.getTagIndex_(e);return null!==n.TAG?this.LIST[n.LIST].subChunks[n.TAG].value:null}setTag(e,n){e=function(e){if(e.constructor!==String)throw new Error("Invalid tag name.");if(e.length<4)for(let n=0,t=4-e.length;n<t;n++)e+=" ";return e}(e);let t=this.getTagIndex_(e);null!==t.TAG?(this.LIST[t.LIST].subChunks[t.TAG].chunkSize=n.length+1,this.LIST[t.LIST].subChunks[t.TAG].value=n):null!==t.LIST?this.LIST[t.LIST].subChunks.push({chunkId:e,chunkSize:n.length+1,value:n}):(this.LIST.push({chunkId:"LIST",chunkSize:8+n.length+1,format:"INFO",subChunks:[]}),this.LIST[this.LIST.length-1].subChunks.push({chunkId:e,chunkSize:n.length+1,value:n}))}deleteTag(e){let n=this.getTagIndex_(e);return null!==n.TAG&&(this.LIST[n.LIST].subChunks.splice(n.TAG,1),!0)}listTags(){let e=this.getLISTIndex("INFO"),n={};if(null!==e)for(let t=0,r=this.LIST[e].subChunks.length;t<r;t++)n[this.LIST[e].subChunks[t].chunkId]=this.LIST[e].subChunks[t].value;return n}getLISTIndex(e){for(let n=0,t=this.LIST.length;n<t;n++)if(this.LIST[n].format==e)return n;return null}getTagIndex_(e){let n={LIST:null,TAG:null};for(let t=0,r=this.LIST.length;t<r;t++)if("INFO"==this.LIST[t].format){n.LIST=t;for(let r=0,a=this.LIST[t].subChunks.length;r<a;r++)if(this.LIST[t].subChunks[r].chunkId==e){n.TAG=r;break}break}return n}}class lp extends sp{listCuePoints(){let e=this.getCuePoints_();for(let n=0,t=e.length;n<t;n++)e[n].position=e[n].dwSampleOffset/this.fmt.sampleRate*1e3,e[n].dwSampleLength?(e[n].end=e[n].dwSampleLength/this.fmt.sampleRate*1e3,e[n].end+=e[n].position):e[n].end=null,delete e[n].value;return e}setCuePoint(e){this.cue.chunkId="cue ",e.label||(e.label="");let n=this.getCuePoints_();this.clearLISTadtl_(),this.cue.points=[],e.dwSampleOffset=e.position*this.fmt.sampleRate/1e3,e.dwSampleLength=0,e.end&&(e.dwSampleLength=e.end*this.fmt.sampleRate/1e3-e.dwSampleOffset),0===n.length?this.setCuePoint_(e,1):this.setCuePointInOrder_(n,e),this.cue.dwCuePoints=this.cue.points.length}deleteCuePoint(e){this.cue.chunkId="cue ";let n=this.getCuePoints_();this.clearLISTadtl_();let t=this.cue.points.length;this.cue.points=[];for(let r=0;r<t;r++)r+1!==e&&this.setCuePoint_(n[r],r+1);this.cue.dwCuePoints=this.cue.points.length,this.cue.dwCuePoints?this.cue.chunkId="cue ":(this.cue.chunkId="",this.clearLISTadtl_())}updateLabel(e,n){let t=this.getLISTIndex("adtl");if(null!==t)for(let r=0,a=this.LIST[t].subChunks.length;r<a;r++)this.LIST[t].subChunks[r].dwName==e&&(this.LIST[t].subChunks[r].value=n)}getCuePoints_(){let e=[];for(let n=0;n<this.cue.points.length;n++){let t=this.cue.points[n],r=this.getDataForCuePoint_(t.dwName);r.label=r.value?r.value:"",r.dwPosition=t.dwPosition,r.fccChunk=t.fccChunk,r.dwChunkStart=t.dwChunkStart,r.dwBlockStart=t.dwBlockStart,r.dwSampleOffset=t.dwSampleOffset,e.push(r)}return e}getDataForCuePoint_(e){let n=this.getLISTIndex("adtl"),t={};return null!==n&&this.getCueDataFromLIST_(t,n,e),t}getCueDataFromLIST_(e,n,t){for(let r=0,a=this.LIST[n].subChunks.length;r<a;r++)if(this.LIST[n].subChunks[r].dwName==t){let t=this.LIST[n].subChunks[r];e.value=t.value||e.value,e.dwName=t.dwName||0,e.dwSampleLength=t.dwSampleLength||0,e.dwPurposeID=t.dwPurposeID||0,e.dwCountry=t.dwCountry||0,e.dwLanguage=t.dwLanguage||0,e.dwDialect=t.dwDialect||0,e.dwCodePage=t.dwCodePage||0}}setCuePoint_(e,n){this.cue.points.push({dwName:n,dwPosition:e.dwPosition?e.dwPosition:0,fccChunk:e.fccChunk?e.fccChunk:"data",dwChunkStart:e.dwChunkStart?e.dwChunkStart:0,dwBlockStart:e.dwBlockStart?e.dwBlockStart:0,dwSampleOffset:e.dwSampleOffset}),this.setLabl_(e,n)}setCuePointInOrder_(e,n){let t=!1;for(let r=0;r<e.length;r++)e[r].dwSampleOffset>n.dwSampleOffset&&!t?(this.setCuePoint_(n,r+1),this.setCuePoint_(e[r],r+2),t=!0):this.setCuePoint_(e[r],t?r+2:r+1);t||this.setCuePoint_(n,this.cue.points.length+1)}clearLISTadtl_(){for(let e=0,n=this.LIST.length;e<n;e++)"adtl"==this.LIST[e].format&&this.LIST.splice(e)}setLabl_(e,n){let t=this.getLISTIndex("adtl");null===t&&(this.LIST.push({chunkId:"LIST",chunkSize:4,format:"adtl",subChunks:[]}),t=this.LIST.length-1),this.setLabelText_(t,e,n),e.dwSampleLength&&this.setLtxtChunk_(t,e,n)}setLabelText_(e,n,t){this.LIST[e].subChunks.push({chunkId:"labl",chunkSize:4,dwName:t,value:n.label}),this.LIST[e].chunkSize+=12}setLtxtChunk_(e,n,t){this.LIST[e].subChunks.push({chunkId:"ltxt",chunkSize:20,dwName:t,dwSampleLength:n.dwSampleLength,dwPurposeID:n.dwPurposeID||0,dwCountry:n.dwCountry||0,dwLanguage:n.dwLanguage||0,dwDialect:n.dwDialect||0,dwCodePage:n.dwCodePage||0,value:n.label}),this.LIST[e].chunkSize+=28}}class up{constructor(e,n,t){this.length_=e,this.scaleFactor_=(e-1)/n,this.interpolate=this.sinc,"point"===t.method?this.interpolate=this.point:"linear"===t.method?this.interpolate=this.linear:"cubic"===t.method&&(this.interpolate=this.cubic),this.tangentFactor_=1-Math.max(0,Math.min(1,t.tension||0)),this.sincFilterSize_=t.sincFilterSize||1,this.kernel_=function(e){return function(n){return function(e){if(0===e)return 1;return Math.sin(Math.PI*e)/(Math.PI*e)}(n)*e(n)}}(t.sincWindow||cp)}point(e,n){return this.getClippedInput_(Math.round(this.scaleFactor_*e),n)}linear(e,n){e=this.scaleFactor_*e;let t=Math.floor(e);return(1-(e-=t))*this.getClippedInput_(t,n)+e*this.getClippedInput_(t+1,n)}cubic(e,n){e=this.scaleFactor_*e;let t=Math.floor(e),r=[this.getTangent_(t,n),this.getTangent_(t+1,n)],a=[this.getClippedInput_(t,n),this.getClippedInput_(t+1,n)],o=(e-=t)*e,i=e*o;return(2*i-3*o+1)*a[0]+(i-2*o+e)*r[0]+(-2*i+3*o)*a[1]+(i-o)*r[1]}sinc(e,n){e=this.scaleFactor_*e;let t=Math.floor(e),r=t-this.sincFilterSize_+1,a=t+this.sincFilterSize_,o=0;for(let i=r;i<=a;i++)o+=this.kernel_(e-i)*this.getClippedInput_(i,n);return o}getTangent_(e,n){return this.tangentFactor_*(this.getClippedInput_(e+1,n)-this.getClippedInput_(e-1,n))/2}getClippedInput_(e,n){return 0<=e&&e<this.length_?n[e]:0}}function cp(e){return Math.exp(-e/2*e/2)}const dp={point:!1,linear:!1,cubic:!0,sinc:!0},pp={IIR:16,FIR:71},fp={IIR:class{constructor(e,n,t){let r=[];for(let a=0;a<e;a++)r.push(this.getCoeffs_({Fs:n,Fc:t,Q:.5/Math.sin(Math.PI/(2*e)*(a+.5))}));this.stages=[];for(let a=0;a<r.length;a++)this.stages[a]={b0:r[a].b[0],b1:r[a].b[1],b2:r[a].b[2],a1:r[a].a[0],a2:r[a].a[1],k:r[a].k,z:[0,0]}}filter(e){let n=e;for(let t=0,r=this.stages.length;t<r;t++)n=this.runStage_(t,n);return n}getCoeffs_(e){let n={a:[],b:[]},t=this.preCalc_(e,n);return n.k=1,n.b.push((1-t.cw)/(2*t.a0)),n.b.push(2*n.b[0]),n.b.push(n.b[0]),n}preCalc_(e,n){let t={},r=2*Math.PI*e.Fc/e.Fs;return t.alpha=Math.sin(r)/(2*e.Q),t.cw=Math.cos(r),t.a0=1+t.alpha,n.a0=t.a0,n.a.push(-2*t.cw/t.a0),n.k=1,n.a.push((1-t.alpha)/t.a0),t}runStage_(e,n){let t=n*this.stages[e].k-this.stages[e].a1*this.stages[e].z[0]-this.stages[e].a2*this.stages[e].z[1],r=this.stages[e].b0*t+this.stages[e].b1*this.stages[e].z[0]+this.stages[e].b2*this.stages[e].z[1];return this.stages[e].z[1]=this.stages[e].z[0],this.stages[e].z[0]=t,r}reset(){for(let e=0;e<this.stages.length;e++)this.stages[e].z=[0,0]}},FIR:class{constructor(e,n,t){let r=2*Math.PI*t/n,a=0;this.filters=[];for(let o=0;o<=e;o++)o-e/2===0?this.filters[o]=r:(this.filters[o]=Math.sin(r*(o-e/2))/(o-e/2),this.filters[o]*=.54-.46*Math.cos(2*Math.PI*o/e)),a+=this.filters[o];for(let o=0;o<=e;o++)this.filters[o]/=a;this.z=this.initZ_()}filter(e){this.z.buf[this.z.pointer]=e;let n=0;for(let t=0,r=this.z.buf.length;t<r;t++)n+=this.filters[t]*this.z.buf[(this.z.pointer+t)%this.z.buf.length];return this.z.pointer=(this.z.pointer+1)%this.z.buf.length,n}reset(){this.z=this.initZ_()}initZ_(){let e=[];for(let n=0;n<this.filters.length-1;n++)e.push(0);return{buf:e,pointer:0}}}};function hp(e,n,t){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r=r||{};let a=(t-n)/n+1,o=new Float64Array(e.length*a);r.method=r.method||"cubic";let i=new up(e.length,o.length,{method:r.method,tension:r.tension||0,sincFilterSize:r.sincFilterSize||6,sincWindow:r.sincWindow||void 0,clip:r.clip||"mirror"});if(void 0===r.LPF&&(r.LPF=dp[r.method]),r.LPF){r.LPFType=r.LPFType||"IIR";const a=fp[r.LPFType];if(t>n){!function(e,n,t,r){for(let a=0,o=n.length;a<o;a++)n[a]=r.filter(t.interpolate(a,e));r.reset();for(let a=n.length-1;a>=0;a--)n[a]=r.filter(n[a])}(e,o,i,new a(r.LPForder||pp[r.LPFType],t,n/2))}else{!function(e,n,t,r){for(let a=0,o=e.length;a<o;a++)e[a]=r.filter(e[a]);r.reset();for(let a=e.length-1;a>=0;a--)e[a]=r.filter(e[a]);mp(e,n,t)}(e,o,i,new a(r.LPForder||pp[r.LPFType],n,t/2))}}else mp(e,o,i);return o}function mp(e,n,t){for(let r=0,a=n.length;r<a;r++)n[r]=t.interpolate(r,e)}class gp extends lp{toRIFF(){let e=new Float64Array(yp(this.data.samples.length,this.dataType.bits/8));Yd(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,e,{container:"RIFF"})}toRIFX(){let e=new Float64Array(yp(this.data.samples.length,this.dataType.bits/8));Yd(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,e,{container:"RIFX"})}toIMAADPCM(){if(8e3!==this.fmt.sampleRate)throw new Error("Only 8000 Hz files can be compressed as IMA-ADPCM.");if(1!==this.fmt.numChannels)throw new Error("Only mono files can be compressed as IMA-ADPCM.");{this.assure16Bit_();let e=new Int16Array(yp(this.data.samples.length,2));Yd(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"4",function(e){let n={index:0,predicted:0,step:7},t=new Uint8Array(e.length),r=[],a=0,o=0;for(let s=0,l=e.length;s<l;s++)s%505==0&&0!=s&&(t.set(Ad(r,n),a),a+=256,r=[],o++),r.push(e[s]);let i=e.length/2;return i%2&&i++,t.slice(0,i+512+4*o)}(e),{container:this.correctContainer_()})}}fromIMAADPCM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"16";this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,t={index:0,predicted:0,step:7},r=new Int16Array(2*e.length),a=[],o=0;for(let i=0,s=e.length;i<s;i++){if(i%n==0&&0!=i){let e=Td(a,t);r.set(e,o),o+=e.length,a=[]}a.push(e[i])}return r}(this.data.samples,this.fmt.blockAlign),{container:this.correctContainer_()}),"16"!=e&&this.toBitDepth(e)}toALaw(){this.assure16Bit_();let e=new Int16Array(yp(this.data.samples.length,2));Yd(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"8a",function(e){let n=new Uint8Array(e.length);for(let t=0,r=e.length;t<r;t++)n[t]=Nd(e[t]);return n}(e),{container:this.correctContainer_()})}fromALaw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"16";this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",function(e){let n=new Int16Array(e.length);for(let t=0,r=e.length;t<r;t++)n[t]=Md(e[t]);return n}(this.data.samples),{container:this.correctContainer_()}),"16"!=e&&this.toBitDepth(e)}toMuLaw(){this.assure16Bit_();let e=new Int16Array(yp(this.data.samples.length,2));Yd(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"8m",function(e){let n=new Uint8Array(e.length);for(let t=0,r=e.length;t<r;t++)n[t]=Dd(e[t]);return n}(e),{container:this.correctContainer_()})}fromMuLaw(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"16";this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",function(e){let n=new Int16Array(e.length);for(let t=0,r=e.length;t<r;t++)n[t]=jd(e[t]);return n}(this.data.samples),{container:this.correctContainer_()}),"16"!=e&&this.toBitDepth(e)}toBitDepth(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=e,r=this.bitDepth;n||("32f"!=e&&(t=this.dataType.bits.toString()),r=""+this.dataType.bits),this.assureUncompressed_();let a=this.getSamples(!0),o=new Float64Array(a.length);bd(a,r,o,t),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,e,o,{container:this.correctContainer_()})}toSampleRate(e,n){this.validateResample_(e);let t=this.getSamples(),r=[];if(t.constructor===Float64Array)r=hp(t,this.fmt.sampleRate,e,n);else for(let a=0;a<t.length;a++)r.push(hp(t[a],this.fmt.sampleRate,e,n));this.fromExisting_(this.fmt.numChannels,e,this.bitDepth,r,{container:this.correctContainer_()})}validateResample_(e){if(!op(this.fmt.numChannels,this.fmt.bitsPerSample,e))throw new Error("Invalid sample rate.");if(["4","8a","8m"].indexOf(this.bitDepth)>-1)throw new Error("wavefile can't change the sample rate of compressed files.")}assure16Bit_(){this.assureUncompressed_(),"16"!=this.bitDepth&&this.toBitDepth("16")}assureUncompressed_(){"8a"==this.bitDepth?this.fromALaw():"8m"==this.bitDepth?this.fromMuLaw():"4"==this.bitDepth&&this.fromIMAADPCM()}correctContainer_(){return"RF64"==this.container?"RIFF":this.container}fromExisting_(e,n,t,r,a){let o=new lp;Object.assign(this.fmt,o.fmt),Object.assign(this.fact,o.fact),Object.assign(this.ds64,o.ds64),Object.assign(this.data,o.data),this.newWavFile_(e,n,t,r,a)}}function yp(e,n){let t=e/n;return t%2&&t++,t}class bp extends gp{constructor(e){super(),e&&this.fromBuffer(e)}fromBase64(e){this.fromBuffer(function(e){let n=new Uint8Array(256);for(let a=0;a<64;a++)n[yd.charCodeAt(a)]=a;let t=.75*e.length;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);let r=new Uint8Array(t);for(let a=0,o=0;a<e.length;a+=4){let t=n[e.charCodeAt(a)],i=n[e.charCodeAt(a+1)],s=n[e.charCodeAt(a+2)],l=n[e.charCodeAt(a+3)];r[o++]=t<<2|i>>4,r[o++]=(15&i)<<4|s>>2,r[o++]=(3&s)<<6|63&l}return r}(e))}toBase64(){return function(e){let n="";for(let t=0;t<e.length;t+=3)n+=yd[e[t]>>2],n+=yd[(3&e[t])<<4|e[t+1]>>4],n+=yd[(15&e[t+1])<<2|e[t+2]>>6],n+=yd[63&e[t+2]];return e.length%3===2?n=n.substring(0,n.length-1)+"=":e.length%3===1&&(n=n.substring(0,n.length-2)+"=="),n}(this.toBuffer())}toDataURI(){return"data:audio/wav;base64,"+this.toBase64()}fromDataURI(e){this.fromBase64(e.replace("data:audio/wav;base64,",""))}}const vp=(e,n)=>{const t=e.length;let r=new bp;return r.fromScratch(t,n,"32f",e.map((e=>e.map((e=>e))))),r.toBuffer()},wp=async(e,n)=>{switch(n){case"javascript":return qu(Ko(e,"javascript"));case"assemblyscript":return(async(e,n)=>{const t=await Vu(e),r=t.settings.audio.bitDepth,a=Pu(r),o={refs:{},metadata:t,cache:{wasmOutput:new a(0),wasmInput:new a(0),arrayType:a,bitDepth:r,blockSize:0}},i={...md(o),...hd(o)},s=await $u(e,{input:i});o.refs.rawModule=Ru(s.exports,t.compilation.variableNamesIndex);const l=gd(o),u=Fu(o.refs.rawModule,{...l,...n||{}});return o.refs.engine=u,u})(Ko(e,"wasm"))}},Sp=(e,n,t)=>{const{channelCount:r,sampleRate:a,blockSize:o}=t,i=Math.round(n*a),s=kp("in",t),l=kp("out",t),u=kp("out",t,i);e.initialize(a,o);let c=0;for(;c<i;){e.dspLoop(s,l);for(let e=0;e<r.out;e++)u[e].set(l[e].slice(0,Math.min(o,i-c)),c);c+=o}return u},kp=(e,n,t)=>{const{channelCount:r,blockSize:a,bitDepth:o}=n;void 0===t&&(t=a);const i=Pu(o),s=[];for(let l=0;l<r[e];l++)s.push(new i(Math.round(t)));return s},xp={pd:{extensions:[".pd"],description:"Pure Data text"},pdJson:{extensions:[".pd.json"],description:"Pure Data JSON"},dspGraph:{extensions:[".dsp-graph.json"],description:"WebPd DSP graph"},javascript:{extensions:[".js"],description:"JavaScript WebPd module"},assemblyscript:{extensions:[".as",".ts"],description:"AssemblyScript DSP code"},wasm:{extensions:[".wasm"],description:"Web Assembly WebPd module"},wav:{extensions:[".wav"],description:"An audio preview of your patch"},app:{extensions:[],description:"Complete web app embedding your compiled WebPd patch"}},Ip=["pd","pdJson","dspGraph",[["javascript","wav"],["assemblyscript","wasm","wav"],["assemblyscript","wasm","app"],["javascript","app"]]],_p=e=>{const n=Object.entries(xp).filter((n=>{let[t,r]=n;return!!r.extensions.some((n=>e.endsWith(n)))}));return 0===n.length?null:n[0][0]},Ap=(e,n,t)=>{let r=Tp(Ip,n,[]).filter((n=>n.includes(e))).map((n=>n.slice(n.indexOf(e)+1)));return t&&t!==e&&(r=r.filter((e=>e.includes(t)))),0===r.length?null:r[0]},Tp=(e,n,t)=>{let r=[...t];return e.flatMap((e=>Array.isArray(e)?Tp(e,n,r):(r=[...r,e],e===n?[r]:[])))},Ep=(e,n)=>{let t=[...n];return e.flatMap(((n,r)=>Array.isArray(n)?Ep(n,t):(t=[...t,n],r===e.length-1?[t]:[])))},Op={translateArgs:(e,n)=>{let t;if(e.args.length)t=e.args.map((e=>cc(e)-1));else{const r=new Set;n.connections.forEach((n=>{n.sink.nodeId===e.id&&r.add(n.sink.portletId)}));const a=Math.max(...r);t=[];for(let e=0;e<=a;e++)t.push(e)}return{channelMapping:t}},build:e=>({inlets:Zo(e.channelMapping,((e,n)=>["".concat(n),{type:"signal",id:"".concat(n)}])),outlets:{},isPullingSignal:!0})},Cp={flags:{alphaName:"dac_t"},dsp:(e,n,t)=>{let{ins:r,node:a}=e,{core:o}=n,{audio:i,target:s}=t;return oi([a.args.channelMapping.map(((e,n)=>[e,n])).filter((e=>{let[n]=e;return 0<=n&&n<i.channelCount.out})).map((e=>{let[n,t]=e;return"javascript"===s?"".concat(o.OUTPUT,"[").concat(n,"][").concat(o.IT_FRAME,"] = ").concat(r["".concat(t)]):"".concat(o.OUTPUT,"[").concat(o.IT_FRAME," + ").concat(o.BLOCK_SIZE," * ").concat(n,"] = ").concat(r["".concat(t)])}))])}},Np={translateArgs:(e,n)=>{let t;if(e.args.length)t=e.args.map((e=>cc(e)-1));else{const r=new Set;n.connections.forEach((n=>{n.source.nodeId===e.id&&r.add(n.source.portletId)}));const a=Math.max(...r);t=[];for(let e=0;e<=a;e++)t.push(e)}return{channelMapping:t}},build:e=>({inlets:{},outlets:Zo(e.channelMapping,((e,n)=>["".concat(n),{type:"signal",id:"".concat(n)}]))})},Mp={flags:{alphaName:"adc_t"},dsp:(e,n,t)=>{let{outs:r,node:a}=e,{core:o}=n,{audio:i,target:s}=t;return oi([a.args.channelMapping.map(((e,n)=>[e,n])).filter((e=>{let[n]=e;return 0<=n&&n<i.channelCount.in})).map((e=>{let[n,t]=e;return"javascript"===s?"".concat(r["".concat(t)]," = ").concat(o.INPUT,"[").concat(n,"][").concat(o.IT_FRAME,"]"):"".concat(r["".concat(t)]," = ").concat(o.INPUT,"[").concat(o.IT_FRAME," + ").concat(o.BLOCK_SIZE," * ").concat(n,"]")}))])}};var Pp,Fp,Rp,Lp,Dp,jp,zp,Bp,Up;const Wp={namespace:"bangUtils",code:(e,n)=>{let{ns:t}=e,{msg:a}=n;return oi([ti(t.isBang,[ei(a.Message,"message")],"boolean")(Pp||(Pp=r(["\n            return (\n                ","(message, 0) \n                && ","(message, 0) === 'bang'\n            )\n        "])),a.isStringToken,a.readStringToken),ti(t.bang,[],a.Message)(Fp||(Fp=r(["\n            ","\n            ","(message, 0, 'bang')\n            return message\n        "])),ni(a.Message,"message","".concat(a.create,"([").concat(a.STRING_TOKEN,", 4])")),a.writeStringToken),ti(t.emptyToBang,[ei(a.Message,"message")],a.Message)(Rp||(Rp=r(["\n            if (","(message) === 0) {\n                return ","()\n            } else {\n                return message\n            }\n        "])),a.getLength,t.bang)])},dependencies:[nu]},$p={namespace:"msgUtils",code:(e,n)=>{let{ns:t}=e,{msg:a}=n;return oi([ti(t.slice,[ei(a.Message,"message"),ei("Int","start"),ei("Int","end")],a.Message)(Lp||(Lp=r(["\n            if (","(message) <= start) {\n                throw new Error('message empty')\n            }\n            ","\n            ","\n            ","(message, newMessage, start, end, 0)\n            return newMessage\n        "])),a.getLength,ni(a.Template,"template","".concat(t._copyTemplate,"(message, start, end)")),ni(a.Message,"newMessage","".concat(a.create,"(template)")),t.copy),ti(t.concat,[ei(a.Message,"message1"),ei(a.Message,"message2")],a.Message)(Dp||(Dp=r(["\n            ","\n            ","(message1, newMessage, 0, ","(message1), 0)\n            ","(message2, newMessage, 0, ","(message2), ","(message1))\n            return newMessage\n        "])),ni(a.Message,"newMessage","".concat(a.create,"(").concat(t._copyTemplate,"(message1, 0, ").concat(a.getLength,"(message1)).concat(").concat(t._copyTemplate,"(message2, 0, ").concat(a.getLength,"(message2))))")),t.copy,a.getLength,t.copy,a.getLength,a.getLength),ti(t.shift,[ei(a.Message,"message")],a.Message)(jp||(jp=r(["\n            switch (","(message)) {\n                case 0:\n                    throw new Error('message empty')\n                case 1:\n                    return ","([])\n                default:\n                    return ","(message, 1, ","(message))\n            }\n        "])),a.getLength,a.create,t.slice,a.getLength),ti(t.copy,[ei(a.Message,"src"),ei(a.Message,"dest"),ei("Int","srcStart"),ei("Int","srcEnd"),ei("Int","destStart")],"void")(zp||(zp=r(["\n            ","\n            ","\n            for (i, j; i < srcEnd; i++, j++) {\n                if (","(src, i) === ",") {\n                    ","(dest, j, ","(src, i))\n                } else {\n                    ","(dest, j, ","(src, i))\n                }\n            }\n        "])),ei("Int","i","srcStart"),ei("Int","j","destStart"),a.getTokenType,a.STRING_TOKEN,a.writeStringToken,a.readStringToken,a.writeFloatToken,a.readFloatToken),ti(t._copyTemplate,[ei(a.Message,"src"),ei("Int","start"),ei("Int","end")],a.Template)(Bp||(Bp=r(["\n            ","\n            for (","; i < end; i++) {\n                ","\n                template.push(tokenType)\n                if (tokenType === ",") {\n                    template.push(","(src, i).length)\n                }\n            }\n            return template\n        "])),ni(a.Template,"template","[]"),ei("Int","i","start"),ni("Int","tokenType","".concat(a.getTokenType,"(src, i)")),a.STRING_TOKEN,a.readStringToken)])},dependencies:[nu]},Vp={namespace:"actionUtils",code:(e,n)=>{let{ns:t}=e,{msg:a}=n;return oi([ti(t.isAction,[ei(a.Message,"message"),ei("string","action")],"boolean")(Up||(Up=r(["\n            return ","(message, [","])\n                && ","(message, 0) === action\n        "])),a.isMatching,a.STRING_TOKEN,a.readStringToken)])},dependencies:[nu]};var Gp;const Hp={flags:{alphaName:"samplerate_t"},messageReceivers:(e,n)=>{let{snds:t}=e,{core:a,msg:o,bangUtils:i}=n;return{0:ri([ei(o.Message,"m")])(Gp||(Gp=r(["\n            if (","(m)) { \n                ","(","([","])) \n                return\n            }\n        "])),i.isBang,t.$0,o.floats,a.SAMPLE_RATE)}},dependencies:[Wp]};var Kp,qp,Yp,Xp,Jp;const Zp={translateArgs:e=>({frequency:pc(e.args[0])||0}),build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:(e,n)=>{let{frequency:t}=n;if("0"===e)return{initialSignalValue:t}}},Qp=e=>{let{alphaName:n,coeff:t,generateOperation:a}=e;const o={flags:{alphaName:n},state:e=>{let{ns:n}=e;return ai(n.State,[ei("Float","phase",0),ei("Float","step",0)])},initialization:e=>{let{ns:n,state:t}=e;return ii(Kp||(Kp=r(["\n            ","(",", 0)\n        "])),n.setStep,t)},messageReceivers:(e,n)=>{let{ns:t,state:r}=e,{msg:a}=n;return{1:xc(t.setPhase,r,a)}},dsp:e=>{let{ns:n,state:t,outs:o,ins:i}=e;return{inlets:{0:ii(qp||(qp=r(["","(",", ",")"])),n.setStep,t,i.$0)},loop:ii(Yp||(Yp=r(["\n                "," = ","\n                ",".phase += ",".step\n            "])),o.$0,a("".concat(t,".phase")),t,t)}},core:(e,n)=>{let{ns:a}=e,{core:o}=n;return oi([ti(a.setStep,[ei(a.State,"state"),ei("Float","freq")])(Xp||(Xp=r(["\n                    state.step = ("," / ",") * freq\n                "])),t,o.SAMPLE_RATE),ti(a.setPhase,[ei(a.State,"state"),ei("Float","phase")])(Jp||(Jp=r(["\n                    state.phase = phase % 1.0","\n                "])),t?" * ".concat(t):"")])}};return o},ef={"osc~":Qp({alphaName:"osc_t",coeff:"2 * Math.PI",generateOperation:e=>"Math.cos(".concat(e,")")}),"phasor~":Qp({alphaName:"phasor_t",coeff:"1",generateOperation:e=>"".concat(e," % 1")})},nf={"osc~":Zp,"phasor~":Zp};var tf;const rf={translateArgs:e=>{let{args:n}=e;return{minValue:pc(n[0])||0,maxValue:pc(n[1])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"signal",id:"0"}}})},af={flags:{isPureFunction:!0,isDspInline:!0,alphaName:"clip_t"},state:e=>{let{node:{args:n},ns:t}=e;return ai(t.State,[ei("Float","minValue",n.minValue),ei("Float","maxValue",n.maxValue)])},dsp:e=>{let{ins:n,state:t}=e;return ii(tf||(tf=r(["Math.max(Math.min(",".maxValue, ","), ",".minValue)"])),t,n.$0,t)},messageReceivers:(e,n)=>{let{state:t}=e,{msg:r}=n;return{1:Sc("".concat(t,".minValue"),r),2:Sc("".concat(t,".maxValue"),r)}}};var of,sf;const lf={translateArgs:()=>({}),build:()=>({inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"},1:{type:"signal",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},uf={flags:{alphaName:"samphold_t"},state:e=>{let{ns:n}=e;return ai(n.State,[ei("Float","signalMemory",0),ei("Float","controlMemory",0)])},dsp:e=>{let{ins:n,outs:t,state:a}=e;return ii(of||(of=r(["\n        ",".signalMemory = "," = "," < ",".controlMemory ? ",": ",".signalMemory\n        ",".controlMemory = ","\n    "])),a,t.$0,n.$1,a,n.$0,a,a,n.$1)},messageReceivers:(e,n)=>{let{state:t}=e,{msg:a}=n;return{"0_message":ri([ei(a.Message,"m")],"void")(sf||(sf=r(["\n            if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ",".signalMemory = ","(m, 1)\n                return\n    \n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'reset'\n            ) {\n                ",".controlMemory = ","(m, 1)\n                return\n    \n            } else if (\n                ","(m, [","])\n                && ","(m, 0) === 'reset'\n            ) {\n                ",".controlMemory = 1e20\n                return\n            }\n        "])),a.isMatching,a.STRING_TOKEN,a.FLOAT_TOKEN,a.readStringToken,t,a.readFloatToken,a.isMatching,a.STRING_TOKEN,a.FLOAT_TOKEN,a.readStringToken,t,a.readFloatToken,a.isMatching,a.STRING_TOKEN,a.readStringToken,t)}}};var cf,df;const pf={translateArgs:()=>({}),build:()=>({inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"}},outlets:{0:{type:"message",id:"0"}},isPullingSignal:!0}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},ff={flags:{alphaName:"snapshot_t"},state:e=>{let{ns:n}=e;return ai(n.State,[ei("Float","currentValue",0)])},dsp:e=>{let{ins:n,state:t}=e;return ii(cf||(cf=r(["\n        ",".currentValue = ","\n    "])),t,n.$0)},messageReceivers:(e,n)=>{let{state:t,snds:a}=e,{msg:o,bangUtils:i}=n;return{"0_message":ri([ei(o.Message,"m")],"void")(df||(df=r(["\n            if (","(m)) {\n                ","(","([",".currentValue]))\n                return \n            }\n        "])),i.isBang,a.$0,o.floats,t)}},dependencies:[Wp]};var hf;var mf,gf,yf,bf,vf;const wf={namespace:"linesUtils",code:(e,n)=>{let{ns:t}=e,{points:a}=n;return oi([ai(t.LineSegment,[ei(a.Point,"p0"),ei(a.Point,"p1"),ei("Float","dx"),ei("Float","dy")]),ti(t.computeSlope,[ei(a.Point,"p0"),ei(a.Point,"p1")],"Float")(mf||(mf=r(["\n            return p1.x !== p0.x ? (p1.y - p0.y) / (p1.x - p0.x) : 0\n        "]))),ti(t.removePointsBeforeFrame,[ei("Array<".concat(a.Point,">"),"points"),ei("Float","frame")],"Array<".concat(a.Point,">"))(gf||(gf=r(["\n            ","\n            ","\n            while (i < points.length) {\n                if (frame <= points[i].x) {\n                    newPoints.push(points[i])\n                }\n                i++\n            }\n            return newPoints\n        "])),ni("Array<".concat(a.Point,">"),"newPoints","[]"),ei("Int","i","0")),ti(t.insertNewLinePoints,[ei("Array<".concat(a.Point,">"),"points"),ei(a.Point,"p0"),ei(a.Point,"p1")],"Array<".concat(a.Point,">"))(yf||(yf=r(["\n            ","\n            ","\n            \n            // Keep the points that are before the new points added\n            while (i < points.length && points[i].x <= p0.x) {\n                newPoints.push(points[i])\n                i++\n            }\n            \n            // Find the start value of the start point :\n            \n            // 1. If there is a previous point and that previous point\n            // is on the same frame, we don't modify the start point value.\n            // (represents a vertical line).\n            if (0 < i - 1 && points[i - 1].x === p0.x) {\n\n            // 2. If new points are inserted in between already existing points \n            // we need to interpolate the existing line to find the startValue.\n            } else if (0 < i && i < points.length) {\n                newPoints.push({\n                    x: p0.x,\n                    y: ","(p0.x, points[i - 1], points[i])\n                })\n\n            // 3. If new line is inserted after all existing points, \n            // we just take the value of the last point\n            } else if (i >= points.length && points.length) {\n                newPoints.push({\n                    x: p0.x,\n                    y: points[points.length - 1].y,\n                })\n\n            // 4. If new line placed in first position, we take the defaultStartValue.\n            } else if (i === 0) {\n                newPoints.push({\n                    x: p0.x,\n                    y: p0.y,\n                })\n            }\n            \n            newPoints.push({\n                x: p1.x,\n                y: p1.y,\n            })\n            return newPoints\n        "])),ni("Array<".concat(a.Point,">"),"newPoints","[]"),ei("Int","i","0"),a.interpolateLin),ti(t.computeFrameAjustedPoints,[ei("Array<".concat(a.Point,">"),"points")],"Array<".concat(a.Point,">"))(bf||(bf=r(["\n            if (points.length < 2) {\n                throw new Error('invalid length for points')\n            }\n\n            ","\n            ","\n            ","\n            ","\n            ","\n            \n            while(i < points.length) {\n                p = points[i]\n                frameLower = Math.floor(p.x)\n                frameUpper = frameLower + 1\n\n                // I. Placing interpolated point at the lower bound of the current frame\n                // ------------------------------------------------------------------------\n                // 1. Point is already on an exact frame,\n                if (p.x === frameLower) {\n                    newPoints.push({ x: p.x, y: p.y })\n\n                    // 1.a. if several of the next points are also on the same X,\n                    // we find the last one to draw a vertical line.\n                    while (\n                        (i + 1) < points.length\n                        && points[i + 1].x === frameLower\n                    ) {\n                        i++\n                    }\n                    if (points[i].y !== newPoints[newPoints.length - 1].y) {\n                        newPoints.push({ x: points[i].x, y: points[i].y })\n                    }\n\n                    // 1.b. if last point, we quit\n                    if (i + 1 >= points.length) {\n                        break\n                    }\n\n                    // 1.c. if next point is in a different frame we can move on to next iteration\n                    if (frameUpper <= points[i + 1].x) {\n                        i++\n                        continue\n                    }\n                \n                // 2. Point isn't on an exact frame\n                // 2.a. There's a previous point, the we use it to interpolate the value.\n                } else if (newPoints.length) {\n                    newPoints.push({\n                        x: frameLower,\n                        y: ","(frameLower, points[i - 1], p),\n                    })\n                \n                // 2.b. It's the very first point, then we don't change its value.\n                } else {\n                    newPoints.push({ x: frameLower, y: p.y })\n                }\n\n                // II. Placing interpolated point at the upper bound of the current frame\n                // ---------------------------------------------------------------------------\n                // First, we find the closest point from the frame upper bound (could be the same p).\n                // Or could be a point that is exactly placed on frameUpper.\n                while (\n                    (i + 1) < points.length \n                    && (\n                        Math.ceil(points[i + 1].x) === frameUpper\n                        || Math.floor(points[i + 1].x) === frameUpper\n                    )\n                ) {\n                    i++\n                }\n                p = points[i]\n\n                // 1. If the next point is directly in the next frame, \n                // we do nothing, as this corresponds with next iteration frameLower.\n                if (Math.floor(p.x) === frameUpper) {\n                    continue\n                \n                // 2. If there's still a point after p, we use it to interpolate the value\n                } else if (i < points.length - 1) {\n                    newPoints.push({\n                        x: frameUpper,\n                        y: ","(frameUpper, p, points[i + 1]),\n                    })\n\n                // 3. If it's the last point, we dont change the value\n                } else {\n                    newPoints.push({ x: frameUpper, y: p.y })\n                }\n\n                i++\n            }\n\n            return newPoints\n        "])),ni("Array<".concat(a.Point,">"),"newPoints","[]"),ei("Int","i","0"),ei(a.Point,"p","points[0]"),ei("Float","frameLower","0"),ei("Float","frameUpper","0"),a.interpolateLin,a.interpolateLin),ti(t.computeLineSegments,[ei("Array<".concat(a.Point,">"),"points")],"Array<".concat(t.LineSegment,">"))(vf||(vf=r(["\n            ","\n            ","\n            ","\n            ","\n\n            while(i < points.length - 1) {\n                p0 = points[i]\n                p1 = points[i + 1]\n                lineSegments.push({\n                    p0, p1, \n                    dy: ","(p0, p1),\n                    dx: 1,\n                })\n                i++\n            }\n            return lineSegments\n        "])),ni("Array<".concat(t.LineSegment,">"),"lineSegments","[]"),ei("Int","i","0"),ei(a.Point,"p0"),ei(a.Point,"p1"),t.computeSlope)])},dependencies:[{namespace:"points",code:e=>{let{ns:n}=e;return ti(n.interpolateLin,[ei("Float","x"),ei(n.Point,"p0"),ei(n.Point,"p1")],"Float")(hf||(hf=r(["\n        return p0.y + (x - p0.x) * (p1.y - p0.y) / (p1.x - p0.x)\n    "])))},dependencies:[{namespace:"points",code:e=>{let{ns:n}=e;return ai(n.Point,[ei("Float","x"),ei("Float","y")])}}]}]};var Sf;const kf={namespace:"timing",code:()=>ti("computeUnitInSamples",[ei("Float","sampleRate"),ei("Float","amount"),ei("string","unit")],"Float")(Sf||(Sf=r(["\n        if (unit.slice(0, 3) === 'per') {\n            if (amount !== 0) {\n                amount = 1 / amount\n            }\n            unit = unit.slice(3)\n        }\n\n        if (unit === 'msec' || unit === 'milliseconds' || unit === 'millisecond') {\n            return amount / 1000 * sampleRate\n        } else if (unit === 'sec' || unit === 'seconds' || unit === 'second') {\n            return amount * sampleRate\n        } else if (unit === 'min' || unit === 'minutes' || unit === 'minute') {\n            return amount * 60 * sampleRate\n        } else if (unit === 'samp' || unit === 'samples' || unit === 'sample') {\n            return amount\n        } else {\n            throw new Error(\"invalid time unit : \" + unit)\n        }\n    "])))};var xf,If,_f,Af,Tf;const Ef={flags:{alphaName:"vline_t"},state:(e,n)=>{let{ns:t}=e,{linesUtils:r,points:a}=n;return ai(t.State,[ei("Array<".concat(a.Point,">"),"points","[]"),ei("Array<".concat(r.LineSegment,">"),"lineSegments","[]"),ei("Float","currentValue",0),ei("Float","nextDurationSamp",0),ei("Float","nextDelaySamp",0)])},dsp:(e,n)=>{let{outs:t,state:a}=e,{core:o}=n;return ii(xf||(xf=r(["\n        if (",".lineSegments.length) {\n            if (toFloat(",") < ",".lineSegments[0].p0.x) {\n\n            // This should come first to handle vertical lines\n            } else if (toFloat(",") === ",".lineSegments[0].p1.x) {\n                ",".currentValue = ",".lineSegments[0].p1.y\n                ",".lineSegments.shift()\n\n            } else if (toFloat(",") === ",".lineSegments[0].p0.x) {\n                ",".currentValue = ",".lineSegments[0].p0.y\n\n            } else if (toFloat(",") < ",".lineSegments[0].p1.x) {\n                ",".currentValue += ",".lineSegments[0].dy\n\n            }\n        }\n        "," = ",".currentValue\n    "])),a,o.FRAME,a,o.FRAME,a,a,a,a,o.FRAME,a,a,a,o.FRAME,a,a,a,t.$0,a)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{actionUtils:o,msg:i}=n;return{0:ri([ei(i.Message,"m")])(If||(If=r(["\n        if (\n            ","(m, [","])\n            || ","(m, [",", ","])\n            || ","(m, [",", ",", ","])\n        ) {\n            switch (","(m)) {\n                case 3:\n                    ","(",", ","(m, 2))\n                case 2:\n                    ","(",", ","(m, 1))\n                case 1:\n                    ","(",", ","(m, 0))\n            }\n            return\n    \n        } else if (","(m, 'stop')) {\n            ",".points = []\n            ",".lineSegments = []\n            return\n        }\n        "])),i.isMatching,i.FLOAT_TOKEN,i.isMatching,i.FLOAT_TOKEN,i.FLOAT_TOKEN,i.isMatching,i.FLOAT_TOKEN,i.FLOAT_TOKEN,i.FLOAT_TOKEN,i.getLength,t.setNextDelay,a,i.readFloatToken,t.setNextDuration,a,i.readFloatToken,t.setNewLine,a,i.readFloatToken,o.isAction,a,a),1:xc(t.setNextDuration,a,i),2:xc(t.setNextDelay,a,i)}},core:(e,n)=>{let{ns:t}=e,{linesUtils:a,core:o}=n;return oi([ti(t.setNewLine,[ei(t.State,"state"),ei("Float","targetValue")],"void")(_f||(_f=r(["\n                state.points = ","(state.points, toFloat(","))\n                ","\n                ","\n                if (endFrame === toFloat(",")) {\n                    state.currentValue = targetValue\n                    state.lineSegments = []\n                } else {\n                    state.points = ","(\n                        state.points, \n                        {x: startFrame, y: state.currentValue},\n                        {x: endFrame, y: targetValue}\n                    )\n                    state.lineSegments = ","(\n                        ","(state.points))\n                }\n                state.nextDurationSamp = 0\n                state.nextDelaySamp = 0\n            "])),a.removePointsBeforeFrame,o.FRAME,ni("Float","startFrame","toFloat(".concat(o.FRAME,") + state.nextDelaySamp")),ni("Float","endFrame","startFrame + state.nextDurationSamp"),o.FRAME,a.insertNewLinePoints,a.computeLineSegments,a.computeFrameAjustedPoints),ti(t.setNextDuration,[ei(t.State,"state"),ei("Float","durationMsec")],"void")(Af||(Af=r(["\n                state.nextDurationSamp = computeUnitInSamples(",", durationMsec, 'msec')\n            "])),o.SAMPLE_RATE),ti(t.setNextDelay,[ei(t.State,"state"),ei("Float","delayMsec")],"void")(Tf||(Tf=r(["\n                state.nextDelaySamp = computeUnitInSamples(",", delayMsec, 'msec')\n            "])),o.SAMPLE_RATE)])},dependencies:[wf,kf,Vp]};var Of,Cf,Nf,Mf,Pf;const Ff={translateArgs:e=>{let{args:n}=e;return{initValue:pc(n[0])||0}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"signal",id:"0"}}})},Rf={flags:{alphaName:"line_t"},state:(e,n)=>{let{node:{args:t},ns:r}=e,{linesUtils:a}=n;return ai(r.State,[ei(a.LineSegment,"currentLine",r.defaultLine),ei("Float","currentValue",t.initValue),ei("Float","nextDurationSamp",0)])},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{actionUtils:o,msg:i}=n;return{0:ri([ei(i.Message,"m")])(Of||(Of=r(["\n            if (\n                ","(m, [","])\n                || ","(m, [",", ","])\n            ) {\n                switch (","(m)) {\n                    case 2:\n                        ","(",", ","(m, 1))\n                    case 1:\n                        ","(",", ","(m, 0))\n                }\n                return\n    \n            } else if (","(m, 'stop')) {\n                ","(",")\n                return\n    \n            }\n        "])),i.isMatching,i.FLOAT_TOKEN,i.isMatching,i.FLOAT_TOKEN,i.FLOAT_TOKEN,i.getLength,t.setNextDuration,a,i.readFloatToken,t.setNewLine,a,i.readFloatToken,o.isAction,t.stop,a),1:xc(t.setNextDuration,a,i)}},dsp:(e,n)=>{let{outs:t,state:a}=e,{core:o}=n;return ii(Cf||(Cf=r(["\n        "," = ",".currentValue\n        if (toFloat(",") < ",".currentLine.p1.x) {\n            ",".currentValue += ",".currentLine.dy\n            if (toFloat("," + 1) >= ",".currentLine.p1.x) {\n                ",".currentValue = ",".currentLine.p1.y\n            }\n        }\n    "])),t.$0,a,o.FRAME,a,a,a,o.FRAME,a,a,a)},core:(e,n)=>{let{ns:t}=e,{linesUtils:a,core:o}=n;return oi([ni(a.LineSegment,t.defaultLine,"{\n                p0: {x: -1, y: 0},\n                p1: {x: -1, y: 0},\n                dx: 1,\n                dy: 0,\n            }"),ti(t.setNewLine,[ei(t.State,"state"),ei("Float","targetValue")],"void")(Nf||(Nf=r(["\n                ","\n                ","\n                if (endFrame === toFloat(",")) {\n                    state.currentLine = ","\n                    state.currentValue = targetValue\n                    state.nextDurationSamp = 0\n                } else {\n                    state.currentLine = {\n                        p0: {\n                            x: startFrame, \n                            y: state.currentValue,\n                        }, \n                        p1: {\n                            x: endFrame, \n                            y: targetValue,\n                        }, \n                        dx: 1,\n                        dy: 0,\n                    }\n                    state.currentLine.dy = ","(state.currentLine.p0, state.currentLine.p1)\n                    state.nextDurationSamp = 0\n                }\n            "])),ni("Float","startFrame","toFloat(".concat(o.FRAME,")")),ni("Float","endFrame","toFloat(".concat(o.FRAME,") + state.nextDurationSamp")),o.FRAME,t.defaultLine,a.computeSlope),ti(t.setNextDuration,[ei(t.State,"state"),ei("Float","durationMsec")],"void")(Mf||(Mf=r(["\n                state.nextDurationSamp = computeUnitInSamples(",", durationMsec, 'msec')\n            "])),o.SAMPLE_RATE),ti(t.stop,[ei(t.State,"state")],"void")(Pf||(Pf=r(["\n                state.currentLine.p1.x = -1\n                state.currentLine.p1.y = state.currentValue\n            "])))])},dependencies:[Vp,kf,wf]};var Lf,Df,jf,zf,Bf,Uf,Wf,$f,Vf,Gf,Hf,Kf,qf,Yf,Xf;const Jf={translateArgs:e=>{let{args:n}=e;return{initValue:pc(n[0])||0,timeGrainMsec:Math.max(pc(n[1])||20,20)}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0})},Zf={state:(e,n)=>{let{node:{args:t},ns:a}=e,{sked:o,msg:i,linesUtils:s}=n;return ai(a.State,[ei(s.LineSegment,"currentLine","{\n                p0: {x: -1, y: 0},\n                p1: {x: -1, y: 0},\n                dx: 1,\n                dy: 0,\n            }"),ei("Float","currentValue",t.initValue),ei("Float","nextSamp",-1),ei("Int","nextSampInt",-1),ei("Float","grainSamp",0),ei("Float","nextDurationSamp",0),ei(o.Id,"skedId",o.ID_NULL),ei(i.Handler,"snd0",ii(Lf||(Lf=r(["",""])),ri([ei(i.Message,"m")])(Df||(Df=r([""]))))),ei(o.Callback,"tickCallback",ii(jf||(jf=r(["",""])),ri()(zf||(zf=r([""])))))])},initialization:e=>{let{ns:n,node:{args:t},state:a,snds:o}=e;return ii(Bf||(Bf=r(["\n            ","(",", ",")\n            ",".snd0 = ","\n            ",".tickCallback = ","\n        "])),n.setGrain,a,t.timeGrainMsec,a,o.$0,a,ri()(Uf||(Uf=r(["\n                ","(",")\n            "])),n.tick,a))},messageReceivers:(e,n)=>{let{ns:t,snds:a,state:o}=e,{actionUtils:i,msg:s}=n;return{0:ri([ei(s.Message,"m")])(Wf||(Wf=r(["\n            if (\n                ","(m, [","])\n                || ","(m, [",", ","])\n                || ","(m, [",", ",", ","])\n            ) {\n                ","(",")\n                switch (","(m)) {\n                    case 3:\n                        ","(",", ","(m, 2))\n                    case 2:\n                        ","(",", ","(m, 1))\n                    case 1:\n                        ","\n                        if (",".nextDurationSamp === 0) {\n                            ",".currentValue = targetValue\n                            ","(","([targetValue]))\n                        } else {\n                            ","(","([",".currentValue]))\n                            ","(",", targetValue)\n                            ","(",", ",".currentLine.dx)\n                            ","(",")\n                        }\n                        \n                }\n                return\n    \n            } else if (","(m, 'stop')) {\n                ","(",")\n                return\n    \n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ","(",")\n                ",".currentValue = ","(m, 1)\n                return\n            }\n        "])),s.isMatching,s.FLOAT_TOKEN,s.isMatching,s.FLOAT_TOKEN,s.FLOAT_TOKEN,s.isMatching,s.FLOAT_TOKEN,s.FLOAT_TOKEN,s.FLOAT_TOKEN,t.stopCurrentLine,o,s.getLength,t.setGrain,o,s.readFloatToken,t.setNextDuration,o,s.readFloatToken,ni("Float","targetValue","".concat(s.readFloatToken,"(m, 0)")),o,o,a.$0,s.floats,a.$0,s.floats,o,t.setNewLine,o,t.incrementTime,o,o,t.scheduleNextTick,o,i.isAction,t.stopCurrentLine,o,s.isMatching,s.STRING_TOKEN,s.FLOAT_TOKEN,s.readStringToken,t.stopCurrentLine,o,o,s.readFloatToken),1:xc(t.setNextDuration,o,s),2:xc(t.setGrain,o,s)}},core:(e,n)=>{let{ns:t}=e,{commons:a,core:o,sked:i,msg:s,linesUtils:l,points:u}=n;return oi([ti(t.setNewLine,[ei(t.State,"state"),ei("Float","targetValue")],"void")($f||($f=r(["\n                state.currentLine = {\n                    p0: {\n                        x: toFloat(","), \n                        y: state.currentValue,\n                    }, \n                    p1: {\n                        x: toFloat(",") + state.nextDurationSamp, \n                        y: targetValue,\n                    }, \n                    dx: state.grainSamp\n                }\n                state.nextDurationSamp = 0\n                state.currentLine.dy = ","(state.currentLine.p0, state.currentLine.p1) * state.grainSamp\n            "])),o.FRAME,o.FRAME,l.computeSlope),ti(t.setNextDuration,[ei(t.State,"state"),ei("Float","durationMsec")],"void")(Vf||(Vf=r(["\n                state.nextDurationSamp = computeUnitInSamples(",", durationMsec, 'msec')\n            "])),o.SAMPLE_RATE),ti(t.setGrain,[ei(t.State,"state"),ei("Float","grainMsec")],"void")(Gf||(Gf=r(["\n                state.grainSamp = computeUnitInSamples(",", Math.max(grainMsec, ","), 'msec')\n            "])),o.SAMPLE_RATE,20),ti(t.stopCurrentLine,[ei(t.State,"state")],"void")(Hf||(Hf=r(["\n                if (state.skedId !== ",") {\n                    ","(state.skedId)\n                    state.skedId = ","\n                }\n                if ("," < state.nextSampInt) {\n                    ","(state, -1 * (state.nextSamp - toFloat(",")))\n                }\n                ","(state, -1)\n            "])),i.ID_NULL,a.cancelWaitFrame,i.ID_NULL,o.FRAME,t.incrementTime,o.FRAME,t.setNextSamp),ti(t.setNextSamp,[ei(t.State,"state"),ei("Float","currentSamp")],"void")(Kf||(Kf=r(["\n                state.nextSamp = currentSamp\n                state.nextSampInt = toInt(Math.round(currentSamp))\n            "]))),ti(t.incrementTime,[ei(t.State,"state"),ei("Float","incrementSamp")],"void")(qf||(qf=r(["\n                if (incrementSamp === state.currentLine.dx) {\n                    state.currentValue += state.currentLine.dy\n                } else {\n                    state.currentValue += ","(\n                        incrementSamp,\n                        {x: 0, y: 0},\n                        {x: state.currentLine.dx, y: state.currentLine.dy},\n                    )\n                }\n                ","(\n                    state, \n                    (state.nextSamp !== -1 ? state.nextSamp: toFloat(",")) + incrementSamp\n                )\n            "])),u.interpolateLin,t.setNextSamp,o.FRAME),ti(t.tick,[ei(t.State,"state")],"void")(Yf||(Yf=r(["\n                state.snd0(","([state.currentValue]))\n                if (toFloat(",") >= state.currentLine.p1.x) {\n                    state.currentValue = state.currentLine.p1.y\n                    ","(state)\n                } else {\n                    ","(state, state.currentLine.dx)\n                    ","(state)\n                }\n            "])),s.floats,o.FRAME,t.stopCurrentLine,t.incrementTime,t.scheduleNextTick),ti(t.scheduleNextTick,[ei(t.State,"state")],"void")(Xf||(Xf=r(["\n                state.skedId = ","(state.nextSampInt, state.tickCallback)\n            "])),a.waitFrame)])},dependencies:[Vp,kf,wf,rl]};var Qf,eh,nh;const th=440*Math.pow(2,1430/12),rh={namespace:"funcs",code:e=>{let{ns:n}=e;return ti(n.mtof,[ei("Float","value")],"Float")(Qf||(Qf=r(["\n        return value <= -1500 ? 0: (value > 1499 ? "," : Math.pow(2, (value - 69) / 12) * 440)\n    "])),th)}},ah={namespace:"funcs",code:e=>{let{ns:n}=e;return ti(n.ftom,[ei("Float","value")],"Float")(eh||(eh=r(["\n        return value <= 0 ? -1500: 12 * Math.log(value / 440) / Math.LN2 + 69\n    "])))}},oh={namespace:"funcs",code:e=>{let{ns:n}=e;return ti(n.pow,[ei("Float","leftOp"),ei("Float","rightOp")],"Float")(nh||(nh=r(["\n        return leftOp > 0 || (Math.round(rightOp) === rightOp) ? Math.pow(leftOp, rightOp): 0\n    "])))}};var ih,sh,lh,uh,ch,dh;const ph={translateArgs:()=>({}),build:()=>({inlets:{0:{type:"signal",id:"0"}},outlets:{0:{type:"signal",id:"0"}}})},fh={"abs~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"abs_t"},dsp:e=>{let{ins:n}=e;return ii(ih||(ih=r(["Math.abs(",")"])),n.$0)}},"cos~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"cos_t"},dsp:e=>{let{ins:n}=e;return ii(sh||(sh=r(["Math.cos("," * 2 * Math.PI)"])),n.$0)}},"wrap~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"wrap_t"},dsp:e=>{let{ins:n}=e;return ii(lh||(lh=r(["(1 + ("," % 1)) % 1"])),n.$0)}},"sqrt~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"sqrt_t"},dsp:e=>{let{ins:n}=e;return ii(uh||(uh=r([""," >= 0 ? Math.pow(",", 0.5): 0"])),n.$0,n.$0)}},"mtof~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"mtof_t"},dsp:(e,n)=>{let{ins:t}=e,{funcs:a}=n;return ii(ch||(ch=r(["","(",")"])),a.mtof,t.$0)},dependencies:[rh]},"ftom~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"ftom_t"},dsp:(e,n)=>{let{ins:t}=e,{funcs:a}=n;return ii(dh||(dh=r(["","(",")"])),a.ftom,t.$0)},dependencies:[ah]}},hh={"abs~":ph,"cos~":ph,"wrap~":ph,"sqrt~":ph,"mtof~":ph,"ftom~":ph};var mh,gh,yh;const bh=e=>({arrayName:fc(e.args[0])||""}),vh=(e,n)=>{let{sked:t,commons:a}=n;return oi([ni("FloatArray",e.emptyArray,"createFloatArray(1)"),ti(e.createState,[ei("string","arrayName")],e.State)(mh||(mh=r(["\n            return {\n                array: ",",\n                arrayName,\n                arrayChangesSubscription: ",",\n                readPosition: 0,\n                readUntil: 0,\n                writePosition: 0,\n            }\n        "])),e.emptyArray,t.ID_NULL),ti(e.setArrayName,[ei(e.State,"state"),ei("string","arrayName"),ei(t.Callback,"callback")],"void")(gh||(gh=r(["\n            if (state.arrayChangesSubscription != ",") {\n                ","(state.arrayChangesSubscription)\n            }\n            state.arrayName = arrayName\n            state.array = ","\n            ","(arrayName, callback)\n        "])),t.ID_NULL,a.cancelArrayChangesSubscription,e.emptyArray,a.subscribeArrayChanges),ti(e.prepareIndex,[ei("Float","index"),ei("Int","arrayLength")],"Int")(yh||(yh=r(["\n            return toInt(Math.min(\n                Math.max(\n                    0, Math.floor(index)\n                ), toFloat(arrayLength - 1)\n            ))\n        "])))])};var wh,Sh,kh;const xh={translateArgs:bh,build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}})},Ih={state:(e,n)=>{let{node:{args:t},ns:r}=e,{sked:a}=n;return ai(r.State,[ei("FloatArray","array",r.emptyArray),ei("string","arrayName",'"'.concat(t.arrayName,'"')),ei(a.Id,"arrayChangesSubscription",a.ID_NULL),ei("Int","readPosition",0),ei("Int","readUntil",0),ei("Int","writePosition",0)])},initialization:e=>{let{ns:n,state:t}=e;return ii(wh||(wh=r(["\n        if (",".arrayName.length) {\n            ","(\n                ",", \n                ",".arrayName,\n                () => ","(",")\n            )\n        }\n    "])),t,n.setArrayName,t,t,n.setArrayNameFinalize,t)},messageReceivers:(e,n)=>{let{ns:t,snds:a,state:o}=e,{msg:i}=n;return{0:ri([ei(i.Message,"m")])(Sh||(Sh=r(["\n            if (","(m, [","])) {        \n                if (",".array.length === 0) {\n                    ","(","([0]))\n\n                } else {\n                    ","(","([",".array[\n                        ","(\n                            ","(m, 0), \n                            ",".array.length\n                        )\n                    ]]))\n                }\n                return \n\n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ","(\n                    ",", \n                    ","(m, 1),\n                    () => ","(",")\n                )\n                return\n        \n            }\n        "])),i.isMatching,i.FLOAT_TOKEN,o,a.$0,i.floats,a.$0,i.floats,o,t.prepareIndex,i.readFloatToken,o,i.isMatching,i.STRING_TOKEN,i.STRING_TOKEN,i.readStringToken,t.setArrayName,o,i.readStringToken,t.setArrayNameFinalize,o)}},core:(e,n)=>{let{ns:t}=e;const{commons:a}=n;return oi([vh(t,n),ti(t.setArrayNameFinalize,[ei(t.State,"state")],"void")(kh||(kh=r(["\n                state.array = ","(state.arrayName)\n            "])),a.getArray)])},dependencies:[tl]};var _h,Ah,Th,Eh;const Oh={translateArgs:bh,build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{}})},Ch={state:(e,n)=>{let{node:{args:t},ns:r}=e,{sked:a}=n;return ai(r.State,[ei("FloatArray","array",r.emptyArray),ei("string","arrayName",'"'.concat(t.arrayName,'"')),ei(a.Id,"arrayChangesSubscription",a.ID_NULL),ei("Int","readPosition",0),ei("Int","readUntil",0),ei("Int","writePosition",0)])},initialization:e=>{let{ns:n,state:t}=e;return ii(_h||(_h=r(["\n        if (",".arrayName.length) {\n            ","(\n                ",", \n                ",".arrayName,\n                () => ","(",")\n            )\n        }\n    "])),t,n.setArrayName,t,t,n.setArrayNameFinalize,t)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:o}=n;return{0:ri([ei(o.Message,"m")])(Ah||(Ah=r(["\n            if (","(m, [","])) {        \n                if (",".array.length === 0) {\n                    return\n\n                } else {\n                    ",".array[",".writePosition] = ","(m, 0)\n                    return\n                }\n\n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ","(\n                    ",", \n                    ","(m, 1),\n                    () => ","(","),\n                )\n                return\n        \n            }\n        "])),o.isMatching,o.FLOAT_TOKEN,a,a,a,o.readFloatToken,o.isMatching,o.STRING_TOKEN,o.STRING_TOKEN,o.readStringToken,t.setArrayName,a,o.readStringToken,t.setArrayNameFinalize,a),1:xc(t.setWritePosition,a,o)}},core:(e,n)=>{let{ns:t}=e;const{commons:a}=n;return oi([vh(t,n),ti(t.setArrayNameFinalize,[ei(t.State,"state")],"void")(Th||(Th=r(["\n                state.array = ","(state.arrayName)\n            "])),a.getArray),ti(t.setWritePosition,[ei(t.State,"state"),ei("Float","writePosition")],"void")(Eh||(Eh=r(["\n                state.writePosition = ","(writePosition, state.array.length)\n            "])),t.prepareIndex)])},dependencies:[tl]};var Nh,Mh,Ph,Fh,Rh,Lh;const Dh={translateArgs:e=>({arrayName:fc(e.args[0])||""}),build:()=>({isPullingSignal:!0,inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"}},outlets:{}}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},jh={flags:{alphaName:"tabwrite_t"},state:(e,n)=>{let{node:{args:t},ns:r}=e,{sked:a}=n;return ai(r.State,[ei("FloatArray","array",r.emptyArray),ei("string","arrayName",'"'.concat(t.arrayName,'"')),ei(a.Id,"arrayChangesSubscription",a.ID_NULL),ei("Int","writePosition",0)])},initialization:e=>{let{ns:n,state:t}=e;return ii(Nh||(Nh=r(["\n        if (",".arrayName.length) {\n            ","(\n                ",", \n                ",".arrayName,\n                () => ","(",")\n            )\n        }\n    "])),t,n.setArrayName,t,t,n.setArrayNameFinalize,t)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:o,bangUtils:i,actionUtils:s}=n;return{"0_message":ri([ei(o.Message,"m")])(Mh||(Mh=r(["\n            if (","(m)) {\n                ","(",", 0)\n                return \n                \n            } else if (","(m, 'stop')) {\n                ","(",")\n                return \n    \n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ","(\n                    ",",\n                    ","(m, 1),\n                    () => ","(","),\n                )\n                return\n    \n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'start'\n            ) {\n                ","(\n                    ",",\n                    toInt(","(m, 1))\n                )\n                return \n    \n            }\n        "])),i.isBang,t.start,a,s.isAction,t.stop,a,o.isMatching,o.STRING_TOKEN,o.STRING_TOKEN,o.readStringToken,t.setArrayName,a,o.readStringToken,t.setArrayNameFinalize,a,o.isMatching,o.STRING_TOKEN,o.FLOAT_TOKEN,o.readStringToken,t.start,a,o.readFloatToken)}},dsp:e=>{let{state:n,ins:t}=e;return ii(Ph||(Ph=r(["\n        if (",".writePosition < ",".array.length) {\n            ",".array[",".writePosition++] = ","\n        }\n    "])),n,n,n,n,t.$0)},core:(e,n)=>{let{ns:t}=e;const{commons:a}=n;return oi([vh(t,n),ti(t.setArrayNameFinalize,[ei(t.State,"state")],"void")(Fh||(Fh=r(["\n                state.array = ","(state.arrayName)\n                state.writePosition = state.array.length\n            "])),a.getArray),ti(t.start,[ei(t.State,"state"),ei("Int","writeFrom")],"void")(Rh||(Rh=r(["\n                state.writePosition = writeFrom\n            "]))),ti(t.stop,[ei(t.State,"state")],"void")(Lh||(Lh=r(["\n                state.writePosition = state.array.length\n            "])))])},dependencies:[tl,Vp,Wp]};var zh,Bh,Uh,Wh;const $h={translateArgs:e=>({arrayName:fc(e.args[0])||""}),build:()=>({inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},Vh={flags:{isDspInline:!0,alphaName:"tabread_t"},state:(e,n)=>{let{node:{args:t},ns:r}=e,{sked:a}=n;return ai(r.State,[ei("FloatArray","array",r.emptyArray),ei("string","arrayName",'"'.concat(t.arrayName,'"')),ei(a.Id,"arrayChangesSubscription",a.ID_NULL),ei("Int","readPosition",0),ei("Int","readUntil",0),ei("Int","writePosition",0)])},initialization:e=>{let{ns:n,state:t}=e;return ii(zh||(zh=r(["\n        if (",".arrayName.length) {\n            ","(\n                ",", \n                ",".arrayName,\n                () => ","(",")\n            )\n        }\n    "])),t,n.setArrayName,t,t,n.setArrayNameFinalize,t)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:o}=n;return{"0_message":ri([ei(o.Message,"m")])(Bh||(Bh=r(["\n            if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ","(\n                    ",",\n                    ","(m, 1),\n                    () => ","(","),\n                )\n                return\n    \n            }\n        "])),o.isMatching,o.STRING_TOKEN,o.STRING_TOKEN,o.readStringToken,t.setArrayName,a,o.readStringToken,t.setArrayNameFinalize,a)}},dsp:e=>{let{ins:n,state:t}=e;return ii(Uh||(Uh=r(["",".array[toInt(Math.max(Math.min(Math.floor(","), toFloat(",".array.length - 1)), 0))]"])),t,n.$0,t)},core:(e,n)=>{let{ns:t}=e;const{commons:a}=n;return oi([vh(t,n),ti(t.setArrayNameFinalize,[ei(t.State,"state")],"void")(Wh||(Wh=r(["\n                state.array = ","(state.arrayName)\n            "])),a.getArray)])},dependencies:[Wp,tl,Vp]},Gh={"tabread~":$h,"tabread4~":$h},Hh={"tabread~":Vh,"tabread4~":Vh};var Kh,qh,Yh,Xh,Jh,Zh;const Qh={translateArgs:e=>({arrayName:fc(e.args[0])||""}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"signal",id:"0"},1:{type:"message",id:"1"}}})},em={flags:{alphaName:"tabplay_t"},state:(e,n)=>{let{node:{args:t},ns:r}=e,{sked:a}=n;return ai(r.State,[ei("FloatArray","array",r.emptyArray),ei("string","arrayName",'"'.concat(t.arrayName,'"')),ei(a.Id,"arrayChangesSubscription",a.ID_NULL),ei("Int","readPosition",0),ei("Int","readUntil",0),ei("Int","writePosition",0)])},initialization:e=>{let{ns:n,state:t}=e;return ii(Kh||(Kh=r(["\n        if (",".arrayName.length) {\n            ","(\n                ",", \n                ",".arrayName,\n                () => ","(",")\n            )\n        }\n    "])),t,n.setArrayName,t,t,n.setArrayNameFinalize,t)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:o,bangUtils:i,actionUtils:s}=n;return{0:ri([ei(o.Message,"m")])(qh||(qh=r(["\n            if (","(m)) {\n                ","(",", 0, ",".array.length)\n                return \n                \n            } else if (","(m, 'stop')) {\n                ","(",")\n                return \n    \n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ","(\n                    ",",\n                    ","(m, 1),\n                    () => ","(","),\n                )\n                return\n    \n            } else if (","(m, [","])) {\n                ","(\n                    ",",\n                    toInt(","(m, 0)), \n                    ",".array.length\n                )\n                return \n    \n            } else if (","(m, [",", ","])) {\n                ","\n                ","(\n                    ",",\n                    fromSample,\n                    fromSample + toInt(","(m, 1)),\n                )\n                return\n            }\n        "])),i.isBang,t.play,a,a,s.isAction,t.stop,a,o.isMatching,o.STRING_TOKEN,o.STRING_TOKEN,o.readStringToken,t.setArrayName,a,o.readStringToken,t.setArrayNameFinalize,a,o.isMatching,o.FLOAT_TOKEN,t.play,a,o.readFloatToken,a,o.isMatching,o.FLOAT_TOKEN,o.FLOAT_TOKEN,ni("Int","fromSample","toInt(".concat(o.readFloatToken,"(m, 0))")),t.play,a,o.readFloatToken)}},dsp:(e,n)=>{let{state:t,snds:a,outs:o}=e,{bangUtils:i}=n;return ii(Yh||(Yh=r(["\n        if (",".readPosition < ",".readUntil) {\n            "," = ",".array[",".readPosition]\n            ",".readPosition++\n            if (",".readPosition >= ",".readUntil) {\n                ","(","())\n            }\n        } else {\n            "," = 0\n        }\n    "])),t,t,o.$0,t,t,t,t,t,a.$1,i.bang,o.$0)},core:(e,n)=>{let{ns:t}=e;const{commons:a}=n;return oi([vh(t,n),ti(t.setArrayNameFinalize,[ei(t.State,"state")],"void")(Xh||(Xh=r(["\n                state.array = ","(state.arrayName)\n                state.readPosition = state.array.length\n                state.readUntil = state.array.length\n            "])),a.getArray),ti(t.play,[ei(t.State,"state"),ei("Int","playFrom"),ei("Int","playTo")],"void")(Jh||(Jh=r(["\n                state.readPosition = playFrom\n                state.readUntil = toInt(Math.min(\n                    toFloat(playTo), \n                    toFloat(state.array.length),\n                ))\n            "]))),ti(t.stop,[ei(t.State,"state")],"void")(Zh||(Zh=r(["\n                state.readPosition = 0\n                state.readUntil = 0\n            "])))])},dependencies:[Wp,tl,Vp]};var nm,tm,rm,am,om,im;const sm="buf",lm={namespace:sm,code:e=>{let{ns:n}=e;return oi([ai(n.SoundBuffer,[ei("FloatArray","data"),ei("Int","length"),ei("Int","writeCursor"),ei("Int","pullAvailableLength")]),ti(n.clear,[ei(n.SoundBuffer,"buffer")],"void")(nm||(nm=r(["\n            buffer.data.fill(0)\n        "]))),ti(n.create,[ei("Int","length")],n.SoundBuffer)(tm||(tm=r(["\n            return {\n                data: createFloatArray(length),\n                length: length,\n                writeCursor: 0,\n                pullAvailableLength: 0,\n            }\n        "])))])}},um={namespace:sm,code:e=>{let{ns:n}=e;return oi([ti(n.writeSample,[ei(n.SoundBuffer,"buffer"),ei("Float","value")],"void")(om||(om=r(["\n            buffer.data[buffer.writeCursor] = value\n            buffer.writeCursor = (buffer.writeCursor + 1) % buffer.length\n        "]))),ti(n.readSample,[ei(n.SoundBuffer,"buffer"),ei("Int","offset")],"Float")(im||(im=r(["\n            // R = (buffer.writeCursor - 1 - offset) -> ideal read position\n            // W = R % buffer.length -> wrap it so that its within buffer length bounds (but could be negative)\n            // (W + buffer.length) % buffer.length -> if W negative, (W + buffer.length) shifts it back to positive.\n            return buffer.data[(buffer.length + ((buffer.writeCursor - 1 - offset) % buffer.length)) % buffer.length]\n        "])))])},dependencies:[lm]};var cm,dm,pm,fm,hm,mm,gm,ym,bm,vm,wm,Sm,km,xm,Im,_m,Am,Tm,Em;const Om="fs",Cm={namespace:Om,code:(e,n,t)=>{let{ns:a}=e,{msg:o}=n,{target:i}=t;const s=[];return"assemblyscript"===i&&s.push("\n                type ".concat(a.OperationId," = Int\n                type ").concat(a.OperationStatus," = Int\n                type ").concat(a.OperationCallback," = (\n                    id: ").concat(a.OperationId,", \n                    status: ").concat(a.OperationStatus,"\n                ) => void\n                type ").concat(a.OperationSoundCallback," = (\n                    id: ").concat(a.OperationId,", \n                    status: ").concat(a.OperationStatus,", \n                    sound: FloatArray[]\n                ) => void\n                type ").concat(a.Url," = string\n            ")),oi([...s,ni("Int",a.OPERATION_SUCCESS,(0).toString()),ni("Int",a.OPERATION_FAILURE,1..toString()),ni("Set<".concat(a.OperationId,">"),a._OPERATIONS_IDS,"new Set()"),ni("Map<".concat(a.OperationId,", ").concat(a.OperationCallback,">"),a._OPERATIONS_CALLBACKS,"new Map()"),ni("Map<".concat(a.OperationId,", ").concat(a.OperationSoundCallback,">"),a._OPERATIONS_SOUND_CALLBACKS,"new Map()"),ei("Int",a._OPERATIONS_COUNTER,"1"),ai(a.SoundInfo,[ei("Int","channelCount"),ei("Int","sampleRate"),ei("Int","bitDepth"),ei("string","encodingFormat"),ei("string","endianness"),ei("string","extraOptions")]),ti(a.soundInfoToMessage,[ei(a.SoundInfo,"soundInfo")],o.Message)(cm||(cm=r(["\n                ","\n                ","(info, 0, toFloat(soundInfo.channelCount))\n                ","(info, 1, toFloat(soundInfo.sampleRate))\n                ","(info, 2, toFloat(soundInfo.bitDepth))\n                ","(info, 3, soundInfo.encodingFormat)\n                ","(info, 4, soundInfo.endianness)\n                ","(info, 5, soundInfo.extraOptions)\n                return info\n            "])),ni(o.Message,"info","".concat(o.create,"([\n                    ").concat(o.FLOAT_TOKEN,",\n                    ").concat(o.FLOAT_TOKEN,",\n                    ").concat(o.FLOAT_TOKEN,",\n                    ").concat(o.STRING_TOKEN,",\n                    soundInfo.encodingFormat.length,\n                    ").concat(o.STRING_TOKEN,",\n                    soundInfo.endianness.length,\n                    ").concat(o.STRING_TOKEN,",\n                    soundInfo.extraOptions.length\n                ])")),o.writeFloatToken,o.writeFloatToken,o.writeFloatToken,o.writeStringToken,o.writeStringToken,o.writeStringToken),ti(a._assertOperationExists,[ei(a.OperationId,"id"),ei("string","operationName")],"void")(dm||(dm=r(["\n                if (!",".has(id)) {\n                    throw new Error(operationName + ' operation unknown : ' + id.toString())\n                }\n            "])),a._OPERATIONS_IDS),ti(a._createOperationId,[],a.OperationId)(pm||(pm=r(["\n                ","\n                ",".add(id)\n                return id\n            "])),ni(a.OperationId,"id","".concat(a._OPERATIONS_COUNTER,"++")),a._OPERATIONS_IDS)])},dependencies:[nu]},Nm={namespace:Om,code:e=>{let{ns:n}=e;return oi([ti(n.readSoundFile,[ei(n.Url,"url"),ei(n.SoundInfo,"soundInfo"),ei(n.OperationSoundCallback,"callback")],n.OperationId)(fm||(fm=r(["\n            ","\n            ",".set(id, callback)\n            ","(id, url, ","(soundInfo))\n            return id\n        "])),ni(n.OperationId,"id","".concat(n._createOperationId,"()")),n._OPERATIONS_SOUND_CALLBACKS,n.i_readSoundFile,n.soundInfoToMessage),ti(n.x_onReadSoundFileResponse,[ei(n.OperationId,"id"),ei(n.OperationStatus,"status"),ei("FloatArray[]","sound")],"void")(hm||(hm=r(["\n            ",'(id, "','")\n            ',".delete(id)\n            // Finish cleaning before calling the callback in case it would throw an error.\n            const callback = ",".get(id)\n            callback(id, status, sound)\n            ",".delete(id)\n        "])),n._assertOperationExists,n.x_onReadSoundFileResponse,n._OPERATIONS_IDS,n._OPERATIONS_SOUND_CALLBACKS,n._OPERATIONS_SOUND_CALLBACKS)])},exports:e=>{let{ns:n}=e;return[n.x_onReadSoundFileResponse]},imports:(e,n)=>{let{ns:t}=e,{msg:a}=n;return[ti(t.i_readSoundFile,[ei(t.OperationId,"id"),ei(t.Url,"url"),ei(a.Message,"info")],"void")(mm||(mm=r([""])))]},dependencies:[Cm]},Mm={namespace:Om,code:e=>{let{ns:n}=e;return oi([ti(n.writeSoundFile,[ei("FloatArray[]","sound"),ei(n.Url,"url"),ei(n.SoundInfo,"soundInfo"),ei(n.OperationCallback,"callback")],n.OperationId)(gm||(gm=r(["\n            ","\n            ",".set(id, callback)\n            ","(id, sound, url, ","(soundInfo))\n            return id\n        "])),ni(n.OperationId,"id","".concat(n._createOperationId,"()")),n._OPERATIONS_CALLBACKS,n.i_writeSoundFile,n.soundInfoToMessage),ti(n.x_onWriteSoundFileResponse,[ei(n.OperationId,"id"),ei(n.OperationStatus,"status")],"void")(ym||(ym=r(["\n            ",'(id, "','")\n            ',".delete(id)\n            // Finish cleaning before calling the callback in case it would throw an error.\n            ","\n            callback(id, status)\n            ",".delete(id)\n        "])),n._assertOperationExists,n.x_onWriteSoundFileResponse,n._OPERATIONS_IDS,ni(n.OperationCallback,"callback","".concat(n._OPERATIONS_CALLBACKS,".get(id)")),n._OPERATIONS_CALLBACKS)])},exports:e=>{let{ns:n}=e;return[n.x_onWriteSoundFileResponse]},imports:(e,n)=>{let{ns:t}=e,{msg:a}=n;return[ti(t.i_writeSoundFile,[ei(t.OperationId,"id"),ei("FloatArray[]","sound"),ei(t.Url,"url"),ei(a.Message,"info")],"void")(bm||(bm=r([""])))]},dependencies:[Cm]},Pm={namespace:Om,code:(e,n)=>{let{ns:t}=e,{buf:a}=n;return oi([ni("Map<".concat(t.OperationId,", Array<").concat(a.SoundBuffer,">>"),t.SOUND_STREAM_BUFFERS,"new Map()"),ni("Int",t._SOUND_BUFFER_LENGTH,"20 * 44100"),ti(t.closeSoundStream,[ei(t.OperationId,"id"),ei(t.OperationStatus,"status")],"void")(vm||(vm=r(["\n            if (!",".has(id)) {\n                return\n            }\n            ",".delete(id)\n            ",".get(id)(id, status)\n            ",".delete(id)\n            // Delete this last, to give the callback \n            // a chance to save a reference to the buffer\n            // If write stream, there won't be a buffer\n            if (",".has(id)) {\n                ",".delete(id)\n            }\n            ","(id, status)\n        "])),t._OPERATIONS_IDS,t._OPERATIONS_IDS,t._OPERATIONS_CALLBACKS,t._OPERATIONS_CALLBACKS,t.SOUND_STREAM_BUFFERS,t.SOUND_STREAM_BUFFERS,t.i_closeSoundStream),ti(t.x_onCloseSoundStream,[ei(t.OperationId,"id"),ei(t.OperationStatus,"status")],"void")(wm||(wm=r(["\n            ","(id, status)\n        "])),t.closeSoundStream)])},exports:e=>{let{ns:n}=e;return[n.x_onCloseSoundStream]},imports:e=>{let{ns:n}=e;return[ti(n.i_closeSoundStream,[ei(n.OperationId,"id"),ei(n.OperationStatus,"status")],"void")(Sm||(Sm=r([""])))]},dependencies:[lm,Cm]},Fm={namespace:Om,code:(e,n)=>{let{ns:t}=e,{buf:a}=n;return oi([ti(t.openSoundReadStream,[ei(t.Url,"url"),ei(t.SoundInfo,"soundInfo"),ei(t.OperationCallback,"callback")],t.OperationId)(km||(km=r(["\n            ","\n            ","\n            for (","; channel < soundInfo.channelCount; channel++) {\n                buffers.push(","(","))\n            }\n            ",".set(id, buffers)\n            ",".set(id, callback)\n            ","(id, url, ","(soundInfo))\n            return id\n        "])),ni(t.OperationId,"id","".concat(t._createOperationId,"()")),ni("Array<".concat(a.SoundBuffer,">"),"buffers","[]"),ei("Int","channel","0"),a.create,t._SOUND_BUFFER_LENGTH,t.SOUND_STREAM_BUFFERS,t._OPERATIONS_CALLBACKS,t.i_openSoundReadStream,t.soundInfoToMessage),ti(t.x_onSoundStreamData,[ei(t.OperationId,"id"),ei("FloatArray[]","block")],"Int")(xm||(xm=r(["\n            ",'(id, "','")\n            const buffers = ',".get(id)\n            for (","; i < buffers.length; i++) {\n                ","(buffers[i], block[i])\n            }\n            return buffers[0].pullAvailableLength\n        "])),t._assertOperationExists,t.x_onSoundStreamData,t.SOUND_STREAM_BUFFERS,ei("Int","i","0"),a.pushBlock)])},exports:e=>{let{ns:n}=e;return[n.x_onSoundStreamData]},imports:(e,n)=>{let{ns:t}=e,{msg:a}=n;return[ti(t.i_openSoundReadStream,[ei(t.OperationId,"id"),ei(t.Url,"url"),ei(a.Message,"info")],"void")(Im||(Im=r([""])))]},dependencies:[Pm,{namespace:sm,code:e=>{let{ns:n}=e;return oi([ti(n.pushBlock,[ei(n.SoundBuffer,"buffer"),ei("FloatArray","block")],"Int")(rm||(rm=r(["\n            if (buffer.pullAvailableLength + block.length > buffer.length) {\n                throw new Error('buffer full')\n            }\n\n            ","\n            while (left > 0) {\n                ","\n                buffer.data.set(\n                    block.subarray(\n                        block.length - left, \n                        block.length - left + lengthToWrite\n                    ), \n                    buffer.writeCursor\n                )\n                left -= lengthToWrite\n                buffer.writeCursor = (buffer.writeCursor + lengthToWrite) % buffer.length\n                buffer.pullAvailableLength += lengthToWrite\n            }\n            return buffer.pullAvailableLength\n        "])),ei("Int","left","block.length"),ni("Int","lengthToWrite","toInt(Math.min(\n                    toFloat(buffer.length - buffer.writeCursor), \n                    toFloat(left),\n                ))")),ti(n.pullSample,[ei(n.SoundBuffer,"buffer")],"Float")(am||(am=r(["\n            if (buffer.pullAvailableLength <= 0) {\n                return 0\n            }\n            ","\n            buffer.pullAvailableLength -= 1\n            return buffer.data[readCursor >= 0 ? readCursor : buffer.length + readCursor]\n        "])),ni("Int","readCursor","buffer.writeCursor - buffer.pullAvailableLength"))])},dependencies:[lm]}]},Rm={namespace:Om,code:e=>{let{ns:n}=e;return oi([ti(n.openSoundWriteStream,[ei(n.Url,"url"),ei(n.SoundInfo,"soundInfo"),ei(n.OperationCallback,"callback")],n.OperationId)(_m||(_m=r(["\n            const id = ","()\n            ",".set(id, [])\n            ",".set(id, callback)\n            ","(id, url, ","(soundInfo))\n            return id\n        "])),n._createOperationId,n.SOUND_STREAM_BUFFERS,n._OPERATIONS_CALLBACKS,n.i_openSoundWriteStream,n.soundInfoToMessage),ti(n.sendSoundStreamData,[ei(n.OperationId,"id"),ei("FloatArray[]","block")],"void")(Am||(Am=r(["\n            ",'(id, "','")\n            ',"(id, block)\n        "])),n._assertOperationExists,n.sendSoundStreamData,n.i_sendSoundStreamData)])},imports:(e,n)=>{let{ns:t}=e,{msg:a}=n;return[ti(t.i_openSoundWriteStream,[ei(t.OperationId,"id"),ei(t.Url,"url"),ei(a.Message,"info")],"void")(Tm||(Tm=r([""]))),ti(t.i_sendSoundStreamData,[ei(t.OperationId,"id"),ei("FloatArray[]","block")],"void")(Em||(Em=r([""])))]},dependencies:[Pm]};var Lm,Dm;const jm={namespace:"soundFileOpenOpts",code:(e,n)=>{let{ns:t}=e,{msg:a,fs:o}=n;return ti(t.parse,[ei(a.Message,"m"),ei(o.SoundInfo,"soundInfo")],"Set<Int>")(Lm||(Lm=r(["\n            ","\n            ","\n            while (i < ","(m)) {\n                if (","(m, i)) {\n                    ","\n                    if (['-wave', '-aiff', '-caf', '-next', '-ascii'].includes(str)) {\n                        soundInfo.encodingFormat = str.slice(1)\n\n                    } else if (str === '-raw') {\n                        console.log('-raw format not yet supported')\n                        i += 4\n                        \n                    } else if (str === '-big') {\n                        soundInfo.endianness = 'b'\n\n                    } else if (str === '-little') {\n                        soundInfo.endianness = 'l'\n\n                    } else if (str === '-bytes') {\n                        if (i < ","(m) && ","(m, i + 1)) {\n                            soundInfo.bitDepth = toInt(","(m, i + 1) * 8)\n                            i++\n                        } else {\n                            console.log('failed to parse -bytes <value>')\n                        }\n\n                    } else if (str === '-rate') {\n                        if (i < ","(m) && ","(m, i + 1)) {\n                            soundInfo.sampleRate = toInt(","(m, i + 1))\n                            i++\n                        } else {\n                            console.log('failed to parse -rate <value>')\n                        }\n\n                    } else {\n                        unhandled.add(i)\n                    }\n                    \n                } else {\n                    unhandled.add(i)\n                }\n                i++\n            }\n            return unhandled\n        "])),ni("Set<Int>","unhandled","new Set()"),ei("Int","i","0"),a.getLength,a.isStringToken,ni("string","str","".concat(a.readStringToken,"(m, i)")),a.getLength,a.isFloatToken,a.readFloatToken,a.getLength,a.isFloatToken,a.readFloatToken)},dependencies:[nu,Cm]},zm={namespace:"readWriteFsOpts",code:(e,n)=>{let{ns:t}=e,{msg:a,fs:o}=n;return ti(t.parse,[ei(a.Message,"m"),ei(o.SoundInfo,"soundInfo"),ei("Set<Int>","unhandledOptions")],"string")(Dm||(Dm=r(['\n            // Remove the "open" token\n            unhandledOptions.delete(0)\n\n            ',"\n            ","\n            ","\n            ","\n            while (i < ","(m)) {\n                if (!unhandledOptions.has(i)) {\n\n                } else if (","(m, i)) {\n                    url = ","(m, i)\n                    urlFound = true\n\n                } else {\n                    console.log(\"[writesf/readsf~] invalid option index \" + i.toString())\n                    errored = true\n                }\n                i++\n            }\n            if (!urlFound) {\n                console.log(\"[writesf/readsf~] invalid options, file url not found\")\n                return ''\n            }\n            if (errored) {\n                return ''\n            }\n            return url\n        "])),ei("string","url",'""'),ei("boolean","urlFound","false"),ei("boolean","errored","false"),ei("Int","i","1"),a.getLength,a.isStringToken,a.readStringToken)},dependencies:[nu,Cm]};var Bm,Um,Wm,$m;const Vm={translateArgs:e=>({channelCount:pc(e.args[0])||1}),build:e=>({inlets:{0:{type:"message",id:"0"}},outlets:{...Zo(Jo(e.channelCount),(e=>["".concat(e),{type:"signal",id:"".concat(e)}])),["".concat(e.channelCount)]:{type:"message",id:"".concat(e.channelCount)}}})},Gm={flags:{alphaName:"readsf_t"},state:(e,n)=>{let{ns:t}=e,{buf:r,fs:a}=n;return ai(t.State,[ei("Array<".concat(r.SoundBuffer,">"),"buffers","[]"),ei(a.OperationId,"streamOperationId",-1),ei("Int","readingStatus",0)])},messageReceivers:(e,n)=>{let{ns:t,node:a,state:o}=e,{actionUtils:i,msg:s}=n;return{0:ri([ei(s.Message,"m")])(Bm||(Bm=r(["\n            if (","(m) >= 2) {\n                if (","(m, 0) \n                    && ","(m, 0) === 'open'\n                ) {\n                    ","(\n                        ",",\n                        m,\n                        ",",\n                        ","\n                    )\n                    return\n                }\n    \n            } else if (","(m, [","])) {\n                if (","(m, 0) === 0) {\n                    ",".readingStatus = 3\n                    return\n    \n                } else {\n                    if (",".streamOperationId !== -1) {\n                        ",".readingStatus = 1\n                    } else {\n                        console.log('[readsf~] start requested without prior open')\n                    }\n                    return\n    \n                }\n                \n            } else if (","(m, 'print')) {\n                console.log('[readsf~] reading = ' + ",".readingStatus.toString())\n                return\n            }\n        "])),s.getLength,s.isStringToken,s.readStringToken,t.openStream,o,a.args.channelCount,ri()(Um||(Um=r(["\n                            ",".streamOperationId = -1\n                            if (",".readingStatus === 1) {\n                                ",".readingStatus = 2\n                            } else {\n                                ",".readingStatus = 3\n                            }\n                        "])),o,o,o,o),s.isMatching,s.FLOAT_TOKEN,s.readFloatToken,o,o,o,i.isAction,o)}},dsp:(e,n)=>{let{state:t,snds:a,outs:o,node:{args:{channelCount:i}}}=e,{buf:s,bangUtils:l}=n;return ii(Wm||(Wm=r(["\n        switch(",".readingStatus) {\n            case 1: \n                ","\n                break\n                \n            case 2: \n                ","\n                if (",".buffers[0].pullAvailableLength === 0) {\n                    ","(","())\n                    ",".readingStatus = 3\n                }\n                break\n    \n            case 3: \n                ","\n                ",".readingStatus = 0\n                break\n        }\n    "])),t,Jo(i).map((e=>"".concat(o[e]," = ").concat(s.pullSample,"(").concat(t,".buffers[").concat(e,"])"))),Jo(i).map((e=>"".concat(o[e]," = ").concat(s.pullSample,"(").concat(t,".buffers[").concat(e,"])"))),t,a[i],l.bang,t,Jo(i).map((e=>"".concat(o[e]," = 0"))),t)},core:(e,n)=>{let{ns:t}=e,{msg:a,fs:o,core:i,soundFileOpenOpts:s,readWriteFsOpts:l}=n;return oi([ti(t.openStream,[ei(t.State,"state"),ei(a.Message,"m"),ei("Int","channelCount"),ei(o.OperationCallback,"onStreamClose")],"void")($m||($m=r(["\n                if (state.streamOperationId !== -1) {\n                    state.readingStatus = 3\n                    ","(state.streamOperationId, ",")\n                }\n        \n                ","\n                ","\n                ","\n                if (url.length === 0) {\n                    return\n                }\n                state.streamOperationId = ","(\n                    url,\n                    soundInfo,\n                    onStreamClose,\n                )\n                state.buffers = ",".get(state.streamOperationId)\n            "])),o.closeSoundStream,o.OPERATION_SUCCESS,ni(o.SoundInfo,"soundInfo","{\n                    channelCount,\n                    sampleRate: toInt(".concat(i.SAMPLE_RATE,"),\n                    bitDepth: 32,\n                    encodingFormat: '',\n                    endianness: '',\n                    extraOptions: '',\n                }")),ni("Set<Int>","unhandledOptions","".concat(s.parse,"(\n                    m,\n                    soundInfo,\n                )")),ni("string","url","".concat(l.parse,"(\n                    m,\n                    soundInfo,\n                    unhandledOptions\n                )")),o.openSoundReadStream,o.SOUND_STREAM_BUFFERS)])},dependencies:[jm,zm,Wp,Vp,Fm]};var Hm,Km,qm;const Ym=220500,Xm={translateArgs:e=>({channelCount:pc(e.args[0])||1}),build:e=>{let{channelCount:n}=e;return{inlets:{"0_message":{type:"message",id:"0_message"},...Zo(Jo(n),(e=>["".concat(e),{type:"signal",id:"".concat(e)}]))},outlets:{},isPullingSignal:!0}},configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},Jm={flags:{alphaName:"write_t"},state:(e,n)=>{let{node:{args:t},ns:r}=e,{fs:a}=n;return ai(r.State,[ei(a.OperationId,"operationId",-1),ei("boolean","isWriting","false"),ei("Array<FloatArray>","block","[\n                ".concat(Jo(t.channelCount).map((()=>"createFloatArray(".concat(Ym,")"))).join(","),"\n            ]")),ei("Int","cursor",0)])},dsp:e=>{let{ns:n,state:t,ins:a,node:{args:o}}=e;return ii(Hm||(Hm=r(["\n        if (",".isWriting === true) {\n            ","\n            ",".cursor++\n            if (",".cursor === ",") {\n                ","(",")\n            }\n        }\n    "])),t,Jo(o.channelCount).map((e=>"".concat(t,".block[").concat(e,"][").concat(t,".cursor] = ").concat(a[e]))),t,t,Ym,n.flushBlock,t)},messageReceivers:(e,n)=>{let{ns:t,node:a,state:o}=e,{core:i,msg:s,fs:l,actionUtils:u,soundFileOpenOpts:c,readWriteFsOpts:d}=n;return{"0_message":ri([ei(s.Message,"m")],"void")(Km||(Km=r(["\n            if (","(m) >= 2) {\n                if (\n                    ","(m, 0) \n                    && ","(m, 0) === 'open'\n                ) {\n                    if (",".operationId !== -1) {\n                        ","(",".operationId, ",")\n                    }\n    \n                    ","\n                    ","\n                    ","\n                    if (url.length === 0) {\n                        return\n                    }\n                    ",".operationId = ","(\n                        url,\n                        soundInfo,\n                        () => {\n                            ","(",")\n                            ",".operationId = -1\n                        }\n                    )\n                    return\n                }\n    \n            } else if (","(m, 'start')) {\n                    ",".isWriting = true\n                    return\n    \n            } else if (","(m, 'stop')) {\n                ","(",")\n                ",".isWriting = false\n                return\n    \n            } else if (","(m, 'print')) {\n                console.log('[writesf~] writing = ' + ",".isWriting.toString())\n                return\n            }    \n        "])),s.getLength,s.isStringToken,s.readStringToken,o,l.closeSoundStream,o,l.OPERATION_SUCCESS,ni(l.SoundInfo,"soundInfo","{\n                        channelCount: ".concat(a.args.channelCount,",\n                        sampleRate: toInt(").concat(i.SAMPLE_RATE,"),\n                        bitDepth: 32,\n                        encodingFormat: '',\n                        endianness: '',\n                        extraOptions: '',\n                    }")),ni("Set<Int>","unhandledOptions","".concat(c.parse,"(\n                        m,\n                        soundInfo,\n                    )")),ni("string","url","".concat(d.parse,"(\n                        m,\n                        soundInfo,\n                        unhandledOptions\n                    )")),o,l.openSoundWriteStream,t.flushBlock,o,o,u.isAction,o,u.isAction,t.flushBlock,o,o,u.isAction,o)}},core:(e,n)=>{let{ns:t}=e,{fs:a}=n;return oi([ti(t.flushBlock,[ei(t.State,"state")],"void")(qm||(qm=r(["\n                ","\n                for (","; i < state.block.length; i++) {\n                    block.push(state.block[i].subarray(0, state.cursor))\n                }\n                ","(state.operationId, block)\n                state.cursor = 0\n            "])),ni("Array<FloatArray>","block","[]"),ei("Int","i","0"),a.sendSoundStreamData)])},dependencies:[jm,zm,Vp,Rm]};var Zm,Qm,eg,ng,tg,rg,ag;const og={translateArgs:e=>{let{args:n}=e;return{frequency:pc(n[0])||0,Q:pc(n[1])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},ig={flags:{alphaName:"filters_bp_t"},state:e=>{let{node:{args:n},ns:t}=e;return ai(t.State,[ei("Float","frequency",n.frequency),ei("Float","Q",n.Q),ei("Float","coef1",0),ei("Float","coef2",0),ei("Float","gain",0),ei("Float","y",0),ei("Float","ym1",0),ei("Float","ym2",0)])},initialization:e=>{let{ns:n,state:t}=e;return ii(Zm||(Zm=r(["\n        ","(",")\n    "])),n.updateCoefs,t)},dsp:e=>{let{ins:n,outs:t,state:a}=e;return ii(Qm||(Qm=r(["\n        ",".y = "," + ",".coef1 * ",".ym1 + ",".coef2 * ",".ym2\n        "," = ",".gain * ",".y\n        ",".ym2 = ",".ym1\n        ",".ym1 = ",".y\n    "])),a,n.$0,a,a,a,a,t.$0,a,a,a,a,a,a)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:o}=n;return{"0_message":ri([ei(o.Message,"m")],"void")(eg||(eg=r(["\n            if (\n                ","(m)\n                && ","(m, 0) === 'clear'\n            ) {\n                ","()\n                return \n            }\n        "])),o.isMatching,o.readStringToken,t.clear),1:xc(t.setFrequency,a,o),2:xc(t.setQ,a,o)}},core:(e,n)=>{let{ns:t}=e,{core:a}=n;return oi([ti(t.updateCoefs,[ei(t.State,"state")],"void")(ng||(ng=r(["\n                ","\n                ","\n                ","\n                ","\n        \n                state.coef1 = 2.0 * sigbp_qcos * r\n                state.coef2 = - r * r\n                state.gain = 2 * oneminusr * (oneminusr + r * omega)\n            "])),ei("Float","omega","state.frequency * (2.0 * Math.PI) / ".concat(a.SAMPLE_RATE)),ei("Float","oneminusr","state.Q < 0.001 ? 1.0 : Math.min(omega / state.Q, 1)"),ei("Float","r","1.0 - oneminusr"),ei("Float","sigbp_qcos","(omega >= -(0.5 * Math.PI) && omega <= 0.5 * Math.PI) ? \n                    (((Math.pow(omega, 6) * (-1.0 / 720.0) + Math.pow(omega, 4) * (1.0 / 24)) - Math.pow(omega, 2) * 0.5) + 1)\n                    : 0")),ti(t.setFrequency,[ei(t.State,"state"),ei("Float","frequency")],"void")(tg||(tg=r(["\n                state.frequency = (frequency < 0.001) ? 10: frequency\n                ","(state)\n            "])),t.updateCoefs),ti(t.setQ,[ei(t.State,"state"),ei("Float","Q")],"void")(rg||(rg=r(["\n                state.Q = Math.max(Q, 0)\n                ","(state)\n            "])),t.updateCoefs),ti(t.clear,[ei(t.State,"state")],"void")(ag||(ag=r(["\n                state.ym1 = 0\n                state.ym2 = 0\n            "])))])}};var sg,lg,ug,cg,dg,pg,fg;const hg={namespace:"sigBuses",code:e=>{let{ns:n}=e;return oi([ni("Map<string, Float>",n._BUSES,"new Map()"),"".concat(n._BUSES,".set('', 0)"),ti(n.addAssign,[ei("string","busName"),ei("Float","value")],"Float")(sg||(sg=r(["\n            ","\n            ",".set(\n                busName,\n                newValue,\n            )\n            return newValue\n        "])),ni("Float","newValue","".concat(n._BUSES,".get(busName) + value")),n._BUSES),ti(n.set,[ei("string","busName"),ei("Float","value")],"void")(lg||(lg=r(["\n            ",".set(\n                busName,\n                value,\n            )\n        "])),n._BUSES),ti(n.reset,[ei("string","busName")],"void")(ug||(ug=r(["\n            ",".set(busName, 0)\n        "])),n._BUSES),ti(n.read,[ei("string","busName")],"Float")(cg||(cg=r(["\n            return ",".get(busName)\n        "])),n._BUSES)])}},mg={namespace:"msgBuses",code:(e,n)=>{let{ns:t}=e,{msg:a}=n;return oi([ni("Map<string, Array<".concat(a.Handler,">>"),t._BUSES,"new Map()"),ti(t.publish,[ei("string","busName"),ei(a.Message,"message")],"void")(dg||(dg=r(["\n            ","\n            ","\n            for (i = 0; i < callbacks.length; i++) {\n                callbacks[i](message)\n            }\n        "])),ei("Int","i","0"),ni("Array<".concat(a.Handler,">"),"callbacks","".concat(t._BUSES,".has(busName) ? ").concat(t._BUSES,".get(busName): []"))),ti(t.subscribe,[ei("string","busName"),ei(a.Handler,"callback")],"void")(pg||(pg=r(["\n            if (!",".has(busName)) {\n                ",".set(busName, [])\n            }\n            ",".get(busName).push(callback)\n        "])),t._BUSES,t._BUSES,t._BUSES),ti(t.unsubscribe,[ei("string","busName"),ei(a.Handler,"callback")],"void")(fg||(fg=r(["\n            if (!",".has(busName)) {\n                return\n            }\n            ","\n            ","\n            if (found !== -1) {\n                callbacks.splice(found, 1)\n            }\n        "])),t._BUSES,ni("Array<".concat(a.Handler,">"),"callbacks","".concat(t._BUSES,".get(busName)")),ni("Int","found","callbacks.indexOf(callback)"))])},dependencies:[nu]};var gg,yg,bg,vg,wg,Sg,kg,xg;const Ig={translateArgs:e=>({busName:fc(e.args[0])||""}),build:()=>({inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"}},outlets:{},isPullingSignal:!0}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},_g={translateArgs:e=>({busName:fc(e.args[0])||""}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"signal",id:"0"}}})},Ag={translateArgs:e=>({busName:fc(e.args[0])||""}),build:()=>({inlets:{0:{type:"signal",id:"0"}},outlets:{},isPullingSignal:!0})},Tg={translateArgs:e=>({busName:fc(e.args[0])||""}),build:()=>({inlets:{},outlets:{0:{type:"signal",id:"0"}}})},Eg=(e,n)=>{let{sigBuses:t}=n;return oi([ti(e.setBusName,[ei(e.State,"state"),ei("string","busName")],"void")(gg||(gg=r(["\n            if (busName.length) {\n                state.busName = busName\n                ","(state.busName)\n            }\n        "])),t.reset)])},Og={state:e=>{let{ns:n}=e;return ai(n.State,[ei("string","busName",'""')])},initialization:e=>{let{ns:n,node:{args:t},state:a}=e;return ii(yg||(yg=r(["\n        ","(",', "','")\n    '])),n.setBusName,a,t.busName)}},Cg={...Og,flags:{alphaName:"throw_t"},dsp:(e,n)=>{let{ins:t,state:a}=e,{sigBuses:o}=n;return ii(bg||(bg=r(["\n        ","(",".busName, ",")\n    "])),o.addAssign,a,t.$0)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:o}=n;return{"0_message":ri([ei(o.Message,"m")],"void")(vg||(vg=r(["\n            if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ","(",", ","(m, 1))\n                return\n            }\n        "])),o.isMatching,o.STRING_TOKEN,o.STRING_TOKEN,o.readStringToken,t.setBusName,a,o.readStringToken)}},core:(e,n)=>{let{ns:t}=e;return Eg(t,n)},dependencies:[hg]},Ng={...Og,flags:{alphaName:"catch_t"},dsp:(e,n)=>{let{outs:t,state:a}=e,{sigBuses:o}=n;return ii(wg||(wg=r(["\n        "," = ","(",".busName)\n        ","(",".busName)\n    "])),t.$0,o.read,a,o.reset,a)},core:(e,n)=>{let{ns:t}=e;return Eg(t,n)},dependencies:[hg]},Mg={...Og,flags:{alphaName:"send_t"},dsp:(e,n)=>{let{state:t,ins:a}=e,{sigBuses:o}=n;return ii(Sg||(Sg=r(["\n        ","(",".busName, ",")\n    "])),o.set,t,a.$0)},core:(e,n)=>{let{ns:t}=e;return Eg(t,n)},dependencies:[hg]},Pg={...Og,flags:{alphaName:"receive_t",isDspInline:!0},dsp:(e,n)=>{let{state:t}=e,{sigBuses:a}=n;return ii(kg||(kg=r(["","(",".busName)"])),a.read,t)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:o}=n;return{0:ri([ei(o.Message,"m")])(xg||(xg=r(["\n            if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ","(",", ","(m, 1))\n                return\n            }\n        "])),o.isMatching,o.STRING_TOKEN,o.STRING_TOKEN,o.readStringToken,t.setBusName,a,o.readStringToken)}},core:(e,n)=>{let{ns:t}=e;return Eg(t,n)},dependencies:[hg]},Fg={"throw~":Ig,"catch~":Tg,"send~":Ag,"receive~":_g},Rg={"throw~":Cg,"catch~":Ng,"send~":Mg,"receive~":Pg};var Lg,Dg,jg,zg,Bg,Ug,Wg,$g;const Vg={translateArgs:e=>({rate:pc(e.args[0])||0,unitAmount:pc(e.args[1])||1,unit:fc(e.args[2])||"msec"}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}})},Gg={state:(e,n)=>{let{ns:t}=e,{msg:a,sked:o}=n;return ai(t.State,[ei("Float","rate",0),ei("Float","sampleRatio",1),ei("Int","skedId",o.ID_NULL),ei("Float","realNextTick",-1),ei(a.Handler,"snd0",ri([ei(a.Message,"m")])(Lg||(Lg=r([""])))),ei(o.Callback,"tickCallback",ri()(Dg||(Dg=r([""]))))])},initialization:(e,n)=>{let{ns:t,node:{args:a},state:o,snds:i}=e,{core:s}=n;return ii(jg||(jg=r(["\n            ",".snd0 = ","\n            ",".sampleRatio = computeUnitInSamples(",", ",', "','")\n            ',"(",", ",")\n            ",".tickCallback = ","\n        "])),o,i.$0,o,s.SAMPLE_RATE,a.unitAmount,a.unit,t.setRate,o,a.rate,o,ri()(zg||(zg=r(["\n                ","(",")\n            "])),t.scheduleNextTick,o))},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{core:o,msg:i,bangUtils:s,actionUtils:l}=n;return{0:ri([ei(i.Message,"m")])(Bg||(Bg=r(["\n            if (","(m) === 1) {\n                if (\n                    (","(m, 0) && ","(m, 0) === 0)\n                    || ","(m, 'stop')\n                ) {\n                    ","(",")\n                    return\n    \n                } else if (\n                    ","(m, 0)\n                    || ","(m)\n                ) {\n                    ",".realNextTick = toFloat(",")\n                    ","(",")\n                    return\n                }\n            }\n        "])),i.getLength,i.isFloatToken,i.readFloatToken,l.isAction,t.stop,a,i.isFloatToken,s.isBang,a,o.FRAME,t.scheduleNextTick,a),1:xc(t.setRate,a,i)}},core:(e,n)=>{let{ns:t}=e,{bangUtils:a,commons:o,sked:i}=n;return oi([ti(t.setRate,[ei(t.State,"state"),ei("Float","rate")],"void")(Ug||(Ug=r(["\n                state.rate = Math.max(rate, 0)\n            "]))),ti(t.scheduleNextTick,[ei(t.State,"state")],"void")(Wg||(Wg=r(["\n                state.snd0(","())\n                state.realNextTick = state.realNextTick + state.rate * state.sampleRatio\n                state.skedId = ","(\n                    toInt(Math.round(state.realNextTick)), \n                    state.tickCallback,\n                )\n            "])),a.bang,o.waitFrame),ti(t.stop,[ei(t.State,"state")],"void")($g||($g=r(["\n                if (state.skedId !== ",") {\n                    ","(state.skedId)\n                    state.skedId = ","\n                }\n                state.realNextTick = 0\n            "])),i.ID_NULL,o.cancelWaitFrame,i.ID_NULL)])},dependencies:[kf,Wp,Vp,rl]};var Hg,Kg,qg;const Yg={translateArgs:e=>({unitAmount:pc(e.args[0])||1,unit:fc(e.args[1])||"msec"}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}})},Xg={state:e=>{let{ns:n}=e;return ai(n.State,[ei("Float","sampleRatio",0),ei("Int","resetTime",0)])},initialization:(e,n)=>{let{node:{args:t},state:a}=e,{core:o}=n;return ii(Hg||(Hg=r(["\n            ",".sampleRatio = computeUnitInSamples(",", ",', "','")\n        '])),a,o.SAMPLE_RATE,t.unitAmount,t.unit)},messageReceivers:(e,n)=>{let{snds:t,state:a}=e,{bangUtils:o,core:i,msg:s}=n;return{0:ri([ei(s.Message,"m")])(Kg||(Kg=r(["\n            if (","(m)) {\n                ",".resetTime = ","\n                return\n    \n            } else if (\n                ","(m, [",", ",", ","])\n                && ","(m, 0) === 'tempo'\n            ) {\n                ",".sampleRatio = computeUnitInSamples(\n                    ",", \n                    ","(m, 1), \n                    ","(m, 2)\n                )\n                return\n            }\n        "])),o.isBang,a,i.FRAME,s.isMatching,s.STRING_TOKEN,s.FLOAT_TOKEN,s.STRING_TOKEN,s.readStringToken,a,i.SAMPLE_RATE,s.readFloatToken,s.readStringToken),1:ri([ei(s.Message,"m")])(qg||(qg=r(["\n            if (","(m)) {\n                ","(","([toFloat("," - ",".resetTime) / ",".sampleRatio]))\n                return\n            }\n        "])),o.isBang,t.$0,s.floats,i.FRAME,a,a)}},dependencies:[kf,Wp]};var Jg,Zg,Qg,ey,ny;const ty={translateArgs:e=>({delay:pc(e.args[0])||0,unitAmount:pc(e.args[1])||1,unit:fc(e.args[2])||"msec"}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0})},ry={state:(e,n)=>{let{ns:t}=e,{sked:r}=n;return ai(t.State,[ei("Float","delay",0),ei("Float","sampleRatio",1),ei(r.Id,"scheduledBang",r.ID_NULL)])},initialization:(e,n)=>{let{ns:t,node:{args:a},state:o}=e,{core:i}=n;return ii(Jg||(Jg=r(["\n        ",".sampleRatio = computeUnitInSamples(",", ",', "','")\n        ',"(",", ",")\n    "])),o,i.SAMPLE_RATE,a.unitAmount,a.unit,t.setDelay,o,a.delay)},messageReceivers:(e,n)=>{let{ns:t,state:a,snds:o}=e,{core:i,msg:s,bangUtils:l}=n;return{0:ri([ei(s.Message,"m")])(Zg||(Zg=r(["\n            if (","(m) === 1) {\n                if (","(m, 0)) {\n                    ","\n                    if (action === 'bang' || action === 'start') {\n                        ","(\n                            ",", \n                            () => ","(","()),\n                            ",",\n                        )\n                        return\n                    } else if (action === 'stop') {\n                        ","(",")\n                        return\n                    }\n                    \n                } else if (","(m, 0)) {\n                    ","(",", ","(m, 0))\n                    ","(\n                        ",",\n                        () => ","(","()),\n                        ",",\n                    )\n                    return \n                }\n            \n            } else if (\n                ","(m, [",", ",", ","])\n                && ","(m, 0) === 'tempo'\n            ) {\n                ",".sampleRatio = computeUnitInSamples(\n                    ",", \n                    ","(m, 1), \n                    ","(m, 2)\n                )\n                return\n            }\n        "])),s.getLength,s.isStringToken,ni("string","action","".concat(s.readStringToken,"(m, 0)")),t.scheduleDelay,a,o.$0,l.bang,i.FRAME,t.stop,a,s.isFloatToken,t.setDelay,a,s.readFloatToken,t.scheduleDelay,a,o.$0,l.bang,i.FRAME,s.isMatching,s.STRING_TOKEN,s.FLOAT_TOKEN,s.STRING_TOKEN,s.readStringToken,a,i.SAMPLE_RATE,s.readFloatToken,s.readStringToken),1:xc(t.setDelay,a,s)}},core:(e,n)=>{let{ns:t}=e,{sked:a,commons:o}=n;return oi([ti(t.setDelay,[ei(t.State,"state"),ei("Float","delay")],"void")(Qg||(Qg=r(["\n                state.delay = Math.max(0, delay)\n            "]))),ti(t.scheduleDelay,[ei(t.State,"state"),ei(a.Callback,"callback"),ei("Int","currentFrame")],"void")(ey||(ey=r(["\n                if (state.scheduledBang !== ",") {\n                    ","(state)\n                }\n                state.scheduledBang = ","(toInt(\n                    Math.round(\n                        toFloat(currentFrame) + state.delay * state.sampleRatio)),\n                    callback\n                )\n            "])),a.ID_NULL,t.stop,o.waitFrame),ti(t.stop,[ei(t.State,"state")],"void")(ny||(ny=r(["\n                ","(state.scheduledBang)\n                state.scheduledBang = ","\n            "])),o.cancelWaitFrame,a.ID_NULL)])},dependencies:[kf,Wp,rl]};var ay,oy,iy;const sy="empty",ly=()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0}),uy=(e,n)=>{let{msg:t,msgBuses:a}=n;return oi([ti(e.setReceiveBusName,[ei(e.State,"state"),ei("string","busName")],"void")(ay||(ay=r(['\n            if (state.receiveBusName !== "','") {\n                ','(state.receiveBusName, state.messageReceiver)\n            }\n            state.receiveBusName = busName\n            if (state.receiveBusName !== "','") {\n                ',"(state.receiveBusName, state.messageReceiver)\n            }\n        "])),sy,a.unsubscribe,sy,a.subscribe),ti(e.setSendReceiveFromMessage,[ei(e.State,"state"),ei(t.Message,"m")],"boolean")(oy||(oy=r(["\n            if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'receive'\n            ) {\n                ","(state, ","(m, 1))\n                return true\n\n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'send'\n            ) {\n                state.sendBusName = ","(m, 1)\n                return true\n            }\n            return false\n        "])),t.isMatching,t.STRING_TOKEN,t.STRING_TOKEN,t.readStringToken,e.setReceiveBusName,t.readStringToken,t.isMatching,t.STRING_TOKEN,t.STRING_TOKEN,t.readStringToken,t.readStringToken),ti(e.defaultMessageHandler,[ei(t.Message,"m")],"void")(iy||(iy=r([""])))])};var cy,dy,py,fy;const hy={translateArgs:e=>{let{args:[n,t,r,a,o,i]}=e;return{minValue:cc(n),maxValue:cc(t),sendBusName:fc(i)||sy,receiveBusName:fc(o)||sy,initValue:1===r?cc(a):0,outputOnLoad:!!r}},build:ly},my={translateArgs:e=>{let{args:[n,t,r,a,o]}=e;return{minValue:0,maxValue:cc(n),sendBusName:fc(o)||sy,receiveBusName:fc(a)||sy,initValue:1===t?cc(r):0,outputOnLoad:!!t}},build:ly},gy=e=>{let{prepareStoreValue:n,prepareStoreValueBang:t,name:a}=e;return{flags:{alphaName:a},state:(e,n)=>{let{ns:t,node:{args:r}}=e,{msg:a}=n;return ai(t.State,[ei("Float","minValue",r.minValue),ei("Float","maxValue",r.maxValue),ei("Float","valueFloat",r.initValue),ei(a.Message,"value","".concat(a.create,"([])")),ei("string","receiveBusName",'"'.concat(r.receiveBusName,'"')),ei("string","sendBusName",'"'.concat(r.sendBusName,'"')),ei(a.Handler,"messageReceiver",t.defaultMessageHandler),ei(a.Handler,"messageSender",t.defaultMessageHandler)])},initialization:(e,n)=>{let{ns:t,state:a,snds:o,node:{args:i}}=e,{commons:s,msg:l}=n;return ii(cy||(cy=r(["\n                ",".messageSender = ","\n                ",".messageReceiver = ","\n                ","(",', "','")\n    \n                ',"\n            "])),a,o.$0,a,ri([ei(l.Message,"m")])(dy||(dy=r(["\n                    ","(",", m)\n                "])),t.receiveMessage,a),t.setReceiveBusName,a,i.receiveBusName,i.outputOnLoad?"".concat(s.waitFrame,"(0, () => ").concat(o.$0,"(").concat(l.floats,"([").concat(a,".valueFloat])))"):null)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:o}=n;return{0:ri([ei(o.Message,"m")])(py||(py=r(["\n                ","(",", m)\n                return\n            "])),t.receiveMessage,a)}},core:(e,a)=>{let{ns:o}=e;const{msgBuses:i,bangUtils:s,msg:l}=a;return oi([uy(o,a),ti(o.receiveMessage,[ei(o.State,"state"),ei(l.Message,"m")],"void")(fy||(fy=r(["\n                    if (","(m, [","])) {\n                        ","\n                        ",'\n                        state.messageSender(outMessage)\n                        if (state.sendBusName !== "','") {\n                            ',"(state.sendBusName, outMessage)\n                        }\n                        return\n        \n                    } else if (","(m)) {\n                        ","\n                        ",'\n                        state.messageSender(outMessage)\n                        if (state.sendBusName !== "','") {\n                            ',"(state.sendBusName, outMessage)\n                        }\n                        return\n        \n                    } else if (\n                        ","(m, [",", ","]) \n                        && ","(m, 0) === 'set'\n                    ) {\n                        ","\n                        return\n                    \n                    } else if (","(state, m) === true) {\n                        return\n                    }\n                "])),l.isMatching,l.FLOAT_TOKEN,n?"state.valueFloat = ".concat(n("".concat(l.readFloatToken,"(m, 0)"))):"state.valueFloat = ".concat(l.readFloatToken,"(m, 0)"),ni(l.Message,"outMessage","".concat(l.floats,"([state.valueFloat])")),sy,i.publish,s.isBang,t?"state.valueFloat = ".concat(t("state.valueFloat")):null,ni(l.Message,"outMessage","".concat(l.floats,"([state.valueFloat])")),sy,i.publish,l.isMatching,l.STRING_TOKEN,l.FLOAT_TOKEN,l.readStringToken,n?"state.valueFloat = ".concat(n("".concat(l.readFloatToken,"(m, 1)"))):"state.valueFloat = ".concat(l.readFloatToken,"(m, 1)"),o.setSendReceiveFromMessage)])},dependencies:[Wp,mg,rl]}},yy={tgl:gy({name:"tgl",prepareStoreValueBang:e=>"".concat(e," === 0 ? state.maxValue: 0")}),nbx:gy({name:"nbx",prepareStoreValue:e=>"Math.min(Math.max(".concat(e,",state.minValue),state.maxValue)")}),hsl:gy({name:"hsl"}),vsl:gy({name:"vsl"}),hradio:gy({name:"hradio"}),vradio:gy({name:"vradio"})},by={tgl:my,nbx:hy,hsl:hy,vsl:hy,hradio:my,vradio:my};var vy,wy,Sy,ky;const xy={translateArgs:e=>{let{args:[n,t,r]}=e;return{outputOnLoad:!!n,sendBusName:fc(r)||sy,receiveBusName:fc(t)||sy}},build:ly},Iy={state:(e,n)=>{let{ns:t,node:{args:r}}=e,{msg:a}=n;return ai(t.State,[ei(a.Message,"value","".concat(a.create,"([])")),ei("string","receiveBusName",'"'.concat(r.receiveBusName,'"')),ei("string","sendBusName",'"'.concat(r.sendBusName,'"')),ei(a.Handler,"messageReceiver",t.defaultMessageHandler),ei(a.Handler,"messageSender",t.defaultMessageHandler)])},initialization:(e,n)=>{let{ns:t,snds:a,state:o,node:{args:i}}=e,{commons:s,msg:l,bangUtils:u}=n;return ii(vy||(vy=r(["\n        ",".messageReceiver = ","\n        ",".messageSender = ","\n        ","(",', "','")\n\n        ',"\n    "])),o,ri([ei(l.Message,"m")])(wy||(wy=r(["\n            ","(",", m)\n        "])),t.receiveMessage,o),o,a.$0,t.setReceiveBusName,o,i.receiveBusName,i.outputOnLoad?"".concat(s.waitFrame,"(0, () => ").concat(a.$0,"(").concat(u.bang,"()))"):null)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:o}=n;return{0:ri([ei(o.Message,"m")])(Sy||(Sy=r(["\n            ","(",", m)\n            return\n        "])),t.receiveMessage,a)}},core:(e,n)=>{let{ns:t}=e;const{msg:a,msgBuses:o,bangUtils:i}=n;return oi([uy(t,n),ti(t.receiveMessage,[ei(t.State,"state"),ei(a.Message,"m")],"void")(ky||(ky=r(["\n                if (","(state, m) === true) {\n                    return\n                }\n                \n                ",'\n                state.messageSender(outMessage)\n                if (state.sendBusName !== "','") {\n                    ',"(state.sendBusName, outMessage)\n                }\n                return\n            "])),t.setSendReceiveFromMessage,ni(a.Message,"outMessage","".concat(i.bang,"()")),sy,o.publish)])},dependencies:[Wp,mg,rl]};var _y,Ay,Ty,Ey;const Oy={translateArgs:e=>{let{args:[n,t,r,a]}=e;return{sendBusName:fc(a)||sy,receiveBusName:fc(r)||sy}},build:ly},Cy=e=>{let{name:n,initValueCode:t,messageMatch:a}=e;return{flags:{alphaName:n},state:(e,n)=>{let{ns:r,node:{args:a}}=e;const{msg:o}=n;return ai(r.State,[ei(o.Message,"value",t(n)),ei("string","receiveBusName",'"'.concat(a.receiveBusName,'"')),ei("string","sendBusName",'"'.concat(a.sendBusName,'"')),ei(o.Handler,"messageReceiver",r.defaultMessageHandler),ei(o.Handler,"messageSender",r.defaultMessageHandler)])},initialization:(e,n)=>{let{ns:t,state:a,node:{args:o},snds:i}=e,{msg:s}=n;return ii(_y||(_y=r(["\n            ",".messageReceiver = ","\n            ",".messageSender = ","\n            ","(",', "','")\n        '])),a,ri([ei(s.Message,"m")])(Ay||(Ay=r(["\n                ","(",", m)\n            "])),t.receiveMessage,a),a,i.$0,t.setReceiveBusName,a,o.receiveBusName)},messageReceivers:(e,n)=>{let{ns:t,state:a}=e,{msg:o}=n;return{0:ri([ei(o.Message,"m")])(Ty||(Ty=r(["\n                ","(",", m)\n                return\n            "])),t.receiveMessage,a)}},core:(e,n)=>{let{ns:t}=e;const{msg:o,msgBuses:i,bangUtils:s,msgUtils:l}=n;return oi([uy(t,n),ti(t.receiveMessage,[ei(t.State,"state"),ei(o.Message,"m")],"void")(Ey||(Ey=r(["\n                    if (",'(m)) {\n                        state.messageSender(state.value)\n                        if (state.sendBusName !== "','") {\n                            ',"(state.sendBusName, state.value)\n                        }\n                        return\n                    \n                    } else if (\n                        ","(m, 0) === ","\n                        && ","(m, 0) === 'set'\n                    ) {\n                        ","\n                        "," \n                                state.value = setMessage    \n                                return\n                        ","\n        \n                    } else if (","(state, m) === true) {\n                        return\n                        \n                    } ",'\n                    \n                        state.value = m\n                        state.messageSender(state.value)\n                        if (state.sendBusName !== "','") {\n                            ',"(state.sendBusName, state.value)\n                        }\n                        return\n        \n                    }\n                "])),s.isBang,sy,i.publish,o.getTokenType,o.STRING_TOKEN,o.readStringToken,ni(o.Message,"setMessage","".concat(l.slice,"(m, 1, ").concat(o.getLength,"(m))")),a?"if (".concat(a("setMessage",n),") {"):null,a?"}":null,t.setSendReceiveFromMessage,a?"else if (".concat(a("m",n),") {"):"else {",sy,i.publish)])},dependencies:[Wp,mg,$p]}},Ny={floatatom:Oy,symbolatom:Oy,listbox:Oy},My={floatatom:Cy({name:"floatatom",initValueCode:e=>{let{msg:n}=e;return"".concat(n.floats,"([0])")},messageMatch:(e,n)=>{let{msg:t}=n;return"".concat(t.isMatching,"(").concat(e,", [").concat(t.FLOAT_TOKEN,"])")}}),symbolatom:Cy({name:"symbolatom",initValueCode:e=>{let{msg:n}=e;return"".concat(n.strings,"([''])")},messageMatch:(e,n)=>{let{msg:t}=n;return"".concat(t.isMatching,"(").concat(e,", [").concat(t.STRING_TOKEN,"])")}}),listbox:Cy({name:"listbox",initValueCode:e=>{let{bangUtils:n}=e;return"".concat(n.bang,"()")}})};var Py;const Fy={initialization:(e,n)=>{let{snds:t}=e,{bangUtils:a,commons:o}=n;return ii(Py||(Py=r(["","(0, () => ","(","()))"])),o.waitFrame,t.$0,a.bang)},dependencies:[Wp,rl]};var Ry;const Ly={namespace:"numbers",code:e=>{let{ns:n}=e;return ti(n.roundFloatAsPdInt,[ei("Float","value")],"Float")(Ry||(Ry=r(["\n            return value > 0 ? Math.floor(value): Math.ceil(value)\n        "])))}};var Dy,jy,zy,By;const Uy={translateArgs:e=>({value:pc(e.args[0])||0}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0})},Wy={state:e=>{let{ns:n}=e;return ai(n.State,[ei("Float","value",0)])},initialization:e=>{let{ns:n,node:{args:t},state:a}=e;return ii(Dy||(Dy=r(["\n            ","(",", ",")\n        "])),n.setValue,a,t.value)},messageReceivers:(e,n)=>{let{ns:t,snds:a,state:o}=e,{bangUtils:i,msg:s}=n;return{0:ri([ei(s.Message,"m")])(jy||(jy=r(["\n            if (","(m, [","])) {\n                ","(",", ","(m, 0))\n                ","(","([",".value]))\n                return \n\n            } else if (","(m)) {\n                ","(","([",".value]))\n                return\n                \n            }\n        "])),s.isMatching,s.FLOAT_TOKEN,t.setValue,o,s.readFloatToken,a.$0,s.floats,o,i.isBang,a.$0,s.floats,o),1:xc(t.setValue,o,s)}}},$y={float:Uy,f:{aliasTo:"float"},int:Uy,i:{aliasTo:"int"}},Vy={float:{...Wy,core:e=>{let{ns:n}=e;return oi([ti(n.setValue,[ei(n.State,"state"),ei("Float","value")],"void")(zy||(zy=r(["\n                state.value = value\n            "])))])},dependencies:[Wp]},int:{...Wy,core:(e,n)=>{let{ns:t}=e,{numbers:a}=n;return oi([ti(t.setValue,[ei(t.State,"state"),ei("Float","value")],"void")(By||(By=r(["\n                state.value = ","(value)\n            "])),a.roundFloatAsPdInt)])},dependencies:[Ly,Wp]}};var Gy;const Hy={translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}})},Ky=e=>{let{generateOperation:n,dependencies:t=[]}=e;return{messageReceivers:(e,t)=>{let{snds:a}=e;const{msg:o}=t;return{0:ri([ei(o.Message,"m")])(Gy||(Gy=r(["\n                    if (","(m, [","])) {\n                        ","\n                        ","(","([","]))\n                        return\n                    }\n                "])),o.isMatching,o.FLOAT_TOKEN,ni("Float","value","".concat(o.readFloatToken,"(m, 0)")),a.$0,o.floats,n(t))}},dependencies:t}},qy={abs:Ky({generateOperation:()=>"Math.abs(value)"}),wrap:Ky({generateOperation:()=>"(1 + (value % 1)) % 1"}),cos:Ky({generateOperation:()=>"Math.cos(value)"}),sqrt:Ky({generateOperation:()=>"value >= 0 ? Math.pow(value, 0.5): 0"}),mtof:Ky({generateOperation:e=>{let{funcs:n}=e;return"".concat(n.mtof,"(value)")},dependencies:[rh]}),ftom:Ky({generateOperation:e=>{let{funcs:n}=e;return"".concat(n.ftom,"(value)")},dependencies:[ah]}),rmstodb:Ky({generateOperation:()=>"value <= 0 ? 0 : 20 * Math.log(value) / Math.LN10 + 100"}),dbtorms:Ky({generateOperation:()=>"value <= 0 ? 0 : Math.exp(Math.LN10 * (value - 100) / 20)"}),powtodb:Ky({generateOperation:()=>"value <= 0 ? 0 : 10 * Math.log(value) / Math.LN10 + 100"}),dbtopow:Ky({generateOperation:()=>"value <= 0 ? 0 : Math.exp(Math.LN10 * (value - 100) / 10)"}),vu:Ky({generateOperation:()=>"value"})},Yy={abs:Hy,cos:Hy,wrap:Hy,sqrt:Hy,mtof:Hy,ftom:Hy,rmstodb:Hy,dbtorms:Hy,powtodb:Hy,dbtopow:Hy,vu:Hy};var Xy,Jy,Zy,Qy,eb,nb,tb;const rb=e=>({translateArgs:n=>{const t=pc(n.args[0]);return{value:void 0!==t?t:e}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:(e,n)=>"0"===e?{initialSignalValue:0}:"1"===e?{initialSignalValue:n.value}:void 0}),ab={"+~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"add_t"},dsp:e=>{let{ins:n}=e;return ii(Xy||(Xy=r([""," + ",""])),n.$0,n.$1)}},"-~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"sub_t"},dsp:e=>{let{ins:n}=e;return ii(Jy||(Jy=r([""," - ",""])),n.$0,n.$1)}},"*~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"mul_t"},dsp:e=>{let{ins:n}=e;return ii(Zy||(Zy=r([""," * ",""])),n.$0,n.$1)}},"/~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"div_t"},dsp:e=>{let{ins:n}=e;return ii(Qy||(Qy=r([""," !== 0 ? "," / "," : 0"])),n.$1,n.$0,n.$1)}},"min~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"min_t"},dsp:e=>{let{ins:n}=e;return ii(eb||(eb=r(["Math.min(",", ",")"])),n.$0,n.$1)}},"max~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"max_t"},dsp:e=>{let{ins:n}=e;return ii(nb||(nb=r(["Math.max(",", ",")"])),n.$0,n.$1)}},"pow~":{flags:{isPureFunction:!0,isDspInline:!0,alphaName:"pow_t"},dsp:(e,n)=>{let{ins:t}=e,{funcs:a}=n;return ii(tb||(tb=r(["","(",", ",")"])),a.pow,t.$0,t.$1)},dependencies:[oh]}},ob={"+~":rb(0),"-~":rb(0),"*~":rb(0),"/~":rb(0),"min~":rb(0),"max~":rb(0),"pow~":rb(0)};var ib,sb;const lb={flags:{alphaName:"noise_t",isDspInline:!0},dsp:()=>ii(ib||(ib=r(["Math.random() * 2 - 1"]))),messageReceivers:(e,n)=>{let{msg:t}=n;return{0:ri([ei(t.Message,"m")])(sb||(sb=r(["\n            if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'seed'\n            ) {\n                console.log('WARNING : seed not implemented yet for [noise~]')\n                return\n            }\n        "])),t.isMatching,t.STRING_TOKEN,t.FLOAT_TOKEN,t.readStringToken)}}};var ub,cb,db,pb;const fb={namespace:"delayBuffers",code:(e,n)=>{let{ns:t}=e,{buf:a,sked:o}=n;return oi([ni("Map<string, ".concat(a.SoundBuffer,">"),t._BUFFERS,"new Map()"),ni(o.Skeduler,t._SKEDULER,"".concat(o.create,"(true)")),ni("".concat(a.SoundBuffer),t.NULL_BUFFER,"".concat(a.create,"(1)")),ti(t.get,[ei("string","delayName")],a.SoundBuffer)(ub||(ub=r(["\n            ",".get(delayName, buffer)\n        "])),t._BUFFERS),ti(t.set,[ei("string","delayName"),ei(a.SoundBuffer,"buffer")],"void")(cb||(cb=r(["\n            ",".set(delayName, buffer)\n            ","(",", delayName)\n        "])),t._BUFFERS,o.emit,t._SKEDULER),ti(t.wait,[ei("string","delayName"),ei(o.Callback,"callback")],"void")(db||(db=r(["\n            ","(",", delayName, callback)\n        "])),o.wait,t._SKEDULER),ti(t.delete,[ei("string","delayName")],"void")(pb||(pb=r(["\n            ",".delete(delayName)\n        "])),t._BUFFERS)])},dependencies:[lm,Hs]};var hb,mb,gb,yb,bb,vb,wb,Sb;const kb={translateArgs:e=>{let{args:n}=e;return{delayName:fc(n[0])||"",initDelayMsec:pc(n[1])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:(e,n)=>{let{initDelayMsec:t}=n;if("0"===e)return{initialSignalValue:t}}},xb={state:(e,n)=>{let{ns:t}=e,{buf:r,delayBuffers:a}=n;return ai(t.State,[ei("string","delayName",'""'),ei(r.SoundBuffer,"buffer",a.NULL_BUFFER),ei("Float","rawOffset",0),ei("Int","offset",0),ei("(_: string) => void","setDelayNameCallback",t.NOOP)])},initialization:(e,n)=>{let{ns:t,node:{args:a},state:o}=e,{delayBuffers:i}=n;return ii(hb||(hb=r(["\n        ",".setDelayNameCallback = ",'\n\n        if ("','".length) {\n            ',"(",', "','", ',".setDelayNameCallback)\n        }\n    "])),o,ri([ei("string","_")])(mb||(mb=r(["\n            ",".buffer = ",".get(",".delayName)\n            ","(",")\n        "])),o,i._BUFFERS,o,t.updateOffset,o),a.delayName,t.setDelayName,o,a.delayName,o)},dsp:(e,n)=>{let{ns:t,state:a,outs:o,ins:i}=e,{buf:s}=n;return{inlets:{0:ii(gb||(gb=r(["","(",", ",")"])),t.setRawOffset,a,i.$0)},loop:ii(yb||(yb=r([""," = ","(",".buffer, ",".offset)"])),o.$0,s.readSample,a,a)}},core:(e,n)=>{let{ns:t}=e,{core:a,sked:o,delayBuffers:i}=n;return oi([ti(t.setDelayName,[ei(t.State,"state"),ei("string","delayName"),ei(o.Callback,"callback")])(bb||(bb=r(["\n                if (state.delayName.length) {\n                    state.buffer = ","\n                }\n                state.delayName = delayName\n                if (state.delayName.length) {\n                    ","(state.delayName, callback)\n                }\n            "])),i.NULL_BUFFER,i.wait),ti(t.setRawOffset,[ei(t.State,"state"),ei("Float","rawOffset")])(vb||(vb=r(["\n                state.rawOffset = rawOffset\n                ","(state)\n            "])),t.updateOffset),ti(t.updateOffset,[ei(t.State,"state")])(wb||(wb=r(["\n                state.offset = toInt(Math.round(\n                    Math.min(\n                        Math.max(computeUnitInSamples(",', state.rawOffset, "msec"), 0), \n                        toFloat(state.buffer.length - 1)\n                    )\n                ))\n            '])),a.SAMPLE_RATE),ti(t.NOOP,[ei("string","_")])(Sb||(Sb=r([""])))])},dependencies:[kf,fb,um]},Ib={"delread~":kb,"delread4~":kb},_b={"delread~":{...xb,flags:{alphaName:"delread_t"}},"delread4~":{...xb,flags:{alphaName:"delread4_t"}}};var Ab,Tb,Eb,Ob;const Cb={translateArgs:e=>{let{args:n}=e;return{delayName:fc(n[0])||"",maxDurationMsec:pc(n[1])||100}},build:()=>({inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"}},outlets:{},isPullingSignal:!0}),configureMessageToSignalConnection:e=>{if("0"===e)return{reroutedMessageInletId:"0_message"}}},Nb={flags:{alphaName:"delwrite_t"},state:(e,n)=>{let{ns:t}=e,{buf:r,delayBuffers:a}=n;return ai(t.State,[ei("string","delayName",'""'),ei(r.SoundBuffer,"buffer",a.NULL_BUFFER)])},initialization:(e,n)=>{let{ns:t,node:{args:a},state:o}=e,{buf:i,core:s}=n;return ii(Ab||(Ab=r(["\n        ",".buffer = ","(\n            toInt(Math.ceil(computeUnitInSamples(\n                ",", \n                ",',\n                "msec"\n            )))\n        )\n        if ("','".length) {\n            ',"(",', "','")\n        }\n    '])),o,i.create,s.SAMPLE_RATE,a.maxDurationMsec,a.delayName,t.setDelayName,o,a.delayName)},dsp:(e,n)=>{let{ins:t,state:a}=e,{buf:o}=n;return ii(Tb||(Tb=r(["","(",".buffer, ",")"])),o.writeSample,a,t.$0)},messageReceivers:(e,n)=>{let{state:t}=e,{buf:a,msg:o,actionUtils:i}=n;return{"0_message":ri([ei(o.Message,"m")],"void")(Eb||(Eb=r(["\n            if (","(m, 'clear')) {\n                ","(",".buffer)\n                return\n            }\n        "])),i.isAction,a.clear,t)}},core:(e,n)=>{let{ns:t}=e,{delayBuffers:a}=n;return oi([ti(t.setDelayName,[ei(t.State,"state"),ei("string","delayName")],"void")(Ob||(Ob=r(["\n                if (state.delayName.length) {\n                    ","(state.delayName)\n                }\n                state.delayName = delayName\n                if (state.delayName.length) {\n                    ","(state.delayName, state.buffer)\n                }\n            "])),a.delete,a.set)])},dependencies:[kf,fb,Vp,um]};var Mb;const Pb={translateArgs:e=>{let{args:n}=e;return{initValue:pc(n[0])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:(e,n)=>{let{initValue:t}=n;if("1"===e)return{initialSignalValue:t}}},Fb=e=>{let{generateOperation:n,alphaName:t}=e;return{flags:{alphaName:t},state:e=>{let{ns:n}=e;return ai(n.State,[ei("Float","lastOutput",0),ei("Float","lastInput",0)])},dsp:e=>{let{ins:t,state:a,outs:o}=e;return ii(Mb||(Mb=r(["\n            ",".lastOutput = "," = ","\n            ",".lastInput = ","\n        "])),a,o.$0,n(t.$0,t.$1,"".concat(a,".lastOutput"),"".concat(a,".lastInput")),a,t.$0)}}},Rb={"rpole~":Pb,"rzero~":Pb,"rzero_rev~":Pb},Lb={"rpole~":Fb({alphaName:"rpole_t",generateOperation:(e,n,t)=>"".concat(e," + ").concat(n," * ").concat(t)}),"rzero~":Fb({alphaName:"rzero_t",generateOperation:(e,n,t,r)=>"".concat(e," - ").concat(n," * ").concat(r)}),"rzero_rev~":Fb({alphaName:"rzero_rev_t",generateOperation:(e,n,t,r)=>"".concat(r," - ").concat(n," * ").concat(e)})};var Db;const jb={translateArgs:e=>{let{args:n}=e;return{initCoeffRe:pc(n[0])||0,initCoeffIm:pc(n[1])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"},2:{type:"signal",id:"2"},3:{type:"signal",id:"3"}},outlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}}}),configureMessageToSignalConnection:(e,n)=>{let{initCoeffIm:t,initCoeffRe:r}=n;return"0"===e||"1"===e?{initialSignalValue:0}:"2"===e?{initialSignalValue:r}:"3"===e?{initialSignalValue:t}:void 0}},zb=e=>{let{generateOperationRe:n,generateOperationIm:t,alphaName:a}=e;return{flags:{alphaName:a},state:e=>{let{ns:n}=e;return ai(n.State,[ei("Float","lastOutputRe",0),ei("Float","lastOutputIm",0),ei("Float","lastInputRe",0),ei("Float","lastInputIm",0)])},dsp:e=>{let{ins:a,state:o,outs:i}=e;return ii(Db||(Db=r(["\n            "," = ","\n            ",".lastOutputIm = "," = ","\n            ",".lastOutputRe    = ","\n            ",".lastInputRe = ","\n            ",".lastInputIm = ","\n        "])),i.$0,n(a.$0,a.$1,a.$2,a.$3,"".concat(o,".lastOutputRe"),"".concat(o,".lastOutputIm"),"".concat(o,".lastInputRe"),"".concat(o,".lastInputIm")),o,i.$1,t(a.$0,a.$1,a.$2,a.$3,"".concat(o,".lastOutputRe"),"".concat(o,".lastOutputIm"),"".concat(o,".lastInputRe"),"".concat(o,".lastInputIm")),o,i.$0,o,a.$0,o,a.$1)}}},Bb={"cpole~":jb,"czero~":jb},Ub={"cpole~":zb({alphaName:"cpole_t",generateOperationRe:(e,n,t,r,a,o)=>"".concat(e," + ").concat(a," * ").concat(t," - ").concat(o," * ").concat(r),generateOperationIm:(e,n,t,r,a,o)=>"".concat(n," + ").concat(a," * ").concat(r," + ").concat(o," * ").concat(t)}),"czero~":zb({alphaName:"czero_t",generateOperationRe:(e,n,t,r,a,o,i,s)=>"".concat(e," - ").concat(i," * ").concat(t," + ").concat(s," * ").concat(r),generateOperationIm:(e,n,t,r,a,o,i,s)=>"".concat(n," - ").concat(i," * ").concat(r," - ").concat(s," * ").concat(t)})};var Wb,$b;const Vb={translateArgs:e=>{let{args:n}=e;return{initValue:pc(n[0])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:(e,n)=>{if("1"===e)return{initialSignalValue:n.initValue}}},Gb={flags:{alphaName:"hip_t"},state:e=>{let{ns:n}=e;return ai(n.State,[ei("Float","previous",0),ei("Float","current",0),ei("Float","coeff",0),ei("Float","normal",0)])},dsp:(e,n)=>{let{ins:t,state:a,outs:o}=e,{core:i}=n;return{inlets:{1:ii(Wb||(Wb=r(["\n                ",".coeff = Math.min(Math.max(1 - "," * (2 * Math.PI) / ",", 0), 1)\n                ",".normal = 0.5 * (1 + ",".coeff)\n            "])),a,t.$1,i.SAMPLE_RATE,a,a)},loop:ii($b||($b=r(["\n            ",".current = "," + ",".coeff * ",".previous\n            "," = ",".normal * (",".current - ",".previous)\n            ",".previous = ",".current\n        "])),a,t.$0,a,a,o.$0,a,a,a,a,a)}}};var Hb,Kb,qb;const Yb={translateArgs:e=>{let{args:n}=e;return{frequency:pc(n[0])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}),configureMessageToSignalConnection:(e,n)=>{if("1"===e)return{initialSignalValue:n.frequency}}},Xb={flags:{alphaName:"lop_t"},state:e=>{let{ns:n}=e;return ai(n.State,[ei("Float","previous",0),ei("Float","coeff",0)])},dsp:e=>{let{ns:n,ins:t,state:a,outs:o}=e;return{inlets:{1:ii(Hb||(Hb=r(["","(",", ",")"])),n.setFreq,a,t.$1)},loop:ii(Kb||(Kb=r(["",".previous = "," = ",".coeff * "," + (1 - ",".coeff) * ",".previous"])),a,o.$0,a,t.$0,a,a)}},messageReceivers:(e,n)=>{let{ns:t,state:r}=e,{msg:a}=n;return{1:xc(t.setFreq,r,a)}},core:(e,n)=>{let{ns:t}=e,{core:a}=n;return oi([ti(t.setFreq,[ei(t.State,"state"),ei("Float","freq")],"void")(qb||(qb=r(["\n                state.coeff = Math.max(Math.min(freq * 2 * Math.PI / ",", 1), 0)\n            "])),a.SAMPLE_RATE)])}};var Jb,Zb,Qb,ev,nv;const tv={translateArgs:e=>{let{args:n}=e;return{frequency:pc(n[0])||0,Q:pc(n[1])||0}},build:()=>({inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}}})},rv={flags:{alphaName:"vcf_t"},state:e=>{let{node:{args:n},ns:t}=e;return ai(t.State,[ei("Float","frequency",n.frequency),ei("Float","Q",n.Q),ei("Float","coef1",0),ei("Float","coef2",0),ei("Float","gain",0),ei("Float","y",0),ei("Float","ym1",0),ei("Float","ym2",0)])},dsp:e=>{let{ns:n,ins:t,outs:a,state:o}=e;return{inlets:{1:ii(Jb||(Jb=r(["\n                ","(",", ",")\n            "])),n.setFrequency,o,t.$1)},loop:ii(Zb||(Zb=r(["\n            ",".y = "," + ",".coef1 * ",".ym1 + ",".coef2 * ",".ym2\n            "," = "," = ",".gain * ",".y\n            ",".ym2 = ",".ym1\n            ",".ym1 = ",".y\n        "])),o,t.$0,o,o,o,o,a.$1,a.$0,o,o,o,o,o,o)}},messageReceivers:(e,n)=>{let{ns:t,state:r}=e,{msg:a}=n;return{2:xc(t.setQ,r,a)}},core:(e,n)=>{let{ns:t}=e,{core:a}=n;return oi([ti(t.updateCoefs,[ei(t.State,"state")],"void")(Qb||(Qb=r(["\n                ","\n                ","\n                ","\n                ","\n        \n                state.coef1 = 2.0 * sigbp_qcos * r\n                state.coef2 = - r * r\n                state.gain = 2 * oneminusr * (oneminusr + r * omega)\n            "])),ei("Float","omega","state.frequency * (2.0 * Math.PI) / ".concat(a.SAMPLE_RATE)),ei("Float","oneminusr","state.Q < 0.001 ? 1.0 : Math.min(omega / state.Q, 1)"),ei("Float","r","1.0 - oneminusr"),ei("Float","sigbp_qcos","(omega >= -(0.5 * Math.PI) && omega <= 0.5 * Math.PI) ? \n                    (((Math.pow(omega, 6) * (-1.0 / 720.0) + Math.pow(omega, 4) * (1.0 / 24)) - Math.pow(omega, 2) * 0.5) + 1)\n                    : 0")),ti(t.setFrequency,[ei(t.State,"state"),ei("Float","frequency")],"void")(ev||(ev=r(["\n                state.frequency = (frequency < 0.001) ? 10: frequency\n                ","(state)\n            "])),t.updateCoefs),ti(t.setQ,[ei(t.State,"state"),ei("Float","Q")],"void")(nv||(nv=r(["\n                state.Q = Math.max(Q, 0)\n                ","(state)\n            "])),t.updateCoefs)])}};var av,ov,iv,sv,lv,uv,cv,dv,pv,fv,hv,mv,gv,yv,bv,vv;const wv={skipDollarArgsResolution:!0,translateArgs:e=>{let{args:n}=e;const t=[{tokens:[],send:null}];let r=0,a=null;for(;r<n.length;){const e=n[r++];if(","===e||";"===e){if(r===n.length)continue;if(";"===e){let e=n[r++];if("string"!==typeof e)throw new Error('Expected a string after ";" from [msg( with args ['.concat(n.join(" "),"]"));a=e}t.push({tokens:[],send:a})}else t[t.length-1].tokens.push(e)}return{msgSpecs:t.filter((e=>e.tokens.length)).map((e=>("symbol"===e.tokens[0]&&(e.tokens=["string"===typeof e.tokens[1]?e.tokens[1]:""]),e)))}},build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}})},Sv={state:e=>{let{ns:n}=e;return ai(n.State,[ei("Array<".concat(n.TokenSpec,">"),"msgSpecs","[]")])},initialization:(e,n)=>{const{node:{args:t},state:a}=e,{msg:o}=n,i=t.msgSpecs.map(((t,r)=>kv(e,n,t,r)));return ii(av||(av=r(["\n            ",".msgSpecs = [\n                ","\n            ]\n\n            ","\n        "])),a,i.map(((e,n)=>{let{isStaticMsg:i,code:s}=e;return ii(ov||(ov=r(["\n                    {\n                        transferFunction: ",",\n                        outTemplate: [],\n                        outMessage: ",",\n                        send: ",",\n                        hasSend: ",",\n                    },"])),ri([ei(o.Message,"inMessage")],o.Message)(iv||(iv=r(["\n                            ","\n                            return ",".msgSpecs[","].outMessage\n                        "])),i?null:s,a,n),o.EMPTY_MESSAGE,t.msgSpecs[n].send?'"'.concat(t.msgSpecs[n].send,'"'):'""',t.msgSpecs[n].send?"true":"false")})),i.filter((e=>{let{isStaticMsg:n}=e;return n})).map((e=>{let{code:n}=e;return n})))},messageReceivers:(e,n)=>{let{snds:t,state:a}=e,{msg:o,msgBuses:i}=n;return{0:ri([ei(o.Message,"m")])(sv||(sv=r(["\n                if (\n                    ","(m, 0) \n                    && ","(m, 0) === 'set'\n                ) {\n                    ","\n                    for (","; i < ","(m); i++) {\n                        if (","(m, i)) {\n                            outTemplate.push(",")\n                        } else {\n                            outTemplate.push(",")\n                            outTemplate.push(","(m, i).length)\n                        }\n                    }\n\n                    ","\n                    for (","; i < ","(m); i++) {\n                        if (","(m, i)) {\n                            ","(\n                                outMessage, i - 1, ","(m, i)\n                            )\n                        } else {\n                            ","(\n                                outMessage, i - 1, ","(m, i)\n                            )\n                        }\n                    }\n\n                    ",".msgSpecs.splice(0, ",".msgSpecs.length - 1)\n                    ",".msgSpecs[0] = {\n                        transferFunction: ",',\n                        outTemplate: outTemplate,\n                        outMessage: outMessage,\n                        send: "",\n                        hasSend: false,\n                    }\n                    return\n    \n                } else {\n                    for (',"; i < ",".msgSpecs.length; i++) {\n                        if (",".msgSpecs[i].hasSend) {\n                            ","(",".msgSpecs[i].send, ",".msgSpecs[i].transferFunction(m))\n                        } else {\n                            ","(",".msgSpecs[i].transferFunction(m))\n                        }\n                    }\n                    return\n                }\n            "])),o.isStringToken,o.readStringToken,ni(o.Template,"outTemplate","[]"),ei("Int","i","1"),o.getLength,o.isFloatToken,o.FLOAT_TOKEN,o.STRING_TOKEN,o.readStringToken,ni(o.Message,"outMessage","".concat(o.create,"(outTemplate)")),ei("Int","i","1"),o.getLength,o.isFloatToken,o.writeFloatToken,o.readFloatToken,o.writeStringToken,o.readStringToken,a,a,a,ri([ei(o.Message,"m")],o.Message)(lv||(lv=r(["\n                            return ",".msgSpecs[0].outMessage\n                        "])),a),ei("Int","i","0"),a,a,i.publish,a,a,t.$0,a)}},core:(e,n)=>{let{ns:t}=e,{msg:r}=n;return oi([ai(t.TokenSpec,[ei("(m: ".concat(r.Message,") => ").concat(r.Message),"transferFunction"),ei(r.Template,"outTemplate"),ei(r.Message,"outMessage"),ei("string","send"),ei("boolean","hasSend")])])},dependencies:[mg]},kv=(e,n,t,a)=>{let{state:o}=e,{msg:i}=n;const s="".concat(o,".msgSpecs[").concat(a,"].outTemplate"),l="".concat(o,".msgSpecs[").concat(a,"].outMessage");let u=[],c=[],d=0,p=!1,f=!0;t.tokens.forEach(((e,n)=>{const t=xv(e);if("noop"===t.type){f=!1;const{inIndex:e}=t;u.push(ii(uv||(uv=r(["\n                ",".push(","(inMessage, ","))\n                if (","(inMessage, ",")) {\n                    stringMem[","] = ","(inMessage, ",")\n                    ",".push(stringMem[","].length)\n                }\n            "])),s,i.getTokenType,e,i.isStringToken,e,d,i.readStringToken,e,s,d)),c.push(ii(cv||(cv=r(["\n                if (","(inMessage, ",")) {\n                    ","(",", ",", ","(inMessage, ","))\n                } else if (","(inMessage, ",")) {\n                    ","(",", ",", stringMem[","])\n                }\n            "])),i.isFloatToken,e,i.writeFloatToken,l,n,i.readFloatToken,e,i.isStringToken,e,i.writeStringToken,l,n,d)),d++}else"string-template"===t.type?(f=!1,p=!0,u.push(ii(dv||(dv=r(['\n                stringToken = "','"\n                ',"\n                stringMem[","] = stringToken\n                ",".push(",")\n                ",".push(stringMem[","].length)\n            "])),t.template,t.variables.map((e=>{let{placeholder:n,inIndex:t}=e;return"\n                    if (".concat(i.isFloatToken,"(inMessage, ").concat(t,")) {\n                        otherStringToken = ").concat(i.readFloatToken,"(inMessage, ").concat(t,").toString()\n                        if (otherStringToken.endsWith('.0')) {\n                            otherStringToken = otherStringToken.slice(0, -2)\n                        }\n                        stringToken = stringToken.replace(\"").concat(n,'", otherStringToken)\n                    } else if (').concat(i.isStringToken,"(inMessage, ").concat(t,')) {\n                        stringToken = stringToken.replace("').concat(n,'", ').concat(i.readStringToken,"(inMessage, ").concat(t,"))\n                    }")})).join("\n"),d,s,i.STRING_TOKEN,s,d)),c.push(ii(pv||(pv=r(["\n                ","(",", ",", stringMem[","])\n            "])),i.writeStringToken,l,n,d)),d++):"string-constant"===t.type?(u.push(ii(fv||(fv=r(["\n                ",".push(",")\n                ",".push(",")\n            "])),s,i.STRING_TOKEN,s,t.value.length)),c.push(ii(hv||(hv=r(["\n                ","(",", ",', "','")\n            '])),i.writeStringToken,l,n,t.value))):"float-constant"===t.type&&(u.push(ii(mv||(mv=r(["\n                ",".push(",")\n            "])),s,i.FLOAT_TOKEN)),c.push(ii(gv||(gv=r(["\n                ","(",", ",", ",")\n            "])),i.writeFloatToken,l,n,t.value)))}));const h=ii(yv||(yv=r(["\n        ","\n        ","\n        ","\n    "])),p?ei("string","stringToken"):null,p?ei("string","otherStringToken"):null,f?null:ei("Array<string>","stringMem","[]"));return u.unshift(ii(bv||(bv=r([""," = []"])),s)),c.unshift(ii(vv||(vv=r([""," = ","(",")"])),l,i.create,s)),{isStaticMsg:f,code:oi([h,...u,...c])}},xv=e=>{if("string"===typeof e){const n=Iv.exec(e);if(n&&n[0]===e){return{type:"noop",inIndex:parseInt(n[1],10)-1}}if(n){const n=[];let t;for(;t=_v.exec(e);)n.push({placeholder:t[0],inIndex:parseInt(t[1],10)-1});return{type:"string-template",template:e,variables:n}}return{type:"string-constant",value:e}}return{type:"float-constant",value:e}},Iv=/\$(\d+)/,_v=/\$(\d+)/g;var Av,Tv,Ev,Ov,Cv,Nv,Mv,Pv;const Fv={translateArgs:e=>{let{args:n}=e;const t=fc(n[0])||"append";let r=n.slice(1);switch(t){case"split":r=[pc(n[1])||0];break;case"trim":case"length":r=[];break;case"append":case"prepend":break;case"fromsymbol":case"tosymbol":case"store":throw new Error("list operation ".concat(t," not implemented yet"));default:throw new Error("invalid list operation ".concat(t))}return{operation:t,operationArgs:r}},build:e=>{let{operation:n}=e,t=0,r=0;switch(n){case"split":t=2,r=3;break;case"trim":case"length":t=1,r=1;break;case"prepend":case"append":t=2,r=1}return{inlets:Zo(Jo(t),(e=>["".concat(e),{type:"message",id:"".concat(e)}])),outlets:Zo(Jo(r),(e=>["".concat(e),{type:"message",id:"".concat(e)}]))}}},Rv={state:(e,n)=>{let{ns:t}=e,{msg:r}=n;return ai(t.State,[ei("Int","splitPoint",0),ei(r.Message,"currentList","".concat(r.create,"([])"))])},initialization:(e,n)=>{let{node:{args:t},state:a}=e,{msg:o}=n;return ii(Av||(Av=r(["\n        ","\n\n        ","\n    "])),"split"===t.operation?"".concat(a,".splitPoint = ").concat(t.operationArgs[0]):null,"append"===t.operation||"prepend"===t.operation?ii(Tv||(Tv=r([" \n            {\n                ","\n\n                ",".currentList = ","(template)\n\n                ","\n            }\n        "])),ni(o.Template,"template","[".concat(t.operationArgs.map((e=>"string"===typeof e?"".concat(o.STRING_TOKEN,",").concat(e.length):"".concat(o.FLOAT_TOKEN))).join(","),"]")),a,o.create,t.operationArgs.map(((e,n)=>"string"===typeof e?"".concat(o.writeStringToken,"(").concat(a,".currentList, ").concat(n,', "').concat(e,'")'):"".concat(o.writeFloatToken,"(").concat(a,".currentList, ").concat(n,", ").concat(e,")")))):null)},messageReceivers:(e,n)=>{let{ns:t,snds:a,state:o,node:{args:i}}=e,{bangUtils:s,msgUtils:l,msg:u}=n;const c=ni(u.Message,"inMessage","".concat(s.isBang,"(m) ? ").concat(u.create,"([]): m"));switch(i.operation){case"split":return{0:ri([ei(u.Message,"m")])(Ev||(Ev=r(["\n                        ","\n                        if (","(inMessage) < ",".splitPoint) {\n                            ","(m)\n                            return\n                        } else if (","(inMessage) === ",".splitPoint) {\n                            ","(","())\n                            ","(m)\n                            return\n                        }\n                        ","\n                        ","\n                        ","(","(outMessage1) === 0 ? ","(): outMessage1)\n                        ","(","(outMessage0) === 0 ? ","(): outMessage0)\n                        return\n                    "])),c,u.getLength,o,a.$2,u.getLength,o,a.$1,s.bang,a.$0,ni(u.Message,"outMessage1","".concat(l.slice,"(inMessage, ").concat(o,".splitPoint, ").concat(u.getLength,"(inMessage))")),ni(u.Message,"outMessage0","".concat(l.slice,"(inMessage, 0, ").concat(o,".splitPoint)")),a.$1,u.getLength,s.bang,a.$0,u.getLength,s.bang),1:xc(t.setSplitPoint,o,u)};case"trim":return{0:ri([ei(u.Message,"m")])(Ov||(Ov=r(["\n                        ","(m)\n                        return\n                    "])),a.$0)};case"length":return{0:ri([ei(u.Message,"m")])(Cv||(Cv=r(["\n                        if (","(m)) {\n                            ","(","([0]))\n                        } else {\n                            ","(","([toFloat(","(m))]))\n                        }\n                        return\n                    "])),s.isBang,a.$0,u.floats,a.$0,u.floats,u.getLength)};case"append":case"prepend":const e="prepend"===i.operation?"".concat(l.concat,"(").concat(o,".currentList, m)"):"".concat(l.concat,"(m, ").concat(o,".currentList)");return{0:ri([ei(u.Message,"m")])(Nv||(Nv=r(["\n                        if (","(m)) {\n                            ","(","(",".currentList) === 0 ? ","(): ",".currentList)\n                        } else {\n                            ","(","(",".currentList) === 0 && ","(m) === 0 ? ","(): ",")\n                        }\n                        return\n                    "])),s.isBang,a.$0,u.getLength,o,s.bang,o,a.$0,u.getLength,o,u.getLength,s.bang,e),1:ri([ei(u.Message,"m")])(Mv||(Mv=r(["\n                        ","\n                        ",".currentList = inMessage\n                        return\n                    "])),c,o)};default:throw new Error("unknown list operation ".concat(i.operation))}},core:e=>{let{ns:n}=e;return oi([ti(n.setSplitPoint,[ei(n.State,"state"),ei("Float","value")],"void")(Pv||(Pv=r(["\n                state.splitPoint = toInt(value)\n            "])))])},dependencies:[Wp,$p]};var Lv,Dv;const jv={translateArgs:e=>({value:fc(e.args[0])||""}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0})},zv={state:e=>{let{node:{args:n},ns:t}=e;return ai(t.State,[ei("string","value",'"'.concat(n.value,'"'))])},messageReceivers:(e,n)=>{let{snds:t,state:a}=e,{msg:o,bangUtils:i}=n;return{0:ri([ei(o.Message,"m")])(Lv||(Lv=r(["\n            if (","(m)) {\n                ","(","([",".value]))\n                return\n    \n            } else if (","(m, [","])) {\n                ",".value = ","(m, 0)\n                ","(","([",".value]))\n                return\n    \n            }\n        "])),i.isBang,t.$0,o.strings,a,o.isMatching,o.STRING_TOKEN,a,o.readStringToken,t.$0,o.strings,a),1:ri([ei(o.Message,"m")])(Dv||(Dv=r(["\n            if (","(m, [","])) {\n                ",".value = ","(m, 0)\n                return \n            }\n        "])),o.isMatching,o.STRING_TOKEN,a,o.readStringToken)}},dependencies:[Wp,mg]};var Bv,Uv;const Wv={state:e=>{let{node:{args:n},ns:t}=e;return ai(t.State,[ei("string","busName",'"'.concat(n.busName,'"'))])},messageReceivers:(e,n)=>{let{state:t}=e,{msgBuses:a,msg:o}=n;return{0:ri([ei(o.Message,"m")])(Bv||(Bv=r(["\n            ","(",".busName, m)\n            return\n        "])),a.publish,t),1:kc("".concat(t,".busName"),o)}},dependencies:[mg]},$v={send:{translateArgs:e=>({busName:fc(e.args[0])||""}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{}})},receive:{translateArgs:e=>({busName:fc(e.args[0])||""}),build:()=>({inlets:{},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0})}},Vv={send:Wv,receive:{initialization:(e,n)=>{let{node:{args:t},snds:a}=e,{msgBuses:o}=n;return ii(Uv||(Uv=r(["\n            ",'("','", ',")\n        "])),o.subscribe,t.busName,a.$0)},dependencies:[mg]}};var Gv,Hv,Kv,qv,Yv;const Xv={state:(e,n)=>{let{ns:t}=e,{fs:r}=n;return ai(t.State,[ei("Map<".concat(r.OperationId,", ").concat(t.Operation,">"),"operations","new Map()")])},messageReceivers:(e,n)=>{let{ns:t,state:a,snds:o}=e,{msg:i,fs:s,core:l,commons:u,soundFileOpenOpts:c}=n;return{0:ri([ei(i.Message,"m")])(Gv||(Gv=r(["\n            if (\n                ","(m) >= 3 \n                && ","(m, 0)\n                && (\n                    ","(m, 0) === 'read'\n                    || ","(m, 0) === 'write'\n                )\n            ) {\n                ","\n                ","\n                ","\n                ","\n                \n                // Remove the operation type\n                unhandledOptions.delete(0)\n                \n                ","\n                ","\n                while (i < ","(m)) {\n                    if (!unhandledOptions.has(i)) {\n\n                    } else if (","(m, i)) {\n                        str = ","(m, i)\n                        if (str === '-resize') {\n                            unhandledOptions.delete(i)\n                            operation.resize = true\n\n                        } else if (str === '-maxsize' || str === '-nframes') {\n                            unhandledOptions.delete(i)\n                            if (\n                                i + 1 >= ","(m) \n                                || !",'(m, i + 1)\n                            ) {\n                                console.log("invalid value for -maxsize")\n                            }\n                            operation.maxSize = ',"(m, i + 1)\n                            unhandledOptions.delete(i + 1)\n                            i++\n\n                        } else if (str === '-skip') {\n                            unhandledOptions.delete(i)\n                            if (\n                                i + 1 >= ","(m) \n                                || !",'(m, i + 1)\n                            ) {\n                                console.log("invalid value for -skip")\n                            }\n                            operation.skip = ',"(m, i + 1)\n                            unhandledOptions.delete(i + 1)\n                            i++\n\n                        } else if (str === '-normalize') {\n                            unhandledOptions.delete(i)\n                            console.log('-normalize not implemented')\n                        }\n                    }\n                    i++\n                }\n\n                i = 1\n                ","\n                while (i < ","(m)) {\n                    if (!unhandledOptions.has(i)) {\n\n                    } else if (","(m, i)) {\n                        str = ","(m, i)\n                        if (!str.startsWith('-') && urlFound === false) {\n                            operation.url = str\n                            urlFound = true\n                        } else {\n                            operation.arrayNames.push(str)\n                        }\n                        unhandledOptions.delete(i)\n                    }\n                    i++\n                }\n\n                for (i = 0; i < operation.arrayNames.length; i++) {\n                    if (!","(operation.arrayNames[i])) {\n                        console.log('[soundfiler] unknown array ' + operation.arrayNames[i])\n                        return\n                    }\n                }\n\n                if (unhandledOptions.size) {\n                    console.log(\"soundfiler received invalid options\")\n                }\n\n                soundInfo.channelCount = operation.arrayNames.length\n\n                if (operationType === 'read') {\n                    ","\n\n                    ",".operations.set(id, operation)\n\n                } else if (operationType === 'write') {\n                    ","\n                    ","\n                    ","\n                    ","\n                    \n                    for (i = 0; i < operation.arrayNames.length; i++) {\n                        framesToWrite = Math.max(\n                            framesToWrite,\n                            toFloat(","(operation.arrayNames[i]).length) - operation.skip,\n                        )\n                    }\n\n                    if (operation.maxSize >= 0) {\n                        framesToWrite = Math.min(\n                            operation.maxSize, \n                            framesToWrite\n                        )\n                    }\n                    operation.framesToWrite = framesToWrite\n\n                    if (framesToWrite < 1) {\n                        console.log('[soundfiler] no frames to write')\n                        return\n                    }\n\n                    for (i = 0; i < operation.arrayNames.length; i++) {\n                        array = ","(operation.arrayNames[i])\n                        if (framesToWrite > toFloat(array.length) - operation.skip) {\n                            sound.push(createFloatArray(toInt(framesToWrite)))\n                            sound[i].set(array.subarray(\n                                toInt(operation.skip), \n                                toInt(operation.skip + framesToWrite)\n                            ))\n                        } else {\n                            sound.push(array.subarray(\n                                toInt(operation.skip), \n                                toInt(operation.skip + framesToWrite)\n                            ))\n                        }\n                    }\n\n                    ","\n\n                    ","\n\n                    ",".operations.set(id, operation)\n                }\n\n                return\n            }\n        "])),i.getLength,i.isStringToken,i.readStringToken,i.readStringToken,ni("string","operationType","".concat(i.readStringToken,"(m, 0)")),ni(s.SoundInfo,"soundInfo","{\n                    channelCount: 0,\n                    sampleRate: toInt(".concat(l.SAMPLE_RATE,"),\n                    bitDepth: 32,\n                    encodingFormat: '',\n                    endianness: '',\n                    extraOptions: '',\n                }")),ni(t.Operation,"operation","{\n                    arrayNames: [],\n                    resize: false,\n                    maxSize: -1,\n                    skip: 0,\n                    framesToWrite: 0,\n                    url: '',\n                    soundInfo,\n                }"),ei("Set<Int>","unhandledOptions","".concat(c.parse,"(\n                    m,\n                    soundInfo,\n                )")),ei("Int","i","1"),ei("string","str",'""'),i.getLength,i.isStringToken,i.readStringToken,i.getLength,i.isFloatToken,i.readFloatToken,i.getLength,i.isFloatToken,i.readFloatToken,ei("boolean","urlFound","false"),i.getLength,i.isStringToken,i.readStringToken,u.hasArray,ni(s.OperationId,"id",ii(Hv||(Hv=r(["","(\n                        operation.url, \n                        soundInfo,\n                        ","\n                    )"])),s.readSoundFile,ri([ei(s.OperationId,"id"),ei(s.OperationStatus,"status"),ei("FloatArray[]","sound")],"void")(Kv||(Kv=r(["\n                            ","\n                            ",".operations.delete(id)\n                            ","\n                            ","\n                            ","\n                            ","\n                            for (i = 0; i < sound.length; i++) {\n                                if (operation.resize) {\n                                    if (operation.maxSize > 0) {\n                                        framesToRead = Math.min(\n                                            operation.maxSize, \n                                            toFloat(sound[i].length) - operation.skip\n                                        )\n        \n                                    } else {\n                                        framesToRead = toFloat(sound[i].length) - operation.skip\n                                    }\n        \n                                    ","(\n                                        operation.arrayNames[i], \n                                        sound[i].subarray(\n                                            toInt(operation.skip), \n                                            toInt(operation.skip + framesToRead)\n                                        )\n                                    )\n                                    \n                                } else {\n                                    array = ","(operation.arrayNames[i])\n                                    framesToRead = Math.min(\n                                        toFloat(array.length),\n                                        toFloat(sound[i].length) - operation.skip\n                                    )\n                                    array.set(sound[i].subarray(0, array.length))\n                                }\n                                maxFramesRead = Math.max(\n                                    maxFramesRead,\n                                    framesToRead\n                                )\n                            }\n        \n                            ","(","(operation.soundInfo))\n                            ","(","([maxFramesRead]))\n                        "])),ni(t.Operation,"operation","".concat(a,".operations.get(id)")),a,ei("Int","i","0"),ei("Float","maxFramesRead","0"),ei("Float","framesToRead","0"),ei("FloatArray","array","createFloatArray(0)"),u.setArray,u.getArray,o.$1,t.buildMessage1,o.$0,i.floats))),a,ei("Int","i","0"),ei("Float","framesToWrite","0"),ei("FloatArray","array","createFloatArray(0)"),ni("FloatArray[]","sound","[]"),u.getArray,u.getArray,ti("callback",[ei(s.OperationId,"id"),ei(s.OperationStatus,"status")],"void")(qv||(qv=r(["\n                        ","\n                        ",".operations.delete(id)\n                        ","(","(operation.soundInfo))\n                        ","(","([operation.framesToWrite]))\n                    "])),ni(t.Operation,"operation","".concat(a,".operations.get(id)")),a,o.$1,t.buildMessage1,o.$0,i.floats),ni(s.OperationId,"id","".concat(s.writeSoundFile,"(\n                        sound, \n                        operation.url, \n                        soundInfo, \n                        callback\n                    )")),a)}},core:(e,n)=>{let{ns:t}=e,{msg:a,fs:o}=n;return oi([ai(t.Operation,[ei("string","url"),ei("Array<string>","arrayNames"),ei("boolean","resize"),ei("Float","maxSize"),ei("Float","framesToWrite"),ei("Float","skip"),ei(o.SoundInfo,"soundInfo")]),ti(t.buildMessage1,[ei(o.SoundInfo,"soundInfo")],a.Message)(Yv||(Yv=r(["\n                ","\n                ","(m, 0, toFloat(soundInfo.sampleRate))\n                ","(m, 1, -1) // TODO IMPLEMENT headersize\n                ","(m, 2, toFloat(soundInfo.channelCount))\n                ","(m, 3, Math.round(toFloat(soundInfo.bitDepth) / 8))\n                ","(m, 4, soundInfo.endianness)\n                return m\n            "])),ni(a.Message,"m","".concat(a.create,"([\n                    ").concat(a.FLOAT_TOKEN,",\n                    ").concat(a.FLOAT_TOKEN,",\n                    ").concat(a.FLOAT_TOKEN,",\n                    ").concat(a.FLOAT_TOKEN,",\n                    ").concat(a.STRING_TOKEN,",\n                    soundInfo.endianness.length,\n                ])")),a.writeFloatToken,a.writeFloatToken,a.writeFloatToken,a.writeFloatToken,a.writeStringToken)])},dependencies:[jm,tl,Nm,Mm]};var Jv;const Zv={messageReceivers:(e,n)=>{let{node:{args:t}}=e,{msg:a}=n;return{0:ri([ei(a.Message,"m")])(Jv||(Jv=r(['\n            console.log("',' " + ',"(m))\n            return\n        "])),t.prefix,a.display)}}};var Qv,ew;const nw=["float","bang","symbol","list","anything"],tw=e=>{switch(e){case"f":return"float";case"b":return"bang";case"s":return"symbol";case"l":return"list";case"a":return"anything";case"p":return"pointer";default:return e}},rw=e=>{if("pointer"===e)throw new hc('"pointer" not supported (yet)');if(!nw.includes(e))throw new hc("invalid type ".concat(e));return e},aw=(e,n,t,r)=>{let{msg:a,bangUtils:o,tokenConversion:i}=r;switch(e){case"float":return"".concat(a.floats,"([").concat(i.toFloat,"(").concat(n,", ").concat(t,")])");case"bang":return"".concat(o.bang,"()");case"symbol":return"".concat(a.strings,"([").concat(i.toString_,"(").concat(n,", ").concat(t,")])");case"list":case"anything":return"".concat(n);default:throw new Error("type argument ".concat(e," not supported (yet)"))}},ow="tokenConversion",iw={namespace:ow,code:(e,n)=>{let{ns:t}=e,{msg:a}=n;return ti(t.toFloat,[ei(a.Message,"m"),ei("Int","i")],"Float")(Qv||(Qv=r(["\n        if (","(m, i)) {\n            return ","(m, i)\n        } else {\n            return 0\n        }\n    "])),a.isFloatToken,a.readFloatToken)}},sw={namespace:ow,code:(e,n)=>{let{ns:t}=e,{msg:a}=n;return ti(t.toString_,[ei(a.Message,"m"),ei("Int","i")],"string")(ew||(ew=r(["\n        if (","(m, i)) {\n            ","\n            if (str === 'bang') {\n                return 'symbol'\n            } else {\n                return str\n            }\n        } else {\n            return 'float'\n        }\n    "])),a.isStringToken,ni("string","str","".concat(a.readStringToken,"(m, i)")))}};var lw;const uw={translateArgs:e=>{let{args:n}=e;return{typeArguments:0===n.length?["bang","bang"]:n.map(dc).map(tw).map(rw)}},build:e=>{let{typeArguments:n}=e;return{inlets:{0:{type:"message",id:"0"}},outlets:Zo(n,((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}]))}}},cw={messageReceivers:(e,n)=>{let{snds:t,node:{args:{typeArguments:a}}}=e;return{0:ri([ei(n.msg.Message,"m")])(lw||(lw=r(["\n            ","\n            return\n        "])),a.reverse().map(((e,r)=>"".concat(t[a.length-r-1],"(").concat(aw(e,"m",0,n),")"))))}},dependencies:[iw,sw,Wp]};var dw;const pw={translateArgs:e=>{let{args:n}=e;return{initValue:pc(n[0])||0}},build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}})},fw={state:e=>{let{node:{args:n},ns:t}=e;return ai(t.State,[ei("Float","currentValue",n.initValue)])},messageReceivers:(e,n)=>{let{snds:t,state:a}=e,{bangUtils:o,msg:i}=n;return{0:ri([ei(i.Message,"m")])(dw||(dw=r(["\n            if (","(m, [","])) {\n                ","\n                if (newValue !== ",".currentValue) {\n                    ",".currentValue = newValue\n                    ","(","([",".currentValue]))\n                }\n                return\n    \n            } else if (","(m)) {\n                ","(","([",".currentValue]))\n                return \n    \n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'set'\n            ) {\n                ",".currentValue = ","(m, 1)\n                return\n            }\n        "])),i.isMatching,i.FLOAT_TOKEN,ni("Float","newValue","".concat(i.readFloatToken,"(m, 0)")),a,a,t[0],i.floats,a,o.isBang,t[0],i.floats,a,i.isMatching,i.STRING_TOKEN,i.FLOAT_TOKEN,i.readStringToken,a,i.readFloatToken)}},dependencies:[Wp]};var hw;const mw={translateArgs:e=>{let{args:n}=e;return{threshold:pc(n[0])||0}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}}})},gw={state:e=>{let{node:{args:n},ns:t}=e;return ai(t.State,[ei("Float","threshold",n.threshold)])},messageReceivers:(e,n)=>{let{snds:t,state:a}=e,{msg:o}=n;return{0:ri([ei(o.Message,"m")])(hw||(hw=r(["\n            if (","(m, [","])) {\n                ","\n                if (value >= ",".threshold) {\n                    ","(","([value]))\n                } else {\n                    ","(","([value]))\n                }\n                return\n            }\n        "])),o.isMatching,o.FLOAT_TOKEN,ni("Float","value","".concat(o.readFloatToken,"(m, 0)")),a,t[1],o.floats,t[0],o.floats),1:Sc("".concat(a,".threshold"),o)}}};var yw;const bw={translateArgs:e=>{let{args:n}=e;return{minValue:pc(n[0])||0,maxValue:pc(n[1])||0}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"message",id:"0"}}})},vw={state:e=>{let{node:{args:n},ns:t}=e;return ai(t.State,[ei("Float","minValue",n.minValue),ei("Float","maxValue",n.maxValue)])},messageReceivers:(e,n)=>{let{snds:t,state:a}=e,{msg:o}=n;return{0:ri([ei(o.Message,"m")])(yw||(yw=r(["\n            if (","(m, [","])) {\n                ","(","([\n                    Math.max(\n                        Math.min(\n                            ",".maxValue, \n                            ","(m, 0)\n                        ), \n                        ",".minValue\n                    )\n                ]))\n                return\n            }\n        "])),o.isMatching,o.FLOAT_TOKEN,t[0],o.floats,a,o.readFloatToken,a),1:Sc("".concat(a,".minValue"),o),2:Sc("".concat(a,".maxValue"),o)}}};var ww,Sw,kw;const xw={translateArgs:e=>{let{args:n}=e;return{filters:n.length?n:[0]}},build:e=>{const n={0:{type:"message",id:"0"}};return 1===e.filters.length&&(n[1]={type:"message",id:"1"}),{inlets:n,outlets:Zo(e.filters.length?Jo(e.filters.length+1):[0,1],((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}]))}}},Iw={state:(e,n)=>{let{node:{args:t},ns:r}=e,{msg:a}=n;return ai(r.State,[ei("Float","floatFilter","number"===typeof t.filters[0]?t.filters[0]:0),ei("string","stringFilter",'"'.concat(t.filters[0],'"')),ei("Int","filterType","number"===typeof t.filters[0]?a.FLOAT_TOKEN:a.STRING_TOKEN)])},messageReceivers:(e,n)=>{let{snds:t,state:a,node:{args:o}}=e,{msg:i,bangUtils:s,msgUtils:l}=n;return o.filters.length>1?{0:ri([ei(i.Message,"m")])(ww||(ww=r(["\n                    ","\n    \n                    ","(m)\n                    return\n                "])),o.filters.map(((e,n)=>Qo(["float"===e,"\n                            if (".concat(i.isFloatToken,"(m, 0)) {\n                                ").concat(t[n],"(m)\n                                return\n                            }\n                        ")],["symbol"===e,"\n                            if (".concat(i.isStringToken,"(m, 0)) {\n                                ").concat(t[n],"(m)\n                                return\n                            }\n                        ")],["list"===e,"\n                            if (".concat(i.getLength,"(m).length > 1) {\n                                ").concat(t[n],"(m)\n                                return\n                            }\n                        ")],["bang"===e,"\n                            if (".concat(s.isBang,"(m)) {\n                                ").concat(t[n],"(m)\n                                return\n                            }\n                        ")],["number"===typeof e,"\n                            if (\n                                ".concat(i.isFloatToken,"(m, 0)\n                                && ").concat(i.readFloatToken,"(m, 0) === ").concat(e,"\n                            ) {\n                                ").concat(t[n],"(").concat(s.emptyToBang,"(").concat(l.shift,"(m)))\n                                return\n                            }\n                        ")],["string"===typeof e,"\n                            if (\n                                ".concat(i.isStringToken,"(m, 0) \n                                && ").concat(i.readStringToken,'(m, 0) === "').concat(e,'"\n                            ) {\n                                ').concat(t[n],"(").concat(s.emptyToBang,"(").concat(l.shift,"(m)))\n                                return\n                            }")]))),t[o.filters.length])}:{0:ri([ei(i.Message,"m")])(Sw||(Sw=r(["\n                    if (",".filterType === ",") {\n                        if (\n                            (",".stringFilter === 'float'\n                                && ","(m, 0))\n                            || (",".stringFilter === 'symbol'\n                                && ","(m, 0))\n                            || (",".stringFilter === 'list'\n                                && ","(m) > 1)\n                            || (",".stringFilter === 'bang' \n                                && ","(m))\n                        ) {\n                            ","(m)\n                            return\n                        \n                        } else if (\n                            ","(m, 0)\n                            && ","(m, 0) === ",".stringFilter\n                        ) {\n                            ","(","(","(m)))\n                            return\n                        }\n    \n                    } else if (\n                        ","(m, 0)\n                        && ","(m, 0) === ",".floatFilter\n                    ) {\n                        ","(","(","(m)))\n                        return\n                    }\n                \n                    ","(m)\n                return\n                "])),a,i.STRING_TOKEN,a,i.isFloatToken,a,i.isStringToken,a,i.getLength,a,s.isBang,t.$0,i.isStringToken,i.readStringToken,a,t.$0,s.emptyToBang,l.shift,i.isFloatToken,i.readFloatToken,a,t.$0,s.emptyToBang,l.shift,t.$1),1:ri([ei(i.Message,"m")])(kw||(kw=r(["\n                    ",".filterType = ","(m, 0)\n                    if (",".filterType === ",") {\n                        ",".stringFilter = ","(m, 0)\n                    } else {\n                        ",".floatFilter = ","(m, 0)\n                    }\n                    return\n                "])),a,i.getTokenType,a,i.STRING_TOKEN,a,i.readStringToken,a,i.readFloatToken)}},dependencies:[Wp,$p]};var _w,Aw;const Tw={translateArgs:e=>{let{args:n}=e;return{isClosed:0===(pc(n[0])||0)}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}})},Ew={state:e=>{let{node:{args:n},ns:t}=e;return ai(t.State,[ei("Float","isClosed",n.isClosed?"true":"false")])},messageReceivers:(e,n)=>{let{ns:t,snds:a,state:o}=e,{msg:i}=n;return{0:ri([ei(i.Message,"m")])(_w||(_w=r(["\n            if (!",".isClosed) {\n                ","(m)\n            }\n            return\n        "])),o,a.$0),1:xc(t.setIsClosed,o,i)}},core:e=>{let{ns:n}=e;return oi([ti(n.setIsClosed,[ei(n.State,"state"),ei("Float","value")],"void")(Aw||(Aw=r(["\n                state.isClosed = (value === 0)\n            "])))])}};var Ow,Cw;const Nw={state:e=>{let{ns:n}=e;return ai(n.State,[ei("boolean","continueIter","true")])},messageReceivers:(e,n)=>{let{snds:t,state:a}=e,{msg:o,bangUtils:i}=n;return{0:ri([ei(o.Message,"m")])(Ow||(Ow=r(["\n            if (","(m)) {\n                ",".continueIter = true\n                while (",".continueIter) {\n                    ","(","())\n                }\n                return\n    \n            } else if (","(m, [","])) {\n                ",".continueIter = true\n                ","\n                ","\n                while (",".continueIter && iterCount++ < maxIterCount) {\n                    ","(","())\n                }\n                return\n            }\n        "])),i.isBang,a,a,t[0],i.bang,o.isMatching,o.FLOAT_TOKEN,a,ei("Int","maxIterCount","toInt(".concat(o.readFloatToken,"(m, 0))")),ei("Int","iterCount","0"),a,t[0],i.bang),1:ri([ei(o.Message,"m")])(Cw||(Cw=r(["\n            if (","(m)) {\n                ",".continueIter = false\n                return\n            }\n        "])),i.isBang,a)}},dependencies:[Wp]};var Mw,Pw;const Fw={translateArgs:e=>{let{args:n}=e;return{maxValue:pc(n[0])||0}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}})},Rw={state:e=>{let{node:{args:n},ns:t}=e;return ai(t.State,[ei("Float","maxValue",n.maxValue)])},messageReceivers:(e,n)=>{let{ns:t,snds:a,state:o}=e,{bangUtils:i,msg:s}=n;return{0:ri([ei(s.Message,"m")])(Mw||(Mw=r(["\n            if (","(m)) {\n                ","(","([Math.floor(Math.random() * ",".maxValue)]))\n                return\n            } else if (\n                ","(m, [",", ","])\n                && ","(m, 0) === 'seed'\n            ) {\n                console.log('WARNING : seed not implemented yet for [random]')\n                return\n            }\n        "])),i.isBang,a[0],s.floats,o,s.isMatching,s.STRING_TOKEN,s.FLOAT_TOKEN,s.readStringToken),1:xc(t.setMaxValue,o,s)}},core:e=>{let{ns:n}=e;return oi([ti(n.setMaxValue,[ei(n.State,"state"),ei("Float","maxValue")],"void")(Pw||(Pw=r(["\n                state.maxValue = Math.max(maxValue, 0)\n            "])))])},dependencies:[Wp]};var Lw,Dw,jw,zw,Bw,Uw,Ww,$w;const Vw={translateArgs:e=>{let{args:n}=e,t=0;return n.length>=1&&(t=cc(n[n.length-1]),n=n.slice(0,-1)),n=n.length?n:[0],{typeArguments:n.map(tw).map((e=>["number"===typeof e?"float":rw(e),"number"===typeof e?e:"float"===e?0:"symbol"])),delay:t}},build:e=>({inlets:{...Zo(e.typeArguments,((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}])),["".concat(e.typeArguments.length)]:{type:"message",id:"".concat(e.typeArguments.length)}},outlets:Zo(e.typeArguments,((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}]))})},Gw={state:(e,n)=>{let{node:{args:t},ns:r}=e,{msg:a}=n;return ai(r.State,[ei("Int","delay",0),ei("Array<".concat(a.Message,">"),"outputMessages","[".concat(t.typeArguments.map((e=>{let[n,t]=e;return"number"===typeof t?"".concat(a.floats,"([").concat(t,"])"):"".concat(a.strings,'(["').concat(t,'"])')})).join(","),"]")),ei("Array<".concat(r.ScheduledMessage,">"),"scheduledMessages","[]"),ei("Array<".concat(a.Handler,">"),"snds","[]")])},initialization:e=>{let{ns:n,node:{args:t},state:a,snds:o}=e;return ii(Lw||(Lw=r(["\n            ","(",", ",")\n            ",".snds = [","]\n        "])),n.setDelay,a,t.delay,a,Jo(t.typeArguments.length).reverse().map((e=>o[e])).join(", "))},messageReceivers:(e,n)=>{let{ns:t,node:{args:a},state:o}=e;const{bangUtils:i,actionUtils:s,msg:l,core:u}=n;return{0:ri([ei(l.Message,"m")])(Dw||(Dw=r(["\n                if (","(m, 'clear')) {\n                    ","(",")\n                    return \n        \n                } else if (","(m, 'flush')) {\n                    if (",".scheduledMessages.length) {\n                        ","(\n                            ",", \n                            ",".scheduledMessages[",".scheduledMessages.length - 1].frame\n                        )\n                    }\n                    return\n        \n                } else {\n                    ","\n                    ","\n        \n                    ","\n        \n                    return\n                }\n            "])),s.isAction,t.clear,o,s.isAction,o,t.sendMessages,o,o,o,ni(l.Message,"inMessage","".concat(i.isBang,"(m) ? ").concat(l.create,"([]): m")),ni("Int","insertIndex","".concat(t.prepareMessageScheduling,"(\n                        ").concat(o,", \n                        () => {\n                            ").concat(t.sendMessages,"(").concat(o,", ").concat(u.FRAME,")\n                        },\n                    )")),a.typeArguments.slice(0).reverse().map(((e,n)=>{let[t]=e;return[a.typeArguments.length-n-1,t]})).map(((e,t)=>{let[a,i]=e;return ii(jw||(jw=r(["\n                                if (","(inMessage) > ",") {\n                                    ",".scheduledMessages[insertIndex + ","].message = \n                                        ","\n                                    ",".outputMessages[","] \n                                        = ",".scheduledMessages[insertIndex + ","].message\n                                } else {\n                                    ",".scheduledMessages[insertIndex + ","].message \n                                        = ",".outputMessages[","]\n                                }\n                            "])),l.getLength,a,o,t,aw(i,"inMessage",a,n),o,a,o,t,o,t,o,a)}))),...Zo(a.typeArguments.slice(1),((e,t)=>{let[a]=e;return["".concat(t+1),ri([ei(l.Message,"m")])(zw||(zw=r(["\n                        ",".outputMessages[","] = ","\n                        return\n                    "])),o,t+1,aw(a,"m",0,n))]})),[a.typeArguments.length]:xc(t.setDelay,o,l)}},core:(e,n)=>{let{ns:t}=e,{msg:a,sked:o,core:i,commons:s}=n;return oi([ai(t.ScheduledMessage,[ei(a.Message,"message"),ei("Int","frame"),ei(o.Id,"skedId")]),ni(t.ScheduledMessage,t.dummyScheduledMessage,"{\n                message: ".concat(a.create,"([]),\n                frame: 0,\n                skedId: ").concat(o.ID_NULL,",\n            }")),ti(t.prepareMessageScheduling,[ei(t.State,"state"),ei(o.Callback,"callback")],"Int")(Bw||(Bw=r(["\n                ","\n                ","\n                ","\n        \n                while (\n                    insertIndex < state.scheduledMessages.length \n                    && state.scheduledMessages[insertIndex].frame <= frame\n                ) {\n                    insertIndex++\n                }\n        \n                ","\n                if (\n                    insertIndex === 0 || \n                    (\n                        insertIndex > 0 \n                        && state.scheduledMessages[insertIndex - 1].frame !== frame\n                    )\n                ) {\n                    skedId = ","(frame, callback)\n                }\n        \n                ","\n                for (","; i < state.snds.length; i++) {\n                    state.scheduledMessages.push(",")\n                }\n                state.scheduledMessages.copyWithin(\n                    (insertIndex + 1) * state.snds.length, \n                    insertIndex * state.snds.length\n                )\n                for (","; i < state.snds.length; i++) {\n                    state.scheduledMessages[insertIndex + i] = {\n                        message: ",".message,\n                        frame,\n                        skedId,\n                    }\n                }\n        \n                return insertIndex\n            "])),ei("Int","insertIndex","0"),ei("Int","frame","".concat(i.FRAME," + state.delay")),ei(o.Id,"skedId",o.ID_NULL),"",s.waitFrame,"",ei("Int","i",0),t.dummyScheduledMessage,ei("Int","i",0),t.dummyScheduledMessage),ti(t.sendMessages,[ei(t.State,"state"),ei("Int","toFrame")],"void")(Uw||(Uw=r(["\n                ","\n                while (\n                    state.scheduledMessages.length \n                    && state.scheduledMessages[0].frame <= toFrame\n                ) {\n                    for (i = 0; i < state.snds.length; i++) {\n                        // Snds are already reversed\n                        state.snds[i](state.scheduledMessages.shift().message)\n                    }\n                }\n            "])),ei("Int","i",0)),ti(t.clear,[ei(t.State,"state")],"void")(Ww||(Ww=r(["\n                ","\n                ","\n                for (i; i < length; i++) {\n                    ","(state.scheduledMessages[i].skedId)\n                }\n                state.scheduledMessages = []\n            "])),ei("Int","i","0"),ni("Int","length","state.scheduledMessages.length"),s.cancelWaitFrame),ti(t.setDelay,[ei(t.State,"state"),ei("Float","delay")],"void")($w||($w=r(["\n                state.delay = toInt(Math.round(delay / 1000 * ","))\n            "])),i.SAMPLE_RATE)])},dependencies:[iw,sw,Wp,Vp,rl]};var Hw,Kw,qw;const Yw={translateArgs:e=>{let{args:n}=e;return{typeArguments:(n.length?n:["float","float"]).map(tw).map((e=>{if("bang"===(e=e||"float")&&(e="float"),"number"===typeof e)return e;if(!["float","symbol"].includes(e))throw new Error("".concat(e," not supported (yet)"));return e})).map((e=>["number"===typeof e?"float":rw(e),"number"===typeof e?e:"float"===e?0:"symbol"]))}},build:e=>{let{typeArguments:n}=e;return{inlets:Zo(n,((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}])),outlets:{0:{type:"message",id:"0"}}}}},Xw={state:e=>{let{node:{args:n},ns:t}=e;return ai(t.State,[ei("Array<Float>","floatValues","[".concat(n.typeArguments.map((e=>{let[n,t]=e;return"float"===n?t:0})).join(","),"]")),ei("Array<string>","stringValues","[".concat(n.typeArguments.map((e=>{let[n,t]=e;return"symbol"===n?'"'.concat(t,'"'):'""'})).join(","),"]"))])},messageReceivers:(e,n)=>{let{snds:t,state:a,node:o}=e,{bangUtils:i,tokenConversion:s,msg:l}=n;return{0:ri([ei(l.Message,"m")])(Hw||(Hw=r(["\n            if (!","(m)) {\n                for (","; i < ","(m); i++) {\n                    ",".stringValues[i] = ","(m, i)\n                    ",".floatValues[i] = ","(m, i)\n                }\n            }\n    \n            ","\n    \n            ","\n    \n            ","\n    \n            ","(messageOut)\n            return\n        "])),i.isBang,ei("Int","i","0"),l.getLength,a,s.toString_,a,s.toFloat,ni(l.Template,"template","[".concat(o.args.typeArguments.map(((e,n)=>{let[t]=e;return"symbol"===t?"".concat(l.STRING_TOKEN,", ").concat(a,".stringValues[").concat(n,"].length"):"".concat(l.FLOAT_TOKEN)})).join(","),"]")),ni(l.Message,"messageOut","".concat(l.create,"(template)")),o.args.typeArguments.map(((e,n)=>{let[t]=e;return"symbol"===t?"".concat(l.writeStringToken,"(messageOut, ").concat(n,", ").concat(a,".stringValues[").concat(n,"])"):"".concat(l.writeFloatToken,"(messageOut, ").concat(n,", ").concat(a,".floatValues[").concat(n,"])")})),t[0]),...Zo(o.args.typeArguments.slice(1),((e,n)=>{let[t]=e;if("symbol"===t)return["".concat(n+1),ri([ei(l.Message,"m")])(Kw||(Kw=r(["\n                        ",".stringValues[","] = ","(m, 0)\n                        return\n                    "])),a,n+1,s.toString_)];if("float"===t)return["".concat(n+1),ri([ei(l.Message,"m")])(qw||(qw=r(["\n                        ",".floatValues[","] = ","(m, 0)\n                        return\n                    "])),a,n+1,s.toFloat)];throw new Error("Unsupported type argument ".concat(t))}))}},dependencies:[sw,iw,Wp]};var Jw;const Zw={translateArgs:e=>{let{args:n}=e;return{typeArguments:0===n.length?["float","float"]:n.map(tw).map((e=>{if("number"===typeof e)return"float";if("symbol"===e||"float"===e)return e;throw new Error('Invalid type argument for unpack "'.concat(e,'"'))}))}},build:e=>{let{typeArguments:n}=e;return{inlets:{0:{type:"message",id:"0"}},outlets:Zo(n,((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}]))}}},Qw={messageReceivers:(e,n)=>{let{snds:t,node:{args:a}}=e,{msg:o}=n;return{0:ri([ei(o.Message,"m")])(Jw||(Jw=r(["\n            ","\n            return\n        "])),a.typeArguments.map(((e,n)=>[e,n])).reverse().map((e=>{let[n,r]=e;return"\n                    if (\n                        ".concat(o.getLength,"(m) >= ").concat(r+1,"\n                    ) {\n                        if (").concat(o.getTokenType,"(m, ").concat(r,") === ").concat("float"===n?o.FLOAT_TOKEN:o.STRING_TOKEN,") {\n                            ").concat(Qo(["float"===n,"".concat(t[r],"(").concat(o.floats,"([").concat(o.readFloatToken,"(m, ").concat(r,")]))")],["symbol"===n,"".concat(t[r],"(").concat(o.strings,"([").concat(o.readStringToken,"(m, ").concat(r,")]))")]),"\n                        } else {\n                            console.log('unpack : invalid token type index ").concat(r,"')\n                        }\n                    }\n                ")})))}}};var eS,nS,tS,rS;const aS={translateArgs:e=>{let{args:n}=e;return{tokenizedExpressions:mS(n).map(cS)}},build:e=>({inlets:Zo(fS(e.tokenizedExpressions),(e=>{let{id:n}=e;return["".concat(n),{type:"message",id:"".concat(n)}]})),outlets:Zo(e.tokenizedExpressions,((e,n)=>["".concat(n),{type:"message",id:"".concat(n)}]))})},oS={translateArgs:e=>{let{args:n}=e;return{tokenizedExpressions:mS(n).map(cS)}},build:e=>({inlets:Zo(hS(e.tokenizedExpressions),(e=>{let{id:n,type:t}=e;return["".concat(n),{type:"signal"===t?"signal":"message",id:"".concat(n)}]})),outlets:Zo(e.tokenizedExpressions,((e,n)=>["".concat(n),{type:"signal",id:"".concat(n)}]))})},iS=()=>({state:e=>{let{node:{args:n},ns:t}=e;return ai(t.State,[ei("Map<Int, Float>","floatInputs","new Map()"),ei("Map<Int, string>","stringInputs","new Map()"),ei("Array<Float>","outputs","new Array(".concat(n.tokenizedExpressions.length,")"))])},initialization:e=>{let{node:{args:n,type:t},state:a}=e;const o="expr"===t?fS(n.tokenizedExpressions):hS(n.tokenizedExpressions).filter((e=>{let{type:n}=e;return"signal"!==n}));return ii(eS||(eS=r(["\n            ","\n            ","\n        "])),o.filter((e=>"float"===e.type||"int"===e.type)).map((e=>"".concat(a,".floatInputs.set(").concat(e.id,", 0)"))),o.filter((e=>"string"===e.type)).map((e=>"".concat(a,".stringInputs.set(").concat(e.id,", '')"))))},messageReceivers:(e,n)=>{let{snds:t,state:a,node:{args:o,type:i}}=e;const{bangUtils:s,tokenConversion:l,msg:u}=n,c="expr"===i?fS(o.tokenizedExpressions):hS(o.tokenizedExpressions).filter((e=>{let{type:n}=e;return"signal"!==n})),d=c.length&&0===c[0].id;return{0:ri([ei(u.Message,"m")])(nS||(nS=r(["\n                if (!","(m)) {\n                    for (","; i < ","(m); i++) {\n                        ",".stringInputs.set(i, ","(m, i))\n                        ",".floatInputs.set(i, ","(m, i))\n                    }\n                }\n    \n                ","\n                \n                return\n            "])),s.isBang,ei("Int","i","0"),u.getLength,a,l.toString_,a,l.toFloat,"expr"===i?"\n                    ".concat(o.tokenizedExpressions.map(((e,t)=>"".concat(a,".outputs[").concat(t,"] = ").concat(dS(a,null,e,n)))),"\n            \n                    ").concat(o.tokenizedExpressions.map(((e,n)=>"".concat(t["".concat(n)],"(").concat(u.floats,"([").concat(a,".outputs[").concat(n,"]]))"))),"\n                "):null),...Zo(c.slice(d?1:0),(e=>{let{id:n,type:t}=e;if("float"===t||"int"===t)return["".concat(n),ri([ei(u.Message,"m")])(tS||(tS=r(["\n                                ",".floatInputs.set(",", ","(m, 0))\n                                return\n                            "])),a,n,l.toFloat)];if("string"===t)return["".concat(n),ri([ei(u.Message,"m")])(rS||(rS=r(["\n                                ",".stringInputs.set(",", ","(m, 0))\n                                return\n                            "])),a,n,l.toString_)];throw new Error("invalid input type ".concat(t))}))}},dependencies:[sw,iw,Ly,Wp,tl]}),sS=iS(),lS={...iS(),flags:{alphaName:"expr_t"},dsp:(e,n)=>{let{node:{args:t},state:r,outs:a,ins:o}=e;return oi(t.tokenizedExpressions.map(((e,t)=>"".concat(a[t]," = ").concat(dS(r,o,e,n)))))}},uS=/(?<f>\$f(?<id_f>[0-9]+))|(?<v>\$v(?<id_v>[0-9]+))|(?<i>\$i(?<id_i>[0-9]+))|(?<s>\$s(?<id_s>[0-9]+)\s*\[(?<sIndex>[^\[\]]*)\])/,cS=e=>{let n,t=[];for(;n=uS.exec(e);)n.index&&t.push({type:"raw",content:e.slice(0,n.index)}),n[1]?t.push({type:"float",id:parseInt(n[2])-1}):n[3]?t.push({type:"signal",id:parseInt(n[4])-1}):n[5]?t.push({type:"int",id:parseInt(n[6])-1}):n[7]&&(t=[...t,{type:"string",id:parseInt(n[8])-1},{type:"indexing-start"},...cS(n[9]),{type:"indexing-end"}]),e=e.slice(n.index+n[0].length);return e.length&&t.push({type:"raw",content:e}),t},dS=(e,n,t,r)=>{let{numbers:a,commons:o}=r;return"+("+t.map((t=>{switch(t.type){case"float":return"".concat(e,".floatInputs.get(").concat(t.id,")");case"signal":if(null===n)throw new Error("invalid token signal received");return n[t.id];case"int":return"".concat(a.roundFloatAsPdInt,"(").concat(e,".floatInputs.get(").concat(t.id,"))");case"string":return"".concat(o.getArray,"(").concat(e,".stringInputs.get(").concat(t.id,"))");case"indexing-start":return"[toInt(";case"indexing-end":return")]";case"raw":return t.content}})).join("")+")"},pS=e=>{const n=[];e.forEach((e=>{e.forEach((e=>{"float"!==e.type&&"signal"!==e.type&&"int"!==e.type&&"string"!==e.type||n.push(e)}))})),n.sort(((e,n)=>{let{id:t}=e,{id:r}=n;return t-r}));const t=new Map;return n.filter((e=>{if(t.has(e.id)){if(t.get(e.id).type!==e.type)throw new Error("contradictory definitions for input ".concat(e.id));return!1}return t.set(e.id,e),!0}))},fS=e=>{const n=pS(e);return n.forEach((e=>{if("signal"===e.type)throw new Error("invalid signal token $v# for [expr]")})),n},hS=e=>pS(e),mS=e=>{let n=e.join(" ");return Object.getOwnPropertyNames(Math).forEach((e=>{n=n.replaceAll(e,"Math.".concat(e))})),n.split(";").map((e=>e.trim()))},gS={expr:sS,"expr~":lS},yS={expr:aS,"expr~":oS};var bS,vS,wS,SS;const kS=e=>({translateArgs:n=>{const t=pc(n.args[0]);return{value:void 0!==t?t:e}},build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}})}),xS=e=>{let{operationName:n,generateOperation:t,dependencies:a=[],prepareLeftOp:o,prepareRightOp:i}=e;return{flags:{alphaName:n},state:e=>{let{ns:n}=e;return ai(n.State,[ei("Float","leftOp",0),ei("Float","rightOp",0)])},initialization:e=>{let{ns:n,state:t,node:{args:a}}=e;return ii(bS||(bS=r(["\n            ","(",", 0)\n            ","(",", ",")\n        "])),n.setLeft,t,n.setRight,t,a.value)},messageReceivers:(e,n)=>{let{ns:a,state:o,snds:i}=e;const{bangUtils:s,msg:l}=n;return{0:ri([ei(l.Message,"m")])(vS||(vS=r(["\n                    if (","(m, [","])) {\n                        ","(",", ","(m, 0))\n                        ","(","([","]))\n                        return\n                    \n                    } else if (","(m)) {\n                        ","(","([","]))\n                        return\n                    }\n                "])),l.isMatching,l.FLOAT_TOKEN,a.setLeft,o,l.readFloatToken,i.$0,l.floats,t(o,n),s.isBang,i.$0,l.floats,t(o,n)),1:xc(a.setRight,o,l)}},core:e=>{let{ns:n}=e;return oi([ti(n.setLeft,[ei(n.State,"state"),ei("Float","value")],"void")(wS||(wS=r(["\n                    state.leftOp = ","\n                "])),o||"value"),ti(n.setRight,[ei(n.State,"state"),ei("Float","value")],"void")(SS||(SS=r(["\n                    state.rightOp = ","\n                "])),i||"value")])},dependencies:[Wp,...a]}},IS={"+":xS({operationName:"add",generateOperation:e=>"".concat(e,".leftOp + ").concat(e,".rightOp")}),"-":xS({operationName:"sub",generateOperation:e=>"".concat(e,".leftOp - ").concat(e,".rightOp")}),"*":xS({operationName:"mul",generateOperation:e=>"".concat(e,".leftOp * ").concat(e,".rightOp")}),"/":xS({operationName:"div",generateOperation:e=>"".concat(e,".rightOp !== 0 ? ").concat(e,".leftOp / ").concat(e,".rightOp: 0")}),max:xS({operationName:"max",generateOperation:e=>"Math.max(".concat(e,".leftOp, ").concat(e,".rightOp)")}),min:xS({operationName:"min",generateOperation:e=>"Math.min(".concat(e,".leftOp, ").concat(e,".rightOp)")}),mod:xS({operationName:"mod",prepareLeftOp:"value > 0 ? Math.floor(value): Math.ceil(value)",prepareRightOp:"Math.floor(Math.abs(value))",generateOperation:e=>"".concat(e,".rightOp !== 0 ? (").concat(e,".rightOp + (").concat(e,".leftOp % ").concat(e,".rightOp)) % ").concat(e,".rightOp: 0")}),"%":xS({operationName:"modlegacy",generateOperation:e=>"".concat(e,".leftOp % ").concat(e,".rightOp")}),pow:xS({operationName:"pow",generateOperation:(e,n)=>{let{funcs:t}=n;return"".concat(t.pow,"(").concat(e,".leftOp, ").concat(e,".rightOp)")},dependencies:[oh]}),log:xS({operationName:"log",generateOperation:e=>"Math.log(".concat(e,".leftOp) / Math.log(").concat(e,".rightOp)")}),"||":xS({operationName:"or",prepareLeftOp:"Math.floor(Math.abs(value))",prepareRightOp:"Math.floor(Math.abs(value))",generateOperation:e=>"".concat(e,".leftOp || ").concat(e,".rightOp ? 1: 0")}),"&&":xS({operationName:"and",prepareLeftOp:"Math.floor(Math.abs(value))",prepareRightOp:"Math.floor(Math.abs(value))",generateOperation:e=>"".concat(e,".leftOp && ").concat(e,".rightOp ? 1: 0")}),">":xS({operationName:"gt",generateOperation:e=>"".concat(e,".leftOp > ").concat(e,".rightOp ? 1: 0")}),">=":xS({operationName:"gte",generateOperation:e=>"".concat(e,".leftOp >= ").concat(e,".rightOp ? 1: 0")}),"<":xS({operationName:"lt",generateOperation:e=>"".concat(e,".leftOp < ").concat(e,".rightOp ? 1: 0")}),"<=":xS({operationName:"lte",generateOperation:e=>"".concat(e,".leftOp <= ").concat(e,".rightOp ? 1: 0")}),"==":xS({operationName:"eq",generateOperation:e=>"".concat(e,".leftOp == ").concat(e,".rightOp ? 1: 0")}),"!=":xS({operationName:"neq",generateOperation:e=>"".concat(e,".leftOp != ").concat(e,".rightOp ? 1: 0")})},_S={"+":kS(0),"-":kS(0),"*":kS(1),"/":kS(1),max:kS(0),min:kS(1),mod:kS(0),"%":kS(0),pow:kS(0),log:kS(Math.E),"||":kS(0),"&&":kS(0),">":kS(0),">=":kS(0),"<":kS(0),"<=":kS(0),"==":kS(0),"!=":kS(0)},AS={...uc,...ob,...hh,...nf,...Rb,...Bb,...Ib,...Fg,...$v,...$v,...Gh,"noise~":{translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"signal",id:"0"}}})},"snapshot~":pf,"sig~":_c,"samphold~":lf,"clip~":rf,"vline~":{translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"signal",id:"0"}}})},"line~":Ff,"dac~":Op,"adc~":Np,"samplerate~":{translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}})},"tabplay~":Qh,"tabwrite~":Dh,"readsf~":Vm,"writesf~":Xm,"vd~":{aliasTo:"delread4~"},"bp~":og,"hip~":Vb,"lop~":Yb,"vcf~":tv,"delwrite~":Cb,"s~":{aliasTo:"send~"},"r~":{aliasTo:"receive~"},...by,...Ny,..._S,...Yy,...$y,...yS,bang:xy,bng:{aliasTo:"bang"},b:{aliasTo:"bang"},list:Fv,symbol:jv,loadbang:{translateArgs:()=>({}),build:()=>({inlets:{},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0})},s:{aliasTo:"send"},r:{aliasTo:"receive"},print:{translateArgs:e=>{let n="print:";return 1===e.args.length&&"-n"===e.args[0]?n="":e.args.length>=1&&(n=e.args.join(" ")+":"),{prefix:n}},build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{}})},trigger:uw,t:{aliasTo:"trigger"},change:pw,clip:bw,pipe:Vw,moses:mw,pack:Yw,unpack:Zw,spigot:Tw,until:{translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}})},random:Fw,route:xw,select:{aliasTo:"route"},sel:{aliasTo:"route"},msg:wv,metro:Vg,timer:Yg,delay:ty,del:{aliasTo:"delay"},line:Jf,soundfiler:{translateArgs:()=>({}),build:()=>({inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}}})},tabread:xh,tabwrite:Oh,"_mixer~":gc,_routemsg:Ec,graph:{isNoop:!0},table:{isNoop:!0},array:{isNoop:!0},text:{isNoop:!0},cnv:{isNoop:!0},"block~":{isNoop:!0},openpanel:{isNoop:!0}},TS={...ab,...fh,...ef,...Lb,...Ub,..._b,...Rg,...Vv,...Hh,"noise~":lb,"snapshot~":ff,"sig~":Ac,"samphold~":uf,"clip~":af,"vline~":Ef,"line~":Rf,"dac~":Cp,"adc~":Mp,"samplerate~":Hp,"tabplay~":em,"tabwrite~":jh,"readsf~":Gm,"writesf~":Jm,"delwrite~":Nb,"bp~":ig,"hip~":Gb,"lop~":Xb,"vcf~":rv,...yy,...My,...IS,...Vy,...qy,...gS,bang:Iy,list:Rv,symbol:zv,loadbang:Fy,print:Zv,trigger:cw,change:fw,clip:vw,pipe:Gw,moses:gw,pack:Xw,unpack:Qw,spigot:Ew,until:Nw,route:Iw,random:Rw,msg:Sv,metro:Gg,timer:Xg,delay:ry,line:Zf,tabread:Ih,tabwrite:Ch,soundfiler:Xv,"_mixer~":yc,_routemsg:Oc},ES=(e,n)=>CS(e,n,"send").reduce(((e,n)=>({...e,[n.id]:["0"]})),{}),OS=(e,n)=>CS(e,n,"receive").reduce(((e,n)=>({...e,[n.id]:["0"]})),{}),CS=(e,n,t)=>{const r=Zu(e);return Object.values(r.nodes).map((e=>{const a=Fc(r.id,e.id),o=n[a];return o&&o.type===t?o:null})).filter((e=>null!==e))},NS=(e,n)=>PS(e,n).reduce(((e,n)=>({...e,[n.id]:["0"]})),{}),MS=(e,n)=>PS(e,n).reduce(((e,n)=>({...e,[n.id]:["0"]})),{}),PS=(e,n)=>{const t=nd(e),r=[];return rd(t,(e=>{if("control"!==e.nodeClass)return;const t=n[e.nodeId];t&&r.push(t)})),r},FS=async e=>{throw new Ho(e)},RS=()=>({}),LS=async(e,n,t)=>{let{nodeBuilders:r,nodeImplementations:a,audioSettings:o,renderAudioSettings:i,io:s={},abstractionLoader:l}=t,u=[],c=[];switch(n){case"pdJson":const t=zo(e.pd);return 0===t.status?(e.pdJson=t.pd,{status:0,warnings:jS(t.warnings)}):{status:1,warnings:jS(t.warnings),errors:jS(t.errors)};case"dspGraph":const p=await Dc(e.pdJson,r,l);if(p.abstractionsLoadingWarnings&&(u=Object.entries(p.abstractionsLoadingWarnings).filter((e=>{let[n,t]=e;return!!t.length})).flatMap((e=>{let[n,t]=e;return["Warnings when parsing abstraction ".concat(n," :"),...jS(t)]}))),0===p.status)return e.dspGraph=p,{status:0,warnings:u};{const e=Object.values(p.abstractionsLoadingErrors).filter((e=>!!e.unknownNodeType)).map((e=>e.unknownNodeType));return e.length&&(c=[...c,...DS(new Set(e))]),c=[...c,...Object.entries(p.abstractionsLoadingErrors).filter((e=>{let[n,t]=e;return!!t.parsingErrors})).flatMap((e=>{let[n,t]=e;return["Failed to parse abstraction ".concat(n," :"),...jS(t.parsingErrors)]}))],{status:1,errors:c,warnings:u}}case"javascript":case"assemblyscript":const f=Mu(e.dspGraph.graph,a,n,((e,n,t)=>{const r={pdNodes:{},graph:{},pdGui:[]},a=e.io||{};if(a.messageReceivers||(a.messageReceivers={...NS(t,n),...ES(t,n)}),a.messageSenders||(a.messageSenders={...MS(t,n),...OS(t,n)}),Object.keys(a.messageReceivers).forEach((e=>{r.graph[e]=n[e]})),Object.keys(a.messageSenders).forEach((e=>{r.graph[e]=n[e]})),t){const e=nd(t);rd(e,(e=>{if(r.pdNodes[e.patchId]=r.pdNodes[e.patchId]||{},r.pdNodes[e.patchId][e.pdNodeId]=t.patches[e.patchId].nodes[e.pdNodeId],"control"===e.nodeClass){const t=n[e.nodeId];t&&(r.graph[e.nodeId]=t)}})),r.pdGui=e}return{...e,io:a,customMetadata:{...e.customMetadata||{},...r}}})({audio:o,io:s,arrays:e.dspGraph.arrays},e.dspGraph.graph,e.pdJson));return"javascript"===n?e.javascript=f.code:e.assemblyscript=f.code,{status:0,warnings:[]};case"wasm":try{e.wasm=await(async(e,n)=>{if(!io)throw new Error("assemblyscript compiler was not set properly. Please use WebPd's setAsc function to initialize it.");const t={optimizeLevel:3,runtime:"incremental",exportRuntime:!0,sourceMap:!0};32===n&&(t.use=["Math=NativeMathf"]);const{error:r,binary:a,stderr:o}=await io.compileString(e,t);if(r)throw new Error(o.toString());return a.buffer})(Ko(e,"assemblyscript"),o.bitDepth)}catch(d){return{status:1,errors:[d.message],warnings:[]}}return{status:0,warnings:[]};case"wav":return e.wav=await(async(e,n,t)=>{let r="assemblyscript";if(!n.wasm&&!n.javascript)throw new Error("Need compiled wasm or compiled js to render wav");n.wasm||(r="javascript");const a=await wp(n,r),o=await Sp(a,e,t);return vp(o,t.sampleRate)})(i.previewDurationSeconds,e,{...o,...i}),{status:0,warnings:[]};case"app":return e.app=await(async e=>{if(!e.javascript&&!e.wasm)throw new Error("Needs at least javascript or wasm to run");let n,t,r,a;e.javascript?(n="javascript",t="patch.js",r=await Yu("javascript",e.javascript),a=e.javascript):(n="assemblyscript",t="patch.wasm",r=await Yu("assemblyscript",e.wasm),a=e.wasm);const o=r.customMetadata;if(!o.pdGui||!o.graph||!o.pdNodes)throw new Error("Missing data in WebPd metadata");return{[id]:"var WebPdRuntime = (function (exports) {\n  'use strict';\n\n  var WEB_PD_WORKLET_PROCESSOR_CODE = \"/*\\n * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\\n *\\n * This file is part of WebPd\\n * (see https://github.com/sebpiq/WebPd).\\n *\\n * This program is free software: you can redistribute it and/or modify\\n * it under the terms of the GNU Lesser General Public License as published by\\n * the Free Software Foundation, either version 3 of the License, or\\n * (at your option) any later version.\\n *\\n * This program is distributed in the hope that it will be useful,\\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\\n * GNU Lesser General Public License for more details.\\n *\\n * You should have received a copy of the GNU Lesser General Public License\\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\\n */\\nconst FS_CALLBACK_NAMES = [\\n    'onReadSoundFile',\\n    'onOpenSoundReadStream',\\n    'onWriteSoundFile',\\n    'onOpenSoundWriteStream',\\n    'onSoundStreamData',\\n    'onCloseSoundStream',\\n];\\nclass WasmWorkletProcessor extends AudioWorkletProcessor {\\n    constructor() {\\n        super();\\n        this.port.onmessage = this.onMessage.bind(this);\\n        this.settings = {\\n            blockSize: null,\\n            sampleRate,\\n        };\\n        this.dspConfigured = false;\\n        this.engine = null;\\n    }\\n    process(inputs, outputs) {\\n        const output = outputs[0];\\n        const input = inputs[0];\\n        if (!this.dspConfigured) {\\n            if (!this.engine) {\\n                return true;\\n            }\\n            this.settings.blockSize = output[0].length;\\n            this.engine.initialize(this.settings.sampleRate, this.settings.blockSize);\\n            this.dspConfigured = true;\\n        }\\n        this.engine.dspLoop(input, output);\\n        return true;\\n    }\\n    onMessage(messageEvent) {\\n        const message = messageEvent.data;\\n        switch (message.type) {\\n            case 'code:WASM':\\n                this.setWasm(message.payload.wasmBuffer);\\n                break;\\n            case 'code:JS':\\n                this.setJsCode(message.payload.jsCode);\\n                break;\\n            case 'io:messageReceiver':\\n                this.engine.io.messageReceivers[message.payload.nodeId][message.payload.portletId](message.payload.message);\\n                break;\\n            case 'fs':\\n                const returned = this.engine.globals.fs[message.payload.functionName].apply(null, message.payload.arguments);\\n                this.port.postMessage({\\n                    type: 'fs',\\n                    payload: {\\n                        functionName: message.payload.functionName + '_return',\\n                        operationId: message.payload.arguments[0],\\n                        returned,\\n                    },\\n                });\\n                break;\\n            case 'destroy':\\n                this.destroy();\\n                break;\\n            default:\\n                new Error(`unknown message type ${message.type}`);\\n        }\\n    }\\n    // TODO : control for channelCount of wasmModule\\n    setWasm(wasmBuffer) {\\n        return AssemblyScriptWasmBindings.createEngine(wasmBuffer).then((engine) => this.setEngine(engine));\\n    }\\n    setJsCode(code) {\\n        const engine = JavaScriptBindings.createEngine(code);\\n        this.setEngine(engine);\\n    }\\n    setEngine(engine) {\\n        if (engine.globals.fs) {\\n            FS_CALLBACK_NAMES.forEach((functionName) => {\\n                engine.globals.fs[functionName] = (...args) => {\\n                    // We don't use transferables, because that would imply reallocating each time new array in the engine.\\n                    this.port.postMessage({\\n                        type: 'fs',\\n                        payload: {\\n                            functionName,\\n                            arguments: args,\\n                        },\\n                    });\\n                };\\n            });\\n        }\\n        Object.entries(engine.metadata.settings.io.messageSenders).forEach(([nodeId, portletIds]) => {\\n            portletIds.forEach((portletId) => {\\n                engine.io.messageSenders[nodeId][portletId] = (message) => {\\n                    this.port.postMessage({\\n                        type: 'io:messageSender',\\n                        payload: {\\n                            nodeId,\\n                            portletId,\\n                            message,\\n                        },\\n                    });\\n                };\\n            });\\n        });\\n        this.engine = engine;\\n        this.dspConfigured = false;\\n    }\\n    destroy() {\\n        this.process = () => false;\\n    }\\n}\\nregisterProcessor('webpd-node', WasmWorkletProcessor);\\n\";\n\n  var ASSEMBLY_SCRIPT_WASM_BINDINGS_CODE = \"var AssemblyScriptWasmBindings = (function (exports) {\\n    'use strict';\\n\\n    const _proxyGetHandlerThrowIfKeyUnknown = (target, key, path) => {\\n        if (!(key in target)) {\\n            if ([\\n                'toJSON',\\n                'Symbol(Symbol.toStringTag)',\\n                'constructor',\\n                '$typeof',\\n                '$$typeof',\\n                '@@__IMMUTABLE_ITERABLE__@@',\\n                '@@__IMMUTABLE_RECORD__@@',\\n                'then',\\n            ].includes(key)) {\\n                return true;\\n            }\\n            throw new Error(`namespace${path ? ` <${path.keys.join('.')}>` : ''} doesn't know key \\\"${String(key)}\\\"`);\\n        }\\n        return false;\\n    };\\n\\n    const getFloatArrayType = (bitDepth) => bitDepth === 64 ? Float64Array : Float32Array;\\n    const proxyAsModuleWithBindings = (rawModule, bindings) => new Proxy({}, {\\n        get: (_, k) => {\\n            if (bindings.hasOwnProperty(k)) {\\n                const key = String(k);\\n                const bindingSpec = bindings[key];\\n                switch (bindingSpec.type) {\\n                    case 'raw':\\n                        if (k in rawModule) {\\n                            return rawModule[key];\\n                        }\\n                        else {\\n                            throw new Error(`Key ${String(key)} doesn't exist in raw module`);\\n                        }\\n                    case 'proxy':\\n                    case 'callback':\\n                        return bindingSpec.value;\\n                }\\n            }\\n            else {\\n                return undefined;\\n            }\\n        },\\n        has: function (_, k) {\\n            return k in bindings;\\n        },\\n        set: (_, k, newValue) => {\\n            if (bindings.hasOwnProperty(String(k))) {\\n                const key = String(k);\\n                const bindingSpec = bindings[key];\\n                if (bindingSpec.type === 'callback') {\\n                    bindingSpec.value = newValue;\\n                }\\n                else {\\n                    throw new Error(`Binding key ${String(key)} is read-only`);\\n                }\\n            }\\n            else {\\n                throw new Error(`Key ${String(k)} is not defined in bindings`);\\n            }\\n            return true;\\n        },\\n    });\\n    const proxyWithEngineNameMapping = (rawModule, variableNamesIndex) => proxyWithNameMapping(rawModule, {\\n        globals: variableNamesIndex.globals,\\n        io: variableNamesIndex.io,\\n    });\\n    const proxyWithNameMapping = (rawModule, variableNamesIndex) => {\\n        if (typeof variableNamesIndex === 'string') {\\n            return rawModule[variableNamesIndex];\\n        }\\n        else if (typeof variableNamesIndex === 'object') {\\n            return new Proxy(rawModule, {\\n                get: (_, k) => {\\n                    const key = String(k);\\n                    if (key in rawModule) {\\n                        return Reflect.get(rawModule, key);\\n                    }\\n                    else if (key in variableNamesIndex) {\\n                        const nextVariableNames = variableNamesIndex[key];\\n                        return proxyWithNameMapping(rawModule, nextVariableNames);\\n                    }\\n                    else if (_proxyGetHandlerThrowIfKeyUnknown(rawModule, key)) {\\n                        return undefined;\\n                    }\\n                },\\n                has: function (_, k) {\\n                    return k in rawModule || k in variableNamesIndex;\\n                },\\n                set: (_, k, value) => {\\n                    const key = String(k);\\n                    if (key in variableNamesIndex) {\\n                        const variableName = variableNamesIndex[key];\\n                        if (typeof variableName !== 'string') {\\n                            throw new Error(`Failed to set value for key ${String(k)}: variable name is not a string`);\\n                        }\\n                        return Reflect.set(rawModule, variableName, value);\\n                    }\\n                    else {\\n                        throw new Error(`Key ${String(k)} is not defined in raw module`);\\n                    }\\n                },\\n            });\\n        }\\n        else {\\n            throw new Error(`Invalid name mapping`);\\n        }\\n    };\\n\\n    const liftString = (rawModule, pointer) => {\\n        if (!pointer) {\\n            throw new Error('Cannot lift a null pointer');\\n        }\\n        pointer = pointer >>> 0;\\n        const end = (pointer +\\n            new Uint32Array(rawModule.memory.buffer)[(pointer - 4) >>> 2]) >>>\\n            1;\\n        const memoryU16 = new Uint16Array(rawModule.memory.buffer);\\n        let start = pointer >>> 1;\\n        let string = '';\\n        while (end - start > 1024) {\\n            string += String.fromCharCode(...memoryU16.subarray(start, (start += 1024)));\\n        }\\n        return string + String.fromCharCode(...memoryU16.subarray(start, end));\\n    };\\n    const lowerString = (rawModule, value) => {\\n        if (value == null) {\\n            throw new Error('Cannot lower a null string');\\n        }\\n        const length = value.length, pointer = rawModule.__new(length << 1, 1) >>> 0, memoryU16 = new Uint16Array(rawModule.memory.buffer);\\n        for (let i = 0; i < length; ++i)\\n            memoryU16[(pointer >>> 1) + i] = value.charCodeAt(i);\\n        return pointer;\\n    };\\n    const readTypedArray = (rawModule, constructor, pointer) => {\\n        if (!pointer) {\\n            throw new Error('Cannot lift a null pointer');\\n        }\\n        const memoryU32 = new Uint32Array(rawModule.memory.buffer);\\n        return new constructor(rawModule.memory.buffer, memoryU32[(pointer + 4) >>> 2], memoryU32[(pointer + 8) >>> 2] / constructor.BYTES_PER_ELEMENT);\\n    };\\n    const lowerFloatArray = (rawModule, bitDepth, data) => {\\n        const arrayType = getFloatArrayType(bitDepth);\\n        const arrayPointer = rawModule.globals.core.createFloatArray(data.length);\\n        const array = readTypedArray(rawModule, arrayType, arrayPointer);\\n        array.set(data);\\n        return { array, arrayPointer };\\n    };\\n    const lowerListOfFloatArrays = (rawModule, bitDepth, data) => {\\n        const arraysPointer = rawModule.globals.core.x_createListOfArrays();\\n        data.forEach((array) => {\\n            const { arrayPointer } = lowerFloatArray(rawModule, bitDepth, array);\\n            rawModule.globals.core.x_pushToListOfArrays(arraysPointer, arrayPointer);\\n        });\\n        return arraysPointer;\\n    };\\n    const readListOfFloatArrays = (rawModule, bitDepth, listOfArraysPointer) => {\\n        const listLength = rawModule.globals.core.x_getListOfArraysLength(listOfArraysPointer);\\n        const arrays = [];\\n        const arrayType = getFloatArrayType(bitDepth);\\n        for (let i = 0; i < listLength; i++) {\\n            const arrayPointer = rawModule.globals.core.x_getListOfArraysElem(listOfArraysPointer, i);\\n            arrays.push(readTypedArray(rawModule, arrayType, arrayPointer));\\n        }\\n        return arrays;\\n    };\\n\\n    const instantiateWasmModule = async (wasmBuffer, wasmImports = {}) => {\\n        const instanceAndModule = await WebAssembly.instantiate(wasmBuffer, {\\n            env: {\\n                abort: (messagePointer, _, lineNumber, columnNumber) => {\\n                    const message = liftString(wasmExports, messagePointer);\\n                    lineNumber = lineNumber;\\n                    columnNumber = columnNumber;\\n                    (() => {\\n                        throw Error(`${message} at ${lineNumber}:${columnNumber}`);\\n                    })();\\n                },\\n                seed: () => {\\n                    return (() => {\\n                        return Date.now() * Math.random();\\n                    })();\\n                },\\n                'console.log': (textPointer) => {\\n                    console.log(liftString(wasmExports, textPointer));\\n                },\\n            },\\n            ...wasmImports,\\n        });\\n        const wasmExports = instanceAndModule.instance\\n            .exports;\\n        return instanceAndModule.instance;\\n    };\\n\\n    const updateWasmInOuts = ({ refs, cache, }) => {\\n        cache.wasmOutput = readTypedArray(refs.rawModule, cache.arrayType, refs.rawModule.globals.core.x_getOutput());\\n        cache.wasmInput = readTypedArray(refs.rawModule, cache.arrayType, refs.rawModule.globals.core.x_getInput());\\n    };\\n    const createEngineLifecycleBindings = (engineContext) => {\\n        const { refs, cache, metadata } = engineContext;\\n        return {\\n            initialize: {\\n                type: 'proxy',\\n                value: (sampleRate, blockSize) => {\\n                    metadata.settings.audio.blockSize = blockSize;\\n                    metadata.settings.audio.sampleRate = sampleRate;\\n                    cache.blockSize = blockSize;\\n                    refs.rawModule.initialize(sampleRate, blockSize);\\n                    updateWasmInOuts(engineContext);\\n                },\\n            },\\n            dspLoop: {\\n                type: 'proxy',\\n                value: (input, output) => {\\n                    for (let channel = 0; channel < input.length; channel++) {\\n                        cache.wasmInput.set(input[channel], channel * cache.blockSize);\\n                    }\\n                    updateWasmInOuts(engineContext);\\n                    refs.rawModule.dspLoop();\\n                    updateWasmInOuts(engineContext);\\n                    for (let channel = 0; channel < output.length; channel++) {\\n                        output[channel].set(cache.wasmOutput.subarray(cache.blockSize * channel, cache.blockSize * (channel + 1)));\\n                    }\\n                },\\n            },\\n        };\\n    };\\n\\n    const createCommonsBindings = (engineContext) => {\\n        const { refs, cache } = engineContext;\\n        return {\\n            getArray: {\\n                type: 'proxy',\\n                value: (arrayName) => {\\n                    const arrayNamePointer = lowerString(refs.rawModule, arrayName);\\n                    const arrayPointer = refs.rawModule.globals.commons.getArray(arrayNamePointer);\\n                    return readTypedArray(refs.rawModule, cache.arrayType, arrayPointer);\\n                },\\n            },\\n            setArray: {\\n                type: 'proxy',\\n                value: (arrayName, array) => {\\n                    const stringPointer = lowerString(refs.rawModule, arrayName);\\n                    const { arrayPointer } = lowerFloatArray(refs.rawModule, cache.bitDepth, array);\\n                    refs.rawModule.globals.commons.setArray(stringPointer, arrayPointer);\\n                    updateWasmInOuts(engineContext);\\n                },\\n            },\\n        };\\n    };\\n\\n    const readMetadata = async (wasmBuffer) => {\\n        const inputImports = {};\\n        const wasmModule = WebAssembly.Module.imports(new WebAssembly.Module(wasmBuffer));\\n        wasmModule\\n            .filter((imprt) => imprt.module === 'input' && imprt.kind === 'function')\\n            .forEach((imprt) => (inputImports[imprt.name] = () => undefined));\\n        const wasmInstance = await instantiateWasmModule(wasmBuffer, {\\n            input: inputImports,\\n        });\\n        const rawModule = wasmInstance.exports;\\n        const stringPointer = rawModule.metadata.valueOf();\\n        const metadataJSON = liftString(rawModule, stringPointer);\\n        return JSON.parse(metadataJSON);\\n    };\\n\\n    const mapArray = (src, func) => {\\n        const dest = {};\\n        src.forEach((srcValue, i) => {\\n            const [key, destValue] = func(srcValue, i);\\n            dest[key] = destValue;\\n        });\\n        return dest;\\n    };\\n\\n    const liftMessage = (rawModule, messagePointer) => {\\n        const messageTokenTypesPointer = rawModule.globals.msg.x_getTokenTypes(messagePointer);\\n        const messageTokenTypes = readTypedArray(rawModule, Int32Array, messageTokenTypesPointer);\\n        const message = [];\\n        messageTokenTypes.forEach((tokenType, tokenIndex) => {\\n            if (tokenType === rawModule.globals.msg.FLOAT_TOKEN.valueOf()) {\\n                message.push(rawModule.globals.msg.readFloatToken(messagePointer, tokenIndex));\\n            }\\n            else if (tokenType === rawModule.globals.msg.STRING_TOKEN.valueOf()) {\\n                const stringPointer = rawModule.globals.msg.readStringToken(messagePointer, tokenIndex);\\n                message.push(liftString(rawModule, stringPointer));\\n            }\\n        });\\n        return message;\\n    };\\n    const lowerMessage = (rawModule, message) => {\\n        const template = message.reduce((template, value) => {\\n            if (typeof value === 'number') {\\n                template.push(rawModule.globals.msg.FLOAT_TOKEN.valueOf());\\n            }\\n            else if (typeof value === 'string') {\\n                template.push(rawModule.globals.msg.STRING_TOKEN.valueOf());\\n                template.push(value.length);\\n            }\\n            else {\\n                throw new Error(`invalid message value ${value}`);\\n            }\\n            return template;\\n        }, []);\\n        const templateArrayPointer = rawModule.globals.msg.x_createTemplate(template.length);\\n        const loweredTemplateArray = readTypedArray(rawModule, Int32Array, templateArrayPointer);\\n        loweredTemplateArray.set(template);\\n        const messagePointer = rawModule.globals.msg.x_create(templateArrayPointer);\\n        message.forEach((value, index) => {\\n            if (typeof value === 'number') {\\n                rawModule.globals.msg.writeFloatToken(messagePointer, index, value);\\n            }\\n            else if (typeof value === 'string') {\\n                const stringPointer = lowerString(rawModule, value);\\n                rawModule.globals.msg.writeStringToken(messagePointer, index, stringPointer);\\n            }\\n        });\\n        return messagePointer;\\n    };\\n\\n    const createIoMessageReceiversBindings = ({ metadata, refs, }) => Object.entries(metadata.settings.io.messageReceivers).reduce((bindings, [nodeId, spec]) => ({\\n        ...bindings,\\n        [nodeId]: {\\n            type: 'proxy',\\n            value: mapArray(spec, (inletId) => [\\n                inletId,\\n                (message) => {\\n                    const messagePointer = lowerMessage(refs.rawModule, message);\\n                    refs.rawModule.io.messageReceivers[nodeId][inletId](messagePointer);\\n                },\\n            ]),\\n        },\\n    }), {});\\n    const createIoMessageSendersBindings = ({ metadata, }) => Object.entries(metadata.settings.io.messageSenders).reduce((bindings, [nodeId, spec]) => ({\\n        ...bindings,\\n        [nodeId]: {\\n            type: 'proxy',\\n            value: mapArray(spec, (outletId) => [\\n                outletId,\\n                (_) => undefined,\\n            ]),\\n        },\\n    }), {});\\n    const ioMsgSendersImports = ({ metadata, refs, }) => {\\n        const wasmImports = {};\\n        const { variableNamesIndex } = metadata.compilation;\\n        Object.entries(metadata.settings.io.messageSenders).forEach(([nodeId, spec]) => {\\n            spec.forEach((outletId) => {\\n                const listenerName = variableNamesIndex.io.messageSenders[nodeId][outletId];\\n                wasmImports[listenerName] = (messagePointer) => {\\n                    const message = liftMessage(refs.rawModule, messagePointer);\\n                    refs.engine.io.messageSenders[nodeId][outletId](message);\\n                };\\n            });\\n        });\\n        return wasmImports;\\n    };\\n\\n    const createFsBindings = (engineContext) => {\\n        const { refs, cache, metadata } = engineContext;\\n        const fsExportedNames = metadata.compilation.variableNamesIndex.globals.fs;\\n        return {\\n            sendReadSoundFileResponse: {\\n                type: 'proxy',\\n                value: 'x_onReadSoundFileResponse' in fsExportedNames\\n                    ? (operationId, status, sound) => {\\n                        let soundPointer = 0;\\n                        if (sound) {\\n                            soundPointer = lowerListOfFloatArrays(refs.rawModule, cache.bitDepth, sound);\\n                        }\\n                        refs.rawModule.globals.fs.x_onReadSoundFileResponse(operationId, status, soundPointer);\\n                        updateWasmInOuts(engineContext);\\n                    }\\n                    : undefined,\\n            },\\n            sendWriteSoundFileResponse: {\\n                type: 'proxy',\\n                value: 'x_onWriteSoundFileResponse' in fsExportedNames\\n                    ? refs.rawModule.globals.fs.x_onWriteSoundFileResponse\\n                    : undefined,\\n            },\\n            sendSoundStreamData: {\\n                type: 'proxy',\\n                value: 'x_onSoundStreamData' in fsExportedNames\\n                    ? (operationId, sound) => {\\n                        const soundPointer = lowerListOfFloatArrays(refs.rawModule, cache.bitDepth, sound);\\n                        const writtenFrameCount = refs.rawModule.globals.fs.x_onSoundStreamData(operationId, soundPointer);\\n                        updateWasmInOuts(engineContext);\\n                        return writtenFrameCount;\\n                    }\\n                    : undefined,\\n            },\\n            closeSoundStream: {\\n                type: 'proxy',\\n                value: 'x_onCloseSoundStream' in fsExportedNames\\n                    ? refs.rawModule.globals.fs.x_onCloseSoundStream\\n                    : undefined,\\n            },\\n            onReadSoundFile: { type: 'callback', value: () => undefined },\\n            onWriteSoundFile: { type: 'callback', value: () => undefined },\\n            onOpenSoundReadStream: { type: 'callback', value: () => undefined },\\n            onOpenSoundWriteStream: { type: 'callback', value: () => undefined },\\n            onSoundStreamData: { type: 'callback', value: () => undefined },\\n            onCloseSoundStream: { type: 'callback', value: () => undefined },\\n        };\\n    };\\n    const createFsImports = (engineContext) => {\\n        const wasmImports = {};\\n        const { cache, metadata, refs } = engineContext;\\n        const exportedNames = metadata.compilation.variableNamesIndex.globals;\\n        if ('fs' in exportedNames) {\\n            const nameMapping = proxyWithNameMapping(wasmImports, exportedNames.fs);\\n            if ('i_readSoundFile' in exportedNames.fs) {\\n                nameMapping.i_readSoundFile = (operationId, urlPointer, infoPointer) => {\\n                    const url = liftString(refs.rawModule, urlPointer);\\n                    const info = liftMessage(refs.rawModule, infoPointer);\\n                    refs.engine.globals.fs.onReadSoundFile(operationId, url, info);\\n                };\\n            }\\n            if ('i_writeSoundFile' in exportedNames.fs) {\\n                nameMapping.i_writeSoundFile = (operationId, soundPointer, urlPointer, infoPointer) => {\\n                    const sound = readListOfFloatArrays(refs.rawModule, cache.bitDepth, soundPointer);\\n                    const url = liftString(refs.rawModule, urlPointer);\\n                    const info = liftMessage(refs.rawModule, infoPointer);\\n                    refs.engine.globals.fs.onWriteSoundFile(operationId, sound, url, info);\\n                };\\n            }\\n            if ('i_openSoundReadStream' in exportedNames.fs) {\\n                nameMapping.i_openSoundReadStream = (operationId, urlPointer, infoPointer) => {\\n                    const url = liftString(refs.rawModule, urlPointer);\\n                    const info = liftMessage(refs.rawModule, infoPointer);\\n                    updateWasmInOuts(engineContext);\\n                    refs.engine.globals.fs.onOpenSoundReadStream(operationId, url, info);\\n                };\\n            }\\n            if ('i_openSoundWriteStream' in exportedNames.fs) {\\n                nameMapping.i_openSoundWriteStream = (operationId, urlPointer, infoPointer) => {\\n                    const url = liftString(refs.rawModule, urlPointer);\\n                    const info = liftMessage(refs.rawModule, infoPointer);\\n                    refs.engine.globals.fs.onOpenSoundWriteStream(operationId, url, info);\\n                };\\n            }\\n            if ('i_sendSoundStreamData' in exportedNames.fs) {\\n                nameMapping.i_sendSoundStreamData = (operationId, blockPointer) => {\\n                    const block = readListOfFloatArrays(refs.rawModule, cache.bitDepth, blockPointer);\\n                    refs.engine.globals.fs.onSoundStreamData(operationId, block);\\n                };\\n            }\\n            if ('i_closeSoundStream' in exportedNames.fs) {\\n                nameMapping.i_closeSoundStream = (...args) => refs.engine.globals.fs.onCloseSoundStream(...args);\\n            }\\n        }\\n        return wasmImports;\\n    };\\n\\n    const createEngine = async (wasmBuffer, additionalBindings) => {\\n        const metadata = await readMetadata(wasmBuffer);\\n        const bitDepth = metadata.settings.audio.bitDepth;\\n        const arrayType = getFloatArrayType(bitDepth);\\n        const engineContext = {\\n            refs: {},\\n            metadata: metadata,\\n            cache: {\\n                wasmOutput: new arrayType(0),\\n                wasmInput: new arrayType(0),\\n                arrayType,\\n                bitDepth,\\n                blockSize: 0,\\n            },\\n        };\\n        const wasmImports = {\\n            ...createFsImports(engineContext),\\n            ...ioMsgSendersImports(engineContext),\\n        };\\n        const wasmInstance = await instantiateWasmModule(wasmBuffer, {\\n            input: wasmImports,\\n        });\\n        engineContext.refs.rawModule = proxyWithEngineNameMapping(wasmInstance.exports, metadata.compilation.variableNamesIndex);\\n        const engineBindings = createEngineBindings(engineContext);\\n        const engine = proxyAsModuleWithBindings(engineContext.refs.rawModule, {\\n            ...engineBindings,\\n            ...(additionalBindings || {}),\\n        });\\n        engineContext.refs.engine = engine;\\n        return engine;\\n    };\\n    const createEngineBindings = (engineContext) => {\\n        const { metadata, refs } = engineContext;\\n        const exportedNames = metadata.compilation.variableNamesIndex.globals;\\n        const io = {\\n            messageReceivers: proxyAsModuleWithBindings(refs.rawModule, createIoMessageReceiversBindings(engineContext)),\\n            messageSenders: proxyAsModuleWithBindings(refs.rawModule, createIoMessageSendersBindings(engineContext)),\\n        };\\n        const globalsBindings = {\\n            commons: {\\n                type: 'proxy',\\n                value: proxyAsModuleWithBindings(refs.rawModule, createCommonsBindings(engineContext)),\\n            },\\n        };\\n        if ('fs' in exportedNames) {\\n            const fs = proxyAsModuleWithBindings(refs.rawModule, createFsBindings(engineContext));\\n            globalsBindings.fs = { type: 'proxy', value: fs };\\n        }\\n        return {\\n            ...createEngineLifecycleBindings(engineContext),\\n            metadata: { type: 'proxy', value: metadata },\\n            globals: {\\n                type: 'proxy',\\n                value: proxyAsModuleWithBindings(refs.rawModule, globalsBindings),\\n            },\\n            io: { type: 'proxy', value: io },\\n        };\\n    };\\n\\n    exports.createEngine = createEngine;\\n    exports.createEngineBindings = createEngineBindings;\\n\\n    return exports;\\n\\n})({});\\n\";\n\n  var JAVA_SCRIPT_BINDINGS_CODE = \"var JavaScriptBindings = (function (exports) {\\n    'use strict';\\n\\n    const _proxyGetHandlerThrowIfKeyUnknown = (target, key, path) => {\\n        if (!(key in target)) {\\n            if ([\\n                'toJSON',\\n                'Symbol(Symbol.toStringTag)',\\n                'constructor',\\n                '$typeof',\\n                '$$typeof',\\n                '@@__IMMUTABLE_ITERABLE__@@',\\n                '@@__IMMUTABLE_RECORD__@@',\\n                'then',\\n            ].includes(key)) {\\n                return true;\\n            }\\n            throw new Error(`namespace${path ? ` <${path.keys.join('.')}>` : ''} doesn't know key \\\"${String(key)}\\\"`);\\n        }\\n        return false;\\n    };\\n\\n    const getFloatArrayType = (bitDepth) => bitDepth === 64 ? Float64Array : Float32Array;\\n    const proxyAsModuleWithBindings = (rawModule, bindings) => new Proxy({}, {\\n        get: (_, k) => {\\n            if (bindings.hasOwnProperty(k)) {\\n                const key = String(k);\\n                const bindingSpec = bindings[key];\\n                switch (bindingSpec.type) {\\n                    case 'raw':\\n                        if (k in rawModule) {\\n                            return rawModule[key];\\n                        }\\n                        else {\\n                            throw new Error(`Key ${String(key)} doesn't exist in raw module`);\\n                        }\\n                    case 'proxy':\\n                    case 'callback':\\n                        return bindingSpec.value;\\n                }\\n            }\\n            else {\\n                return undefined;\\n            }\\n        },\\n        has: function (_, k) {\\n            return k in bindings;\\n        },\\n        set: (_, k, newValue) => {\\n            if (bindings.hasOwnProperty(String(k))) {\\n                const key = String(k);\\n                const bindingSpec = bindings[key];\\n                if (bindingSpec.type === 'callback') {\\n                    bindingSpec.value = newValue;\\n                }\\n                else {\\n                    throw new Error(`Binding key ${String(key)} is read-only`);\\n                }\\n            }\\n            else {\\n                throw new Error(`Key ${String(k)} is not defined in bindings`);\\n            }\\n            return true;\\n        },\\n    });\\n    const proxyWithEngineNameMapping = (rawModule, variableNamesIndex) => proxyWithNameMapping(rawModule, {\\n        globals: variableNamesIndex.globals,\\n        io: variableNamesIndex.io,\\n    });\\n    const proxyWithNameMapping = (rawModule, variableNamesIndex) => {\\n        if (typeof variableNamesIndex === 'string') {\\n            return rawModule[variableNamesIndex];\\n        }\\n        else if (typeof variableNamesIndex === 'object') {\\n            return new Proxy(rawModule, {\\n                get: (_, k) => {\\n                    const key = String(k);\\n                    if (key in rawModule) {\\n                        return Reflect.get(rawModule, key);\\n                    }\\n                    else if (key in variableNamesIndex) {\\n                        const nextVariableNames = variableNamesIndex[key];\\n                        return proxyWithNameMapping(rawModule, nextVariableNames);\\n                    }\\n                    else if (_proxyGetHandlerThrowIfKeyUnknown(rawModule, key)) {\\n                        return undefined;\\n                    }\\n                },\\n                has: function (_, k) {\\n                    return k in rawModule || k in variableNamesIndex;\\n                },\\n                set: (_, k, value) => {\\n                    const key = String(k);\\n                    if (key in variableNamesIndex) {\\n                        const variableName = variableNamesIndex[key];\\n                        if (typeof variableName !== 'string') {\\n                            throw new Error(`Failed to set value for key ${String(k)}: variable name is not a string`);\\n                        }\\n                        return Reflect.set(rawModule, variableName, value);\\n                    }\\n                    else {\\n                        throw new Error(`Key ${String(k)} is not defined in raw module`);\\n                    }\\n                },\\n            });\\n        }\\n        else {\\n            throw new Error(`Invalid name mapping`);\\n        }\\n    };\\n\\n    const createFsModule = (rawModule) => {\\n        const fsExportedNames = rawModule.metadata.compilation.variableNamesIndex.globals.fs;\\n        const fs = proxyAsModuleWithBindings(rawModule, {\\n            onReadSoundFile: { type: 'callback', value: () => undefined },\\n            onWriteSoundFile: { type: 'callback', value: () => undefined },\\n            onOpenSoundReadStream: { type: 'callback', value: () => undefined },\\n            onOpenSoundWriteStream: { type: 'callback', value: () => undefined },\\n            onSoundStreamData: { type: 'callback', value: () => undefined },\\n            onCloseSoundStream: { type: 'callback', value: () => undefined },\\n            sendReadSoundFileResponse: {\\n                type: 'proxy',\\n                value: 'x_onReadSoundFileResponse' in fsExportedNames\\n                    ? rawModule.globals.fs.x_onReadSoundFileResponse\\n                    : undefined,\\n            },\\n            sendWriteSoundFileResponse: {\\n                type: 'proxy',\\n                value: 'x_onWriteSoundFileResponse' in fsExportedNames\\n                    ? rawModule.globals.fs.x_onWriteSoundFileResponse\\n                    : undefined,\\n            },\\n            sendSoundStreamData: {\\n                type: 'proxy',\\n                value: 'x_onSoundStreamData' in fsExportedNames\\n                    ? rawModule.globals.fs.x_onSoundStreamData\\n                    : undefined,\\n            },\\n            closeSoundStream: {\\n                type: 'proxy',\\n                value: 'x_onCloseSoundStream' in fsExportedNames\\n                    ? rawModule.globals.fs.x_onCloseSoundStream\\n                    : undefined,\\n            },\\n        });\\n        if ('i_openSoundWriteStream' in fsExportedNames) {\\n            rawModule.globals.fs.i_openSoundWriteStream = (...args) => fs.onOpenSoundWriteStream(...args);\\n        }\\n        if ('i_sendSoundStreamData' in fsExportedNames) {\\n            rawModule.globals.fs.i_sendSoundStreamData = (...args) => fs.onSoundStreamData(...args);\\n        }\\n        if ('i_openSoundReadStream' in fsExportedNames) {\\n            rawModule.globals.fs.i_openSoundReadStream = (...args) => fs.onOpenSoundReadStream(...args);\\n        }\\n        if ('i_closeSoundStream' in fsExportedNames) {\\n            rawModule.globals.fs.i_closeSoundStream = (...args) => fs.onCloseSoundStream(...args);\\n        }\\n        if ('i_writeSoundFile' in fsExportedNames) {\\n            rawModule.globals.fs.i_writeSoundFile = (...args) => fs.onWriteSoundFile(...args);\\n        }\\n        if ('i_readSoundFile' in fsExportedNames) {\\n            rawModule.globals.fs.i_readSoundFile = (...args) => fs.onReadSoundFile(...args);\\n        }\\n        return fs;\\n    };\\n\\n    const createCommonsModule = (rawModule, metadata) => {\\n        const floatArrayType = getFloatArrayType(metadata.settings.audio.bitDepth);\\n        return proxyAsModuleWithBindings(rawModule, {\\n            getArray: {\\n                type: 'proxy',\\n                value: (arrayName) => rawModule.globals.commons.getArray(arrayName),\\n            },\\n            setArray: {\\n                type: 'proxy',\\n                value: (arrayName, array) => rawModule.globals.commons.setArray(arrayName, new floatArrayType(array)),\\n            },\\n        });\\n    };\\n\\n    const compileRawModule = (code) => new Function(`\\n        ${code}\\n        return exports\\n    `)();\\n    const createEngineBindings = (rawModule) => {\\n        const exportedNames = rawModule.metadata.compilation.variableNamesIndex.globals;\\n        const globalsBindings = {\\n            commons: {\\n                type: 'proxy',\\n                value: createCommonsModule(rawModule, rawModule.metadata),\\n            },\\n        };\\n        if ('fs' in exportedNames) {\\n            globalsBindings.fs = { type: 'proxy', value: createFsModule(rawModule) };\\n        }\\n        return {\\n            metadata: { type: 'raw' },\\n            initialize: { type: 'raw' },\\n            dspLoop: { type: 'raw' },\\n            io: { type: 'raw' },\\n            globals: {\\n                type: 'proxy',\\n                value: proxyAsModuleWithBindings(rawModule, globalsBindings),\\n            },\\n        };\\n    };\\n    const createEngine = (code, additionalBindings) => {\\n        const rawModule = compileRawModule(code);\\n        const rawModuleWithNameMapping = proxyWithEngineNameMapping(rawModule, rawModule.metadata.compilation.variableNamesIndex);\\n        return proxyAsModuleWithBindings(rawModule, {\\n            ...createEngineBindings(rawModuleWithNameMapping),\\n            ...(additionalBindings || {}),\\n        });\\n    };\\n\\n    exports.compileRawModule = compileRawModule;\\n    exports.createEngine = createEngine;\\n    exports.createEngineBindings = createEngineBindings;\\n\\n    return exports;\\n\\n})({});\\n\";\n\n  var fetchRetry$1 = function (fetch, defaults) {\n    defaults = defaults || {};\n    if (typeof fetch !== 'function') {\n      throw new ArgumentError('fetch must be a function');\n    }\n\n    if (typeof defaults !== 'object') {\n      throw new ArgumentError('defaults must be an object');\n    }\n\n    if (defaults.retries !== undefined && !isPositiveInteger(defaults.retries)) {\n      throw new ArgumentError('retries must be a positive integer');\n    }\n\n    if (defaults.retryDelay !== undefined && !isPositiveInteger(defaults.retryDelay) && typeof defaults.retryDelay !== 'function') {\n      throw new ArgumentError('retryDelay must be a positive integer or a function returning a positive integer');\n    }\n\n    if (defaults.retryOn !== undefined && !Array.isArray(defaults.retryOn) && typeof defaults.retryOn !== 'function') {\n      throw new ArgumentError('retryOn property expects an array or function');\n    }\n\n    var baseDefaults = {\n      retries: 3,\n      retryDelay: 1000,\n      retryOn: [],\n    };\n\n    defaults = Object.assign(baseDefaults, defaults);\n\n    return function fetchRetry(input, init) {\n      var retries = defaults.retries;\n      var retryDelay = defaults.retryDelay;\n      var retryOn = defaults.retryOn;\n\n      if (init && init.retries !== undefined) {\n        if (isPositiveInteger(init.retries)) {\n          retries = init.retries;\n        } else {\n          throw new ArgumentError('retries must be a positive integer');\n        }\n      }\n\n      if (init && init.retryDelay !== undefined) {\n        if (isPositiveInteger(init.retryDelay) || (typeof init.retryDelay === 'function')) {\n          retryDelay = init.retryDelay;\n        } else {\n          throw new ArgumentError('retryDelay must be a positive integer or a function returning a positive integer');\n        }\n      }\n\n      if (init && init.retryOn) {\n        if (Array.isArray(init.retryOn) || (typeof init.retryOn === 'function')) {\n          retryOn = init.retryOn;\n        } else {\n          throw new ArgumentError('retryOn property expects an array or function');\n        }\n      }\n\n      // eslint-disable-next-line no-undef\n      return new Promise(function (resolve, reject) {\n        var wrappedFetch = function (attempt) {\n          // As of node 18, this is no longer needed since node comes with native support for fetch:\n          /* istanbul ignore next */\n          var _input =\n            typeof Request !== 'undefined' && input instanceof Request\n              ? input.clone()\n              : input;\n          fetch(_input, init)\n            .then(function (response) {\n              if (Array.isArray(retryOn) && retryOn.indexOf(response.status) === -1) {\n                resolve(response);\n              } else if (typeof retryOn === 'function') {\n                try {\n                  // eslint-disable-next-line no-undef\n                  return Promise.resolve(retryOn(attempt, null, response))\n                    .then(function (retryOnResponse) {\n                      if(retryOnResponse) {\n                        retry(attempt, null, response);\n                      } else {\n                        resolve(response);\n                      }\n                    }).catch(reject);\n                } catch (error) {\n                  reject(error);\n                }\n              } else {\n                if (attempt < retries) {\n                  retry(attempt, null, response);\n                } else {\n                  resolve(response);\n                }\n              }\n            })\n            .catch(function (error) {\n              if (typeof retryOn === 'function') {\n                try {\n                  // eslint-disable-next-line no-undef\n                  Promise.resolve(retryOn(attempt, error, null))\n                    .then(function (retryOnResponse) {\n                      if(retryOnResponse) {\n                        retry(attempt, error, null);\n                      } else {\n                        reject(error);\n                      }\n                    })\n                    .catch(function(error) {\n                      reject(error);\n                    });\n                } catch(error) {\n                  reject(error);\n                }\n              } else if (attempt < retries) {\n                retry(attempt, error, null);\n              } else {\n                reject(error);\n              }\n            });\n        };\n\n        function retry(attempt, error, response) {\n          var delay = (typeof retryDelay === 'function') ?\n            retryDelay(attempt, error, response) : retryDelay;\n          setTimeout(function () {\n            wrappedFetch(++attempt);\n          }, delay);\n        }\n\n        wrappedFetch(0);\n      });\n    };\n  };\n\n  function isPositiveInteger(value) {\n    return Number.isInteger(value) && value >= 0;\n  }\n\n  function ArgumentError(message) {\n    this.name = 'ArgumentError';\n    this.message = message;\n  }\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const fetchRetry = fetchRetry$1(fetch);\n  /**\n   * Note : the audio worklet feature is available only in secure context.\n   * This function will fail when used in insecure context (non-https, etc ...)\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/AudioWorklet\n   */\n  const addModule = async (context, processorCode) => {\n      const blob = new Blob([processorCode], { type: 'text/javascript' });\n      const workletProcessorUrl = URL.createObjectURL(blob);\n      return context.audioWorklet.addModule(workletProcessorUrl);\n  };\n  // TODO : testing\n  const fetchFile = async (url) => {\n      let response;\n      try {\n          response = await fetchRetry(url, { retries: 3 });\n      }\n      catch (err) {\n          throw new FileError(response.status, err.toString());\n      }\n      if (!response.ok) {\n          const responseText = await response.text();\n          throw new FileError(response.status, responseText);\n      }\n      return response.arrayBuffer();\n  };\n  const audioBufferToArray = (audioBuffer) => {\n      const sound = [];\n      for (let channel = 0; channel < audioBuffer.numberOfChannels; channel++) {\n          sound.push(audioBuffer.getChannelData(channel));\n      }\n      return sound;\n  };\n  // TODO : testing\n  const fixSoundChannelCount = (sound, targetChannelCount) => {\n      if (sound.length === 0) {\n          throw new Error(`Received empty sound`);\n      }\n      const floatArrayType = sound[0].constructor;\n      const frameCount = sound[0].length;\n      const fixedSound = sound.slice(0, targetChannelCount);\n      while (sound.length < targetChannelCount) {\n          fixedSound.push(new floatArrayType(frameCount));\n      }\n      return fixedSound;\n  };\n  const resolveRelativeUrl = (rootUrl, relativeUrl) => {\n      return new URL(relativeUrl, rootUrl).href;\n  };\n  class FileError extends Error {\n      constructor(status, msg) {\n          super(`Error ${status} : ${msg}`);\n      }\n  }\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  // TODO : manage transferables\n  class WebPdWorkletNode extends AudioWorkletNode {\n      constructor(context) {\n          super(context, 'webpd-node', {\n              numberOfOutputs: 1,\n              outputChannelCount: [2],\n          });\n      }\n      destroy() {\n          this.port.postMessage({\n              type: 'destroy',\n              payload: {},\n          });\n      }\n  }\n  // Concatenate WorkletProcessor code with the Wasm bindings it needs\n  const WEBPD_WORKLET_PROCESSOR_CODE = ASSEMBLY_SCRIPT_WASM_BINDINGS_CODE +\n      ';\\n' +\n      JAVA_SCRIPT_BINDINGS_CODE +\n      ';\\n' +\n      WEB_PD_WORKLET_PROCESSOR_CODE;\n  const registerWebPdWorkletNode = (context) => {\n      return addModule(context, WEBPD_WORKLET_PROCESSOR_CODE);\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const FILES = {};\n  const STREAMS = {};\n  class FakeStream {\n      constructor(url, sound) {\n          this.url = url;\n          this.sound = sound;\n          this.frameCount = sound[0].length;\n          this.readPosition = 0;\n      }\n  }\n  const read = async (url) => {\n      if (FILES[url]) {\n          return FILES[url];\n      }\n      const arrayBuffer = await fetchFile(url);\n      return {\n          type: 'binary',\n          data: arrayBuffer,\n      };\n  };\n  // TODO : testing\n  const readSound = async (url, context) => {\n      let fakeFile = FILES[url] || (await read(url));\n      switch (fakeFile.type) {\n          case 'binary':\n              const audioBuffer = await context.decodeAudioData(fakeFile.data);\n              return audioBufferToArray(audioBuffer);\n          case 'sound':\n              // We copy the data here o it can be manipulated freely by the host.\n              // e.g. if the buffer is sent as transferrable to the node we don't want the original to be transferred.\n              return fakeFile.data.map((array) => array.slice());\n      }\n  };\n  const writeSound = async (sound, url) => {\n      FILES[url] = {\n          type: 'sound',\n          data: sound,\n      };\n  };\n  const readStreamSound = async (operationId, url, channelCount, context) => {\n      const sound = await readSound(url, context);\n      STREAMS[operationId] = new FakeStream(url, fixSoundChannelCount(sound, channelCount));\n      return STREAMS[operationId];\n  };\n  const writeStreamSound = async (operationId, url, channelCount) => {\n      const emptySound = [];\n      for (let channel = 0; channel < channelCount; channel++) {\n          emptySound.push(new Float32Array(0));\n      }\n      STREAMS[operationId] = new FakeStream(url, emptySound);\n      FILES[url] = {\n          type: 'sound',\n          data: emptySound,\n      };\n      return STREAMS[operationId];\n  };\n  const getStream = (operationId) => {\n      return STREAMS[operationId];\n  };\n  const killStream = (operationId) => {\n      console.log('KILL STREAM', operationId);\n      delete STREAMS[operationId];\n  };\n  const pullBlock = (stream, frameCount) => {\n      const block = stream.sound.map((array) => array.slice(stream.readPosition, stream.readPosition + frameCount));\n      stream.readPosition += frameCount;\n      return block;\n  };\n  const pushBlock = (stream, block) => {\n      stream.sound = stream.sound.map((channelData, channel) => {\n          const concatenated = new Float32Array(channelData.length + block[channel].length);\n          concatenated.set(channelData);\n          concatenated.set(block[channel], channelData.length);\n          return concatenated;\n      });\n      stream.frameCount = stream.sound[0].length;\n      FILES[stream.url].data = stream.sound;\n  };\n  var fakeFs = {\n      writeSound,\n      readSound,\n      readStreamSound,\n      writeStreamSound,\n      pullBlock,\n      pushBlock,\n  };\n\n  var closeSoundStream = async (_, payload, __) => {\n      if (payload.functionName === 'onCloseSoundStream') {\n          killStream(payload.arguments[0]);\n      }\n  };\n\n  const _addPath$1 = (parent, key, _path) => {\n      const path = _ensurePath$1(_path);\n      return {\n          keys: [...path.keys, key],\n          parents: [...path.parents, parent],\n      };\n  };\n  const _ensurePath$1 = (path) => path || {\n      keys: [],\n      parents: [],\n  };\n  const _proxySetHandlerReadOnly$1 = () => {\n      throw new Error('This Proxy is read-only.');\n  };\n  const _proxyGetHandlerThrowIfKeyUnknown$1 = (target, key, path) => {\n      if (!(key in target)) {\n          // Whitelist some fields that are undefined but accessed at\n          // some point or another by our code.\n          // TODO : find a better way to do this.\n          if ([\n              'toJSON',\n              'Symbol(Symbol.toStringTag)',\n              'constructor',\n              '$typeof',\n              '$$typeof',\n              '@@__IMMUTABLE_ITERABLE__@@',\n              '@@__IMMUTABLE_RECORD__@@',\n              'then',\n          ].includes(key)) {\n              return true;\n          }\n          throw new Error(`namespace${path ? ` <${path.keys.join('.')}>` : ''} doesn't know key \"${String(key)}\"`);\n      }\n      return false;\n  };\n  const proxyAsAssigner$1 = (spec, _obj, context, _path) => {\n      const path = _path || { keys: [], parents: [] };\n      const obj = proxyAsAssigner$1.ensureValue(_obj, spec, context, path);\n      // If `_path` is provided, assign the new value to the parent object.\n      if (_path) {\n          const parent = _path.parents[_path.parents.length - 1];\n          const key = _path.keys[_path.keys.length - 1];\n          // The only case where we want to overwrite the existing value\n          // is when it was a `null` assigned by `LiteralDefaultNull`, and\n          // we want to set the real value instead.\n          if (!(key in parent) || 'LiteralDefaultNull' in spec) {\n              parent[key] = obj;\n          }\n      }\n      // If the object is a Literal, end of the recursion.\n      if ('Literal' in spec || 'LiteralDefaultNull' in spec) {\n          return obj;\n      }\n      return new Proxy(obj, {\n          get: (_, k) => {\n              const key = String(k);\n              let nextSpec;\n              if ('Index' in spec) {\n                  nextSpec = spec.Index(key, context, path);\n              }\n              else if ('Interface' in spec) {\n                  if (!(key in spec.Interface)) {\n                      throw new Error(`Interface has no entry \"${String(key)}\"`);\n                  }\n                  nextSpec = spec.Interface[key];\n              }\n              else {\n                  throw new Error('no builder');\n              }\n              return proxyAsAssigner$1(nextSpec, \n              // We use this form here instead of `obj[key]` specifically\n              // to allow Assign to play well with `ProtectedIndex`, which\n              // would raise an error if trying to access an undefined key.\n              key in obj ? obj[key] : undefined, context, _addPath$1(obj, key, path));\n          },\n          set: _proxySetHandlerReadOnly$1,\n      });\n  };\n  proxyAsAssigner$1.ensureValue = (_obj, spec, context, _path, _recursionPath) => {\n      if ('Index' in spec) {\n          return (_obj || spec.indexConstructor(context, _ensurePath$1(_path)));\n      }\n      else if ('Interface' in spec) {\n          const obj = (_obj || {});\n          Object.entries(spec.Interface).forEach(([key, nextSpec]) => {\n              obj[key] = proxyAsAssigner$1.ensureValue(obj[key], nextSpec, context, _addPath$1(obj, key, _path), _addPath$1(obj, key, _recursionPath));\n          });\n          return obj;\n      }\n      else if ('Literal' in spec) {\n          return (_obj || spec.Literal(context, _ensurePath$1(_path)));\n      }\n      else if ('LiteralDefaultNull' in spec) {\n          if (!_recursionPath) {\n              return (_obj ||\n                  spec.LiteralDefaultNull(context, _ensurePath$1(_path)));\n          }\n          else {\n              return (_obj || null);\n          }\n      }\n      else {\n          throw new Error('Invalid Assigner');\n      }\n  };\n  proxyAsAssigner$1.Interface = (a) => ({ Interface: a });\n  proxyAsAssigner$1.Index = (f, indexConstructor) => ({\n      Index: f,\n      indexConstructor: indexConstructor || (() => ({})),\n  });\n  proxyAsAssigner$1.Literal = (f) => ({\n      Literal: f,\n  });\n  proxyAsAssigner$1.LiteralDefaultNull = (f) => ({ LiteralDefaultNull: f });\n  // ---------------------------- proxyAsProtectedIndex ---------------------------- //\n  /**\n   * Helper to declare namespace objects enforcing stricter access rules.\n   * Specifically, it forbids :\n   * - reading an unknown property.\n   * - trying to overwrite an existing property.\n   */\n  const proxyAsProtectedIndex$1 = (namespace, path) => {\n      return new Proxy(namespace, {\n          get: (target, k) => {\n              const key = String(k);\n              if (_proxyGetHandlerThrowIfKeyUnknown$1(target, key, path)) {\n                  return undefined;\n              }\n              return target[key];\n          },\n          set: (target, k, newValue) => {\n              const key = _trimDollarKey$1(String(k));\n              if (target.hasOwnProperty(key)) {\n                  throw new Error(`Key \"${String(key)}\" is protected and cannot be overwritten.`);\n              }\n              else {\n                  target[key] = newValue;\n              }\n              return newValue;\n          },\n      });\n  };\n  const _trimDollarKey$1 = (key) => {\n      const match = /\\$(.*)/.exec(key);\n      if (!match) {\n          return key;\n      }\n      else {\n          return match[1];\n      }\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const getNode$1 = (graph, nodeId) => {\n      const node = graph[nodeId];\n      if (node) {\n          return node;\n      }\n      throw new Error(`Node \"${nodeId}\" not found in graph`);\n  };\n\n  /** Helper to get node implementation or throw an error if not implemented. */\n  const getNodeImplementation$1 = (nodeImplementations, nodeType) => {\n      const nodeImplementation = nodeImplementations[nodeType];\n      if (!nodeImplementation) {\n          throw new Error(`node [${nodeType}] is not implemented`);\n      }\n      return {\n          dependencies: [],\n          ...nodeImplementation,\n      };\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  /** Generate an integer series from 0 to `count` (non-inclusive). */\n  const countTo$1 = (count) => {\n      const results = [];\n      for (let i = 0; i < count; i++) {\n          results.push(i);\n      }\n      return results;\n  };\n\n  const Sequence$1 = (content) => ({\n      astType: 'Sequence',\n      content: _processRawContent$1(_intersperse$1(content, countTo$1(content.length - 1).map(() => '\\n'))),\n  });\n  const ast$1 = (strings, ...content) => _preventToString$1({\n      astType: 'Sequence',\n      content: _processRawContent$1(_intersperse$1(strings, content)),\n  });\n  const _processRawContent$1 = (content) => {\n      // 1. Flatten arrays and AstSequence, filter out nulls, and convert numbers to strings\n      // Basically converts input to an Array<AstContent>.\n      const flattenedAndFiltered = content.flatMap((element) => {\n          if (typeof element === 'string') {\n              return [element];\n          }\n          else if (typeof element === 'number') {\n              return [element.toString()];\n          }\n          else {\n              if (element === null) {\n                  return [];\n              }\n              else if (Array.isArray(element)) {\n                  return _processRawContent$1(_intersperse$1(element, countTo$1(element.length - 1).map(() => '\\n')));\n              }\n              else if (typeof element === 'object' &&\n                  element.astType === 'Sequence') {\n                  return element.content;\n              }\n              else {\n                  return [element];\n              }\n          }\n      });\n      // 2. Combine adjacent strings\n      const [combinedContent, remainingString] = flattenedAndFiltered.reduce(([combinedContent, currentString], element) => {\n          if (typeof element === 'string') {\n              return [combinedContent, currentString + element];\n          }\n          else {\n              if (currentString.length) {\n                  return [[...combinedContent, currentString, element], ''];\n              }\n              else {\n                  return [[...combinedContent, element], ''];\n              }\n          }\n      }, [[], '']);\n      if (remainingString.length) {\n          combinedContent.push(remainingString);\n      }\n      return combinedContent;\n  };\n  /**\n   * Intersperse content from array1 with content from array2.\n   * `array1.length` must be equal to `array2.length + 1`.\n   */\n  const _intersperse$1 = (array1, array2) => {\n      if (array1.length === 0) {\n          return [];\n      }\n      return array1.slice(1).reduce((combinedContent, element, i) => {\n          return combinedContent.concat([array2[i], element]);\n      }, [array1[0]]);\n  };\n  /**\n   * Prevents AST elements from being rendered as a string, as this is\n   * most likely an error due to unproper use of `ast`.\n   * Deacivated. Activate for debugging by uncommenting the line below.\n   */\n  const _preventToString$1 = (element) => ({\n      ...element,\n      // Uncomment this to activate\n      // toString: () => { throw new Error(`Rendering element ${elemennt.astType} as string is probably an error`) }\n  });\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  // ---------------------------- VariableNamesIndex ---------------------------- //\n  const NS$1 = {\n      GLOBALS: 'G',\n      NODES: 'N',\n      NODE_TYPES: 'NT',\n      IO: 'IO',\n      COLD: 'COLD',\n  };\n  proxyAsAssigner$1.Interface({\n      nodes: proxyAsAssigner$1.Index((nodeId) => proxyAsAssigner$1.Interface({\n          signalOuts: proxyAsAssigner$1.Index((portletId) => proxyAsAssigner$1.Literal(() => _name$1(NS$1.NODES, nodeId, 'outs', portletId))),\n          messageSenders: proxyAsAssigner$1.Index((portletId) => proxyAsAssigner$1.Literal(() => _name$1(NS$1.NODES, nodeId, 'snds', portletId))),\n          messageReceivers: proxyAsAssigner$1.Index((portletId) => proxyAsAssigner$1.Literal(() => _name$1(NS$1.NODES, nodeId, 'rcvs', portletId))),\n          state: proxyAsAssigner$1.LiteralDefaultNull(() => _name$1(NS$1.NODES, nodeId, 'state')),\n      })),\n      nodeImplementations: proxyAsAssigner$1.Index((nodeType, { nodeImplementations }) => {\n          const nodeImplementation = getNodeImplementation$1(nodeImplementations, nodeType);\n          const nodeTypePrefix = (nodeImplementation.flags\n              ? nodeImplementation.flags.alphaName\n              : null) || nodeType;\n          return proxyAsAssigner$1.Index((name) => proxyAsAssigner$1.Literal(() => _name$1(NS$1.NODE_TYPES, nodeTypePrefix, name)));\n      }),\n      globals: proxyAsAssigner$1.Index((ns) => proxyAsAssigner$1.Index((name) => {\n          if (['fs'].includes(ns)) {\n              return proxyAsAssigner$1.Literal(() => _name$1(NS$1.GLOBALS, ns, name));\n              // We don't prefix stdlib core module, because these are super\n              // basic functions that are always included in the global scope.\n          }\n          else if (ns === 'core') {\n              return proxyAsAssigner$1.Literal(() => name);\n          }\n          else {\n              return proxyAsAssigner$1.Literal(() => _name$1(NS$1.GLOBALS, ns, name));\n          }\n      })),\n      io: proxyAsAssigner$1.Interface({\n          messageReceivers: proxyAsAssigner$1.Index((nodeId) => proxyAsAssigner$1.Index((inletId) => proxyAsAssigner$1.Literal(() => _name$1(NS$1.IO, 'rcv', nodeId, inletId)))),\n          messageSenders: proxyAsAssigner$1.Index((nodeId) => proxyAsAssigner$1.Index((outletId) => proxyAsAssigner$1.Literal(() => _name$1(NS$1.IO, 'snd', nodeId, outletId)))),\n      }),\n      coldDspGroups: proxyAsAssigner$1.Index((groupId) => proxyAsAssigner$1.Literal(() => _name$1(NS$1.COLD, groupId))),\n  });\n  // ---------------------------- PrecompiledCode ---------------------------- //\n  proxyAsAssigner$1.Interface({\n      graph: proxyAsAssigner$1.Literal((_, path) => ({\n          fullTraversal: [],\n          hotDspGroup: {\n              traversal: [],\n              outNodesIds: [],\n          },\n          coldDspGroups: proxyAsProtectedIndex$1({}, path),\n      })),\n      nodeImplementations: proxyAsAssigner$1.Index((nodeType, { nodeImplementations }) => proxyAsAssigner$1.Literal(() => ({\n          nodeImplementation: getNodeImplementation$1(nodeImplementations, nodeType),\n          stateClass: null,\n          core: null,\n      })), (_, path) => proxyAsProtectedIndex$1({}, path)),\n      nodes: proxyAsAssigner$1.Index((nodeId, { graph }) => proxyAsAssigner$1.Literal(() => ({\n          nodeType: getNode$1(graph, nodeId).type,\n          messageReceivers: {},\n          messageSenders: {},\n          signalOuts: {},\n          signalIns: {},\n          initialization: ast$1 ``,\n          dsp: {\n              loop: ast$1 ``,\n              inlets: {},\n          },\n          state: null,\n      })), (_, path) => proxyAsProtectedIndex$1({}, path)),\n      dependencies: proxyAsAssigner$1.Literal(() => ({\n          imports: [],\n          exports: [],\n          ast: Sequence$1([]),\n      })),\n      io: proxyAsAssigner$1.Interface({\n          messageReceivers: proxyAsAssigner$1.Index((_) => proxyAsAssigner$1.Literal((_, path) => proxyAsProtectedIndex$1({}, path)), (_, path) => proxyAsProtectedIndex$1({}, path)),\n          messageSenders: proxyAsAssigner$1.Index((_) => proxyAsAssigner$1.Literal((_, path) => proxyAsProtectedIndex$1({}, path)), (_, path) => proxyAsProtectedIndex$1({}, path)),\n      }),\n  });\n  // ---------------------------- MISC ---------------------------- //\n  const _name$1 = (...parts) => parts.map(assertValidNamePart$1).join('_');\n  const assertValidNamePart$1 = (namePart) => {\n      const isInvalid = !VALID_NAME_PART_REGEXP$1.exec(namePart);\n      if (isInvalid) {\n          throw new Error(`Invalid variable name for code generation \"${namePart}\"`);\n      }\n      return namePart;\n  };\n  const VALID_NAME_PART_REGEXP$1 = /^[a-zA-Z0-9_]+$/;\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const FS_OPERATION_SUCCESS = 0;\n  const FS_OPERATION_FAILURE = 1;\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  var readSoundFile = async (node, payload, settings) => {\n      if (payload.functionName === 'onReadSoundFile') {\n          const [operationId, url, [channelCount]] = payload.arguments;\n          const absoluteUrl = resolveRelativeUrl(settings.rootUrl, url);\n          let operationStatus = FS_OPERATION_SUCCESS;\n          let sound = null;\n          try {\n              sound = await fakeFs.readSound(absoluteUrl, node.context);\n          }\n          catch (err) {\n              operationStatus = FS_OPERATION_FAILURE;\n              console.error(err);\n          }\n          if (sound) {\n              sound = fixSoundChannelCount(sound, channelCount);\n          }\n          node.port.postMessage({\n              type: 'fs',\n              payload: {\n                  functionName: 'sendReadSoundFileResponse',\n                  arguments: [operationId, operationStatus, sound],\n              },\n          }, \n          // Add as transferables to avoid copies between threads\n          sound.map((array) => array.buffer));\n      }\n      else if (payload.functionName === 'sendReadSoundFileResponse_return') ;\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const BUFFER_HIGH = 10 * 44100;\n  const BUFFER_LOW = BUFFER_HIGH / 2;\n  var readSoundStream = async (node, payload, settings) => {\n      if (payload.functionName === 'onOpenSoundReadStream') {\n          const [operationId, url, [channelCount]] = payload.arguments;\n          try {\n              const absoluteUrl = resolveRelativeUrl(settings.rootUrl, url);\n              await fakeFs.readStreamSound(operationId, absoluteUrl, channelCount, node.context);\n          }\n          catch (err) {\n              console.error(err);\n              node.port.postMessage({\n                  type: 'fs',\n                  payload: {\n                      functionName: 'closeSoundStream',\n                      arguments: [operationId, FS_OPERATION_FAILURE],\n                  },\n              });\n              return;\n          }\n          streamLoop(node, operationId, 0);\n      }\n      else if (payload.functionName === 'sendSoundStreamData_return') {\n          const stream = getStream(payload.operationId);\n          if (!stream) {\n              throw new Error(`unknown stream ${payload.operationId}`);\n          }\n          streamLoop(node, payload.operationId, payload.returned);\n      }\n      else if (payload.functionName === 'closeSoundStream_return') {\n          const stream = getStream(payload.operationId);\n          if (stream) {\n              killStream(payload.operationId);\n          }\n      }\n  };\n  const streamLoop = (node, operationId, framesAvailableInEngine) => {\n      const sampleRate = node.context.sampleRate;\n      const secondsToThreshold = Math.max(framesAvailableInEngine - BUFFER_LOW, 10) / sampleRate;\n      const framesToSend = BUFFER_HIGH -\n          (framesAvailableInEngine - secondsToThreshold * sampleRate);\n      setTimeout(() => {\n          const stream = getStream(operationId);\n          if (!stream) {\n              console.log(`stream ${operationId} was maybe closed`);\n              return;\n          }\n          if (stream.readPosition < stream.frameCount) {\n              const block = pullBlock(stream, framesToSend);\n              node.port.postMessage({\n                  type: 'fs',\n                  payload: {\n                      functionName: 'sendSoundStreamData',\n                      arguments: [operationId, block],\n                  },\n              }, \n              // Add as transferables to avoid copies between threads\n              block.map((array) => array.buffer));\n          }\n          else {\n              node.port.postMessage({\n                  type: 'fs',\n                  payload: {\n                      functionName: 'closeSoundStream',\n                      arguments: [operationId, FS_OPERATION_SUCCESS],\n                  },\n              });\n          }\n      }, secondsToThreshold * 1000);\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  var writeSoundFile = async (node, payload, settings) => {\n      if (payload.functionName === 'onWriteSoundFile') {\n          const [operationId, sound, url, [channelCount]] = payload.arguments;\n          const fixedSound = fixSoundChannelCount(sound, channelCount);\n          const absoluteUrl = resolveRelativeUrl(settings.rootUrl, url);\n          await fakeFs.writeSound(fixedSound, absoluteUrl);\n          let operationStatus = FS_OPERATION_SUCCESS;\n          node.port.postMessage({\n              type: 'fs',\n              payload: {\n                  functionName: 'sendWriteSoundFileResponse',\n                  arguments: [operationId, operationStatus],\n              },\n          });\n      }\n      else if (payload.functionName === 'sendWriteSoundFileResponse_return') ;\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  var writeSoundStream = async (_, payload, settings) => {\n      if (payload.functionName === 'onOpenSoundWriteStream') {\n          const [operationId, url, [channelCount]] = payload.arguments;\n          const absoluteUrl = resolveRelativeUrl(settings.rootUrl, url);\n          await fakeFs.writeStreamSound(operationId, absoluteUrl, channelCount);\n      }\n      else if (payload.functionName === 'onSoundStreamData') {\n          const [operationId, sound] = payload.arguments;\n          const stream = getStream(operationId);\n          if (!stream) {\n              throw new Error(`unknown stream ${operationId}`);\n          }\n          pushBlock(stream, sound);\n      }\n      else if (payload.functionName === 'closeSoundStream_return') {\n          const stream = getStream(payload.operationId);\n          if (stream) {\n              killStream(payload.operationId);\n          }\n      }\n  };\n\n  var index = async (node, messageEvent, settings) => {\n      const message = messageEvent.data;\n      if (message.type !== 'fs') {\n          throw new Error(`Unknown message type from node ${message.type}`);\n      }\n      const { payload } = message;\n      if (payload.functionName === 'onReadSoundFile' ||\n          payload.functionName === 'sendReadSoundFileResponse_return') {\n          readSoundFile(node, payload, settings);\n      }\n      else if (payload.functionName === 'onOpenSoundReadStream' ||\n          payload.functionName === 'sendSoundStreamData_return') {\n          readSoundStream(node, payload, settings);\n      }\n      else if (payload.functionName === 'onWriteSoundFile' ||\n          payload.functionName === 'sendWriteSoundFileResponse_return') {\n          writeSoundFile(node, payload, settings);\n      }\n      else if (payload.functionName === 'onOpenSoundWriteStream' ||\n          payload.functionName === 'onSoundStreamData') {\n          writeSoundStream(node, payload, settings);\n      }\n      else if (payload.functionName === 'closeSoundStream_return') {\n          writeSoundStream(node, payload, settings);\n          readSoundStream(node, payload, settings);\n      }\n      else if (payload.functionName === 'onCloseSoundStream') {\n          closeSoundStream(node, payload);\n      }\n      else {\n          throw new Error(`Unknown callback ${payload.functionName}`);\n      }\n  };\n\n  var initialize = (...args) => {\n      return registerWebPdWorkletNode(...args);\n  };\n\n  const urlDirName = (url) => {\n      if (isExternalUrl(url)) {\n          return new URL('.', url).href;\n      }\n      else {\n          return new URL('.', new URL(url, document.URL).href).href;\n      }\n  };\n  const isExternalUrl = (urlString) => {\n      try {\n          const url = new URL(urlString);\n          if (url.origin !== new URL(document.URL, document.baseURI).origin) {\n              return true;\n          }\n      }\n      catch (_e) {\n          new URL(urlString, document.baseURI);\n      }\n      return false;\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  /** Generate an integer series from 0 to `count` (non-inclusive). */\n  const countTo = (count) => {\n      const results = [];\n      for (let i = 0; i < count; i++) {\n          results.push(i);\n      }\n      return results;\n  };\n\n  const Sequence = (content) => ({\n      astType: 'Sequence',\n      content: _processRawContent(_intersperse(content, countTo(content.length - 1).map(() => '\\n'))),\n  });\n  const ast = (strings, ...content) => _preventToString({\n      astType: 'Sequence',\n      content: _processRawContent(_intersperse(strings, content)),\n  });\n  const _processRawContent = (content) => {\n      // 1. Flatten arrays and AstSequence, filter out nulls, and convert numbers to strings\n      // Basically converts input to an Array<AstContent>.\n      const flattenedAndFiltered = content.flatMap((element) => {\n          if (typeof element === 'string') {\n              return [element];\n          }\n          else if (typeof element === 'number') {\n              return [element.toString()];\n          }\n          else {\n              if (element === null) {\n                  return [];\n              }\n              else if (Array.isArray(element)) {\n                  return _processRawContent(_intersperse(element, countTo(element.length - 1).map(() => '\\n')));\n              }\n              else if (typeof element === 'object' &&\n                  element.astType === 'Sequence') {\n                  return element.content;\n              }\n              else {\n                  return [element];\n              }\n          }\n      });\n      // 2. Combine adjacent strings\n      const [combinedContent, remainingString] = flattenedAndFiltered.reduce(([combinedContent, currentString], element) => {\n          if (typeof element === 'string') {\n              return [combinedContent, currentString + element];\n          }\n          else {\n              if (currentString.length) {\n                  return [[...combinedContent, currentString, element], ''];\n              }\n              else {\n                  return [[...combinedContent, element], ''];\n              }\n          }\n      }, [[], '']);\n      if (remainingString.length) {\n          combinedContent.push(remainingString);\n      }\n      return combinedContent;\n  };\n  /**\n   * Intersperse content from array1 with content from array2.\n   * `array1.length` must be equal to `array2.length + 1`.\n   */\n  const _intersperse = (array1, array2) => {\n      if (array1.length === 0) {\n          return [];\n      }\n      return array1.slice(1).reduce((combinedContent, element, i) => {\n          return combinedContent.concat([array2[i], element]);\n      }, [array1[0]]);\n  };\n  /**\n   * Prevents AST elements from being rendered as a string, as this is\n   * most likely an error due to unproper use of `ast`.\n   * Deacivated. Activate for debugging by uncommenting the line below.\n   */\n  const _preventToString = (element) => ({\n      ...element,\n      // Uncomment this to activate\n      // toString: () => { throw new Error(`Rendering element ${elemennt.astType} as string is probably an error`) }\n  });\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  const getNode = (graph, nodeId) => {\n      const node = graph[nodeId];\n      if (node) {\n          return node;\n      }\n      throw new Error(`Node \"${nodeId}\" not found in graph`);\n  };\n\n  /** Helper to get node implementation or throw an error if not implemented. */\n  const getNodeImplementation = (nodeImplementations, nodeType) => {\n      const nodeImplementation = nodeImplementations[nodeType];\n      if (!nodeImplementation) {\n          throw new Error(`node [${nodeType}] is not implemented`);\n      }\n      return {\n          dependencies: [],\n          ...nodeImplementation,\n      };\n  };\n\n  const _addPath = (parent, key, _path) => {\n      const path = _ensurePath(_path);\n      return {\n          keys: [...path.keys, key],\n          parents: [...path.parents, parent],\n      };\n  };\n  const _ensurePath = (path) => path || {\n      keys: [],\n      parents: [],\n  };\n  const _proxySetHandlerReadOnly = () => {\n      throw new Error('This Proxy is read-only.');\n  };\n  const _proxyGetHandlerThrowIfKeyUnknown = (target, key, path) => {\n      if (!(key in target)) {\n          // Whitelist some fields that are undefined but accessed at\n          // some point or another by our code.\n          // TODO : find a better way to do this.\n          if ([\n              'toJSON',\n              'Symbol(Symbol.toStringTag)',\n              'constructor',\n              '$typeof',\n              '$$typeof',\n              '@@__IMMUTABLE_ITERABLE__@@',\n              '@@__IMMUTABLE_RECORD__@@',\n              'then',\n          ].includes(key)) {\n              return true;\n          }\n          throw new Error(`namespace${path ? ` <${path.keys.join('.')}>` : ''} doesn't know key \"${String(key)}\"`);\n      }\n      return false;\n  };\n  const proxyAsAssigner = (spec, _obj, context, _path) => {\n      const path = _path || { keys: [], parents: [] };\n      const obj = proxyAsAssigner.ensureValue(_obj, spec, context, path);\n      // If `_path` is provided, assign the new value to the parent object.\n      if (_path) {\n          const parent = _path.parents[_path.parents.length - 1];\n          const key = _path.keys[_path.keys.length - 1];\n          // The only case where we want to overwrite the existing value\n          // is when it was a `null` assigned by `LiteralDefaultNull`, and\n          // we want to set the real value instead.\n          if (!(key in parent) || 'LiteralDefaultNull' in spec) {\n              parent[key] = obj;\n          }\n      }\n      // If the object is a Literal, end of the recursion.\n      if ('Literal' in spec || 'LiteralDefaultNull' in spec) {\n          return obj;\n      }\n      return new Proxy(obj, {\n          get: (_, k) => {\n              const key = String(k);\n              let nextSpec;\n              if ('Index' in spec) {\n                  nextSpec = spec.Index(key, context, path);\n              }\n              else if ('Interface' in spec) {\n                  if (!(key in spec.Interface)) {\n                      throw new Error(`Interface has no entry \"${String(key)}\"`);\n                  }\n                  nextSpec = spec.Interface[key];\n              }\n              else {\n                  throw new Error('no builder');\n              }\n              return proxyAsAssigner(nextSpec, \n              // We use this form here instead of `obj[key]` specifically\n              // to allow Assign to play well with `ProtectedIndex`, which\n              // would raise an error if trying to access an undefined key.\n              key in obj ? obj[key] : undefined, context, _addPath(obj, key, path));\n          },\n          set: _proxySetHandlerReadOnly,\n      });\n  };\n  proxyAsAssigner.ensureValue = (_obj, spec, context, _path, _recursionPath) => {\n      if ('Index' in spec) {\n          return (_obj || spec.indexConstructor(context, _ensurePath(_path)));\n      }\n      else if ('Interface' in spec) {\n          const obj = (_obj || {});\n          Object.entries(spec.Interface).forEach(([key, nextSpec]) => {\n              obj[key] = proxyAsAssigner.ensureValue(obj[key], nextSpec, context, _addPath(obj, key, _path), _addPath(obj, key, _recursionPath));\n          });\n          return obj;\n      }\n      else if ('Literal' in spec) {\n          return (_obj || spec.Literal(context, _ensurePath(_path)));\n      }\n      else if ('LiteralDefaultNull' in spec) {\n          if (!_recursionPath) {\n              return (_obj ||\n                  spec.LiteralDefaultNull(context, _ensurePath(_path)));\n          }\n          else {\n              return (_obj || null);\n          }\n      }\n      else {\n          throw new Error('Invalid Assigner');\n      }\n  };\n  proxyAsAssigner.Interface = (a) => ({ Interface: a });\n  proxyAsAssigner.Index = (f, indexConstructor) => ({\n      Index: f,\n      indexConstructor: indexConstructor || (() => ({})),\n  });\n  proxyAsAssigner.Literal = (f) => ({\n      Literal: f,\n  });\n  proxyAsAssigner.LiteralDefaultNull = (f) => ({ LiteralDefaultNull: f });\n  // ---------------------------- proxyAsProtectedIndex ---------------------------- //\n  /**\n   * Helper to declare namespace objects enforcing stricter access rules.\n   * Specifically, it forbids :\n   * - reading an unknown property.\n   * - trying to overwrite an existing property.\n   */\n  const proxyAsProtectedIndex = (namespace, path) => {\n      return new Proxy(namespace, {\n          get: (target, k) => {\n              const key = String(k);\n              if (_proxyGetHandlerThrowIfKeyUnknown(target, key, path)) {\n                  return undefined;\n              }\n              return target[key];\n          },\n          set: (target, k, newValue) => {\n              const key = _trimDollarKey(String(k));\n              if (target.hasOwnProperty(key)) {\n                  throw new Error(`Key \"${String(key)}\" is protected and cannot be overwritten.`);\n              }\n              else {\n                  target[key] = newValue;\n              }\n              return newValue;\n          },\n      });\n  };\n  const _trimDollarKey = (key) => {\n      const match = /\\$(.*)/.exec(key);\n      if (!match) {\n          return key;\n      }\n      else {\n          return match[1];\n      }\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  // ---------------------------- VariableNamesIndex ---------------------------- //\n  const NS = {\n      GLOBALS: 'G',\n      NODES: 'N',\n      NODE_TYPES: 'NT',\n      IO: 'IO',\n      COLD: 'COLD',\n  };\n  proxyAsAssigner.Interface({\n      nodes: proxyAsAssigner.Index((nodeId) => proxyAsAssigner.Interface({\n          signalOuts: proxyAsAssigner.Index((portletId) => proxyAsAssigner.Literal(() => _name(NS.NODES, nodeId, 'outs', portletId))),\n          messageSenders: proxyAsAssigner.Index((portletId) => proxyAsAssigner.Literal(() => _name(NS.NODES, nodeId, 'snds', portletId))),\n          messageReceivers: proxyAsAssigner.Index((portletId) => proxyAsAssigner.Literal(() => _name(NS.NODES, nodeId, 'rcvs', portletId))),\n          state: proxyAsAssigner.LiteralDefaultNull(() => _name(NS.NODES, nodeId, 'state')),\n      })),\n      nodeImplementations: proxyAsAssigner.Index((nodeType, { nodeImplementations }) => {\n          const nodeImplementation = getNodeImplementation(nodeImplementations, nodeType);\n          const nodeTypePrefix = (nodeImplementation.flags\n              ? nodeImplementation.flags.alphaName\n              : null) || nodeType;\n          return proxyAsAssigner.Index((name) => proxyAsAssigner.Literal(() => _name(NS.NODE_TYPES, nodeTypePrefix, name)));\n      }),\n      globals: proxyAsAssigner.Index((ns) => proxyAsAssigner.Index((name) => {\n          if (['fs'].includes(ns)) {\n              return proxyAsAssigner.Literal(() => _name(NS.GLOBALS, ns, name));\n              // We don't prefix stdlib core module, because these are super\n              // basic functions that are always included in the global scope.\n          }\n          else if (ns === 'core') {\n              return proxyAsAssigner.Literal(() => name);\n          }\n          else {\n              return proxyAsAssigner.Literal(() => _name(NS.GLOBALS, ns, name));\n          }\n      })),\n      io: proxyAsAssigner.Interface({\n          messageReceivers: proxyAsAssigner.Index((nodeId) => proxyAsAssigner.Index((inletId) => proxyAsAssigner.Literal(() => _name(NS.IO, 'rcv', nodeId, inletId)))),\n          messageSenders: proxyAsAssigner.Index((nodeId) => proxyAsAssigner.Index((outletId) => proxyAsAssigner.Literal(() => _name(NS.IO, 'snd', nodeId, outletId)))),\n      }),\n      coldDspGroups: proxyAsAssigner.Index((groupId) => proxyAsAssigner.Literal(() => _name(NS.COLD, groupId))),\n  });\n  // ---------------------------- PrecompiledCode ---------------------------- //\n  proxyAsAssigner.Interface({\n      graph: proxyAsAssigner.Literal((_, path) => ({\n          fullTraversal: [],\n          hotDspGroup: {\n              traversal: [],\n              outNodesIds: [],\n          },\n          coldDspGroups: proxyAsProtectedIndex({}, path),\n      })),\n      nodeImplementations: proxyAsAssigner.Index((nodeType, { nodeImplementations }) => proxyAsAssigner.Literal(() => ({\n          nodeImplementation: getNodeImplementation(nodeImplementations, nodeType),\n          stateClass: null,\n          core: null,\n      })), (_, path) => proxyAsProtectedIndex({}, path)),\n      nodes: proxyAsAssigner.Index((nodeId, { graph }) => proxyAsAssigner.Literal(() => ({\n          nodeType: getNode(graph, nodeId).type,\n          messageReceivers: {},\n          messageSenders: {},\n          signalOuts: {},\n          signalIns: {},\n          initialization: ast ``,\n          dsp: {\n              loop: ast ``,\n              inlets: {},\n          },\n          state: null,\n      })), (_, path) => proxyAsProtectedIndex({}, path)),\n      dependencies: proxyAsAssigner.Literal(() => ({\n          imports: [],\n          exports: [],\n          ast: Sequence([]),\n      })),\n      io: proxyAsAssigner.Interface({\n          messageReceivers: proxyAsAssigner.Index((_) => proxyAsAssigner.Literal((_, path) => proxyAsProtectedIndex({}, path)), (_, path) => proxyAsProtectedIndex({}, path)),\n          messageSenders: proxyAsAssigner.Index((_) => proxyAsAssigner.Literal((_, path) => proxyAsProtectedIndex({}, path)), (_, path) => proxyAsProtectedIndex({}, path)),\n      }),\n  });\n  // ---------------------------- MISC ---------------------------- //\n  const _name = (...parts) => parts.map(assertValidNamePart).join('_');\n  const assertValidNamePart = (namePart) => {\n      const isInvalid = !VALID_NAME_PART_REGEXP.exec(namePart);\n      if (isInvalid) {\n          throw new Error(`Invalid variable name for code generation \"${namePart}\"`);\n      }\n      return namePart;\n  };\n  const VALID_NAME_PART_REGEXP = /^[a-zA-Z0-9_]+$/;\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  // NOTE : not necessarily the most logical place to put this function, but we need it here\n  // cause it's imported by the bindings.\n  const getFloatArrayType = (bitDepth) => bitDepth === 64 ? Float64Array : Float32Array;\n  const proxyAsModuleWithBindings = (rawModule, bindings) => \n  // Use empty object on proxy cause proxy cannot redefine access of member of its target,\n  // which causes issues for example for WebAssembly exports.\n  // See : https://stackoverflow.com/questions/75148897/get-on-proxy-property-items-is-a-read-only-and-non-configurable-data-proper\n  new Proxy({}, {\n      get: (_, k) => {\n          if (bindings.hasOwnProperty(k)) {\n              const key = String(k);\n              const bindingSpec = bindings[key];\n              switch (bindingSpec.type) {\n                  case 'raw':\n                      // Cannot use hasOwnProperty here cause not defined in wasm exports object\n                      if (k in rawModule) {\n                          return rawModule[key];\n                      }\n                      else {\n                          throw new Error(`Key ${String(key)} doesn't exist in raw module`);\n                      }\n                  case 'proxy':\n                  case 'callback':\n                      return bindingSpec.value;\n              }\n              // We need to return undefined here for compatibility with various APIs\n              // which inspect object's attributes.\n          }\n          else {\n              return undefined;\n          }\n      },\n      has: function (_, k) {\n          return k in bindings;\n      },\n      set: (_, k, newValue) => {\n          if (bindings.hasOwnProperty(String(k))) {\n              const key = String(k);\n              const bindingSpec = bindings[key];\n              if (bindingSpec.type === 'callback') {\n                  bindingSpec.value = newValue;\n              }\n              else {\n                  throw new Error(`Binding key ${String(key)} is read-only`);\n              }\n          }\n          else {\n              throw new Error(`Key ${String(k)} is not defined in bindings`);\n          }\n          return true;\n      },\n  });\n  /**\n   * Reverse-maps exported variable names from `rawModule` according to the mapping defined\n   * in `variableNamesIndex`.\n   *\n   * For example with :\n   *\n   * ```\n   * const variableNamesIndex = {\n   *     globals: {\n   *         // ...\n   *         fs: {\n   *             // ...\n   *             readFile: 'g_fs_readFile'\n   *         },\n   *     }\n   * }\n   * ```\n   *\n   * The function `g_fs_readFile` (if it is exported properly by the raw module), will then\n   * be available on the returned object at path `.globals.fs.readFile`.\n   */\n  const proxyWithEngineNameMapping = (rawModule, variableNamesIndex) => proxyWithNameMapping(rawModule, {\n      globals: variableNamesIndex.globals,\n      io: variableNamesIndex.io,\n  });\n  const proxyWithNameMapping = (rawModule, variableNamesIndex) => {\n      if (typeof variableNamesIndex === 'string') {\n          return rawModule[variableNamesIndex];\n      }\n      else if (typeof variableNamesIndex === 'object') {\n          return new Proxy(rawModule, {\n              get: (_, k) => {\n                  const key = String(k);\n                  if (key in rawModule) {\n                      return Reflect.get(rawModule, key);\n                  }\n                  else if (key in variableNamesIndex) {\n                      const nextVariableNames = variableNamesIndex[key];\n                      return proxyWithNameMapping(rawModule, nextVariableNames);\n                  }\n                  else if (_proxyGetHandlerThrowIfKeyUnknown(rawModule, key)) {\n                      return undefined;\n                  }\n              },\n              has: function (_, k) {\n                  return k in rawModule || k in variableNamesIndex;\n              },\n              set: (_, k, value) => {\n                  const key = String(k);\n                  if (key in variableNamesIndex) {\n                      const variableName = variableNamesIndex[key];\n                      if (typeof variableName !== 'string') {\n                          throw new Error(`Failed to set value for key ${String(k)}: variable name is not a string`);\n                      }\n                      return Reflect.set(rawModule, variableName, value);\n                  }\n                  else {\n                      throw new Error(`Key ${String(k)} is not defined in raw module`);\n                  }\n              },\n          });\n      }\n      else {\n          throw new Error(`Invalid name mapping`);\n      }\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  /** @copyright Assemblyscript ESM bindings */\n  const liftString = (rawModule, pointer) => {\n      if (!pointer) {\n          throw new Error('Cannot lift a null pointer');\n      }\n      pointer = pointer >>> 0;\n      const end = (pointer +\n          new Uint32Array(rawModule.memory.buffer)[(pointer - 4) >>> 2]) >>>\n          1;\n      const memoryU16 = new Uint16Array(rawModule.memory.buffer);\n      let start = pointer >>> 1;\n      let string = '';\n      while (end - start > 1024) {\n          string += String.fromCharCode(...memoryU16.subarray(start, (start += 1024)));\n      }\n      return string + String.fromCharCode(...memoryU16.subarray(start, end));\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  // REF : Assemblyscript ESM bindings\n  const instantiateWasmModule = async (wasmBuffer, wasmImports = {}) => {\n      const instanceAndModule = await WebAssembly.instantiate(wasmBuffer, {\n          env: {\n              abort: (messagePointer, \n              // filename, not useful because we compile everything to a single string\n              _, lineNumber, columnNumber) => {\n                  const message = liftString(wasmExports, messagePointer);\n                  lineNumber = lineNumber;\n                  columnNumber = columnNumber;\n                  (() => {\n                      // @external.js\n                      throw Error(`${message} at ${lineNumber}:${columnNumber}`);\n                  })();\n              },\n              seed: () => {\n                  return (() => {\n                      return Date.now() * Math.random();\n                  })();\n              },\n              'console.log': (textPointer) => {\n                  console.log(liftString(wasmExports, textPointer));\n              },\n          },\n          ...wasmImports,\n      });\n      const wasmExports = instanceAndModule.instance\n          .exports;\n      return instanceAndModule.instance;\n  };\n\n  const readMetadata$2 = async (wasmBuffer) => {\n      // In order to read metadata, we need to introspect the module to get the imports\n      const inputImports = {};\n      const wasmModule = WebAssembly.Module.imports(new WebAssembly.Module(wasmBuffer));\n      // Then we generate dummy functions to be able to instantiate the module\n      wasmModule\n          .filter((imprt) => imprt.module === 'input' && imprt.kind === 'function')\n          .forEach((imprt) => (inputImports[imprt.name] = () => undefined));\n      const wasmInstance = await instantiateWasmModule(wasmBuffer, {\n          input: inputImports,\n      });\n      // Finally, once the module instantiated, we read the metadata\n      const rawModule = wasmInstance.exports;\n      const stringPointer = rawModule.metadata.valueOf();\n      const metadataJSON = liftString(rawModule, stringPointer);\n      return JSON.parse(metadataJSON);\n  };\n\n  const createFsModule = (rawModule) => {\n      const fsExportedNames = rawModule.metadata.compilation.variableNamesIndex.globals.fs;\n      const fs = proxyAsModuleWithBindings(rawModule, {\n          onReadSoundFile: { type: 'callback', value: () => undefined },\n          onWriteSoundFile: { type: 'callback', value: () => undefined },\n          onOpenSoundReadStream: { type: 'callback', value: () => undefined },\n          onOpenSoundWriteStream: { type: 'callback', value: () => undefined },\n          onSoundStreamData: { type: 'callback', value: () => undefined },\n          onCloseSoundStream: { type: 'callback', value: () => undefined },\n          sendReadSoundFileResponse: {\n              type: 'proxy',\n              value: 'x_onReadSoundFileResponse' in fsExportedNames\n                  ? rawModule.globals.fs.x_onReadSoundFileResponse\n                  : undefined,\n          },\n          sendWriteSoundFileResponse: {\n              type: 'proxy',\n              value: 'x_onWriteSoundFileResponse' in fsExportedNames\n                  ? rawModule.globals.fs.x_onWriteSoundFileResponse\n                  : undefined,\n          },\n          // should register the operation success { bitDepth: 32, target: 'javascript' }\n          sendSoundStreamData: {\n              type: 'proxy',\n              value: 'x_onSoundStreamData' in fsExportedNames\n                  ? rawModule.globals.fs.x_onSoundStreamData\n                  : undefined,\n          },\n          closeSoundStream: {\n              type: 'proxy',\n              value: 'x_onCloseSoundStream' in fsExportedNames\n                  ? rawModule.globals.fs.x_onCloseSoundStream\n                  : undefined,\n          },\n      });\n      if ('i_openSoundWriteStream' in fsExportedNames) {\n          rawModule.globals.fs.i_openSoundWriteStream = (...args) => fs.onOpenSoundWriteStream(...args);\n      }\n      if ('i_sendSoundStreamData' in fsExportedNames) {\n          rawModule.globals.fs.i_sendSoundStreamData = (...args) => fs.onSoundStreamData(...args);\n      }\n      if ('i_openSoundReadStream' in fsExportedNames) {\n          rawModule.globals.fs.i_openSoundReadStream = (...args) => fs.onOpenSoundReadStream(...args);\n      }\n      if ('i_closeSoundStream' in fsExportedNames) {\n          rawModule.globals.fs.i_closeSoundStream = (...args) => fs.onCloseSoundStream(...args);\n      }\n      if ('i_writeSoundFile' in fsExportedNames) {\n          rawModule.globals.fs.i_writeSoundFile = (...args) => fs.onWriteSoundFile(...args);\n      }\n      if ('i_readSoundFile' in fsExportedNames) {\n          rawModule.globals.fs.i_readSoundFile = (...args) => fs.onReadSoundFile(...args);\n      }\n      return fs;\n  };\n\n  const createCommonsModule = (rawModule, metadata) => {\n      const floatArrayType = getFloatArrayType(metadata.settings.audio.bitDepth);\n      return proxyAsModuleWithBindings(rawModule, {\n          getArray: {\n              type: 'proxy',\n              value: (arrayName) => rawModule.globals.commons.getArray(arrayName),\n          },\n          setArray: {\n              type: 'proxy',\n              value: (arrayName, array) => rawModule.globals.commons.setArray(arrayName, new floatArrayType(array)),\n          },\n      });\n  };\n\n  /*\n   * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n   *\n   * This file is part of WebPd\n   * (see https://github.com/sebpiq/WebPd).\n   *\n   * This program is free software: you can redistribute it and/or modify\n   * it under the terms of the GNU Lesser General Public License as published by\n   * the Free Software Foundation, either version 3 of the License, or\n   * (at your option) any later version.\n   *\n   * This program is distributed in the hope that it will be useful,\n   * but WITHOUT ANY WARRANTY; without even the implied warranty of\n   * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n   * GNU Lesser General Public License for more details.\n   *\n   * You should have received a copy of the GNU Lesser General Public License\n   * along with this program. If not, see <http://www.gnu.org/licenses/>.\n   */\n  /**\n   * These bindings enable easier interaction with modules generated with our JavaScript compilation.\n   * For example : instantiation, passing data back and forth, etc ...\n   *\n   * **Warning** : These bindings are compiled with rollup as a standalone JS module for inclusion in other libraries.\n   * In consequence, they are meant to be kept lightweight, and should avoid importing dependencies.\n   *\n   * @module\n   */\n  const compileRawModule = (code) => new Function(`\n        ${code}\n        return exports\n    `)();\n  const createEngineBindings = (rawModule) => {\n      const exportedNames = rawModule.metadata.compilation.variableNamesIndex.globals;\n      const globalsBindings = {\n          commons: {\n              type: 'proxy',\n              value: createCommonsModule(rawModule, rawModule.metadata),\n          },\n      };\n      if ('fs' in exportedNames) {\n          globalsBindings.fs = { type: 'proxy', value: createFsModule(rawModule) };\n      }\n      return {\n          metadata: { type: 'raw' },\n          initialize: { type: 'raw' },\n          dspLoop: { type: 'raw' },\n          io: { type: 'raw' },\n          globals: {\n              type: 'proxy',\n              value: proxyAsModuleWithBindings(rawModule, globalsBindings),\n          },\n      };\n  };\n  const createEngine = (code, additionalBindings) => {\n      const rawModule = compileRawModule(code);\n      const rawModuleWithNameMapping = proxyWithEngineNameMapping(rawModule, rawModule.metadata.compilation.variableNamesIndex);\n      return proxyAsModuleWithBindings(rawModule, {\n          ...createEngineBindings(rawModuleWithNameMapping),\n          ...(additionalBindings || {}),\n      });\n  };\n\n  const readMetadata$1 = async (target, compiled) => {\n      switch (target) {\n          case 'assemblyscript':\n              return readMetadata$2(compiled);\n          case 'javascript':\n              return createEngine(compiled).metadata;\n      }\n  };\n\n  const defaultSettingsForRun = (patchUrl, messageSender) => {\n      const rootUrl = urlDirName(patchUrl);\n      return {\n          messageHandler: (node, messageEvent) => {\n              const message = messageEvent.data;\n              switch (message.type) {\n                  case 'fs':\n                      return index(node, messageEvent, { rootUrl });\n                  case 'io:messageSender':\n                      if (messageSender) {\n                          messageSender(message.payload.nodeId, message.payload.portletId, message.payload.message);\n                      }\n                      return null;\n                  default:\n                      return null;\n              }\n          },\n      };\n  };\n  const readMetadata = (compiledPatch) => {\n      if (typeof compiledPatch === 'string') {\n          return readMetadata$1('javascript', compiledPatch);\n      }\n      else {\n          return readMetadata$1('assemblyscript', compiledPatch);\n      }\n  };\n\n  var run = async (audioContext, compiledPatch, settings) => {\n      const { messageHandler } = settings;\n      const webpdNode = new WebPdWorkletNode(audioContext);\n      webpdNode.port.onmessage = (msg) => messageHandler(webpdNode, msg);\n      if (typeof compiledPatch === 'string') {\n          webpdNode.port.postMessage({\n              type: 'code:JS',\n              payload: {\n                  jsCode: compiledPatch,\n              },\n          });\n      }\n      else {\n          webpdNode.port.postMessage({\n              type: 'code:WASM',\n              payload: {\n                  wasmBuffer: compiledPatch,\n              },\n          });\n      }\n      return webpdNode;\n  };\n\n  exports.defaultSettingsForRun = defaultSettingsForRun;\n  exports.initialize = initialize;\n  exports.readMetadata = readMetadata;\n  exports.run = run;\n\n  return exports;\n\n})({});\n",[t]:a,"index.html":'\n<!DOCTYPE html>\n<html lang="en">\n    <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <meta http-equiv="X-UA-Compatible" content="ie=edge">\n        <title>WebPd boilerplate</title>\n        <style>\n            #start {\n                display: none;\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n            }\n            #loading {\n                width: 100%;\n                height: 100%;\n                position: fixed;\n                top: 50%;\n                transform: translateY(-50%);\n                display: flex;\n                justify-content: center;\n                align-items: center;\n            }\n        </style>\n    </head>\n    <body>\n        <h1>My Web Page</h1>\n        <div>For more info about usage (how to interact with the patch), you can open this HTML file in a code editor.</div>\n        <button id="start"> Start </button>\n        <div id="loading"> Loading ... </div>\n        <script src="'.concat(id,"\"><\/script>\n        <script>\n            // SUMMARY\n            // 1. WEB PAGE INITIALIZATION\n            // 2. SENDING MESSAGES FROM JAVASCRIPT TO THE PATCH\n            // 3. SENDING MESSAGES FROM THE PATCH TO JAVASCRIPT\n\n\n            // ------------- 1. WEB PAGE INITIALIZATION\n            const loadingDiv = document.querySelector('#loading')\n            const startButton = document.querySelector('#start')\n            const audioContext = new AudioContext()\n\n            let patch = null\n            let stream = null\n            let webpdNode = null\n\n            const initApp = async () => {\n                // Register the worklet\n                await WebPdRuntime.initialize(audioContext)\n\n                // Fetch the patch code\n                response = await fetch('").concat(t,"')\n                patch = await ").concat("javascript"===n?"response.text()":"response.arrayBuffer()","\n\n                // Comment this if you don't need audio input\n                stream = await navigator.mediaDevices.getUserMedia({ audio: true })\n\n                // Hide loading and show start button\n                loadingDiv.style.display = 'none'\n                startButton.style.display = 'block'\n            }\n\n            const startApp = async () => {\n                // AudioContext needs to be resumed on click to protects users \n                // from being spammed with autoplay.\n                // See : https://github.com/WebAudio/web-audio-api/issues/345\n                if (audioContext.state === 'suspended') {\n                    audioContext.resume()\n                }\n\n                // Setup web audio graph\n                webpdNode = await WebPdRuntime.run(\n                    audioContext, \n                    patch, \n                    WebPdRuntime.defaultSettingsForRun(\n                        './").concat(t,"',\n                        // Comment this if you don't need to receive messages from the patch\n                        receiveMsgFromWebPd,\n                    ),\n                )\n                webpdNode.connect(audioContext.destination)\n\n                // Comment this if you don't need audio input\n                const sourceNode = audioContext.createMediaStreamSource(stream)\n                sourceNode.connect(webpdNode)\n\n                // Hide the start button\n                startButton.style.display = 'none'\n            }\n\n            startButton.onclick = startApp\n\n            initApp().\n                then(() => {\n                    console.log('App initialized')\n                })\n\n            \n            // ------------- 2. SENDING MESSAGES FROM JAVASCRIPT TO THE PATCH\n            // Use the function sendMsgToWebPd to send a message from JavaScript to an object inside your patch.\n            // \n            // Parameters : \n            // - nodeId: the ID of the object you want to send a message to. \n            //          This ID is a string that has been assigned by WebPd at compilation.\n            //          You can find below the list of available IDs with hints to help you \n            //          identify the object you want to interact with.\n            // - portletId : the ID of the object portlet to which the message should be sent. \n            // - message : the message to send. This must be a list of strings and / or numbers.\n            // \n            // Examples :\n            // - sending a message to a bang node of ID 'n_0_1' :\n            //          sendMsgToWebPd('n_0_1', '0', ['bang'])\n            // - sending a message to a number object of ID 'n_0_2' :\n            //          sendMsgToWebPd('n_0_2', '0', [123])\n            // \n            const sendMsgToWebPd = (nodeId, portletId, message) => {\n                webpdNode.port.postMessage({\n                    type: 'io:messageReceiver',\n                    payload: {\n                        nodeId,\n                        portletId,\n                        message,\n                    },\n                })\n            }\n            \n            // Here is an index of objects IDs to which you can send messages, with hints so you can find the right ID.\n            // Note that by default only GUI objects (bangs, sliders, etc ...) are available.").concat(sd(r.settings.io.messageReceivers,o,((e,n,t)=>'\n            //  - nodeId "'.concat(e.id,'" portletId "').concat(n,'"\n            //      * type "').concat(e.type,'"\n            //      * position ').concat(t.x," ").concat(t.y).concat(t.label?'\n            //      * label "'.concat(t.label,'"'):"","\n            ")),((e,n)=>'\n            //  - nodeId "'.concat(e.id,'" portletId "').concat(n,'"\n            //      * type "send"\n            //      * send "').concat(e.args.busName,'"\n            ')),"\n            // EMPTY (did you place a GUI object or send object in your patch ?)\n"),"\n\n            // ------------- 3. SENDING MESSAGES FROM THE PATCH TO JAVASCRIPT\n            // Use the function receiveMsgFromWebPd to receive a message from an object inside your patch.\n            // \n            // Parameters : \n            // - nodeId: the ID of the object that is sending a message. \n            //          This ID is a string that has been assigned by WebPd at compilation.\n            //          You can find below the list of available IDs with hints to help you \n            //          identify the object you want to interact with.\n            // - portletId : the ID of the object portlet that is sending the message.\n            // - message : the message that was sent. It is a list of strings and / or numbers.\n            const receiveMsgFromWebPd = (nodeId, portletId, message) => {").concat(sd(r.settings.io.messageSenders,o,((e,n,t)=>'\n                if (nodeId === "'.concat(e.id,'" && portletId === "').concat(n,"\") {\n                    console.log('Message received from :\\n'\n                        + '\t* nodeId \"").concat(e.id,'" portletId "').concat(n,"\"\\n'\n                        + '\t* type \"").concat(e.type,"\"\\n'\n                        + '\t* position ").concat(t.x," ").concat(t.y,"\\n'").concat(t.label?"\n                        + '\t* label \"".concat(t.label,"\"'"):"","\n                    )\n                }")),((e,n)=>'\n                if (nodeId === "'.concat(e.id,'" && portletId === "').concat(n,"\") {\n                    console.log('Message received from :\\n'\n                        + '\t* nodeId \"").concat(e.id,'" portletId "').concat(n,"\"\\n'\n                        + '\t* type \"receive\"\\n'\n                        + '\t* receive \"").concat(e.args.busName,"\"'\n                    )\n                }")),"\n                // /! there seems to be no message senders in the patch. \n                // Add a GUI object or a send object in your patch to be able to receive messages.\n"),"                \n            }\n\n        <\/script>\n    </body>\n</html>")}})(e),{status:0,warnings:[]};default:throw new Error("invalid build step ".concat(n))}},DS=e=>["Unknown object types ".concat(Array.from(e).map((e=>"".concat(e))).join(", "))],jS=e=>e.map((e=>{let{message:n,lineIndex:t}=e;return"line ".concat(t+1," : ").concat(n)}));function zS(e){return Number.isInteger(e)&&e>=0}function BS(e){this.name="ArgumentError",this.message=e}const US=function(e,n){if(n=n||{},"function"!==typeof e)throw new BS("fetch must be a function");if("object"!==typeof n)throw new BS("defaults must be an object");if(void 0!==n.retries&&!zS(n.retries))throw new BS("retries must be a positive integer");if(void 0!==n.retryDelay&&!zS(n.retryDelay)&&"function"!==typeof n.retryDelay)throw new BS("retryDelay must be a positive integer or a function returning a positive integer");if(void 0!==n.retryOn&&!Array.isArray(n.retryOn)&&"function"!==typeof n.retryOn)throw new BS("retryOn property expects an array or function");return n=Object.assign({retries:3,retryDelay:1e3,retryOn:[]},n),function(t,r){var a=n.retries,o=n.retryDelay,i=n.retryOn;if(r&&void 0!==r.retries){if(!zS(r.retries))throw new BS("retries must be a positive integer");a=r.retries}if(r&&void 0!==r.retryDelay){if(!zS(r.retryDelay)&&"function"!==typeof r.retryDelay)throw new BS("retryDelay must be a positive integer or a function returning a positive integer");o=r.retryDelay}if(r&&r.retryOn){if(!Array.isArray(r.retryOn)&&"function"!==typeof r.retryOn)throw new BS("retryOn property expects an array or function");i=r.retryOn}return new Promise((function(n,s){var l=function(o){var l="undefined"!==typeof Request&&t instanceof Request?t.clone():t;e(l,r).then((function(e){if(Array.isArray(i)&&-1===i.indexOf(e.status))n(e);else if("function"===typeof i)try{return Promise.resolve(i(o,null,e)).then((function(t){t?u(o,null,e):n(e)})).catch(s)}catch(t){s(t)}else o<a?u(o,null,e):n(e)})).catch((function(e){if("function"===typeof i)try{Promise.resolve(i(o,e,null)).then((function(n){n?u(o,e,null):s(e)})).catch((function(e){s(e)}))}catch(e){s(e)}else o<a?u(o,e,null):s(e)}))};function u(e,n,t){var r="function"===typeof o?o(e,n,t):o;setTimeout((function(){l(++e)}),r)}l(0)}))}}(fetch),WS=(e,n)=>{if(0===e.length)throw new Error("Received empty sound");const t=e[0].constructor,r=e[0].length,a=e.slice(0,n);for(;e.length<n;)a.push(new t(r));return a},$S=(e,n)=>new URL(n,e).href;class VS extends Error{constructor(e,n){super("Error ".concat(e," : ").concat(n))}}class GS extends AudioWorkletNode{constructor(e){super(e,"webpd-node",{numberOfOutputs:1,outputChannelCount:[2]})}destroy(){this.port.postMessage({type:"destroy",payload:{}})}}const HS=e=>(async(e,n)=>{const t=new Blob([n],{type:"text/javascript"}),r=URL.createObjectURL(t);return e.audioWorklet.addModule(r)})(e,"var AssemblyScriptWasmBindings = (function (exports) {\n    'use strict';\n\n    const _proxyGetHandlerThrowIfKeyUnknown = (target, key, path) => {\n        if (!(key in target)) {\n            if ([\n                'toJSON',\n                'Symbol(Symbol.toStringTag)',\n                'constructor',\n                '$typeof',\n                '$$typeof',\n                '@@__IMMUTABLE_ITERABLE__@@',\n                '@@__IMMUTABLE_RECORD__@@',\n                'then',\n            ].includes(key)) {\n                return true;\n            }\n            throw new Error(`namespace${path ? ` <${path.keys.join('.')}>` : ''} doesn't know key \"${String(key)}\"`);\n        }\n        return false;\n    };\n\n    const getFloatArrayType = (bitDepth) => bitDepth === 64 ? Float64Array : Float32Array;\n    const proxyAsModuleWithBindings = (rawModule, bindings) => new Proxy({}, {\n        get: (_, k) => {\n            if (bindings.hasOwnProperty(k)) {\n                const key = String(k);\n                const bindingSpec = bindings[key];\n                switch (bindingSpec.type) {\n                    case 'raw':\n                        if (k in rawModule) {\n                            return rawModule[key];\n                        }\n                        else {\n                            throw new Error(`Key ${String(key)} doesn't exist in raw module`);\n                        }\n                    case 'proxy':\n                    case 'callback':\n                        return bindingSpec.value;\n                }\n            }\n            else {\n                return undefined;\n            }\n        },\n        has: function (_, k) {\n            return k in bindings;\n        },\n        set: (_, k, newValue) => {\n            if (bindings.hasOwnProperty(String(k))) {\n                const key = String(k);\n                const bindingSpec = bindings[key];\n                if (bindingSpec.type === 'callback') {\n                    bindingSpec.value = newValue;\n                }\n                else {\n                    throw new Error(`Binding key ${String(key)} is read-only`);\n                }\n            }\n            else {\n                throw new Error(`Key ${String(k)} is not defined in bindings`);\n            }\n            return true;\n        },\n    });\n    const proxyWithEngineNameMapping = (rawModule, variableNamesIndex) => proxyWithNameMapping(rawModule, {\n        globals: variableNamesIndex.globals,\n        io: variableNamesIndex.io,\n    });\n    const proxyWithNameMapping = (rawModule, variableNamesIndex) => {\n        if (typeof variableNamesIndex === 'string') {\n            return rawModule[variableNamesIndex];\n        }\n        else if (typeof variableNamesIndex === 'object') {\n            return new Proxy(rawModule, {\n                get: (_, k) => {\n                    const key = String(k);\n                    if (key in rawModule) {\n                        return Reflect.get(rawModule, key);\n                    }\n                    else if (key in variableNamesIndex) {\n                        const nextVariableNames = variableNamesIndex[key];\n                        return proxyWithNameMapping(rawModule, nextVariableNames);\n                    }\n                    else if (_proxyGetHandlerThrowIfKeyUnknown(rawModule, key)) {\n                        return undefined;\n                    }\n                },\n                has: function (_, k) {\n                    return k in rawModule || k in variableNamesIndex;\n                },\n                set: (_, k, value) => {\n                    const key = String(k);\n                    if (key in variableNamesIndex) {\n                        const variableName = variableNamesIndex[key];\n                        if (typeof variableName !== 'string') {\n                            throw new Error(`Failed to set value for key ${String(k)}: variable name is not a string`);\n                        }\n                        return Reflect.set(rawModule, variableName, value);\n                    }\n                    else {\n                        throw new Error(`Key ${String(k)} is not defined in raw module`);\n                    }\n                },\n            });\n        }\n        else {\n            throw new Error(`Invalid name mapping`);\n        }\n    };\n\n    const liftString = (rawModule, pointer) => {\n        if (!pointer) {\n            throw new Error('Cannot lift a null pointer');\n        }\n        pointer = pointer >>> 0;\n        const end = (pointer +\n            new Uint32Array(rawModule.memory.buffer)[(pointer - 4) >>> 2]) >>>\n            1;\n        const memoryU16 = new Uint16Array(rawModule.memory.buffer);\n        let start = pointer >>> 1;\n        let string = '';\n        while (end - start > 1024) {\n            string += String.fromCharCode(...memoryU16.subarray(start, (start += 1024)));\n        }\n        return string + String.fromCharCode(...memoryU16.subarray(start, end));\n    };\n    const lowerString = (rawModule, value) => {\n        if (value == null) {\n            throw new Error('Cannot lower a null string');\n        }\n        const length = value.length, pointer = rawModule.__new(length << 1, 1) >>> 0, memoryU16 = new Uint16Array(rawModule.memory.buffer);\n        for (let i = 0; i < length; ++i)\n            memoryU16[(pointer >>> 1) + i] = value.charCodeAt(i);\n        return pointer;\n    };\n    const readTypedArray = (rawModule, constructor, pointer) => {\n        if (!pointer) {\n            throw new Error('Cannot lift a null pointer');\n        }\n        const memoryU32 = new Uint32Array(rawModule.memory.buffer);\n        return new constructor(rawModule.memory.buffer, memoryU32[(pointer + 4) >>> 2], memoryU32[(pointer + 8) >>> 2] / constructor.BYTES_PER_ELEMENT);\n    };\n    const lowerFloatArray = (rawModule, bitDepth, data) => {\n        const arrayType = getFloatArrayType(bitDepth);\n        const arrayPointer = rawModule.globals.core.createFloatArray(data.length);\n        const array = readTypedArray(rawModule, arrayType, arrayPointer);\n        array.set(data);\n        return { array, arrayPointer };\n    };\n    const lowerListOfFloatArrays = (rawModule, bitDepth, data) => {\n        const arraysPointer = rawModule.globals.core.x_createListOfArrays();\n        data.forEach((array) => {\n            const { arrayPointer } = lowerFloatArray(rawModule, bitDepth, array);\n            rawModule.globals.core.x_pushToListOfArrays(arraysPointer, arrayPointer);\n        });\n        return arraysPointer;\n    };\n    const readListOfFloatArrays = (rawModule, bitDepth, listOfArraysPointer) => {\n        const listLength = rawModule.globals.core.x_getListOfArraysLength(listOfArraysPointer);\n        const arrays = [];\n        const arrayType = getFloatArrayType(bitDepth);\n        for (let i = 0; i < listLength; i++) {\n            const arrayPointer = rawModule.globals.core.x_getListOfArraysElem(listOfArraysPointer, i);\n            arrays.push(readTypedArray(rawModule, arrayType, arrayPointer));\n        }\n        return arrays;\n    };\n\n    const instantiateWasmModule = async (wasmBuffer, wasmImports = {}) => {\n        const instanceAndModule = await WebAssembly.instantiate(wasmBuffer, {\n            env: {\n                abort: (messagePointer, _, lineNumber, columnNumber) => {\n                    const message = liftString(wasmExports, messagePointer);\n                    lineNumber = lineNumber;\n                    columnNumber = columnNumber;\n                    (() => {\n                        throw Error(`${message} at ${lineNumber}:${columnNumber}`);\n                    })();\n                },\n                seed: () => {\n                    return (() => {\n                        return Date.now() * Math.random();\n                    })();\n                },\n                'console.log': (textPointer) => {\n                    console.log(liftString(wasmExports, textPointer));\n                },\n            },\n            ...wasmImports,\n        });\n        const wasmExports = instanceAndModule.instance\n            .exports;\n        return instanceAndModule.instance;\n    };\n\n    const updateWasmInOuts = ({ refs, cache, }) => {\n        cache.wasmOutput = readTypedArray(refs.rawModule, cache.arrayType, refs.rawModule.globals.core.x_getOutput());\n        cache.wasmInput = readTypedArray(refs.rawModule, cache.arrayType, refs.rawModule.globals.core.x_getInput());\n    };\n    const createEngineLifecycleBindings = (engineContext) => {\n        const { refs, cache, metadata } = engineContext;\n        return {\n            initialize: {\n                type: 'proxy',\n                value: (sampleRate, blockSize) => {\n                    metadata.settings.audio.blockSize = blockSize;\n                    metadata.settings.audio.sampleRate = sampleRate;\n                    cache.blockSize = blockSize;\n                    refs.rawModule.initialize(sampleRate, blockSize);\n                    updateWasmInOuts(engineContext);\n                },\n            },\n            dspLoop: {\n                type: 'proxy',\n                value: (input, output) => {\n                    for (let channel = 0; channel < input.length; channel++) {\n                        cache.wasmInput.set(input[channel], channel * cache.blockSize);\n                    }\n                    updateWasmInOuts(engineContext);\n                    refs.rawModule.dspLoop();\n                    updateWasmInOuts(engineContext);\n                    for (let channel = 0; channel < output.length; channel++) {\n                        output[channel].set(cache.wasmOutput.subarray(cache.blockSize * channel, cache.blockSize * (channel + 1)));\n                    }\n                },\n            },\n        };\n    };\n\n    const createCommonsBindings = (engineContext) => {\n        const { refs, cache } = engineContext;\n        return {\n            getArray: {\n                type: 'proxy',\n                value: (arrayName) => {\n                    const arrayNamePointer = lowerString(refs.rawModule, arrayName);\n                    const arrayPointer = refs.rawModule.globals.commons.getArray(arrayNamePointer);\n                    return readTypedArray(refs.rawModule, cache.arrayType, arrayPointer);\n                },\n            },\n            setArray: {\n                type: 'proxy',\n                value: (arrayName, array) => {\n                    const stringPointer = lowerString(refs.rawModule, arrayName);\n                    const { arrayPointer } = lowerFloatArray(refs.rawModule, cache.bitDepth, array);\n                    refs.rawModule.globals.commons.setArray(stringPointer, arrayPointer);\n                    updateWasmInOuts(engineContext);\n                },\n            },\n        };\n    };\n\n    const readMetadata = async (wasmBuffer) => {\n        const inputImports = {};\n        const wasmModule = WebAssembly.Module.imports(new WebAssembly.Module(wasmBuffer));\n        wasmModule\n            .filter((imprt) => imprt.module === 'input' && imprt.kind === 'function')\n            .forEach((imprt) => (inputImports[imprt.name] = () => undefined));\n        const wasmInstance = await instantiateWasmModule(wasmBuffer, {\n            input: inputImports,\n        });\n        const rawModule = wasmInstance.exports;\n        const stringPointer = rawModule.metadata.valueOf();\n        const metadataJSON = liftString(rawModule, stringPointer);\n        return JSON.parse(metadataJSON);\n    };\n\n    const mapArray = (src, func) => {\n        const dest = {};\n        src.forEach((srcValue, i) => {\n            const [key, destValue] = func(srcValue, i);\n            dest[key] = destValue;\n        });\n        return dest;\n    };\n\n    const liftMessage = (rawModule, messagePointer) => {\n        const messageTokenTypesPointer = rawModule.globals.msg.x_getTokenTypes(messagePointer);\n        const messageTokenTypes = readTypedArray(rawModule, Int32Array, messageTokenTypesPointer);\n        const message = [];\n        messageTokenTypes.forEach((tokenType, tokenIndex) => {\n            if (tokenType === rawModule.globals.msg.FLOAT_TOKEN.valueOf()) {\n                message.push(rawModule.globals.msg.readFloatToken(messagePointer, tokenIndex));\n            }\n            else if (tokenType === rawModule.globals.msg.STRING_TOKEN.valueOf()) {\n                const stringPointer = rawModule.globals.msg.readStringToken(messagePointer, tokenIndex);\n                message.push(liftString(rawModule, stringPointer));\n            }\n        });\n        return message;\n    };\n    const lowerMessage = (rawModule, message) => {\n        const template = message.reduce((template, value) => {\n            if (typeof value === 'number') {\n                template.push(rawModule.globals.msg.FLOAT_TOKEN.valueOf());\n            }\n            else if (typeof value === 'string') {\n                template.push(rawModule.globals.msg.STRING_TOKEN.valueOf());\n                template.push(value.length);\n            }\n            else {\n                throw new Error(`invalid message value ${value}`);\n            }\n            return template;\n        }, []);\n        const templateArrayPointer = rawModule.globals.msg.x_createTemplate(template.length);\n        const loweredTemplateArray = readTypedArray(rawModule, Int32Array, templateArrayPointer);\n        loweredTemplateArray.set(template);\n        const messagePointer = rawModule.globals.msg.x_create(templateArrayPointer);\n        message.forEach((value, index) => {\n            if (typeof value === 'number') {\n                rawModule.globals.msg.writeFloatToken(messagePointer, index, value);\n            }\n            else if (typeof value === 'string') {\n                const stringPointer = lowerString(rawModule, value);\n                rawModule.globals.msg.writeStringToken(messagePointer, index, stringPointer);\n            }\n        });\n        return messagePointer;\n    };\n\n    const createIoMessageReceiversBindings = ({ metadata, refs, }) => Object.entries(metadata.settings.io.messageReceivers).reduce((bindings, [nodeId, spec]) => ({\n        ...bindings,\n        [nodeId]: {\n            type: 'proxy',\n            value: mapArray(spec, (inletId) => [\n                inletId,\n                (message) => {\n                    const messagePointer = lowerMessage(refs.rawModule, message);\n                    refs.rawModule.io.messageReceivers[nodeId][inletId](messagePointer);\n                },\n            ]),\n        },\n    }), {});\n    const createIoMessageSendersBindings = ({ metadata, }) => Object.entries(metadata.settings.io.messageSenders).reduce((bindings, [nodeId, spec]) => ({\n        ...bindings,\n        [nodeId]: {\n            type: 'proxy',\n            value: mapArray(spec, (outletId) => [\n                outletId,\n                (_) => undefined,\n            ]),\n        },\n    }), {});\n    const ioMsgSendersImports = ({ metadata, refs, }) => {\n        const wasmImports = {};\n        const { variableNamesIndex } = metadata.compilation;\n        Object.entries(metadata.settings.io.messageSenders).forEach(([nodeId, spec]) => {\n            spec.forEach((outletId) => {\n                const listenerName = variableNamesIndex.io.messageSenders[nodeId][outletId];\n                wasmImports[listenerName] = (messagePointer) => {\n                    const message = liftMessage(refs.rawModule, messagePointer);\n                    refs.engine.io.messageSenders[nodeId][outletId](message);\n                };\n            });\n        });\n        return wasmImports;\n    };\n\n    const createFsBindings = (engineContext) => {\n        const { refs, cache, metadata } = engineContext;\n        const fsExportedNames = metadata.compilation.variableNamesIndex.globals.fs;\n        return {\n            sendReadSoundFileResponse: {\n                type: 'proxy',\n                value: 'x_onReadSoundFileResponse' in fsExportedNames\n                    ? (operationId, status, sound) => {\n                        let soundPointer = 0;\n                        if (sound) {\n                            soundPointer = lowerListOfFloatArrays(refs.rawModule, cache.bitDepth, sound);\n                        }\n                        refs.rawModule.globals.fs.x_onReadSoundFileResponse(operationId, status, soundPointer);\n                        updateWasmInOuts(engineContext);\n                    }\n                    : undefined,\n            },\n            sendWriteSoundFileResponse: {\n                type: 'proxy',\n                value: 'x_onWriteSoundFileResponse' in fsExportedNames\n                    ? refs.rawModule.globals.fs.x_onWriteSoundFileResponse\n                    : undefined,\n            },\n            sendSoundStreamData: {\n                type: 'proxy',\n                value: 'x_onSoundStreamData' in fsExportedNames\n                    ? (operationId, sound) => {\n                        const soundPointer = lowerListOfFloatArrays(refs.rawModule, cache.bitDepth, sound);\n                        const writtenFrameCount = refs.rawModule.globals.fs.x_onSoundStreamData(operationId, soundPointer);\n                        updateWasmInOuts(engineContext);\n                        return writtenFrameCount;\n                    }\n                    : undefined,\n            },\n            closeSoundStream: {\n                type: 'proxy',\n                value: 'x_onCloseSoundStream' in fsExportedNames\n                    ? refs.rawModule.globals.fs.x_onCloseSoundStream\n                    : undefined,\n            },\n            onReadSoundFile: { type: 'callback', value: () => undefined },\n            onWriteSoundFile: { type: 'callback', value: () => undefined },\n            onOpenSoundReadStream: { type: 'callback', value: () => undefined },\n            onOpenSoundWriteStream: { type: 'callback', value: () => undefined },\n            onSoundStreamData: { type: 'callback', value: () => undefined },\n            onCloseSoundStream: { type: 'callback', value: () => undefined },\n        };\n    };\n    const createFsImports = (engineContext) => {\n        const wasmImports = {};\n        const { cache, metadata, refs } = engineContext;\n        const exportedNames = metadata.compilation.variableNamesIndex.globals;\n        if ('fs' in exportedNames) {\n            const nameMapping = proxyWithNameMapping(wasmImports, exportedNames.fs);\n            if ('i_readSoundFile' in exportedNames.fs) {\n                nameMapping.i_readSoundFile = (operationId, urlPointer, infoPointer) => {\n                    const url = liftString(refs.rawModule, urlPointer);\n                    const info = liftMessage(refs.rawModule, infoPointer);\n                    refs.engine.globals.fs.onReadSoundFile(operationId, url, info);\n                };\n            }\n            if ('i_writeSoundFile' in exportedNames.fs) {\n                nameMapping.i_writeSoundFile = (operationId, soundPointer, urlPointer, infoPointer) => {\n                    const sound = readListOfFloatArrays(refs.rawModule, cache.bitDepth, soundPointer);\n                    const url = liftString(refs.rawModule, urlPointer);\n                    const info = liftMessage(refs.rawModule, infoPointer);\n                    refs.engine.globals.fs.onWriteSoundFile(operationId, sound, url, info);\n                };\n            }\n            if ('i_openSoundReadStream' in exportedNames.fs) {\n                nameMapping.i_openSoundReadStream = (operationId, urlPointer, infoPointer) => {\n                    const url = liftString(refs.rawModule, urlPointer);\n                    const info = liftMessage(refs.rawModule, infoPointer);\n                    updateWasmInOuts(engineContext);\n                    refs.engine.globals.fs.onOpenSoundReadStream(operationId, url, info);\n                };\n            }\n            if ('i_openSoundWriteStream' in exportedNames.fs) {\n                nameMapping.i_openSoundWriteStream = (operationId, urlPointer, infoPointer) => {\n                    const url = liftString(refs.rawModule, urlPointer);\n                    const info = liftMessage(refs.rawModule, infoPointer);\n                    refs.engine.globals.fs.onOpenSoundWriteStream(operationId, url, info);\n                };\n            }\n            if ('i_sendSoundStreamData' in exportedNames.fs) {\n                nameMapping.i_sendSoundStreamData = (operationId, blockPointer) => {\n                    const block = readListOfFloatArrays(refs.rawModule, cache.bitDepth, blockPointer);\n                    refs.engine.globals.fs.onSoundStreamData(operationId, block);\n                };\n            }\n            if ('i_closeSoundStream' in exportedNames.fs) {\n                nameMapping.i_closeSoundStream = (...args) => refs.engine.globals.fs.onCloseSoundStream(...args);\n            }\n        }\n        return wasmImports;\n    };\n\n    const createEngine = async (wasmBuffer, additionalBindings) => {\n        const metadata = await readMetadata(wasmBuffer);\n        const bitDepth = metadata.settings.audio.bitDepth;\n        const arrayType = getFloatArrayType(bitDepth);\n        const engineContext = {\n            refs: {},\n            metadata: metadata,\n            cache: {\n                wasmOutput: new arrayType(0),\n                wasmInput: new arrayType(0),\n                arrayType,\n                bitDepth,\n                blockSize: 0,\n            },\n        };\n        const wasmImports = {\n            ...createFsImports(engineContext),\n            ...ioMsgSendersImports(engineContext),\n        };\n        const wasmInstance = await instantiateWasmModule(wasmBuffer, {\n            input: wasmImports,\n        });\n        engineContext.refs.rawModule = proxyWithEngineNameMapping(wasmInstance.exports, metadata.compilation.variableNamesIndex);\n        const engineBindings = createEngineBindings(engineContext);\n        const engine = proxyAsModuleWithBindings(engineContext.refs.rawModule, {\n            ...engineBindings,\n            ...(additionalBindings || {}),\n        });\n        engineContext.refs.engine = engine;\n        return engine;\n    };\n    const createEngineBindings = (engineContext) => {\n        const { metadata, refs } = engineContext;\n        const exportedNames = metadata.compilation.variableNamesIndex.globals;\n        const io = {\n            messageReceivers: proxyAsModuleWithBindings(refs.rawModule, createIoMessageReceiversBindings(engineContext)),\n            messageSenders: proxyAsModuleWithBindings(refs.rawModule, createIoMessageSendersBindings(engineContext)),\n        };\n        const globalsBindings = {\n            commons: {\n                type: 'proxy',\n                value: proxyAsModuleWithBindings(refs.rawModule, createCommonsBindings(engineContext)),\n            },\n        };\n        if ('fs' in exportedNames) {\n            const fs = proxyAsModuleWithBindings(refs.rawModule, createFsBindings(engineContext));\n            globalsBindings.fs = { type: 'proxy', value: fs };\n        }\n        return {\n            ...createEngineLifecycleBindings(engineContext),\n            metadata: { type: 'proxy', value: metadata },\n            globals: {\n                type: 'proxy',\n                value: proxyAsModuleWithBindings(refs.rawModule, globalsBindings),\n            },\n            io: { type: 'proxy', value: io },\n        };\n    };\n\n    exports.createEngine = createEngine;\n    exports.createEngineBindings = createEngineBindings;\n\n    return exports;\n\n})({});\n;\nvar JavaScriptBindings = (function (exports) {\n    'use strict';\n\n    const _proxyGetHandlerThrowIfKeyUnknown = (target, key, path) => {\n        if (!(key in target)) {\n            if ([\n                'toJSON',\n                'Symbol(Symbol.toStringTag)',\n                'constructor',\n                '$typeof',\n                '$$typeof',\n                '@@__IMMUTABLE_ITERABLE__@@',\n                '@@__IMMUTABLE_RECORD__@@',\n                'then',\n            ].includes(key)) {\n                return true;\n            }\n            throw new Error(`namespace${path ? ` <${path.keys.join('.')}>` : ''} doesn't know key \"${String(key)}\"`);\n        }\n        return false;\n    };\n\n    const getFloatArrayType = (bitDepth) => bitDepth === 64 ? Float64Array : Float32Array;\n    const proxyAsModuleWithBindings = (rawModule, bindings) => new Proxy({}, {\n        get: (_, k) => {\n            if (bindings.hasOwnProperty(k)) {\n                const key = String(k);\n                const bindingSpec = bindings[key];\n                switch (bindingSpec.type) {\n                    case 'raw':\n                        if (k in rawModule) {\n                            return rawModule[key];\n                        }\n                        else {\n                            throw new Error(`Key ${String(key)} doesn't exist in raw module`);\n                        }\n                    case 'proxy':\n                    case 'callback':\n                        return bindingSpec.value;\n                }\n            }\n            else {\n                return undefined;\n            }\n        },\n        has: function (_, k) {\n            return k in bindings;\n        },\n        set: (_, k, newValue) => {\n            if (bindings.hasOwnProperty(String(k))) {\n                const key = String(k);\n                const bindingSpec = bindings[key];\n                if (bindingSpec.type === 'callback') {\n                    bindingSpec.value = newValue;\n                }\n                else {\n                    throw new Error(`Binding key ${String(key)} is read-only`);\n                }\n            }\n            else {\n                throw new Error(`Key ${String(k)} is not defined in bindings`);\n            }\n            return true;\n        },\n    });\n    const proxyWithEngineNameMapping = (rawModule, variableNamesIndex) => proxyWithNameMapping(rawModule, {\n        globals: variableNamesIndex.globals,\n        io: variableNamesIndex.io,\n    });\n    const proxyWithNameMapping = (rawModule, variableNamesIndex) => {\n        if (typeof variableNamesIndex === 'string') {\n            return rawModule[variableNamesIndex];\n        }\n        else if (typeof variableNamesIndex === 'object') {\n            return new Proxy(rawModule, {\n                get: (_, k) => {\n                    const key = String(k);\n                    if (key in rawModule) {\n                        return Reflect.get(rawModule, key);\n                    }\n                    else if (key in variableNamesIndex) {\n                        const nextVariableNames = variableNamesIndex[key];\n                        return proxyWithNameMapping(rawModule, nextVariableNames);\n                    }\n                    else if (_proxyGetHandlerThrowIfKeyUnknown(rawModule, key)) {\n                        return undefined;\n                    }\n                },\n                has: function (_, k) {\n                    return k in rawModule || k in variableNamesIndex;\n                },\n                set: (_, k, value) => {\n                    const key = String(k);\n                    if (key in variableNamesIndex) {\n                        const variableName = variableNamesIndex[key];\n                        if (typeof variableName !== 'string') {\n                            throw new Error(`Failed to set value for key ${String(k)}: variable name is not a string`);\n                        }\n                        return Reflect.set(rawModule, variableName, value);\n                    }\n                    else {\n                        throw new Error(`Key ${String(k)} is not defined in raw module`);\n                    }\n                },\n            });\n        }\n        else {\n            throw new Error(`Invalid name mapping`);\n        }\n    };\n\n    const createFsModule = (rawModule) => {\n        const fsExportedNames = rawModule.metadata.compilation.variableNamesIndex.globals.fs;\n        const fs = proxyAsModuleWithBindings(rawModule, {\n            onReadSoundFile: { type: 'callback', value: () => undefined },\n            onWriteSoundFile: { type: 'callback', value: () => undefined },\n            onOpenSoundReadStream: { type: 'callback', value: () => undefined },\n            onOpenSoundWriteStream: { type: 'callback', value: () => undefined },\n            onSoundStreamData: { type: 'callback', value: () => undefined },\n            onCloseSoundStream: { type: 'callback', value: () => undefined },\n            sendReadSoundFileResponse: {\n                type: 'proxy',\n                value: 'x_onReadSoundFileResponse' in fsExportedNames\n                    ? rawModule.globals.fs.x_onReadSoundFileResponse\n                    : undefined,\n            },\n            sendWriteSoundFileResponse: {\n                type: 'proxy',\n                value: 'x_onWriteSoundFileResponse' in fsExportedNames\n                    ? rawModule.globals.fs.x_onWriteSoundFileResponse\n                    : undefined,\n            },\n            sendSoundStreamData: {\n                type: 'proxy',\n                value: 'x_onSoundStreamData' in fsExportedNames\n                    ? rawModule.globals.fs.x_onSoundStreamData\n                    : undefined,\n            },\n            closeSoundStream: {\n                type: 'proxy',\n                value: 'x_onCloseSoundStream' in fsExportedNames\n                    ? rawModule.globals.fs.x_onCloseSoundStream\n                    : undefined,\n            },\n        });\n        if ('i_openSoundWriteStream' in fsExportedNames) {\n            rawModule.globals.fs.i_openSoundWriteStream = (...args) => fs.onOpenSoundWriteStream(...args);\n        }\n        if ('i_sendSoundStreamData' in fsExportedNames) {\n            rawModule.globals.fs.i_sendSoundStreamData = (...args) => fs.onSoundStreamData(...args);\n        }\n        if ('i_openSoundReadStream' in fsExportedNames) {\n            rawModule.globals.fs.i_openSoundReadStream = (...args) => fs.onOpenSoundReadStream(...args);\n        }\n        if ('i_closeSoundStream' in fsExportedNames) {\n            rawModule.globals.fs.i_closeSoundStream = (...args) => fs.onCloseSoundStream(...args);\n        }\n        if ('i_writeSoundFile' in fsExportedNames) {\n            rawModule.globals.fs.i_writeSoundFile = (...args) => fs.onWriteSoundFile(...args);\n        }\n        if ('i_readSoundFile' in fsExportedNames) {\n            rawModule.globals.fs.i_readSoundFile = (...args) => fs.onReadSoundFile(...args);\n        }\n        return fs;\n    };\n\n    const createCommonsModule = (rawModule, metadata) => {\n        const floatArrayType = getFloatArrayType(metadata.settings.audio.bitDepth);\n        return proxyAsModuleWithBindings(rawModule, {\n            getArray: {\n                type: 'proxy',\n                value: (arrayName) => rawModule.globals.commons.getArray(arrayName),\n            },\n            setArray: {\n                type: 'proxy',\n                value: (arrayName, array) => rawModule.globals.commons.setArray(arrayName, new floatArrayType(array)),\n            },\n        });\n    };\n\n    const compileRawModule = (code) => new Function(`\n        ${code}\n        return exports\n    `)();\n    const createEngineBindings = (rawModule) => {\n        const exportedNames = rawModule.metadata.compilation.variableNamesIndex.globals;\n        const globalsBindings = {\n            commons: {\n                type: 'proxy',\n                value: createCommonsModule(rawModule, rawModule.metadata),\n            },\n        };\n        if ('fs' in exportedNames) {\n            globalsBindings.fs = { type: 'proxy', value: createFsModule(rawModule) };\n        }\n        return {\n            metadata: { type: 'raw' },\n            initialize: { type: 'raw' },\n            dspLoop: { type: 'raw' },\n            io: { type: 'raw' },\n            globals: {\n                type: 'proxy',\n                value: proxyAsModuleWithBindings(rawModule, globalsBindings),\n            },\n        };\n    };\n    const createEngine = (code, additionalBindings) => {\n        const rawModule = compileRawModule(code);\n        const rawModuleWithNameMapping = proxyWithEngineNameMapping(rawModule, rawModule.metadata.compilation.variableNamesIndex);\n        return proxyAsModuleWithBindings(rawModule, {\n            ...createEngineBindings(rawModuleWithNameMapping),\n            ...(additionalBindings || {}),\n        });\n    };\n\n    exports.compileRawModule = compileRawModule;\n    exports.createEngine = createEngine;\n    exports.createEngineBindings = createEngineBindings;\n\n    return exports;\n\n})({});\n;\n/*\n * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n *\n * This file is part of WebPd\n * (see https://github.com/sebpiq/WebPd).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst FS_CALLBACK_NAMES = [\n    'onReadSoundFile',\n    'onOpenSoundReadStream',\n    'onWriteSoundFile',\n    'onOpenSoundWriteStream',\n    'onSoundStreamData',\n    'onCloseSoundStream',\n];\nclass WasmWorkletProcessor extends AudioWorkletProcessor {\n    constructor() {\n        super();\n        this.port.onmessage = this.onMessage.bind(this);\n        this.settings = {\n            blockSize: null,\n            sampleRate,\n        };\n        this.dspConfigured = false;\n        this.engine = null;\n    }\n    process(inputs, outputs) {\n        const output = outputs[0];\n        const input = inputs[0];\n        if (!this.dspConfigured) {\n            if (!this.engine) {\n                return true;\n            }\n            this.settings.blockSize = output[0].length;\n            this.engine.initialize(this.settings.sampleRate, this.settings.blockSize);\n            this.dspConfigured = true;\n        }\n        this.engine.dspLoop(input, output);\n        return true;\n    }\n    onMessage(messageEvent) {\n        const message = messageEvent.data;\n        switch (message.type) {\n            case 'code:WASM':\n                this.setWasm(message.payload.wasmBuffer);\n                break;\n            case 'code:JS':\n                this.setJsCode(message.payload.jsCode);\n                break;\n            case 'io:messageReceiver':\n                this.engine.io.messageReceivers[message.payload.nodeId][message.payload.portletId](message.payload.message);\n                break;\n            case 'fs':\n                const returned = this.engine.globals.fs[message.payload.functionName].apply(null, message.payload.arguments);\n                this.port.postMessage({\n                    type: 'fs',\n                    payload: {\n                        functionName: message.payload.functionName + '_return',\n                        operationId: message.payload.arguments[0],\n                        returned,\n                    },\n                });\n                break;\n            case 'destroy':\n                this.destroy();\n                break;\n            default:\n                new Error(`unknown message type ${message.type}`);\n        }\n    }\n    // TODO : control for channelCount of wasmModule\n    setWasm(wasmBuffer) {\n        return AssemblyScriptWasmBindings.createEngine(wasmBuffer).then((engine) => this.setEngine(engine));\n    }\n    setJsCode(code) {\n        const engine = JavaScriptBindings.createEngine(code);\n        this.setEngine(engine);\n    }\n    setEngine(engine) {\n        if (engine.globals.fs) {\n            FS_CALLBACK_NAMES.forEach((functionName) => {\n                engine.globals.fs[functionName] = (...args) => {\n                    // We don't use transferables, because that would imply reallocating each time new array in the engine.\n                    this.port.postMessage({\n                        type: 'fs',\n                        payload: {\n                            functionName,\n                            arguments: args,\n                        },\n                    });\n                };\n            });\n        }\n        Object.entries(engine.metadata.settings.io.messageSenders).forEach(([nodeId, portletIds]) => {\n            portletIds.forEach((portletId) => {\n                engine.io.messageSenders[nodeId][portletId] = (message) => {\n                    this.port.postMessage({\n                        type: 'io:messageSender',\n                        payload: {\n                            nodeId,\n                            portletId,\n                            message,\n                        },\n                    });\n                };\n            });\n        });\n        this.engine = engine;\n        this.dspConfigured = false;\n    }\n    destroy() {\n        this.process = () => false;\n    }\n}\nregisterProcessor('webpd-node', WasmWorkletProcessor);\n"),KS=(e,n,t)=>{const r=qS(t);return{keys:[...r.keys,n],parents:[...r.parents,e]}},qS=e=>e||{keys:[],parents:[]},YS=()=>{throw new Error("This Proxy is read-only.")},XS=(e,n,t,r)=>{const a=r||{keys:[],parents:[]},o=XS.ensureValue(n,e,t,a);if(r){const n=r.parents[r.parents.length-1],t=r.keys[r.keys.length-1];t in n&&!("LiteralDefaultNull"in e)||(n[t]=o)}return"Literal"in e||"LiteralDefaultNull"in e?o:new Proxy(o,{get:(n,r)=>{const i=String(r);let s;if("Index"in e)s=e.Index(i,t,a);else{if(!("Interface"in e))throw new Error("no builder");if(!(i in e.Interface))throw new Error('Interface has no entry "'.concat(String(i),'"'));s=e.Interface[i]}return XS(s,i in o?o[i]:void 0,t,KS(o,i,a))},set:YS})};XS.ensureValue=(e,n,t,r,a)=>{if("Index"in n)return e||n.indexConstructor(t,qS(r));if("Interface"in n){const o=e||{};return Object.entries(n.Interface).forEach((e=>{let[n,i]=e;o[n]=XS.ensureValue(o[n],i,t,KS(o,n,r),KS(o,n,a))})),o}if("Literal"in n)return e||n.Literal(t,qS(r));if("LiteralDefaultNull"in n)return a?e||null:e||n.LiteralDefaultNull(t,qS(r));throw new Error("Invalid Assigner")},XS.Interface=e=>({Interface:e}),XS.Index=(e,n)=>({Index:e,indexConstructor:n||(()=>({}))}),XS.Literal=e=>({Literal:e}),XS.LiteralDefaultNull=e=>({LiteralDefaultNull:e});const JS=(e,n)=>new Proxy(e,{get:(e,t)=>{const r=String(t);if(!((e,n,t)=>{if(!(n in e)){if(["toJSON","Symbol(Symbol.toStringTag)","constructor","$typeof","$$typeof","@@__IMMUTABLE_ITERABLE__@@","@@__IMMUTABLE_RECORD__@@","then"].includes(n))return!0;throw new Error("namespace".concat(t?" <".concat(t.keys.join("."),">"):""," doesn't know key \"").concat(String(n),'"'))}return!1})(e,r,n))return e[r]},set:(e,n,t)=>{const r=ZS(String(n));if(e.hasOwnProperty(r))throw new Error('Key "'.concat(String(r),'" is protected and cannot be overwritten.'));return e[r]=t,t}}),ZS=e=>{const n=/\$(.*)/.exec(e);return n?n[1]:e},QS=(e,n)=>{const t=e[n];if(t)return t;throw new Error('Node "'.concat(n,'" not found in graph'))},ek=(e,n)=>{const t=e[n];if(!t)throw new Error("node [".concat(n,"] is not implemented"));return{dependencies:[],...t}},nk=e=>{const n=[];for(let t=0;t<e;t++)n.push(t);return n},tk=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return ok({astType:"Sequence",content:rk(ak(e,t))})},rk=e=>{const n=e.flatMap((e=>"string"===typeof e?[e]:"number"===typeof e?[e.toString()]:null===e?[]:Array.isArray(e)?rk(ak(e,nk(e.length-1).map((()=>"\n")))):"object"===typeof e&&"Sequence"===e.astType?e.content:[e])),[t,r]=n.reduce(((e,n)=>{let[t,r]=e;return"string"===typeof n?[t,r+n]:r.length?[[...t,r,n],""]:[[...t,n],""]}),[[],""]);return r.length&&t.push(r),t},ak=(e,n)=>0===e.length?[]:e.slice(1).reduce(((e,t,r)=>e.concat([n[r],t])),[e[0]]),ok=e=>({...e});var ik,sk;const lk="G",uk="N",ck="NT",dk="IO",pk="COLD";XS.Interface({nodes:XS.Index((e=>XS.Interface({signalOuts:XS.Index((n=>XS.Literal((()=>fk(uk,e,"outs",n))))),messageSenders:XS.Index((n=>XS.Literal((()=>fk(uk,e,"snds",n))))),messageReceivers:XS.Index((n=>XS.Literal((()=>fk(uk,e,"rcvs",n))))),state:XS.LiteralDefaultNull((()=>fk(uk,e,"state")))}))),nodeImplementations:XS.Index(((e,n)=>{let{nodeImplementations:t}=n;const r=ek(t,e),a=(r.flags?r.flags.alphaName:null)||e;return XS.Index((e=>XS.Literal((()=>fk(ck,a,e)))))})),globals:XS.Index((e=>XS.Index((n=>["fs"].includes(e)?XS.Literal((()=>fk(lk,e,n))):"core"===e?XS.Literal((()=>n)):XS.Literal((()=>fk(lk,e,n))))))),io:XS.Interface({messageReceivers:XS.Index((e=>XS.Index((n=>XS.Literal((()=>fk(dk,"rcv",e,n))))))),messageSenders:XS.Index((e=>XS.Index((n=>XS.Literal((()=>fk(dk,"snd",e,n)))))))}),coldDspGroups:XS.Index((e=>XS.Literal((()=>fk(pk,e)))))}),XS.Interface({graph:XS.Literal(((e,n)=>({fullTraversal:[],hotDspGroup:{traversal:[],outNodesIds:[]},coldDspGroups:JS({},n)}))),nodeImplementations:XS.Index(((e,n)=>{let{nodeImplementations:t}=n;return XS.Literal((()=>({nodeImplementation:ek(t,e),stateClass:null,core:null})))}),((e,n)=>JS({},n))),nodes:XS.Index(((e,n)=>{let{graph:t}=n;return XS.Literal((()=>({nodeType:QS(t,e).type,messageReceivers:{},messageSenders:{},signalOuts:{},signalIns:{},initialization:tk(ik||(ik=r([""]))),dsp:{loop:tk(sk||(sk=r([""]))),inlets:{}},state:null})))}),((e,n)=>JS({},n))),dependencies:XS.Literal((()=>{return{imports:[],exports:[],ast:(e=[],{astType:"Sequence",content:rk(ak(e,nk(e.length-1).map((()=>"\n"))))})};var e})),io:XS.Interface({messageReceivers:XS.Index((e=>XS.Literal(((e,n)=>JS({},n)))),((e,n)=>JS({},n))),messageSenders:XS.Index((e=>XS.Literal(((e,n)=>JS({},n)))),((e,n)=>JS({},n)))})});const fk=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.map(hk).join("_")},hk=e=>{if(!mk.exec(e))throw new Error('Invalid variable name for code generation "'.concat(e,'"'));return e},mk=/^[a-zA-Z0-9_]+$/;const gk=e=>Go((async n=>{const t="".concat(e,"/").concat(n.endsWith(".pd")?n:"".concat(n,".pd")),r=await fetch(t);if(!r.ok)throw new Ho(n);return await r.text()}));const yk={},bk={};class vk{constructor(e,n){this.url=e,this.sound=n,this.frameCount=n[0].length,this.readPosition=0}}const wk=async e=>{if(yk[e])return yk[e];const n=await(async e=>{let n;try{n=await US(e,{retries:3})}catch(t){throw new VS(n.status,t.toString())}if(!n.ok){const e=await n.text();throw new VS(n.status,e)}return n.arrayBuffer()})(e);return{type:"binary",data:n}},Sk=async(e,n)=>{let t=yk[e]||await wk(e);switch(t.type){case"binary":return(e=>{const n=[];for(let t=0;t<e.numberOfChannels;t++)n.push(e.getChannelData(t));return n})(await n.decodeAudioData(t.data));case"sound":return t.data.map((e=>e.slice()))}},kk=e=>bk[e],xk=e=>{console.log("KILL STREAM",e),delete bk[e]},Ik=(e,n)=>{const t=e.sound.map((t=>t.slice(e.readPosition,e.readPosition+n)));return e.readPosition+=n,t},_k=(e,n)=>{e.sound=e.sound.map(((e,t)=>{const r=new Float32Array(e.length+n[t].length);return r.set(e),r.set(n[t],e.length),r})),e.frameCount=e.sound[0].length,yk[e.url].data=e.sound};var Ak=async(e,n)=>{yk[n]={type:"sound",data:e}},Tk=Sk,Ek=async(e,n,t,r)=>{const a=await Sk(n,r);return bk[e]=new vk(n,WS(a,t)),bk[e]},Ok=async(e,n,t)=>{const r=[];for(let a=0;a<t;a++)r.push(new Float32Array(0));return bk[e]=new vk(n,r),yk[n]={type:"sound",data:r},bk[e]};const Ck=441e3;var Nk=async(e,n,t)=>{if("onOpenSoundReadStream"===n.functionName){const[a,o,[i]]=n.arguments;try{const n=$S(t.rootUrl,o);await Ek(a,n,i,e.context)}catch(r){return console.error(r),void e.port.postMessage({type:"fs",payload:{functionName:"closeSoundStream",arguments:[a,1]}})}Mk(e,a,0)}else if("sendSoundStreamData_return"===n.functionName){if(!kk(n.operationId))throw new Error("unknown stream ".concat(n.operationId));Mk(e,n.operationId,n.returned)}else if("closeSoundStream_return"===n.functionName){kk(n.operationId)&&xk(n.operationId)}};const Mk=(e,n,t)=>{const r=e.context.sampleRate,a=Math.max(t-220500,10)/r,o=Ck-(t-a*r);setTimeout((()=>{const t=kk(n);if(t)if(t.readPosition<t.frameCount){const r=Ik(t,o);e.port.postMessage({type:"fs",payload:{functionName:"sendSoundStreamData",arguments:[n,r]}},r.map((e=>e.buffer)))}else e.port.postMessage({type:"fs",payload:{functionName:"closeSoundStream",arguments:[n,0]}});else console.log("stream ".concat(n," was maybe closed"))}),1e3*a)};var Pk=async(e,n,t)=>{if("onOpenSoundWriteStream"===n.functionName){const[e,r,[a]]=n.arguments,o=$S(t.rootUrl,r);await Ok(e,o,a)}else if("onSoundStreamData"===n.functionName){const[e,t]=n.arguments,r=kk(e);if(!r)throw new Error("unknown stream ".concat(e));_k(r,t)}else if("closeSoundStream_return"===n.functionName){kk(n.operationId)&&xk(n.operationId)}},Fk=async(e,n,t)=>{const r=n.data;if("fs"!==r.type)throw new Error("Unknown message type from node ".concat(r.type));const{payload:a}=r;if("onReadSoundFile"===a.functionName||"sendReadSoundFileResponse_return"===a.functionName)(async(e,n,t)=>{if("onReadSoundFile"===n.functionName){const[a,o,[i]]=n.arguments,s=$S(t.rootUrl,o);let l=0,u=null;try{u=await Tk(s,e.context)}catch(r){l=1,console.error(r)}u&&(u=WS(u,i)),e.port.postMessage({type:"fs",payload:{functionName:"sendReadSoundFileResponse",arguments:[a,l,u]}},u.map((e=>e.buffer)))}else n.functionName})(e,a,t);else if("onOpenSoundReadStream"===a.functionName||"sendSoundStreamData_return"===a.functionName)Nk(e,a,t);else if("onWriteSoundFile"===a.functionName||"sendWriteSoundFileResponse_return"===a.functionName)(async(e,n,t)=>{if("onWriteSoundFile"===n.functionName){const[r,a,o,[i]]=n.arguments,s=WS(a,i),l=$S(t.rootUrl,o);await Ak(s,l);let u=0;e.port.postMessage({type:"fs",payload:{functionName:"sendWriteSoundFileResponse",arguments:[r,u]}})}else n.functionName})(e,a,t);else if("onOpenSoundWriteStream"===a.functionName||"onSoundStreamData"===a.functionName)Pk(0,a,t);else if("closeSoundStream_return"===a.functionName)Pk(0,a,t),Nk(e,a,t);else{if("onCloseSoundStream"!==a.functionName)throw new Error("Unknown callback ".concat(a.functionName));(async(e,n,t)=>{"onCloseSoundStream"===n.functionName&&xk(n.arguments[0])})(0,a)}};const Rk=e=>Lk(e)?new URL(".",e).href:new URL(".",new URL(e,document.URL).href).href,Lk=e=>{try{if(new URL(e).origin!==new URL(document.URL,document.baseURI).origin)return!0}catch(ye){new URL(e,document.baseURI)}return!1},Dk=fa("shared/clean"),jk=0,zk=1,Bk=2,Uk=3,Wk={artefacts:RS()},$k={buildStatus:jk,step:null},Vk=va({name:"buildOutput",initialState:$k,reducers:{startBuild:e=>{e.buildStatus=zk},buildSuccess:(e,n)=>{Wk.artefacts=n.payload.artefacts,e.buildStatus=Bk},startStep:(e,n)=>{e.step=n.payload},stepComplete:(e,n)=>{Wk.artefacts=n.payload.artefacts,1===n.payload.status&&(e.buildStatus=Uk)}},extraReducers(e){const n=()=>(Wk.artefacts=RS(),$k);e.addCase(Dk,n),e.addCase(oo.actions.setFormat,n),e.addCase(to.actions.setLocalFile,n),e.addCase(to.actions.fetchUrlSuccess,n)}}),Gk={warnings:null,errors:null},Hk=va({name:"console",initialState:Gk,reducers:{setState:(e,n)=>n.payload},extraReducers(e){e.addCase(Vk.actions.startBuild,(()=>Gk)),e.addCase(Vk.actions.stepComplete,((e,n)=>{n.payload.warnings&&(e.warnings=[...e.warnings||[],...n.payload.warnings],0===e.warnings.length&&(e.warnings=null)),n.payload.errors&&(e.errors=[...e.errors||[],...n.payload.errors])})),e.addCase(to.actions.setUrl,(()=>Gk)),e.addCase(to.actions.setLocalFile,(()=>Gk)),e.addCase(to.actions.clear,(()=>Gk)),e.addCase(oo.actions.setFormat,(()=>Gk)),e.addCase(to.actions.fetchUrlError,((e,n)=>{e.errors=[n.payload]}))}}),Kk=va({name:"app",initialState:{isInitialized:!1,willBuildOnLoad:!1,debug:!1},reducers:{setWillBuildOnLoad:(e,n)=>{e.willBuildOnLoad=n.payload},initializationDone:e=>{e.isInitialized=!0},setDebug:(e,n)=>{e.debug=n.payload},pointerUp:()=>{}},extraReducers:e=>{e.addCase(Vk.actions.buildSuccess,(e=>{e.willBuildOnLoad=!0}))}});var qk=t(457),Yk="NOT_FOUND";var Xk=function(e,n){return e===n};function Jk(e,n){var t="object"===typeof n?n:{equalityCheck:n},r=t.equalityCheck,a=void 0===r?Xk:r,o=t.maxSize,i=void 0===o?1:o,s=t.resultEqualityCheck,l=function(e){return function(n,t){if(null===n||null===t||n.length!==t.length)return!1;for(var r=n.length,a=0;a<r;a++)if(!e(n[a],t[a]))return!1;return!0}}(a),u=1===i?function(e){var n;return{get:function(t){return n&&e(n.key,t)?n.value:Yk},put:function(e,t){n={key:e,value:t}},getEntries:function(){return n?[n]:[]},clear:function(){n=void 0}}}(l):function(e,n){var t=[];function r(e){var r=t.findIndex((function(t){return n(e,t.key)}));if(r>-1){var a=t[r];return r>0&&(t.splice(r,1),t.unshift(a)),a.value}return Yk}return{get:r,put:function(n,a){r(n)===Yk&&(t.unshift({key:n,value:a}),t.length>e&&t.pop())},getEntries:function(){return t},clear:function(){t=[]}}}(i,l);function c(){var n=u.get(arguments);if(n===Yk){if(n=e.apply(null,arguments),s){var t=u.getEntries().find((function(e){return s(e.value,n)}));t&&(n=t.value)}u.put(arguments,n)}return n}return c.clearCache=function(){return u.clear()},c}function Zk(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o,i=0,s={memoizeOptions:void 0},l=r.pop();if("object"===typeof l&&(s=l,l=r.pop()),"function"!==typeof l)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof l+"]");var u=s.memoizeOptions,c=void 0===u?t:u,d=Array.isArray(c)?c:[c],p=function(e){var n=Array.isArray(e[0])?e[0]:e;if(!n.every((function(e){return"function"===typeof e}))){var t=n.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+t+"]")}return n}(r),f=e.apply(void 0,[function(){return i++,l.apply(null,arguments)}].concat(d)),h=e((function(){for(var e=[],n=p.length,t=0;t<n;t++)e.push(p[t].apply(null,arguments));return o=f.apply(null,e)}));return Object.assign(h,{resultFunc:l,memoizedResultFunc:f,dependencies:p,lastResult:function(){return o},recomputations:function(){return i},resetRecomputations:function(){return i=0}}),h}}var Qk=Zk(Jk);const ex=e=>e.buildInput.url,nx=e=>e.buildInput.filepath,tx=e=>e.buildInput.arrayBuffer,rx=Qk(ex,nx,((e,n)=>{let t=e||n;return t?_p(t)||"pd":null})),ax=Qk(rx,tx,((e,n)=>null===e||null===n?null:((e,n,t)=>{switch(t){case"pd":return{...e,pd:qo(n)};case"pdJson":return{...e,pdJson:JSON.parse(qo(n))};case"dspGraph":return{...e,dspGraph:JSON.parse(qo(n))};case"javascript":return{...e,javascript:qo(n)};case"assemblyscript":return{...e,assemblyscript:qo(n)};case"wasm":return{...e,wasm:n};case"wav":return{...e,wav:new Uint8Array(n)};default:throw new Error("Unexpected format for preloading ".concat(t))}})(RS(),n,e))),ox=e=>e.buildOutput.format,ix=e=>e.buildOutput.codeTarget,sx=e=>e.buildOutput.previewDurationSeconds,lx=Qk(rx,(e=>{const n=(e=>new Set(Ep(Ip,[]).filter((n=>n.includes(e))).map((n=>n.slice(n.indexOf(e)+1))).flat()))(e=e||"pd");return["patchPlayer",...ro.filter((e=>n.has(e)))]}));var ux=function(e){return"@@redux-saga/"+e},cx=ux("CANCEL_PROMISE"),dx=ux("CHANNEL_END"),px=ux("IO"),fx=ux("MATCH"),hx=ux("MULTICAST"),mx=ux("SAGA_ACTION"),gx=ux("SELF_CANCELLATION"),yx=ux("TASK"),bx=ux("TASK_CANCEL"),vx=ux("TERMINATE"),wx=ux("LOCATION"),Sx=t(462);var kx=function(e){return null===e||void 0===e},xx=function(e){return null!==e&&void 0!==e},Ix=function(e){return"function"===typeof e},_x=function(e){return"string"===typeof e},Ax=Array.isArray,Tx=function(e){return e&&Ix(e.then)},Ex=function(e){return e&&Ix(e.next)&&Ix(e.throw)},Ox=function e(n){return n&&(_x(n)||Mx(n)||Ix(n)||Ax(n)&&n.every(e))},Cx=function(e){return e&&Ix(e.take)&&Ix(e.close)},Nx=function(e){return Ix(e)&&e.hasOwnProperty("toString")},Mx=function(e){return Boolean(e)&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype},Px=function(e){return Cx(e)&&e[hx]};const Fx=function(e,n){var t;void 0===n&&(n=!0);var r=new Promise((function(r){t=setTimeout(r,Math.min(2147483647,e),n)}));return r[cx]=function(){clearTimeout(t)},r};var Rx=function(e){return function(){return e}},Lx=Rx(!0),Dx=function(){};var jx=function(e){return e};"function"===typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var zx=function(e,n){(0,Sx.Z)(e,n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(n).forEach((function(t){e[t]=n[t]}))};function Bx(e,n){var t=e.indexOf(n);t>=0&&e.splice(t,1)}var Ux=function(e){throw e},Wx=function(e){return{value:e,done:!0}};function $x(e,n,t){void 0===n&&(n=Ux),void 0===t&&(t="iterator");var r={meta:{name:t},next:e,throw:n,return:Wx,isSagaIterator:!0};return"undefined"!==typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function Vx(e,n){var t=n.sagaStack;console.error(e),console.error(t)}var Gx=function(e){return Array.apply(null,new Array(e))},Hx=function(e){return function(n){return e(Object.defineProperty(n,mx,{value:!0}))}},Kx=function(e){return e===vx},qx=function(e){return e===bx},Yx=function(e){return Kx(e)||qx(e)};function Xx(e,n){var t=Object.keys(e),r=t.length;var a,o=0,i=Ax(e)?Gx(r):{},s={};return t.forEach((function(e){var t=function(t,s){a||(s||Yx(t)?(n.cancel(),n(t,s)):(i[e]=t,++o===r&&(a=!0,n(i))))};t.cancel=Dx,s[e]=t})),n.cancel=function(){a||(a=!0,t.forEach((function(e){return s[e].cancel()})))},s}function Jx(e){return{name:e.name||"anonymous",location:Zx(e)}}function Zx(e){return e[wx]}function Qx(e,n){void 0===e&&(e=10);var t=new Array(e),r=0,a=0,o=0,i=function(n){t[a]=n,a=(a+1)%e,r++},s=function(){if(0!=r){var n=t[o];return t[o]=null,r--,o=(o+1)%e,n}},l=function(){for(var e=[];r;)e.push(s());return e};return{isEmpty:function(){return 0==r},put:function(s){var u;if(r<e)i(s);else switch(n){case 1:throw new Error("Channel's Buffer overflow!");case 3:t[a]=s,o=a=(a+1)%e;break;case 4:u=2*e,t=l(),r=t.length,a=t.length,o=0,t.length=u,e=u,i(s)}},take:s,flush:l}}var eI=function(e){return Qx(e,4)},nI="TAKE",tI="PUT",rI="ALL",aI="RACE",oI="CALL",iI="CPS",sI="FORK",lI="JOIN",uI="CANCEL",cI="SELECT",dI="ACTION_CHANNEL",pI="CANCELLED",fI="FLUSH",hI="GET_CONTEXT",mI="SET_CONTEXT",gI=function(e,n){var t;return(t={})[px]=!0,t.combinator=!1,t.type=e,t.payload=n,t};function yI(e,n){return void 0===e&&(e="*"),Ox(e)?(xx(n)&&console.warn("take(pattern) takes one argument but two were provided. Consider passing an array for listening to several action types"),gI(nI,{pattern:e})):Px(e)&&xx(n)&&Ox(n)?gI(nI,{channel:e,pattern:n}):Cx(e)?(xx(n)&&console.warn("take(channel) takes one argument but two were provided. Second argument is ignored."),gI(nI,{channel:e})):void 0}function bI(e,n){return kx(n)&&(n=e,e=void 0),gI(tI,{channel:e,action:n})}function vI(e,n){var t,r=null;return Ix(e)?t=e:(Ax(e)?(r=e[0],t=e[1]):(r=e.context,t=e.fn),r&&_x(t)&&Ix(r[t])&&(t=r[t])),{context:r,fn:t,args:n}}function wI(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return gI(oI,vI(e,t))}function SI(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return gI(sI,vI(e,t))}function kI(e){void 0===e&&(e=jx);for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return gI(cI,{selector:e,args:t})}var xI=wI.bind(null,Fx);function II(){var e={};return e.promise=new Promise((function(n,t){e.resolve=n,e.reject=t})),e}const _I=II;var AI=[],TI=0;function EI(e){try{NI(),e()}finally{MI()}}function OI(e){AI.push(e),TI||(NI(),PI())}function CI(e){try{return NI(),e()}finally{PI()}}function NI(){TI++}function MI(){TI--}function PI(){var e;for(MI();!TI&&void 0!==(e=AI.shift());)EI(e)}var FI=function(e){return function(n){return e.some((function(e){return zI(e)(n)}))}},RI=function(e){return function(n){return e(n)}},LI=function(e){return function(n){return n.type===String(e)}},DI=function(e){return function(n){return n.type===e}},jI=function(){return Lx};function zI(e){var n="*"===e?jI:_x(e)?LI:Ax(e)?FI:Nx(e)?LI:Ix(e)?RI:Mx(e)?DI:null;if(null===n)throw new Error("invalid pattern: "+e);return n(e)}var BI={type:dx},UI=function(e){return e&&e.type===dx};function WI(e){void 0===e&&(e=eI());var n=!1,t=[];return{take:function(r){n&&e.isEmpty()?r(BI):e.isEmpty()?(t.push(r),r.cancel=function(){Bx(t,r)}):r(e.take())},put:function(r){if(!n){if(0===t.length)return e.put(r);t.shift()(r)}},flush:function(t){n&&e.isEmpty()?t(BI):t(e.flush())},close:function(){if(!n){n=!0;var e=t;t=[];for(var r=0,a=e.length;r<a;r++){(0,e[r])(BI)}}}}}function $I(){var e=function(){var e,n=!1,t=[],r=t,a=function(){r===t&&(r=t.slice())},o=function(){n=!0;var e=t=r;r=[],e.forEach((function(e){e(BI)}))};return(e={})[hx]=!0,e.put=function(e){if(!n)if(UI(e))o();else for(var a=t=r,i=0,s=a.length;i<s;i++){var l=a[i];l[fx](e)&&(l.cancel(),l(e))}},e.take=function(e,t){void 0===t&&(t=jI),n?e(BI):(e[fx]=t,a(),r.push(e),e.cancel=function(e){var n=!1;return function(){n||(n=!0,e())}}((function(){a(),Bx(r,e)})))},e.close=o,e}(),n=e.put;return e.put=function(e){e[mx]?n(e):OI((function(){n(e)}))},e}var VI=0,GI=1,HI=2,KI=3;function qI(e,n){var t=e[cx];Ix(t)&&(n.cancel=t),e.then(n,(function(e){n(e,!0)}))}var YI,XI=0,JI=function(){return++XI};function ZI(e){e.isRunning()&&e.cancel()}var QI=((YI={})[nI]=function(e,n,t){var r=n.channel,a=void 0===r?e.channel:r,o=n.pattern,i=n.maybe,s=function(e){e instanceof Error?t(e,!0):!UI(e)||i?t(e):t(vx)};try{a.take(s,xx(o)?zI(o):null)}catch(l){return void t(l,!0)}t.cancel=s.cancel},YI[tI]=function(e,n,t){var r=n.channel,a=n.action,o=n.resolve;OI((function(){var n;try{n=(r?r.put:e.dispatch)(a)}catch(i){return void t(i,!0)}o&&Tx(n)?qI(n,t):t(n)}))},YI[rI]=function(e,n,t,r){var a=r.digestEffect,o=XI,i=Object.keys(n);if(0!==i.length){var s=Xx(n,t);i.forEach((function(e){a(n[e],o,s[e],e)}))}else t(Ax(n)?[]:{})},YI[aI]=function(e,n,t,r){var a=r.digestEffect,o=XI,i=Object.keys(n),s=Ax(n)?Gx(i.length):{},l={},u=!1;i.forEach((function(e){var n=function(n,r){u||(r||Yx(n)?(t.cancel(),t(n,r)):(t.cancel(),u=!0,s[e]=n,t(s)))};n.cancel=Dx,l[e]=n})),t.cancel=function(){u||(u=!0,i.forEach((function(e){return l[e].cancel()})))},i.forEach((function(e){u||a(n[e],o,l[e],e)}))},YI[oI]=function(e,n,t,r){var a=n.context,o=n.fn,i=n.args,s=r.task;try{var l=o.apply(a,i);if(Tx(l))return void qI(l,t);if(Ex(l))return void c_(e,l,s.context,XI,Jx(o),!1,t);t(l)}catch(u){t(u,!0)}},YI[iI]=function(e,n,t){var r=n.context,a=n.fn,o=n.args;try{var i=function(e,n){kx(e)?t(n):t(e,!0)};a.apply(r,o.concat(i)),i.cancel&&(t.cancel=i.cancel)}catch(s){t(s,!0)}},YI[sI]=function(e,n,t,r){var a=n.context,o=n.fn,i=n.args,s=n.detached,l=r.task,u=function(e){var n=e.context,t=e.fn,r=e.args;try{var a=t.apply(n,r);if(Ex(a))return a;var o=!1;return $x((function(e){return o?{value:e,done:!0}:(o=!0,{value:a,done:!Tx(a)})}))}catch(i){return $x((function(){throw i}))}}({context:a,fn:o,args:i}),c=function(e,n){return e.isSagaIterator?{name:e.meta.name}:Jx(n)}(u,o);CI((function(){var n=c_(e,u,l.context,XI,c,s,void 0);s?t(n):n.isRunning()?(l.queue.addTask(n),t(n)):n.isAborted()?l.queue.abort(n.error()):t(n)}))},YI[lI]=function(e,n,t,r){var a=r.task,o=function(e,n){if(e.isRunning()){var t={task:a,cb:n};n.cancel=function(){e.isRunning()&&Bx(e.joiners,t)},e.joiners.push(t)}else e.isAborted()?n(e.error(),!0):n(e.result())};if(Ax(n)){if(0===n.length)return void t([]);var i=Xx(n,t);n.forEach((function(e,n){o(e,i[n])}))}else o(n,t)},YI[uI]=function(e,n,t,r){var a=r.task;n===gx?ZI(a):Ax(n)?n.forEach(ZI):ZI(n),t()},YI[cI]=function(e,n,t){var r=n.selector,a=n.args;try{t(r.apply(void 0,[e.getState()].concat(a)))}catch(o){t(o,!0)}},YI[dI]=function(e,n,t){var r=n.pattern,a=WI(n.buffer),o=zI(r),i=function n(t){UI(t)||e.channel.take(n,o),a.put(t)},s=a.close;a.close=function(){i.cancel(),s()},e.channel.take(i,o),t(a)},YI[pI]=function(e,n,t,r){t(r.task.isCancelled())},YI[fI]=function(e,n,t){n.flush(t)},YI[hI]=function(e,n,t,r){t(r.task.context[n])},YI[mI]=function(e,n,t,r){var a=r.task;zx(a.context,n),t()},YI);function e_(e,n){return e+"?"+n}function n_(e){var n=e.name,t=e.location;return t?n+"  "+e_(t.fileName,t.lineNumber):n}function t_(e){var n=function(e,n){var t;return(t=[]).concat.apply(t,n.map(e))}((function(e){return e.cancelledTasks}),e);return n.length?["Tasks cancelled due to error:"].concat(n).join("\n"):""}var r_=null,a_=[],o_=function(e){e.crashedEffect=r_,a_.push(e)},i_=function(){r_=null,a_.length=0},s_=function(e){r_=e},l_=function(){var e=a_[0],n=a_.slice(1),t=e.crashedEffect?function(e){var n=Zx(e);return n?n.code+"  "+e_(n.fileName,n.lineNumber):""}(e.crashedEffect):null;return["The above error occurred in task "+n_(e.meta)+(t?" \n when executing effect "+t:"")].concat(n.map((function(e){return"    created by "+n_(e.meta)})),[t_(a_)]).join("\n")};function u_(e,n,t,r,a,o,i){var s;void 0===i&&(i=Dx);var l,u,c=VI,d=null,p=[],f=Object.create(t),h=function(e,n,t){var r,a=[],o=!1;function i(e){n(),l(),t(e,!0)}function s(n){a.push(n),n.cont=function(s,l){o||(Bx(a,n),n.cont=Dx,l?i(s):(n===e&&(r=s),a.length||(o=!0,t(r))))}}function l(){o||(o=!0,a.forEach((function(e){e.cont=Dx,e.cancel()})),a=[])}return s(e),{addTask:s,cancelAll:l,abort:i,getTasks:function(){return a}}}(n,(function(){p.push.apply(p,h.getTasks().map((function(e){return e.meta.name})))}),m);function m(n,t){if(t){if(c=HI,o_({meta:a,cancelledTasks:p}),g.isRoot){var r=l_();i_(),e.onError(n,{sagaStack:r})}u=n,d&&d.reject(n)}else n===bx?c=GI:c!==GI&&(c=KI),l=n,d&&d.resolve(n);g.cont(n,t),g.joiners.forEach((function(e){e.cb(n,t)})),g.joiners=null}var g=((s={})[yx]=!0,s.id=r,s.meta=a,s.isRoot=o,s.context=f,s.joiners=[],s.queue=h,s.cancel=function(){c===VI&&(c=GI,h.cancelAll(),m(bx,!1))},s.cont=i,s.end=m,s.setContext=function(e){zx(f,e)},s.toPromise=function(){return d||(d=_I(),c===HI?d.reject(u):c!==VI&&d.resolve(l)),d.promise},s.isRunning=function(){return c===VI},s.isCancelled=function(){return c===GI||c===VI&&n.status===GI},s.isAborted=function(){return c===HI},s.result=function(){return l},s.error=function(){return u},s);return g}function c_(e,n,t,r,a,o,i){var s=e.finalizeRunEffect((function(n,t,r){if(Tx(n))qI(n,r);else if(Ex(n))c_(e,n,u.context,t,a,!1,r);else if(n&&n[px]){(0,QI[n.type])(e,n.payload,r,c)}else r(n)}));d.cancel=Dx;var l={meta:a,cancel:function(){l.status===VI&&(l.status=GI,d(bx))},status:VI},u=u_(e,l,t,r,a,o,i),c={task:u,digestEffect:p};return i&&(i.cancel=u.cancel),d(),u;function d(e,t){try{var a;t?(a=n.throw(e),i_()):qx(e)?(l.status=GI,d.cancel(),a=Ix(n.return)?n.return(bx):{done:!0,value:bx}):a=Kx(e)?Ix(n.return)?n.return():{done:!0}:n.next(e),a.done?(l.status!==GI&&(l.status=KI),l.cont(a.value)):p(a.value,r,d)}catch(o){if(l.status===GI)throw o;l.status=HI,l.cont(o,!0)}}function p(n,t,r,a){void 0===a&&(a="");var o,i=JI();function l(t,a){o||(o=!0,r.cancel=Dx,e.sagaMonitor&&(a?e.sagaMonitor.effectRejected(i,t):e.sagaMonitor.effectResolved(i,t)),a&&s_(n),r(t,a))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:i,parentEffectId:t,label:a,effect:n}),l.cancel=Dx,r.cancel=function(){o||(o=!0,l.cancel(),l.cancel=Dx,e.sagaMonitor&&e.sagaMonitor.effectCancelled(i))},s(n,i,l)}}function d_(e,n){var t=e.channel,r=void 0===t?$I():t,a=e.dispatch,o=e.getState,i=e.context,s=void 0===i?{}:i,l=e.sagaMonitor,u=e.effectMiddlewares,c=e.onError,d=void 0===c?Vx:c;for(var p=arguments.length,f=new Array(p>2?p-2:0),h=2;h<p;h++)f[h-2]=arguments[h];var m=n.apply(void 0,f);var g,y=JI();if(l&&(l.rootSagaStarted=l.rootSagaStarted||Dx,l.effectTriggered=l.effectTriggered||Dx,l.effectResolved=l.effectResolved||Dx,l.effectRejected=l.effectRejected||Dx,l.effectCancelled=l.effectCancelled||Dx,l.actionDispatched=l.actionDispatched||Dx,l.rootSagaStarted({effectId:y,saga:n,args:f})),u){var b=Kr.apply(void 0,u);g=function(e){return function(n,t,r){return b((function(n){return e(n,t,r)}))(n)}}}else g=jx;var v={channel:r,dispatch:Hx(a),getState:o,sagaMonitor:l,onError:d,finalizeRunEffect:g};return CI((function(){var e=c_(v,m,s,y,Jx(n),!0,void 0);return l&&l.effectResolved(y,e),e}))}const p_=function(e){var n,t=void 0===e?{}:e,r=t.context,a=void 0===r?{}:r,o=t.channel,i=void 0===o?$I():o,s=t.sagaMonitor,l=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(t,["context","channel","sagaMonitor"]);function u(e){var t=e.getState,r=e.dispatch;return n=d_.bind(null,(0,Sx.Z)({},l,{context:a,channel:i,dispatch:r,getState:t,sagaMonitor:s})),function(e){return function(n){s&&s.actionDispatched&&s.actionDispatched(n);var t=e(n);return i.put(n),t}}}return u.run=function(){return n.apply(void 0,arguments)},u.setContext=function(e){zx(a,e)},u},f_=p_;var h_=function(e){return{done:!0,value:e}},m_={};function g_(e){return Cx(e)?"channel":Nx(e)?String(e):Ix(e)?e.name:String(e)}function y_(e,n,t){var r,a,o,i=n;function s(n,t){if(i===m_)return h_(n);if(t&&!a)throw i=m_,t;r&&r(n);var s=t?e[a](t):e[i]();return i=s.nextState,o=s.effect,r=s.stateUpdater,a=s.errorState,i===m_?h_(n):o}return $x(s,(function(e){return s(null,e)}),t)}function b_(e,n){for(var t=arguments.length,r=new Array(t>2?t-2:0),a=2;a<t;a++)r[a-2]=arguments[a];var o,i,s={done:!1,value:yI(e)},l=function(e){return{done:!1,value:SI.apply(void 0,[n].concat(r,[e]))}},u=function(e){return{done:!1,value:(n=e,void 0===n&&(n=gx),gI(uI,n))};var n},c=function(e){return o=e},d=function(e){return i=e};return y_({q1:function(){return{nextState:"q2",effect:s,stateUpdater:d}},q2:function(){return o?{nextState:"q3",effect:u(o)}:{nextState:"q1",effect:l(i),stateUpdater:c}},q3:function(){return{nextState:"q1",effect:l(i),stateUpdater:c}}},"q1","takeLatest("+g_(e)+", "+n.name+")")}function v_(e,n){for(var t=arguments.length,r=new Array(t>2?t-2:0),a=2;a<t;a++)r[a-2]=arguments[a];return SI.apply(void 0,[b_,e,n].concat(r))}function*w_(){yield v_(to.actions.setLocalFile.type,S_)}function*S_(e){const n=_p(e.payload.filepath);null!==n&&eo.includes(n)||(yield bI(to.actions.clear()),yield bI(Hk.actions.setState({errors:["Invalid file input ".concat(e.payload.filepath)],warnings:[]})))}function*k_(){yield v_(to.actions.setUrl.type,x_)}function*x_(e){const n=e.payload;try{const e=yield wI(I_,n);yield bI(to.actions.fetchUrlSuccess({arrayBuffer:e,url:n}))}catch(t){yield bI(to.actions.fetchUrlError(t.message))}}const I_=async e=>{const n=await fetch(e);if(!n.ok)throw new __("Failed to load ".concat(e));return await n.arrayBuffer()};class __ extends Error{}const A_=(e,n)=>({x:e.x+n.x,y:e.y+n.y}),T_=e=>e.reduce(((e,n)=>{let{topLeft:t,bottomRight:r}=e;return{topLeft:{x:Math.min(n.x,t.x),y:Math.min(n.y,t.y)},bottomRight:{x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)}}}),{topLeft:{x:1/0,y:1/0},bottomRight:{x:-1/0,y:-1/0}}),E_=e=>({x:e.bottomRight.x-e.topLeft.x,y:e.bottomRight.y-e.topLeft.y}),O_=()=>new Promise((e=>setTimeout(e,1))),C_=(e,n)=>{if(!e)throw new Error(n||"expected ".concat(e," to be defined"));return e},N_=(e,n)=>{const{nodeId:t,pdNode:r,nexusElem:a}=n;let o=e=>e;switch(r.type){case"bng":o=e=>!0===e.state?"bang":null;break;case"msg":o=e=>!0===e?"bang":null;break;case"tgl":o=e=>+e}let i=()=>{};switch(r.type){case"hsl":case"vsl":case"nbx":case"floatatom":i=(e,n)=>{e.value=n};break;case"hradio":case"vradio":i=(e,n)=>{e.select(n)};break;case"bng":case"msg":i=e=>{var n;e.turnOn(!1),(n=50,new Promise((e=>setTimeout(e,n)))).then((()=>e.turnOff(!1)))};break;case"tgl":i=(e,n)=>{1===n?e.turnOn(!1):e.turnOff(!1)}}e.controller.functions[t]={convertNexusValue:o,onMessageFromWebPd:i},a._isBeingChangedByUser=!1,a.on("change",(function(n){M_.call(this,e,t,n)})),a.on("click",(function(){this._isBeingChangedByUser=!0})),a.on("release",(function(){this._isBeingChangedByUser=!1}))};function M_(e,n,t){if(!0!==this.clicked)return;const r=R_(e,n).convertNexusValue(t);null!==r&&(e.controller.values[n]=r,e.settings.valuesUpdatedCallback&&P_(e),F_(e,n,[r]))}const P_=((e,n)=>{let t=null;return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];t&&clearTimeout(t),t=setTimeout((()=>n(...a)),e)}})(300,(e=>{const n={};Object.entries(e.controller.values).forEach((e=>{let[t,r]=e;n[t]="number"===typeof r?function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const t=Math.round(e*Math.pow(10,n))/Math.pow(10,n);return 0===t?0:t}(r):r})),e.settings.valuesUpdatedCallback(n)})),F_=(e,n,t)=>{e.webpdNode.port.postMessage({type:"io:messageReceiver",payload:{nodeId:n,portletId:"0",message:t}})},R_=(e,n)=>{const t=e.controller.functions[n];if(!t)throw new Error("no value transform for ".concat(n));return t},L_={x:7,y:12},D_=(e,n)=>e.filter((e=>"text"!==e.nodeClass)).map((e=>{const t=n.pdNodes[e.patchId][e.pdNodeId];if(!t)throw console.log("CUSTOM METADATA",n),new Error("no pd node ".concat(e.pdNodeId," for patch ").concat(e.patchId));switch(e.nodeClass){case"subpatch":if("subpatch"!==t.nodeClass)throw new Error("unexpected pdNode class ".concat(t.nodeClass));const r=V_(D_(e.children,n)),a={type:"container",label:"string"===typeof t.args[0]?t.args[0]:null,dimensions:A_(L_,E_(T_([...r.map((e=>e.position)),...r.map((e=>A_(e.position,e.dimensions)))]))),children:r,position:{x:K_(t.layout.x),y:K_(t.layout.y)}};return a;case"control":if("control"!==t.nodeClass)throw new Error("unexpected pdNode class ".concat(t.nodeClass));return{type:"control",label:t.layout.label||"",pdNode:t,nodeId:e.nodeId,nexusElem:null,dimensions:G_(t),position:{x:K_(t.layout.x),y:K_(t.layout.y)}};default:throw new Error("unexpected control type ".concat(e.type))}})),j_=e=>{const n={};return z_(e.filter((e=>"comment"!==e.type)),n),n},z_=(e,n)=>{e.forEach((e=>{"control"===e.type?n[e.nodeId]=e:z_(e.children,n)}))},B_=e=>e.map((e=>{switch(e.type){case"container":return e;case"control":return{type:"container",label:null,children:[{...e,position:{x:0,y:0}}],dimensions:A_(L_,e.dimensions),position:e.position};default:throw new Error("unexpected view type ".concat(e.type))}})),U_=e=>e.pdGui.filter((e=>"text"===e.nodeClass)).map((n=>{var t;const r=q_(e,n.patchId,n.pdNodeId);return{type:"comment",text:(null===(t=r.args[0])||void 0===t?void 0:t.toString())||"",position:{x:K_(r.layout.x),y:K_(r.layout.y)}}})),W_=e=>{const n=T_([...e.map((e=>e.position)),...e.map((e=>A_(e.position,e.dimensions)))]);return((e,n)=>({x:e.x*n,y:e.y*n}))(n.topLeft,-1)},$_=(e,n)=>e.map((e=>({...e,position:A_(e.position,n)}))),V_=e=>$_(e,W_(e)),G_=e=>{if("control"!==e.nodeClass)throw new Error("Can only get dimension for control node");switch(e.type){case"floatatom":case"symbolatom":return{x:K_(7*(e.layout.widthInChars||3)),y:K_(15)};case"bng":case"tgl":return{x:K_(e.layout.size),y:K_(e.layout.size)};case"nbx":return{x:K_(7*(e.layout.widthInChars||3)),y:K_(e.layout.height)};case"vradio":return{x:K_(e.layout.size),y:K_(H_(e.args[0])*H_(e.layout.size))};case"hradio":return{x:K_(H_(e.args[0])*H_(e.layout.size)),y:K_(e.layout.size)};case"vsl":case"hsl":return{x:K_(e.layout.width),y:K_(e.layout.height)};case"msg":return{x:K_(7*e.args.join(" ").length),y:K_(15)};case"cnv":return{x:0,y:0};default:throw new Error("unsupported type ".concat(e.type))}},H_=e=>{if("number"!==typeof e)throw new Error("Expected ".concat(e," to be a number"));return e},K_=e=>1*Math.round(H_(e)/1),q_=(e,n,t)=>{const r=e.pdNodes[n];if(!r)throw console.log("CUSTOM METADATA",e),new Error("no pd patch found fo ".concat(n));const a=r[t];if(!a)throw console.log("CUSTOM METADATA",e),new Error("no pd node found for patch ".concat(n," node ").concat(t));return a},Y_=(e,n,t,r)=>{t.forEach((t=>{if("comment"===t.type)J_(e,n,t);else if("container"===t.type){const r=X_(e,n,t);Y_(e,r,t.children,t)}else"control"===t.type&&Z_(e,n,t,tA(!!r&&rA(r)))}))},X_=(e,n,t)=>{const r=document.createElement("div");r.classList.add("controls-container");const a=tA(rA(t));return r.style.left="".concat(nA(t.position.x),"px"),r.style.top="".concat(nA(t.position.y),"px"),r.style.width="".concat(nA(t.dimensions.x),"px"),r.style.height="".concat(nA(t.dimensions.y),"px"),r.style.paddingTop="".concat(nA(a.top),"px"),r.style.paddingBottom="".concat(nA(a.bottom),"px"),r.style.paddingRight="".concat(nA(a.right),"px"),r.style.paddingLeft="".concat(nA(a.left),"px"),rA(t)&&Q_(r,t.label),n.appendChild(r),r},J_=(e,n,t)=>{const r=document.createElement("div");return r.classList.add("comment"),r.innerHTML=t.text,n.appendChild(r),r.style.left="".concat(nA(t.position.x),"px"),r.style.top="".concat(nA(t.position.y),"px"),r},Z_=(e,n,t,r)=>{const{nodeId:a,pdNode:o}=t,i=e.settings.colorScheme.next(),s=document.createElement("div");if(s.classList.add("control"),s.classList.add(o.type),s.id="control-".concat(a),s.style.left="".concat(nA(t.position.x+r.left),"px"),s.style.top="".concat(nA(t.position.y+r.top),"px"),s.style.width="".concat(nA(t.dimensions.x),"px"),s.style.height="".concat(nA(t.dimensions.y),"px"),n.appendChild(s),rA(t)){Q_(s,t.label||"").style.color=i}const l=document.createElement("div");s.appendChild(l);const u={x:nA(t.dimensions.x),y:nA(t.dimensions.y-(rA(t)?5:0))},c=eA(e,l,t,u);return c.colorize("accent",i),c.colorize("fill","black"),c.colorize("dark",i),c.colorize("mediumDark","#222"),c.colorize("mediumLight","#333"),c.element.style.fontFamily="Rajdhani",s},Q_=(e,n)=>{const t=document.createElement("div");return t.classList.add("label"),t.innerHTML=n,t.style.height="".concat(nA(5),"px"),e.appendChild(t),t},eA=(e,n,t,r)=>{let{x:a,y:o}=r;const{pdNode:i,nodeId:s}=t,l=((e,n)=>e.controller.values[n])(e,s);let u,c={};switch(i.type){case"hsl":case"vsl":"hsl"===i.type?o*=1.2:a*=1.2,u=new Nexus.Add.Slider(n,{min:i.args[0],max:i.args[1],value:void 0!==l?l:i.args[3],size:[a,o]});break;case"hradio":case"vradio":u=new Nexus.RadioButton(n,{numberOfButtons:i.args[0],active:void 0!==l?l:i.args[2],size:[a,o]});break;case"bng":u=new Nexus.Button(n,{size:[o,o]});break;case"msg":u=new Nexus.TextButton(n,{size:[a,o],text:i.args.join(" ")});break;case"nbx":case"floatatom":i.args[0]<i.args[1]&&(c.min=Math.max(i.args[0],-1e15),c.max=Math.min(i.args[1],1e15)),u=new Nexus.Number(n,{value:void 0!==l?l:"nbx"===i.type?i.args[3]:0,size:[a,o],...c});break;case"tgl":u=new Nexus.Button(n,{mode:"toggle",state:void 0!==l?l:!!i.args[2],size:[a,o]});break;case"symbolatom":u=new Nexus.TextButton(n,{size:[a,o],state:!1,text:"SYMBOLATOM NOT SUPPORTED"});break;case"cnv":u=new Nexus.TextButton(n,{size:[a,o],state:!1,text:"CNV NOT SUPPORTED"});break;default:throw new Error("Not supported ".concat(i.type))}return t.nexusElem=u,N_(e,t),u},nA=e=>3*e,tA=e=>({top:e?L_.y-L_.x/2:L_.y/2,left:L_.x/2,right:L_.x/2,bottom:e?L_.x/2:L_.y/2}),rA=e=>!(!e.label||!e.label.length),aA=async(e,n)=>{const t=C_(e.javascript||e.wasm,"artefacts.javascript or artefacts.wasm should be defined"),r=await(e=>Yu("string"===typeof e?"javascript":"assemblyscript",e))(t),a=(e=>{const n=D_(e.pdGui,e),t=B_(n),r=W_(t);return $_([...t,...U_(e)],r)})(r.customMetadata),o=new AudioContext;return o.suspend(),{rootElem:null,patchUrl:n,audioContext:o,webpdNode:null,controller:{values:{},functions:{}},views:{root:a,indexed:j_(a)},settings:null}},oA=async(e,n,t)=>{const r={...n,controller:{...n.controller,values:t.initialValues?{...t.initialValues}:{}},settings:t},a=document.createElement("div");r.settings.container.appendChild(a);const o=(e=>(e.innerHTML='\n    <div id="splash-container">\n        <div id="loading"></div>\n        <button id="start">START</button>\n    </div>\n\n    <div id="patch-controls">\n        <div id="views-root"></div>\n    </div>\n\n    <div id="credits">\n        <button>Credits</button>\n        <div class="content">\n        <div>Sound made using <a href="https://github.com/sebpiq/WebPd/" target="_blank" rel="noopener noreferrer" >WebPd</a>.</div>\n        <div>UI made using <a href="https://nexus-js.github.io/ui/" target="_blank" rel="noopener noreferrer" >NexusUI</a>.</div>\n        <div>Demo source code available <a href="https://github.com/sebpiq/WebPd_demos/" target="_blank" rel="noopener noreferrer" >here</a>.</div>\n        <div>Patch ginger2.pd by <a href="http://www.martin-brinkmann.de/pd-patches.html" target="_blank" rel="noopener noreferrer" >Martin Brinkmann</a>.</div>\n        </div>\n    </div>\n',{viewsRoot:C_(e.querySelector("#views-root"),"viewsRoot not found"),startButton:C_(e.querySelector("#start"),"startButton not found"),loadingLabel:C_(e.querySelector("#loading"),"loadingLabel not found"),loadingContainer:C_(e.querySelector("#splash-container"),"loadingContainer not found"),creditsButton:C_(e.querySelector("#credits button"),"creditsButton not found"),creditsContainer:C_(e.querySelector("#credits"),"creditsContainer not found")}))(a);!0!==r.settings.showCredits&&(o.creditsButton.style.display="none"),o.creditsButton.onclick=()=>{o.creditsContainer.classList.contains("expanded")?o.creditsContainer.classList.remove("expanded"):o.creditsContainer.classList.add("expanded")},o.startButton.style.display="none",o.startButton.onclick=()=>{o.loadingContainer.style.display="none",sA(r)},o.loadingLabel.innerHTML="loading assemblyscript compiler ...",console.log("PatchPlayer START"),await function(){return HS(...arguments)}(r.audioContext),o.loadingLabel.innerHTML="generating GUI ...",await O_(),((e,n)=>{Y_(e,n,e.views.root,null)})(r,o.viewsRoot),await O_();let i=null;try{i=await navigator.mediaDevices.getUserMedia({audio:!0})}catch(s){console.error("Failed to get microphone stream ".concat(s))}return r.webpdNode=await iA(r,i,e),r.rootElem=a,o.loadingLabel.style.display="none",o.startButton.style.display="block",r},iA=async(e,n,t)=>{if(!t.javascript&&!t.wasm)throw new Error("Missing artefacts for creating the engine");const r=await(async(e,n,t)=>{const{messageHandler:r}=t,a=new GS(e);return a.port.onmessage=e=>r(a,e),"string"===typeof n?a.port.postMessage({type:"code:JS",payload:{jsCode:n}}):a.port.postMessage({type:"code:WASM",payload:{wasmBuffer:n}}),a})(e.audioContext,t.javascript||t.wasm,((e,n)=>{const t=Rk(e);return{messageHandler:(e,r)=>{const a=r.data;switch(a.type){case"fs":return Fk(e,r,{rootUrl:t});case"io:messageSender":return n&&n(a.payload.nodeId,a.payload.portletId,a.payload.message),null;default:return null}}}})(e.patchUrl||".",(function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return((e,n,t,r)=>{e.controller.values[n]=r[0];const a=e.views.indexed[n];if(a.nexusElem._isBeingChangedByUser)return;const o=R_(e,n);console.log("message[0]",r[0],a.nexusElem),o.onMessageFromWebPd(a.nexusElem,r[0])})(e,...t)})));if(n){e.audioContext.createMediaStreamSource(n).connect(r)}return r.connect(e.audioContext.destination),r},sA=e=>{"suspended"===e.audioContext.state&&e.audioContext.resume(),(e=>{Object.entries(e.controller.values).forEach((n=>{let[t,r]=n;F_(e,t,[r])}))})(e)},lA=Qk(rx,ox,ix,((e,n,t)=>{if(console.log("selectBuildSteps CODE TARGET",t),!e||!n)return null;if("patchPlayer"===n)switch(t){case"JavaScript":n="javascript";break;case"WebAssembly":n="wasm"}return["wav","app"].includes(n)&&["pd","pdJson","dspGraph"].includes(e)?Ap(e,n,"JavaScript"===t?"javascript":"wasm"):Ap(e,n)})),uA=64,cA={WebAssembly:{display:"Web Assembly",info:"Web Assembly is slower to build, but provides a higher performance when running. Good for when your patch is stable and you want to take it elsewhere."},JavaScript:{display:"JavaScript",info:"JavaScript is fast to build, but slower when running. Good if you want to test things fast."}},dA=e=>e.app.isInitialized,pA=e=>e.app.willBuildOnLoad,fA=e=>e.app.debug,hA=async(e,n,t)=>{const r={...(a=t.rootUrl||"",{audioSettings:{channelCount:{in:2,out:2},bitDepth:64},renderAudioSettings:{sampleRate:44100,blockSize:4096,previewDurationSeconds:30},abstractionLoader:FS,nodeBuilders:AS,nodeImplementations:TS,abstractionLoader:gk(a)}),audioSettings:t.audioSettings,renderAudioSettings:t.renderAudioSettings,abstractionLoader:t.rootUrl?gk(t.rootUrl):mA};var a;return LS(e,n,r)},mA=Go((async e=>{throw new Ho(e)}));function*gA(){yield v_(Vk.actions.startBuild.type,bA)}function yA(e,n){return new Promise((t=>{e.onmessage=e=>{t(e.data)},e.postMessage(n)}))}function*bA(){const e=new Worker("js/build.worker.js"),n=yield kI(ax),t=yield kI(lA),r=yield kI(ox),a=yield kI(ex),o=yield kI(sx),i=yield kI(fA);if(!n||!t)return void(yield bI(Vk.actions.buildSuccess({artefacts:n||RS(),patchPlayer:null})));yield xI(1);let s={...n},l=null;for(let c of t){console.log("BUILD STEP START",c,s),yield bI(Vk.actions.startStep(c));try{const n={audioSettings:{channelCount:{in:2,out:2},bitDepth:uA},renderAudioSettings:{sampleRate:44100,blockSize:4096,previewDurationSeconds:o||30},rootUrl:a?Rk(a):null},t={artefacts:s,step:c,settings:n};let r;if("wasm"===c)r=yield wI(hA,s,c,n);else{const n=yield wI(yA,e,t);r=n.result,s=n.artefacts}const i=1===r.status?r.errors:void 0;if(yield bI(Vk.actions.stepComplete({status:r.status,artefacts:s,errors:i,warnings:r.warnings})),1===r.status)return}catch(u){if(yield bI(Vk.actions.stepComplete({status:1,artefacts:s,errors:[u.message],warnings:[]})),i)throw u;return}"javascript"!==c&&"wasm"!==c||"patchPlayer"!==r||(l=yield wI(aA,s,a||null))}yield bI(Vk.actions.buildSuccess({artefacts:s,patchPlayer:l}))}function*vA(){for(;!window.asc;)yield xI(100);var e;e=window.asc,io=e;const n=yield kI(ex),t=yield kI(tx);if(n&&!t){if((yield yI([to.actions.fetchUrlSuccess,to.actions.fetchUrlError])).type===to.actions.fetchUrlError.type)return void console.log("INIT FAILED ERROR")}(yield kI(pA))&&(yield bI(Vk.actions.startBuild())),yield bI(Kk.actions.initializationDone())}const wA={patchPlayer:null},SA={values:{}},kA=va({name:"patchPlayer",initialState:SA,reducers:{valuesChanged:(e,n)=>{e.values=n.payload}},extraReducers:e=>{e.addCase(Vk.actions.buildSuccess,((e,n)=>{wA.patchPlayer=n.payload.patchPlayer})),e.addCase(Dk,(()=>(wA.patchPlayer=null,SA)))}}),xA=e=>e.patchPlayer.values,IA=()=>wA.patchPlayer,_A=f_(),AA=function(e){var n,t=ya(),r=e||{},a=r.reducer,o=void 0===a?void 0:a,i=r.middleware,s=void 0===i?t():i,l=r.devTools,u=void 0===l||l,c=r.preloadedState,d=void 0===c?void 0:c,p=r.enhancers,f=void 0===p?void 0:p;if("function"===typeof o)n=o;else{if(!pa(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');n=Hr(o)}var h=s;"function"===typeof h&&(h=h(t));var m=qr.apply(void 0,h),g=Kr;u&&(g=da(la({trace:!1},"object"===typeof u&&u)));var y=new ma(m),b=y;return Array.isArray(f)?b=ea([m],f):"function"===typeof f&&(b=f(y)),Gr(n,d,g.apply(void 0,b))}({reducer:{app:Kk.reducer,buildInput:to.reducer,buildOutput:oo.reducer,artefacts:Vk.reducer,console:Hk.reducer,patchPlayer:kA.reducer},middleware:e=>e({serializableCheck:!1}).concat([_A])}),TA=Za,EA=$a;_A.run((function*(){yield function(e){var n=gI(rI,e);return n.combinator=!0,n}([vA(),k_(),w_(),gA()])}));const OA=e=>"1"===e,CA=e=>e?"1":"0";var NA,MA;(0,qk.Z)({store:AA,params:{jsOrAs:{selector:ix,action:oo.actions.setCodeTarget,defaultValue:oo.getInitialState().codeTarget},target:{selector:ox,action:oo.actions.setFormat,defaultValue:oo.getInitialState().format},url:{selector:ex,action:to.actions.setUrl,defaultValue:to.getInitialState().url},build:{selector:pA,action:Kk.actions.setWillBuildOnLoad,defaultValue:Kk.getInitialState().willBuildOnLoad,stringToValue:OA,valueToString:CA},debug:{selector:fA,action:Kk.actions.setDebug,defaultValue:Kk.getInitialState().debug,stringToValue:OA,valueToString:CA},pp:{selector:xA,action:kA.actions.valuesChanged,defaultValue:kA.getInitialState().values,stringToValue:e=>JSON.parse(e),valueToString:e=>JSON.stringify(e)}},replaceState:!0,initialTruth:"location"});const PA={ginger2:{display:"Martin's Brinkmann ginger2",url:"./patches/Martin-Brinkmann-ginger2.pd"},randomperc1:{display:"Martin's Brinkmann randomperc1",url:"./patches/Martin-Brinkmann-randomperc1.pd"},uiDemo:{display:"WebPd website UI demo",url:"./patches/WebPd-website-UI-demo.pd"}},FA=Re.form(NA||(NA=r(["\n    display: inline;\n"]))),RA=Re(ln)(MA||(MA=r(["\n    padding-left: 0;\n    padding-top: ",";\n    text-overflow: ellipsis;\n    @media (max-width: ","px) {\n        width: 100%;\n        background-color: transparent;\n        text-align: center;\n    }\n"])),De.spacings.space0p1,De.devices.mobile.maxWidth),LA=()=>{const e=TA();return(0,Qe.jsx)(FA,{children:(0,Qe.jsxs)(RA,{onChange:n=>{const t=n.currentTarget.value;e(to.actions.setUrl(PA[t].url))},children:[(0,Qe.jsx)("option",{value:"",children:"Load one of the following examples"}),Object.entries(PA).map((e=>{let[n,t]=e;return(0,Qe.jsx)("option",{value:n,children:t.display},n)}))]})})};var DA=t(7),jA=t.n(DA);function zA(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{l(r.next(e))}catch(n){o(n)}}function s(e){try{l(r.throw(e))}catch(n){o(n)}}function l(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}l((r=r.apply(e,n||[])).next())}))}function BA(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(t=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=n.call(e,i)}catch(l){s=[6,l],r=0}finally{t=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}Object.create;function UA(e,n){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i}function WA(e,n,t){if(t||2===arguments.length)for(var r,a=0,o=n.length;a<o;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var $A=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function VA(e,n){var t=function(e){var n=e.name;if(n&&-1!==n.lastIndexOf(".")&&!e.type){var t=n.split(".").pop().toLowerCase(),r=$A.get(t);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!==typeof t.path){var r=e.webkitRelativePath;Object.defineProperty(t,"path",{value:"string"===typeof n?n:"string"===typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return t}var GA=[".DS_Store","Thumbs.db"];function HA(e){return"object"===typeof e&&null!==e}function KA(e){return JA(e.target.files).map((function(e){return VA(e)}))}function qA(e){return zA(this,void 0,void 0,(function(){return BA(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.map((function(e){return e.getFile()})))];case 1:return[2,n.sent().map((function(e){return VA(e)}))]}}))}))}function YA(e,n){return zA(this,void 0,void 0,(function(){var t;return BA(this,(function(r){switch(r.label){case 0:return e.items?(t=JA(e.items).filter((function(e){return"file"===e.kind})),"drop"!==n?[2,t]:[4,Promise.all(t.map(ZA))]):[3,2];case 1:return[2,XA(QA(r.sent()))];case 2:return[2,XA(JA(e.files).map((function(e){return VA(e)})))]}}))}))}function XA(e){return e.filter((function(e){return-1===GA.indexOf(e.name)}))}function JA(e){if(null===e)return[];for(var n=[],t=0;t<e.length;t++){var r=e[t];n.push(r)}return n}function ZA(e){if("function"!==typeof e.webkitGetAsEntry)return eT(e);var n=e.webkitGetAsEntry();return n&&n.isDirectory?tT(n):eT(e)}function QA(e){return e.reduce((function(e,n){return WA(WA([],UA(e),!1),UA(Array.isArray(n)?QA(n):[n]),!1)}),[])}function eT(e){var n=e.getAsFile();if(!n)return Promise.reject("".concat(e," is not a File"));var t=VA(n);return Promise.resolve(t)}function nT(e){return zA(this,void 0,void 0,(function(){return BA(this,(function(n){return[2,e.isDirectory?tT(e):rT(e)]}))}))}function tT(e){var n=e.createReader();return new Promise((function(e,t){var r=[];!function a(){var o=this;n.readEntries((function(n){return zA(o,void 0,void 0,(function(){var o,i,s;return BA(this,(function(l){switch(l.label){case 0:if(n.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return o=l.sent(),e(o),[3,4];case 3:return i=l.sent(),t(i),[3,4];case 4:return[3,6];case 5:s=Promise.all(n.map(nT)),r.push(s),a(),l.label=6;case 6:return[2]}}))}))}),(function(e){t(e)}))}()}))}function rT(e){return zA(this,void 0,void 0,(function(){return BA(this,(function(n){return[2,new Promise((function(n,t){e.file((function(t){var r=VA(t,e.fullPath);n(r)}),(function(e){t(e)}))}))]}))}))}var aT=t(998);function oT(e){return function(e){if(Array.isArray(e))return dT(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||cT(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iT(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function sT(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?iT(Object(t),!0).forEach((function(n){lT(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):iT(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function lT(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function uT(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,a,o=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);i=!0);}catch(l){s=!0,a=l}finally{try{i||null==t.return||t.return()}finally{if(s)throw a}}return o}(e,n)||cT(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cT(e,n){if(e){if("string"===typeof e)return dT(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?dT(e,n):void 0}}function dT(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var pT="file-invalid-type",fT="file-too-large",hT="file-too-small",mT="too-many-files",gT=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var n=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:pT,message:"File type must be ".concat(n)}},yT=function(e){return{code:fT,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},bT=function(e){return{code:hT,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},vT={code:mT,message:"Too many files"};function wT(e,n){var t="application/x-moz-file"===e.type||(0,aT.Z)(e,n);return[t,t?null:gT(n)]}function ST(e,n,t){if(kT(e.size))if(kT(n)&&kT(t)){if(e.size>t)return[!1,yT(t)];if(e.size<n)return[!1,bT(n)]}else{if(kT(n)&&e.size<n)return[!1,bT(n)];if(kT(t)&&e.size>t)return[!1,yT(t)]}return[!0,null]}function kT(e){return void 0!==e&&null!==e}function xT(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function IT(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function _T(e){e.preventDefault()}function AT(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return n.some((function(n){return!xT(e)&&n&&n.apply(void 0,[e].concat(r)),xT(e)}))}}function TT(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)}function ET(e){return/^.*\.[\w]+$/.test(e)}var OT=["children"],CT=["open"],NT=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],MT=["refKey","onChange","onClick"];function PT(e){return function(e){if(Array.isArray(e))return LT(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||RT(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FT(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,a,o=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);i=!0);}catch(l){s=!0,a=l}finally{try{i||null==t.return||t.return()}finally{if(s)throw a}}return o}(e,n)||RT(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RT(e,n){if(e){if("string"===typeof e)return LT(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?LT(e,n):void 0}}function LT(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function DT(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function jT(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?DT(Object(t),!0).forEach((function(n){zT(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):DT(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function zT(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function BT(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var UT=(0,e.forwardRef)((function(n,t){var r=n.children,a=HT(BT(n,OT)),o=a.open,i=BT(a,CT);return(0,e.useImperativeHandle)(t,(function(){return{open:o}}),[o]),e.createElement(e.Fragment,null,r(jT(jT({},i),{},{open:o})))}));UT.displayName="Dropzone";var WT={disabled:!1,getFilesFromEvent:function(e){return zA(this,void 0,void 0,(function(){return BA(this,(function(n){return HA(e)&&HA(e.dataTransfer)?[2,YA(e.dataTransfer,e.type)]:function(e){return HA(e)&&HA(e.target)}(e)?[2,KA(e)]:Array.isArray(e)&&e.every((function(e){return"getFile"in e&&"function"===typeof e.getFile}))?[2,qA(e)]:[2,[]]}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};UT.defaultProps=WT,UT.propTypes={children:jA().func,accept:jA().objectOf(jA().arrayOf(jA().string)),multiple:jA().bool,preventDropOnDocument:jA().bool,noClick:jA().bool,noKeyboard:jA().bool,noDrag:jA().bool,noDragEventsBubbling:jA().bool,minSize:jA().number,maxSize:jA().number,maxFiles:jA().number,disabled:jA().bool,getFilesFromEvent:jA().func,onFileDialogCancel:jA().func,onFileDialogOpen:jA().func,useFsAccessApi:jA().bool,autoFocus:jA().bool,onDragEnter:jA().func,onDragLeave:jA().func,onDragOver:jA().func,onDrop:jA().func,onDropAccepted:jA().func,onDropRejected:jA().func,onError:jA().func,validator:jA().func};var $T,VT,GT={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function HT(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=jT(jT({},WT),n),r=t.accept,a=t.disabled,o=t.getFilesFromEvent,i=t.maxSize,s=t.minSize,l=t.multiple,u=t.maxFiles,c=t.onDragEnter,d=t.onDragLeave,p=t.onDragOver,f=t.onDrop,h=t.onDropAccepted,m=t.onDropRejected,g=t.onFileDialogCancel,y=t.onFileDialogOpen,b=t.useFsAccessApi,v=t.autoFocus,w=t.preventDropOnDocument,S=t.noClick,k=t.noKeyboard,x=t.noDrag,I=t.noDragEventsBubbling,_=t.onError,A=t.validator,T=(0,e.useMemo)((function(){return function(e){if(kT(e))return Object.entries(e).reduce((function(e,n){var t=uT(n,2),r=t[0],a=t[1];return[].concat(oT(e),[r],oT(a))}),[]).filter((function(e){return TT(e)||ET(e)})).join(",")}(r)}),[r]),E=(0,e.useMemo)((function(){return function(e){return kT(e)?[{description:"Files",accept:Object.entries(e).filter((function(e){var n=uT(e,2),t=n[0],r=n[1],a=!0;return TT(t)||(console.warn('Skipped "'.concat(t,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),a=!1),Array.isArray(r)&&r.every(ET)||(console.warn('Skipped "'.concat(t,'" because an invalid file extension was provided.')),a=!1),a})).reduce((function(e,n){var t=uT(n,2),r=t[0],a=t[1];return sT(sT({},e),{},lT({},r,a))}),{})}]:e}(r)}),[r]),O=(0,e.useMemo)((function(){return"function"===typeof y?y:qT}),[y]),C=(0,e.useMemo)((function(){return"function"===typeof g?g:qT}),[g]),N=(0,e.useRef)(null),M=(0,e.useRef)(null),P=FT((0,e.useReducer)(KT,GT),2),F=P[0],R=P[1],L=F.isFocused,D=F.isFileDialogActive,j=(0,e.useRef)("undefined"!==typeof window&&window.isSecureContext&&b&&"showOpenFilePicker"in window),z=function(){!j.current&&D&&setTimeout((function(){M.current&&(M.current.files.length||(R({type:"closeDialog"}),C()))}),300)};(0,e.useEffect)((function(){return window.addEventListener("focus",z,!1),function(){window.removeEventListener("focus",z,!1)}}),[M,D,C,j]);var B=(0,e.useRef)([]),U=function(e){N.current&&N.current.contains(e.target)||(e.preventDefault(),B.current=[])};(0,e.useEffect)((function(){return w&&(document.addEventListener("dragover",_T,!1),document.addEventListener("drop",U,!1)),function(){w&&(document.removeEventListener("dragover",_T),document.removeEventListener("drop",U))}}),[N,w]),(0,e.useEffect)((function(){return!a&&v&&N.current&&N.current.focus(),function(){}}),[N,v,a]);var W=(0,e.useCallback)((function(e){_?_(e):console.error(e)}),[_]),$=(0,e.useCallback)((function(e){e.preventDefault(),e.persist(),te(e),B.current=[].concat(PT(B.current),[e.target]),IT(e)&&Promise.resolve(o(e)).then((function(n){if(!xT(e)||I){var t=n.length,r=t>0&&function(e){var n=e.files,t=e.accept,r=e.minSize,a=e.maxSize,o=e.multiple,i=e.maxFiles,s=e.validator;return!(!o&&n.length>1||o&&i>=1&&n.length>i)&&n.every((function(e){var n=uT(wT(e,t),1)[0],o=uT(ST(e,r,a),1)[0],i=s?s(e):null;return n&&o&&!i}))}({files:n,accept:T,minSize:s,maxSize:i,multiple:l,maxFiles:u,validator:A});R({isDragAccept:r,isDragReject:t>0&&!r,isDragActive:!0,type:"setDraggedFiles"}),c&&c(e)}})).catch((function(e){return W(e)}))}),[o,c,W,I,T,s,i,l,u,A]),V=(0,e.useCallback)((function(e){e.preventDefault(),e.persist(),te(e);var n=IT(e);if(n&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(t){}return n&&p&&p(e),!1}),[p,I]),G=(0,e.useCallback)((function(e){e.preventDefault(),e.persist(),te(e);var n=B.current.filter((function(e){return N.current&&N.current.contains(e)})),t=n.indexOf(e.target);-1!==t&&n.splice(t,1),B.current=n,n.length>0||(R({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),IT(e)&&d&&d(e))}),[N,d,I]),H=(0,e.useCallback)((function(e,n){var t=[],r=[];e.forEach((function(e){var n=FT(wT(e,T),2),a=n[0],o=n[1],l=FT(ST(e,s,i),2),u=l[0],c=l[1],d=A?A(e):null;if(a&&u&&!d)t.push(e);else{var p=[o,c];d&&(p=p.concat(d)),r.push({file:e,errors:p.filter((function(e){return e}))})}})),(!l&&t.length>1||l&&u>=1&&t.length>u)&&(t.forEach((function(e){r.push({file:e,errors:[vT]})})),t.splice(0)),R({acceptedFiles:t,fileRejections:r,type:"setFiles"}),f&&f(t,r,n),r.length>0&&m&&m(r,n),t.length>0&&h&&h(t,n)}),[R,l,T,s,i,u,f,h,m,A]),K=(0,e.useCallback)((function(e){e.preventDefault(),e.persist(),te(e),B.current=[],IT(e)&&Promise.resolve(o(e)).then((function(n){xT(e)&&!I||H(n,e)})).catch((function(e){return W(e)})),R({type:"reset"})}),[o,H,W,I]),q=(0,e.useCallback)((function(){if(j.current){R({type:"openDialog"}),O();var e={multiple:l,types:E};window.showOpenFilePicker(e).then((function(e){return o(e)})).then((function(e){H(e,null),R({type:"closeDialog"})})).catch((function(e){!function(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}(e)?!function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?W(e):(j.current=!1,M.current?(M.current.value=null,M.current.click()):W(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):(C(e),R({type:"closeDialog"}))}))}else M.current&&(R({type:"openDialog"}),O(),M.current.value=null,M.current.click())}),[R,O,C,b,H,W,E,l]),Y=(0,e.useCallback)((function(e){N.current&&N.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),q()))}),[N,q]),X=(0,e.useCallback)((function(){R({type:"focus"})}),[]),J=(0,e.useCallback)((function(){R({type:"blur"})}),[]),Z=(0,e.useCallback)((function(){S||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?q():setTimeout(q,0))}),[S,q]),Q=function(e){return a?null:e},ee=function(e){return k?null:Q(e)},ne=function(e){return x?null:Q(e)},te=function(e){I&&e.stopPropagation()},re=(0,e.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.refKey,t=void 0===n?"ref":n,r=e.role,o=e.onKeyDown,i=e.onFocus,s=e.onBlur,l=e.onClick,u=e.onDragEnter,c=e.onDragOver,d=e.onDragLeave,p=e.onDrop,f=BT(e,NT);return jT(jT(zT({onKeyDown:ee(AT(o,Y)),onFocus:ee(AT(i,X)),onBlur:ee(AT(s,J)),onClick:Q(AT(l,Z)),onDragEnter:ne(AT(u,$)),onDragOver:ne(AT(c,V)),onDragLeave:ne(AT(d,G)),onDrop:ne(AT(p,K)),role:"string"===typeof r&&""!==r?r:"presentation"},t,N),a||k?{}:{tabIndex:0}),f)}}),[N,Y,X,J,Z,$,V,G,K,k,x,a]),ae=(0,e.useCallback)((function(e){e.stopPropagation()}),[]),oe=(0,e.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.refKey,t=void 0===n?"ref":n,r=e.onChange,a=e.onClick,o=BT(e,MT);return jT(jT({},zT({accept:T,multiple:l,type:"file",style:{display:"none"},onChange:Q(AT(r,K)),onClick:Q(AT(a,ae)),tabIndex:-1},t,M)),o)}}),[M,r,l,K,a]);return jT(jT({},F),{},{isFocused:L&&!a,getRootProps:re,getInputProps:oe,rootRef:N,inputRef:M,open:Q(q)})}function KT(e,n){switch(n.type){case"focus":return jT(jT({},e),{},{isFocused:!0});case"blur":return jT(jT({},e),{},{isFocused:!1});case"openDialog":return jT(jT({},GT),{},{isFileDialogActive:!0});case"closeDialog":return jT(jT({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return jT(jT({},e),{},{isDragActive:n.isDragActive,isDragAccept:n.isDragAccept,isDragReject:n.isDragReject});case"setFiles":return jT(jT({},e),{},{acceptedFiles:n.acceptedFiles,fileRejections:n.fileRejections});case"reset":return jT({},GT);default:return e}}function qT(){}const YT=Re.span($T||($T=r(["\n    padding: "," 0;\n    cursor: pointer;\n"])),De.spacings.space0p1),XT=Re.span(VT||(VT=r(["\n    color: ",";\n"])),De.colors.fg1),JT=()=>{const n=EA(nx),t=TA(),r=(0,e.useCallback)((e=>{const n=e[0],r=new FileReader;r.onabort=()=>console.log("file reading was aborted"),r.onerror=()=>console.log("file reading has failed"),r.onload=()=>{t(to.actions.setLocalFile({arrayBuffer:r.result,filepath:n.name}))},r.readAsArrayBuffer(n)}),[]),{getRootProps:a,getInputProps:o,isDragActive:i}=HT({onDrop:r});return(0,Qe.jsxs)(YT,{...a(),children:[(0,Qe.jsx)("input",{...o()}),i?(0,Qe.jsx)(XT,{children:"Drop the file here ..."}):(0,Qe.jsx)(XT,{children:n?"Choose a different file":"Upload a file from your device"})]})};var ZT,QT,eE;const nE=Re.form(ZT||(ZT=r(["\n    display: inline;\n"]))),tE=Re.input(QT||(QT=r(["\n    padding: "," 0;\n    color: ",";\n    ::placeholder,\n    ::-webkit-input-placeholder {\n        color: ",";\n        opacity: 1;\n    }\n    :-ms-input-placeholder {\n        color: ",";\n        opacity: 1;\n    }\n    @media (max-width: ","px) {\n        background-color: transparent;\n        text-align: center;\n    }\n"])),De.spacings.space0p1,De.colors.fg1,De.colors.fg1,De.colors.fg1,De.devices.mobile.maxWidth),rE=Re(on)(eE||(eE=r(["\n    margin-left: ",";\n"])),De.spacings.space1),aE=()=>{const n=TA(),t=EA(ex),[r,a]=(0,e.useState)(t||"");return(0,Qe.jsxs)(nE,{onSubmit:e=>{e.preventDefault(),n(to.actions.setUrl(r))},children:[(0,Qe.jsx)(tE,{value:r,onChange:e=>{a(e.target.value),n(to.actions.setFocusOn("url"))},placeholder:"Load a file from a URL"}),r.length?(0,Qe.jsx)(rE,{children:"Load"}):null]})};var oE,iE;const sE=Re(gn)(oE||(oE=r(["\n    position: relative;\n"]))),lE=Re.div(iE||(iE=r(["\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    flex: auto;\n    & > * {\n        display: inline-block;\n        @media (max-width: ","px) {\n            /* Match all objects except Or */\n            &:nth-child(2n+1) {\n                width: 100%;\n                text-align: center;\n                background-color: ",";\n            }\n        }\n    }\n"])),De.devices.mobile.maxWidth,De.colors.bg1),uE=()=>{const e=TA(),n=EA(nx),t=EA(ex),r=EA(rx),a=EA(ax);return(0,Qe.jsxs)(sE,{children:[(0,Qe.jsx)(yn,{children:(0,Qe.jsx)(nn,{children:"\u2192 input"})}),(0,Qe.jsx)(bn,{children:r&&a?(0,Qe.jsx)(Qe.Fragment,{children:(0,Qe.jsx)(Ft,{format:r,artefacts:a,filename:n||t||void 0,extraButtons:[(0,Qe.jsx)(on,{onClick:()=>{e(to.actions.clear())},children:"clear"},"clear")]})}):(0,Qe.jsxs)(lE,{children:[(0,Qe.jsx)(JT,{})," ",(0,Qe.jsx)(hn,{children:"OR"})," ",(0,Qe.jsx)(aE,{})," ",(0,Qe.jsx)(hn,{children:"OR"})," ",(0,Qe.jsx)(LA,{})]})})]})},cE={...xp,patchPlayer:{description:"Patch player"},wav:{description:"Audio preview"},app:{description:"Complete web app"}},dE={pd:{info:"A Pure Data file (.pd) in text format."},pdJson:{info:"Will compile a JSON representation of a pure data file."},dspGraph:{info:"Will compile a DSP graph that is used internally by the WebPd compiler to generate the audio output."},javascript:{info:"Will compile a JavaScript function for generating audio."},assemblyscript:{info:"Will compile an AssemblyScript function which can then be compiled to Web Assembly."},wasm:{info:"Will generate a Web Assembly module from your patch. This module can be loaded again here at a later time to play your patch."},wav:{info:"Will generate an audio preview of your patch."},patchPlayer:{info:"Will render a interactive interface allowing to play your patch online."},app:{info:"Will generate a bare bones web page embedding your patch. A good starter to build an audio web site of your own."}},pE=Re.div.withConfig({displayName:"OutputSelector__Container",componentId:"sc-1qpzo58-0"})([""]),fE=Re.div.withConfig({displayName:"OutputSelector__FormatSelector",componentId:"sc-1qpzo58-1"})(["width:100%;display:flex;flex-direction:row;justify-content:space-between;@media (max-width:","px){flex-direction:column;align-items:initial;","{text-align:center;}}"],De.devices.mobile.maxWidth,hn),hE=Re(mn).withConfig({displayName:"OutputSelector__FormatHint",componentId:"sc-1qpzo58-2"})(["margin-top:",";"],De.spacings.space0p1),mE=Re(on).withConfig({displayName:"OutputSelector__ButtonInit",componentId:"sc-1qpzo58-3"})([""]),gE=Re(on).withConfig({displayName:"OutputSelector__ButtonActive",componentId:"sc-1qpzo58-4"})(["color:",";background-color:",";"],De.colors.colorScheme.next(),De.colors.bg1p5),yE=Re(on).withConfig({displayName:"OutputSelector__ButtonInactive",componentId:"sc-1qpzo58-5"})(["color:",";background-color:",";"],De.colors.fg1,De.colors.bg1p5),bE=()=>{const e=TA(),n=EA(ox),t=Array.from(EA(lx));return(0,Qe.jsxs)(pE,{children:[(0,Qe.jsx)(fE,{children:t.flatMap(((r,a)=>{const o=r===n?gE:n?yE:mE;return[(0,Qe.jsx)(o,{onClick:()=>e(oo.actions.setFormat(r)),children:cE[r].description},r),a<t.length-1?(0,Qe.jsx)(hn,{children:"OR"},r+"OR"):null]}))}),n?(0,Qe.jsx)(hE,{children:dE[n].info}):null]})};var vE,wE,SE;const kE=Re.div(vE||(vE=r(["\n    margin-top: ",";\n"])),De.spacings.space2),xE=Re(ln)(wE||(wE=r(["\n    min-width: 8em;\n    margin-left: ",";\n"])),De.spacings.space0p1),IE=Re(mn)(SE||(SE=r(["\n    margin-top: ",";\n"])),De.spacings.space0p1),_E=()=>{const e=EA(ix),n=TA();return(0,Qe.jsxs)(kE,{children:[(0,Qe.jsx)("label",{children:"Compilation target"}),(0,Qe.jsx)(xE,{value:e,onChange:e=>n(oo.actions.setCodeTarget(e.currentTarget.value)),children:Object.entries(cA).map((e=>{let[n,{display:t}]=e;return(0,Qe.jsx)("option",{value:n,children:t},n)}))}),(0,Qe.jsx)(IE,{children:cA[e].info})]})},AE=()=>Wk.artefacts,TE=e=>e.artefacts.buildStatus,EE=e=>e.artefacts.step,OE=e=>e.console.errors,CE=e=>e.console.warnings;var NE,ME;const PE=Re.div(NE||(NE=r(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    background-color: ",";\n"])),De.colors.bg1),FE=Re(on)(ME||(ME=r(["\n    position: fixed;\n    right: ",";\n    top: ",";\n    z-index: ",";\n"])),De.spacings.space1,De.spacings.space1,De.zIndexes.closeButton),RE=n=>{let{artefacts:t}=n;const r=(0,e.useRef)(null),a=TA(),o=EA(IA),i=EA(xA);(0,e.useEffect)((()=>{if(!o)return;const e=oA(t,o,{container:r.current,colorScheme:De.colors.colorScheme,showCredits:!1,initialValues:i,valuesUpdatedCallback:e=>{a(kA.actions.valuesChanged(e))}});return()=>{console.log("DESTROY"),e.then((e=>(e=>{e.rootElem&&(e.rootElem.innerHTML="",e.rootElem.remove(),console.log("DESTROY PATCH PLAYER",e.rootElem)),e.webpdNode.disconnect(),e.audioContext.suspend()})(e)))}}),[t,o]);return(0,Qe.jsx)(PE,{id:"PatchPlayer",ref:r,children:(0,Qe.jsx)(FE,{onClick:()=>{a(Dk())},children:"Close"})})};var LE;const DE=Re.div(LE||(LE=r([""]))),jE=()=>{const e=TA(),n=EA(ox),t=EA(AE),r=EA(OE),a=EA(EE),o=EA(TE);return!n||r||o!==Bk?null:(0,Qe.jsxs)(DE,{children:[o===zk&&(0,Qe.jsxs)(nn,{children:["Building ",a," ..."]}),o===Bk?"patchPlayer"!==n?(0,Qe.jsx)(Ft,{artefacts:t,format:n,filename:"app"!==n?"output."+n:void 0,showDownloadButton:!0,extraButtons:[(0,Qe.jsx)(on,{onClick:()=>{e(oo.actions.clear())},children:"clear"},"clear")]}):(0,Qe.jsx)(RE,{artefacts:t}):null]})};var zE,BE;const UE=Re.div(zE||(zE=r(["\n    margin-top: ",";\n"])),De.spacings.space2),WE=Re.input(BE||(BE=r(["\n    margin-left: ",";\n    background-color: ",";\n    width: 2em;\n"])),De.spacings.space0p1,De.colors.bg1p5),$E=()=>{const e=EA(sx),n=TA();return(0,Qe.jsxs)(UE,{children:[(0,Qe.jsx)("label",{children:"Duration of preview in seconds"}),(0,Qe.jsx)(WE,{value:e||"",onChange:e=>{if(""===e.currentTarget.value)return void n(oo.actions.setPreviewDurationSeconds(null));const t=Number.parseInt(e.currentTarget.value);isNaN(t)||n(oo.actions.setPreviewDurationSeconds(t))}})]})};var VE,GE,HE,KE;const qE=Re(gn)(VE||(VE=r([""]))),YE=Re(mn)(GE||(GE=r(["\n    margin-top: ",";\n"])),De.spacings.space2),XE=Re.div(HE||(HE=r(["\n    margin-top: ",";\n"])),De.spacings.space2),JE=Re(sn)(KE||(KE=r(["\n    font-size: 150%;\n    padding: 0.1em 0.5em;\n"]))),ZE=()=>{const e=TA(),n=EA(ax),t=EA(rx),r=EA(ox),a=EA(TE),o=t&&r&&["pd","pdJson","dspGraph"].includes(t)&&["wav","patchPlayer","app"].includes(r),i=EA(OE);return n?(0,Qe.jsxs)(qE,{children:[(0,Qe.jsx)(yn,{children:(0,Qe.jsx)(nn,{children:"\u2190 output"})}),(0,Qe.jsx)(bn,{children:r&&!i&&a===Bk?(0,Qe.jsx)(jE,{}):(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsx)(bE,{}),r&&o?(0,Qe.jsx)(_E,{}):null,"wav"===r?(0,Qe.jsx)($E,{}):null,r?(0,Qe.jsx)(XE,{children:(0,Qe.jsx)(JE,{onClick:()=>{e(Vk.actions.startBuild())},children:"Go !"})}):null,(0,Qe.jsxs)(YE,{children:["For more compilation options"," ",(0,Qe.jsx)("a",{href:"https://github.com/sebpiq/WebPd/#using-the-cli",target:"_blank",rel:"noreferrer",children:"you can use the CLI"}),"."]})]})})]}):null};var QE=t(481),eO=t.n(QE),nO=new URL(t(494),t.b);const tO='<p align="center">\n  <img src="'+eO()(nO)+'" />\n</p>\n\n\x3c!-- intro start --\x3e\n\n<p><strong>WebPd</strong> is a compiler for the <a href="https://puredata.info/">Pure Data</a> audio programming language allowing to run <strong>.pd</strong> patches in web pages.</p>\n<p><strong>WebPd is highly modular and takes a white-box approach to audio programming</strong>. It converts the audio graph and processing objects from a patch into plain human-readable JavaScript or <a href="https://www.assemblyscript.org/">AssemblyScript</a> (*). The pure audio generated code can be then integrated directly in any web application without using WebPd or Pure Data ever again \ud83c\udf08.</p>\n\x3c!-- intro end --\x3e\n\n<p><a href="https://github.com/sponsors/sebpiq"><img src="https://img.shields.io/static/v1?label=Sponsor&message=%E2%9D%A4&logo=GitHub&color=%23ed00d9" alt=""></a></p>\n<p><em>(*) AssemblyScript is a TypeScript-style language which compiles to WebAssembly.</em></p>\n<h2 id="usecase-examples">Usecase examples</h2>\n<ul>\n<li>Publish generative musical works on the web</li>\n<li>Execute, tweak and share patches collectively on any machine</li>\n<li>Produce, filter and playback sound and music data in realtime from web based applications and games</li>\n</ul>\n<h2 id="integration-and-scope">Integration and scope</h2>\n<p>There are plenty of good JavaScript libraries to build interactive visual interfaces such as <a href="https://threejs.org/">Three.js</a>, <a href="https://p5js.org/">p5.js</a>, good old JavaScript / HTML / CSS, etc. Integrating them with a WebPd patch should be fairly easy. An example of such integration is the <em>patch player</em> demo, available through <a href="#using-the-web-compiler">the web compiler</a>.</p>\n<p>WebPd is <strong>not</strong>, in itself, a complete editor and a live performance platform like Pure Data. The Pure Data graphical interface, as well as GEM, are out of the scope of WebPd. WebPd isn&#39;t either a simple executor like libpd. It is rather a lean audio compiler, which generates high-performance, human-readable and easily integrable audio code with no bloat.</p>\n<h2 id="usage">Usage</h2>\n<p><span id="using-the-web-compiler"><span></p>\n<h3 id="web-compiler-and-player">Web compiler and player</h3>\n<p><strong>The web compiler and a patch player are live at the following address: <a href="https://sebpiq.github.io/WebPd_website">https://sebpiq.github.io/WebPd_website</a></strong></p>\n<p>Just upload or give a URL(*) of a patch, compile it just in time and generate an interface allowing to play that patch in realtime in your browser. Once the compilation succeeds, you can copy and share with others the resulting URL from the player(**). This URL contains all the modified parameters of the patch you have played with, so that it is shared completely in its <em>current</em> state.</p>\n<p><em>(*)You can use any public URL of a patch found in the wild (on github, Pure Data forums, etc.).</em></p>\n<p><em>(**)Sharing a compiled patch doesn&#39;t work if you used local files for compilation.</em></p>\n<p><span id="using-the-cli"><span></p>\n<h3 id="command-line-interface">Command line interface</h3>\n<p><em>NOTE : Running the CLI requires node.js version 18 or higher.</em></p>\n<p>The command-line interface (CLI) offers more customization options, including the ability to generate a fully-functional (but bare bones) web page embedding your patch.</p>\n<p>Open a terminal and install the CLI with <a href="https://nodejs.org/">node / npm</a> by running the following command:</p>\n<pre><code>npm install -g webpd\n</code></pre>\n<p>Verify that installation worked by running:</p>\n<pre><code>webpd --help\n</code></pre>\n<p>This should output help for the CLI and will hopefully get you started.</p>\n<h3 id="advices-for-writing-webpd-compatible-patches">Advices for writing WebPd compatible patches</h3>\n<ul>\n<li>Make sure that you only use <a href="https://github.com/sebpiq/WebPd/blob/main/ROADMAP.md">supported features</a>.</li>\n<li>Always use <code>[trigger]</code> objects to make messages send order explicit (including in initialization with <code>[loadbang]</code> and when loading soundfiles). Indeed, due to different constraints, Pd and WebPd&#39;s message sequencing order might be different.</li>\n<li>Use [samplerate~] object instead of hard-coding sample rate with a fixed value.</li>\n</ul>\n<h3 id="getting-help">Getting help</h3>\n<p>If you feel stuck, there&#39;s <a href="https://puredata.info/community">plenty of places</a> where you can ask for help. I recommend in particular <a href="https://discord.gg/AZ43djV">the discord server</a> where you can get help quickly and find support from the community.</p>\n<p>If you feel you might have stumbled upon a bug, please report it following <a href="#reporting-a-bug">these simple guidelines</a>.</p>\n<h3 id="you-are-using-webpd">You are using WebPd?</h3>\n<p>Great \ud83c\udf31 ! It helps a lot with motivation to hear that people are using it. Don&#39;t hesitate to let me know by pinging me on twitter <a href="https://twitter.com/sebpiq">@sebpiq</a>, or <a href="https://second-hander.com/">writing me directly by email</a>.</p>\n<p>If you can afford it, you can also <a href="https://opencollective.com/webpd">donate</a> to help move development forward.</p>\n<h2 id="development">Development</h2>\n<h3 id="status--roadmap">Status &amp; roadmap</h3>\n<p>WebPd is currently under heavy development, but it is still a work in progress. A list of implemented objects, features and the roadmap are <a href="https://github.com/sebpiq/WebPd/blob/main/ROADMAP.md">here</a>.</p>\n<p>The project is currently in <em>alpha release state</em> which means that many of your patches will <em>not</em> work out of the box. Many objects and features are indeed still missing. If you feel there is a bug, thanks for reporting it following <a href="#reporting-a-bug">these simple guidelines</a>. If you feel you could develop an object that is missing in WebPd to play a specific patch, see <a href="#contributing">contributing</a>.</p>\n<p><span id="reporting-a-bug"><span></p>\n<h3 id="reporting-a-bug">Reporting a bug</h3>\n<p>If you wish to report a bug:</p>\n<ul>\n<li>First narrow it down. Remove all objects in your patch that are not related with the bug. Try to find the simplest patch with which this bug can be reproduced.</li>\n<li>Then submit a bug report <a href="https://github.com/sebpiq/WebPd/issues">in github</a> with the following template :</li>\n</ul>\n<pre><code>Patch and description -&gt; Upload your minimal patch\n\nCurrent behavior -&gt; Describe shortly how it is working at the moment\n\nExpected behavior -&gt; Describe shortly how it should work instead\n</code></pre>\n<p><span id="contributing"><span></p>\n<h3 id="contributing">Contributing</h3>\n<p>One-time contributions or regular work on the library are more than welcome! Contribution guidelines are coming, meanwhile if you have time and would really like to get involved please get in touch on the issue tracker on GitHub. I would be pleased to help you getting started for contributing.</p>\n<p>In case you would like to try developping a new object, here are some good examples to start with:</p>\n<ul>\n<li><a href="https://github.com/sebpiq/WebPd/blob/develop/src/nodes/nodes/clip.ts">clip.ts</a></li>\n<li><a href="https://github.com/sebpiq/WebPd/blob/develop/src/nodes/nodes/clip~.ts">clip~.ts</a></li>\n</ul>\n<p>If you want to dig deeper into the code, WebPd is built in several sub-packages in addition to this one which combines them all : </p>\n<ul>\n<li>Pd file parser : <a href="https://github.com/sebpiq/WebPd_pd-parser">https://github.com/sebpiq/WebPd_pd-parser</a></li>\n<li>WebPd compiler : <a href="https://github.com/sebpiq/WebPd_compiler">https://github.com/sebpiq/WebPd_compiler</a></li>\n<li>WebPd runtime : <a href="https://github.com/sebpiq/WebPd_runtime">https://github.com/sebpiq/WebPd_runtime</a></li>\n</ul>\n<h2 id="license">License</h2>\n<p>WebPd is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License version 3 as published by the Free Software Foundation.</p>\n<p>WebPd is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the\nGNU Lesser General Public License or read the <a href="https://github.com/sebpiq/WebPd/blob/main/COPYING.LESSER">COPYING.LESSER</a> file for more details.</p>\n<h2 id="authors">Authors</h2>\n<ul>\n<li>S\xe9bastien Piquemal <a href="mailto:&#x73;&#101;&#98;&#112;&#105;&#113;&#64;&#112;&#x72;&#111;&#116;&#x6f;&#x6e;&#109;&#x61;&#105;&#108;&#x2e;&#x63;&#x6f;&#109;">&#x73;&#101;&#98;&#112;&#105;&#113;&#64;&#112;&#x72;&#111;&#116;&#x6f;&#x6e;&#109;&#x61;&#105;&#108;&#x2e;&#x63;&#x6f;&#109;</a></li>\n<li>Chris McCormick</li>\n<li>Brandon James</li>\n<li>mgsx-dev</li>\n<li>Atul Varma</li>\n<li>Ulric Wilfred</li>\n<li>Paul Money</li>\n</ul>\n<h2 id="acknowledgment-and-sponsors">Acknowledgment and sponsors</h2>\n<p>This project has been sponsored by the <a href="https://dafneplus.eu/">DAFNE+</a> european research project funded by the European Union within the &quot;Horizon Europe&quot; program (Grant Agreement 101061548) and <a href="https://www.ircam.fr">IRCAM</a> within the WAM team from december 2022 to march 2023.</p>\n';var rO;function aO(){return aO=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},aO.apply(this,arguments)}function oO(n,t){let{title:r,titleId:a,...o}=n;return e.createElement("svg",aO({width:98,height:96,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},o),r?e.createElement("title",{id:a},r):null,rO||(rO=e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z",fill:"#24292f"})))}const iO=e.forwardRef(oO);t.p;function sO(){return sO=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},sO.apply(this,arguments)}function lO(n,t){let{title:r,titleId:a,...o}=n;return e.createElement("svg",sO({width:700,height:736,viewBox:"0 0 525 552",id:"svg2647",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":a},o),r?e.createElement("title",{id:a},r):null,e.createElement("path",{d:"M 110.52407,0.01240603 V 27.644204 H 55.25943 V 55.276003 L 27.631798,55.27194 V 82.903738 H 0 V 193.433 h 27.631798 v 55.26464 l 27.627632,-0.008 v 27.6318 h 27.631798 v 27.6318 h 27.631802 v 27.63179 h 27.63179 v 27.6318 h 27.6318 v 27.6318 h 27.6318 v 55.26464 h 27.6318 v 55.26464 h 27.6318 v 55.26463 h 27.6318 v -55.26463 h 27.63179 v -55.26464 h 27.6318 V 386.8483 h 27.6318 v -27.6318 h 27.6318 v -27.6318 h 27.6318 v -27.63179 h 27.6318 v -27.6318 h 27.63179 v -27.6318 h 27.6318 V 193.42467 H 525 V 82.895395 H 497.3682 V 55.263596 H 469.7364 V 27.631798 H 414.47177 V 0 h -55.26464 v 27.631798 h -55.26464 v 27.631798 h -27.6318 v 27.631799 h -27.6318 V 55.263596 h -27.6318 V 27.631798 l -27.63596,0.01221 h -27.6318 V 0.01220812 Z",id:"path2645",style:{strokeWidth:1.04165}}))}const uO=e.forwardRef(lO);t.p;var cO,dO,pO,fO,hO,mO;const gO="\x3c!-- intro start --\x3e",yO=tO.slice(tO.indexOf(gO)+20,tO.indexOf("\x3c!-- intro end --\x3e")),bO=Re(tn)(cO||(cO=r(["\n    background: linear-gradient(\n        180deg,\n        rgba(0, 0, 0, 0) 10%,\n        "," 50%,\n        "," 67%\n    );\n"])),De.colors.bg2,De.colors.bg2),vO=Re.h1(dO||(dO=r(["\n    position: relative;\n    bottom: 0.15em;\n    font-size: 600%;\n    font-family: ",";\n    color: ",";\n    margin: 0;\n    padding: 0;\n    margin-bottom: ",";\n    line-height: 100%;\n    letter-spacing: 0.3em;\n    text-align: center;\n    @media (max-width: 700px) {\n        font-size: 450%;\n    }\n    @media (max-width: 400px) {\n        font-size: 350%;\n    }\n"])),De.fonts.title,De.colors.colorScheme.next(),De.spacings.space2),wO=Re.div(pO||(pO=r(["\n    & > *:last-child {\n        margin-bottom: 0;\n    }\n"]))),SO=Re.div(fO||(fO=r(["\n    margin-top: ",";\n    display: flex;\n    flex-direction: row;\n"])),De.spacings.space1),kO="\n    font-family: ".concat(De.fonts.title,";\n    font-size: 85%;\n    text-decoration: underline;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    width: fit-content;\n\n    svg {\n        height: 1em;\n        width: 1em;\n        display: inline;\n        margin-left: 0.5em;\n        path {\n            fill: ").concat(De.colors.fg1,";\n        }\n    }\n"),xO=Re.a(hO||(hO=r(["\n    ","\n"])),kO),IO=Re.a(mO||(mO=r(["\n    ","\n    margin-left: ",";\n"])),kO,De.spacings.space1),_O=()=>(0,Qe.jsxs)(bO,{children:[(0,Qe.jsx)(vO,{children:"WebPd"}),(0,Qe.jsx)(wO,{dangerouslySetInnerHTML:{__html:yO}}),(0,Qe.jsxs)(SO,{children:[(0,Qe.jsxs)(xO,{href:"https://github.com/sebpiq/WebPd",target:"_blank",rel:"noopener",children:["Read more",(0,Qe.jsx)(iO,{viewBox:"0 0 97.627 96"})]}),(0,Qe.jsxs)(IO,{href:"https://opencollective.com/webpd",target:"_blank",rel:"noopener",children:["Donate",(0,Qe.jsx)(uO,{})]})]})]});var AO,TO,EO,OO,CO;const NO=Re(tn)(AO||(AO=r([""]))),MO=Re.pre(TO||(TO=r(["\n    overflow: auto;\n    margin: 0;\n"]))),PO=Re.pre(EO||(EO=r(["\n    overflow: auto;\n    margin: 0;\n    color: ",";\n"])),De.colors.colorScheme.next()),FO=Re.div(OO||(OO=r(["\n    margin-top: ",";\n"])),De.spacings.space1),RO=Re(mn)(CO||(CO=r(["\n    margin-top: ",";\n"])),De.spacings.space2),LO=()=>{const e=EA(OE),n=EA(CE),t=e&&e.length,r=n&&n.length;if(!t&&!r)return null;const a=(0,Qe.jsxs)(Qe.Fragment,{children:["WebPd is still in alpha release and many patches will likely not work (for now). You can find the list of implemented objects ",(0,Qe.jsx)("a",{href:"https://github.com/sebpiq/WebPd/blob/main/ROADMAP.md",target:"_blank",rel:"noreferrer",children:"here"}),". If failure was caused by a missing feature, you can either"," ",(0,Qe.jsx)("a",{href:"https://opencollective.com/webpd",target:"_blank",rel:"noreferrer",children:"donate"})," ","to speed up its implementation, or you can directly"," ",(0,Qe.jsx)("a",{href:"https://github.com/sebpiq/WebPd/#contributing",target:"_blank",rel:"noreferrer",children:"contribute to development"}),". If, on the other hand, this looks like a bug, thanks for"," ",(0,Qe.jsx)("a",{href:"https://github.com/sebpiq/WebPd/#reporting-a-bug",target:"_blank",rel:"noreferrer",children:"reporting it here."})]});return(0,Qe.jsxs)(NO,{children:[(0,Qe.jsx)(nn,{children:"Compilation output :"}),(0,Qe.jsxs)(FO,{children:[r?n.map(((e,n)=>(0,Qe.jsxs)(MO,{children:["WARNING : ",e]},n))):null,t?e.map(((e,n)=>(0,Qe.jsxs)(PO,{children:["ERROR : ",e]},n))):null]}),t||r?(0,Qe.jsxs)(RO,{children:[t?"It seems like your compilation failed \ud83d\ude22.":"It seems like your compilation succeeded but with warnings \ud83d\ude05.",(0,Qe.jsx)("br",{}),a]}):null]})};var DO;const jO=Re(tn)(DO||(DO=r(["\n    text-align: center;\n"]))),zO=()=>(0,Qe.jsx)(jO,{children:(0,Qe.jsx)(en,{children:"\u2193 Online compiler \u2193"})});var BO,UO,WO,$O;const VO=Re(tn)(BO||(BO=r(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    & * {\n        font-size: 90%;\n    }\n    background: linear-gradient(\n        180deg,\n        "," 33%,\n        "," 60%,\n        rgba(0, 0, 0, 0) 100%\n    );\n    padding-bottom: calc("," * 2);\n"])),De.colors.bg2,De.colors.bg2,De.spacings.space2),GO=Re.div(UO||(UO=r(["\n    color: ",";\n    margin-right: 1em;\n"])),De.colors.fg2),HO=Re.div(WO||(WO=r(["\n    display: flex;\n    flex-direction: row;\n    @media (min-width: ","px) {\n        min-width: 10em;\n    }\n    @media (max-width: ","px) {\n        flex-direction: column;\n        min-width: 5em;\n    }\n"])),De.devices.mobile.maxWidth,De.devices.mobile.maxWidth),KO=Re.a($O||($O=r(["\n    text-align: right;\n    color: ",";\n\n    svg {\n        height: 1em;\n        width: 1em;\n        display: inline;\n        position: relative;\n        top: 0.2em;\n        margin-left: 0.5em;\n        path {\n            fill: ",";\n        }\n    }\n\n    @media (min-width: ","px) {\n        width: 10em;\n    }\n\n    @media (max-width: ","px) {\n        margin-bottom: ",";\n        &:last-child {\n            margin-bottom: 0;\n        }\n    }\n"])),De.colors.fg2,De.colors.fg2,De.devices.mobile.maxWidth,De.devices.mobile.maxWidth,De.spacings.space1),qO=()=>(0,Qe.jsxs)(VO,{children:[(0,Qe.jsx)(GO,{children:"WebPd is an open-source project released under the LGPL v3.0. Files uploaded on this web site are not stored on any server."}),(0,Qe.jsxs)(HO,{children:[(0,Qe.jsxs)(KO,{href:"https://github.com/sebpiq/WebPd",target:"_blank",rel:"noopener",children:["GitHub",(0,Qe.jsx)(iO,{viewBox:"0 0 97.627 96"})]}),(0,Qe.jsxs)(KO,{href:"https://opencollective.com/webpd",target:"_blank",rel:"noopener",children:["Donate",(0,Qe.jsx)(uO,{})]})]})]});var YO,XO;const JO=Re(tn)(YO||(YO=r([""]))),ZO=Re.pre(XO||(XO=r(["\n    max-height: 25vh;\n    overflow: auto;\n"]))),QO=()=>{const e=EA(AE);return(0,Qe.jsxs)(JO,{children:[(0,Qe.jsx)(en,{children:"Debugging"}),e.pdJson?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)(nn,{children:["Pd JSON"," ",(0,Qe.jsx)(on,{onClick:()=>{En("debug.pd.json",JSON.stringify(e.pdJson,null,2),"application/json")},children:"Download"})]}),(0,Qe.jsx)(ZO,{children:JSON.stringify(e.pdJson,null,2)})]}):null,e.dspGraph?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)(nn,{children:["DSP Graph"," ",(0,Qe.jsx)(on,{onClick:()=>{En("debug.dsp-graph.json",JSON.stringify(e.dspGraph,null,2),"application/json")},children:"Download"})]}),(0,Qe.jsx)(ZO,{children:JSON.stringify(e.dspGraph,null,2)})]}):null,e.javascript?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)(nn,{children:["Compiled JS"," ",(0,Qe.jsx)(on,{onClick:()=>{En("debug.code.js",e.javascript,"application/javascript")},children:"Download"})]}),(0,Qe.jsx)(ZO,{children:e.javascript})]}):null,e.assemblyscript?(0,Qe.jsxs)(Qe.Fragment,{children:[(0,Qe.jsxs)(nn,{children:["Compiled ASC"," ",(0,Qe.jsx)(on,{onClick:()=>{En("debug.code.asc",e.assemblyscript,"application/assemblyscript")},children:"Download"})]}),(0,Qe.jsx)(ZO,{children:e.assemblyscript})]}):null]})};var eC,nC,tC,rC,aC;const oC=function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];var o=ve.apply(void 0,[n].concat(r)),i="sc-global-"+Ie(JSON.stringify(o)),s=new Fe(o,i);function l(n){var t=se(),r=le(),a=(0,e.useContext)(Ce),o=(0,e.useRef)(t.allocateGSInstance(i)).current;return t.server&&u(o,n,t,a,r),(0,e.useLayoutEffect)((function(){if(!t.server)return u(o,n,t,a,r),function(){return s.removeStyles(o,t)}}),[o,n,t,a,r]),null}function u(e,n,t,r,a){if(s.isStatic)s.renderStyles(e,_,t,a);else{var o=h({},n,{theme:we(n,r,l.defaultProps)});s.renderStyles(e,o,t,a)}}return e.memo(l)}(eC||(eC=r(["\n    @font-face {\n        font-family: 'Rajdhani';\n        src: local('Rajdhani'),\n            url('./fonts/Rajdhani/Rajdhani-Medium.ttf') format('woff');\n    }\n\n    @font-face {\n        font-family: 'Silkscreen';\n        src: local('Silkscreen'),\n            url('./fonts/Silkscreen/Silkscreen-Regular.ttf') format('woff');\n    }\n\n    body, html {\n        padding: 0;\n        margin: 0;\n        background-color: ",";\n    }\n\n    * { \n        box-sizing: border-box;\n        /* To enable flex items shrink : https://stackoverflow.com/questions/36247140/why-dont-flex-items-shrink-past-content-size */\n        min-width: 0; \n        min-height: 0;\n        font-size: ","px;\n        @media (max-width: ","px) {\n            font-size: ","px;\n        }\n        font-family: ",";\n        color: ",";\n        scrollbar-width: thin;\n        &::-webkit-scrollbar {\n            width: calc("," / 4);\n            height: calc("," / 4);\n        }\n        &::-webkit-scrollbar-track {\n            background: transparent;\n        }\n        &::-webkit-scrollbar-thumb {\n            background-color: ",";\n            border-radius: 20px;\n        }\n    }\n\n    input {\n        background-color: ",";\n        border: none;\n        font-size: 100%;\n    }\n\n    textarea:focus, input:focus{\n        outline: "," solid 1px;\n    }\n"])),De.colors.bg1,De.devices.desktop.fontSize,De.devices.mobile.maxWidth,De.devices.mobile.fontSize,De.fonts.default,De.colors.fg1,De.spacings.space1,De.spacings.space1,De.colors.fg2,De.colors.bg2,De.colors.fg2),iC=Re.div(nC||(nC=r(["\n    display: flex;\n    flex-direction: column;\n    min-height: 100vh;\n    & > *:last-child {\n        flex: auto;\n    }\n"]))),sC=Re.div(tC||(tC=r(["\n    position: relative;\n"]))),lC=Re.div(rC||(rC=r(["\n    margin: auto;\n    width: 100%;\n    position: absolute;\n    height: 100%;\n    z-index: 3;\n"]))),uC=Re((e=>{let{text:n,className:t}=e;return(0,Qe.jsx)(vn,{className:t,children:n})}))(aC||(aC=r(["\n    max-width: ",";\n    width: 100%;\n    margin: 0 auto;\n    height: 100%;\n    z-index: ",";\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: ","ee;\n    font-size: 200%;\n"])),De.dimensions.maxContentWidth,De.zIndexes.spinner,De.colors.bg2),cC=()=>{const e=EA(dA),n=EA(TE)===zk,t=EA(fA);return e?(0,Qe.jsxs)(iC,{children:[(0,Qe.jsx)(_O,{}),(0,Qe.jsx)(zO,{}),(0,Qe.jsxs)(sC,{children:[n?(0,Qe.jsx)(lC,{children:(0,Qe.jsx)(uC,{text:"building..."})}):null,(0,Qe.jsx)(uE,{}),(0,Qe.jsx)(ZE,{}),t?(0,Qe.jsx)(QO,{}):null,(0,Qe.jsx)(LO,{})]}),(0,Qe.jsx)(qO,{})]}):(0,Qe.jsx)(Qe.Fragment,{children:(0,Qe.jsx)(_O,{})})},dC=()=>(0,Qe.jsxs)(qa,{store:AA,children:[(0,Qe.jsx)(oC,{}),(0,Qe.jsx)(cC,{})]}),pC=e=>{e&&e instanceof Function&&t.e(787).then(t.bind(t,787)).then((n=>{let{getCLS:t,getFID:r,getFCP:a,getLCP:o,getTTFB:i}=n;t(e),r(e),a(e),o(e),i(e)}))};n.createRoot(document.getElementById("root")).render((0,Qe.jsx)(dC,{})),pC()})()})();
//# sourceMappingURL=main.ebc45741.js.map