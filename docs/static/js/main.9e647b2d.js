/*! For license information please see main.9e647b2d.js.LICENSE.txt */
!function(){var e={936:function(e,n,t){"use strict";t.r(n);var r={};try{!function(e,n){if(new e("q=%2B").get("q")!==n||new e({q:n}).get("q")!==n||new e([["q",n]]).get("q")!==n||"q=%0A"!==new e("q=\n").toString()||"q=+%26"!==new e({q:" &"}).toString()||"q=%25zx"!==new e({q:"%zx"}).toString())throw e;r.URLSearchParams=e}(URLSearchParams,"+")}catch(URLSearchParams){!function(e,n,t){var a=e.create,o=e.defineProperty,i=/[!'\(\)~]|%20|%00/g,s=/%(?![0-9a-fA-F]{2})/g,c=/\+/g,u={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"},l={append:function(e,n){m(this._ungap,e,n)},delete:function(e){delete this._ungap[e]},get:function(e){return this.has(e)?this._ungap[e][0]:null},getAll:function(e){return this.has(e)?this._ungap[e].slice(0):[]},has:function(e){return e in this._ungap},set:function(e,t){this._ungap[e]=[n(t)]},forEach:function(e,t){var r=this;for(var a in r._ungap)r._ungap[a].forEach(o,a);function o(o){e.call(t,o,n(a),r)}},toJSON:function(){return{}},toString:function(){var e=[];for(var n in this._ungap)for(var t=g(n),r=0,a=this._ungap[n];r<a.length;r++)e.push(t+"="+g(a[r]));return e.join("&")}};for(var f in l)o(d.prototype,f,{configurable:!0,writable:!0,value:l[f]});function d(e){var n=a(null);switch(o(this,"_ungap",{value:n}),!0){case!e:break;case"string"===typeof e:"?"===e.charAt(0)&&(e=e.slice(1));for(var r=e.split("&"),i=0,s=r.length;i<s;i++){var c=(u=r[i]).indexOf("=");-1<c?m(n,h(u.slice(0,c)),h(u.slice(c+1))):u.length&&m(n,h(u),"")}break;case t(e):for(i=0,s=e.length;i<s;i++){var u;m(n,(u=e[i])[0],u[1])}break;case"forEach"in e:e.forEach(p,n);break;default:for(var l in e)m(n,l,e[l])}}function p(e,n){m(this,n,e)}function m(e,n,r){var a=t(r)?r.join(","):r;n in e?e[n].push(a):e[n]=[a]}function h(e){return decodeURIComponent(e.replace(s,"%25").replace(c," "))}function g(e){return encodeURIComponent(e).replace(i,y)}function y(e){return u[e]}r.URLSearchParams=d}(Object,String,Array.isArray)}!function(e){var n=!1;try{n=!!Symbol.iterator}catch(r){}function t(e,t){var r=[];return e.forEach(t,r),n?r[Symbol.iterator]():{next:function(){var e=r.shift();return{done:void 0===e,value:e}}}}"forEach"in e||(e.forEach=function(e,n){var t=this,r=Object.create(null);this.toString().replace(/=[\s\S]*?(?:&|$)/g,"=").split("=").forEach((function(a){a.length&&!(a in r)&&(r[a]=t.getAll(a)).forEach((function(r){e.call(n,r,a,t)}))}))}),"keys"in e||(e.keys=function(){return t(this,(function(e,n){this.push(n)}))}),"values"in e||(e.values=function(){return t(this,(function(e,n){this.push(e)}))}),"entries"in e||(e.entries=function(){return t(this,(function(e,n){this.push([n,e])}))}),n&&!(Symbol.iterator in e)&&(e[Symbol.iterator]=e.entries),"sort"in e||(e.sort=function(){for(var e,n,t,r=this.entries(),a=r.next(),o=a.done,i=[],s=Object.create(null);!o;)n=(t=a.value)[0],i.push(n),n in s||(s[n]=[]),s[n].push(t[1]),o=(a=r.next()).done;for(i.sort(),e=0;e<i.length;e++)this.delete(i[e]);for(e=0;e<i.length;e++)n=i[e],this.append(n,s[n].shift())}),function(n){var t=n.defineProperty,r=n.getOwnPropertyDescriptor,a=function(n){var t=n.append;n.append=e.append,URLSearchParams.call(n,n._usp.search.slice(1)),n.append=t},o=function(e,n){if(!(e instanceof n))throw new TypeError("'searchParams' accessed on an object that does not implement interface "+n.name)},i=function(i){var s,c,u=i.prototype,l=r(u,"searchParams"),f=r(u,"href"),d=r(u,"search");!l&&d&&d.set&&(c=function(n){function r(t,r){e.append.call(this,t,r),t=this.toString(),n.set.call(this._usp,t?"?"+t:"")}function a(t){e.delete.call(this,t),t=this.toString(),n.set.call(this._usp,t?"?"+t:"")}function o(t,r){e.set.call(this,t,r),t=this.toString(),n.set.call(this._usp,t?"?"+t:"")}return function(e,n){return e.append=r,e.delete=a,e.set=o,t(e,"_usp",{configurable:!0,writable:!0,value:n})}}(d),s=function(e,n){return t(e,"_searchParams",{configurable:!0,writable:!0,value:c(n,e)}),n},n.defineProperties(u,{href:{get:function(){return f.get.call(this)},set:function(e){var n=this._searchParams;f.set.call(this,e),n&&a(n)}},search:{get:function(){return d.get.call(this)},set:function(e){var n=this._searchParams;d.set.call(this,e),n&&a(n)}},searchParams:{get:function(){return o(this,i),this._searchParams||s(this,new URLSearchParams(this.search.slice(1)))},set:function(e){o(this,i),s(this,e)}}}))};try{i(HTMLAnchorElement),/^function|object$/.test(typeof URL)&&URL.prototype&&i(URL)}catch(s){}}(Object)}(r.URLSearchParams.prototype),n.default=r.URLSearchParams},998:function(e,n){"use strict";n.Z=function(e,n){if(e&&n){var t=Array.isArray(n)?n:n.split(","),r=e.name||"",a=(e.type||"").toLowerCase(),o=a.replace(/\/.*$/,"");return t.some((function(e){var n=e.trim().toLowerCase();return"."===n.charAt(0)?r.toLowerCase().endsWith(n):n.endsWith("/*")?o===n.replace(/\/.*$/,""):a===n}))}return!0}},588:function(e,n,t){"use strict";t.r(n),t.d(n,{createBrowserHistory:function(){return E},createHashHistory:function(){return P},createLocation:function(){return v},createMemoryHistory:function(){return N},createPath:function(){return y},locationsAreEqual:function(){return b},parsePath:function(){return g}});var r=t(462);function a(e){return"/"===e.charAt(0)}function o(e,n){for(var t=n,r=t+1,a=e.length;r<a;t+=1,r+=1)e[t]=e[r];e.pop()}var i=function(e,n){void 0===n&&(n="");var t,r=e&&e.split("/")||[],i=n&&n.split("/")||[],s=e&&a(e),c=n&&a(n),u=s||c;if(e&&a(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var l=i[i.length-1];t="."===l||".."===l||""===l}else t=!1;for(var f=0,d=i.length;d>=0;d--){var p=i[d];"."===p?o(i,d):".."===p?(o(i,d),f++):f&&(o(i,d),f--)}if(!u)for(;f--;f)i.unshift("..");!u||""===i[0]||i[0]&&a(i[0])||i.unshift("");var m=i.join("/");return t&&"/"!==m.substr(-1)&&(m+="/"),m};function s(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var c=function e(n,t){if(n===t)return!0;if(null==n||null==t)return!1;if(Array.isArray(n))return Array.isArray(t)&&n.length===t.length&&n.every((function(n,r){return e(n,t[r])}));if("object"===typeof n||"object"===typeof t){var r=s(n),a=s(t);return r!==n||a!==t?e(r,a):Object.keys(Object.assign({},n,t)).every((function(r){return e(n[r],t[r])}))}return!1},u=!0,l="Invariant failed";function f(e,n){if(!e){if(u)throw new Error(l);var t="function"===typeof n?n():n,r=t?"".concat(l,": ").concat(t):l;throw new Error(r)}}function d(e){return"/"===e.charAt(0)?e:"/"+e}function p(e){return"/"===e.charAt(0)?e.substr(1):e}function m(e,n){return function(e,n){return 0===e.toLowerCase().indexOf(n.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(n.length))}(e,n)?e.substr(n.length):e}function h(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function g(e){var n=e||"/",t="",r="",a=n.indexOf("#");-1!==a&&(r=n.substr(a),n=n.substr(0,a));var o=n.indexOf("?");return-1!==o&&(t=n.substr(o),n=n.substr(0,o)),{pathname:n,search:"?"===t?"":t,hash:"#"===r?"":r}}function y(e){var n=e.pathname,t=e.search,r=e.hash,a=n||"/";return t&&"?"!==t&&(a+="?"===t.charAt(0)?t:"?"+t),r&&"#"!==r&&(a+="#"===r.charAt(0)?r:"#"+r),a}function v(e,n,t,a){var o;"string"===typeof e?(o=g(e)).state=n:(void 0===(o=(0,r.Z)({},e)).pathname&&(o.pathname=""),o.search?"?"!==o.search.charAt(0)&&(o.search="?"+o.search):o.search="",o.hash?"#"!==o.hash.charAt(0)&&(o.hash="#"+o.hash):o.hash="",void 0!==n&&void 0===o.state&&(o.state=n));try{o.pathname=decodeURI(o.pathname)}catch(s){throw s instanceof URIError?new URIError('Pathname "'+o.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):s}return t&&(o.key=t),a?o.pathname?"/"!==o.pathname.charAt(0)&&(o.pathname=i(o.pathname,a.pathname)):o.pathname=a.pathname:o.pathname||(o.pathname="/"),o}function b(e,n){return e.pathname===n.pathname&&e.search===n.search&&e.hash===n.hash&&e.key===n.key&&c(e.state,n.state)}function S(){var e=null;var n=[];return{setPrompt:function(n){return e=n,function(){e===n&&(e=null)}},confirmTransitionTo:function(n,t,r,a){if(null!=e){var o="function"===typeof e?e(n,t):e;"string"===typeof o?"function"===typeof r?r(o,a):a(!0):a(!1!==o)}else a(!0)},appendListener:function(e){var t=!0;function r(){t&&e.apply(void 0,arguments)}return n.push(r),function(){t=!1,n=n.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.forEach((function(e){return e.apply(void 0,t)}))}}}var w=!("undefined"===typeof window||!window.document||!window.document.createElement);function _(e,n){n(window.confirm(e))}var k="popstate",x="hashchange";function I(){try{return window.history.state||{}}catch(e){return{}}}function E(e){void 0===e&&(e={}),w||f(!1);var n=window.history,t=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),a=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,i=o.forceRefresh,s=void 0!==i&&i,c=o.getUserConfirmation,u=void 0===c?_:c,l=o.keyLength,p=void 0===l?6:l,g=e.basename?h(d(e.basename)):"";function b(e){var n=e||{},t=n.key,r=n.state,a=window.location,o=a.pathname+a.search+a.hash;return g&&(o=m(o,g)),v(o,r,t)}function E(){return Math.random().toString(36).substr(2,p)}var O=S();function T(e){(0,r.Z)(z,e),z.length=n.length,O.notifyListeners(z.location,z.action)}function C(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||P(b(e.state))}function A(){P(b(I()))}var F=!1;function P(e){if(F)F=!1,T();else{O.confirmTransitionTo(e,"POP",u,(function(n){n?T({action:"POP",location:e}):function(e){var n=z.location,t=N.indexOf(n.key);-1===t&&(t=0);var r=N.indexOf(e.key);-1===r&&(r=0);var a=t-r;a&&(F=!0,R(a))}(e)}))}}var M=b(I()),N=[M.key];function L(e){return g+y(e)}function R(e){n.go(e)}var D=0;function j(e){1===(D+=e)&&1===e?(window.addEventListener(k,C),a&&window.addEventListener(x,A)):0===D&&(window.removeEventListener(k,C),a&&window.removeEventListener(x,A))}var B=!1;var z={length:n.length,action:"POP",location:M,createHref:L,push:function(e,r){var a="PUSH",o=v(e,r,E(),z.location);O.confirmTransitionTo(o,a,u,(function(e){if(e){var r=L(o),i=o.key,c=o.state;if(t)if(n.pushState({key:i,state:c},null,r),s)window.location.href=r;else{var u=N.indexOf(z.location.key),l=N.slice(0,u+1);l.push(o.key),N=l,T({action:a,location:o})}else window.location.href=r}}))},replace:function(e,r){var a="REPLACE",o=v(e,r,E(),z.location);O.confirmTransitionTo(o,a,u,(function(e){if(e){var r=L(o),i=o.key,c=o.state;if(t)if(n.replaceState({key:i,state:c},null,r),s)window.location.replace(r);else{var u=N.indexOf(z.location.key);-1!==u&&(N[u]=o.key),T({action:a,location:o})}else window.location.replace(r)}}))},go:R,goBack:function(){R(-1)},goForward:function(){R(1)},block:function(e){void 0===e&&(e=!1);var n=O.setPrompt(e);return B||(j(1),B=!0),function(){return B&&(B=!1,j(-1)),n()}},listen:function(e){var n=O.appendListener(e);return j(1),function(){j(-1),n()}}};return z}var O="hashchange",T={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+p(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:p,decodePath:d},slash:{encodePath:d,decodePath:d}};function C(e){var n=e.indexOf("#");return-1===n?e:e.slice(0,n)}function A(){var e=window.location.href,n=e.indexOf("#");return-1===n?"":e.substring(n+1)}function F(e){window.location.replace(C(window.location.href)+"#"+e)}function P(e){void 0===e&&(e={}),w||f(!1);var n=window.history,t=(window.navigator.userAgent.indexOf("Firefox"),e),a=t.getUserConfirmation,o=void 0===a?_:a,i=t.hashType,s=void 0===i?"slash":i,c=e.basename?h(d(e.basename)):"",u=T[s],l=u.encodePath,p=u.decodePath;function g(){var e=p(A());return c&&(e=m(e,c)),v(e)}var b=S();function k(e){(0,r.Z)(z,e),z.length=n.length,b.notifyListeners(z.location,z.action)}var x=!1,I=null;function E(){var e,n,t=A(),r=l(t);if(t!==r)F(r);else{var a=g(),i=z.location;if(!x&&(n=a,(e=i).pathname===n.pathname&&e.search===n.search&&e.hash===n.hash))return;if(I===y(a))return;I=null,function(e){if(x)x=!1,k();else{var n="POP";b.confirmTransitionTo(e,n,o,(function(t){t?k({action:n,location:e}):function(e){var n=z.location,t=L.lastIndexOf(y(n));-1===t&&(t=0);var r=L.lastIndexOf(y(e));-1===r&&(r=0);var a=t-r;a&&(x=!0,R(a))}(e)}))}}(a)}}var P=A(),M=l(P);P!==M&&F(M);var N=g(),L=[y(N)];function R(e){n.go(e)}var D=0;function j(e){1===(D+=e)&&1===e?window.addEventListener(O,E):0===D&&window.removeEventListener(O,E)}var B=!1;var z={length:n.length,action:"POP",location:N,createHref:function(e){var n=document.querySelector("base"),t="";return n&&n.getAttribute("href")&&(t=C(window.location.href)),t+"#"+l(c+y(e))},push:function(e,n){var t="PUSH",r=v(e,void 0,void 0,z.location);b.confirmTransitionTo(r,t,o,(function(e){if(e){var n=y(r),a=l(c+n);if(A()!==a){I=n,function(e){window.location.hash=e}(a);var o=L.lastIndexOf(y(z.location)),i=L.slice(0,o+1);i.push(n),L=i,k({action:t,location:r})}else k()}}))},replace:function(e,n){var t="REPLACE",r=v(e,void 0,void 0,z.location);b.confirmTransitionTo(r,t,o,(function(e){if(e){var n=y(r),a=l(c+n);A()!==a&&(I=n,F(a));var o=L.indexOf(y(z.location));-1!==o&&(L[o]=n),k({action:t,location:r})}}))},go:R,goBack:function(){R(-1)},goForward:function(){R(1)},block:function(e){void 0===e&&(e=!1);var n=b.setPrompt(e);return B||(j(1),B=!0),function(){return B&&(B=!1,j(-1)),n()}},listen:function(e){var n=b.appendListener(e);return j(1),function(){j(-1),n()}}};return z}function M(e,n,t){return Math.min(Math.max(e,n),t)}function N(e){void 0===e&&(e={});var n=e,t=n.getUserConfirmation,a=n.initialEntries,o=void 0===a?["/"]:a,i=n.initialIndex,s=void 0===i?0:i,c=n.keyLength,u=void 0===c?6:c,l=S();function f(e){(0,r.Z)(b,e),b.length=b.entries.length,l.notifyListeners(b.location,b.action)}function d(){return Math.random().toString(36).substr(2,u)}var p=M(s,0,o.length-1),m=o.map((function(e){return v(e,void 0,"string"===typeof e?d():e.key||d())})),h=y;function g(e){var n=M(b.index+e,0,b.entries.length-1),r=b.entries[n];l.confirmTransitionTo(r,"POP",t,(function(e){e?f({action:"POP",location:r,index:n}):f()}))}var b={length:m.length,action:"POP",location:m[p],index:p,entries:m,createHref:h,push:function(e,n){var r="PUSH",a=v(e,n,d(),b.location);l.confirmTransitionTo(a,r,t,(function(e){if(e){var n=b.index+1,t=b.entries.slice(0);t.length>n?t.splice(n,t.length-n,a):t.push(a),f({action:r,location:a,index:n,entries:t})}}))},replace:function(e,n){var r="REPLACE",a=v(e,n,d(),b.location);l.confirmTransitionTo(a,r,t,(function(e){e&&(b.entries[b.index]=a,f({action:r,location:a}))}))},go:g,goBack:function(){g(-1)},goForward:function(){g(1)},canGo:function(e){var n=b.index+e;return n>=0&&n<b.entries.length},block:function(e){return void 0===e&&(e=!1),l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return b}},110:function(e,n,t){"use strict";var r=t(309),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function c(e){return r.isMemo(e)?i:s[e.$$typeof]||a}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=i;var u=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(n,t,r){if("string"!==typeof t){if(m){var a=p(t);a&&a!==m&&e(n,a,r)}var i=l(t);f&&(i=i.concat(f(t)));for(var s=c(n),h=c(t),g=0;g<i.length;++g){var y=i[g];if(!o[y]&&(!r||!r[y])&&(!h||!h[y])&&(!s||!s[y])){var v=d(t,y);try{u(n,y,v)}catch(b){}}}}return n}},746:function(e,n){"use strict";var t="function"===typeof Symbol&&Symbol.for,r=t?Symbol.for("react.element"):60103,a=t?Symbol.for("react.portal"):60106,o=t?Symbol.for("react.fragment"):60107,i=t?Symbol.for("react.strict_mode"):60108,s=t?Symbol.for("react.profiler"):60114,c=t?Symbol.for("react.provider"):60109,u=t?Symbol.for("react.context"):60110,l=t?Symbol.for("react.async_mode"):60111,f=t?Symbol.for("react.concurrent_mode"):60111,d=t?Symbol.for("react.forward_ref"):60112,p=t?Symbol.for("react.suspense"):60113,m=t?Symbol.for("react.suspense_list"):60120,h=t?Symbol.for("react.memo"):60115,g=t?Symbol.for("react.lazy"):60116,y=t?Symbol.for("react.block"):60121,v=t?Symbol.for("react.fundamental"):60117,b=t?Symbol.for("react.responder"):60118,S=t?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var n=e.$$typeof;switch(n){case r:switch(e=e.type){case l:case f:case o:case s:case i:case p:return e;default:switch(e=e&&e.$$typeof){case u:case d:case g:case h:case c:return e;default:return n}}case a:return n}}}function _(e){return w(e)===f}n.AsyncMode=l,n.ConcurrentMode=f,n.ContextConsumer=u,n.ContextProvider=c,n.Element=r,n.ForwardRef=d,n.Fragment=o,n.Lazy=g,n.Memo=h,n.Portal=a,n.Profiler=s,n.StrictMode=i,n.Suspense=p,n.isAsyncMode=function(e){return _(e)||w(e)===l},n.isConcurrentMode=_,n.isContextConsumer=function(e){return w(e)===u},n.isContextProvider=function(e){return w(e)===c},n.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},n.isForwardRef=function(e){return w(e)===d},n.isFragment=function(e){return w(e)===o},n.isLazy=function(e){return w(e)===g},n.isMemo=function(e){return w(e)===h},n.isPortal=function(e){return w(e)===a},n.isProfiler=function(e){return w(e)===s},n.isStrictMode=function(e){return w(e)===i},n.isSuspense=function(e){return w(e)===p},n.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===f||e===s||e===i||e===p||e===m||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===h||e.$$typeof===c||e.$$typeof===u||e.$$typeof===d||e.$$typeof===v||e.$$typeof===b||e.$$typeof===S||e.$$typeof===y)},n.typeOf=w},309:function(e,n,t){"use strict";e.exports=t(746)},888:function(e,n,t){"use strict";var r=t(47);function a(){}function o(){}o.resetWarningCache=a,e.exports=function(){function e(e,n,t,a,o,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function n(){return e}e.isRequired=e;var t={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:n,element:e,elementType:e,instanceOf:n,node:e,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:o,resetWarningCache:a};return t.PropTypes=t,t}},7:function(e,n,t){e.exports=t(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,n,t){"use strict";var r=t(791),a=t(296);function o(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,s={};function c(e,n){u(e,n),u(e+"Capture",n)}function u(e,n){for(s[e]=n,e=0;e<n.length;e++)i.add(n[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function h(e,n,t,r,a,o,i){this.acceptsBooleans=2===n||3===n||4===n,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=o,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new h(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var n=e[0];g[n]=new h(n,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new h(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new h(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new h(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new h(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,n,t,r){var a=g.hasOwnProperty(n)?g[n]:null;(null!==a?0!==a.type:r||!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&(function(e,n,t,r){if(null===n||"undefined"===typeof n||function(e,n,t,r){if(null!==t&&0===t.type)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==t?!t.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,n,t,r))return!0;if(r)return!1;if(null!==t)switch(t.type){case 3:return!n;case 4:return!1===n;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}(n,t,a,r)&&(t=null),r||null===a?function(e){return!!f.call(m,e)||!f.call(p,e)&&(d.test(e)?m[e]=!0:(p[e]=!0,!1))}(n)&&(null===t?e.removeAttribute(n):e.setAttribute(n,""+t)):a.mustUseProperty?e[a.propertyName]=null===t?3!==a.type&&"":t:(n=a.attributeName,r=a.attributeNamespace,null===t?e.removeAttribute(n):(t=3===(a=a.type)||4===a&&!0===t?"":""+t,r?e.setAttributeNS(r,n,t):e.setAttribute(n,t))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var n=e.replace(y,v);g[n]=new h(n,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var n=e.replace(y,v);g[n]=new h(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var n=e.replace(y,v);g[n]=new h(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)}));var S=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),O=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var R,D=Object.assign;function j(e){if(void 0===R)try{throw Error()}catch(t){var n=t.stack.trim().match(/\n( *(at )?)/);R=n&&n[1]||""}return"\n"+R+e}var B=!1;function z(e,n){if(!e||B)return"";B=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(u){var r=u}Reflect.construct(e,[],n)}else{try{n.call()}catch(u){r=u}e.call(n.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var a=u.stack.split("\n"),o=r.stack.split("\n"),i=a.length-1,s=o.length-1;1<=i&&0<=s&&a[i]!==o[s];)s--;for(;1<=i&&0<=s;i--,s--)if(a[i]!==o[s]){if(1!==i||1!==s)do{if(i--,0>--s||a[i]!==o[s]){var c="\n"+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=i&&0<=s);break}}}finally{B=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?j(e):""}function U(e){switch(e.tag){case 5:return j(e.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case I:return"Profiler";case x:return"StrictMode";case C:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case O:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case T:var n=e.render;return(e=e.displayName)||(e=""!==(e=n.displayName||n.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case F:return null!==(n=e.displayName||null)?n:V(e.type)||"Memo";case P:n=e._payload,e=e._init;try{return V(e(n))}catch(t){}}return null}function W(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=n.render).displayName||e.name||"",n.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(n);case 8:return n===x?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof n)return n.displayName||n.name||null;if("string"===typeof n)return n}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function $(e){var n=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===n||"radio"===n)}function K(e){e._valueTracker||(e._valueTracker=function(e){var n=$(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),r=""+e[n];if(!e.hasOwnProperty(n)&&"undefined"!==typeof t&&"function"===typeof t.get&&"function"===typeof t.set){var a=t.get,o=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}(e))}function q(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==t&&(n.setValue(e),!0)}function H(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(n){return e.body}}function X(e,n){var t=n.checked;return D({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=t?t:e._wrapperState.initialChecked})}function Y(e,n){var t=null==n.defaultValue?"":n.defaultValue,r=null!=n.checked?n.checked:n.defaultChecked;t=G(null!=n.value?n.value:t),e._wrapperState={initialChecked:r,initialValue:t,controlled:"checkbox"===n.type||"radio"===n.type?null!=n.checked:null!=n.value}}function J(e,n){null!=(n=n.checked)&&b(e,"checked",n,!1)}function Q(e,n){J(e,n);var t=G(n.value),r=n.type;if(null!=t)"number"===r?(0===t&&""===e.value||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");n.hasOwnProperty("value")?ee(e,n.type,t):n.hasOwnProperty("defaultValue")&&ee(e,n.type,G(n.defaultValue)),null==n.checked&&null!=n.defaultChecked&&(e.defaultChecked=!!n.defaultChecked)}function Z(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var r=n.type;if(!("submit"!==r&&"reset"!==r||void 0!==n.value&&null!==n.value))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==t&&(e.name=t)}function ee(e,n,t){"number"===n&&H(e.ownerDocument)===e||(null==t?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var ne=Array.isArray;function te(e,n,t,r){if(e=e.options,n){n={};for(var a=0;a<t.length;a++)n["$"+t[a]]=!0;for(t=0;t<e.length;t++)a=n.hasOwnProperty("$"+e[t].value),e[t].selected!==a&&(e[t].selected=a),a&&r&&(e[t].defaultSelected=!0)}else{for(t=""+G(t),n=null,a=0;a<e.length;a++){if(e[a].value===t)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==n||e[a].disabled||(n=e[a])}null!==n&&(n.selected=!0)}}function re(e,n){if(null!=n.dangerouslySetInnerHTML)throw Error(o(91));return D({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,n){var t=n.value;if(null==t){if(t=n.children,n=n.defaultValue,null!=t){if(null!=n)throw Error(o(92));if(ne(t)){if(1<t.length)throw Error(o(93));t=t[0]}n=t}null==n&&(n=""),t=n}e._wrapperState={initialValue:G(t)}}function oe(e,n){var t=G(n.value),r=G(n.defaultValue);null!=t&&((t=""+t)!==e.value&&(e.value=t),null==n.defaultValue&&e.defaultValue!==t&&(e.defaultValue=t)),null!=r&&(e.defaultValue=""+r)}function ie(e){var n=e.textContent;n===e._wrapperState.initialValue&&""!==n&&null!==n&&(e.value=n)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,n){return null==e||"http://www.w3.org/1999/xhtml"===e?se(n):"http://www.w3.org/2000/svg"===e&&"foreignObject"===n?"http://www.w3.org/1999/xhtml":e}var ue,le,fe=(le=function(e,n){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=n;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,t,r){MSApp.execUnsafeLocalFunction((function(){return le(e,n)}))}:le);function de(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&3===t.nodeType)return void(t.nodeValue=n)}e.textContent=n}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function he(e,n,t){return null==n||"boolean"===typeof n||""===n?"":t||"number"!==typeof n||0===n||pe.hasOwnProperty(e)&&pe[e]?(""+n).trim():n+"px"}function ge(e,n){for(var t in e=e.style,n)if(n.hasOwnProperty(t)){var r=0===t.indexOf("--"),a=he(t,n[t],r);"float"===t&&(t="cssFloat"),r?e.setProperty(t,a):e[t]=a}}Object.keys(pe).forEach((function(e){me.forEach((function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),pe[n]=pe[e]}))}));var ye=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,n){if(n){if(ye[e]&&(null!=n.children||null!=n.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=n.dangerouslySetInnerHTML){if(null!=n.children)throw Error(o(60));if("object"!==typeof n.dangerouslySetInnerHTML||!("__html"in n.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=n.style&&"object"!==typeof n.style)throw Error(o(62))}}function be(e,n){if(-1===e.indexOf("-"))return"string"===typeof n.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Se=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,ke=null,xe=null;function Ie(e){if(e=ba(e)){if("function"!==typeof _e)throw Error(o(280));var n=e.stateNode;n&&(n=wa(n),_e(e.stateNode,e.type,n))}}function Ee(e){ke?xe?xe.push(e):xe=[e]:ke=e}function Oe(){if(ke){var e=ke,n=xe;if(xe=ke=null,Ie(e),n)for(e=0;e<n.length;e++)Ie(n[e])}}function Te(e,n){return e(n)}function Ce(){}var Ae=!1;function Fe(e,n,t){if(Ae)return e(n,t);Ae=!0;try{return Te(e,n,t)}finally{Ae=!1,(null!==ke||null!==xe)&&(Ce(),Oe())}}function Pe(e,n){var t=e.stateNode;if(null===t)return null;var r=wa(t);if(null===r)return null;t=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(t&&"function"!==typeof t)throw Error(o(231,n,typeof t));return t}var Me=!1;if(l)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(le){Me=!1}function Le(e,n,t,r,a,o,i,s,c){var u=Array.prototype.slice.call(arguments,3);try{n.apply(t,u)}catch(l){this.onError(l)}}var Re=!1,De=null,je=!1,Be=null,ze={onError:function(e){Re=!0,De=e}};function Ue(e,n,t,r,a,o,i,s,c){Re=!1,De=null,Le.apply(ze,arguments)}function Ve(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do{0!==(4098&(n=e).flags)&&(t=n.return),e=n.return}while(e)}return 3===n.tag?t:null}function We(e){if(13===e.tag){var n=e.memoizedState;if(null===n&&(null!==(e=e.alternate)&&(n=e.memoizedState)),null!==n)return n.dehydrated}return null}function Ge(e){if(Ve(e)!==e)throw Error(o(188))}function $e(e){return null!==(e=function(e){var n=e.alternate;if(!n){if(null===(n=Ve(e)))throw Error(o(188));return n!==e?null:e}for(var t=e,r=n;;){var a=t.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){t=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===t)return Ge(a),e;if(i===r)return Ge(a),n;i=i.sibling}throw Error(o(188))}if(t.return!==r.return)t=a,r=i;else{for(var s=!1,c=a.child;c;){if(c===t){s=!0,t=a,r=i;break}if(c===r){s=!0,r=a,t=i;break}c=c.sibling}if(!s){for(c=i.child;c;){if(c===t){s=!0,t=i,r=a;break}if(c===r){s=!0,r=i,t=a;break}c=c.sibling}if(!s)throw Error(o(189))}}if(t.alternate!==r)throw Error(o(190))}if(3!==t.tag)throw Error(o(188));return t.stateNode.current===t?e:n}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var n=Ke(e);if(null!==n)return n;e=e.sibling}return null}var qe=a.unstable_scheduleCallback,He=a.unstable_cancelCallback,Xe=a.unstable_shouldYield,Ye=a.unstable_requestPaint,Je=a.unstable_now,Qe=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,en=a.unstable_UserBlockingPriority,nn=a.unstable_NormalPriority,tn=a.unstable_LowPriority,rn=a.unstable_IdlePriority,an=null,on=null;var sn=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(cn(e)/un|0)|0},cn=Math.log,un=Math.LN2;var ln=64,fn=4194304;function dn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function pn(e,n){var t=e.pendingLanes;if(0===t)return 0;var r=0,a=e.suspendedLanes,o=e.pingedLanes,i=268435455&t;if(0!==i){var s=i&~a;0!==s?r=dn(s):0!==(o&=i)&&(r=dn(o))}else 0!==(i=t&~a)?r=dn(i):0!==o&&(r=dn(o));if(0===r)return 0;if(0!==n&&n!==r&&0===(n&a)&&((a=r&-r)>=(o=n&-n)||16===a&&0!==(4194240&o)))return n;if(0!==(4&r)&&(r|=16&t),0!==(n=e.entangledLanes))for(e=e.entanglements,n&=r;0<n;)a=1<<(t=31-sn(n)),r|=e[t],n&=~a;return r}function mn(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;default:return-1}}function hn(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gn(){var e=ln;return 0===(4194240&(ln<<=1))&&(ln=64),e}function yn(e){for(var n=[],t=0;31>t;t++)n.push(e);return n}function vn(e,n,t){e.pendingLanes|=n,536870912!==n&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[n=31-sn(n)]=t}function bn(e,n){var t=e.entangledLanes|=n;for(e=e.entanglements;t;){var r=31-sn(t),a=1<<r;a&n|e[r]&n&&(e[r]|=n),t&=~a}}var Sn=0;function wn(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _n,kn,xn,In,En,On=!1,Tn=[],Cn=null,An=null,Fn=null,Pn=new Map,Mn=new Map,Nn=[],Ln="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rn(e,n){switch(e){case"focusin":case"focusout":Cn=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":Pn.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mn.delete(n.pointerId)}}function Dn(e,n,t,r,a,o){return null===e||e.nativeEvent!==o?(e={blockedOn:n,domEventName:t,eventSystemFlags:r,nativeEvent:o,targetContainers:[a]},null!==n&&(null!==(n=ba(n))&&kn(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,null!==a&&-1===n.indexOf(a)&&n.push(a),e)}function jn(e){var n=va(e.target);if(null!==n){var t=Ve(n);if(null!==t)if(13===(n=t.tag)){if(null!==(n=We(t)))return e.blockedOn=n,void En(e.priority,(function(){xn(t)}))}else if(3===n&&t.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===t.tag?t.stateNode.containerInfo:null)}e.blockedOn=null}function Bn(e){if(null!==e.blockedOn)return!1;for(var n=e.targetContainers;0<n.length;){var t=Yn(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(null!==t)return null!==(n=ba(t))&&kn(n),e.blockedOn=t,!1;var r=new(t=e.nativeEvent).constructor(t.type,t);Se=r,t.target.dispatchEvent(r),Se=null,n.shift()}return!0}function zn(e,n,t){Bn(e)&&t.delete(n)}function Un(){On=!1,null!==Cn&&Bn(Cn)&&(Cn=null),null!==An&&Bn(An)&&(An=null),null!==Fn&&Bn(Fn)&&(Fn=null),Pn.forEach(zn),Mn.forEach(zn)}function Vn(e,n){e.blockedOn===n&&(e.blockedOn=null,On||(On=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,Un)))}function Wn(e){function n(n){return Vn(n,e)}if(0<Tn.length){Vn(Tn[0],e);for(var t=1;t<Tn.length;t++){var r=Tn[t];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Cn&&Vn(Cn,e),null!==An&&Vn(An,e),null!==Fn&&Vn(Fn,e),Pn.forEach(n),Mn.forEach(n),t=0;t<Nn.length;t++)(r=Nn[t]).blockedOn===e&&(r.blockedOn=null);for(;0<Nn.length&&null===(t=Nn[0]).blockedOn;)jn(t),null===t.blockedOn&&Nn.shift()}var Gn=S.ReactCurrentBatchConfig,$n=!0;function Kn(e,n,t,r){var a=Sn,o=Gn.transition;Gn.transition=null;try{Sn=1,Hn(e,n,t,r)}finally{Sn=a,Gn.transition=o}}function qn(e,n,t,r){var a=Sn,o=Gn.transition;Gn.transition=null;try{Sn=4,Hn(e,n,t,r)}finally{Sn=a,Gn.transition=o}}function Hn(e,n,t,r){if($n){var a=Yn(e,n,t,r);if(null===a)Gr(e,n,r,Xn,t),Rn(e,r);else if(function(e,n,t,r,a){switch(n){case"focusin":return Cn=Dn(Cn,e,n,t,r,a),!0;case"dragenter":return An=Dn(An,e,n,t,r,a),!0;case"mouseover":return Fn=Dn(Fn,e,n,t,r,a),!0;case"pointerover":var o=a.pointerId;return Pn.set(o,Dn(Pn.get(o)||null,e,n,t,r,a)),!0;case"gotpointercapture":return o=a.pointerId,Mn.set(o,Dn(Mn.get(o)||null,e,n,t,r,a)),!0}return!1}(a,e,n,t,r))r.stopPropagation();else if(Rn(e,r),4&n&&-1<Ln.indexOf(e)){for(;null!==a;){var o=ba(a);if(null!==o&&_n(o),null===(o=Yn(e,n,t,r))&&Gr(e,n,r,Xn,t),o===a)break;a=o}null!==a&&r.stopPropagation()}else Gr(e,n,r,null,t)}}var Xn=null;function Yn(e,n,t,r){if(Xn=null,null!==(e=va(e=we(r))))if(null===(n=Ve(e)))e=null;else if(13===(t=n.tag)){if(null!==(e=We(n)))return e;e=null}else if(3===t){if(n.stateNode.current.memoizedState.isDehydrated)return 3===n.tag?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return Xn=e,null}function Jn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ze:return 1;case en:return 4;case nn:case tn:return 16;case rn:return 536870912;default:return 16}default:return 16}}var Qn=null,Zn=null,et=null;function nt(){if(et)return et;var e,n,t=Zn,r=t.length,a="value"in Qn?Qn.value:Qn.textContent,o=a.length;for(e=0;e<r&&t[e]===a[e];e++);var i=r-e;for(n=1;n<=i&&t[r-n]===a[o-n];n++);return et=a.slice(e,1<n?1-n:void 0)}function tt(e){var n=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===n&&(e=13):e=n,10===e&&(e=13),32<=e||13===e?e:0}function rt(){return!0}function at(){return!1}function ot(e){function n(n,t,r,a,o){for(var i in this._reactName=n,this._targetInst=r,this.type=t,this.nativeEvent=a,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?rt:at,this.isPropagationStopped=at,this}return D(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rt)},persist:function(){},isPersistent:rt}),n}var it,st,ct,ut={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lt=ot(ut),ft=D({},ut,{view:0,detail:0}),dt=ot(ft),pt=D({},ft,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:It,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ct&&(ct&&"mousemove"===e.type?(it=e.screenX-ct.screenX,st=e.screenY-ct.screenY):st=it=0,ct=e),it)},movementY:function(e){return"movementY"in e?e.movementY:st}}),mt=ot(pt),ht=ot(D({},pt,{dataTransfer:0})),gt=ot(D({},ft,{relatedTarget:0})),yt=ot(D({},ut,{animationName:0,elapsedTime:0,pseudoElement:0})),vt=D({},ut,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bt=ot(vt),St=ot(D({},ut,{data:0})),wt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_t={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xt(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):!!(e=kt[e])&&!!n[e]}function It(){return xt}var Et=D({},ft,{key:function(e){if(e.key){var n=wt[e.key]||e.key;if("Unidentified"!==n)return n}return"keypress"===e.type?13===(e=tt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_t[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:It,charCode:function(e){return"keypress"===e.type?tt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ot=ot(Et),Tt=ot(D({},pt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ct=ot(D({},ft,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:It})),At=ot(D({},ut,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ft=D({},pt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pt=ot(Ft),Mt=[9,13,27,32],Nt=l&&"CompositionEvent"in window,Lt=null;l&&"documentMode"in document&&(Lt=document.documentMode);var Rt=l&&"TextEvent"in window&&!Lt,Dt=l&&(!Nt||Lt&&8<Lt&&11>=Lt),jt=String.fromCharCode(32),Bt=!1;function zt(e,n){switch(e){case"keyup":return-1!==Mt.indexOf(n.keyCode);case"keydown":return 229!==n.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ut(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vt=!1;var Wt={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gt(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===n?!!Wt[e.type]:"textarea"===n}function $t(e,n,t,r){Ee(r),0<(n=Kr(n,"onChange")).length&&(t=new lt("onChange","change",null,t,r),e.push({event:t,listeners:n}))}var Kt=null,qt=null;function Ht(e){jr(e,0)}function Xt(e){if(q(Sa(e)))return e}function Yt(e,n){if("change"===e)return n}var Jt=!1;if(l){var Qt;if(l){var Zt="oninput"in document;if(!Zt){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zt="function"===typeof er.oninput}Qt=Zt}else Qt=!1;Jt=Qt&&(!document.documentMode||9<document.documentMode)}function nr(){Kt&&(Kt.detachEvent("onpropertychange",tr),qt=Kt=null)}function tr(e){if("value"===e.propertyName&&Xt(qt)){var n=[];$t(n,qt,e,we(e)),Fe(Ht,n)}}function rr(e,n,t){"focusin"===e?(nr(),qt=t,(Kt=n).attachEvent("onpropertychange",tr)):"focusout"===e&&nr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xt(qt)}function or(e,n){if("click"===e)return Xt(n)}function ir(e,n){if("input"===e||"change"===e)return Xt(n)}var sr="function"===typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e===1/n)||e!==e&&n!==n};function cr(e,n){if(sr(e,n))return!0;if("object"!==typeof e||null===e||"object"!==typeof n||null===n)return!1;var t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var a=t[r];if(!f.call(n,a)||!sr(e[a],n[a]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,n){var t,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(t=e+r.textContent.length,e<=n&&t>=n)return{node:r,offset:n-e};e=t}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function fr(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?fr(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}function dr(){for(var e=window,n=H();n instanceof e.HTMLIFrameElement;){try{var t="string"===typeof n.contentWindow.location.href}catch(r){t=!1}if(!t)break;n=H((e=n.contentWindow).document)}return n}function pr(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&("input"===n&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===n||"true"===e.contentEditable)}function mr(e){var n=dr(),t=e.focusedElem,r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&fr(t.ownerDocument.documentElement,t)){if(null!==r&&pr(t))if(n=r.start,void 0===(e=r.end)&&(e=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(e,t.value.length);else if((e=(n=t.ownerDocument||document)&&n.defaultView||window).getSelection){e=e.getSelection();var a=t.textContent.length,o=Math.min(r.start,a);r=void 0===r.end?o:Math.min(r.end,a),!e.extend&&o>r&&(a=r,r=o,o=a),a=lr(t,o);var i=lr(t,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((n=n.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),o>r?(e.addRange(n),e.extend(i.node,i.offset)):(n.setEnd(i.node,i.offset),e.addRange(n)))}for(n=[],e=t;e=e.parentNode;)1===e.nodeType&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<n.length;t++)(e=n[t]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hr=l&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function Sr(e,n,t){var r=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;br||null==gr||gr!==H(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&cr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(n=new lt("onSelect","select",null,n,t),e.push({event:n,listeners:r}),n.target=gr)))}function wr(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},kr={},xr={};function Ir(e){if(kr[e])return kr[e];if(!_r[e])return e;var n,t=_r[e];for(n in t)if(t.hasOwnProperty(n)&&n in xr)return kr[e]=t[n];return e}l&&(xr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Er=Ir("animationend"),Or=Ir("animationiteration"),Tr=Ir("animationstart"),Cr=Ir("transitionend"),Ar=new Map,Fr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,n){Ar.set(e,n),c(n,[e])}for(var Mr=0;Mr<Fr.length;Mr++){var Nr=Fr[Mr];Pr(Nr.toLowerCase(),"on"+(Nr[0].toUpperCase()+Nr.slice(1)))}Pr(Er,"onAnimationEnd"),Pr(Or,"onAnimationIteration"),Pr(Tr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Cr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Dr(e,n,t){var r=e.type||"unknown-event";e.currentTarget=t,function(e,n,t,r,a,i,s,c,u){if(Ue.apply(this,arguments),Re){if(!Re)throw Error(o(198));var l=De;Re=!1,De=null,je||(je=!0,Be=l)}}(r,n,void 0,e),e.currentTarget=null}function jr(e,n){n=0!==(4&n);for(var t=0;t<e.length;t++){var r=e[t],a=r.event;r=r.listeners;e:{var o=void 0;if(n)for(var i=r.length-1;0<=i;i--){var s=r[i],c=s.instance,u=s.currentTarget;if(s=s.listener,c!==o&&a.isPropagationStopped())break e;Dr(a,s,u),o=c}else for(i=0;i<r.length;i++){if(c=(s=r[i]).instance,u=s.currentTarget,s=s.listener,c!==o&&a.isPropagationStopped())break e;Dr(a,s,u),o=c}}}if(je)throw e=Be,je=!1,Be=null,e}function Br(e,n){var t=n[ha];void 0===t&&(t=n[ha]=new Set);var r=e+"__bubble";t.has(r)||(Wr(n,e,2,!1),t.add(r))}function zr(e,n,t){var r=0;n&&(r|=4),Wr(t,e,r,n)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[Ur]){e[Ur]=!0,i.forEach((function(n){"selectionchange"!==n&&(Rr.has(n)||zr(n,!1,e),zr(n,!0,e))}));var n=9===e.nodeType?e:e.ownerDocument;null===n||n[Ur]||(n[Ur]=!0,zr("selectionchange",!1,n))}}function Wr(e,n,t,r){switch(Jn(n)){case 1:var a=Kn;break;case 4:a=qn;break;default:a=Hn}t=a.bind(null,n,t,e),a=void 0,!Me||"touchstart"!==n&&"touchmove"!==n&&"wheel"!==n||(a=!0),r?void 0!==a?e.addEventListener(n,t,{capture:!0,passive:a}):e.addEventListener(n,t,!0):void 0!==a?e.addEventListener(n,t,{passive:a}):e.addEventListener(n,t,!1)}function Gr(e,n,t,r,a){var o=r;if(0===(1&n)&&0===(2&n)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var s=r.stateNode.containerInfo;if(s===a||8===s.nodeType&&s.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var c=i.tag;if((3===c||4===c)&&((c=i.stateNode.containerInfo)===a||8===c.nodeType&&c.parentNode===a))return;i=i.return}for(;null!==s;){if(null===(i=va(s)))return;if(5===(c=i.tag)||6===c){r=o=i;continue e}s=s.parentNode}}r=r.return}Fe((function(){var r=o,a=we(t),i=[];e:{var s=Ar.get(e);if(void 0!==s){var c=lt,u=e;switch(e){case"keypress":if(0===tt(t))break e;case"keydown":case"keyup":c=Ot;break;case"focusin":u="focus",c=gt;break;case"focusout":u="blur",c=gt;break;case"beforeblur":case"afterblur":c=gt;break;case"click":if(2===t.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=mt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ht;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Ct;break;case Er:case Or:case Tr:c=yt;break;case Cr:c=At;break;case"scroll":c=dt;break;case"wheel":c=Pt;break;case"copy":case"cut":case"paste":c=bt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Tt}var l=0!==(4&n),f=!l&&"scroll"===e,d=l?null!==s?s+"Capture":null:s;l=[];for(var p,m=r;null!==m;){var h=(p=m).stateNode;if(5===p.tag&&null!==h&&(p=h,null!==d&&(null!=(h=Pe(m,d))&&l.push($r(m,h,p)))),f)break;m=m.return}0<l.length&&(s=new c(s,u,null,t,a),i.push({event:s,listeners:l}))}}if(0===(7&n)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||t===Se||!(u=t.relatedTarget||t.fromElement)||!va(u)&&!u[ma])&&(c||s)&&(s=a.window===a?a:(s=a.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(u=(u=t.relatedTarget||t.toElement)?va(u):null)&&(u!==(f=Ve(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=r),c!==u)){if(l=mt,h="onMouseLeave",d="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(l=Tt,h="onPointerLeave",d="onPointerEnter",m="pointer"),f=null==c?s:Sa(c),p=null==u?s:Sa(u),(s=new l(h,m+"leave",c,t,a)).target=f,s.relatedTarget=p,h=null,va(a)===r&&((l=new l(d,m+"enter",u,t,a)).target=p,l.relatedTarget=f,h=l),f=h,c&&u)e:{for(d=u,m=0,p=l=c;p;p=qr(p))m++;for(p=0,h=d;h;h=qr(h))p++;for(;0<m-p;)l=qr(l),m--;for(;0<p-m;)d=qr(d),p--;for(;m--;){if(l===d||null!==d&&l===d.alternate)break e;l=qr(l),d=qr(d)}l=null}else l=null;null!==c&&Hr(i,s,c,l,!1),null!==u&&null!==f&&Hr(i,f,u,l,!0)}if("select"===(c=(s=r?Sa(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var g=Yt;else if(Gt(s))if(Jt)g=ir;else{g=ar;var y=rr}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?$t(i,g,t,a):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?Sa(r):window,e){case"focusin":(Gt(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,Sr(i,t,a);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":Sr(i,t,a)}var v;if(Nt)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vt?zt(e,t)&&(b="onCompositionEnd"):"keydown"===e&&229===t.keyCode&&(b="onCompositionStart");b&&(Dt&&"ko"!==t.locale&&(Vt||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vt&&(v=nt()):(Zn="value"in(Qn=a)?Qn.value:Qn.textContent,Vt=!0)),0<(y=Kr(r,b)).length&&(b=new St(b,e,null,t,a),i.push({event:b,listeners:y}),v?b.data=v:null!==(v=Ut(t))&&(b.data=v))),(v=Rt?function(e,n){switch(e){case"compositionend":return Ut(n);case"keypress":return 32!==n.which?null:(Bt=!0,jt);case"textInput":return(e=n.data)===jt&&Bt?null:e;default:return null}}(e,t):function(e,n){if(Vt)return"compositionend"===e||!Nt&&zt(e,n)?(e=nt(),et=Zn=Qn=null,Vt=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Dt&&"ko"!==n.locale?null:n.data}}(e,t))&&(0<(r=Kr(r,"onBeforeInput")).length&&(a=new St("onBeforeInput","beforeinput",null,t,a),i.push({event:a,listeners:r}),a.data=v))}jr(i,n)}))}function $r(e,n,t){return{instance:e,listener:n,currentTarget:t}}function Kr(e,n){for(var t=n+"Capture",r=[];null!==e;){var a=e,o=a.stateNode;5===a.tag&&null!==o&&(a=o,null!=(o=Pe(e,t))&&r.unshift($r(e,o,a)),null!=(o=Pe(e,n))&&r.push($r(e,o,a))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hr(e,n,t,r,a){for(var o=n._reactName,i=[];null!==t&&t!==r;){var s=t,c=s.alternate,u=s.stateNode;if(null!==c&&c===r)break;5===s.tag&&null!==u&&(s=u,a?null!=(c=Pe(t,o))&&i.unshift($r(t,c,s)):a||null!=(c=Pe(t,o))&&i.push($r(t,c,s))),t=t.return}0!==i.length&&e.push({event:n,listeners:i})}var Xr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Yr,"")}function Qr(e,n,t){if(n=Jr(n),Jr(e)!==n&&t)throw Error(o(425))}function Zr(){}var ea=null,na=null;function ta(e,n){return"textarea"===e||"noscript"===e||"string"===typeof n.children||"number"===typeof n.children||"object"===typeof n.dangerouslySetInnerHTML&&null!==n.dangerouslySetInnerHTML&&null!=n.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,oa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oa?function(e){return oa.resolve(null).then(e).catch(sa)}:ra;function sa(e){setTimeout((function(){throw e}))}function ca(e,n){var t=n,r=0;do{var a=t.nextSibling;if(e.removeChild(t),a&&8===a.nodeType)if("/$"===(t=a.data)){if(0===r)return e.removeChild(a),void Wn(n);r--}else"$"!==t&&"$?"!==t&&"$!"!==t||r++;t=a}while(t);Wn(n)}function ua(e){for(;null!=e;e=e.nextSibling){var n=e.nodeType;if(1===n||3===n)break;if(8===n){if("$"===(n=e.data)||"$!"===n||"$?"===n)break;if("/$"===n)return null}}return e}function la(e){e=e.previousSibling;for(var n=0;e;){if(8===e.nodeType){var t=e.data;if("$"===t||"$!"===t||"$?"===t){if(0===n)return e;n--}else"/$"===t&&n++}e=e.previousSibling}return null}var fa=Math.random().toString(36).slice(2),da="__reactFiber$"+fa,pa="__reactProps$"+fa,ma="__reactContainer$"+fa,ha="__reactEvents$"+fa,ga="__reactListeners$"+fa,ya="__reactHandles$"+fa;function va(e){var n=e[da];if(n)return n;for(var t=e.parentNode;t;){if(n=t[ma]||t[da]){if(t=n.alternate,null!==n.child||null!==t&&null!==t.child)for(e=la(e);null!==e;){if(t=e[da])return t;e=la(e)}return n}t=(e=t).parentNode}return null}function ba(e){return!(e=e[da]||e[ma])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Sa(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function wa(e){return e[pa]||null}var _a=[],ka=-1;function xa(e){return{current:e}}function Ia(e){0>ka||(e.current=_a[ka],_a[ka]=null,ka--)}function Ea(e,n){ka++,_a[ka]=e.current,e.current=n}var Oa={},Ta=xa(Oa),Ca=xa(!1),Aa=Oa;function Fa(e,n){var t=e.type.contextTypes;if(!t)return Oa;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in t)o[a]=n[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=o),o}function Pa(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ma(){Ia(Ca),Ia(Ta)}function Na(e,n,t){if(Ta.current!==Oa)throw Error(o(168));Ea(Ta,n),Ea(Ca,t)}function La(e,n,t){var r=e.stateNode;if(n=n.childContextTypes,"function"!==typeof r.getChildContext)return t;for(var a in r=r.getChildContext())if(!(a in n))throw Error(o(108,W(e)||"Unknown",a));return D({},t,r)}function Ra(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Oa,Aa=Ta.current,Ea(Ta,e),Ea(Ca,Ca.current),!0}function Da(e,n,t){var r=e.stateNode;if(!r)throw Error(o(169));t?(e=La(e,n,Aa),r.__reactInternalMemoizedMergedChildContext=e,Ia(Ca),Ia(Ta),Ea(Ta,e)):Ia(Ca),Ea(Ca,t)}var ja=null,Ba=!1,za=!1;function Ua(e){null===ja?ja=[e]:ja.push(e)}function Va(){if(!za&&null!==ja){za=!0;var e=0,n=Sn;try{var t=ja;for(Sn=1;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}ja=null,Ba=!1}catch(a){throw null!==ja&&(ja=ja.slice(e+1)),qe(Ze,Va),a}finally{Sn=n,za=!1}}return null}var Wa=[],Ga=0,$a=null,Ka=0,qa=[],Ha=0,Xa=null,Ya=1,Ja="";function Qa(e,n){Wa[Ga++]=Ka,Wa[Ga++]=$a,$a=e,Ka=n}function Za(e,n,t){qa[Ha++]=Ya,qa[Ha++]=Ja,qa[Ha++]=Xa,Xa=e;var r=Ya;e=Ja;var a=32-sn(r)-1;r&=~(1<<a),t+=1;var o=32-sn(n)+a;if(30<o){var i=a-a%5;o=(r&(1<<i)-1).toString(32),r>>=i,a-=i,Ya=1<<32-sn(n)+a|t<<a|r,Ja=o+e}else Ya=1<<o|t<<a|r,Ja=e}function eo(e){null!==e.return&&(Qa(e,1),Za(e,1,0))}function no(e){for(;e===$a;)$a=Wa[--Ga],Wa[Ga]=null,Ka=Wa[--Ga],Wa[Ga]=null;for(;e===Xa;)Xa=qa[--Ha],qa[Ha]=null,Ja=qa[--Ha],qa[Ha]=null,Ya=qa[--Ha],qa[Ha]=null}var to=null,ro=null,ao=!1,oo=null;function io(e,n){var t=Pu(5,null,null,0);t.elementType="DELETED",t.stateNode=n,t.return=e,null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)}function so(e,n){switch(e.tag){case 5:var t=e.type;return null!==(n=1!==n.nodeType||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n)&&(e.stateNode=n,to=e,ro=ua(n.firstChild),!0);case 6:return null!==(n=""===e.pendingProps||3!==n.nodeType?null:n)&&(e.stateNode=n,to=e,ro=null,!0);case 13:return null!==(n=8!==n.nodeType?null:n)&&(t=null!==Xa?{id:Ya,overflow:Ja}:null,e.memoizedState={dehydrated:n,treeContext:t,retryLane:1073741824},(t=Pu(18,null,null,0)).stateNode=n,t.return=e,e.child=t,to=e,ro=null,!0);default:return!1}}function co(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function uo(e){if(ao){var n=ro;if(n){var t=n;if(!so(e,n)){if(co(e))throw Error(o(418));n=ua(t.nextSibling);var r=to;n&&so(e,n)?io(r,t):(e.flags=-4097&e.flags|2,ao=!1,to=e)}}else{if(co(e))throw Error(o(418));e.flags=-4097&e.flags|2,ao=!1,to=e}}}function lo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;to=e}function fo(e){if(e!==to)return!1;if(!ao)return lo(e),ao=!0,!1;var n;if((n=3!==e.tag)&&!(n=5!==e.tag)&&(n="head"!==(n=e.type)&&"body"!==n&&!ta(e.type,e.memoizedProps)),n&&(n=ro)){if(co(e))throw po(),Error(o(418));for(;n;)io(e,n),n=ua(n.nextSibling)}if(lo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType){var t=e.data;if("/$"===t){if(0===n){ro=ua(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++}e=e.nextSibling}ro=null}}else ro=to?ua(e.stateNode.nextSibling):null;return!0}function po(){for(var e=ro;e;)e=ua(e.nextSibling)}function mo(){ro=to=null,ao=!1}function ho(e){null===oo?oo=[e]:oo.push(e)}var go=S.ReactCurrentBatchConfig;function yo(e,n){if(e&&e.defaultProps){for(var t in n=D({},n),e=e.defaultProps)void 0===n[t]&&(n[t]=e[t]);return n}return n}var vo=xa(null),bo=null,So=null,wo=null;function _o(){wo=So=bo=null}function ko(e){var n=vo.current;Ia(vo),e._currentValue=n}function xo(e,n,t){for(;null!==e;){var r=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,null!==r&&(r.childLanes|=n)):null!==r&&(r.childLanes&n)!==n&&(r.childLanes|=n),e===t)break;e=e.return}}function Io(e,n){bo=e,wo=So=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&n)&&(Ss=!0),e.firstContext=null)}function Eo(e){var n=e._currentValue;if(wo!==e)if(e={context:e,memoizedValue:n,next:null},null===So){if(null===bo)throw Error(o(308));So=e,bo.dependencies={lanes:0,firstContext:e}}else So=So.next=e;return n}var Oo=null;function To(e){null===Oo?Oo=[e]:Oo.push(e)}function Co(e,n,t,r){var a=n.interleaved;return null===a?(t.next=t,To(n)):(t.next=a.next,a.next=t),n.interleaved=t,Ao(e,r)}function Ao(e,n){e.lanes|=n;var t=e.alternate;for(null!==t&&(t.lanes|=n),t=e,e=e.return;null!==e;)e.childLanes|=n,null!==(t=e.alternate)&&(t.childLanes|=n),t=e,e=e.return;return 3===t.tag?t.stateNode:null}var Fo=!1;function Po(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mo(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function No(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function Lo(e,n,t){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cc)){var a=r.pending;return null===a?n.next=n:(n.next=a.next,a.next=n),r.pending=n,Ao(e,t)}return null===(a=r.interleaved)?(n.next=n,To(r)):(n.next=a.next,a.next=n),r.interleaved=n,Ao(e,t)}function Ro(e,n,t){if(null!==(n=n.updateQueue)&&(n=n.shared,0!==(4194240&t))){var r=n.lanes;t|=r&=e.pendingLanes,n.lanes=t,bn(e,t)}}function Do(e,n){var t=e.updateQueue,r=e.alternate;if(null!==r&&t===(r=r.updateQueue)){var a=null,o=null;if(null!==(t=t.firstBaseUpdate)){do{var i={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};null===o?a=o=i:o=o.next=i,t=t.next}while(null!==t);null===o?a=o=n:o=o.next=n}else a=o=n;return t={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=t)}null===(e=t.lastBaseUpdate)?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function jo(e,n,t,r){var a=e.updateQueue;Fo=!1;var o=a.firstBaseUpdate,i=a.lastBaseUpdate,s=a.shared.pending;if(null!==s){a.shared.pending=null;var c=s,u=c.next;c.next=null,null===i?o=u:i.next=u,i=c;var l=e.alternate;null!==l&&((s=(l=l.updateQueue).lastBaseUpdate)!==i&&(null===s?l.firstBaseUpdate=u:s.next=u,l.lastBaseUpdate=c))}if(null!==o){var f=a.baseState;for(i=0,l=u=c=null,s=o;;){var d=s.lane,p=s.eventTime;if((r&d)===d){null!==l&&(l=l.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var m=e,h=s;switch(d=n,p=t,h.tag){case 1:if("function"===typeof(m=h.payload)){f=m.call(p,f,d);break e}f=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(d="function"===typeof(m=h.payload)?m.call(p,f,d):m)||void 0===d)break e;f=D({},f,d);break e;case 2:Fo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=a.effects)?a.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===l?(u=l=p,c=f):l=l.next=p,i|=d;if(null===(s=s.next)){if(null===(s=a.shared.pending))break;s=(d=s).next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}if(null===l&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=l,null!==(n=a.shared.interleaved)){a=n;do{i|=a.lane,a=a.next}while(a!==n)}else null===o&&(a.shared.lanes=0);Dc|=i,e.lanes=i,e.memoizedState=f}}function Bo(e,n,t){if(e=n.effects,n.effects=null,null!==e)for(n=0;n<e.length;n++){var r=e[n],a=r.callback;if(null!==a){if(r.callback=null,r=t,"function"!==typeof a)throw Error(o(191,a));a.call(r)}}}var zo=(new r.Component).refs;function Uo(e,n,t,r){t=null===(t=t(r,n=e.memoizedState))||void 0===t?n:D({},n,t),e.memoizedState=t,0===e.lanes&&(e.updateQueue.baseState=t)}var Vo={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,n,t){e=e._reactInternals;var r=nu(),a=tu(e),o=No(r,a);o.payload=n,void 0!==t&&null!==t&&(o.callback=t),null!==(n=Lo(e,o,a))&&(ru(n,e,a,r),Ro(n,e,a))},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var r=nu(),a=tu(e),o=No(r,a);o.tag=1,o.payload=n,void 0!==t&&null!==t&&(o.callback=t),null!==(n=Lo(e,o,a))&&(ru(n,e,a,r),Ro(n,e,a))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=nu(),r=tu(e),a=No(t,r);a.tag=2,void 0!==n&&null!==n&&(a.callback=n),null!==(n=Lo(e,a,r))&&(ru(n,e,r,t),Ro(n,e,r))}};function Wo(e,n,t,r,a,o,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,i):!n.prototype||!n.prototype.isPureReactComponent||(!cr(t,r)||!cr(a,o))}function Go(e,n,t){var r=!1,a=Oa,o=n.contextType;return"object"===typeof o&&null!==o?o=Eo(o):(a=Pa(n)?Aa:Ta.current,o=(r=null!==(r=n.contextTypes)&&void 0!==r)?Fa(e,a):Oa),n=new n(t,o),e.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,n.updater=Vo,e.stateNode=n,n._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=o),n}function $o(e,n,t,r){e=n.state,"function"===typeof n.componentWillReceiveProps&&n.componentWillReceiveProps(t,r),"function"===typeof n.UNSAFE_componentWillReceiveProps&&n.UNSAFE_componentWillReceiveProps(t,r),n.state!==e&&Vo.enqueueReplaceState(n,n.state,null)}function Ko(e,n,t,r){var a=e.stateNode;a.props=t,a.state=e.memoizedState,a.refs=zo,Po(e);var o=n.contextType;"object"===typeof o&&null!==o?a.context=Eo(o):(o=Pa(n)?Aa:Ta.current,a.context=Fa(e,o)),a.state=e.memoizedState,"function"===typeof(o=n.getDerivedStateFromProps)&&(Uo(e,n,o,t),a.state=e.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(n=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),n!==a.state&&Vo.enqueueReplaceState(a,a.state,null),jo(e,t,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}function qo(e,n,t){if(null!==(e=t.ref)&&"function"!==typeof e&&"object"!==typeof e){if(t._owner){if(t=t._owner){if(1!==t.tag)throw Error(o(309));var r=t.stateNode}if(!r)throw Error(o(147,e));var a=r,i=""+e;return null!==n&&null!==n.ref&&"function"===typeof n.ref&&n.ref._stringRef===i?n.ref:(n=function(e){var n=a.refs;n===zo&&(n=a.refs={}),null===e?delete n[i]:n[i]=e},n._stringRef=i,n)}if("string"!==typeof e)throw Error(o(284));if(!t._owner)throw Error(o(290,e))}return e}function Ho(e,n){throw e=Object.prototype.toString.call(n),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function Xo(e){return(0,e._init)(e._payload)}function Yo(e){function n(n,t){if(e){var r=n.deletions;null===r?(n.deletions=[t],n.flags|=16):r.push(t)}}function t(t,r){if(!e)return null;for(;null!==r;)n(t,r),r=r.sibling;return null}function r(e,n){for(e=new Map;null!==n;)null!==n.key?e.set(n.key,n):e.set(n.index,n),n=n.sibling;return e}function a(e,n){return(e=Nu(e,n)).index=0,e.sibling=null,e}function i(n,t,r){return n.index=r,e?null!==(r=n.alternate)?(r=r.index)<t?(n.flags|=2,t):r:(n.flags|=2,t):(n.flags|=1048576,t)}function s(n){return e&&null===n.alternate&&(n.flags|=2),n}function c(e,n,t,r){return null===n||6!==n.tag?((n=ju(t,e.mode,r)).return=e,n):((n=a(n,t)).return=e,n)}function u(e,n,t,r){var o=t.type;return o===k?f(e,n,t.props.children,r,t.key):null!==n&&(n.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===P&&Xo(o)===n.type)?((r=a(n,t.props)).ref=qo(e,n,t),r.return=e,r):((r=Lu(t.type,t.key,t.props,null,e.mode,r)).ref=qo(e,n,t),r.return=e,r)}function l(e,n,t,r){return null===n||4!==n.tag||n.stateNode.containerInfo!==t.containerInfo||n.stateNode.implementation!==t.implementation?((n=Bu(t,e.mode,r)).return=e,n):((n=a(n,t.children||[])).return=e,n)}function f(e,n,t,r,o){return null===n||7!==n.tag?((n=Ru(t,e.mode,r,o)).return=e,n):((n=a(n,t)).return=e,n)}function d(e,n,t){if("string"===typeof n&&""!==n||"number"===typeof n)return(n=ju(""+n,e.mode,t)).return=e,n;if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return(t=Lu(n.type,n.key,n.props,null,e.mode,t)).ref=qo(e,null,n),t.return=e,t;case _:return(n=Bu(n,e.mode,t)).return=e,n;case P:return d(e,(0,n._init)(n._payload),t)}if(ne(n)||L(n))return(n=Ru(n,e.mode,t,null)).return=e,n;Ho(e,n)}return null}function p(e,n,t,r){var a=null!==n?n.key:null;if("string"===typeof t&&""!==t||"number"===typeof t)return null!==a?null:c(e,n,""+t,r);if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return t.key===a?u(e,n,t,r):null;case _:return t.key===a?l(e,n,t,r):null;case P:return p(e,n,(a=t._init)(t._payload),r)}if(ne(t)||L(t))return null!==a?null:f(e,n,t,r,null);Ho(e,t)}return null}function m(e,n,t,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return c(n,e=e.get(t)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(n,e=e.get(null===r.key?t:r.key)||null,r,a);case _:return l(n,e=e.get(null===r.key?t:r.key)||null,r,a);case P:return m(e,n,t,(0,r._init)(r._payload),a)}if(ne(r)||L(r))return f(n,e=e.get(t)||null,r,a,null);Ho(n,r)}return null}function h(a,o,s,c){for(var u=null,l=null,f=o,h=o=0,g=null;null!==f&&h<s.length;h++){f.index>h?(g=f,f=null):g=f.sibling;var y=p(a,f,s[h],c);if(null===y){null===f&&(f=g);break}e&&f&&null===y.alternate&&n(a,f),o=i(y,o,h),null===l?u=y:l.sibling=y,l=y,f=g}if(h===s.length)return t(a,f),ao&&Qa(a,h),u;if(null===f){for(;h<s.length;h++)null!==(f=d(a,s[h],c))&&(o=i(f,o,h),null===l?u=f:l.sibling=f,l=f);return ao&&Qa(a,h),u}for(f=r(a,f);h<s.length;h++)null!==(g=m(f,a,h,s[h],c))&&(e&&null!==g.alternate&&f.delete(null===g.key?h:g.key),o=i(g,o,h),null===l?u=g:l.sibling=g,l=g);return e&&f.forEach((function(e){return n(a,e)})),ao&&Qa(a,h),u}function g(a,s,c,u){var l=L(c);if("function"!==typeof l)throw Error(o(150));if(null==(c=l.call(c)))throw Error(o(151));for(var f=l=null,h=s,g=s=0,y=null,v=c.next();null!==h&&!v.done;g++,v=c.next()){h.index>g?(y=h,h=null):y=h.sibling;var b=p(a,h,v.value,u);if(null===b){null===h&&(h=y);break}e&&h&&null===b.alternate&&n(a,h),s=i(b,s,g),null===f?l=b:f.sibling=b,f=b,h=y}if(v.done)return t(a,h),ao&&Qa(a,g),l;if(null===h){for(;!v.done;g++,v=c.next())null!==(v=d(a,v.value,u))&&(s=i(v,s,g),null===f?l=v:f.sibling=v,f=v);return ao&&Qa(a,g),l}for(h=r(a,h);!v.done;g++,v=c.next())null!==(v=m(h,a,g,v.value,u))&&(e&&null!==v.alternate&&h.delete(null===v.key?g:v.key),s=i(v,s,g),null===f?l=v:f.sibling=v,f=v);return e&&h.forEach((function(e){return n(a,e)})),ao&&Qa(a,g),l}return function e(r,o,i,c){if("object"===typeof i&&null!==i&&i.type===k&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var u=i.key,l=o;null!==l;){if(l.key===u){if((u=i.type)===k){if(7===l.tag){t(r,l.sibling),(o=a(l,i.props.children)).return=r,r=o;break e}}else if(l.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===P&&Xo(u)===l.type){t(r,l.sibling),(o=a(l,i.props)).ref=qo(r,l,i),o.return=r,r=o;break e}t(r,l);break}n(r,l),l=l.sibling}i.type===k?((o=Ru(i.props.children,r.mode,c,i.key)).return=r,r=o):((c=Lu(i.type,i.key,i.props,null,r.mode,c)).ref=qo(r,o,i),c.return=r,r=c)}return s(r);case _:e:{for(l=i.key;null!==o;){if(o.key===l){if(4===o.tag&&o.stateNode.containerInfo===i.containerInfo&&o.stateNode.implementation===i.implementation){t(r,o.sibling),(o=a(o,i.children||[])).return=r,r=o;break e}t(r,o);break}n(r,o),o=o.sibling}(o=Bu(i,r.mode,c)).return=r,r=o}return s(r);case P:return e(r,o,(l=i._init)(i._payload),c)}if(ne(i))return h(r,o,i,c);if(L(i))return g(r,o,i,c);Ho(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==o&&6===o.tag?(t(r,o.sibling),(o=a(o,i)).return=r,r=o):(t(r,o),(o=ju(i,r.mode,c)).return=r,r=o),s(r)):t(r,o)}}var Jo=Yo(!0),Qo=Yo(!1),Zo={},ei=xa(Zo),ni=xa(Zo),ti=xa(Zo);function ri(e){if(e===Zo)throw Error(o(174));return e}function ai(e,n){switch(Ea(ti,n),Ea(ni,e),Ea(ei,Zo),e=n.nodeType){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:ce(null,"");break;default:n=ce(n=(e=8===e?n.parentNode:n).namespaceURI||null,e=e.tagName)}Ia(ei),Ea(ei,n)}function oi(){Ia(ei),Ia(ni),Ia(ti)}function ii(e){ri(ti.current);var n=ri(ei.current),t=ce(n,e.type);n!==t&&(Ea(ni,e),Ea(ei,t))}function si(e){ni.current===e&&(Ia(ei),Ia(ni))}var ci=xa(0);function ui(e){for(var n=e;null!==n;){if(13===n.tag){var t=n.memoizedState;if(null!==t&&(null===(t=t.dehydrated)||"$?"===t.data||"$!"===t.data))return n}else if(19===n.tag&&void 0!==n.memoizedProps.revealOrder){if(0!==(128&n.flags))return n}else if(null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var li=[];function fi(){for(var e=0;e<li.length;e++)li[e]._workInProgressVersionPrimary=null;li.length=0}var di=S.ReactCurrentDispatcher,pi=S.ReactCurrentBatchConfig,mi=0,hi=null,gi=null,yi=null,vi=!1,bi=!1,Si=0,wi=0;function _i(){throw Error(o(321))}function ki(e,n){if(null===n)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!sr(e[t],n[t]))return!1;return!0}function xi(e,n,t,r,a,i){if(mi=i,hi=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,di.current=null===e||null===e.memoizedState?ss:cs,e=t(r,a),bi){i=0;do{if(bi=!1,Si=0,25<=i)throw Error(o(301));i+=1,yi=gi=null,n.updateQueue=null,di.current=us,e=t(r,a)}while(bi)}if(di.current=is,n=null!==gi&&null!==gi.next,mi=0,yi=gi=hi=null,vi=!1,n)throw Error(o(300));return e}function Ii(){var e=0!==Si;return Si=0,e}function Ei(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yi?hi.memoizedState=yi=e:yi=yi.next=e,yi}function Oi(){if(null===gi){var e=hi.alternate;e=null!==e?e.memoizedState:null}else e=gi.next;var n=null===yi?hi.memoizedState:yi.next;if(null!==n)yi=n,gi=e;else{if(null===e)throw Error(o(310));e={memoizedState:(gi=e).memoizedState,baseState:gi.baseState,baseQueue:gi.baseQueue,queue:gi.queue,next:null},null===yi?hi.memoizedState=yi=e:yi=yi.next=e}return yi}function Ti(e,n){return"function"===typeof n?n(e):n}function Ci(e){var n=Oi(),t=n.queue;if(null===t)throw Error(o(311));t.lastRenderedReducer=e;var r=gi,a=r.baseQueue,i=t.pending;if(null!==i){if(null!==a){var s=a.next;a.next=i.next,i.next=s}r.baseQueue=a=i,t.pending=null}if(null!==a){i=a.next,r=r.baseState;var c=s=null,u=null,l=i;do{var f=l.lane;if((mi&f)===f)null!==u&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var d={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===u?(c=u=d,s=r):u=u.next=d,hi.lanes|=f,Dc|=f}l=l.next}while(null!==l&&l!==i);null===u?s=r:u.next=c,sr(r,n.memoizedState)||(Ss=!0),n.memoizedState=r,n.baseState=s,n.baseQueue=u,t.lastRenderedState=r}if(null!==(e=t.interleaved)){a=e;do{i=a.lane,hi.lanes|=i,Dc|=i,a=a.next}while(a!==e)}else null===a&&(t.lanes=0);return[n.memoizedState,t.dispatch]}function Ai(e){var n=Oi(),t=n.queue;if(null===t)throw Error(o(311));t.lastRenderedReducer=e;var r=t.dispatch,a=t.pending,i=n.memoizedState;if(null!==a){t.pending=null;var s=a=a.next;do{i=e(i,s.action),s=s.next}while(s!==a);sr(i,n.memoizedState)||(Ss=!0),n.memoizedState=i,null===n.baseQueue&&(n.baseState=i),t.lastRenderedState=i}return[i,r]}function Fi(){}function Pi(e,n){var t=hi,r=Oi(),a=n(),i=!sr(r.memoizedState,a);if(i&&(r.memoizedState=a,Ss=!0),r=r.queue,Gi(Li.bind(null,t,r,e),[e]),r.getSnapshot!==n||i||null!==yi&&1&yi.memoizedState.tag){if(t.flags|=2048,Bi(9,Ni.bind(null,t,r,a,n),void 0,null),null===Ac)throw Error(o(349));0!==(30&mi)||Mi(t,n,a)}return a}function Mi(e,n,t){e.flags|=16384,e={getSnapshot:n,value:t},null===(n=hi.updateQueue)?(n={lastEffect:null,stores:null},hi.updateQueue=n,n.stores=[e]):null===(t=n.stores)?n.stores=[e]:t.push(e)}function Ni(e,n,t,r){n.value=t,n.getSnapshot=r,Ri(n)&&Di(e)}function Li(e,n,t){return t((function(){Ri(n)&&Di(e)}))}function Ri(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!sr(e,t)}catch(r){return!0}}function Di(e){var n=Ao(e,1);null!==n&&ru(n,e,1,-1)}function ji(e){var n=Ei();return"function"===typeof e&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:e},n.queue=e,e=e.dispatch=ts.bind(null,hi,e),[n.memoizedState,e]}function Bi(e,n,t,r){return e={tag:e,create:n,destroy:t,deps:r,next:null},null===(n=hi.updateQueue)?(n={lastEffect:null,stores:null},hi.updateQueue=n,n.lastEffect=e.next=e):null===(t=n.lastEffect)?n.lastEffect=e.next=e:(r=t.next,t.next=e,e.next=r,n.lastEffect=e),e}function zi(){return Oi().memoizedState}function Ui(e,n,t,r){var a=Ei();hi.flags|=e,a.memoizedState=Bi(1|n,t,void 0,void 0===r?null:r)}function Vi(e,n,t,r){var a=Oi();r=void 0===r?null:r;var o=void 0;if(null!==gi){var i=gi.memoizedState;if(o=i.destroy,null!==r&&ki(r,i.deps))return void(a.memoizedState=Bi(n,t,o,r))}hi.flags|=e,a.memoizedState=Bi(1|n,t,o,r)}function Wi(e,n){return Ui(8390656,8,e,n)}function Gi(e,n){return Vi(2048,8,e,n)}function $i(e,n){return Vi(4,2,e,n)}function Ki(e,n){return Vi(4,4,e,n)}function qi(e,n){return"function"===typeof n?(e=e(),n(e),function(){n(null)}):null!==n&&void 0!==n?(e=e(),n.current=e,function(){n.current=null}):void 0}function Hi(e,n,t){return t=null!==t&&void 0!==t?t.concat([e]):null,Vi(4,4,qi.bind(null,n,e),t)}function Xi(){}function Yi(e,n){var t=Oi();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&ki(n,r[1])?r[0]:(t.memoizedState=[e,n],e)}function Ji(e,n){var t=Oi();n=void 0===n?null:n;var r=t.memoizedState;return null!==r&&null!==n&&ki(n,r[1])?r[0]:(e=e(),t.memoizedState=[e,n],e)}function Qi(e,n,t){return 0===(21&mi)?(e.baseState&&(e.baseState=!1,Ss=!0),e.memoizedState=t):(sr(t,n)||(t=gn(),hi.lanes|=t,Dc|=t,e.baseState=!0),n)}function Zi(e,n){var t=Sn;Sn=0!==t&&4>t?t:4,e(!0);var r=pi.transition;pi.transition={};try{e(!1),n()}finally{Sn=t,pi.transition=r}}function es(){return Oi().memoizedState}function ns(e,n,t){var r=tu(e);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},rs(e))as(n,t);else if(null!==(t=Co(e,n,t,r))){ru(t,e,r,nu()),os(t,n,r)}}function ts(e,n,t){var r=tu(e),a={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(rs(e))as(n,a);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=n.lastRenderedReducer))try{var i=n.lastRenderedState,s=o(i,t);if(a.hasEagerState=!0,a.eagerState=s,sr(s,i)){var c=n.interleaved;return null===c?(a.next=a,To(n)):(a.next=c.next,c.next=a),void(n.interleaved=a)}}catch(u){}null!==(t=Co(e,n,a,r))&&(ru(t,e,r,a=nu()),os(t,n,r))}}function rs(e){var n=e.alternate;return e===hi||null!==n&&n===hi}function as(e,n){bi=vi=!0;var t=e.pending;null===t?n.next=n:(n.next=t.next,t.next=n),e.pending=n}function os(e,n,t){if(0!==(4194240&t)){var r=n.lanes;t|=r&=e.pendingLanes,n.lanes=t,bn(e,t)}}var is={readContext:Eo,useCallback:_i,useContext:_i,useEffect:_i,useImperativeHandle:_i,useInsertionEffect:_i,useLayoutEffect:_i,useMemo:_i,useReducer:_i,useRef:_i,useState:_i,useDebugValue:_i,useDeferredValue:_i,useTransition:_i,useMutableSource:_i,useSyncExternalStore:_i,useId:_i,unstable_isNewReconciler:!1},ss={readContext:Eo,useCallback:function(e,n){return Ei().memoizedState=[e,void 0===n?null:n],e},useContext:Eo,useEffect:Wi,useImperativeHandle:function(e,n,t){return t=null!==t&&void 0!==t?t.concat([e]):null,Ui(4194308,4,qi.bind(null,n,e),t)},useLayoutEffect:function(e,n){return Ui(4194308,4,e,n)},useInsertionEffect:function(e,n){return Ui(4,2,e,n)},useMemo:function(e,n){var t=Ei();return n=void 0===n?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var r=Ei();return n=void 0!==t?t(n):n,r.memoizedState=r.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},r.queue=e,e=e.dispatch=ns.bind(null,hi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ei().memoizedState=e},useState:ji,useDebugValue:Xi,useDeferredValue:function(e){return Ei().memoizedState=e},useTransition:function(){var e=ji(!1),n=e[0];return e=Zi.bind(null,e[1]),Ei().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,t){var r=hi,a=Ei();if(ao){if(void 0===t)throw Error(o(407));t=t()}else{if(t=n(),null===Ac)throw Error(o(349));0!==(30&mi)||Mi(r,n,t)}a.memoizedState=t;var i={value:t,getSnapshot:n};return a.queue=i,Wi(Li.bind(null,r,i,e),[e]),r.flags|=2048,Bi(9,Ni.bind(null,r,i,t,n),void 0,null),t},useId:function(){var e=Ei(),n=Ac.identifierPrefix;if(ao){var t=Ja;n=":"+n+"R"+(t=(Ya&~(1<<32-sn(Ya)-1)).toString(32)+t),0<(t=Si++)&&(n+="H"+t.toString(32)),n+=":"}else n=":"+n+"r"+(t=wi++).toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},cs={readContext:Eo,useCallback:Yi,useContext:Eo,useEffect:Gi,useImperativeHandle:Hi,useInsertionEffect:$i,useLayoutEffect:Ki,useMemo:Ji,useReducer:Ci,useRef:zi,useState:function(){return Ci(Ti)},useDebugValue:Xi,useDeferredValue:function(e){return Qi(Oi(),gi.memoizedState,e)},useTransition:function(){return[Ci(Ti)[0],Oi().memoizedState]},useMutableSource:Fi,useSyncExternalStore:Pi,useId:es,unstable_isNewReconciler:!1},us={readContext:Eo,useCallback:Yi,useContext:Eo,useEffect:Gi,useImperativeHandle:Hi,useInsertionEffect:$i,useLayoutEffect:Ki,useMemo:Ji,useReducer:Ai,useRef:zi,useState:function(){return Ai(Ti)},useDebugValue:Xi,useDeferredValue:function(e){var n=Oi();return null===gi?n.memoizedState=e:Qi(n,gi.memoizedState,e)},useTransition:function(){return[Ai(Ti)[0],Oi().memoizedState]},useMutableSource:Fi,useSyncExternalStore:Pi,useId:es,unstable_isNewReconciler:!1};function ls(e,n){try{var t="",r=n;do{t+=U(r),r=r.return}while(r);var a=t}catch(o){a="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:n,stack:a,digest:null}}function fs(e,n,t){return{value:e,source:null,stack:null!=t?t:null,digest:null!=n?n:null}}function ds(e,n){try{console.error(n.value)}catch(t){setTimeout((function(){throw t}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function ms(e,n,t){(t=No(-1,t)).tag=3,t.payload={element:null};var r=n.value;return t.callback=function(){$c||($c=!0,Kc=r),ds(0,n)},t}function hs(e,n,t){(t=No(-1,t)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=n.value;t.payload=function(){return r(a)},t.callback=function(){ds(0,n)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(t.callback=function(){ds(0,n),"function"!==typeof r&&(null===qc?qc=new Set([this]):qc.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})}),t}function gs(e,n,t){var r=e.pingCache;if(null===r){r=e.pingCache=new ps;var a=new Set;r.set(n,a)}else void 0===(a=r.get(n))&&(a=new Set,r.set(n,a));a.has(t)||(a.add(t),e=Eu.bind(null,e,n,t),n.then(e,e))}function ys(e){do{var n;if((n=13===e.tag)&&(n=null===(n=e.memoizedState)||null!==n.dehydrated),n)return e;e=e.return}while(null!==e);return null}function vs(e,n,t,r,a){return 0===(1&e.mode)?(e===n?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,1===t.tag&&(null===t.alternate?t.tag=17:((n=No(-1,1)).tag=2,Lo(t,n,1))),t.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var bs=S.ReactCurrentOwner,Ss=!1;function ws(e,n,t,r){n.child=null===e?Qo(n,null,t,r):Jo(n,e.child,t,r)}function _s(e,n,t,r,a){t=t.render;var o=n.ref;return Io(n,a),r=xi(e,n,t,r,o,a),t=Ii(),null===e||Ss?(ao&&t&&eo(n),n.flags|=1,ws(e,n,r,a),n.child):(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,$s(e,n,a))}function ks(e,n,t,r,a){if(null===e){var o=t.type;return"function"!==typeof o||Mu(o)||void 0!==o.defaultProps||null!==t.compare||void 0!==t.defaultProps?((e=Lu(t.type,null,r,n,n.mode,a)).ref=n.ref,e.return=n,n.child=e):(n.tag=15,n.type=o,xs(e,n,o,r,a))}if(o=e.child,0===(e.lanes&a)){var i=o.memoizedProps;if((t=null!==(t=t.compare)?t:cr)(i,r)&&e.ref===n.ref)return $s(e,n,a)}return n.flags|=1,(e=Nu(o,r)).ref=n.ref,e.return=n,n.child=e}function xs(e,n,t,r,a){if(null!==e){var o=e.memoizedProps;if(cr(o,r)&&e.ref===n.ref){if(Ss=!1,n.pendingProps=r=o,0===(e.lanes&a))return n.lanes=e.lanes,$s(e,n,a);0!==(131072&e.flags)&&(Ss=!0)}}return Os(e,n,t,r,a)}function Is(e,n,t){var r=n.pendingProps,a=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&n.mode))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ea(Nc,Mc),Mc|=t;else{if(0===(1073741824&t))return e=null!==o?o.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Ea(Nc,Mc),Mc|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:t,Ea(Nc,Mc),Mc|=r}else null!==o?(r=o.baseLanes|t,n.memoizedState=null):r=t,Ea(Nc,Mc),Mc|=r;return ws(e,n,a,t),n.child}function Es(e,n){var t=n.ref;(null===e&&null!==t||null!==e&&e.ref!==t)&&(n.flags|=512,n.flags|=2097152)}function Os(e,n,t,r,a){var o=Pa(t)?Aa:Ta.current;return o=Fa(n,o),Io(n,a),t=xi(e,n,t,r,o,a),r=Ii(),null===e||Ss?(ao&&r&&eo(n),n.flags|=1,ws(e,n,t,a),n.child):(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a,$s(e,n,a))}function Ts(e,n,t,r,a){if(Pa(t)){var o=!0;Ra(n)}else o=!1;if(Io(n,a),null===n.stateNode)Gs(e,n),Go(n,t,r),Ko(n,t,r,a),r=!0;else if(null===e){var i=n.stateNode,s=n.memoizedProps;i.props=s;var c=i.context,u=t.contextType;"object"===typeof u&&null!==u?u=Eo(u):u=Fa(n,u=Pa(t)?Aa:Ta.current);var l=t.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof i.getSnapshotBeforeUpdate;f||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==r||c!==u)&&$o(n,i,r,u),Fo=!1;var d=n.memoizedState;i.state=d,jo(n,r,i,a),c=n.memoizedState,s!==r||d!==c||Ca.current||Fo?("function"===typeof l&&(Uo(n,t,l,r),c=n.memoizedState),(s=Fo||Wo(n,t,s,r,d,c,u))?(f||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(n.flags|=4194308)):("function"===typeof i.componentDidMount&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=c),i.props=r,i.state=c,i.context=u,r=s):("function"===typeof i.componentDidMount&&(n.flags|=4194308),r=!1)}else{i=n.stateNode,Mo(e,n),s=n.memoizedProps,u=n.type===n.elementType?s:yo(n.type,s),i.props=u,f=n.pendingProps,d=i.context,"object"===typeof(c=t.contextType)&&null!==c?c=Eo(c):c=Fa(n,c=Pa(t)?Aa:Ta.current);var p=t.getDerivedStateFromProps;(l="function"===typeof p||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s!==f||d!==c)&&$o(n,i,r,c),Fo=!1,d=n.memoizedState,i.state=d,jo(n,r,i,a);var m=n.memoizedState;s!==f||d!==m||Ca.current||Fo?("function"===typeof p&&(Uo(n,t,p,r),m=n.memoizedState),(u=Fo||Wo(n,t,u,r,d,m,c)||!1)?(l||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,m,c),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,m,c)),"function"===typeof i.componentDidUpdate&&(n.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(n.flags|=1024)):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(n.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=m),i.props=r,i.state=m,i.context=c,r=u):("function"!==typeof i.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(n.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(n.flags|=1024),r=!1)}return Cs(e,n,t,r,o,a)}function Cs(e,n,t,r,a,o){Es(e,n);var i=0!==(128&n.flags);if(!r&&!i)return a&&Da(n,t,!1),$s(e,n,o);r=n.stateNode,bs.current=n;var s=i&&"function"!==typeof t.getDerivedStateFromError?null:r.render();return n.flags|=1,null!==e&&i?(n.child=Jo(n,e.child,null,o),n.child=Jo(n,null,s,o)):ws(e,n,s,o),n.memoizedState=r.state,a&&Da(n,t,!0),n.child}function As(e){var n=e.stateNode;n.pendingContext?Na(0,n.pendingContext,n.pendingContext!==n.context):n.context&&Na(0,n.context,!1),ai(e,n.containerInfo)}function Fs(e,n,t,r,a){return mo(),ho(a),n.flags|=256,ws(e,n,t,r),n.child}var Ps,Ms,Ns,Ls,Rs={dehydrated:null,treeContext:null,retryLane:0};function Ds(e){return{baseLanes:e,cachePool:null,transitions:null}}function js(e,n,t){var r,a=n.pendingProps,i=ci.current,s=!1,c=0!==(128&n.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(s=!0,n.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Ea(ci,1&i),null===e)return uo(n),null!==(e=n.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&n.mode)?n.lanes=1:"$!"===e.data?n.lanes=8:n.lanes=1073741824,null):(c=a.children,e=a.fallback,s?(a=n.mode,s=n.child,c={mode:"hidden",children:c},0===(1&a)&&null!==s?(s.childLanes=0,s.pendingProps=c):s=Du(c,a,0,null),e=Ru(e,a,t,null),s.return=n,e.return=n,s.sibling=e,n.child=s,n.child.memoizedState=Ds(t),n.memoizedState=Rs,e):Bs(n,c));if(null!==(i=e.memoizedState)&&null!==(r=i.dehydrated))return function(e,n,t,r,a,i,s){if(t)return 256&n.flags?(n.flags&=-257,zs(e,n,s,r=fs(Error(o(422))))):null!==n.memoizedState?(n.child=e.child,n.flags|=128,null):(i=r.fallback,a=n.mode,r=Du({mode:"visible",children:r.children},a,0,null),(i=Ru(i,a,s,null)).flags|=2,r.return=n,i.return=n,r.sibling=i,n.child=r,0!==(1&n.mode)&&Jo(n,e.child,null,s),n.child.memoizedState=Ds(s),n.memoizedState=Rs,i);if(0===(1&n.mode))return zs(e,n,s,null);if("$!"===a.data){if(r=a.nextSibling&&a.nextSibling.dataset)var c=r.dgst;return r=c,zs(e,n,s,r=fs(i=Error(o(419)),r,void 0))}if(c=0!==(s&e.childLanes),Ss||c){if(null!==(r=Ac)){switch(s&-s){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}0!==(a=0!==(a&(r.suspendedLanes|s))?0:a)&&a!==i.retryLane&&(i.retryLane=a,Ao(e,a),ru(r,e,a,-1))}return gu(),zs(e,n,s,r=fs(Error(o(421))))}return"$?"===a.data?(n.flags|=128,n.child=e.child,n=Tu.bind(null,e),a._reactRetry=n,null):(e=i.treeContext,ro=ua(a.nextSibling),to=n,ao=!0,oo=null,null!==e&&(qa[Ha++]=Ya,qa[Ha++]=Ja,qa[Ha++]=Xa,Ya=e.id,Ja=e.overflow,Xa=n),n=Bs(n,r.children),n.flags|=4096,n)}(e,n,c,a,r,i,t);if(s){s=a.fallback,c=n.mode,r=(i=e.child).sibling;var u={mode:"hidden",children:a.children};return 0===(1&c)&&n.child!==i?((a=n.child).childLanes=0,a.pendingProps=u,n.deletions=null):(a=Nu(i,u)).subtreeFlags=14680064&i.subtreeFlags,null!==r?s=Nu(r,s):(s=Ru(s,c,t,null)).flags|=2,s.return=n,a.return=n,a.sibling=s,n.child=a,a=s,s=n.child,c=null===(c=e.child.memoizedState)?Ds(t):{baseLanes:c.baseLanes|t,cachePool:null,transitions:c.transitions},s.memoizedState=c,s.childLanes=e.childLanes&~t,n.memoizedState=Rs,a}return e=(s=e.child).sibling,a=Nu(s,{mode:"visible",children:a.children}),0===(1&n.mode)&&(a.lanes=t),a.return=n,a.sibling=null,null!==e&&(null===(t=n.deletions)?(n.deletions=[e],n.flags|=16):t.push(e)),n.child=a,n.memoizedState=null,a}function Bs(e,n){return(n=Du({mode:"visible",children:n},e.mode,0,null)).return=e,e.child=n}function zs(e,n,t,r){return null!==r&&ho(r),Jo(n,e.child,null,t),(e=Bs(n,n.pendingProps.children)).flags|=2,n.memoizedState=null,e}function Us(e,n,t){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n),xo(e.return,n,t)}function Vs(e,n,t,r,a){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:a}:(o.isBackwards=n,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=t,o.tailMode=a)}function Ws(e,n,t){var r=n.pendingProps,a=r.revealOrder,o=r.tail;if(ws(e,n,r.children,t),0!==(2&(r=ci.current)))r=1&r|2,n.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=n.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Us(e,t,n);else if(19===e.tag)Us(e,t,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ea(ci,r),0===(1&n.mode))n.memoizedState=null;else switch(a){case"forwards":for(t=n.child,a=null;null!==t;)null!==(e=t.alternate)&&null===ui(e)&&(a=t),t=t.sibling;null===(t=a)?(a=n.child,n.child=null):(a=t.sibling,t.sibling=null),Vs(n,!1,a,t,o);break;case"backwards":for(t=null,a=n.child,n.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ui(e)){n.child=a;break}e=a.sibling,a.sibling=t,t=a,a=e}Vs(n,!0,t,null,o);break;case"together":Vs(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Gs(e,n){0===(1&n.mode)&&null!==e&&(e.alternate=null,n.alternate=null,n.flags|=2)}function $s(e,n,t){if(null!==e&&(n.dependencies=e.dependencies),Dc|=n.lanes,0===(t&n.childLanes))return null;if(null!==e&&n.child!==e.child)throw Error(o(153));if(null!==n.child){for(t=Nu(e=n.child,e.pendingProps),n.child=t,t.return=n;null!==e.sibling;)e=e.sibling,(t=t.sibling=Nu(e,e.pendingProps)).return=n;t.sibling=null}return n.child}function Ks(e,n){if(!ao)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;null!==n;)null!==n.alternate&&(t=n),n=n.sibling;null===t?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?n||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qs(e){var n=null!==e.alternate&&e.alternate.child===e.child,t=0,r=0;if(n)for(var a=e.child;null!==a;)t|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)t|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=t,n}function Hs(e,n,t){var r=n.pendingProps;switch(no(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qs(n),null;case 1:case 17:return Pa(n.type)&&Ma(),qs(n),null;case 3:return r=n.stateNode,oi(),Ia(Ca),Ia(Ta),fi(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fo(n)?n.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&n.flags)||(n.flags|=1024,null!==oo&&(su(oo),oo=null))),Ms(e,n),qs(n),null;case 5:si(n);var a=ri(ti.current);if(t=n.type,null!==e&&null!=n.stateNode)Ns(e,n,t,r,a),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!r){if(null===n.stateNode)throw Error(o(166));return qs(n),null}if(e=ri(ei.current),fo(n)){r=n.stateNode,t=n.type;var i=n.memoizedProps;switch(r[da]=n,r[pa]=i,e=0!==(1&n.mode),t){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(a=0;a<Lr.length;a++)Br(Lr[a],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":Y(r,i),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Br("invalid",r);break;case"textarea":ae(r,i),Br("invalid",r)}for(var c in ve(t,i),a=null,i)if(i.hasOwnProperty(c)){var u=i[c];"children"===c?"string"===typeof u?r.textContent!==u&&(!0!==i.suppressHydrationWarning&&Qr(r.textContent,u,e),a=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==i.suppressHydrationWarning&&Qr(r.textContent,u,e),a=["children",""+u]):s.hasOwnProperty(c)&&null!=u&&"onScroll"===c&&Br("scroll",r)}switch(t){case"input":K(r),Z(r,i,!0);break;case"textarea":K(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Zr)}r=a,n.updateQueue=r,null!==r&&(n.flags|=4)}else{c=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(t)),"http://www.w3.org/1999/xhtml"===e?"script"===t?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(t,{is:r.is}):(e=c.createElement(t),"select"===t&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,t),e[da]=n,e[pa]=r,Ps(e,n,!1,!1),n.stateNode=e;e:{switch(c=be(t,r),t){case"dialog":Br("cancel",e),Br("close",e),a=r;break;case"iframe":case"object":case"embed":Br("load",e),a=r;break;case"video":case"audio":for(a=0;a<Lr.length;a++)Br(Lr[a],e);a=r;break;case"source":Br("error",e),a=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),a=r;break;case"details":Br("toggle",e),a=r;break;case"input":Y(e,r),a=X(e,r),Br("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=D({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Br("invalid",e)}for(i in ve(t,a),u=a)if(u.hasOwnProperty(i)){var l=u[i];"style"===i?ge(e,l):"dangerouslySetInnerHTML"===i?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===i?"string"===typeof l?("textarea"!==t||""!==l)&&de(e,l):"number"===typeof l&&de(e,""+l):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(s.hasOwnProperty(i)?null!=l&&"onScroll"===i&&Br("scroll",e):null!=l&&b(e,i,l,c))}switch(t){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?te(e,!!r.multiple,i,!1):null!=r.defaultValue&&te(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zr)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(n.flags|=4)}null!==n.ref&&(n.flags|=512,n.flags|=2097152)}return qs(n),null;case 6:if(e&&null!=n.stateNode)Ls(e,n,e.memoizedProps,r);else{if("string"!==typeof r&&null===n.stateNode)throw Error(o(166));if(t=ri(ti.current),ri(ei.current),fo(n)){if(r=n.stateNode,t=n.memoizedProps,r[da]=n,(i=r.nodeValue!==t)&&null!==(e=to))switch(e.tag){case 3:Qr(r.nodeValue,t,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,t,0!==(1&e.mode))}i&&(n.flags|=4)}else(r=(9===t.nodeType?t:t.ownerDocument).createTextNode(r))[da]=n,n.stateNode=r}return qs(n),null;case 13:if(Ia(ci),r=n.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ao&&null!==ro&&0!==(1&n.mode)&&0===(128&n.flags))po(),mo(),n.flags|=98560,i=!1;else if(i=fo(n),null!==r&&null!==r.dehydrated){if(null===e){if(!i)throw Error(o(318));if(!(i=null!==(i=n.memoizedState)?i.dehydrated:null))throw Error(o(317));i[da]=n}else mo(),0===(128&n.flags)&&(n.memoizedState=null),n.flags|=4;qs(n),i=!1}else null!==oo&&(su(oo),oo=null),i=!0;if(!i)return 65536&n.flags?n:null}return 0!==(128&n.flags)?(n.lanes=t,n):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(n.child.flags|=8192,0!==(1&n.mode)&&(null===e||0!==(1&ci.current)?0===Lc&&(Lc=3):gu())),null!==n.updateQueue&&(n.flags|=4),qs(n),null);case 4:return oi(),Ms(e,n),null===e&&Vr(n.stateNode.containerInfo),qs(n),null;case 10:return ko(n.type._context),qs(n),null;case 19:if(Ia(ci),null===(i=n.memoizedState))return qs(n),null;if(r=0!==(128&n.flags),null===(c=i.rendering))if(r)Ks(i,!1);else{if(0!==Lc||null!==e&&0!==(128&e.flags))for(e=n.child;null!==e;){if(null!==(c=ui(e))){for(n.flags|=128,Ks(i,!1),null!==(r=c.updateQueue)&&(n.updateQueue=r,n.flags|=4),n.subtreeFlags=0,r=t,t=n.child;null!==t;)e=r,(i=t).flags&=14680066,null===(c=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,e=c.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return Ea(ci,1&ci.current|2),n.child}e=e.sibling}null!==i.tail&&Je()>Wc&&(n.flags|=128,r=!0,Ks(i,!1),n.lanes=4194304)}else{if(!r)if(null!==(e=ui(c))){if(n.flags|=128,r=!0,null!==(t=e.updateQueue)&&(n.updateQueue=t,n.flags|=4),Ks(i,!0),null===i.tail&&"hidden"===i.tailMode&&!c.alternate&&!ao)return qs(n),null}else 2*Je()-i.renderingStartTime>Wc&&1073741824!==t&&(n.flags|=128,r=!0,Ks(i,!1),n.lanes=4194304);i.isBackwards?(c.sibling=n.child,n.child=c):(null!==(t=i.last)?t.sibling=c:n.child=c,i.last=c)}return null!==i.tail?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.renderingStartTime=Je(),n.sibling=null,t=ci.current,Ea(ci,r?1&t|2:1&t),n):(qs(n),null);case 22:case 23:return du(),r=null!==n.memoizedState,null!==e&&null!==e.memoizedState!==r&&(n.flags|=8192),r&&0!==(1&n.mode)?0!==(1073741824&Mc)&&(qs(n),6&n.subtreeFlags&&(n.flags|=8192)):qs(n),null;case 24:case 25:return null}throw Error(o(156,n.tag))}function Xs(e,n){switch(no(n),n.tag){case 1:return Pa(n.type)&&Ma(),65536&(e=n.flags)?(n.flags=-65537&e|128,n):null;case 3:return oi(),Ia(Ca),Ia(Ta),fi(),0!==(65536&(e=n.flags))&&0===(128&e)?(n.flags=-65537&e|128,n):null;case 5:return si(n),null;case 13:if(Ia(ci),null!==(e=n.memoizedState)&&null!==e.dehydrated){if(null===n.alternate)throw Error(o(340));mo()}return 65536&(e=n.flags)?(n.flags=-65537&e|128,n):null;case 19:return Ia(ci),null;case 4:return oi(),null;case 10:return ko(n.type._context),null;case 22:case 23:return du(),null;default:return null}}Ps=function(e,n){for(var t=n.child;null!==t;){if(5===t.tag||6===t.tag)e.appendChild(t.stateNode);else if(4!==t.tag&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}},Ms=function(){},Ns=function(e,n,t,r){var a=e.memoizedProps;if(a!==r){e=n.stateNode,ri(ei.current);var o,i=null;switch(t){case"input":a=X(e,a),r=X(e,r),i=[];break;case"select":a=D({},a,{value:void 0}),r=D({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ve(t,r),t=null,a)if(!r.hasOwnProperty(l)&&a.hasOwnProperty(l)&&null!=a[l])if("style"===l){var c=a[l];for(o in c)c.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(s.hasOwnProperty(l)?i||(i=[]):(i=i||[]).push(l,null));for(l in r){var u=r[l];if(c=null!=a?a[l]:void 0,r.hasOwnProperty(l)&&u!==c&&(null!=u||null!=c))if("style"===l)if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(t||(t={}),t[o]=u[o])}else t||(i||(i=[]),i.push(l,t)),t=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,c=c?c.__html:void 0,null!=u&&c!==u&&(i=i||[]).push(l,u)):"children"===l?"string"!==typeof u&&"number"!==typeof u||(i=i||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(s.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&Br("scroll",e),i||c===u||(i=[])):(i=i||[]).push(l,u))}t&&(i=i||[]).push("style",t);var l=i;(n.updateQueue=l)&&(n.flags|=4)}},Ls=function(e,n,t,r){t!==r&&(n.flags|=4)};var Ys=!1,Js=!1,Qs="function"===typeof WeakSet?WeakSet:Set,Zs=null;function ec(e,n){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(r){Iu(e,n,r)}else t.current=null}function nc(e,n,t){try{t()}catch(r){Iu(e,n,r)}}var tc=!1;function rc(e,n,t){var r=n.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var o=a.destroy;a.destroy=void 0,void 0!==o&&nc(n,t,o)}a=a.next}while(a!==r)}}function ac(e,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var t=n=n.next;do{if((t.tag&e)===e){var r=t.create;t.destroy=r()}t=t.next}while(t!==n)}}function oc(e){var n=e.ref;if(null!==n){var t=e.stateNode;e.tag,e=t,"function"===typeof n?n(e):n.current=e}}function ic(e){var n=e.alternate;null!==n&&(e.alternate=null,ic(n)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(n=e.stateNode)&&(delete n[da],delete n[pa],delete n[ha],delete n[ga],delete n[ya])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sc(e){return 5===e.tag||3===e.tag||4===e.tag}function cc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function uc(e,n,t){var r=e.tag;if(5===r||6===r)e=e.stateNode,n?8===t.nodeType?t.parentNode.insertBefore(e,n):t.insertBefore(e,n):(8===t.nodeType?(n=t.parentNode).insertBefore(e,t):(n=t).appendChild(e),null!==(t=t._reactRootContainer)&&void 0!==t||null!==n.onclick||(n.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(uc(e,n,t),e=e.sibling;null!==e;)uc(e,n,t),e=e.sibling}function lc(e,n,t){var r=e.tag;if(5===r||6===r)e=e.stateNode,n?t.insertBefore(e,n):t.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lc(e,n,t),e=e.sibling;null!==e;)lc(e,n,t),e=e.sibling}var fc=null,dc=!1;function pc(e,n,t){for(t=t.child;null!==t;)mc(e,n,t),t=t.sibling}function mc(e,n,t){if(on&&"function"===typeof on.onCommitFiberUnmount)try{on.onCommitFiberUnmount(an,t)}catch(s){}switch(t.tag){case 5:Js||ec(t,n);case 6:var r=fc,a=dc;fc=null,pc(e,n,t),dc=a,null!==(fc=r)&&(dc?(e=fc,t=t.stateNode,8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)):fc.removeChild(t.stateNode));break;case 18:null!==fc&&(dc?(e=fc,t=t.stateNode,8===e.nodeType?ca(e.parentNode,t):1===e.nodeType&&ca(e,t),Wn(e)):ca(fc,t.stateNode));break;case 4:r=fc,a=dc,fc=t.stateNode.containerInfo,dc=!0,pc(e,n,t),fc=r,dc=a;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=t.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var o=a,i=o.destroy;o=o.tag,void 0!==i&&(0!==(2&o)||0!==(4&o))&&nc(t,n,i),a=a.next}while(a!==r)}pc(e,n,t);break;case 1:if(!Js&&(ec(t,n),"function"===typeof(r=t.stateNode).componentWillUnmount))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(s){Iu(t,n,s)}pc(e,n,t);break;case 21:pc(e,n,t);break;case 22:1&t.mode?(Js=(r=Js)||null!==t.memoizedState,pc(e,n,t),Js=r):pc(e,n,t);break;default:pc(e,n,t)}}function hc(e){var n=e.updateQueue;if(null!==n){e.updateQueue=null;var t=e.stateNode;null===t&&(t=e.stateNode=new Qs),n.forEach((function(n){var r=Cu.bind(null,e,n);t.has(n)||(t.add(n),n.then(r,r))}))}}function gc(e,n){var t=n.deletions;if(null!==t)for(var r=0;r<t.length;r++){var a=t[r];try{var i=e,s=n,c=s;e:for(;null!==c;){switch(c.tag){case 5:fc=c.stateNode,dc=!1;break e;case 3:case 4:fc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===fc)throw Error(o(160));mc(i,s,a),fc=null,dc=!1;var u=a.alternate;null!==u&&(u.return=null),a.return=null}catch(l){Iu(a,n,l)}}if(12854&n.subtreeFlags)for(n=n.child;null!==n;)yc(n,e),n=n.sibling}function yc(e,n){var t=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gc(n,e),vc(e),4&r){try{rc(3,e,e.return),ac(3,e)}catch(g){Iu(e,e.return,g)}try{rc(5,e,e.return)}catch(g){Iu(e,e.return,g)}}break;case 1:gc(n,e),vc(e),512&r&&null!==t&&ec(t,t.return);break;case 5:if(gc(n,e),vc(e),512&r&&null!==t&&ec(t,t.return),32&e.flags){var a=e.stateNode;try{de(a,"")}catch(g){Iu(e,e.return,g)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,s=null!==t?t.memoizedProps:i,c=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===c&&"radio"===i.type&&null!=i.name&&J(a,i),be(c,s);var l=be(c,i);for(s=0;s<u.length;s+=2){var f=u[s],d=u[s+1];"style"===f?ge(a,d):"dangerouslySetInnerHTML"===f?fe(a,d):"children"===f?de(a,d):b(a,f,d,l)}switch(c){case"input":Q(a,i);break;case"textarea":oe(a,i);break;case"select":var p=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var m=i.value;null!=m?te(a,!!i.multiple,m,!1):p!==!!i.multiple&&(null!=i.defaultValue?te(a,!!i.multiple,i.defaultValue,!0):te(a,!!i.multiple,i.multiple?[]:"",!1))}a[pa]=i}catch(g){Iu(e,e.return,g)}}break;case 6:if(gc(n,e),vc(e),4&r){if(null===e.stateNode)throw Error(o(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Iu(e,e.return,g)}}break;case 3:if(gc(n,e),vc(e),4&r&&null!==t&&t.memoizedState.isDehydrated)try{Wn(n.containerInfo)}catch(g){Iu(e,e.return,g)}break;case 4:default:gc(n,e),vc(e);break;case 13:gc(n,e),vc(e),8192&(a=e.child).flags&&(i=null!==a.memoizedState,a.stateNode.isHidden=i,!i||null!==a.alternate&&null!==a.alternate.memoizedState||(Vc=Je())),4&r&&hc(e);break;case 22:if(f=null!==t&&null!==t.memoizedState,1&e.mode?(Js=(l=Js)||f,gc(n,e),Js=l):gc(n,e),vc(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zs=e,f=e.child;null!==f;){for(d=Zs=f;null!==Zs;){switch(m=(p=Zs).child,p.tag){case 0:case 11:case 14:case 15:rc(4,p,p.return);break;case 1:ec(p,p.return);var h=p.stateNode;if("function"===typeof h.componentWillUnmount){r=p,t=p.return;try{n=r,h.props=n.memoizedProps,h.state=n.memoizedState,h.componentWillUnmount()}catch(g){Iu(r,t,g)}}break;case 5:ec(p,p.return);break;case 22:if(null!==p.memoizedState){_c(d);continue}}null!==m?(m.return=p,Zs=m):_c(d)}f=f.sibling}e:for(f=null,d=e;;){if(5===d.tag){if(null===f){f=d;try{a=d.stateNode,l?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(c=d.stateNode,s=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,c.style.display=he("display",s))}catch(g){Iu(e,e.return,g)}}}else if(6===d.tag){if(null===f)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Iu(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;f===d&&(f=null),d=d.return}f===d&&(f=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gc(n,e),vc(e),4&r&&hc(e);case 21:}}function vc(e){var n=e.flags;if(2&n){try{e:{for(var t=e.return;null!==t;){if(sc(t)){var r=t;break e}t=t.return}throw Error(o(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(de(a,""),r.flags&=-33),lc(e,cc(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;uc(e,cc(e),i);break;default:throw Error(o(161))}}catch(s){Iu(e,e.return,s)}e.flags&=-3}4096&n&&(e.flags&=-4097)}function bc(e,n,t){Zs=e,Sc(e,n,t)}function Sc(e,n,t){for(var r=0!==(1&e.mode);null!==Zs;){var a=Zs,o=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Ys;if(!i){var s=a.alternate,c=null!==s&&null!==s.memoizedState||Js;s=Ys;var u=Js;if(Ys=i,(Js=c)&&!u)for(Zs=a;null!==Zs;)c=(i=Zs).child,22===i.tag&&null!==i.memoizedState?kc(a):null!==c?(c.return=i,Zs=c):kc(a);for(;null!==o;)Zs=o,Sc(o,n,t),o=o.sibling;Zs=a,Ys=s,Js=u}wc(e)}else 0!==(8772&a.subtreeFlags)&&null!==o?(o.return=a,Zs=o):wc(e)}}function wc(e){for(;null!==Zs;){var n=Zs;if(0!==(8772&n.flags)){var t=n.alternate;try{if(0!==(8772&n.flags))switch(n.tag){case 0:case 11:case 15:Js||ac(5,n);break;case 1:var r=n.stateNode;if(4&n.flags&&!Js)if(null===t)r.componentDidMount();else{var a=n.elementType===n.type?t.memoizedProps:yo(n.type,t.memoizedProps);r.componentDidUpdate(a,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=n.updateQueue;null!==i&&Bo(n,i,r);break;case 3:var s=n.updateQueue;if(null!==s){if(t=null,null!==n.child)switch(n.child.tag){case 5:case 1:t=n.child.stateNode}Bo(n,s,t)}break;case 5:var c=n.stateNode;if(null===t&&4&n.flags){t=c;var u=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&t.focus();break;case"img":u.src&&(t.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===n.memoizedState){var l=n.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var d=f.dehydrated;null!==d&&Wn(d)}}}break;default:throw Error(o(163))}Js||512&n.flags&&oc(n)}catch(p){Iu(n,n.return,p)}}if(n===e){Zs=null;break}if(null!==(t=n.sibling)){t.return=n.return,Zs=t;break}Zs=n.return}}function _c(e){for(;null!==Zs;){var n=Zs;if(n===e){Zs=null;break}var t=n.sibling;if(null!==t){t.return=n.return,Zs=t;break}Zs=n.return}}function kc(e){for(;null!==Zs;){var n=Zs;try{switch(n.tag){case 0:case 11:case 15:var t=n.return;try{ac(4,n)}catch(c){Iu(n,t,c)}break;case 1:var r=n.stateNode;if("function"===typeof r.componentDidMount){var a=n.return;try{r.componentDidMount()}catch(c){Iu(n,a,c)}}var o=n.return;try{oc(n)}catch(c){Iu(n,o,c)}break;case 5:var i=n.return;try{oc(n)}catch(c){Iu(n,i,c)}}}catch(c){Iu(n,n.return,c)}if(n===e){Zs=null;break}var s=n.sibling;if(null!==s){s.return=n.return,Zs=s;break}Zs=n.return}}var xc,Ic=Math.ceil,Ec=S.ReactCurrentDispatcher,Oc=S.ReactCurrentOwner,Tc=S.ReactCurrentBatchConfig,Cc=0,Ac=null,Fc=null,Pc=0,Mc=0,Nc=xa(0),Lc=0,Rc=null,Dc=0,jc=0,Bc=0,zc=null,Uc=null,Vc=0,Wc=1/0,Gc=null,$c=!1,Kc=null,qc=null,Hc=!1,Xc=null,Yc=0,Jc=0,Qc=null,Zc=-1,eu=0;function nu(){return 0!==(6&Cc)?Je():-1!==Zc?Zc:Zc=Je()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Cc)&&0!==Pc?Pc&-Pc:null!==go.transition?(0===eu&&(eu=gn()),eu):0!==(e=Sn)?e:e=void 0===(e=window.event)?16:Jn(e.type)}function ru(e,n,t,r){if(50<Jc)throw Jc=0,Qc=null,Error(o(185));vn(e,t,r),0!==(2&Cc)&&e===Ac||(e===Ac&&(0===(2&Cc)&&(jc|=t),4===Lc&&cu(e,Pc)),au(e,r),1===t&&0===Cc&&0===(1&n.mode)&&(Wc=Je()+500,Ba&&Va()))}function au(e,n){var t=e.callbackNode;!function(e,n){for(var t=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var i=31-sn(o),s=1<<i,c=a[i];-1===c?0!==(s&t)&&0===(s&r)||(a[i]=mn(s,n)):c<=n&&(e.expiredLanes|=s),o&=~s}}(e,n);var r=pn(e,e===Ac?Pc:0);if(0===r)null!==t&&He(t),e.callbackNode=null,e.callbackPriority=0;else if(n=r&-r,e.callbackPriority!==n){if(null!=t&&He(t),1===n)0===e.tag?function(e){Ba=!0,Ua(e)}(uu.bind(null,e)):Ua(uu.bind(null,e)),ia((function(){0===(6&Cc)&&Va()})),t=null;else{switch(wn(r)){case 1:t=Ze;break;case 4:t=en;break;case 16:default:t=nn;break;case 536870912:t=rn}t=Au(t,ou.bind(null,e))}e.callbackPriority=n,e.callbackNode=t}}function ou(e,n){if(Zc=-1,eu=0,0!==(6&Cc))throw Error(o(327));var t=e.callbackNode;if(ku()&&e.callbackNode!==t)return null;var r=pn(e,e===Ac?Pc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||n)n=yu(e,r);else{n=r;var a=Cc;Cc|=2;var i=hu();for(Ac===e&&Pc===n||(Gc=null,Wc=Je()+500,pu(e,n));;)try{bu();break}catch(c){mu(e,c)}_o(),Ec.current=i,Cc=a,null!==Fc?n=0:(Ac=null,Pc=0,n=Lc)}if(0!==n){if(2===n&&(0!==(a=hn(e))&&(r=a,n=iu(e,a))),1===n)throw t=Rc,pu(e,0),cu(e,r),au(e,Je()),t;if(6===n)cu(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var n=e;;){if(16384&n.flags){var t=n.updateQueue;if(null!==t&&null!==(t=t.stores))for(var r=0;r<t.length;r++){var a=t[r],o=a.getSnapshot;a=a.value;try{if(!sr(o(),a))return!1}catch(s){return!1}}}if(t=n.child,16384&n.subtreeFlags&&null!==t)t.return=n,n=t;else{if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}(a)&&(2===(n=yu(e,r))&&(0!==(i=hn(e))&&(r=i,n=iu(e,i))),1===n))throw t=Rc,pu(e,0),cu(e,r),au(e,Je()),t;switch(e.finishedWork=a,e.finishedLanes=r,n){case 0:case 1:throw Error(o(345));case 2:case 5:_u(e,Uc,Gc);break;case 3:if(cu(e,r),(130023424&r)===r&&10<(n=Vc+500-Je())){if(0!==pn(e,0))break;if(((a=e.suspendedLanes)&r)!==r){nu(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(_u.bind(null,e,Uc,Gc),n);break}_u(e,Uc,Gc);break;case 4:if(cu(e,r),(4194240&r)===r)break;for(n=e.eventTimes,a=-1;0<r;){var s=31-sn(r);i=1<<s,(s=n[s])>a&&(a=s),r&=~i}if(r=a,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ic(r/1960))-r)){e.timeoutHandle=ra(_u.bind(null,e,Uc,Gc),r);break}_u(e,Uc,Gc);break;default:throw Error(o(329))}}}return au(e,Je()),e.callbackNode===t?ou.bind(null,e):null}function iu(e,n){var t=zc;return e.current.memoizedState.isDehydrated&&(pu(e,n).flags|=256),2!==(e=yu(e,n))&&(n=Uc,Uc=t,null!==n&&su(n)),e}function su(e){null===Uc?Uc=e:Uc.push.apply(Uc,e)}function cu(e,n){for(n&=~Bc,n&=~jc,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-sn(n),r=1<<t;e[t]=-1,n&=~r}}function uu(e){if(0!==(6&Cc))throw Error(o(327));ku();var n=pn(e,0);if(0===(1&n))return au(e,Je()),null;var t=yu(e,n);if(0!==e.tag&&2===t){var r=hn(e);0!==r&&(n=r,t=iu(e,r))}if(1===t)throw t=Rc,pu(e,0),cu(e,n),au(e,Je()),t;if(6===t)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,_u(e,Uc,Gc),au(e,Je()),null}function lu(e,n){var t=Cc;Cc|=1;try{return e(n)}finally{0===(Cc=t)&&(Wc=Je()+500,Ba&&Va())}}function fu(e){null!==Xc&&0===Xc.tag&&0===(6&Cc)&&ku();var n=Cc;Cc|=1;var t=Tc.transition,r=Sn;try{if(Tc.transition=null,Sn=1,e)return e()}finally{Sn=r,Tc.transition=t,0===(6&(Cc=n))&&Va()}}function du(){Mc=Nc.current,Ia(Nc)}function pu(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(-1!==t&&(e.timeoutHandle=-1,aa(t)),null!==Fc)for(t=Fc.return;null!==t;){var r=t;switch(no(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ma();break;case 3:oi(),Ia(Ca),Ia(Ta),fi();break;case 5:si(r);break;case 4:oi();break;case 13:case 19:Ia(ci);break;case 10:ko(r.type._context);break;case 22:case 23:du()}t=t.return}if(Ac=e,Fc=e=Nu(e.current,null),Pc=Mc=n,Lc=0,Rc=null,Bc=jc=Dc=0,Uc=zc=null,null!==Oo){for(n=0;n<Oo.length;n++)if(null!==(r=(t=Oo[n]).interleaved)){t.interleaved=null;var a=r.next,o=t.pending;if(null!==o){var i=o.next;o.next=a,r.next=i}t.pending=r}Oo=null}return e}function mu(e,n){for(;;){var t=Fc;try{if(_o(),di.current=is,vi){for(var r=hi.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}vi=!1}if(mi=0,yi=gi=hi=null,bi=!1,Si=0,Oc.current=null,null===t||null===t.return){Lc=1,Rc=n,Fc=null;break}e:{var i=e,s=t.return,c=t,u=n;if(n=Pc,c.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u,f=c,d=f.tag;if(0===(1&f.mode)&&(0===d||11===d||15===d)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=ys(s);if(null!==m){m.flags&=-257,vs(m,s,c,0,n),1&m.mode&&gs(i,l,n),u=l;var h=(n=m).updateQueue;if(null===h){var g=new Set;g.add(u),n.updateQueue=g}else h.add(u);break e}if(0===(1&n)){gs(i,l,n),gu();break e}u=Error(o(426))}else if(ao&&1&c.mode){var y=ys(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),vs(y,s,c,0,n),ho(ls(u,c));break e}}i=u=ls(u,c),4!==Lc&&(Lc=2),null===zc?zc=[i]:zc.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,n&=-n,i.lanes|=n,Do(i,ms(0,u,n));break e;case 1:c=u;var v=i.type,b=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===qc||!qc.has(b)))){i.flags|=65536,n&=-n,i.lanes|=n,Do(i,hs(i,c,n));break e}}i=i.return}while(null!==i)}wu(t)}catch(S){n=S,Fc===t&&null!==t&&(Fc=t=t.return);continue}break}}function hu(){var e=Ec.current;return Ec.current=is,null===e?is:e}function gu(){0!==Lc&&3!==Lc&&2!==Lc||(Lc=4),null===Ac||0===(268435455&Dc)&&0===(268435455&jc)||cu(Ac,Pc)}function yu(e,n){var t=Cc;Cc|=2;var r=hu();for(Ac===e&&Pc===n||(Gc=null,pu(e,n));;)try{vu();break}catch(a){mu(e,a)}if(_o(),Cc=t,Ec.current=r,null!==Fc)throw Error(o(261));return Ac=null,Pc=0,Lc}function vu(){for(;null!==Fc;)Su(Fc)}function bu(){for(;null!==Fc&&!Xe();)Su(Fc)}function Su(e){var n=xc(e.alternate,e,Mc);e.memoizedProps=e.pendingProps,null===n?wu(e):Fc=n,Oc.current=null}function wu(e){var n=e;do{var t=n.alternate;if(e=n.return,0===(32768&n.flags)){if(null!==(t=Hs(t,n,Mc)))return void(Fc=t)}else{if(null!==(t=Xs(t,n)))return t.flags&=32767,void(Fc=t);if(null===e)return Lc=6,void(Fc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(n=n.sibling))return void(Fc=n);Fc=n=e}while(null!==n);0===Lc&&(Lc=5)}function _u(e,n,t){var r=Sn,a=Tc.transition;try{Tc.transition=null,Sn=1,function(e,n,t,r){do{ku()}while(null!==Xc);if(0!==(6&Cc))throw Error(o(327));t=e.finishedWork;var a=e.finishedLanes;if(null===t)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var i=t.lanes|t.childLanes;if(function(e,n){var t=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<t;){var a=31-sn(t),o=1<<a;n[a]=0,r[a]=-1,e[a]=-1,t&=~o}}(e,i),e===Ac&&(Fc=Ac=null,Pc=0),0===(2064&t.subtreeFlags)&&0===(2064&t.flags)||Hc||(Hc=!0,Au(nn,(function(){return ku(),null}))),i=0!==(15990&t.flags),0!==(15990&t.subtreeFlags)||i){i=Tc.transition,Tc.transition=null;var s=Sn;Sn=1;var c=Cc;Cc|=4,Oc.current=null,function(e,n){if(ea=$n,pr(e=dr())){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(r&&0!==r.rangeCount){t=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch(w){t=null;break e}var s=0,c=-1,u=-1,l=0,f=0,d=e,p=null;n:for(;;){for(var m;d!==t||0!==a&&3!==d.nodeType||(c=s+a),d!==i||0!==r&&3!==d.nodeType||(u=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(m=d.firstChild);)p=d,d=m;for(;;){if(d===e)break n;if(p===t&&++l===a&&(c=s),p===i&&++f===r&&(u=s),null!==(m=d.nextSibling))break;p=(d=p).parentNode}d=m}t=-1===c||-1===u?null:{start:c,end:u}}else t=null}t=t||{start:0,end:0}}else t=null;for(na={focusedElem:e,selectionRange:t},$n=!1,Zs=n;null!==Zs;)if(e=(n=Zs).child,0!==(1028&n.subtreeFlags)&&null!==e)e.return=n,Zs=e;else for(;null!==Zs;){n=Zs;try{var h=n.alternate;if(0!==(1024&n.flags))switch(n.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==h){var g=h.memoizedProps,y=h.memoizedState,v=n.stateNode,b=v.getSnapshotBeforeUpdate(n.elementType===n.type?g:yo(n.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var S=n.stateNode.containerInfo;1===S.nodeType?S.textContent="":9===S.nodeType&&S.documentElement&&S.removeChild(S.documentElement);break;default:throw Error(o(163))}}catch(w){Iu(n,n.return,w)}if(null!==(e=n.sibling)){e.return=n.return,Zs=e;break}Zs=n.return}h=tc,tc=!1}(e,t),yc(t,e),mr(na),$n=!!ea,na=ea=null,e.current=t,bc(t,e,a),Ye(),Cc=c,Sn=s,Tc.transition=i}else e.current=t;if(Hc&&(Hc=!1,Xc=e,Yc=a),i=e.pendingLanes,0===i&&(qc=null),function(e){if(on&&"function"===typeof on.onCommitFiberRoot)try{on.onCommitFiberRoot(an,e,void 0,128===(128&e.current.flags))}catch(n){}}(t.stateNode),au(e,Je()),null!==n)for(r=e.onRecoverableError,t=0;t<n.length;t++)a=n[t],r(a.value,{componentStack:a.stack,digest:a.digest});if($c)throw $c=!1,e=Kc,Kc=null,e;0!==(1&Yc)&&0!==e.tag&&ku(),i=e.pendingLanes,0!==(1&i)?e===Qc?Jc++:(Jc=0,Qc=e):Jc=0,Va()}(e,n,t,r)}finally{Tc.transition=a,Sn=r}return null}function ku(){if(null!==Xc){var e=wn(Yc),n=Tc.transition,t=Sn;try{if(Tc.transition=null,Sn=16>e?16:e,null===Xc)var r=!1;else{if(e=Xc,Xc=null,Yc=0,0!==(6&Cc))throw Error(o(331));var a=Cc;for(Cc|=4,Zs=e.current;null!==Zs;){var i=Zs,s=i.child;if(0!==(16&Zs.flags)){var c=i.deletions;if(null!==c){for(var u=0;u<c.length;u++){var l=c[u];for(Zs=l;null!==Zs;){var f=Zs;switch(f.tag){case 0:case 11:case 15:rc(8,f,i)}var d=f.child;if(null!==d)d.return=f,Zs=d;else for(;null!==Zs;){var p=(f=Zs).sibling,m=f.return;if(ic(f),f===l){Zs=null;break}if(null!==p){p.return=m,Zs=p;break}Zs=m}}}var h=i.alternate;if(null!==h){var g=h.child;if(null!==g){h.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Zs=i}}if(0!==(2064&i.subtreeFlags)&&null!==s)s.return=i,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(i=Zs).flags))switch(i.tag){case 0:case 11:case 15:rc(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,Zs=v;break e}Zs=i.return}}var b=e.current;for(Zs=b;null!==Zs;){var S=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==S)S.return=s,Zs=S;else e:for(s=b;null!==Zs;){if(0!==(2048&(c=Zs).flags))try{switch(c.tag){case 0:case 11:case 15:ac(9,c)}}catch(_){Iu(c,c.return,_)}if(c===s){Zs=null;break e}var w=c.sibling;if(null!==w){w.return=c.return,Zs=w;break e}Zs=c.return}}if(Cc=a,Va(),on&&"function"===typeof on.onPostCommitFiberRoot)try{on.onPostCommitFiberRoot(an,e)}catch(_){}r=!0}return r}finally{Sn=t,Tc.transition=n}}return!1}function xu(e,n,t){e=Lo(e,n=ms(0,n=ls(t,n),1),1),n=nu(),null!==e&&(vn(e,1,n),au(e,n))}function Iu(e,n,t){if(3===e.tag)xu(e,e,t);else for(;null!==n;){if(3===n.tag){xu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===qc||!qc.has(r))){n=Lo(n,e=hs(n,e=ls(t,e),1),1),e=nu(),null!==n&&(vn(n,1,e),au(n,e));break}}n=n.return}}function Eu(e,n,t){var r=e.pingCache;null!==r&&r.delete(n),n=nu(),e.pingedLanes|=e.suspendedLanes&t,Ac===e&&(Pc&t)===t&&(4===Lc||3===Lc&&(130023424&Pc)===Pc&&500>Je()-Vc?pu(e,0):Bc|=t),au(e,n)}function Ou(e,n){0===n&&(0===(1&e.mode)?n=1:(n=fn,0===(130023424&(fn<<=1))&&(fn=4194304)));var t=nu();null!==(e=Ao(e,n))&&(vn(e,n,t),au(e,t))}function Tu(e){var n=e.memoizedState,t=0;null!==n&&(t=n.retryLane),Ou(e,t)}function Cu(e,n){var t=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(t=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(n),Ou(e,t)}function Au(e,n){return qe(e,n)}function Fu(e,n,t,r){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(e,n,t,r){return new Fu(e,n,t,r)}function Mu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nu(e,n){var t=e.alternate;return null===t?((t=Pu(e.tag,n,e.key,e.mode)).elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=14680064&e.flags,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=null===n?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function Lu(e,n,t,r,a,i){var s=2;if(r=e,"function"===typeof e)Mu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case k:return Ru(t.children,a,i,n);case x:s=8,a|=8;break;case I:return(e=Pu(12,t,n,2|a)).elementType=I,e.lanes=i,e;case C:return(e=Pu(13,t,n,a)).elementType=C,e.lanes=i,e;case A:return(e=Pu(19,t,n,a)).elementType=A,e.lanes=i,e;case M:return Du(t,a,i,n);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case O:s=9;break e;case T:s=11;break e;case F:s=14;break e;case P:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(n=Pu(s,t,n,a)).elementType=e,n.type=r,n.lanes=i,n}function Ru(e,n,t,r){return(e=Pu(7,e,r,n)).lanes=t,e}function Du(e,n,t,r){return(e=Pu(22,e,r,n)).elementType=M,e.lanes=t,e.stateNode={isHidden:!1},e}function ju(e,n,t){return(e=Pu(6,e,null,n)).lanes=t,e}function Bu(e,n,t){return(n=Pu(4,null!==e.children?e.children:[],e.key,n)).lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function zu(e,n,t,r,a){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yn(0),this.expirationTimes=yn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yn(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Uu(e,n,t,r,a,o,i,s,c){return e=new zu(e,n,t,s,c),1===n?(n=1,!0===o&&(n|=8)):n=0,o=Pu(3,null,null,n),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Po(o),e}function Vu(e){if(!e)return Oa;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Pa(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(null!==n);throw Error(o(171))}if(1===e.tag){var t=e.type;if(Pa(t))return La(e,t,n)}return n}function Wu(e,n,t,r,a,o,i,s,c){return(e=Uu(t,r,!0,e,0,o,0,s,c)).context=Vu(null),t=e.current,(o=No(r=nu(),a=tu(t))).callback=void 0!==n&&null!==n?n:null,Lo(t,o,a),e.current.lanes=a,vn(e,a,r),au(e,r),e}function Gu(e,n,t,r){var a=n.current,o=nu(),i=tu(a);return t=Vu(t),null===n.context?n.context=t:n.pendingContext=t,(n=No(o,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(n.callback=r),null!==(e=Lo(a,n,i))&&(ru(e,a,i,o),Ro(e,a,i)),i}function $u(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Ku(e,n){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var t=e.retryLane;e.retryLane=0!==t&&t<n?t:n}}function qu(e,n){Ku(e,n),(e=e.alternate)&&Ku(e,n)}xc=function(e,n,t){if(null!==e)if(e.memoizedProps!==n.pendingProps||Ca.current)Ss=!0;else{if(0===(e.lanes&t)&&0===(128&n.flags))return Ss=!1,function(e,n,t){switch(n.tag){case 3:As(n),mo();break;case 5:ii(n);break;case 1:Pa(n.type)&&Ra(n);break;case 4:ai(n,n.stateNode.containerInfo);break;case 10:var r=n.type._context,a=n.memoizedProps.value;Ea(vo,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=n.memoizedState))return null!==r.dehydrated?(Ea(ci,1&ci.current),n.flags|=128,null):0!==(t&n.child.childLanes)?js(e,n,t):(Ea(ci,1&ci.current),null!==(e=$s(e,n,t))?e.sibling:null);Ea(ci,1&ci.current);break;case 19:if(r=0!==(t&n.childLanes),0!==(128&e.flags)){if(r)return Ws(e,n,t);n.flags|=128}if(null!==(a=n.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Ea(ci,ci.current),r)break;return null;case 22:case 23:return n.lanes=0,Is(e,n,t)}return $s(e,n,t)}(e,n,t);Ss=0!==(131072&e.flags)}else Ss=!1,ao&&0!==(1048576&n.flags)&&Za(n,Ka,n.index);switch(n.lanes=0,n.tag){case 2:var r=n.type;Gs(e,n),e=n.pendingProps;var a=Fa(n,Ta.current);Io(n,t),a=xi(null,n,r,e,a,t);var i=Ii();return n.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Pa(r)?(i=!0,Ra(n)):i=!1,n.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,Po(n),a.updater=Vo,n.stateNode=a,a._reactInternals=n,Ko(n,r,e,t),n=Cs(null,n,r,!0,i,t)):(n.tag=0,ao&&i&&eo(n),ws(null,n,a,t),n=n.child),n;case 16:r=n.elementType;e:{switch(Gs(e,n),e=n.pendingProps,r=(a=r._init)(r._payload),n.type=r,a=n.tag=function(e){if("function"===typeof e)return Mu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===F)return 14}return 2}(r),e=yo(r,e),a){case 0:n=Os(null,n,r,e,t);break e;case 1:n=Ts(null,n,r,e,t);break e;case 11:n=_s(null,n,r,e,t);break e;case 14:n=ks(null,n,r,yo(r.type,e),t);break e}throw Error(o(306,r,""))}return n;case 0:return r=n.type,a=n.pendingProps,Os(e,n,r,a=n.elementType===r?a:yo(r,a),t);case 1:return r=n.type,a=n.pendingProps,Ts(e,n,r,a=n.elementType===r?a:yo(r,a),t);case 3:e:{if(As(n),null===e)throw Error(o(387));r=n.pendingProps,a=(i=n.memoizedState).element,Mo(e,n),jo(n,r,null,t);var s=n.memoizedState;if(r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},n.updateQueue.baseState=i,n.memoizedState=i,256&n.flags){n=Fs(e,n,r,t,a=ls(Error(o(423)),n));break e}if(r!==a){n=Fs(e,n,r,t,a=ls(Error(o(424)),n));break e}for(ro=ua(n.stateNode.containerInfo.firstChild),to=n,ao=!0,oo=null,t=Qo(n,null,r,t),n.child=t;t;)t.flags=-3&t.flags|4096,t=t.sibling}else{if(mo(),r===a){n=$s(e,n,t);break e}ws(e,n,r,t)}n=n.child}return n;case 5:return ii(n),null===e&&uo(n),r=n.type,a=n.pendingProps,i=null!==e?e.memoizedProps:null,s=a.children,ta(r,a)?s=null:null!==i&&ta(r,i)&&(n.flags|=32),Es(e,n),ws(e,n,s,t),n.child;case 6:return null===e&&uo(n),null;case 13:return js(e,n,t);case 4:return ai(n,n.stateNode.containerInfo),r=n.pendingProps,null===e?n.child=Jo(n,null,r,t):ws(e,n,r,t),n.child;case 11:return r=n.type,a=n.pendingProps,_s(e,n,r,a=n.elementType===r?a:yo(r,a),t);case 7:return ws(e,n,n.pendingProps,t),n.child;case 8:case 12:return ws(e,n,n.pendingProps.children,t),n.child;case 10:e:{if(r=n.type._context,a=n.pendingProps,i=n.memoizedProps,s=a.value,Ea(vo,r._currentValue),r._currentValue=s,null!==i)if(sr(i.value,s)){if(i.children===a.children&&!Ca.current){n=$s(e,n,t);break e}}else for(null!==(i=n.child)&&(i.return=n);null!==i;){var c=i.dependencies;if(null!==c){s=i.child;for(var u=c.firstContext;null!==u;){if(u.context===r){if(1===i.tag){(u=No(-1,t&-t)).tag=2;var l=i.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?u.next=u:(u.next=f.next,f.next=u),l.pending=u}}i.lanes|=t,null!==(u=i.alternate)&&(u.lanes|=t),xo(i.return,t,n),c.lanes|=t;break}u=u.next}}else if(10===i.tag)s=i.type===n.type?null:i.child;else if(18===i.tag){if(null===(s=i.return))throw Error(o(341));s.lanes|=t,null!==(c=s.alternate)&&(c.lanes|=t),xo(s,t,n),s=i.sibling}else s=i.child;if(null!==s)s.return=i;else for(s=i;null!==s;){if(s===n){s=null;break}if(null!==(i=s.sibling)){i.return=s.return,s=i;break}s=s.return}i=s}ws(e,n,a.children,t),n=n.child}return n;case 9:return a=n.type,r=n.pendingProps.children,Io(n,t),r=r(a=Eo(a)),n.flags|=1,ws(e,n,r,t),n.child;case 14:return a=yo(r=n.type,n.pendingProps),ks(e,n,r,a=yo(r.type,a),t);case 15:return xs(e,n,n.type,n.pendingProps,t);case 17:return r=n.type,a=n.pendingProps,a=n.elementType===r?a:yo(r,a),Gs(e,n),n.tag=1,Pa(r)?(e=!0,Ra(n)):e=!1,Io(n,t),Go(n,r,a),Ko(n,r,a,t),Cs(null,n,r,!0,e,t);case 19:return Ws(e,n,t);case 22:return Is(e,n,t)}throw Error(o(156,n.tag))};var Hu="function"===typeof reportError?reportError:function(e){console.error(e)};function Xu(e){this._internalRoot=e}function Yu(e){this._internalRoot=e}function Ju(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zu(){}function el(e,n,t,r,a){var o=t._reactRootContainer;if(o){var i=o;if("function"===typeof a){var s=a;a=function(){var e=$u(i);s.call(e)}}Gu(n,i,e,a)}else i=function(e,n,t,r,a){if(a){if("function"===typeof r){var o=r;r=function(){var e=$u(i);o.call(e)}}var i=Wu(n,r,e,0,null,!1,0,"",Zu);return e._reactRootContainer=i,e[ma]=i.current,Vr(8===e.nodeType?e.parentNode:e),fu(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var s=r;r=function(){var e=$u(c);s.call(e)}}var c=Uu(e,0,!1,null,0,!1,0,"",Zu);return e._reactRootContainer=c,e[ma]=c.current,Vr(8===e.nodeType?e.parentNode:e),fu((function(){Gu(n,c,t,r)})),c}(t,n,e,a,r);return $u(i)}Yu.prototype.render=Xu.prototype.render=function(e){var n=this._internalRoot;if(null===n)throw Error(o(409));Gu(e,n,null,null)},Yu.prototype.unmount=Xu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var n=e.containerInfo;fu((function(){Gu(null,e,null,null)})),n[ma]=null}},Yu.prototype.unstable_scheduleHydration=function(e){if(e){var n=In();e={blockedOn:null,target:e,priority:n};for(var t=0;t<Nn.length&&0!==n&&n<Nn[t].priority;t++);Nn.splice(t,0,e),0===t&&jn(e)}},_n=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var t=dn(n.pendingLanes);0!==t&&(bn(n,1|t),au(n,Je()),0===(6&Cc)&&(Wc=Je()+500,Va()))}break;case 13:fu((function(){var n=Ao(e,1);if(null!==n){var t=nu();ru(n,e,1,t)}})),qu(e,1)}},kn=function(e){if(13===e.tag){var n=Ao(e,134217728);if(null!==n)ru(n,e,134217728,nu());qu(e,134217728)}},xn=function(e){if(13===e.tag){var n=tu(e),t=Ao(e,n);if(null!==t)ru(t,e,n,nu());qu(e,n)}},In=function(){return Sn},En=function(e,n){var t=Sn;try{return Sn=e,n()}finally{Sn=t}},_e=function(e,n,t){switch(n){case"input":if(Q(e,t),n=t.name,"radio"===t.type&&null!=n){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<t.length;n++){var r=t[n];if(r!==e&&r.form===e.form){var a=wa(r);if(!a)throw Error(o(90));q(r),Q(r,a)}}}break;case"textarea":oe(e,t);break;case"select":null!=(n=t.value)&&te(e,!!t.multiple,n,!1)}},Te=lu,Ce=fu;var nl={usingClientEntryPoint:!1,Events:[ba,Sa,wa,Ee,Oe,lu]},tl={findFiberByHostInstance:va,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:S.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$e(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!al.isDisabled&&al.supportsFiber)try{an=al.inject(rl),on=al}catch(le){}}n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nl,n.createPortal=function(e,n){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ju(n))throw Error(o(200));return function(e,n,t){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:n,implementation:t}}(e,n,null,t)},n.createRoot=function(e,n){if(!Ju(e))throw Error(o(299));var t=!1,r="",a=Hu;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(t=!0),void 0!==n.identifierPrefix&&(r=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),n=Uu(e,1,!1,null,0,t,0,r,a),e[ma]=n.current,Vr(8===e.nodeType?e.parentNode:e),new Xu(n)},n.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var n=e._reactInternals;if(void 0===n){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=$e(n))?null:e.stateNode},n.flushSync=function(e){return fu(e)},n.hydrate=function(e,n,t){if(!Qu(n))throw Error(o(200));return el(null,e,n,!0,t)},n.hydrateRoot=function(e,n,t){if(!Ju(e))throw Error(o(405));var r=null!=t&&t.hydratedSources||null,a=!1,i="",s=Hu;if(null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(a=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),n=Wu(n,null,e,1,null!=t?t:null,a,0,i,s),e[ma]=n.current,Vr(e),r)for(e=0;e<r.length;e++)a=(a=(t=r[e])._getVersion)(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,a]:n.mutableSourceEagerHydrationData.push(t,a);return new Yu(n)},n.render=function(e,n,t){if(!Qu(n))throw Error(o(200));return el(null,e,n,!1,t)},n.unmountComponentAtNode=function(e){if(!Qu(e))throw Error(o(40));return!!e._reactRootContainer&&(fu((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[ma]=null}))})),!0)},n.unstable_batchedUpdates=lu,n.unstable_renderSubtreeIntoContainer=function(e,n,t,r){if(!Qu(t))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return el(e,n,t,!1,r)},n.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,n,t){"use strict";var r=t(164);n.createRoot=r.createRoot,n.hydrateRoot=r.hydrateRoot},164:function(e,n,t){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}(),e.exports=t(463)},372:function(e,n){"use strict";var t,r=Symbol.for("react.element"),a=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),u=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen");function y(e){if("object"===typeof e&&null!==e){var n=e.$$typeof;switch(n){case r:switch(e=e.type){case o:case s:case i:case d:case p:return e;default:switch(e=e&&e.$$typeof){case l:case u:case f:case h:case m:case c:return e;default:return n}}case a:return n}}}t=Symbol.for("react.module.reference"),n.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===o||e===s||e===i||e===d||e===p||e===g||"object"===typeof e&&null!==e&&(e.$$typeof===h||e.$$typeof===m||e.$$typeof===c||e.$$typeof===u||e.$$typeof===f||e.$$typeof===t||void 0!==e.getModuleId)},n.typeOf=y},441:function(e,n,t){"use strict";e.exports=t(372)},374:function(e,n,t){"use strict";var r=t(791),a=Symbol.for("react.element"),o=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,n,t){var r,o={},u=null,l=null;for(r in void 0!==t&&(u=""+t),void 0!==n.key&&(u=""+n.key),void 0!==n.ref&&(l=n.ref),n)i.call(n,r)&&!c.hasOwnProperty(r)&&(o[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps)void 0===o[r]&&(o[r]=n[r]);return{$$typeof:a,type:e,key:u,ref:l,props:o,_owner:s.current}}n.Fragment=o,n.jsx=u,n.jsxs=u},117:function(e,n){"use strict";var t=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,g={};function y(e,n,t){this.props=e,this.context=n,this.refs=g,this.updater=t||m}function v(){}function b(e,n,t){this.props=e,this.context=n,this.refs=g,this.updater=t||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,n){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var S=b.prototype=new v;S.constructor=b,h(S,y.prototype),S.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function I(e,n,r){var a,o={},i=null,s=null;if(null!=n)for(a in void 0!==n.ref&&(s=n.ref),void 0!==n.key&&(i=""+n.key),n)_.call(n,a)&&!x.hasOwnProperty(a)&&(o[a]=n[a]);var c=arguments.length-2;if(1===c)o.children=r;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(a in c=e.defaultProps)void 0===o[a]&&(o[a]=c[a]);return{$$typeof:t,type:e,key:i,ref:s,props:o,_owner:k.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===t}var O=/\/+/g;function T(e,n){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return n[e]}))}(""+e.key):n.toString(36)}function C(e,n,a,o,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case t:case r:c=!0}}if(c)return i=i(c=e),e=""===o?"."+T(c,0):o,w(i)?(a="",null!=e&&(a=e.replace(O,"$&/")+"/"),C(i,n,a,"",(function(e){return e}))):null!=i&&(E(i)&&(i=function(e,n){return{$$typeof:t,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||c&&c.key===i.key?"":(""+i.key).replace(O,"$&/")+"/")+e)),n.push(i)),1;if(c=0,o=""===o?".":o+":",w(e))for(var u=0;u<e.length;u++){var l=o+T(s=e[u],u);c+=C(s,n,a,l,i)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),u=0;!(s=e.next()).done;)c+=C(s=s.value,n,a,l=o+T(s,u++),i);else if("object"===s)throw n=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return c}function A(e,n,t){if(null==e)return e;var r=[],a=0;return C(e,r,"","",(function(e){return n.call(t,e,a++)})),r}function F(e){if(-1===e._status){var n=e._result;(n=n()).then((function(n){0!==e._status&&-1!==e._status||(e._status=1,e._result=n)}),(function(n){0!==e._status&&-1!==e._status||(e._status=2,e._result=n)})),-1===e._status&&(e._status=0,e._result=n)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},M={transition:null},N={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:M,ReactCurrentOwner:k};n.Children={map:A,forEach:function(e,n,t){A(e,(function(){n.apply(this,arguments)}),t)},count:function(e){var n=0;return A(e,(function(){n++})),n},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},n.Component=y,n.Fragment=a,n.Profiler=i,n.PureComponent=b,n.StrictMode=o,n.Suspense=l,n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,n.cloneElement=function(e,n,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=h({},e.props),o=e.key,i=e.ref,s=e._owner;if(null!=n){if(void 0!==n.ref&&(i=n.ref,s=k.current),void 0!==n.key&&(o=""+n.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in n)_.call(n,u)&&!x.hasOwnProperty(u)&&(a[u]=void 0===n[u]&&void 0!==c?c[u]:n[u])}var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){c=Array(u);for(var l=0;l<u;l++)c[l]=arguments[l+2];a.children=c}return{$$typeof:t,type:e.type,key:o,ref:i,props:a,_owner:s}},n.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},n.createElement=I,n.createFactory=function(e){var n=I.bind(null,e);return n.type=e,n},n.createRef=function(){return{current:null}},n.forwardRef=function(e){return{$$typeof:u,render:e}},n.isValidElement=E,n.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:F}},n.memo=function(e,n){return{$$typeof:f,type:e,compare:void 0===n?null:n}},n.startTransition=function(e){var n=M.transition;M.transition={};try{e()}finally{M.transition=n}},n.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},n.useCallback=function(e,n){return P.current.useCallback(e,n)},n.useContext=function(e){return P.current.useContext(e)},n.useDebugValue=function(){},n.useDeferredValue=function(e){return P.current.useDeferredValue(e)},n.useEffect=function(e,n){return P.current.useEffect(e,n)},n.useId=function(){return P.current.useId()},n.useImperativeHandle=function(e,n,t){return P.current.useImperativeHandle(e,n,t)},n.useInsertionEffect=function(e,n){return P.current.useInsertionEffect(e,n)},n.useLayoutEffect=function(e,n){return P.current.useLayoutEffect(e,n)},n.useMemo=function(e,n){return P.current.useMemo(e,n)},n.useReducer=function(e,n,t){return P.current.useReducer(e,n,t)},n.useRef=function(e){return P.current.useRef(e)},n.useState=function(e){return P.current.useState(e)},n.useSyncExternalStore=function(e,n,t){return P.current.useSyncExternalStore(e,n,t)},n.useTransition=function(){return P.current.useTransition()},n.version="18.2.0"},791:function(e,n,t){"use strict";e.exports=t(117)},184:function(e,n,t){"use strict";e.exports=t(374)},457:function(e,n,t){"use strict";n.Z=void 0;var r,a=t(588),o=(r=t(936))&&r.__esModule?r:{default:r};function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e){var n,t=e.store,r=e.params,i=e.replaceState,s=e.initialTruth,c=e.history,u=void 0===c?(0,a.createBrowserHistory)():c,l=t.dispatch,f=!1,d=!1;function p(e){return Object.hasOwnProperty.call(e,"location")?e.location:Object.hasOwnProperty.call(e,"getCurrentLocation")?e.getCurrentLocation():void 0}function m(e){var n=new o.default(e.search),t={};return Object.keys(r).forEach((function(e){var a=r[e],o=a.defaultValue,i=a.stringToValue,s=void 0===i?function(e){return e}:i,c=n.get(e),u=null===c?o:s(c);t[e]=u})),t}function h(e){if(void 0!==e.location&&(e=e.location),!f){var a=t.getState(),o=m(e),i=[];Object.keys(o).forEach((function(e){var t=o[e];if(void 0===n||n[e]!==t){var s=r[e],c=s.selector,u=s.action;c(a)!==t&&i.push(u(t))}})),n=o,d=!0,i.forEach((function(e){l(e)})),d=!1,g({replaceState:!0})}}function g(e){var a=e.replaceState;if(!d){var i=t.getState(),s=p(u),c=new o.default(s.search);Object.keys(r).forEach((function(e){var t=r[e],a=t.selector,o=t.defaultValue,s=t.valueToString,u=void 0===s?function(e){return"".concat(e)}:s,l=a(i);l===o?c.delete(e):c.set(e,u(l)),n[e]=l}));var l="?".concat(c);if(l!==(s.search||"?")){f=!0;var m={pathname:s.pathname,search:l,hash:s.hash,state:s.state};a?u.replace(m):u.push(m),f=!1}}}var y=u.listen(h),v=t.subscribe((function(){return g({replaceState:i})}));return"location"===s?h(p(u)):n=m(p(u)),"store"===s&&g({replaceState:!0}),function(){y(),v()}}c.enhancer=function(e){return function(n){return function(t,r,a){var o=n(t,r,a);return c(function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(t,!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(t).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}({store:o},e)),o}}};var u=c;n.Z=u},813:function(e,n){"use strict";function t(e,n){var t=e.length;e.push(n);e:for(;0<t;){var r=t-1>>>1,a=e[r];if(!(0<o(a,n)))break e;e[r]=n,e[t]=a,t=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var n=e[0],t=e.pop();if(t!==n){e[0]=t;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var s=2*(r+1)-1,c=e[s],u=s+1,l=e[u];if(0>o(c,t))u<a&&0>o(l,c)?(e[r]=l,e[u]=t,r=u):(e[r]=c,e[s]=t,r=s);else{if(!(u<a&&0>o(l,t)))break e;e[r]=l,e[u]=t,r=u}}}return n}function o(e,n){var t=e.sortIndex-n.sortIndex;return 0!==t?t:e.id-n.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;n.unstable_now=function(){return i.now()}}else{var s=Date,c=s.now();n.unstable_now=function(){return s.now()-c}}var u=[],l=[],f=1,d=null,p=3,m=!1,h=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function S(e){for(var n=r(l);null!==n;){if(null===n.callback)a(l);else{if(!(n.startTime<=e))break;a(l),n.sortIndex=n.expirationTime,t(u,n)}n=r(l)}}function w(e){if(g=!1,S(e),!h)if(null!==r(u))h=!0,M(_);else{var n=r(l);null!==n&&N(w,n.startTime-e)}}function _(e,t){h=!1,g&&(g=!1,v(E),E=-1),m=!0;var o=p;try{for(S(t),d=r(u);null!==d&&(!(d.expirationTime>t)||e&&!C());){var i=d.callback;if("function"===typeof i){d.callback=null,p=d.priorityLevel;var s=i(d.expirationTime<=t);t=n.unstable_now(),"function"===typeof s?d.callback=s:d===r(u)&&a(u),S(t)}else a(u);d=r(u)}if(null!==d)var c=!0;else{var f=r(l);null!==f&&N(w,f.startTime-t),c=!1}return c}finally{d=null,p=o,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,x=!1,I=null,E=-1,O=5,T=-1;function C(){return!(n.unstable_now()-T<O)}function A(){if(null!==I){var e=n.unstable_now();T=e;var t=!0;try{t=I(!0,e)}finally{t?k():(x=!1,I=null)}}else x=!1}if("function"===typeof b)k=function(){b(A)};else if("undefined"!==typeof MessageChannel){var F=new MessageChannel,P=F.port2;F.port1.onmessage=A,k=function(){P.postMessage(null)}}else k=function(){y(A,0)};function M(e){I=e,x||(x=!0,k())}function N(e,t){E=y((function(){e(n.unstable_now())}),t)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(e){e.callback=null},n.unstable_continueExecution=function(){h||m||(h=!0,M(_))},n.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<e?Math.floor(1e3/e):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return r(u)},n.unstable_next=function(e){switch(p){case 1:case 2:case 3:var n=3;break;default:n=p}var t=p;p=n;try{return e()}finally{p=t}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(e,n){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var t=p;p=e;try{return n()}finally{p=t}},n.unstable_scheduleCallback=function(e,a,o){var i=n.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?i+o:i:o=i,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:f++,callback:a,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>i?(e.sortIndex=o,t(l,e),null===r(u)&&e===r(l)&&(g?(v(E),E=-1):g=!0,N(w,o-i))):(e.sortIndex=s,t(u,e),h||m||(h=!0,M(_))),e},n.unstable_shouldYield=C,n.unstable_wrapCallback=function(e){var n=p;return function(){var t=p;p=n;try{return e.apply(this,arguments)}finally{p=t}}}},296:function(e,n,t){"use strict";e.exports=t(813)},613:function(e){e.exports=function(e,n,t,r){var a=t?t.call(r,e,n):void 0;if(void 0!==a)return!!a;if(e===n)return!0;if("object"!==typeof e||!e||"object"!==typeof n||!n)return!1;var o=Object.keys(e),i=Object.keys(n);if(o.length!==i.length)return!1;for(var s=Object.prototype.hasOwnProperty.bind(n),c=0;c<o.length;c++){var u=o[c];if(!s(u))return!1;var l=e[u],f=n[u];if(!1===(a=t?t.call(r,l,f,u):void 0)||void 0===a&&l!==f)return!1}return!0}},561:function(e,n,t){"use strict";var r=t(791);var a="function"===typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e===1/n)||e!==e&&n!==n},o=r.useState,i=r.useEffect,s=r.useLayoutEffect,c=r.useDebugValue;function u(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!a(e,t)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,n){return n()}:function(e,n){var t=n(),r=o({inst:{value:t,getSnapshot:n}}),a=r[0].inst,l=r[1];return s((function(){a.value=t,a.getSnapshot=n,u(a)&&l({inst:a})}),[e,t,n]),i((function(){return u(a)&&l({inst:a}),e((function(){u(a)&&l({inst:a})}))}),[e]),c(t),t};n.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,n,t){"use strict";var r=t(791),a=t(248);var o="function"===typeof Object.is?Object.is:function(e,n){return e===n&&(0!==e||1/e===1/n)||e!==e&&n!==n},i=a.useSyncExternalStore,s=r.useRef,c=r.useEffect,u=r.useMemo,l=r.useDebugValue;n.useSyncExternalStoreWithSelector=function(e,n,t,r,a){var f=s(null);if(null===f.current){var d={hasValue:!1,value:null};f.current=d}else d=f.current;f=u((function(){function e(e){if(!c){if(c=!0,i=e,e=r(e),void 0!==a&&d.hasValue){var n=d.value;if(a(n,e))return s=n}return s=e}if(n=s,o(i,e))return n;var t=r(e);return void 0!==a&&a(n,t)?n:(i=e,s=t)}var i,s,c=!1,u=void 0===t?null:t;return[function(){return e(n())},null===u?void 0:function(){return e(u())}]}),[n,t,r,a]);var p=i(e,f[0],f[1]);return c((function(){d.hasValue=!0,d.value=p}),[p]),l(p),p}},248:function(e,n,t){"use strict";e.exports=t(561)},327:function(e,n,t){"use strict";e.exports=t(595)},462:function(e,n,t){"use strict";function r(){return r=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},r.apply(this,arguments)}t.d(n,{Z:function(){return r}})}},n={};function t(r){var a=n[r];if(void 0!==a)return a.exports;var o=n[r]={exports:{}};return e[r](o,o.exports,t),o.exports}t.m=e,t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,{a:n}),n},t.d=function(e,n){for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(n,r){return t.f[r](e,n),n}),[]))},t.u=function(e){return"static/js/"+e+".915ad66d.chunk.js"},t.miniCssF=function(e){},t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},function(){var e={},n="webpd_website:";t.l=function(r,a,o,i){if(e[r])e[r].push(a);else{var s,c;if(void 0!==o)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var f=u[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==n+o){s=f;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,t.nc&&s.setAttribute("nonce",t.nc),s.setAttribute("data-webpack",n+o),s.src=r),e[r]=[a];var d=function(n,t){s.onerror=s.onload=null,clearTimeout(p);var a=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(t)})),n)return n(t)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.p="./",function(){var e={179:0};t.f.j=function(n,r){var a=t.o(e,n)?e[n]:void 0;if(0!==a)if(a)r.push(a[2]);else{var o=new Promise((function(t,r){a=e[n]=[t,r]}));r.push(a[2]=o);var i=t.p+t.u(n),s=new Error;t.l(i,(function(r){if(t.o(e,n)&&(0!==(a=e[n])&&(e[n]=void 0),a)){var o=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.src;s.message="Loading chunk "+n+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,a[1](s)}}),"chunk-"+n,n)}};var n=function(n,r){var a,o,i=r[0],s=r[1],c=r[2],u=0;if(i.some((function(n){return 0!==e[n]}))){for(a in s)t.o(s,a)&&(t.m[a]=s[a]);if(c)c(t)}for(n&&n(r);u<i.length;u++)o=i[u],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkwebpd_website=self.webpackChunkwebpd_website||[];r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r))}(),t.nc=void 0,function(){"use strict";var e={};t.r(e),t.d(e,{getInlet:function(){return hi},getNode:function(){return mi},getOutlet:function(){return gi},getSinks:function(){return yi},getSources:function(){return vi}});var n={};t.r(n),t.d(n,{listConnectionsIn:function(){return ki},listConnectionsOut:function(){return xi},messageNodes:function(){return wi},removeDeadSinks:function(){return Ei},removeDeadSources:function(){return Oi},signalNodes:function(){return bi},trimGraph:function(){return Ii}});var r={};t.r(r),t.d(r,{endpointsEqual:function(){return ys},testGraphIntegrity:function(){return vs}});var a={};t.r(a),t.d(a,{addNode:function(){return bs},connect:function(){return Ss},deleteNode:function(){return ks},disconnect:function(){return ws},disconnectNodes:function(){return _s}});var o=t(791),i=t(250);function s(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}var c=t(441),u=t(613),l=t.n(u);var f=function(e){function n(e,r,c,u,d){for(var p,m,h,g,S,_=0,k=0,x=0,I=0,E=0,P=0,N=h=p=0,R=0,D=0,j=0,B=0,z=c.length,U=z-1,V="",W="",G="",$="";R<z;){if(m=c.charCodeAt(R),R===U&&0!==k+I+x+_&&(0!==k&&(m=47===k?10:47),I=x=_=0,z++,U++),0===k+I+x+_){if(R===U&&(0<D&&(V=V.replace(f,"")),0<V.trim().length)){switch(m){case 32:case 9:case 59:case 13:case 10:break;default:V+=c.charAt(R)}m=59}switch(m){case 123:for(p=(V=V.trim()).charCodeAt(0),h=1,B=++R;R<z;){switch(m=c.charCodeAt(R)){case 123:h++;break;case 125:h--;break;case 47:switch(m=c.charCodeAt(R+1)){case 42:case 47:e:{for(N=R+1;N<U;++N)switch(c.charCodeAt(N)){case 47:if(42===m&&42===c.charCodeAt(N-1)&&R+2!==N){R=N+1;break e}break;case 10:if(47===m){R=N+1;break e}}R=N}}break;case 91:m++;case 40:m++;case 34:case 39:for(;R++<U&&c.charCodeAt(R)!==m;);}if(0===h)break;R++}if(h=c.substring(B,R),0===p&&(p=(V=V.replace(l,"").trim()).charCodeAt(0)),64===p){switch(0<D&&(V=V.replace(f,"")),m=V.charCodeAt(1)){case 100:case 109:case 115:case 45:D=r;break;default:D=F}if(B=(h=n(r,D,h,m,d+1)).length,0<M&&(S=s(3,h,D=t(F,V,j),r,T,O,B,m,d,u),V=D.join(""),void 0!==S&&0===(B=(h=S.trim()).length)&&(m=0,h="")),0<B)switch(m){case 115:V=V.replace(w,i);case 100:case 109:case 45:h=V+"{"+h+"}";break;case 107:h=(V=V.replace(y,"$1 $2"))+"{"+h+"}",h=1===A||2===A&&o("@"+h,3)?"@-webkit-"+h+"@"+h:"@"+h;break;default:h=V+h,112===u&&(W+=h,h="")}else h=""}else h=n(r,t(r,V,j),h,u,d+1);G+=h,h=j=D=N=p=0,V="",m=c.charCodeAt(++R);break;case 125:case 59:if(1<(B=(V=(0<D?V.replace(f,""):V).trim()).length))switch(0===N&&(p=V.charCodeAt(0),45===p||96<p&&123>p)&&(B=(V=V.replace(" ",":")).length),0<M&&void 0!==(S=s(1,V,r,e,T,O,W.length,u,d,u))&&0===(B=(V=S.trim()).length)&&(V="\0\0"),p=V.charCodeAt(0),m=V.charCodeAt(1),p){case 0:break;case 64:if(105===m||99===m){$+=V+c.charAt(R);break}default:58!==V.charCodeAt(B-1)&&(W+=a(V,p,m,V.charCodeAt(2)))}j=D=N=p=0,V="",m=c.charCodeAt(++R)}}switch(m){case 13:case 10:47===k?k=0:0===1+p&&107!==u&&0<V.length&&(D=1,V+="\0"),0<M*L&&s(0,V,r,e,T,O,W.length,u,d,u),O=1,T++;break;case 59:case 125:if(0===k+I+x+_){O++;break}default:switch(O++,g=c.charAt(R),m){case 9:case 32:if(0===I+_+k)switch(E){case 44:case 58:case 9:case 32:g="";break;default:32!==m&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===I+k+_&&(D=j=1,g="\f"+g);break;case 108:if(0===I+k+_+C&&0<N)switch(R-N){case 2:112===E&&58===c.charCodeAt(R-3)&&(C=E);case 8:111===P&&(C=P)}break;case 58:0===I+k+_&&(N=R);break;case 44:0===k+x+I+_&&(D=1,g+="\r");break;case 34:case 39:0===k&&(I=I===m?0:0===I?m:I);break;case 91:0===I+k+x&&_++;break;case 93:0===I+k+x&&_--;break;case 41:0===I+k+_&&x--;break;case 40:if(0===I+k+_){if(0===p)if(2*E+3*P===533);else p=1;x++}break;case 64:0===k+x+I+_+N+h&&(h=1);break;case 42:case 47:if(!(0<I+_+x))switch(k){case 0:switch(2*m+3*c.charCodeAt(R+1)){case 235:k=47;break;case 220:B=R,k=42}break;case 42:47===m&&42===E&&B+2!==R&&(33===c.charCodeAt(B+2)&&(W+=c.substring(B,R+1)),g="",k=0)}}0===k&&(V+=g)}P=E,E=m,R++}if(0<(B=W.length)){if(D=r,0<M&&(void 0!==(S=s(2,W,D,e,T,O,B,u,d,u))&&0===(W=S).length))return $+W+G;if(W=D.join(",")+"{"+W+"}",0!==A*C){switch(2!==A||o(W,2)||(C=0),C){case 111:W=W.replace(b,":-moz-$1")+W;break;case 112:W=W.replace(v,"::-webkit-input-$1")+W.replace(v,"::-moz-$1")+W.replace(v,":-ms-input-$1")+W}C=0}}return $+W+G}function t(e,n,t){var a=n.trim().split(h);n=a;var o=a.length,i=e.length;switch(i){case 0:case 1:var s=0;for(e=0===i?"":e[0]+" ";s<o;++s)n[s]=r(e,n[s],t).trim();break;default:var c=s=0;for(n=[];s<o;++s)for(var u=0;u<i;++u)n[c++]=r(e[u]+" ",a[s],t).trim()}return n}function r(e,n,t){var r=n.charCodeAt(0);switch(33>r&&(r=(n=n.trim()).charCodeAt(0)),r){case 38:return n.replace(g,"$1"+e.trim());case 58:return e.trim()+n.replace(g,"$1"+e.trim());default:if(0<1*t&&0<n.indexOf("\f"))return n.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+n}function a(e,n,t,r){var i=e+";",s=2*n+3*t+4*r;if(944===s){e=i.indexOf(":",9)+1;var c=i.substring(e,i.length-1).trim();return c=i.substring(0,e).trim()+c+";",1===A||2===A&&o(c,1)?"-webkit-"+c+c:c}if(0===A||2===A&&!o(i,1))return i;switch(s){case 1015:return 97===i.charCodeAt(10)?"-webkit-"+i+i:i;case 951:return 116===i.charCodeAt(3)?"-webkit-"+i+i:i;case 963:return 110===i.charCodeAt(5)?"-webkit-"+i+i:i;case 1009:if(100!==i.charCodeAt(4))break;case 969:case 942:return"-webkit-"+i+i;case 978:return"-webkit-"+i+"-moz-"+i+i;case 1019:case 983:return"-webkit-"+i+"-moz-"+i+"-ms-"+i+i;case 883:if(45===i.charCodeAt(8))return"-webkit-"+i+i;if(0<i.indexOf("image-set(",11))return i.replace(E,"$1-webkit-$2")+i;break;case 932:if(45===i.charCodeAt(4))switch(i.charCodeAt(5)){case 103:return"-webkit-box-"+i.replace("-grow","")+"-webkit-"+i+"-ms-"+i.replace("grow","positive")+i;case 115:return"-webkit-"+i+"-ms-"+i.replace("shrink","negative")+i;case 98:return"-webkit-"+i+"-ms-"+i.replace("basis","preferred-size")+i}return"-webkit-"+i+"-ms-"+i+i;case 964:return"-webkit-"+i+"-ms-flex-"+i+i;case 1023:if(99!==i.charCodeAt(8))break;return"-webkit-box-pack"+(c=i.substring(i.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+i+"-ms-flex-pack"+c+i;case 1005:return p.test(i)?i.replace(d,":-webkit-")+i.replace(d,":-moz-")+i:i;case 1e3:switch(n=(c=i.substring(13).trim()).indexOf("-")+1,c.charCodeAt(0)+c.charCodeAt(n)){case 226:c=i.replace(S,"tb");break;case 232:c=i.replace(S,"tb-rl");break;case 220:c=i.replace(S,"lr");break;default:return i}return"-webkit-"+i+"-ms-"+c+i;case 1017:if(-1===i.indexOf("sticky",9))break;case 975:switch(n=(i=e).length-10,s=(c=(33===i.charCodeAt(n)?i.substring(0,n):i).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|c.charCodeAt(7))){case 203:if(111>c.charCodeAt(8))break;case 115:i=i.replace(c,"-webkit-"+c)+";"+i;break;case 207:case 102:i=i.replace(c,"-webkit-"+(102<s?"inline-":"")+"box")+";"+i.replace(c,"-webkit-"+c)+";"+i.replace(c,"-ms-"+c+"box")+";"+i}return i+";";case 938:if(45===i.charCodeAt(5))switch(i.charCodeAt(6)){case 105:return c=i.replace("-items",""),"-webkit-"+i+"-webkit-box-"+c+"-ms-flex-"+c+i;case 115:return"-webkit-"+i+"-ms-flex-item-"+i.replace(k,"")+i;default:return"-webkit-"+i+"-ms-flex-line-pack"+i.replace("align-content","").replace(k,"")+i}break;case 973:case 989:if(45!==i.charCodeAt(3)||122===i.charCodeAt(4))break;case 931:case 953:if(!0===I.test(e))return 115===(c=e.substring(e.indexOf(":")+1)).charCodeAt(0)?a(e.replace("stretch","fill-available"),n,t,r).replace(":fill-available",":stretch"):i.replace(c,"-webkit-"+c)+i.replace(c,"-moz-"+c.replace("fill-",""))+i;break;case 962:if(i="-webkit-"+i+(102===i.charCodeAt(5)?"-ms-"+i:"")+i,211===t+r&&105===i.charCodeAt(13)&&0<i.indexOf("transform",10))return i.substring(0,i.indexOf(";",27)+1).replace(m,"$1-webkit-$2")+i}return i}function o(e,n){var t=e.indexOf(1===n?":":"{"),r=e.substring(0,3!==n?t:10);return t=e.substring(t+1,e.length-1),N(2!==n?r:r.replace(x,"$1"),t,n)}function i(e,n){var t=a(n,n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2));return t!==n+";"?t.replace(_," or ($1)").substring(4):"("+n+")"}function s(e,n,t,r,a,o,i,s,c,l){for(var f,d=0,p=n;d<M;++d)switch(f=P[d].call(u,e,p,t,r,a,o,i,s,c,l)){case void 0:case!1:case!0:case null:break;default:p=f}if(p!==n)return p}function c(e){return void 0!==(e=e.prefix)&&(N=null,e?"function"!==typeof e?A=1:(A=2,N=e):A=0),c}function u(e,t){var r=e;if(33>r.charCodeAt(0)&&(r=r.trim()),r=[r],0<M){var a=s(-1,t,r,r,T,O,0,0,0,0);void 0!==a&&"string"===typeof a&&(t=a)}var o=n(F,r,t,0,0);return 0<M&&(void 0!==(a=s(-2,o,r,r,T,O,o.length,0,0,0))&&(o=a)),"",C=0,O=T=1,o}var l=/^\0+/g,f=/[\0\r\f]/g,d=/: */g,p=/zoo|gra/,m=/([,: ])(transform)/g,h=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,y=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,b=/:(read-only)/g,S=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,_=/([\s\S]*?);/g,k=/-self|flex-/g,x=/[^]*?(:[rp][el]a[\w-]+)[^]*/,I=/stretch|:\s*\w+\-(?:conte|avail)/,E=/([^-])(image-set\()/,O=1,T=1,C=0,A=1,F=[],P=[],M=0,N=null,L=0;return u.use=function e(n){switch(n){case void 0:case null:M=P.length=0;break;default:if("function"===typeof n)P[M++]=n;else if("object"===typeof n)for(var t=0,r=n.length;t<r;++t)e(n[t]);else L=0|!!n}return e},u.set=c,void 0!==e&&c(e),u},d={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var p=function(e){var n=Object.create(null);return function(t){return void 0===n[t]&&(n[t]=e(t)),n[t]}},m=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,h=p((function(e){return m.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),g=t(110),y=t.n(g);function v(){return(v=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var b=function(e,n){for(var t=[e[0]],r=0,a=n.length;r<a;r+=1)t.push(n[r],e[r+1]);return t},S=function(e){return null!==e&&"object"==typeof e&&"[object Object]"===(e.toString?e.toString():Object.prototype.toString.call(e))&&!(0,c.typeOf)(e)},w=Object.freeze([]),_=Object.freeze({});function k(e){return"function"==typeof e}function x(e){return e.displayName||e.name||"Component"}function I(e){return e&&"string"==typeof e.styledComponentId}var E="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",O="undefined"!=typeof window&&"HTMLElement"in window,T=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&(void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:void 0!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY))),C={};function A(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(t.length>0?" Args: "+t.join(", "):""))}var F=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}var n=e.prototype;return n.indexOfGroup=function(e){for(var n=0,t=0;t<e;t++)n+=this.groupSizes[t];return n},n.insertRules=function(e,n){if(e>=this.groupSizes.length){for(var t=this.groupSizes,r=t.length,a=r;e>=a;)(a<<=1)<0&&A(16,""+e);this.groupSizes=new Uint32Array(a),this.groupSizes.set(t),this.length=a;for(var o=r;o<a;o++)this.groupSizes[o]=0}for(var i=this.indexOfGroup(e+1),s=0,c=n.length;s<c;s++)this.tag.insertRule(i,n[s])&&(this.groupSizes[e]++,i++)},n.clearGroup=function(e){if(e<this.length){var n=this.groupSizes[e],t=this.indexOfGroup(e),r=t+n;this.groupSizes[e]=0;for(var a=t;a<r;a++)this.tag.deleteRule(t)}},n.getGroup=function(e){var n="";if(e>=this.length||0===this.groupSizes[e])return n;for(var t=this.groupSizes[e],r=this.indexOfGroup(e),a=r+t,o=r;o<a;o++)n+=this.tag.getRule(o)+"/*!sc*/\n";return n},e}(),P=new Map,M=new Map,N=1,L=function(e){if(P.has(e))return P.get(e);for(;M.has(N);)N++;var n=N++;return P.set(e,n),M.set(n,e),n},R=function(e){return M.get(e)},D=function(e,n){n>=N&&(N=n+1),P.set(e,n),M.set(n,e)},j="style["+E+'][data-styled-version="5.3.8"]',B=new RegExp("^"+E+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),z=function(e,n,t){for(var r,a=t.split(","),o=0,i=a.length;o<i;o++)(r=a[o])&&e.registerName(n,r)},U=function(e,n){for(var t=(n.textContent||"").split("/*!sc*/\n"),r=[],a=0,o=t.length;a<o;a++){var i=t[a].trim();if(i){var s=i.match(B);if(s){var c=0|parseInt(s[1],10),u=s[2];0!==c&&(D(u,c),z(e,u,s[3]),e.getTag().insertRules(c,r)),r.length=0}else r.push(i)}}},V=function(){return t.nc},W=function(e){var n=document.head,t=e||n,r=document.createElement("style"),a=function(e){for(var n=e.childNodes,t=n.length;t>=0;t--){var r=n[t];if(r&&1===r.nodeType&&r.hasAttribute(E))return r}}(t),o=void 0!==a?a.nextSibling:null;r.setAttribute(E,"active"),r.setAttribute("data-styled-version","5.3.8");var i=V();return i&&r.setAttribute("nonce",i),t.insertBefore(r,o),r},G=function(){function e(e){var n=this.element=W(e);n.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var n=document.styleSheets,t=0,r=n.length;t<r;t++){var a=n[t];if(a.ownerNode===e)return a}A(17)}(n),this.length=0}var n=e.prototype;return n.insertRule=function(e,n){try{return this.sheet.insertRule(n,e),this.length++,!0}catch(e){return!1}},n.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},n.getRule=function(e){var n=this.sheet.cssRules[e];return void 0!==n&&"string"==typeof n.cssText?n.cssText:""},e}(),$=function(){function e(e){var n=this.element=W(e);this.nodes=n.childNodes,this.length=0}var n=e.prototype;return n.insertRule=function(e,n){if(e<=this.length&&e>=0){var t=document.createTextNode(n),r=this.nodes[e];return this.element.insertBefore(t,r||null),this.length++,!0}return!1},n.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},n.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),K=function(){function e(e){this.rules=[],this.length=0}var n=e.prototype;return n.insertRule=function(e,n){return e<=this.length&&(this.rules.splice(e,0,n),this.length++,!0)},n.deleteRule=function(e){this.rules.splice(e,1),this.length--},n.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),q=O,H={isServer:!O,useCSSOMInjection:!T},X=function(){function e(e,n,t){void 0===e&&(e=_),void 0===n&&(n={}),this.options=v({},H,{},e),this.gs=n,this.names=new Map(t),this.server=!!e.isServer,!this.server&&O&&q&&(q=!1,function(e){for(var n=document.querySelectorAll(j),t=0,r=n.length;t<r;t++){var a=n[t];a&&"active"!==a.getAttribute(E)&&(U(e,a),a.parentNode&&a.parentNode.removeChild(a))}}(this))}e.registerId=function(e){return L(e)};var n=e.prototype;return n.reconstructWithOptions=function(n,t){return void 0===t&&(t=!0),new e(v({},this.options,{},n),this.gs,t&&this.names||void 0)},n.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},n.getTag=function(){return this.tag||(this.tag=(t=(n=this.options).isServer,r=n.useCSSOMInjection,a=n.target,e=t?new K(a):r?new G(a):new $(a),new F(e)));var e,n,t,r,a},n.hasNameForId=function(e,n){return this.names.has(e)&&this.names.get(e).has(n)},n.registerName=function(e,n){if(L(e),this.names.has(e))this.names.get(e).add(n);else{var t=new Set;t.add(n),this.names.set(e,t)}},n.insertRules=function(e,n,t){this.registerName(e,n),this.getTag().insertRules(L(e),t)},n.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},n.clearRules=function(e){this.getTag().clearGroup(L(e)),this.clearNames(e)},n.clearTag=function(){this.tag=void 0},n.toString=function(){return function(e){for(var n=e.getTag(),t=n.length,r="",a=0;a<t;a++){var o=R(a);if(void 0!==o){var i=e.names.get(o),s=n.getGroup(a);if(i&&s&&i.size){var c=E+".g"+a+'[id="'+o+'"]',u="";void 0!==i&&i.forEach((function(e){e.length>0&&(u+=e+",")})),r+=""+s+c+'{content:"'+u+'"}/*!sc*/\n'}}}return r}(this)},e}(),Y=/(a)(d)/gi,J=function(e){return String.fromCharCode(e+(e>25?39:97))};function Q(e){var n,t="";for(n=Math.abs(e);n>52;n=n/52|0)t=J(n%52)+t;return(J(n%52)+t).replace(Y,"$1-$2")}var Z=function(e,n){for(var t=n.length;t;)e=33*e^n.charCodeAt(--t);return e},ee=function(e){return Z(5381,e)};function ne(e){for(var n=0;n<e.length;n+=1){var t=e[n];if(k(t)&&!I(t))return!1}return!0}var te=ee("5.3.8"),re=function(){function e(e,n,t){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===t||t.isStatic)&&ne(e),this.componentId=n,this.baseHash=Z(te,n),this.baseStyle=t,X.registerId(n)}return e.prototype.generateAndInjectStyles=function(e,n,t){var r=this.componentId,a=[];if(this.baseStyle&&a.push(this.baseStyle.generateAndInjectStyles(e,n,t)),this.isStatic&&!t.hash)if(this.staticRulesId&&n.hasNameForId(r,this.staticRulesId))a.push(this.staticRulesId);else{var o=we(this.rules,e,n,t).join(""),i=Q(Z(this.baseHash,o)>>>0);if(!n.hasNameForId(r,i)){var s=t(o,"."+i,void 0,r);n.insertRules(r,i,s)}a.push(i),this.staticRulesId=i}else{for(var c=this.rules.length,u=Z(this.baseHash,t.hash),l="",f=0;f<c;f++){var d=this.rules[f];if("string"==typeof d)l+=d;else if(d){var p=we(d,e,n,t),m=Array.isArray(p)?p.join(""):p;u=Z(u,m+f),l+=m}}if(l){var h=Q(u>>>0);if(!n.hasNameForId(r,h)){var g=t(l,"."+h,void 0,r);n.insertRules(r,h,g)}a.push(h)}}return a.join(" ")},e}(),ae=/^\s*\/\/.*$/gm,oe=[":","[",".","#"];function ie(e){var n,t,r,a,o=void 0===e?_:e,i=o.options,s=void 0===i?_:i,c=o.plugins,u=void 0===c?w:c,l=new f(s),d=[],p=function(e){function n(n){if(n)try{e(n+"}")}catch(e){}}return function(t,r,a,o,i,s,c,u,l,f){switch(t){case 1:if(0===l&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===u)return r+"/*|*/";break;case 3:switch(u){case 102:case 112:return e(a[0]+r),"";default:return r+(0===f?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(n)}}}((function(e){d.push(e)})),m=function(e,r,o){return 0===r&&-1!==oe.indexOf(o[t.length])||o.match(a)?e:"."+n};function h(e,o,i,s){void 0===s&&(s="&");var c=e.replace(ae,""),u=o&&i?i+" "+o+" { "+c+" }":c;return n=s,t=o,r=new RegExp("\\"+t+"\\b","g"),a=new RegExp("(\\"+t+"\\b){2,}"),l(i||!o?"":o,u)}return l.use([].concat(u,[function(e,n,a){2===e&&a.length&&a[0].lastIndexOf(t)>0&&(a[0]=a[0].replace(r,m))},p,function(e){if(-2===e){var n=d;return d=[],n}}])),h.hash=u.length?u.reduce((function(e,n){return n.name||A(15),Z(e,n.name)}),5381).toString():"",h}var se=o.createContext(),ce=(se.Consumer,o.createContext()),ue=(ce.Consumer,new X),le=ie();function fe(){return(0,o.useContext)(se)||ue}function de(){return(0,o.useContext)(ce)||le}function pe(e){var n=(0,o.useState)(e.stylisPlugins),t=n[0],r=n[1],a=fe(),i=(0,o.useMemo)((function(){var n=a;return e.sheet?n=e.sheet:e.target&&(n=n.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(n=n.reconstructWithOptions({useCSSOMInjection:!1})),n}),[e.disableCSSOMInjection,e.sheet,e.target]),s=(0,o.useMemo)((function(){return ie({options:{prefix:!e.disableVendorPrefixes},plugins:t})}),[e.disableVendorPrefixes,t]);return(0,o.useEffect)((function(){l()(t,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]),o.createElement(se.Provider,{value:i},o.createElement(ce.Provider,{value:s},e.children))}var me=function(){function e(e,n){var t=this;this.inject=function(e,n){void 0===n&&(n=le);var r=t.name+n.hash;e.hasNameForId(t.id,r)||e.insertRules(t.id,r,n(t.rules,r,"@keyframes"))},this.toString=function(){return A(12,String(t.name))},this.name=e,this.id="sc-keyframes-"+e,this.rules=n}return e.prototype.getName=function(e){return void 0===e&&(e=le),this.name+e.hash},e}(),he=/([A-Z])/,ge=/([A-Z])/g,ye=/^ms-/,ve=function(e){return"-"+e.toLowerCase()};function be(e){return he.test(e)?e.replace(ge,ve).replace(ye,"-ms-"):e}var Se=function(e){return null==e||!1===e||""===e};function we(e,n,t,r){if(Array.isArray(e)){for(var a,o=[],i=0,s=e.length;i<s;i+=1)""!==(a=we(e[i],n,t,r))&&(Array.isArray(a)?o.push.apply(o,a):o.push(a));return o}return Se(e)?"":I(e)?"."+e.styledComponentId:k(e)?"function"!=typeof(c=e)||c.prototype&&c.prototype.isReactComponent||!n?e:we(e(n),n,t,r):e instanceof me?t?(e.inject(t,r),e.getName(r)):e:S(e)?function e(n,t){var r,a,o=[];for(var i in n)n.hasOwnProperty(i)&&!Se(n[i])&&(Array.isArray(n[i])&&n[i].isCss||k(n[i])?o.push(be(i)+":",n[i],";"):S(n[i])?o.push.apply(o,e(n[i],i)):o.push(be(i)+": "+(r=i,(null==(a=n[i])||"boolean"==typeof a||""===a?"":"number"!=typeof a||0===a||r in d?String(a).trim():a+"px")+";")));return t?[t+" {"].concat(o,["}"]):o}(e):e.toString();var c}var _e=function(e){return Array.isArray(e)&&(e.isCss=!0),e};function ke(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return k(e)||S(e)?_e(we(b(w,[e].concat(t)))):0===t.length&&1===e.length&&"string"==typeof e[0]?e:_e(we(b(e,t)))}new Set;var xe=function(e,n,t){return void 0===t&&(t=_),e.theme!==t.theme&&e.theme||n||t.theme},Ie=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Ee=/(^-|-$)/g;function Oe(e){return e.replace(Ie,"-").replace(Ee,"")}var Te=function(e){return Q(ee(e)>>>0)};function Ce(e){return"string"==typeof e&&!0}var Ae=function(e){return"function"==typeof e||"object"==typeof e&&null!==e&&!Array.isArray(e)},Fe=function(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e};function Pe(e,n,t){var r=e[t];Ae(n)&&Ae(r)?Me(r,n):e[t]=n}function Me(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];for(var a=0,o=t;a<o.length;a++){var i=o[a];if(Ae(i))for(var s in i)Fe(s)&&Pe(e,i[s],s)}return e}var Ne=o.createContext();Ne.Consumer;var Le={};function Re(e,n,t){var r=I(e),a=!Ce(e),i=n.attrs,s=void 0===i?w:i,c=n.componentId,u=void 0===c?function(e,n){var t="string"!=typeof e?"sc":Oe(e);Le[t]=(Le[t]||0)+1;var r=t+"-"+Te("5.3.8"+t+Le[t]);return n?n+"-"+r:r}(n.displayName,n.parentComponentId):c,l=n.displayName,f=void 0===l?function(e){return Ce(e)?"styled."+e:"Styled("+x(e)+")"}(e):l,d=n.displayName&&n.componentId?Oe(n.displayName)+"-"+n.componentId:n.componentId||u,p=r&&e.attrs?Array.prototype.concat(e.attrs,s).filter(Boolean):s,m=n.shouldForwardProp;r&&e.shouldForwardProp&&(m=n.shouldForwardProp?function(t,r,a){return e.shouldForwardProp(t,r,a)&&n.shouldForwardProp(t,r,a)}:e.shouldForwardProp);var g,b=new re(t,d,r?e.componentStyle:void 0),S=b.isStatic&&0===s.length,E=function(e,n){return function(e,n,t,r){var a=e.attrs,i=e.componentStyle,s=e.defaultProps,c=e.foldedComponentIds,u=e.shouldForwardProp,l=e.styledComponentId,f=e.target,d=function(e,n,t){void 0===e&&(e=_);var r=v({},n,{theme:e}),a={};return t.forEach((function(e){var n,t,o,i=e;for(n in k(i)&&(i=i(r)),i)r[n]=a[n]="className"===n?(t=a[n],o=i[n],t&&o?t+" "+o:t||o):i[n]})),[r,a]}(xe(n,(0,o.useContext)(Ne),s)||_,n,a),p=d[0],m=d[1],g=function(e,n,t,r){var a=fe(),o=de();return n?e.generateAndInjectStyles(_,a,o):e.generateAndInjectStyles(t,a,o)}(i,r,p),y=t,b=m.$as||n.$as||m.as||n.as||f,S=Ce(b),w=m!==n?v({},n,{},m):n,x={};for(var I in w)"$"!==I[0]&&"as"!==I&&("forwardedAs"===I?x.as=w[I]:(u?u(I,h,b):!S||h(I))&&(x[I]=w[I]));return n.style&&m.style!==n.style&&(x.style=v({},n.style,{},m.style)),x.className=Array.prototype.concat(c,l,g!==l?g:null,n.className,m.className).filter(Boolean).join(" "),x.ref=y,(0,o.createElement)(b,x)}(g,e,n,S)};return E.displayName=f,(g=o.forwardRef(E)).attrs=p,g.componentStyle=b,g.displayName=f,g.shouldForwardProp=m,g.foldedComponentIds=r?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):w,g.styledComponentId=d,g.target=r?e.target:e,g.withComponent=function(e){var r=n.componentId,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(n,["componentId"]),o=r&&r+"-"+(Ce(e)?e:Oe(x(e)));return Re(e,v({},a,{attrs:p,componentId:o}),t)},Object.defineProperty(g,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(n){this._foldedDefaultProps=r?Me({},e.defaultProps,n):n}}),g.toString=function(){return"."+g.styledComponentId},a&&y()(g,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),g}var De=function(e){return function e(n,t,r){if(void 0===r&&(r=_),!(0,c.isValidElementType)(t))return A(1,String(t));var a=function(){return n(t,r,ke.apply(void 0,arguments))};return a.withConfig=function(a){return e(n,t,v({},r,{},a))},a.attrs=function(a){return e(n,t,v({},r,{attrs:Array.prototype.concat(r.attrs,a).filter(Boolean)}))},a}(Re,e)};["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach((function(e){De[e]=De(e)}));var je=function(){function e(e,n){this.rules=e,this.componentId=n,this.isStatic=ne(e),X.registerId(this.componentId+1)}var n=e.prototype;return n.createStyles=function(e,n,t,r){var a=r(we(this.rules,n,t,r).join(""),""),o=this.componentId+e;t.insertRules(o,o,a)},n.removeStyles=function(e,n){n.clearRules(this.componentId+e)},n.renderStyles=function(e,n,t,r){e>2&&X.registerId(this.componentId+e),this.removeStyles(e,t),this.createStyles(e,n,t,r)},e}();!function(){function e(){var e=this;this._emitSheetCSS=function(){var n=e.instance.toString();if(!n)return"";var t=V();return"<style "+[t&&'nonce="'+t+'"',E+'="true"','data-styled-version="5.3.8"'].filter(Boolean).join(" ")+">"+n+"</style>"},this.getStyleTags=function(){return e.sealed?A(2):e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)return A(2);var t=((n={})[E]="",n["data-styled-version"]="5.3.8",n.dangerouslySetInnerHTML={__html:e.instance.toString()},n),r=V();return r&&(t.nonce=r),[o.createElement("style",v({},t,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new X({isServer:!0}),this.sealed=!1}var n=e.prototype;n.collectStyles=function(e){return this.sealed?A(2):o.createElement(pe,{sheet:this.instance},e)},n.interleaveWithNodeStream=function(e){return A(3)}}();var Be=De,ze=function(e){var n=[],t=10;switch(e%2){case 0:for(var r=0;r<t;r++){var a=180+60*(t-r)/t,o=100+150*r/t;n.push("rgba(".concat(Math.round(0),", ").concat(Math.round(a),", ").concat(Math.round(o),")"))}break;case 1:for(var i=0;i<t;i++){var s=160+95*i/t,c=80+100*(t-i)/t;n.push("rgba(".concat(Math.round(s),", ").concat(Math.round(0),", ").concat(Math.round(c),")"))}}return{colors:n,counter:0,next:function(){return n[this.counter++%n.length]}}}(1);ze.counter=5;var Ue,Ve,We,Ge,$e,Ke,qe,He,Xe,Ye,Je,Qe,Ze,en,nn,tn,rn,an,on={devices:{desktop:{fontSize:20},mobile:{fontSize:16,maxWidth:600}},dimensions:{maxContentWidth:"900px"},fonts:{title:"Silkscreen",default:"Rajdhani"},fontSizes:{h1:"300%",h2:"140%"},colors:{bg1:"#333333",bg1p5:"#222222",bg2:"#1a1a1a",bg3:"#444444",fg1:"#d1d1d1",fg1p5:"#a1a1a1",fg2:"#555555",colorScheme:ze},spacings:{space1:"1rem",space2:"2rem",space0p1:"0.25rem"},controls:{gridSize:50},zIndexes:{closeButton:2,spinner:3}},sn=t(184),cn=Be.h2(Ue||(Ue=s(["\n    font-family: ",";\n    font-size: 140%;\n    color: ",";\n    margin: 0;\n    padding: 0;\n"])),on.fonts.title,on.colors.colorScheme.next()),un=Be.h3(Ve||(Ve=s(["\n    text-transform: uppercase;\n    font-weight: bold;\n    font-family: ",";\n    margin: 0;\n    padding: 0;\n"])),on.fonts.title),ln=Be.div(We||(We=s(["\n    background-color: ",";\n    margin: "," auto 0 auto;\n    padding: ",";\n    width: 100%;\n    max-width: ",";\n"])),on.colors.bg2,on.spacings.space1,on.spacings.space1,on.dimensions.maxContentWidth),fn="\n    border: none;\n    cursor: pointer;\n    background-color: ".concat(on.colors.bg3,";\n"),dn="\n    font-family: ".concat(on.fonts.title,";\n"),pn=Be.button(Ge||(Ge=s(["\n    ","\n"])),fn),mn=Be(pn)($e||($e=s(["\n    ","\n    background-color: ",";\n"])),dn,(function(){return on.colors.colorScheme.next()})),hn=Be.select(Ke||(Ke=s(["\n    border: none;\n    background-color: ",";\n    cursor: pointer;\n"])),on.colors.bg1p5),gn=Be.span(qe||(qe=s(["\n    position: absolute;\n    bottom: ",";\n    right: ",";\n    color: ",";\n"])),on.spacings.space0p1,on.spacings.space0p1,on.colors.fg1p5),yn=function(e){var n=e.filename.split("/").slice(-1)[0]||null;return(0,sn.jsx)(gn,{children:n})},vn=Be.span(He||(He=s(["\n    position: absolute;\n    bottom: ",";\n    left: ",";\n    color: ",";\n"])),on.spacings.space0p1,on.spacings.space0p1,on.colors.fg1p5),bn="\n    height: 20vh;\n    max-height: 10em;\n    user-select: none;\n",Sn=Be.span(Xe||(Xe=s(["\n    font-size: 120%;\n    font-weight: bold;\n    color: ",";\n    min-width: 1.5em;\n    @media (max-width: ","px) {\n        text-align: center;\n    }\n"])),on.colors.fg2,on.devices.mobile.maxWidth),wn=Be.div(Ye||(Ye=s(["\n    color: ",";\n    ::before {\n        content: '\u2192 ';\n    }\n    a {\n        color: ",";\n    }\n"])),on.colors.fg2,on.colors.fg2),_n=Be(ln)(Je||(Je=s(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n"]))),kn=Be.div(Qe||(Qe=s(["\n    min-width: 6.5rem;\n    transform: translateX(-20%);\n"]))),xn=Be.div(Ze||(Ze=s(["\n    flex: auto;\n"]))),In=Be.div(en||(en=s(["\n    font-family: ",";\n    color: ",";\n"])),on.fonts.title,on.colors.colorScheme.next()),En=Be.div(nn||(nn=s(["\n& > * {\n    font-size: 90%;\n    margin-right: ",";\n    &:last-child {\n        margin-right: 0;\n    }\n}\n"])),on.spacings.space0p1),On=Be.div(tn||(tn=s(["\n    position: relative;\n    background-color: ",";\n"])),on.colors.bg1p5),Tn=Be.pre(rn||(rn=s(["\n    ","\n    letter-spacing: 0.1em;\n    overflow: auto;\n    margin: 0;\n    padding: 0;\n    opacity: 0.3;\n"])),bn),Cn=Be(En)(an||(an=s(["\n    position: absolute;\n    top: calc(",");\n    right: calc(",");\n"])),on.spacings.space0p1,on.spacings.space0p1),An=function(e){var n=e.pd,t=e.filename,r=e.extraButtons;return(0,sn.jsxs)(On,{children:[(0,sn.jsx)(Tn,{children:n}),t?(0,sn.jsx)(yn,{filename:t}):null,r?(0,sn.jsx)(Cn,{children:r}):null]})};function Fn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Pn(e,n){if(e){if("string"===typeof e)return Fn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Fn(e,n):void 0}}function Mn(e){return function(e){if(Array.isArray(e))return Fn(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Pn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Nn,Ln,Rn,Dn=function(e,n,t){var r=new Blob([n],{type:t});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(r,e);else{var a=window.document.createElement("a");a.href=window.URL.createObjectURL(r),a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a)}},jn="array",Bn="bit",zn="bits",Un="byte",Vn="bytes",Wn="",Gn="exponent",$n="function",Kn="iec",qn="Invalid number",Hn="Invalid rounding method",Xn="jedec",Yn="object",Jn=".",Qn="round",Zn="s",et="kbit",nt="kB",tt=" ",rt="string",at="0",ot={symbol:{iec:{bits:["bit","Kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["bit","Kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},fullform:{iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]}};function it(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=n.bits,r=void 0!==t&&t,a=n.pad,o=void 0!==a&&a,i=n.base,s=void 0===i?-1:i,c=n.round,u=void 0===c?2:c,l=n.locale,f=void 0===l?Wn:l,d=n.localeOptions,p=void 0===d?{}:d,m=n.separator,h=void 0===m?Wn:m,g=n.spacer,y=void 0===g?tt:g,v=n.symbols,b=void 0===v?{}:v,S=n.standard,w=void 0===S?Wn:S,_=n.output,k=void 0===_?rt:_,x=n.fullform,I=void 0!==x&&x,E=n.fullforms,O=void 0===E?[]:E,T=n.exponent,C=void 0===T?-1:T,A=n.roundingMethod,F=void 0===A?Qn:A,P=n.precision,M=void 0===P?0:P,N=C,L=Number(e),R=[],D=0,j=Wn;-1===s&&0===w.length?(s=10,w=Xn):-1===s&&w.length>0?s=(w=w===Kn?Kn:Xn)===Kn?2:10:w=10===(s=2===s?2:10)||w===Xn?Xn:Kn;var B=10===s?1e3:1024,z=!0===I,U=L<0,V=Math[F];if("bigint"!==typeof e&&isNaN(e))throw new TypeError(qn);if(typeof V!==$n)throw new TypeError(Hn);if(U&&(L=-L),(-1===N||isNaN(N))&&(N=Math.floor(Math.log(L)/Math.log(B)))<0&&(N=0),N>8&&(M>0&&(M+=8-N),N=8),k===Gn)return N;if(0===L)R[0]=0,j=R[1]=ot.symbol[w][r?zn:Vn][N];else{D=L/(2===s?Math.pow(2,10*N):Math.pow(1e3,N)),r&&(D*=8)>=B&&N<8&&(D/=B,N++);var W=Math.pow(10,N>0?u:0);R[0]=V(D*W)/W,R[0]===B&&N<8&&-1===C&&(R[0]=1,N++),j=R[1]=10===s&&1===N?r?et:nt:ot.symbol[w][r?zn:Vn][N]}if(U&&(R[0]=-R[0]),M>0&&(R[0]=R[0].toPrecision(M)),R[1]=b[R[1]]||R[1],!0===f?R[0]=R[0].toLocaleString():f.length>0?R[0]=R[0].toLocaleString(f,p):h.length>0&&(R[0]=R[0].toString().replace(Jn,h)),o&&!1===Number.isInteger(R[0])&&u>0){var G=h||Jn,$=R[0].toString().split(G),K=$[1]||Wn,q=K.length,H=u-q;R[0]="".concat($[0]).concat(G).concat(K.padEnd(q+H,at))}return z&&(R[1]=O[N]?O[N]:ot.fullform[w][N]+(r?Bn:Un)+(1===R[0]?Wn:Zn)),k===jn?R:k===Yn?{value:R[0],symbol:R[1],exponent:N,unit:j}:R.join(y)}var st,ct,ut,lt,ft,dt,pt,mt=["\u2591","\u2592","\u2593","\u2594","\u2599","\u259a","\u259b","\u259c","\u259d","\u259e","\u259f"],ht=Be.div(Nn||(Nn=s(["\n    position: relative;\n"]))),gt=Be.div(Ln||(Ln=s(["\n    ","\n    word-break: break-all;\n    overflow: hidden;\n    opacity: 0.1;\n    text-align: justify;\n"])),bn),yt=Be(En)(Rn||(Rn=s(["\n    position: absolute;\n    top: calc(",");\n    right: calc(",");\n"])),on.spacings.space0p1,on.spacings.space0p1),vt=function(e){var n=e.wasm,t=e.filename,r=e.showDownloadButton,a=e.showFileSize,i=e.extraButtons;if(r){i=[].concat(Mn(i||[]),[(0,sn.jsx)(pn,{onClick:function(){Dn(t,n,"application/wasm")},children:"download"},"download")])}var s=(0,o.useMemo)((function(){return Array.from(new Uint8Array(n))}),[n]),c=it(n.byteLength);return(0,sn.jsxs)(ht,{children:[t?(0,sn.jsx)(yn,{filename:t}):null,a?(0,sn.jsx)(vn,{children:c}):null,(0,sn.jsx)(gt,{children:s.slice(0,1e3).map((function(e,n){return(0,sn.jsxs)("span",{children:[mt[e%mt.length]," "]},n)}))}),i?(0,sn.jsx)(yt,{children:i}):null]})};function bt(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,a,o,i,s=[],c=!0,u=!1;try{if(o=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=o.call(t)).done)&&(s.push(r.value),s.length!==n);c=!0);}catch(l){u=!0,a=l}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(u)throw a}}return s}}(e,n)||Pn(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var St=function(e){var n=Math.floor(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return Math.floor(e*Math.pow(10,n))/Math.pow(10,n)}(e,2));return"".concat(n.toString().padStart(3,"0"))},wt=Be.div(st||(st=s(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    @media (max-width: ","px) {\n        flex-direction: column-reverse;\n        align-items: flex-end;\n    }\n"])),on.devices.mobile.maxWidth),_t=Be.div(ct||(ct=s(["\n    display: grid;\n    grid-template-columns: repeat(3, 1fr);\n    min-width: 4em;\n    margin: 0 ",";\n    font-size: ",";\n    @media (max-width: ","px) {\n        font-size: 120%;\n    }\n    & > span {\n        font-size: 100%;\n    }\n    & > span:nth-child(1) {\n        text-align: right;\n    }\n    & > span:nth-child(2) {\n        text-align: center;\n    }\n"])),on.spacings.space1,on.fontSizes.h2,on.devices.mobile.maxWidth),kt=Be.div(ut||(ut=s(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n    flex: auto;\n    margin-right: ",";\n    @media (max-width: ","px) {\n        align-self: stretch;\n        margin-right: 0;\n    }\n    @media (max-width: 400px) {\n        font-size: 50%;\n    }\n\n"])),on.spacings.space1,on.devices.mobile.maxWidth),xt=Be(mn)(lt||(lt=s(["\n    min-width: 4.5em;\n    align-self: stretch;\n    @media (max-width: 700px) {\n        font-size: 80%;\n    }\n"]))),It=Be.div(ft||(ft=s(["\n    display: flex;\n    flex-direction: row;\n    align-self: stretch;\n"]))),Et=Be(mn)(dt||(dt=s(["\n    min-width: 3em;\n    @media (max-width: 700px) {\n        font-size: 80%;\n    }\n"]))),Ot=Be(En)(pt||(pt=s(["\n    align-self: stretch;\n    display: flex;\n    align-items: stretch;\n    @media (max-width: ","px) {\n        justify-content: flex-end;\n        margin-bottom: ",";\n    }\n"])),on.devices.mobile.maxWidth,on.spacings.space1),Tt=function(e){var n=e.wav,t=e.showDownloadButton,r=e.extraButtons,a=bt((0,o.useState)(!1),2),i=a[0],s=a[1],c=bt((0,o.useState)(0),2)[1],u=(0,o.useMemo)((function(){var e=new Audio(URL.createObjectURL(new Blob([n],{type:"audio/wav"})));return e.onplay=function(){s(!0)},e.onpause=function(){s(!1)},e.onended=function(){s(!1)},e}),[n]);(0,o.useEffect)((function(){if(i){var e=setInterval((function(){c(u.currentTime)}),100);return function(){return clearInterval(e)}}}),[i]);return(0,sn.jsxs)(wt,{children:[(0,sn.jsxs)(kt,{children:[i?(0,sn.jsx)(xt,{onClick:function(){u.paused&&s(!1),u.pause()},children:"Pause"}):(0,sn.jsx)(xt,{onClick:function(){u.paused||s(!0),u.play()},children:"Play"}),(0,sn.jsxs)(_t,{children:[(0,sn.jsx)("span",{children:St(u.currentTime)}),(0,sn.jsx)("span",{children:"/"}),(0,sn.jsx)("span",{children:isNaN(u.duration)?St(0):St(u.duration)})]}),(0,sn.jsxs)(It,{children:[(0,sn.jsx)(Et,{onClick:function(){u.volume=Math.max(u.volume-.1,0)},children:"-"}),(0,sn.jsx)(Et,{onClick:function(){u.volume=Math.min(u.volume+.1,1)},children:"+"})]})]}),(0,sn.jsxs)(Ot,{children:[r||null,t?(0,sn.jsx)(pn,{onClick:function(){Dn("audio.webpd.wav",n,"audio/wav")},children:"download"}):null]})]})},Ct=function(e){var n=e.format,t=e.artefacts,r=e.filename,a=e.showDownloadButton,o=e.extraButtons;switch(n){case"pd":return t.pd?(0,sn.jsx)(An,{pd:t.pd,filename:r,extraButtons:o}):null;case"wasm":return t.wasm?(0,sn.jsx)(vt,{wasm:t.wasm,filename:r||"patch.wasm",showDownloadButton:a,extraButtons:o,showFileSize:!0}):null;case"wav":return t.wav?(0,sn.jsx)(Tt,{wav:t.wav,showDownloadButton:a,extraButtons:o}):null}return null};function At(e){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},At(e)}function Ft(){Ft=function(){return e};var e={},n=Object.prototype,t=n.hasOwnProperty,r=Object.defineProperty||function(e,n,t){e[n]=t.value},a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function c(e,n,t){return Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}),e[n]}try{c({},"")}catch(T){c=function(e,n,t){return e[n]=t}}function u(e,n,t,a){var o=n&&n.prototype instanceof d?n:d,i=Object.create(o.prototype),s=new I(a||[]);return r(i,"_invoke",{value:w(e,t,s)}),i}function l(e,n,t){try{return{type:"normal",arg:e.call(n,t)}}catch(T){return{type:"throw",arg:T}}}e.wrap=u;var f={};function d(){}function p(){}function m(){}var h={};c(h,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(E([])));y&&y!==n&&t.call(y,o)&&(h=y);var v=m.prototype=d.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(n){c(e,n,(function(e){return this._invoke(n,e)}))}))}function S(e,n){function a(r,o,i,s){var c=l(e[r],e,o);if("throw"!==c.type){var u=c.arg,f=u.value;return f&&"object"==At(f)&&t.call(f,"__await")?n.resolve(f.__await).then((function(e){a("next",e,i,s)}),(function(e){a("throw",e,i,s)})):n.resolve(f).then((function(e){u.value=e,i(u)}),(function(e){return a("throw",e,i,s)}))}s(c.arg)}var o;r(this,"_invoke",{value:function(e,t){function r(){return new n((function(n,r){a(e,t,n,r)}))}return o=o?o.then(r,r):r()}})}function w(e,n,t){var r="suspendedStart";return function(a,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===a)throw o;return O()}for(t.method=a,t.arg=o;;){var i=t.delegate;if(i){var s=_(i,t);if(s){if(s===f)continue;return s}}if("next"===t.method)t.sent=t._sent=t.arg;else if("throw"===t.method){if("suspendedStart"===r)throw r="completed",t.arg;t.dispatchException(t.arg)}else"return"===t.method&&t.abrupt("return",t.arg);r="executing";var c=l(e,n,t);if("normal"===c.type){if(r=t.done?"completed":"suspendedYield",c.arg===f)continue;return{value:c.arg,done:t.done}}"throw"===c.type&&(r="completed",t.method="throw",t.arg=c.arg)}}}function _(e,n){var t=n.method,r=e.iterator[t];if(void 0===r)return n.delegate=null,"throw"===t&&e.iterator.return&&(n.method="return",n.arg=void 0,_(e,n),"throw"===n.method)||"return"!==t&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+t+"' method")),f;var a=l(r,e.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,f;var o=a.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=void 0),n.delegate=null,f):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,f)}function k(e){var n={tryLoc:e[0]};1 in e&&(n.catchLoc=e[1]),2 in e&&(n.finallyLoc=e[2],n.afterLoc=e[3]),this.tryEntries.push(n)}function x(e){var n=e.completion||{};n.type="normal",delete n.arg,e.completion=n}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function E(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function n(){for(;++r<e.length;)if(t.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=void 0,n.done=!0,n};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=m,r(v,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var n="function"==typeof e&&e.constructor;return!!n&&(n===p||"GeneratorFunction"===(n.displayName||n.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,s,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},b(S.prototype),c(S.prototype,i,(function(){return this})),e.AsyncIterator=S,e.async=function(n,t,r,a,o){void 0===o&&(o=Promise);var i=new S(u(n,t,r,a),o);return e.isGeneratorFunction(t)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},b(v),c(v,s,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var n=Object(e),t=[];for(var r in n)t.push(r);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in n)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=E,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&t.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(t,r){return i.type="throw",i.arg=e,n.next=t,r&&(n.method="next",n.arg=void 0),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=t.call(o,"catchLoc"),c=t.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,n){for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r];if(a.tryLoc<=this.prev&&t.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var o=a;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=n&&n<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=e,i.arg=n,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(i)},complete:function(e,n){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&n&&(this.next=n),f},finish:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.finallyLoc===e)return this.complete(t.completion,t.afterLoc),x(t),f}},catch:function(e){for(var n=this.tryEntries.length-1;n>=0;--n){var t=this.tryEntries[n];if(t.tryLoc===e){var r=t.completion;if("throw"===r.type){var a=r.arg;x(t)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,t){return this.delegate={iterator:E(e),resultName:n,nextLoc:t},"next"===this.method&&(this.arg=void 0),f}},e}function Pt(e){for(var n=arguments.length,t=Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(t.length?" "+t.map((function(e){return"'"+e+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Mt(e){return!!e&&!!e[_r]}function Nt(e){var n;return!!e&&(function(e){if(!e||"object"!=typeof e)return!1;var n=Object.getPrototypeOf(e);if(null===n)return!0;var t=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return t===Object||"function"==typeof t&&Function.toString.call(t)===kr}(e)||Array.isArray(e)||!!e[wr]||!!(null===(n=e.constructor)||void 0===n?void 0:n[wr])||Ut(e)||Vt(e))}function Lt(e,n,t){void 0===t&&(t=!1),0===Rt(e)?(t?Object.keys:xr)(e).forEach((function(r){t&&"symbol"==typeof r||n(r,e[r],e)})):e.forEach((function(t,r){return n(r,t,e)}))}function Rt(e){var n=e[_r];return n?n.i>3?n.i-4:n.i:Array.isArray(e)?1:Ut(e)?2:Vt(e)?3:0}function Dt(e,n){return 2===Rt(e)?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function jt(e,n){return 2===Rt(e)?e.get(n):e[n]}function Bt(e,n,t){var r=Rt(e);2===r?e.set(n,t):3===r?e.add(t):e[n]=t}function zt(e,n){return e===n?0!==e||1/e==1/n:e!=e&&n!=n}function Ut(e){return yr&&e instanceof Map}function Vt(e){return vr&&e instanceof Set}function Wt(e){return e.o||e.t}function Gt(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var n=Ir(e);delete n[_r];for(var t=xr(n),r=0;r<t.length;r++){var a=t[r],o=n[a];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[a]={configurable:!0,writable:!0,enumerable:o.enumerable,value:e[a]})}return Object.create(Object.getPrototypeOf(e),n)}function $t(e,n){return void 0===n&&(n=!1),qt(e)||Mt(e)||!Nt(e)||(Rt(e)>1&&(e.set=e.add=e.clear=e.delete=Kt),Object.freeze(e),n&&Lt(e,(function(e,n){return $t(n,!0)}),!0)),e}function Kt(){Pt(2)}function qt(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function Ht(e){var n=Er[e];return n||Pt(18,e),n}function Xt(e,n){Er[e]||(Er[e]=n)}function Yt(){return hr}function Jt(e,n){n&&(Ht("Patches"),e.u=[],e.s=[],e.v=n)}function Qt(e){Zt(e),e.p.forEach(nr),e.p=null}function Zt(e){e===hr&&(hr=e.l)}function er(e){return hr={p:[],l:hr,h:e,m:!0,_:0}}function nr(e){var n=e[_r];0===n.i||1===n.i?n.j():n.O=!0}function tr(e,n){n._=n.p.length;var t=n.p[0],r=void 0!==e&&e!==t;return n.h.g||Ht("ES5").S(n,e,r),r?(t[_r].P&&(Qt(n),Pt(4)),Nt(e)&&(e=rr(n,e),n.l||or(n,e)),n.u&&Ht("Patches").M(t[_r].t,e,n.u,n.s)):e=rr(n,t,[]),Qt(n),n.u&&n.v(n.u,n.s),e!==Sr?e:void 0}function rr(e,n,t){if(qt(n))return n;var r=n[_r];if(!r)return Lt(n,(function(a,o){return ar(e,r,n,a,o,t)}),!0),n;if(r.A!==e)return n;if(!r.P)return or(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var a=4===r.i||5===r.i?r.o=Gt(r.k):r.o,o=a,i=!1;3===r.i&&(o=new Set(a),a.clear(),i=!0),Lt(o,(function(n,o){return ar(e,r,a,n,o,t,i)})),or(e,a,!1),t&&e.u&&Ht("Patches").N(r,t,e.u,e.s)}return r.o}function ar(e,n,t,r,a,o,i){if(Mt(a)){var s=rr(e,a,o&&n&&3!==n.i&&!Dt(n.R,r)?o.concat(r):void 0);if(Bt(t,r,s),!Mt(s))return;e.m=!1}else i&&t.add(a);if(Nt(a)&&!qt(a)){if(!e.h.D&&e._<1)return;rr(e,a),n&&n.A.l||or(e,a)}}function or(e,n,t){void 0===t&&(t=!1),!e.l&&e.h.D&&e.m&&$t(n,t)}function ir(e,n){var t=e[_r];return(t?Wt(t):e)[n]}function sr(e,n){if(n in e)for(var t=Object.getPrototypeOf(e);t;){var r=Object.getOwnPropertyDescriptor(t,n);if(r)return r;t=Object.getPrototypeOf(t)}}function cr(e){e.P||(e.P=!0,e.l&&cr(e.l))}function ur(e){e.o||(e.o=Gt(e.t))}function lr(e,n,t){var r=Ut(n)?Ht("MapSet").F(n,t):Vt(n)?Ht("MapSet").T(n,t):e.g?function(e,n){var t=Array.isArray(e),r={i:t?1:0,A:n?n.A:Yt(),P:!1,I:!1,R:{},l:n,t:e,k:null,o:null,j:null,C:!1},a=r,o=Or;t&&(a=[r],o=Tr);var i=Proxy.revocable(a,o),s=i.revoke,c=i.proxy;return r.k=c,r.j=s,c}(n,t):Ht("ES5").J(n,t);return(t?t.A:Yt()).p.push(r),r}function fr(e){return Mt(e)||Pt(22,e),function e(n){if(!Nt(n))return n;var t,r=n[_r],a=Rt(n);if(r){if(!r.P&&(r.i<4||!Ht("ES5").K(r)))return r.t;r.I=!0,t=dr(n,a),r.I=!1}else t=dr(n,a);return Lt(t,(function(n,a){r&&jt(r.t,n)===a||Bt(t,n,e(a))})),3===a?new Set(t):t}(e)}function dr(e,n){switch(n){case 2:return new Map(e);case 3:return Array.from(e)}return Gt(e)}function pr(){function e(e,n){var t=a[e];return t?t.enumerable=n:a[e]=t={configurable:!0,enumerable:n,get:function(){var n=this[_r];return Or.get(n,e)},set:function(n){var t=this[_r];Or.set(t,e,n)}},t}function n(e){for(var n=e.length-1;n>=0;n--){var a=e[n][_r];if(!a.P)switch(a.i){case 5:r(a)&&cr(a);break;case 4:t(a)&&cr(a)}}}function t(e){for(var n=e.t,t=e.k,r=xr(t),a=r.length-1;a>=0;a--){var o=r[a];if(o!==_r){var i=n[o];if(void 0===i&&!Dt(n,o))return!0;var s=t[o],c=s&&s[_r];if(c?c.t!==i:!zt(s,i))return!0}}var u=!!n[_r];return r.length!==xr(n).length+(u?0:1)}function r(e){var n=e.k;if(n.length!==e.t.length)return!0;var t=Object.getOwnPropertyDescriptor(n,n.length-1);if(t&&!t.get)return!0;for(var r=0;r<n.length;r++)if(!n.hasOwnProperty(r))return!0;return!1}var a={};Xt("ES5",{J:function(n,t){var r=Array.isArray(n),a=function(n,t){if(n){for(var r=Array(t.length),a=0;a<t.length;a++)Object.defineProperty(r,""+a,e(a,!0));return r}var o=Ir(t);delete o[_r];for(var i=xr(o),s=0;s<i.length;s++){var c=i[s];o[c]=e(c,n||!!o[c].enumerable)}return Object.create(Object.getPrototypeOf(t),o)}(r,n),o={i:r?5:4,A:t?t.A:Yt(),P:!1,I:!1,R:{},l:t,t:n,k:a,o:null,O:!1,C:!1};return Object.defineProperty(a,_r,{value:o,writable:!0}),a},S:function(e,t,a){a?Mt(t)&&t[_r].A===e&&n(e.p):(e.u&&function e(n){if(n&&"object"==typeof n){var t=n[_r];if(t){var a=t.t,o=t.k,i=t.R,s=t.i;if(4===s)Lt(o,(function(n){n!==_r&&(void 0!==a[n]||Dt(a,n)?i[n]||e(o[n]):(i[n]=!0,cr(t)))})),Lt(a,(function(e){void 0!==o[e]||Dt(o,e)||(i[e]=!1,cr(t))}));else if(5===s){if(r(t)&&(cr(t),i.length=!0),o.length<a.length)for(var c=o.length;c<a.length;c++)i[c]=!1;else for(var u=a.length;u<o.length;u++)i[u]=!0;for(var l=Math.min(o.length,a.length),f=0;f<l;f++)o.hasOwnProperty(f)||(i[f]=!0),void 0===i[f]&&e(o[f])}}}}(e.p[0]),n(e.p))},K:function(e){return 4===e.i?t(e):r(e)}})}var mr,hr,gr="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),yr="undefined"!=typeof Map,vr="undefined"!=typeof Set,br="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Sr=gr?Symbol.for("immer-nothing"):((mr={})["immer-nothing"]=!0,mr),wr=gr?Symbol.for("immer-draftable"):"__$immer_draftable",_r=gr?Symbol.for("immer-state"):"__$immer_state",kr=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),xr="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Ir=Object.getOwnPropertyDescriptors||function(e){var n={};return xr(e).forEach((function(t){n[t]=Object.getOwnPropertyDescriptor(e,t)})),n},Er={},Or={get:function(e,n){if(n===_r)return e;var t=Wt(e);if(!Dt(t,n))return function(e,n,t){var r,a=sr(n,t);return a?"value"in a?a.value:null===(r=a.get)||void 0===r?void 0:r.call(e.k):void 0}(e,t,n);var r=t[n];return e.I||!Nt(r)?r:r===ir(e.t,n)?(ur(e),e.o[n]=lr(e.A.h,r,e)):r},has:function(e,n){return n in Wt(e)},ownKeys:function(e){return Reflect.ownKeys(Wt(e))},set:function(e,n,t){var r=sr(Wt(e),n);if(null==r?void 0:r.set)return r.set.call(e.k,t),!0;if(!e.P){var a=ir(Wt(e),n),o=null==a?void 0:a[_r];if(o&&o.t===t)return e.o[n]=t,e.R[n]=!1,!0;if(zt(t,a)&&(void 0!==t||Dt(e.t,n)))return!0;ur(e),cr(e)}return e.o[n]===t&&(void 0!==t||n in e.o)||Number.isNaN(t)&&Number.isNaN(e.o[n])||(e.o[n]=t,e.R[n]=!0),!0},deleteProperty:function(e,n){return void 0!==ir(e.t,n)||n in e.t?(e.R[n]=!1,ur(e),cr(e)):delete e.R[n],e.o&&delete e.o[n],!0},getOwnPropertyDescriptor:function(e,n){var t=Wt(e),r=Reflect.getOwnPropertyDescriptor(t,n);return r?{writable:!0,configurable:1!==e.i||"length"!==n,enumerable:r.enumerable,value:t[n]}:r},defineProperty:function(){Pt(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Pt(12)}},Tr={};Lt(Or,(function(e,n){Tr[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}})),Tr.deleteProperty=function(e,n){return Tr.set.call(this,e,n,void 0)},Tr.set=function(e,n,t){return Or.set.call(this,e[0],n,t,e[0])};var Cr=function(){function e(e){var n=this;this.g=br,this.D=!0,this.produce=function(e,t,r){if("function"==typeof e&&"function"!=typeof t){var a=t;t=e;var o=n;return function(e){var n=this;void 0===e&&(e=a);for(var r=arguments.length,i=Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return o.produce(e,(function(e){var r;return(r=t).call.apply(r,[n,e].concat(i))}))}}var i;if("function"!=typeof t&&Pt(6),void 0!==r&&"function"!=typeof r&&Pt(7),Nt(e)){var s=er(n),c=lr(n,e,void 0),u=!0;try{i=t(c),u=!1}finally{u?Qt(s):Zt(s)}return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(e){return Jt(s,r),tr(e,s)}),(function(e){throw Qt(s),e})):(Jt(s,r),tr(i,s))}if(!e||"object"!=typeof e){if(void 0===(i=t(e))&&(i=e),i===Sr&&(i=void 0),n.D&&$t(i,!0),r){var l=[],f=[];Ht("Patches").M(e,i,l,f),r(l,f)}return i}Pt(21,e)},this.produceWithPatches=function(e,t){if("function"==typeof e)return function(t){for(var r=arguments.length,a=Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return n.produceWithPatches(t,(function(n){return e.apply(void 0,[n].concat(a))}))};var r,a,o=n.produce(e,t,(function(e,n){r=e,a=n}));return"undefined"!=typeof Promise&&o instanceof Promise?o.then((function(e){return[e,r,a]})):[o,r,a]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var n=e.prototype;return n.createDraft=function(e){Nt(e)||Pt(8),Mt(e)&&(e=fr(e));var n=er(this),t=lr(this,e,void 0);return t[_r].C=!0,Zt(n),t},n.finishDraft=function(e,n){var t=(e&&e[_r]).A;return Jt(t,n),tr(void 0,t)},n.setAutoFreeze=function(e){this.D=e},n.setUseProxies=function(e){e&&!br&&Pt(20),this.g=e},n.applyPatches=function(e,n){var t;for(t=n.length-1;t>=0;t--){var r=n[t];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}t>-1&&(n=n.slice(t+1));var a=Ht("Patches").$;return Mt(e)?a(e,n):this.produce(e,(function(e){return a(e,n)}))},e}(),Ar=new Cr,Fr=Ar.produce,Pr=(Ar.produceWithPatches.bind(Ar),Ar.setAutoFreeze.bind(Ar),Ar.setUseProxies.bind(Ar),Ar.applyPatches.bind(Ar),Ar.createDraft.bind(Ar),Ar.finishDraft.bind(Ar),Fr);function Mr(e){var n=function(e,n){if("object"!==At(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,n||"default");if("object"!==At(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===At(n)?n:String(n)}function Nr(e,n,t){return(n=Mr(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Lr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Rr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Lr(Object(t),!0).forEach((function(n){Nr(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Lr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Dr(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var jr="function"===typeof Symbol&&Symbol.observable||"@@observable",Br=function(){return Math.random().toString(36).substring(7).split("").join(".")},zr={INIT:"@@redux/INIT"+Br(),REPLACE:"@@redux/REPLACE"+Br(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Br()}};function Ur(e){if("object"!==typeof e||null===e)return!1;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}function Vr(e,n,t){var r;if("function"===typeof n&&"function"===typeof t||"function"===typeof t&&"function"===typeof arguments[3])throw new Error(Dr(0));if("function"===typeof n&&"undefined"===typeof t&&(t=n,n=void 0),"undefined"!==typeof t){if("function"!==typeof t)throw new Error(Dr(1));return t(Vr)(e,n)}if("function"!==typeof e)throw new Error(Dr(2));var a=e,o=n,i=[],s=i,c=!1;function u(){s===i&&(s=i.slice())}function l(){if(c)throw new Error(Dr(3));return o}function f(e){if("function"!==typeof e)throw new Error(Dr(4));if(c)throw new Error(Dr(5));var n=!0;return u(),s.push(e),function(){if(n){if(c)throw new Error(Dr(6));n=!1,u();var t=s.indexOf(e);s.splice(t,1),i=null}}}function d(e){if(!Ur(e))throw new Error(Dr(7));if("undefined"===typeof e.type)throw new Error(Dr(8));if(c)throw new Error(Dr(9));try{c=!0,o=a(o,e)}finally{c=!1}for(var n=i=s,t=0;t<n.length;t++){(0,n[t])()}return e}return d({type:zr.INIT}),(r={dispatch:d,subscribe:f,getState:l,replaceReducer:function(e){if("function"!==typeof e)throw new Error(Dr(10));a=e,d({type:zr.REPLACE})}})[jr]=function(){var e,n=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(Dr(11));function t(){e.next&&e.next(l())}return t(),{unsubscribe:n(t)}}})[jr]=function(){return this},e},r}function Wr(e){for(var n=Object.keys(e),t={},r=0;r<n.length;r++){var a=n[r];0,"function"===typeof e[a]&&(t[a]=e[a])}var o,i=Object.keys(t);try{!function(e){Object.keys(e).forEach((function(n){var t=e[n];if("undefined"===typeof t(void 0,{type:zr.INIT}))throw new Error(Dr(12));if("undefined"===typeof t(void 0,{type:zr.PROBE_UNKNOWN_ACTION()}))throw new Error(Dr(13))}))}(t)}catch(s){o=s}return function(e,n){if(void 0===e&&(e={}),o)throw o;for(var r=!1,a={},s=0;s<i.length;s++){var c=i[s],u=t[c],l=e[c],f=u(l,n);if("undefined"===typeof f){n&&n.type;throw new Error(Dr(14))}a[c]=f,r=r||f!==l}return(r=r||i.length!==Object.keys(e).length)?a:e}}function Gr(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return 0===n.length?function(e){return e}:1===n.length?n[0]:n.reduce((function(e,n){return function(){return e(n.apply(void 0,arguments))}}))}function $r(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){return function(){var t=e.apply(void 0,arguments),r=function(){throw new Error(Dr(15))},a={getState:t.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=n.map((function(e){return e(a)}));return r=Gr.apply(void 0,o)(t.dispatch),Rr(Rr({},t),{},{dispatch:r})}}}function Kr(e){return function(n){var t=n.dispatch,r=n.getState;return function(n){return function(a){return"function"===typeof a?a(t,r,e):n(a)}}}}var qr=Kr();qr.withExtraArgument=Kr;var Hr=qr,Xr=function(){var e=function(n,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])},e(n,t)};return function(n,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),Yr=function(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(t)throw new TypeError("Generator is already executing.");for(;i;)try{if(t=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=n.call(e,i)}catch(s){o=[6,s],r=0}finally{t=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Jr=function(e,n){for(var t=0,r=n.length,a=e.length;t<r;t++,a++)e[a]=n[t];return e},Qr=Object.defineProperty,Zr=Object.defineProperties,ea=Object.getOwnPropertyDescriptors,na=Object.getOwnPropertySymbols,ta=Object.prototype.hasOwnProperty,ra=Object.prototype.propertyIsEnumerable,aa=function(e,n,t){return n in e?Qr(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t},oa=function(e,n){for(var t in n||(n={}))ta.call(n,t)&&aa(e,t,n[t]);if(na)for(var r=0,a=na(n);r<a.length;r++){t=a[r];ra.call(n,t)&&aa(e,t,n[t])}return e},ia=function(e,n){return Zr(e,ea(n))},sa=function(e,n,t){return new Promise((function(r,a){var o=function(e){try{s(t.next(e))}catch(n){a(n)}},i=function(e){try{s(t.throw(e))}catch(n){a(n)}},s=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(o,i)};s((t=t.apply(e,n)).next())}))},ca="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?Gr:Gr.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function ua(e){if("object"!==typeof e||null===e)return!1;var n=Object.getPrototypeOf(e);if(null===n)return!0;for(var t=n;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return n===t}var la=function(e){function n(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var a=e.apply(this,t)||this;return Object.setPrototypeOf(a,n.prototype),a}return Xr(n,e),Object.defineProperty(n,Symbol.species,{get:function(){return n},enumerable:!1,configurable:!0}),n.prototype.concat=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return e.prototype.concat.apply(this,n)},n.prototype.prepend=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 1===e.length&&Array.isArray(e[0])?new(n.bind.apply(n,Jr([void 0],e[0].concat(this)))):new(n.bind.apply(n,Jr([void 0],e.concat(this))))},n}(Array);function fa(e){return Nt(e)?Pr(e,(function(){})):e}function da(){return function(e){return function(e){void 0===e&&(e={});var n=e.thunk,t=void 0===n||n,r=(e.immutableCheck,e.serializableCheck,new la);t&&(!function(e){return"boolean"===typeof e}(t)?r.push(Hr.withExtraArgument(t.extraArgument)):r.push(Hr));0;return r}(e)}}var pa=!0;function ma(e,n){function t(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(n){var a=n.apply(void 0,t);if(!a)throw new Error("prepareAction did not return an object");return oa(oa({type:e,payload:a.payload},"meta"in a&&{meta:a.meta}),"error"in a&&{error:a.error})}return{type:e,payload:t[0]}}return t.toString=function(){return""+e},t.type=e,t.match=function(n){return n.type===e},t}function ha(e){var n,t={},r=[],a={addCase:function(e,n){var r="string"===typeof e?e:e.type;if(r in t)throw new Error("addCase cannot be called with two reducers for the same action type");return t[r]=n,a},addMatcher:function(e,n){return r.push({matcher:e,reducer:n}),a},addDefaultCase:function(e){return n=e,a}};return e(a),[t,r,n]}function ga(e){var n=e.name;if(!n)throw new Error("`name` is a required option for createSlice");var t,r="function"==typeof e.initialState?e.initialState:fa(e.initialState),a=e.reducers||{},o=Object.keys(a),i={},s={},c={};function u(){var n="function"===typeof e.extraReducers?ha(e.extraReducers):[e.extraReducers],t=n[0],a=void 0===t?{}:t,o=n[1],i=void 0===o?[]:o,c=n[2],u=void 0===c?void 0:c,l=oa(oa({},a),s);return function(e,n,t,r){void 0===t&&(t=[]);var a,o="function"===typeof n?ha(n):[n,t,r],i=o[0],s=o[1],c=o[2];if(function(e){return"function"===typeof e}(e))a=function(){return fa(e())};else{var u=fa(e);a=function(){return u}}function l(e,n){void 0===e&&(e=a());var t=Jr([i[n.type]],s.filter((function(e){return(0,e.matcher)(n)})).map((function(e){return e.reducer})));return 0===t.filter((function(e){return!!e})).length&&(t=[c]),t.reduce((function(e,t){if(t){var r;if(Mt(e))return void 0===(r=t(e,n))?e:r;if(Nt(e))return Pr(e,(function(e){return t(e,n)}));if(void 0===(r=t(e,n))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return l.getInitialState=a,l}(r,(function(e){for(var n in l)e.addCase(n,l[n]);for(var t=0,r=i;t<r.length;t++){var a=r[t];e.addMatcher(a.matcher,a.reducer)}u&&e.addDefaultCase(u)}))}return o.forEach((function(e){var t,r,o=a[e],u=n+"/"+e;"reducer"in o?(t=o.reducer,r=o.prepare):t=o,i[e]=t,s[u]=t,c[e]=r?ma(u,r):ma(u)})),{name:n,reducer:function(e,n){return t||(t=u()),t(e,n)},actions:c,caseReducers:i,getInitialState:function(){return t||(t=u()),t.getInitialState()}}}var ya=function(e){void 0===e&&(e=21);for(var n="",t=e;t--;)n+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return n},va=["name","message","stack","code"],ba=function(e,n){this.payload=e,this.meta=n},Sa=function(e,n){this.payload=e,this.meta=n},wa=function(e){if("object"===typeof e&&null!==e){for(var n={},t=0,r=va;t<r.length;t++){var a=r[t];"string"===typeof e[a]&&(n[a]=e[a])}return n}return{message:String(e)}};!function(){function e(e,n,t){var r=ma(e+"/fulfilled",(function(e,n,t,r){return{payload:e,meta:ia(oa({},r||{}),{arg:t,requestId:n,requestStatus:"fulfilled"})}})),a=ma(e+"/pending",(function(e,n,t){return{payload:void 0,meta:ia(oa({},t||{}),{arg:n,requestId:e,requestStatus:"pending"})}})),o=ma(e+"/rejected",(function(e,n,r,a,o){return{payload:a,error:(t&&t.serializeError||wa)(e||"Rejected"),meta:ia(oa({},o||{}),{arg:r,requestId:n,rejectedWithValue:!!a,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),i="undefined"!==typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){0},e}();return Object.assign((function(e){return function(s,c,u){var l,f=(null==t?void 0:t.idGenerator)?t.idGenerator(e):ya(),d=new i;function p(e){l=e,d.abort()}var m=function(){return sa(this,null,(function(){var i,m,h,g,y,v;return Yr(this,(function(b){switch(b.label){case 0:return b.trys.push([0,4,,5]),g=null==(i=null==t?void 0:t.condition)?void 0:i.call(t,e,{getState:c,extra:u}),null===(S=g)||"object"!==typeof S||"function"!==typeof S.then?[3,2]:[4,g];case 1:g=b.sent(),b.label=2;case 2:if(!1===g||d.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,y=new Promise((function(e,n){return d.signal.addEventListener("abort",(function(){return n({name:"AbortError",message:l||"Aborted"})}))})),s(a(f,e,null==(m=null==t?void 0:t.getPendingMeta)?void 0:m.call(t,{requestId:f,arg:e},{getState:c,extra:u}))),[4,Promise.race([y,Promise.resolve(n(e,{dispatch:s,getState:c,extra:u,requestId:f,signal:d.signal,abort:p,rejectWithValue:function(e,n){return new ba(e,n)},fulfillWithValue:function(e,n){return new Sa(e,n)}})).then((function(n){if(n instanceof ba)throw n;return n instanceof Sa?r(n.payload,f,e,n.meta):r(n,f,e)}))])];case 3:return h=b.sent(),[3,5];case 4:return v=b.sent(),h=v instanceof ba?o(null,f,e,v.payload,v.meta):o(v,f,e),[3,5];case 5:return t&&!t.dispatchConditionRejection&&o.match(h)&&h.meta.condition||s(h),[2,h]}var S}))}))}();return Object.assign(m,{abort:p,requestId:f,arg:e,unwrap:function(){return m.then(_a)}})}}),{pending:a,rejected:o,fulfilled:r,typePrefix:e})}e.withTypes=function(){return e}}();function _a(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}Object.assign;var ka="listenerMiddleware";ma(ka+"/add"),ma(ka+"/removeAll"),ma(ka+"/remove");"function"===typeof queueMicrotask&&queueMicrotask.bind("undefined"!==typeof window?window:"undefined"!==typeof t.g?t.g:globalThis);var xa,Ia=function(e){return function(n){setTimeout(n,e)}};"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Ia(10);pr();var Ea=t(248),Oa=t(327),Ta=t(164);var Ca=function(e){e()},Aa=function(){return Ca},Fa=(0,o.createContext)(null);function Pa(){return(0,o.useContext)(Fa)}var Ma=function(){throw new Error("uSES not initialized!")},Na=Ma,La=function(e,n){return e===n};function Ra(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fa,n=e===Fa?Pa:function(){return(0,o.useContext)(e)};return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:La;var r=n(),a=r.store,i=r.subscription,s=r.getServerState,c=Na(i.addNestedSub,a.getState,s||a.getState,e,t);return(0,o.useDebugValue)(c),c}}var Da=Ra();var ja={notify:function(){},get:function(){return[]}};function Ba(e,n){var t,r=ja;function a(){i.onStateChange&&i.onStateChange()}function o(){t||(t=n?n.addNestedSub(a):e.subscribe(a),r=function(){var e=Aa(),n=null,t=null;return{clear:function(){n=null,t=null},notify:function(){e((function(){for(var e=n;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],t=n;t;)e.push(t),t=t.next;return e},subscribe:function(e){var r=!0,a=t={callback:e,next:null,prev:t};return a.prev?a.prev.next=a:n=a,function(){r&&null!==n&&(r=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:n=a.next)}}}}())}var i={addNestedSub:function(e){return o(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:a,isSubscribed:function(){return Boolean(t)},trySubscribe:o,tryUnsubscribe:function(){t&&(t(),t=void 0,r.clear(),r=ja)},getListeners:function(){return r}};return i}var za=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?o.useLayoutEffect:o.useEffect;var Ua=function(e){var n=e.store,t=e.context,r=e.children,a=e.serverState,i=(0,o.useMemo)((function(){var e=Ba(n);return{store:n,subscription:e,getServerState:a?function(){return a}:void 0}}),[n,a]),s=(0,o.useMemo)((function(){return n.getState()}),[n]);za((function(){var e=i.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),s!==n.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[i,s]);var c=t||Fa;return o.createElement(c.Provider,{value:i},r)};function Va(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fa,n=e===Fa?Pa:function(){return(0,o.useContext)(e)};return function(){return n().store}}var Wa=Va();function Ga(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fa,n=e===Fa?Wa:Va(e);return function(){return n().dispatch}}var $a,Ka=Ga();!function(e){Na=e}(Oa.useSyncExternalStoreWithSelector),function(e){e}(Ea.useSyncExternalStore),$a=Ta.unstable_batchedUpdates,Ca=$a;var qa=["pd","wasm"],Ha={url:null,filepath:null,arrayBuffer:null,focusOn:"local"},Xa=ga({name:"buildInput",initialState:Ha,reducers:{setUrl:function(e,n){e.url=n.payload,e.focusOn="url"},fetchUrlError:function(e,n){},fetchUrlSuccess:function(e,n){e.filepath=null,e.url=n.payload.url,e.arrayBuffer=n.payload.arrayBuffer},setLocalFile:function(e,n){e.url=null,e.filepath=n.payload.filepath,e.arrayBuffer=n.payload.arrayBuffer,e.focusOn="local"},setFocusOn:function(e,n){e.focusOn=n.payload},clear:function(){return Ha}}}),Ya=["wav","wasm"],Ja={format:null,codeTarget:"JavaScript",previewDurationSeconds:30},Qa=ga({name:"buildOutput",initialState:Ja,reducers:{setFormat:function(e,n){e.format=n.payload},setCodeTarget:function(e,n){e.codeTarget=n.payload},setPreviewDurationSeconds:function(e,n){e.previewDurationSeconds=n.payload},clear:function(){return Ja}},extraReducers:function(e){e.addCase(Xa.actions.setFocusOn,(function(e){e.format=null}))}});function Za(e,n,t,r,a,o,i){try{var s=e[o](i),c=s.value}catch(u){return void t(u)}s.done?n(c):Promise.resolve(c).then(r,a)}function eo(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){Za(o,r,a,i,s,"next",e)}function s(e){Za(o,r,a,i,s,"throw",e)}i(void 0)}))}}var no=null,to=function(e){return no=e},ro=function(){var e=eo(Ft().mark((function e(n,t){var r,a,o,i,s;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(no){e.next=2;break}throw new Error("assemblyscript compiler was not set properly. Please use WebPd's setAsc function to initialize it.");case 2:return r={optimizeLevel:3,debug:!0,runtime:"incremental",exportRuntime:!0,sourceMap:!0},32===t&&(r.use=["Math=NativeMathf"]),e.next=6,no.compileString(n,r);case 6:if(a=e.sent,o=a.error,i=a.binary,s=a.stderr,!o){e.next=12;break}throw new Error(s.toString());case 12:return e.abrupt("return",i.buffer);case 13:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();function ao(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Mr(r.key),r)}}function oo(e,n,t){return n&&ao(e.prototype,n),t&&ao(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function io(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function so(e,n){return so=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,n){return e.__proto__=n,e},so(e,n)}function co(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),n&&so(e,n)}function uo(e){return uo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},uo(e)}function lo(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function fo(e,n){if(n&&("object"===At(n)||"function"===typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function po(e){var n=lo();return function(){var t,r=uo(e);if(n){var a=uo(this).constructor;t=Reflect.construct(r,arguments,a)}else t=r.apply(this,arguments);return fo(this,t)}}function mo(e,n,t){return mo=lo()?Reflect.construct.bind():function(e,n,t){var r=[null];r.push.apply(r,n);var a=new(Function.bind.apply(e,r));return t&&so(a,t.prototype),a},mo.apply(null,arguments)}function ho(e){var n="function"===typeof Map?new Map:void 0;return ho=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return mo(e,arguments,uo(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),so(t,e)},ho(e)}var go=/\\(\$\d+)/g,yo=/\\\\\\,/g,vo=/\\\\\\;/g,bo=function(e){try{return So(e)}catch(n){if(!(n instanceof xo))throw n}try{return ko(e)}catch(n){if(!(n instanceof xo))throw n}throw new xo("Not a valid arg ".concat(e))},So=function(e){if(Io(e))return e;if(Eo(e)){var n=Number(e);if(isNaN(n))throw new xo("Not a valid number arg ".concat(e));return n}throw new xo("Not a valid number arg ".concat(e))},wo=function(e){if(void 0===e)throw new xo("Received undefined");var n=parseInt(e,10);if(isNaN(n))throw new xo("Invalid int received");return n},_o=function(e){var n=So(e);if(0===n||1===n)return n;throw new xo("Should be 0 or 1")},ko=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!Eo(e))throw new xo("Not a valid string arg ".concat(e));if(null!==n&&e===n)return"";for(var t,r=e.replace(yo,",").replace(vo,";");t=go.exec(r);)r=r.replace(t[0],t[1]);return r},xo=function(e){co(t,e);var n=po(t);function t(){return io(this,t),n.apply(this,arguments)}return oo(t)}(ho(Error)),Io=function(e){return Number.isFinite(e)},Eo=function(e){return"string"===typeof e};function Oo(e,n){if(n)for(var t=n;t.length;){"f"===t.shift()&&(e.layout.width=So(t.shift()))}return e}function To(){To=function(e,n){return new t(e,void 0,n)};var e=RegExp.prototype,n=new WeakMap;function t(e,r,a){var o=new RegExp(e,r);return n.set(o,a||n.get(e)),so(o,t.prototype)}function r(e,t){var r=n.get(t);return Object.keys(r).reduce((function(n,t){var a=r[t];if("number"==typeof a)n[t]=e[a];else{for(var o=0;void 0===e[a[o]]&&o+1<a.length;)o++;n[t]=e[a[o]]}return n}),Object.create(null))}return co(t,RegExp),t.prototype.exec=function(n){var t=e.exec.call(this,n);if(t){t.groups=r(t,this);var a=t.indices;a&&(a.groups=r(a,this))}return t},t.prototype[Symbol.replace]=function(t,a){if("string"==typeof a){var o=n.get(this);return e[Symbol.replace].call(this,t,a.replace(/\$<([^>]+)>/g,(function(e,n){var t=o[n];return"$"+(Array.isArray(t)?t.join("$"):t)})))}if("function"==typeof a){var i=this;return e[Symbol.replace].call(this,t,(function(){var e=arguments;return"object"!=At(e[e.length-1])&&(e=[].slice.call(e)).push(r(e,i)),a.apply(this,e)}))}return e[Symbol.replace].call(this,t,a)},To.apply(this,arguments)}var Co=To(/(((?<!\\)\s*)((?<!\\\\)\\,)((?<!\\)\s*))|(((?<!\\)\s*)((?<!\\\\)\\;)((?<!\\)\s*))|((?<!\\)\s)+|\r\n?|\n/,{comma:1,semi:5}),Ao=/,(?!\\)/,Fo=/(#((.|\r|\n)*?)[^\\\\])\r{0,1}\n{0,1};\r{0,1}(\n|$)/gi,Po=function(e){return e.split("").reverse().join("")},Mo=function(e){var n=Array.from(e.matchAll(new RegExp(Co,"g"))),t=[];n.forEach((function(r,a){var o=0===a?0:n[a-1].index+n[a-1][0].length,i=r.index,s=e.slice(o,i);s.length&&t.push(s),r[1]?t.push(","):r[5]&&t.push(";")}));var r=n.slice(-1)[0];return r&&t.push(e.slice(r.index+r[0].length)),t},No={floatatom:"floatatom",symbolatom:"symbolatom",listbox:"listbox",bng:"bng",tgl:"tgl",nbx:"nbx",vsl:"vsl",hsl:"hsl",vradio:"vradio",hradio:"hradio",vu:"vu",cnv:"cnv",msg:"msg"},Lo=["obj","floatatom","symbolatom","listbox","msg","text"],Ro=function e(){return"".concat(++e.counter)};Ro.counter=-1;var Do=function e(){return"".concat(++e.counter)};Do.counter=-1;var jo,Bo,zo,Uo,Vo,Wo,Go,$o,Ko,qo,Ho=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return t.every((function(n,t){return n===e[t]}))},Xo=function(e){var n=function(e){var n=[];Fo.lastIndex=0;for(var t=null;t=Fo.exec(e);){var r=Po(t[1]).split(Ao).reverse().map(Po),a=e.slice(0,t.index).split("\n").length-1;n.push({tokens:Mo(r[0]),lineAfterComma:r[1]?Mo(r[1]):void 0,lineIndex:a})}return n}(e),t={pd:{rootPatchId:"0",patches:{},arrays:{}},errors:[],warnings:[],tokenizedLines:n,patchTokenizedLinesMap:{}};return Yo(t,!0),Object.keys(t.pd.patches).forEach((function(e){Qo(t,e),Zo(t,e),Jo(t,e),t.patchTokenizedLinesMap[e].length&&t.patchTokenizedLinesMap[e].forEach((function(e){var n=e.tokens,r=e.lineIndex;t.errors.push({message:'"'.concat(n[0]," ").concat(n[1],'" unexpected chunk'),lineIndex:r})}))})),t.errors.length?{status:1,warnings:t.warnings,errors:t.errors}:{status:0,warnings:t.warnings,pd:t.pd}},Yo=function e(n,t){for(var r=Ro(),a=[],o=null,i=null,s=-1,c=!0,u=n.tokenizedLines[0]?n.tokenizedLines[0].lineIndex:-1,l=function(){var t=n.tokenizedLines[0],u=t.tokens,l=t.lineIndex;if(Ho(u,"#N","struct")||Ho(u,"#X","declare")||Ho(u,"#X","scalar")||Ho(u,"#X","f"))return n.warnings.push({message:'"'.concat(u[0]," ").concat(u[1],'" chunk is not supported'),lineIndex:l}),n.tokenizedLines.shift(),"continue";s++,ei(n,l,(function(){if(Ho(u,"#N","canvas")&&0===s)o=n.tokenizedLines.shift();else if(Ho(u,"#N","canvas"))e(n,!1);else if(Ho(u,"#X","obj",u[2],u[3],"table")){var t=n.tokenizedLines.shift().tokens;n.tokenizedLines=[{tokens:["#N","canvas","0","0","100","100","(subpatch)","0"],lineIndex:l},{tokens:["#N","canvas","0","0","100","100","(subpatch)","0"],lineIndex:l},{tokens:["#X","array",ko(t[5]),t[6]||100..toString(),"float","0"],lineIndex:l},{tokens:["#X","restore","0","0","graph"],lineIndex:l},{tokens:["#X","restore",t[2],t[3],"table"],lineIndex:l}].concat(Mn(n.tokenizedLines)),e(n,!1)}else Ho(u,"#X","coords")?i=n.tokenizedLines.shift():Ho(u,"#X","restore")?(n.tokenizedLines[0].tokens=["PATCH",r].concat(Mn(n.tokenizedLines[0].tokens.slice(2))),c=!1):a.push(n.tokenizedLines.shift())}))};n.tokenizedLines.length&&c;)l();null!==o?(t&&(n.pd.rootPatchId=r),n.pd.patches[r]=function(e,n,t,r){var a=t.tokens,o=r?r.tokens:null,i={windowX:wo(a[2]),windowY:wo(a[3]),windowWidth:wo(a[4]),windowHeight:wo(a[5])};if("undefined"!==typeof a[7]&&(i.openOnLoad=_o(a[7])),o&&"undefined"!==typeof o[8]){var s=So(o[8]);i.graphOnParent=s>0?1:0,1===i.graphOnParent&&(i=Rr(Rr({},i),{},{hideObjectNameAndArguments:2===s?1:0,viewportX:o[9]?wo(o[9]):0,viewportY:o[10]?wo(o[10]):0,viewportWidth:wo(o[6]),viewportHeight:wo(o[7])}))}return{id:e,isRoot:n,layout:i,args:[],nodes:{},connections:[],inlets:[],outlets:[]}}(r,t,o,i),n.patchTokenizedLinesMap[r]=a):n.errors.push({message:"Parsing failed #canvas missing",lineIndex:u})},Jo=function(e,n){var t=e.pd.patches[n],r=function(e,n){return parseFloat(e.id)-parseFloat(n.id)},a=function(e,n){return e.layout.x-n.layout.x},o=Object.values(t.nodes).filter((function(e){return["inlet","inlet~"].includes(e.type)})),i=o.every((function(e){return!!e.layout}))?a:r;o.sort(i);var s=Object.values(t.nodes).filter((function(e){return["outlet","outlet~"].includes(e.type)})),c=s.every((function(e){return!!e.layout}))?a:r;s.sort(c),e.pd.patches[n]=Rr(Rr({},t),{},{inlets:o.map((function(e){return e.id})),outlets:s.map((function(e){return e.id}))})},Qo=function(e,n){for(var t=e.patchTokenizedLinesMap[n],r=[],a=null,o=function(){var n=t[0],o=n.tokens,i=n.lineIndex;ei(e,i,(function(){if(Ho(o,"#X","array"))a=function(e,n){var t=n.tokens,r=ko(t[2]),a=bo(t[3]),o=wo(t[5]);return{id:e,args:[r,a,o%2],data:null,layout:{drawAs:["polygon","points","bezier"][o>>>1]}}}(Do(),t.shift()),e.pd.arrays[a.id]=a,r.push({tokens:["ARRAY",a.id],lineAfterComma:[],lineIndex:i});else if(Ho(o,"#A")){if(!a)throw new Error("line ".concat(i,": Unsupported data chunk #A."));if(0===a.args[2])throw new Error("got array data for an array that doesn't save contents.");var n=a.data||[];a.data=n;var s=So(o[1]);o.slice(2).forEach((function(e,t){var r=So(e);Number.isFinite(r)&&(n[s+t]=r)})),t.shift()}else r.push(t.shift())}))};t.length;)o();e.patchTokenizedLinesMap[n]=r},Zo=function(e,n){for(var t=e.pd.patches[n],r=e.patchTokenizedLinesMap[n],a=[],o=-1,i=function(){return"".concat(++o)},s=function(){var n=r[0],o=n.tokens,s=n.lineIndex;ei(e,s,(function(){var e=null;if(Ho(o,"PATCH"))e=function(e,n){var t=n.tokens,r=t[4],a=[];if("pd"!==r&&"graph"!==r&&"table"!==r)throw new Error("unknown canvasType : ".concat(r));return"pd"===r&&void 0!==t[5]&&a.push(ko(t[5])),{id:e,type:r,patchId:ko(t[1]),nodeClass:"subpatch",args:a,layout:{x:wo(t[2]),y:wo(t[3])}}}(i(),r.shift());else if(Ho(o,"ARRAY"))e=function(e,n){var t=n.tokens;return{id:e,args:[],type:"array",nodeClass:"array",arrayId:ko(t[1])}}(i(),r.shift());else if(Lo.some((function(e){return Ho(o,"#X",e)}))){var n=r.shift(),s=function(e,n){var t,r=n[1],a="";return"obj"===r?(a=ko(n[4]),t=n.slice(5)):(a=ko(r),t=n.slice(4)),"text"===r&&(t=[n.slice(4).join(" ")]),{id:e,type:a,args:t,layout:{x:So(n[2]),y:So(n[3])}}}(i(),n.tokens);Object.keys(No).includes(s.type)?(e=function(e){var n=e.args,t=Rr(Rr({},e),{},{type:e.type,nodeClass:"control"});if("floatatom"===t.type||"symbolatom"===t.type||"listbox"===t.type)t.layout=Rr(Rr({},t.layout),{},{widthInChars:So(n[0]),labelPos:So(n[3]),label:ko(n[4],"-")}),t.args=[So(n[1]),So(n[2]),ko(n[5],"-"),ko(n[6],"-")];else if("msg"===t.type)t.args=t.args.map(bo);else if("bng"===t.type)t.layout=Rr(Rr({},t.layout),{},{size:So(n[0]),hold:So(n[1]),interrupt:So(n[2]),label:ko(n[6],"empty"),labelX:So(n[7]),labelY:So(n[8]),labelFont:n[9],labelFontSize:So(n[10]),bgColor:n[11],fgColor:n[12],labelColor:n[13]}),t.args=[_o(n[3]),ko(n[5],"empty"),ko(n[4],"empty")];else if("tgl"===t.type)t.layout=Rr(Rr({},t.layout),{},{size:So(n[0]),label:ko(n[4],"empty"),labelX:So(n[5]),labelY:So(n[6]),labelFont:n[7],labelFontSize:So(n[8]),bgColor:n[9],fgColor:n[10],labelColor:n[11]}),t.args=[So(n[13]),_o(n[1]),So(n[12]),ko(n[3],"empty"),ko(n[2],"empty")];else if("nbx"===t.type)t.layout=Rr(Rr({},t.layout),{},{widthInChars:So(n[0]),height:So(n[1]),log:So(n[4]),label:ko(n[8],"empty"),labelX:So(n[9]),labelY:So(n[10]),labelFont:n[11],labelFontSize:So(n[12]),bgColor:n[13],fgColor:n[14],labelColor:n[15],logHeight:n[17]}),t.args=[So(n[2]),So(n[3]),_o(n[5]),So(n[16]),ko(n[7],"empty"),ko(n[6],"empty")];else if("vsl"===t.type||"hsl"===t.type){t.layout=Rr(Rr({},t.layout),{},{width:So(n[0]),height:So(n[1]),log:So(n[4]),label:ko(n[8],"empty"),labelX:So(n[9]),labelY:So(n[10]),labelFont:n[11],labelFontSize:So(n[12]),bgColor:n[13],fgColor:n[14],labelColor:n[15],steadyOnClick:n[17]});var r=So(n[2]),a=So(n[3]),o=_o(n[4]),i=So(n[16]),s="hsl"===t.type?t.layout.width:t.layout.height,c=0;if(o){var u=Math.log(a/r)/(s-1);c=r*Math.exp(u*i*.01)}else c=r+(a-r)*i/(100*(s-1));t.args=[r,a,_o(n[5]),c,ko(n[7],"empty"),ko(n[6],"empty")]}else if("vradio"===t.type||"hradio"===t.type)t.layout=Rr(Rr({},t.layout),{},{size:So(n[0]),label:ko(n[6],"empty"),labelX:So(n[7]),labelY:So(n[8]),labelFont:n[9],labelFontSize:So(n[10]),bgColor:n[11],fgColor:n[12],labelColor:n[13]}),t.args=[So(n[3]),_o(n[2]),So(n[14]),ko(n[5],"empty"),ko(n[4],"empty"),_o(n[2])];else if("vu"===t.type)t.layout=Rr(Rr({},t.layout),{},{width:So(n[0]),height:So(n[1]),label:ko(n[3],"empty"),labelX:So(n[4]),labelY:So(n[5]),labelFont:n[6],labelFontSize:So(n[7]),bgColor:n[8],labelColor:n[9],log:So(n[10])}),t.args=[ko(n[2],"empty"),ko(n[11])];else{if("cnv"!==t.type)throw new Error("Unexpected control node ".concat(t.type));t.layout=Rr(Rr({},t.layout),{},{size:So(n[0]),width:So(n[1]),height:So(n[2]),label:ko(n[5],"empty"),labelX:So(n[6]),labelY:So(n[7]),labelFont:n[8],labelFontSize:So(n[9]),bgColor:n[10],labelColor:n[11]}),t.args=[ko(n[4],"empty"),ko(n[3],"empty"),ko(n[12])]}return t}(s),e=Oo(e,n.lineAfterComma)):(e=function(e){var n=Rr(Rr({},e),{},{nodeClass:"generic"});return n.args=n.args.map(bo),n}(s),e=Oo(e,n.lineAfterComma))}e?t.nodes[e.id]=e:Ho(o,"#X","connect")?t.connections.push(function(e){var n=e.tokens;return{source:{nodeId:ko(n[2]),portletId:wo(n[3])},sink:{nodeId:ko(n[4]),portletId:wo(n[5])}}}(r.shift())):a.push(r.shift())}))};r.length;)s();e.patchTokenizedLinesMap[n]=a},ei=function(e,n,t){try{t()}catch(r){if(!(r instanceof xo))throw r;e.errors.push({message:r.message,lineIndex:n})}},ni=function(e){return function(){var n=eo(Ft().mark((function n(t){var r,a;return Ft().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=null,n.prev=1,n.next=4,e(t);case 4:r=n.sent,n.next=14;break;case 7:if(n.prev=7,n.t0=n.catch(1),!(n.t0 instanceof ti)){n.next=13;break}return n.abrupt("return",{status:1,unknownNodeType:t});case 13:throw n.t0;case 14:if(0!==(a=Xo(r)).status){n.next=19;break}return n.abrupt("return",{status:0,pd:a.pd,parsingWarnings:a.warnings});case 19:return n.abrupt("return",{status:1,parsingErrors:a.errors,parsingWarnings:a.warnings});case 20:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(e){return n.apply(this,arguments)}}()},ti=function(e){co(t,e);var n=po(t);function t(){return io(this,t),n.apply(this,arguments)}return oo(t)}(ho(Error)),ri=function(e,n){var t=e[n];if(!t)throw new Error("no artefact was generated for ".concat(n));return t},ai=function(e){return(new TextDecoder).decode(e)},oi={Var:function(e){return"".concat(e)},Func:function(e){return"(".concat(e.join(", "),")")}},ii={Var:function(e,n){return"".concat(e,": ").concat(n)},Func:function(e,n){return"(".concat(e.join(", "),"): ").concat(n)}},si=function(e){for(var n="",t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];for(var o=0;o<e.length;o++)n+=e[o],(r[o]||0===r[o])&&(n+=ci(r[o]));return n},ci=function e(n){return Array.isArray(n)?n.map(e).filter((function(e){return e.length})).join("\n"):n.toString()},ui=function(e){for(var n=[],t=0;t<e;t++)n.push(t);return n},li=function(e,n){var t={};return Object.entries(e).forEach((function(e,r){var a=bt(e,2),o=a[0],i=a[1];t[o]=n(i,o,r)})),t},fi=function(e,n){var t={};return e.forEach((function(e,r){var a=bt(n(e,r),2),o=a[0],i=a[1];t[o]=i})),t},di=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var r=n.find((function(e){return bt(e,1)[0]}));if(!r)throw new Error("no route found");return r[1]},pi=function(e,n){return e?"function"===typeof n?n():n:""},mi=function(e,n){var t=e[n];if(t)return t;throw new Error('Node "'.concat(n,'" not found in graph'))},hi=function(e,n){var t=e.inlets[n];if(t)return t;throw new Error('Inlet "'.concat(n,'" not found in node ').concat(e.id," of type ").concat(e.type))},gi=function(e,n){var t=e.outlets[n];if(t)return t;throw new Error('Outlet "'.concat(n,'" not found in node ').concat(e.id," of type ").concat(e.type))},yi=function(e,n){return e.sinks[n]||[]},vi=function(e,n){return e.sources[n]||[]},bi=function(e,n){var t=[];return n.forEach((function(n){return Si(t,[],e,n)})),t},Si=function e(n,t,r,a){var o=[].concat(Mn(t),[a.id]);Object.entries(a.sources).filter((function(e){var n=bt(e,1)[0];return"signal"===hi(a,n).type})).forEach((function(a){var i=bt(a,2);i[0];i[1].forEach((function(a){var i=mi(r,a.nodeId);-1===t.indexOf(i.id)&&e(n,o,r,i)}))})),-1===n.indexOf(a.id)&&n.push(a.id)},wi=function(e,n){var t=[];return n.forEach((function(n){_i(t,e,n)})),t},_i=function e(n,t,r){-1===n.indexOf(r.id)&&(n.push(r.id),Object.entries(r.sinks).filter((function(e){var n=bt(e,1)[0];return"message"===gi(r,n).type})).forEach((function(r){var a=bt(r,2);a[0];a[1].forEach((function(r){e(n,t,mi(t,r.nodeId))}))})))},ki=function(e,n){return Object.entries(e).reduce((function(e,t){var r=bt(t,2),a=r[0],o=r[1];return[].concat(Mn(e),Mn(o.map((function(e){return[e,{nodeId:n,portletId:a}]}))))}),[])},xi=function(e,n){return Object.entries(e).reduce((function(e,t){var r=bt(t,2),a=r[0],o=r[1];return[].concat(Mn(e),Mn(o.map((function(e){return[{nodeId:n,portletId:a},e]}))))}),[])},Ii=function(e,n){return fi(Object.values(e).filter((function(e){return n.includes(e.id)})),(function(e){return[e.id,Rr(Rr({},e),{},{sources:Oi(e.sources,n),sinks:Ei(e.sinks,n)})]}))},Ei=function(e,n){var t={};return Object.entries(e).forEach((function(e){var r=bt(e,2),a=r[0],o=r[1].filter((function(e){var t=e.nodeId;return n.includes(t)}));o.length&&(t[a]=o)})),t},Oi=function(e,n){var t={};return Object.entries(e).forEach((function(e){var r=bt(e,2),a=r[0],o=r[1].filter((function(e){var t=e.nodeId;return n.includes(t)}));o.length&&(t[a]=o)})),t},Ti=function(e,n){var t=e[n];if(!t)throw new Error("node [".concat(n,"] is not implemented"));return Rr({stateVariables:{},declare:function(){return""},loop:function(){return""},messages:function(){return{}},sharedCode:[]},t)},Ci=function(e){var n=e.audioSettings,t=e.inletCallerSpecs,r=e.outletListenerSpecs,a=e.codeVariableNames;return{audioSettings:Rr(Rr({},n),{},{sampleRate:0,blockSize:0}),compilation:{inletCallerSpecs:t,outletListenerSpecs:r,codeVariableNames:{inletCallers:a.inletCallers,outletListeners:a.outletListeners}}}},Ai=function(e,n){var t=32===e?"f32":"f64",r=32===e?"Float32Array":"Float64Array",a=32===e?"getFloat32":"getFloat64",o=32===e?"setFloat32":"setFloat64";return n.replaceAll("${Int}","i32").replaceAll("${Float}",t).replaceAll("${FloatArray}",r).replaceAll("${getFloat}",a).replaceAll("${setFloat}",o).replaceAll("${FS_OPERATION_SUCCESS}",(0).toString()).replaceAll("${FS_OPERATION_FAILURE}",1..toString())},Fi=function(e){return 64===e?Float64Array:Float32Array},Pi=function(e){var n=e.graph,t=e.graphTraversal,r=e.macros,a=e.codeVariableNames,o=e.nodeImplementations,i=e.outletListenerSpecs,c=e.precompiledPortlets,u=c.precompiledInlets,l=c.precompiledOutlets,f=e.debug,d=t.map((function(e){return mi(n,e)})),p=r.Var,m=r.Func,h=a.globs,g=new Set,y=function(e,n){return(u[e]||[]).includes(n)},v=function(e,n){return(l[e]||[]).includes(n)};return si(jo||(jo=s(["\n        let "," = 0\n        let "," = 0\n        let "," = 0\n        let "," = 0\n        function "," "," {}\n\n\n        ","\n\n        ","\n\n        ","\n    "])),p(h.iterFrame,"Int"),p(h.frame,"Int"),p(h.blockSize,"Int"),p(h.sampleRate,"Float"),h.nullMessageReceiver,m([p("m","Message")],"void"),d.map((function(e){return Ti(o,e.type).sharedCode.map((function(e){return e({macros:r})})).filter((function(e){return!g.has(e)&&(g.add(e),!0)}))})),d.map((function(n){var t=a.nodes[n.id],i=t.ins,s=t.outs,c=t.rcvs,u=t.snds,l=t.state,d=Ti(o,n.type),g=d.messages({macros:r,globs:h,state:l,snds:u,node:n,compilation:e});return[Object.values(n.inlets).filter((function(e){return"signal"===e.type})).filter((function(e){return!y(n.id,e.id)})).map((function(e){return"let ".concat(p(i[e.id],"Float")," = 0")})),Object.values(n.outlets).filter((function(e){return"signal"===e.type})).filter((function(e){return!v(n.id,e.id)})).map((function(e){return"let ".concat(p(s[e.id],"Float")," = 0")})),Object.values(n.inlets).filter((function(e){return"message"===e.type})).filter((function(e){return!y(n.id,e.id)})).map((function(e){if("string"!==typeof g[e.id])throw new Error('Message receiver for inlet "'.concat(e.id,'" of node type "').concat(n.type,'" is not implemented'));return"\n                            function ".concat(c[e.id]," ").concat(m([p(h.m,"Message")],"void")," {\n                                ").concat(g[e.id],"\n                                throw new Error('[").concat(n.type,'], id "').concat(n.id,'", inlet "').concat(e.id,"\", unsupported message : ' + msg_display(").concat(h.m,")").concat(f?" + '\\nDEBUG : remember, you must return from message receiver'":"",")\n                            }\n                        ")})),d.declare({macros:r,globs:h,state:l,snds:u,node:n,compilation:e})]})),d.map((function(e){var n=a.nodes[e.id].snds,t=i[e.id]||[];return Object.values(e.outlets).filter((function(e){return"message"===e.type})).filter((function(n){return!v(e.id,n.id)})).map((function(r){var o=t.includes(r.id),i=yi(e,r.id);return si(Bo||(Bo=s(["\n                            function "," "," {\n                                ","\n                            }\n                        "])),n[r.id],m([p("m","Message")],"void"),[o?"".concat(a.outletListeners[e.id][r.id],"(").concat(h.m,")"):"",i.map((function(e){var n=e.nodeId,t=e.portletId;return"".concat(a.nodes[n].rcvs[t],"(").concat(h.m,")")}))])}))})))},Mi=function(e){var n=e.graph,t=e.graphTraversal,r=e.codeVariableNames,a=e.macros,o=e.nodeImplementations,i=r.globs,c=t.map((function(e){return mi(n,e)}));return si(zo||(zo=s(["\n        for ("," = 0; "," < ","; ","++) {\n            _commons_emitFrame(",")\n            ","\n            ","++\n        }\n    "])),i.iterFrame,i.iterFrame,i.blockSize,i.iterFrame,i.frame,c.map((function(n){var t=r.nodes[n.id],s=t.outs,c=t.ins,u=t.snds,l=t.state;return[Ti(o,n.type).loop({macros:a,globs:i,node:n,state:l,ins:c,outs:s,snds:u,compilation:e})]})),i.frame)},Ni="\nconst i32 = (v) => v\nconst f32 = i32\nconst f64 = i32\nconst toInt = (v) => v\nconst toFloat = (v) => v\nconst createFloatArray = (length) => \n    new ${FloatArray}(length)\nconst setFloatDataView = (d, p, v) => d.${setFloat}(p, v)\nconst getFloatDataView = (d, p) => d.${getFloat}(p)\nconst FS_OPERATION_SUCCESS = ".concat(0,"\nconst FS_OPERATION_FAILURE = ").concat(1,"\n"),Li=function(e,n){var t=e.outletListenerSpecs,r=e.codeVariableNames;return si(Uo||(Uo=s(["",""])),Object.entries(t).map((function(e){var t=bt(e,2),a=t[0];return t[1].map((function(e){var t=r.outletListeners[a][e];return n(t,a,e)}))})))},Ri=function(e){var n=e.inletCallerSpecs,t=e.codeVariableNames,r=e.macros,a=r.Var,o=r.Func;return si(Vo||(Vo=s(["",""])),Object.entries(n).map((function(e){var n=bt(e,2),r=n[0];return n[1].map((function(e){return"function ".concat(t.inletCallers[r][e]," ").concat(o([a("m","Message")],"void")," {").concat(t.nodes[r].rcvs[e],"(m)}")}))})))},Di=function(e){return si(Wo||(Wo=s(["\n    ","\n"])),Object.entries(e.arrays).map((function(n){var t=bt(n,2),r=t[0],a=t[1];return'\n        commons_setArray("'.concat(r,'", new ').concat(Fi(e.audioSettings.bitDepth).name,"(").concat(a.length,'))\n        commons_getArray("').concat(r,'").set(').concat(JSON.stringify(Array.from(a)),")\n    ")})))},ji=function(e){var n,t=e.codeVariableNames,r=e.outletListenerSpecs,a=e.inletCallerSpecs,o=e.audioSettings,i=e.codeVariableNames.globs,c=Ci(e),u=Fi(o.bitDepth);return si(Go||(Go=s(["\n        ","\n\n        ","\n\n        ","\n\n        ","\n\n        ","\n\n        const exports = {\n            metadata: ",",\n            configure: (sampleRate, blockSize) => {\n                exports.metadata.audioSettings.sampleRate = sampleRate\n                exports.metadata.audioSettings.blockSize = blockSize\n                "," = sampleRate\n                "," = blockSize\n                _commons_emitEngineConfigure()\n            },\n            loop: (",", ",") => {\n                ","\n            },\n            commons: {\n                getArray: commons_getArray,\n                setArray: (arrayName, array) => commons_setArray(arrayName, new ","(array)),\n            },\n            outletListeners: {\n                ","\n            },\n            inletCallers: {\n                ","\n            },\n            fs: {\n                onReadSoundFile: () => undefined,\n                onWriteSoundFile: () => undefined,\n                onOpenSoundReadStream: () => undefined,\n                onOpenSoundWriteStream: () => undefined,\n                onSoundStreamData: () => undefined,\n                onCloseSoundStream: () => undefined,\n                sendReadSoundFileResponse: x_fs_onReadSoundFileResponse,\n                sendWriteSoundFileResponse: x_fs_onWriteSoundFileResponse,\n                sendSoundStreamData: x_fs_onSoundStreamData,\n                closeSoundStream: x_fs_onCloseSoundStream,\n            },\n        }\n\n        // FS IMPORTS\n        const i_fs_readSoundFile = (...args) => exports.fs.onReadSoundFile(...args)\n        const i_fs_writeSoundFile = (...args) => exports.fs.onWriteSoundFile(...args)\n        const i_fs_openSoundReadStream = (...args) => exports.fs.onOpenSoundReadStream(...args)\n        const i_fs_openSoundWriteStream = (...args) => exports.fs.onOpenSoundWriteStream(...args)\n        const i_fs_sendSoundStreamData = (...args) => exports.fs.onSoundStreamData(...args)\n        const i_fs_closeSoundStream = (...args) => exports.fs.onCloseSoundStream(...args)\n    "])),(n=o.bitDepth,Ai(n,Ni)+"/*\n * Copyright (c) 2012-2020 S\xe9bastien Piquemal <sebpiq@gmail.com>\n *\n * BSD Simplified License.\n * For information on usage and redistribution, and for a DISCLAIMER OF ALL\n * WARRANTIES, see the file, \"LICENSE.txt,\" in this distribution.\n *\n * See https://github.com/sebpiq/WebPd_pd-parser for documentation\n *\n */\n// =========================== BUF API\n/**\n * Ring buffer\n */\nclass buf_SoundBuffer {\n    constructor(length) {\n        this.length = length;\n        this.data = createFloatArray(length);\n        this.writeCursor = 0;\n        this.pullAvailableLength = 0;\n    }\n}\n/** Erases all the content from the buffer */\nfunction buf_create(length) {\n    return new buf_SoundBuffer(length);\n}\n/** Erases all the content from the buffer */\nfunction buf_clear(buffer) {\n    buffer.data.fill(0);\n}\n/**\n * Pushes a block to the buffer, throwing an error if the buffer is full.\n * If the block is written successfully, {@link buf_SoundBuffer#writeCursor}\n * is moved corresponding with the length of data written.\n *\n * @todo : Optimize by allowing to read/write directly from host\n */\nfunction buf_pushBlock(buffer, block) {\n    if (buffer.pullAvailableLength + block.length > buffer.length) {\n        throw new Error('buffer full');\n    }\n    let left = block.length;\n    while (left > 0) {\n        const lengthToWrite = toInt(Math.min(toFloat(buffer.length - buffer.writeCursor), toFloat(left)));\n        buffer.data.set(block.subarray(block.length - left, block.length - left + lengthToWrite), buffer.writeCursor);\n        left -= lengthToWrite;\n        buffer.writeCursor = (buffer.writeCursor + lengthToWrite) % buffer.length;\n        buffer.pullAvailableLength += lengthToWrite;\n    }\n    return buffer.pullAvailableLength;\n}\n/**\n * Pulls a single sample from the buffer.\n * This is a destructive operation, and the sample will be\n * unavailable for subsequent readers with the same operation.\n */\nfunction buf_pullSample(buffer) {\n    if (buffer.pullAvailableLength <= 0) {\n        return 0;\n    }\n    const readCursor = buffer.writeCursor - buffer.pullAvailableLength;\n    buffer.pullAvailableLength -= 1;\n    return buffer.data[readCursor >= 0 ? readCursor : buffer.length + readCursor];\n}\n/**\n * Writes a sample at `@link writeCursor` and increments `writeCursor` by one.\n */\nfunction buf_writeSample(buffer, value) {\n    buffer.data[buffer.writeCursor] = value;\n    buffer.writeCursor = (buffer.writeCursor + 1) % buffer.length;\n}\n/**\n * Reads the sample at position `writeCursor - offset`.\n * @param offset Must be between 0 (for reading the last written sample)\n *  and {@link buf_SoundBuffer#length} - 1. A value outside these bounds will not cause\n *  an error, but might cause unexpected results.\n */\nfunction buf_readSample(buffer, offset) {\n    // R = (buffer.writeCursor - 1 - offset) -> ideal read position\n    // W = R % buffer.length -> wrap it so that its within buffer length bounds (but could be negative)\n    // (W + buffer.length) % buffer.length -> if W negative, (W + buffer.length) shifts it back to positive.\n    return buffer.data[(buffer.length + ((buffer.writeCursor - 1 - offset) % buffer.length)) % buffer.length];\n}\n/*\n * Copyright (c) 2012-2020 S\xe9bastien Piquemal <sebpiq@gmail.com>\n *\n * BSD Simplified License.\n * For information on usage and redistribution, and for a DISCLAIMER OF ALL\n * WARRANTIES, see the file, \"LICENSE.txt,\" in this distribution.\n *\n * See https://github.com/sebpiq/WebPd_pd-parser for documentation\n *\n */\n/**\n * Skeduler id that will never be used.\n * Can be used as a \"no id\", or \"null\" value.\n */\nconst SKED_ID_NULL = -1;\nconst SKED_ID_COUNTER_INIT = 1;\nconst _SKED_WAIT_IN_PROGRESS = 0;\nconst _SKED_WAIT_OVER = 1;\nconst _SKED_MODE_WAIT = 0;\nconst _SKED_MODE_SUBSCRIBE = 1;\n// =========================== SKED API\nclass SkedRequest {\n}\nclass Skeduler {\n}\n/** Creates a new Skeduler. */\nfunction sked_create(isLoggingEvents) {\n    return {\n        eventLog: new Set(),\n        requests: new Map(),\n        callbacks: new Map(),\n        idCounter: SKED_ID_COUNTER_INIT,\n        isLoggingEvents,\n    };\n}\n/**\n * Asks the skeduler to wait for an event to occur and trigger a callback.\n * If the event has already occurred, the callback is triggered instantly\n * when calling the function.\n * Once triggered, the callback is forgotten.\n * @returns an id allowing to cancel the callback with {@link sked_cancel}\n */\nfunction sked_wait(skeduler, event, callback) {\n    if (skeduler.isLoggingEvents === false) {\n        throw new Error(\"Please activate skeduler's isLoggingEvents\");\n    }\n    if (skeduler.eventLog.has(event)) {\n        callback(event);\n        return SKED_ID_NULL;\n    }\n    else {\n        return _sked_createRequest(skeduler, event, callback, _SKED_MODE_WAIT);\n    }\n}\n/**\n * Asks the skeduler to wait for an event to occur and trigger a callback.\n * If the event has already occurred, the callback is NOT triggered.\n * Once triggered, the callback is forgotten.\n * @returns an id allowing to cancel the callback with {@link sked_cancel}\n */\nfunction sked_wait_future(skeduler, event, callback) {\n    return _sked_createRequest(skeduler, event, callback, _SKED_MODE_WAIT);\n}\n/**\n * Asks the skeduler to trigger a callback everytime an event occurs\n * @returns an id allowing to cancel the callback with {@link sked_cancel}\n */\nfunction sked_subscribe(skeduler, event, callback) {\n    return _sked_createRequest(skeduler, event, callback, _SKED_MODE_SUBSCRIBE);\n}\n/** Notifies the skeduler that an event has just occurred. */\nfunction sked_emit(skeduler, event) {\n    if (skeduler.isLoggingEvents === true) {\n        skeduler.eventLog.add(event);\n    }\n    if (skeduler.requests.has(event)) {\n        const requests = skeduler.requests.get(event);\n        const requestsStaying = [];\n        for (let i = 0; i < requests.length; i++) {\n            const request = requests[i];\n            if (skeduler.callbacks.has(request.id)) {\n                skeduler.callbacks.get(request.id)(event);\n                if (request.mode === _SKED_MODE_WAIT) {\n                    skeduler.callbacks.delete(request.id);\n                }\n                else {\n                    requestsStaying.push(request);\n                }\n            }\n        }\n        skeduler.requests.set(event, requestsStaying);\n    }\n}\n/** Cancels a callback */\nfunction sked_cancel(skeduler, id) {\n    skeduler.callbacks.delete(id);\n}\n// =========================== PRIVATE\nfunction _sked_createRequest(skeduler, event, callback, mode) {\n    const id = _sked_nextId(skeduler);\n    const request = { id, mode };\n    skeduler.callbacks.set(id, callback);\n    if (!skeduler.requests.has(event)) {\n        skeduler.requests.set(event, [request]);\n    }\n    else {\n        skeduler.requests.get(event).push(request);\n    }\n    return id;\n}\nfunction _sked_nextId(skeduler) {\n    return skeduler.idCounter++;\n}\n/*\n * Copyright (c) 2012-2020 S\xe9bastien Piquemal <sebpiq@gmail.com>\n *\n * BSD Simplified License.\n * For information on usage and redistribution, and for a DISCLAIMER OF ALL\n * WARRANTIES, see the file, \"LICENSE.txt,\" in this distribution.\n *\n * See https://github.com/sebpiq/WebPd_pd-parser for documentation\n *\n */\nconst _commons_ARRAYS = new Map();\nconst _commons_ARRAYS_SKEDULER = sked_create(false);\nconst _commons_ENGINE_LOGGED_SKEDULER = sked_create(true);\nconst _commons_FRAME_SKEDULER = sked_create(false);\n// =========================== COMMONS API\n/**\n * @param callback Called when the engine is configured, or immediately if the engine\n * was already configured.\n */\nfunction commons_waitEngineConfigure(callback) {\n    sked_wait(_commons_ENGINE_LOGGED_SKEDULER, 'configure', callback);\n}\n/**\n * Schedules a callback to be called at the given frame.\n * If the frame already occurred, or is the current frame, the callback won't be executed.\n */\nfunction commons_waitFrame(frame, callback) {\n    return sked_wait_future(_commons_FRAME_SKEDULER, frame.toString(), callback);\n}\n/**\n * Cancels waiting for a frame to occur.\n */\nfunction commons_cancelWaitFrame(id) {\n    sked_cancel(_commons_FRAME_SKEDULER, id);\n}\n/**\n * @param callback Called immediately if the array exists, and subsequently, everytime\n * the array is set again.\n * @returns An id that can be used to cancel the subscription.\n */\nfunction commons_subscribeArrayChanges(arrayName, callback) {\n    const id = sked_subscribe(_commons_ARRAYS_SKEDULER, arrayName, callback);\n    if (_commons_ARRAYS.has(arrayName)) {\n        callback(arrayName);\n    }\n    return id;\n}\n/**\n * @param id The id received when subscribing.\n */\nfunction commons_cancelArrayChangesSubscription(id) {\n    sked_cancel(_commons_ARRAYS_SKEDULER, id);\n}\n/** Gets an named array, throwing an error if the array doesn't exist. */\nfunction commons_getArray(arrayName) {\n    if (!_commons_ARRAYS.has(arrayName)) {\n        throw new Error('Unknown array ' + arrayName);\n    }\n    return _commons_ARRAYS.get(arrayName);\n}\nfunction commons_hasArray(arrayName) {\n    return _commons_ARRAYS.has(arrayName);\n}\nfunction commons_setArray(arrayName, array) {\n    _commons_ARRAYS.set(arrayName, array);\n    sked_emit(_commons_ARRAYS_SKEDULER, arrayName);\n}\n// =========================== PRIVATE API\nfunction _commons_emitEngineConfigure() {\n    sked_emit(_commons_ENGINE_LOGGED_SKEDULER, 'configure');\n}\nfunction _commons_emitFrame(frame) {\n    sked_emit(_commons_FRAME_SKEDULER, frame.toString());\n}\n\nconst MSG_FLOAT_TOKEN = \"number\"\nconst MSG_STRING_TOKEN = \"string\"\nconst msg_create = () => []\nconst msg_getLength = (m) => m.length\nconst msg_getTokenType = (m, i) => typeof m[i]\nconst msg_isStringToken = (m, i) => msg_getTokenType(m, i) === 'string'\nconst msg_isFloatToken = (m, i) => msg_getTokenType(m, i) === 'number'\nconst msg_isMatching = (m, tokenTypes) => {\n    return (m.length === tokenTypes.length) \n        && m.every((v, i) => msg_getTokenType(m, i) === tokenTypes[i])\n}\nconst msg_writeFloatToken = ( m, i, v ) => m[i] = v\nconst msg_writeStringToken = msg_writeFloatToken\nconst msg_readFloatToken = ( m, i ) => m[i]\nconst msg_readStringToken = msg_readFloatToken\nconst msg_floats = (v) => v\nconst msg_strings = (v) => v\nconst msg_display = (m) => '[' + m\n    .map(t => typeof t === 'string' ? '\"' + t + '\"' : t.toString())\n    .join(', ') + ']'\n/*\n * Copyright (c) 2012-2020 S\xe9bastien Piquemal <sebpiq@gmail.com>\n *\n * BSD Simplified License.\n * For information on usage and redistribution, and for a DISCLAIMER OF ALL\n * WARRANTIES, see the file, \"LICENSE.txt,\" in this distribution.\n *\n * See https://github.com/sebpiq/WebPd_pd-parser for documentation\n *\n */\nconst _FS_OPERATIONS_IDS = new Set();\nconst _FS_OPERATIONS_CALLBACKS = new Map();\nconst _FS_OPERATIONS_SOUND_CALLBACKS = new Map();\nconst _FS_SOUND_STREAM_BUFFERS = new Map();\n// We start at 1, because 0 is what ASC uses when host forgets to pass an arg to \n// a function. Therefore we can get false negatives when a test happens to expect a 0.\nlet _FS_OPERATION_COUNTER = 1;\nconst _FS_SOUND_BUFFER_LENGTH = 20 * 44100;\n// =========================== EXPORTED API\nfunction x_fs_onReadSoundFileResponse(id, status, sound) {\n    _fs_assertOperationExists(id, 'x_fs_onReadSoundFileResponse');\n    _FS_OPERATIONS_IDS.delete(id);\n    // Finish cleaning before calling the callback in case it would throw an error.\n    const callback = _FS_OPERATIONS_SOUND_CALLBACKS.get(id);\n    callback(id, status, sound);\n    _FS_OPERATIONS_SOUND_CALLBACKS.delete(id);\n}\nfunction x_fs_onWriteSoundFileResponse(id, status) {\n    _fs_assertOperationExists(id, 'x_fs_onWriteSoundFileResponse');\n    _FS_OPERATIONS_IDS.delete(id);\n    // Finish cleaning before calling the callback in case it would throw an error.\n    const callback = _FS_OPERATIONS_CALLBACKS.get(id);\n    callback(id, status);\n    _FS_OPERATIONS_CALLBACKS.delete(id);\n}\nfunction x_fs_onSoundStreamData(id, block) {\n    _fs_assertOperationExists(id, 'x_fs_onSoundStreamData');\n    const buffers = _FS_SOUND_STREAM_BUFFERS.get(id);\n    for (let i = 0; i < buffers.length; i++) {\n        buf_pushBlock(buffers[i], block[i]);\n    }\n    return buffers[0].pullAvailableLength;\n}\nfunction x_fs_onCloseSoundStream(id, status) {\n    fs_closeSoundStream(id, status);\n}\n// =========================== FS API\nclass fs_SoundInfo {\n}\nfunction fs_readSoundFile(url, soundInfo, callback) {\n    const id = _fs_createOperationId();\n    _FS_OPERATIONS_SOUND_CALLBACKS.set(id, callback);\n    i_fs_readSoundFile(id, url, fs_soundInfoToMessage(soundInfo));\n    return id;\n}\nfunction fs_writeSoundFile(sound, url, soundInfo, callback) {\n    const id = _fs_createOperationId();\n    _FS_OPERATIONS_CALLBACKS.set(id, callback);\n    i_fs_writeSoundFile(id, sound, url, fs_soundInfoToMessage(soundInfo));\n    return id;\n}\nfunction fs_openSoundReadStream(url, soundInfo, callback) {\n    const id = _fs_createOperationId();\n    const buffers = [];\n    for (let channel = 0; channel < soundInfo.channelCount; channel++) {\n        buffers.push(new buf_SoundBuffer(_FS_SOUND_BUFFER_LENGTH));\n    }\n    _FS_SOUND_STREAM_BUFFERS.set(id, buffers);\n    _FS_OPERATIONS_CALLBACKS.set(id, callback);\n    i_fs_openSoundReadStream(id, url, fs_soundInfoToMessage(soundInfo));\n    return id;\n}\nfunction fs_openSoundWriteStream(url, soundInfo, callback) {\n    const id = _fs_createOperationId();\n    _FS_SOUND_STREAM_BUFFERS.set(id, []);\n    _FS_OPERATIONS_CALLBACKS.set(id, callback);\n    i_fs_openSoundWriteStream(id, url, fs_soundInfoToMessage(soundInfo));\n    return id;\n}\nfunction fs_sendSoundStreamData(id, block) {\n    _fs_assertOperationExists(id, 'fs_sendSoundStreamData');\n    i_fs_sendSoundStreamData(id, block);\n}\nfunction fs_closeSoundStream(id, status) {\n    if (!_FS_OPERATIONS_IDS.has(id)) {\n        return;\n    }\n    _FS_OPERATIONS_IDS.delete(id);\n    _FS_OPERATIONS_CALLBACKS.get(id)(id, status);\n    _FS_OPERATIONS_CALLBACKS.delete(id);\n    // Delete this last, to give the callback \n    // a chance to save a reference to the buffer\n    // If write stream, there won't be a buffer\n    if (_FS_SOUND_STREAM_BUFFERS.has(id)) {\n        _FS_SOUND_STREAM_BUFFERS.delete(id);\n    }\n    i_fs_closeSoundStream(id, status);\n}\nfunction fs_soundInfoToMessage(soundInfo) {\n    const info = msg_create([\n        MSG_FLOAT_TOKEN,\n        MSG_FLOAT_TOKEN,\n        MSG_FLOAT_TOKEN,\n        MSG_STRING_TOKEN,\n        soundInfo.encodingFormat.length,\n        MSG_STRING_TOKEN,\n        soundInfo.endianness.length,\n        MSG_STRING_TOKEN,\n        soundInfo.extraOptions.length\n    ]);\n    msg_writeFloatToken(info, 0, toFloat(soundInfo.channelCount));\n    msg_writeFloatToken(info, 1, toFloat(soundInfo.sampleRate));\n    msg_writeFloatToken(info, 2, toFloat(soundInfo.bitDepth));\n    msg_writeStringToken(info, 3, soundInfo.encodingFormat);\n    msg_writeStringToken(info, 4, soundInfo.endianness);\n    msg_writeStringToken(info, 5, soundInfo.extraOptions);\n    return info;\n}\n// =========================== PRIVATE\nfunction _fs_createOperationId() {\n    const id = _FS_OPERATION_COUNTER++;\n    _FS_OPERATIONS_IDS.add(id);\n    return id;\n}\nfunction _fs_assertOperationExists(id, operationName) {\n    if (!_FS_OPERATIONS_IDS.has(id)) {\n        throw new Error(operationName + ' operation unknown : ' + id.toString());\n    }\n}\n"),Di(e),Pi(e),Ri(e),Li(e,(function(e,n,t){return"\n            const ".concat(e," = (m) => {\n                exports.outletListeners['").concat(n,"']['").concat(t,"'].onMessage(m)\n            }\n        ")})),JSON.stringify(c),i.sampleRate,i.blockSize,i.input,i.output,Mi(e),u.name,Object.entries(r).map((function(e){var n=bt(e,2),t=n[0],r=n[1];return si($o||($o=s(["",": {\n                        ","\n                    },"])),t,r.map((function(e){return'"'.concat(e,'": {onMessage: () => undefined},')})))})),Object.entries(a).map((function(e){var n=bt(e,2),r=n[0],a=n[1];return si(Ko||(Ko=s(["",": {\n\n                        ","\n                    },"])),r,a.map((function(e){return'"'.concat(e,'": ').concat(t.inletCallers[r][e],",")})))})))},Bi=function(e){var n,t=e.audioSettings,r=e.inletCallerSpecs,a=e.codeVariableNames,o=t.channelCount,i=e.codeVariableNames.globs,c=Ci(e);return si(qo||(qo=s(["\n        ","\n\n        ","\n\n        ","\n\n        ","\n        \n        ","\n\n        const metadata: string = '","'\n        let ",": FloatArray = createFloatArray(0)\n        let ",": FloatArray = createFloatArray(0)\n        \n        export function configure(sampleRate: Float, blockSize: Int): void {\n            "," = createFloatArray(blockSize * ",")\n            "," = createFloatArray(blockSize * ",")\n            "," = sampleRate\n            "," = blockSize\n            _commons_emitEngineConfigure()\n        }\n\n        export function getInput(): FloatArray { return "," }\n\n        export function getOutput(): FloatArray { return "," }\n\n        export function loop(): void {\n            ","\n        }\n\n        // FS IMPORTS\n        export declare function i_fs_readSoundFile (id: fs_OperationId, url: Url, info: Message): void\n        export declare function i_fs_writeSoundFile (id: fs_OperationId, sound: FloatArray[], url: Url, info: Message): void\n        export declare function i_fs_openSoundReadStream (id: fs_OperationId, url: Url, info: Message): void\n        export declare function i_fs_openSoundWriteStream (id: fs_OperationId, url: Url, info: Message): void\n        export declare function i_fs_sendSoundStreamData (id: fs_OperationId, block: FloatArray[]): void\n        export declare function i_fs_closeSoundStream (id: fs_OperationId, status: fs_OperationStatus): void\n\n        export {\n            metadata,\n\n            // FS EXPORTS\n            x_fs_onReadSoundFileResponse as fs_onReadSoundFileResponse,\n            x_fs_onWriteSoundFileResponse as fs_onWriteSoundFileResponse,\n            x_fs_onSoundStreamData as fs_onSoundStreamData,\n            x_fs_onCloseSoundStream as fs_onCloseSoundStream,\n\n            // MSG EXPORTS\n            x_msg_create as msg_create,\n            x_msg_getTokenTypes as msg_getTokenTypes,\n            x_msg_createTemplate as msg_createTemplate,\n            msg_writeStringToken,\n            msg_writeFloatToken,\n            msg_readStringToken,\n            msg_readFloatToken,\n            MSG_FLOAT_TOKEN,\n            MSG_STRING_TOKEN,\n\n            // COMMONS EXPORTS\n            commons_setArray,\n            commons_getArray, \n\n            // CORE EXPORTS\n            createFloatArray,\n            x_core_createListOfArrays as core_createListOfArrays,\n            x_core_pushToListOfArrays as core_pushToListOfArrays,\n            x_core_getListOfArraysLength as core_getListOfArraysLength,\n            x_core_getListOfArraysElem as core_getListOfArraysElem,\n\n            // INLET CALLERS\n            ","\n        }\n    "])),(n=t.bitDepth,Ai(n,'/*\n * Copyright (c) 2012-2020 S\xe9bastien Piquemal <sebpiq@gmail.com>\n *\n * BSD Simplified License.\n * For information on usage and redistribution, and for a DISCLAIMER OF ALL\n * WARRANTIES, see the file, "LICENSE.txt," in this distribution.\n *\n * See https://github.com/sebpiq/WebPd_pd-parser for documentation\n *\n */\n\ntype FloatArray = ${FloatArray}\ntype Float = ${Float}\ntype Int = ${Int}\n\n// =========================== CORE API\nfunction toInt (v: ${Float}): ${Int} { return ${Int}(v) }\nfunction toFloat (v: ${Int}): ${Float} { return ${Float}(v) }\nfunction createFloatArray (length: Int): FloatArray {\n    return new ${FloatArray}(length)\n}\nfunction setFloatDataView (\n    dataView: DataView, \n    position: Int, \n    value: Float,\n): void { dataView.${setFloat}(position, value) }\nfunction getFloatDataView (\n    dataView: DataView, \n    position: Int, \n): Float { return dataView.${getFloat}(position) }\n\n// =========================== FS CONSTANTS\nconst FS_OPERATION_SUCCESS: Int = ${FS_OPERATION_SUCCESS}\nconst FS_OPERATION_FAILURE: Int = ${FS_OPERATION_FAILURE}\n\n// =========================== EXPORTED API\nfunction x_core_createListOfArrays(): FloatArray[] {\n    const arrays: FloatArray[] = []\n    return arrays\n}\n\nfunction x_core_pushToListOfArrays(arrays: FloatArray[], array: FloatArray): void {\n    arrays.push(array)\n}\n\nfunction x_core_getListOfArraysLength(arrays: FloatArray[]): Int {\n    return arrays.length\n}\n\nfunction x_core_getListOfArraysElem(arrays: FloatArray[], index: Int): FloatArray {\n    return arrays[index]\n}')+"/*\n * Copyright (c) 2012-2020 S\xe9bastien Piquemal <sebpiq@gmail.com>\n *\n * BSD Simplified License.\n * For information on usage and redistribution, and for a DISCLAIMER OF ALL\n * WARRANTIES, see the file, \"LICENSE.txt,\" in this distribution.\n *\n * See https://github.com/sebpiq/WebPd_pd-parser for documentation\n *\n */\n\n// =========================== BUF API\n/**\n * Ring buffer \n */\nclass buf_SoundBuffer {\n    public data: FloatArray\n    public length: Int\n    public writeCursor: Int\n    public pullAvailableLength: Int\n\n    constructor(length: Int) {\n        this.length = length\n        this.data = createFloatArray(length)\n        this.writeCursor = 0\n        this.pullAvailableLength = 0\n    }\n}\n\n/** Erases all the content from the buffer */\nfunction buf_create (length: Int): buf_SoundBuffer {\n    return new buf_SoundBuffer(length)\n}\n\n/** Erases all the content from the buffer */\nfunction buf_clear (buffer: buf_SoundBuffer): void {\n    buffer.data.fill(0)\n}\n\n/**\n * Pushes a block to the buffer, throwing an error if the buffer is full. \n * If the block is written successfully, {@link buf_SoundBuffer#writeCursor} \n * is moved corresponding with the length of data written.\n * \n * @todo : Optimize by allowing to read/write directly from host\n */\nfunction buf_pushBlock (\n    buffer: buf_SoundBuffer,\n    block: FloatArray,\n): Int {\n    if (buffer.pullAvailableLength + block.length > buffer.length) {\n        throw new Error('buffer full')\n    }\n\n    let left: Int = block.length\n    while (left > 0) {\n        const lengthToWrite = toInt(Math.min(\n            toFloat(buffer.length - buffer.writeCursor), \n            toFloat(left)\n        ))\n        buffer.data.set(\n            block.subarray(\n                block.length - left, \n                block.length - left + lengthToWrite\n            ), \n            buffer.writeCursor\n        )\n        left -= lengthToWrite\n        buffer.writeCursor = (buffer.writeCursor + lengthToWrite) % buffer.length\n        buffer.pullAvailableLength += lengthToWrite\n    }\n    return buffer.pullAvailableLength\n}\n\n/**\n * Pulls a single sample from the buffer. \n * This is a destructive operation, and the sample will be \n * unavailable for subsequent readers with the same operation.\n */\nfunction buf_pullSample (buffer: buf_SoundBuffer): Float {\n    if (buffer.pullAvailableLength <= 0) {\n        return 0\n    }\n    const readCursor: Int = buffer.writeCursor - buffer.pullAvailableLength\n    buffer.pullAvailableLength -= 1\n    return buffer.data[readCursor >= 0 ? readCursor : buffer.length + readCursor]\n}\n\n/**\n * Writes a sample at `@link writeCursor` and increments `writeCursor` by one.\n */\nfunction buf_writeSample (buffer: buf_SoundBuffer, value: Float): void {\n    buffer.data[buffer.writeCursor] = value\n    buffer.writeCursor = (buffer.writeCursor + 1) % buffer.length\n}\n\n/**\n * Reads the sample at position `writeCursor - offset`.\n * @param offset Must be between 0 (for reading the last written sample)\n *  and {@link buf_SoundBuffer#length} - 1. A value outside these bounds will not cause \n *  an error, but might cause unexpected results.\n */\nfunction buf_readSample (buffer: buf_SoundBuffer, offset: Int): Float {\n    // R = (buffer.writeCursor - 1 - offset) -> ideal read position\n    // W = R % buffer.length -> wrap it so that its within buffer length bounds (but could be negative)\n    // (W + buffer.length) % buffer.length -> if W negative, (W + buffer.length) shifts it back to positive.\n    return buffer.data[(buffer.length + ((buffer.writeCursor - 1 - offset) % buffer.length)) % buffer.length]\n}/*\n * Copyright (c) 2012-2020 S\xe9bastien Piquemal <sebpiq@gmail.com>\n *\n * BSD Simplified License.\n * For information on usage and redistribution, and for a DISCLAIMER OF ALL\n * WARRANTIES, see the file, \"LICENSE.txt,\" in this distribution.\n *\n * See https://github.com/sebpiq/WebPd_pd-parser for documentation\n *\n */\n\ntype SkedCallback = (event: SkedEvent) => void\ntype SkedId = Int\ntype SkedMode = Int\ntype SkedEvent = string\n\n/** \n * Skeduler id that will never be used. \n * Can be used as a \"no id\", or \"null\" value. \n */\nconst SKED_ID_NULL: SkedId = -1\nconst SKED_ID_COUNTER_INIT: SkedId = 1\n\nconst _SKED_WAIT_IN_PROGRESS: Int = 0\nconst _SKED_WAIT_OVER: Int = 1\n\nconst _SKED_MODE_WAIT = 0\nconst _SKED_MODE_SUBSCRIBE = 1\n\n// =========================== SKED API\nclass SkedRequest {\n    id: SkedId\n    mode: SkedMode\n}\n\nclass Skeduler {\n    requests: Map<SkedEvent, Array<SkedRequest>>\n    callbacks: Map<SkedId, SkedCallback>\n    isLoggingEvents: boolean\n    eventLog: Set<SkedEvent>\n    idCounter: SkedId\n}\n\n/** Creates a new Skeduler. */\nfunction sked_create (isLoggingEvents: boolean): Skeduler {\n    return {\n        eventLog: new Set(),\n        requests: new Map(),\n        callbacks: new Map(),\n        idCounter: SKED_ID_COUNTER_INIT,\n        isLoggingEvents,\n    }\n}\n\n/** \n * Asks the skeduler to wait for an event to occur and trigger a callback. \n * If the event has already occurred, the callback is triggered instantly \n * when calling the function.\n * Once triggered, the callback is forgotten.\n * @returns an id allowing to cancel the callback with {@link sked_cancel}\n */\nfunction sked_wait (\n    skeduler: Skeduler,\n    event: SkedEvent,\n    callback: SkedCallback,\n): SkedId {\n    if (skeduler.isLoggingEvents === false) {\n        throw new Error(\"Please activate skeduler's isLoggingEvents\")\n    }\n\n    if (skeduler.eventLog.has(event)) {\n        callback(event)\n        return SKED_ID_NULL\n    } else {\n        return _sked_createRequest(skeduler, event, callback, _SKED_MODE_WAIT)\n    }\n}\n\n/** \n * Asks the skeduler to wait for an event to occur and trigger a callback. \n * If the event has already occurred, the callback is NOT triggered.\n * Once triggered, the callback is forgotten.\n * @returns an id allowing to cancel the callback with {@link sked_cancel}\n */\nfunction sked_wait_future (\n    skeduler: Skeduler,\n    event: SkedEvent,\n    callback: SkedCallback,\n): SkedId {\n    return _sked_createRequest(skeduler, event, callback, _SKED_MODE_WAIT)\n}\n\n/** \n * Asks the skeduler to trigger a callback everytime an event occurs \n * @returns an id allowing to cancel the callback with {@link sked_cancel}\n */\nfunction sked_subscribe (\n    skeduler: Skeduler,\n    event: SkedEvent,\n    callback: SkedCallback,\n): SkedId {\n    return _sked_createRequest(skeduler, event, callback, _SKED_MODE_SUBSCRIBE)\n}\n\n/** Notifies the skeduler that an event has just occurred. */\nfunction sked_emit (\n    skeduler: Skeduler,\n    event: SkedEvent,\n): void {\n    if (skeduler.isLoggingEvents === true) {\n        skeduler.eventLog.add(event)\n    }\n    if (skeduler.requests.has(event)) {\n        const requests: Array<SkedRequest> = skeduler.requests.get(event)\n        const requestsStaying: Array<SkedRequest> = []\n        for (let i: Int = 0; i < requests.length; i++) {\n            const request: SkedRequest = requests[i]\n            if (skeduler.callbacks.has(request.id)) {\n                skeduler.callbacks.get(request.id)(event)\n                if (request.mode === _SKED_MODE_WAIT) {\n                    skeduler.callbacks.delete(request.id)\n                } else {\n                    requestsStaying.push(request)\n                }\n            }\n        }\n        skeduler.requests.set(event, requestsStaying)\n    }\n}\n\n/** Cancels a callback */\nfunction sked_cancel (\n    skeduler: Skeduler,\n    id: SkedId,\n): void {\n    skeduler.callbacks.delete(id)\n}\n\n// =========================== PRIVATE\nfunction _sked_createRequest (\n    skeduler: Skeduler,\n    event: SkedEvent,\n    callback: SkedCallback,\n    mode: SkedMode,\n): SkedId {\n    const id = _sked_nextId(skeduler)\n    const request: SkedRequest = {id, mode}\n    skeduler.callbacks.set(id, callback)\n    if (!skeduler.requests.has(event)) {\n        skeduler.requests.set(event, [request])    \n    } else {\n        skeduler.requests.get(event).push(request)\n    }\n    return id\n}\n\nfunction _sked_nextId (\n    skeduler: Skeduler,\n): SkedId {\n    return skeduler.idCounter++\n}/*\n * Copyright (c) 2012-2020 S\xe9bastien Piquemal <sebpiq@gmail.com>\n *\n * BSD Simplified License.\n * For information on usage and redistribution, and for a DISCLAIMER OF ALL\n * WARRANTIES, see the file, \"LICENSE.txt,\" in this distribution.\n *\n * See https://github.com/sebpiq/WebPd_pd-parser for documentation\n *\n */\n\nconst _commons_ARRAYS: Map<string, FloatArray> = new Map()\nconst _commons_ARRAYS_SKEDULER: Skeduler = sked_create(false)\nconst _commons_ENGINE_LOGGED_SKEDULER: Skeduler = sked_create(true)\nconst _commons_FRAME_SKEDULER: Skeduler = sked_create(false)\n\n// =========================== COMMONS API\n/** \n * @param callback Called when the engine is configured, or immediately if the engine\n * was already configured.\n */\nfunction commons_waitEngineConfigure(\n    callback: SkedCallback,\n): void {\n    sked_wait(_commons_ENGINE_LOGGED_SKEDULER, 'configure', callback)\n}\n\n/** \n * Schedules a callback to be called at the given frame.\n * If the frame already occurred, or is the current frame, the callback won't be executed.\n */\nfunction commons_waitFrame(\n    frame: Int,\n    callback: SkedCallback,\n): SkedId {\n    return sked_wait_future(_commons_FRAME_SKEDULER, frame.toString(), callback)\n}\n\n/** \n * Cancels waiting for a frame to occur.\n */\nfunction commons_cancelWaitFrame(\n    id: SkedId,\n): void {\n    sked_cancel(_commons_FRAME_SKEDULER, id)\n}\n\n/** \n * @param callback Called immediately if the array exists, and subsequently, everytime \n * the array is set again.\n * @returns An id that can be used to cancel the subscription.\n */\nfunction commons_subscribeArrayChanges(\n    arrayName: string,\n    callback: SkedCallback,\n): SkedId {\n    const id: SkedId = sked_subscribe(_commons_ARRAYS_SKEDULER, arrayName, callback)\n    if (_commons_ARRAYS.has(arrayName)) {\n        callback(arrayName)\n    }\n    return id\n}\n\n/** \n * @param id The id received when subscribing.\n */\nfunction commons_cancelArrayChangesSubscription(\n    id: SkedId,\n): void {\n    sked_cancel(_commons_ARRAYS_SKEDULER, id)\n}\n\n/** Gets an named array, throwing an error if the array doesn't exist. */\nfunction commons_getArray(\n    arrayName: string,\n): FloatArray {\n    if (!_commons_ARRAYS.has(arrayName)) {\n        throw new Error('Unknown array ' + arrayName)\n    }\n    return _commons_ARRAYS.get(arrayName)\n}\n\nfunction commons_hasArray(\n    arrayName: string,\n): boolean {\n    return _commons_ARRAYS.has(arrayName)\n}\n\nfunction commons_setArray(\n    arrayName: string,\n    array: FloatArray,\n): void {\n    _commons_ARRAYS.set(arrayName, array)\n    sked_emit(_commons_ARRAYS_SKEDULER, arrayName)\n}\n\n// =========================== PRIVATE API\nfunction _commons_emitEngineConfigure(): void {\n    sked_emit(_commons_ENGINE_LOGGED_SKEDULER, 'configure')\n}\n\nfunction _commons_emitFrame(frame: Int): void {\n    sked_emit(_commons_FRAME_SKEDULER, frame.toString())\n}/*\n * Copyright (c) 2012-2020 S\xe9bastien Piquemal <sebpiq@gmail.com>\n *\n * BSD Simplified License.\n * For information on usage and redistribution, and for a DISCLAIMER OF ALL\n * WARRANTIES, see the file, \"LICENSE.txt,\" in this distribution.\n *\n * See https://github.com/sebpiq/WebPd_pd-parser for documentation\n *\n */\n\ntype MessageFloatToken = Float\ntype MessageCharToken = Int\n\ntype MessageTemplate = Array<Int>\ntype MessageHeaderEntry = Int\ntype MessageHeader = Int32Array\n\nconst MSG_FLOAT_TOKEN: MessageHeaderEntry = 0\nconst MSG_STRING_TOKEN: MessageHeaderEntry = 1\n\n\n// =========================== EXPORTED API\nfunction x_msg_create(templateTypedArray: Int32Array): Message {\n    const template: MessageTemplate = new Array<Int>(templateTypedArray.length)\n    for (let i: Int = 0; i < templateTypedArray.length; i++) {\n        template[i] = templateTypedArray[i]\n    }\n    return msg_create(template)\n}\n\nfunction x_msg_getTokenTypes(message: Message): MessageHeader {\n    return message.tokenTypes\n}\n\nfunction x_msg_createTemplate(length: i32): Int32Array {\n    return new Int32Array(length)\n}\n\n\n// =========================== MSG API\nfunction msg_create(template: MessageTemplate): Message {\n    let i: Int = 0\n    let byteCount: Int = 0\n    let tokenTypes: Array<MessageHeaderEntry> = []\n    let tokenPositions: Array<MessageHeaderEntry> = []\n\n    i = 0\n    while (i < template.length) {\n        switch(template[i]) {\n            case MSG_FLOAT_TOKEN:\n                byteCount += sizeof<MessageFloatToken>()\n                tokenTypes.push(MSG_FLOAT_TOKEN)\n                tokenPositions.push(byteCount)\n                i += 1\n                break\n            case MSG_STRING_TOKEN:\n                byteCount += sizeof<MessageCharToken>() * template[i + 1]\n                tokenTypes.push(MSG_STRING_TOKEN)\n                tokenPositions.push(byteCount)\n                i += 2\n                break\n            default:\n                throw new Error(\"unknown token type : \" + template[i].toString())\n        }\n    }\n\n    const tokenCount = tokenTypes.length\n    const headerByteCount = _msg_computeHeaderLength(tokenCount) * sizeof<MessageHeaderEntry>()\n    byteCount += headerByteCount\n\n    const buffer = new ArrayBuffer(byteCount)\n    const dataView = new DataView(buffer)\n    let writePosition: Int = 0\n    \n    dataView.setInt32(writePosition, tokenCount)\n    writePosition += sizeof<MessageHeaderEntry>()\n\n    for (i = 0; i < tokenCount; i++) {\n        dataView.setInt32(writePosition, tokenTypes[i])\n        writePosition += sizeof<MessageHeaderEntry>()\n    }\n\n    dataView.setInt32(writePosition, headerByteCount)\n    writePosition += sizeof<MessageHeaderEntry>()\n    for (i = 0; i < tokenCount; i++) {\n        dataView.setInt32(writePosition, headerByteCount + tokenPositions[i])\n        writePosition += sizeof<MessageHeaderEntry>()\n    }\n\n    return new Message(buffer)\n}\n\nfunction msg_writeStringToken(\n    message: Message, \n    tokenIndex: Int,\n    value: string,\n): void {\n    const startPosition = message.tokenPositions[tokenIndex]\n    const endPosition = message.tokenPositions[tokenIndex + 1]\n    const expectedStringLength: Int = (endPosition - startPosition) / sizeof<MessageCharToken>()\n    if (value.length !== expectedStringLength) {\n        throw new Error('Invalid string size, specified ' + expectedStringLength.toString() + ', received ' + value.length.toString())\n    }\n\n    for (let i = 0; i < value.length; i++) {\n        message.dataView.setInt32(\n            startPosition + i * sizeof<MessageCharToken>(), \n            value.codePointAt(i)\n        )\n    }\n}\n\nfunction msg_writeFloatToken(\n    message: Message, \n    tokenIndex: Int,\n    value: MessageFloatToken,\n): void {\n    setFloatDataView(message.dataView, message.tokenPositions[tokenIndex], value)\n}\n\nfunction msg_readStringToken(\n    message: Message, \n    tokenIndex: Int,\n): string {\n    const startPosition = message.tokenPositions[tokenIndex]\n    const endPosition = message.tokenPositions[tokenIndex + 1]\n    const stringLength: Int = (endPosition - startPosition) / sizeof<MessageCharToken>()\n    let value: string = ''\n    for (let i = 0; i < stringLength; i++) {\n        value += String.fromCodePoint(message.dataView.getInt32(startPosition + sizeof<MessageCharToken>() * i))\n    }\n    return value\n}\n\nfunction msg_readFloatToken(\n    message: Message, \n    tokenIndex: Int,\n): MessageFloatToken {\n    return getFloatDataView(message.dataView, message.tokenPositions[tokenIndex])\n}\n\nfunction msg_getLength(message: Message): Int {\n    return message.tokenTypes.length\n}\n\nfunction msg_getTokenType(message: Message, tokenIndex: Int): Int {\n    return message.tokenTypes[tokenIndex]\n}\n\nfunction msg_isStringToken(\n    message: Message, \n    tokenIndex: Int    \n): boolean {\n    return msg_getTokenType(message, tokenIndex) === MSG_STRING_TOKEN\n}\n\nfunction msg_isFloatToken(\n    message: Message, \n    tokenIndex: Int    \n): boolean {\n    return msg_getTokenType(message, tokenIndex) === MSG_FLOAT_TOKEN\n}\n\nfunction msg_isMatching(message: Message, tokenTypes: Array<MessageHeaderEntry>): boolean {\n    if (message.tokenTypes.length !== tokenTypes.length) {\n        return false\n    }\n    for (let i: Int = 0; i < tokenTypes.length; i++) {\n        if (message.tokenTypes[i] !== tokenTypes[i]) {\n            return false\n        }\n    }\n    return true\n}\n\nfunction msg_floats(values: Array<Float>): Message {\n    const message: Message = msg_create(values.map<MessageHeaderEntry>(v => MSG_FLOAT_TOKEN))\n    for (let i: Int = 0; i < values.length; i++) {\n        msg_writeFloatToken(message, i, values[i])\n    }\n    return message\n}\n\nfunction msg_strings(values: Array<string>): Message {\n    const template: MessageTemplate = []\n    for (let i: Int = 0; i < values.length; i++) {\n        template.push(MSG_STRING_TOKEN)\n        template.push(values[i].length)\n    }\n    const message: Message = msg_create(template)\n    for (let i: Int = 0; i < values.length; i++) {\n        msg_writeStringToken(message, i, values[i])\n    }\n    return message\n}\n\nfunction msg_display(message: Message): string {\n    let displayArray: Array<string> = []\n    for (let i: Int = 0; i < msg_getLength(message); i++) {\n        if (msg_isFloatToken(message, i)) {\n            displayArray.push(msg_readFloatToken(message, i).toString())\n        } else {\n            displayArray.push('\"' + msg_readStringToken(message, i) + '\"')\n        }\n    }\n    return '[' + displayArray.join(', ') + ']'\n}\n\n\n// =========================== PRIVATE\n// Message header : [\n//      <Token count>, \n//      <Token 1 type>,  ..., <Token N type>, \n//      <Token 1 start>, ..., <Token N start>, <Token N end>\n//      ... DATA ...\n// ]\nclass Message {\n    public dataView: DataView\n    public header: MessageHeader\n    public tokenCount: MessageHeaderEntry\n    public tokenTypes: MessageHeader\n    public tokenPositions: MessageHeader\n\n    constructor(messageBuffer: ArrayBuffer) {\n        const dataView = new DataView(messageBuffer)\n        const tokenCount = _msg_unpackTokenCount(dataView)\n        const header = _msg_unpackHeader(dataView, tokenCount)\n        this.dataView = dataView\n        this.tokenCount = tokenCount\n        this.header = header \n        this.tokenTypes = _msg_unpackTokenTypes(header)\n        this.tokenPositions = _msg_unpackTokenPositions(header)\n    }\n}\n\nfunction _msg_computeHeaderLength(tokenCount: Int): Int {\n    return 1 + tokenCount * 2 + 1\n}\n\nfunction _msg_unpackTokenCount(messageDataView: DataView): MessageHeaderEntry {\n    return messageDataView.getInt32(0)\n}\n\nfunction _msg_unpackHeader(messageDataView: DataView, tokenCount: MessageHeaderEntry): MessageHeader {\n    const headerLength = _msg_computeHeaderLength(tokenCount)\n    // TODO : why is this `wrap` not working ?\n    // return Int32Array.wrap(messageDataView.buffer, 0, headerLength)\n    const messageHeader = new Int32Array(headerLength)\n    for (let i = 0; i < headerLength; i++) {\n        messageHeader[i] = messageDataView.getInt32(sizeof<MessageHeaderEntry>() * i)\n    }\n    return messageHeader\n}\n\nfunction _msg_unpackTokenTypes(header: MessageHeader): MessageHeader {\n    return header.slice(1, 1 + header[0])\n}\n\nfunction _msg_unpackTokenPositions(header: MessageHeader): MessageHeader {\n    return header.slice(1 + header[0])\n}/*\n * Copyright (c) 2012-2020 S\xe9bastien Piquemal <sebpiq@gmail.com>\n *\n * BSD Simplified License.\n * For information on usage and redistribution, and for a DISCLAIMER OF ALL\n * WARRANTIES, see the file, \"LICENSE.txt,\" in this distribution.\n *\n * See https://github.com/sebpiq/WebPd_pd-parser for documentation\n *\n */\n\ntype fs_OperationId = Int\ntype fs_OperationStatus = Int\ntype fs_OperationCallback = (id: fs_OperationId, status: fs_OperationStatus) => void\ntype fs_OperationSoundCallback = (id: fs_OperationId, status: fs_OperationStatus, sound: FloatArray[]) => void\n\ntype Url = string\n\nconst _FS_OPERATIONS_IDS = new Set<fs_OperationId>()\nconst _FS_OPERATIONS_CALLBACKS = new Map<fs_OperationId, fs_OperationCallback>()\nconst _FS_OPERATIONS_SOUND_CALLBACKS = new Map<fs_OperationId, fs_OperationSoundCallback>()\nconst _FS_SOUND_STREAM_BUFFERS = new Map<fs_OperationId, Array<buf_SoundBuffer>>()\n\n// We start at 1, because 0 is what ASC uses when host forgets to pass an arg to \n// a function. Therefore we can get false negatives when a test happens to expect a 0.\nlet _FS_OPERATION_COUNTER: Int = 1\n\nconst _FS_SOUND_BUFFER_LENGTH = 20 * 44100\n\n// =========================== EXPORTED API\nfunction x_fs_onReadSoundFileResponse (\n    id: fs_OperationId, \n    status: fs_OperationStatus,\n    sound: FloatArray[]\n): void {\n    _fs_assertOperationExists(id, 'x_fs_onReadSoundFileResponse')\n    _FS_OPERATIONS_IDS.delete(id)\n    // Finish cleaning before calling the callback in case it would throw an error.\n    const callback = _FS_OPERATIONS_SOUND_CALLBACKS.get(id)\n    callback(id, status, sound)\n    _FS_OPERATIONS_SOUND_CALLBACKS.delete(id)\n}\n\nfunction x_fs_onWriteSoundFileResponse (\n    id: fs_OperationId,\n    status: fs_OperationStatus,\n): void {\n    _fs_assertOperationExists(id, 'x_fs_onWriteSoundFileResponse')\n    _FS_OPERATIONS_IDS.delete(id)\n    // Finish cleaning before calling the callback in case it would throw an error.\n    const callback = _FS_OPERATIONS_CALLBACKS.get(id)\n    callback(id, status)\n    _FS_OPERATIONS_CALLBACKS.delete(id)\n}\n\nfunction x_fs_onSoundStreamData (\n    id: fs_OperationId, \n    block: FloatArray[]\n): Int {\n    _fs_assertOperationExists(id, 'x_fs_onSoundStreamData')\n    const buffers = _FS_SOUND_STREAM_BUFFERS.get(id)\n    for (let i: Int = 0; i < buffers.length; i++) {\n        buf_pushBlock(buffers[i], block[i])\n    }\n    return buffers[0].pullAvailableLength\n}\n\nfunction x_fs_onCloseSoundStream (\n    id: fs_OperationId, \n    status: fs_OperationStatus\n): void {\n    fs_closeSoundStream(id, status)\n}\n\n// =========================== FS API\nclass fs_SoundInfo {\n    channelCount: Int\n    sampleRate: Int\n    bitDepth: Int\n    encodingFormat: string\n    endianness: string\n    extraOptions: string\n}\n\nfunction fs_readSoundFile(\n    url: Url,\n    soundInfo: fs_SoundInfo,\n    callback: fs_OperationSoundCallback\n): fs_OperationId {\n    const id: fs_OperationId = _fs_createOperationId()\n    _FS_OPERATIONS_SOUND_CALLBACKS.set(id, callback)\n    i_fs_readSoundFile(id, url, fs_soundInfoToMessage(soundInfo))\n    return id\n}\n\nfunction fs_writeSoundFile(\n    sound: FloatArray[],\n    url: Url,\n    soundInfo: fs_SoundInfo,\n    callback: fs_OperationCallback,\n): fs_OperationId {\n    const id: fs_OperationId = _fs_createOperationId()\n    _FS_OPERATIONS_CALLBACKS.set(id, callback)\n    i_fs_writeSoundFile(id, sound, url, fs_soundInfoToMessage(soundInfo))\n    return id\n}\n\nfunction fs_openSoundReadStream(\n    url: Url, \n    soundInfo: fs_SoundInfo,\n    callback: fs_OperationCallback,\n): fs_OperationId {\n    const id: fs_OperationId = _fs_createOperationId()\n    const buffers: Array<buf_SoundBuffer> = []\n    for (let channel = 0; channel < soundInfo.channelCount; channel++) {\n        buffers.push(new buf_SoundBuffer(_FS_SOUND_BUFFER_LENGTH))\n    }\n    _FS_SOUND_STREAM_BUFFERS.set(id, buffers)\n    _FS_OPERATIONS_CALLBACKS.set(id, callback)\n    i_fs_openSoundReadStream(id, url, fs_soundInfoToMessage(soundInfo))\n    return id\n}\n\nfunction fs_openSoundWriteStream(\n    url: Url, \n    soundInfo: fs_SoundInfo,\n    callback: fs_OperationCallback,\n): fs_OperationId {\n    const id: fs_OperationId = _fs_createOperationId()\n    _FS_SOUND_STREAM_BUFFERS.set(id, [])\n    _FS_OPERATIONS_CALLBACKS.set(id, callback)\n    i_fs_openSoundWriteStream(id, url, fs_soundInfoToMessage(soundInfo))\n    return id\n}\n\nfunction fs_sendSoundStreamData(\n    id: fs_OperationId, \n    block: FloatArray[],\n): void {\n    _fs_assertOperationExists(id, 'fs_sendSoundStreamData')\n    i_fs_sendSoundStreamData(id, block)\n}\n\nfunction fs_closeSoundStream (\n    id: fs_OperationId, \n    status: fs_OperationStatus\n): void {\n    if (!_FS_OPERATIONS_IDS.has(id)) {\n        return\n    }\n    _FS_OPERATIONS_IDS.delete(id)\n    _FS_OPERATIONS_CALLBACKS.get(id)(id, status)\n    _FS_OPERATIONS_CALLBACKS.delete(id)\n    // Delete this last, to give the callback \n    // a chance to save a reference to the buffer\n    // If write stream, there won't be a buffer\n    if (_FS_SOUND_STREAM_BUFFERS.has(id)) {\n        _FS_SOUND_STREAM_BUFFERS.delete(id)\n    }\n    i_fs_closeSoundStream(id, status)\n}\n\nfunction fs_soundInfoToMessage(soundInfo: fs_SoundInfo): Message {\n    const info: Message = msg_create([\n        MSG_FLOAT_TOKEN,\n        MSG_FLOAT_TOKEN,\n        MSG_FLOAT_TOKEN,\n        MSG_STRING_TOKEN,\n        soundInfo.encodingFormat.length,\n        MSG_STRING_TOKEN,\n        soundInfo.endianness.length,\n        MSG_STRING_TOKEN,\n        soundInfo.extraOptions.length\n    ])\n    msg_writeFloatToken(info, 0, toFloat(soundInfo.channelCount))\n    msg_writeFloatToken(info, 1, toFloat(soundInfo.sampleRate))\n    msg_writeFloatToken(info, 2, toFloat(soundInfo.bitDepth))\n    msg_writeStringToken(info, 3, soundInfo.encodingFormat)\n    msg_writeStringToken(info, 4, soundInfo.endianness)\n    msg_writeStringToken(info, 5, soundInfo.extraOptions)\n    return info\n}\n\n// =========================== PRIVATE\nfunction _fs_createOperationId(): fs_OperationId {\n    const id: fs_OperationId = _FS_OPERATION_COUNTER++\n    _FS_OPERATIONS_IDS.add(id)\n    return id\n}\n\nfunction _fs_assertOperationExists(\n    id: fs_OperationId,\n    operationName: string,\n): void {\n    if (!_FS_OPERATIONS_IDS.has(id)) {\n        throw new Error(operationName + ' operation unknown : ' + id.toString())\n    }\n}"),Di(e),Pi(e),Ri(e),Li(e,(function(e){return"\n            export declare function ".concat(e,"(m: Message): void\n        ")})),JSON.stringify(c),i.input,i.output,i.input,o.in.toString(),i.output,o.out.toString(),i.sampleRate,i.blockSize,i.input,i.output,Mi(e),Object.entries(r).map((function(e){var n=bt(e,2),t=n[0];return n[1].map((function(e){return a.inletCallers[t][e]+","}))})))},zi=function(e,n){return new Proxy(n,{get:function(n,t){var r=String(t);if(!n.hasOwnProperty(r)){if("$"===r[0]&&n.hasOwnProperty(r.slice(1)))return n[r.slice(1)];if(["toJSON","Symbol(Symbol.toStringTag)","constructor","$$typeof","@@__IMMUTABLE_ITERABLE__@@","@@__IMMUTABLE_RECORD__@@"].includes(r))return;throw new Error('Namespace "'.concat(e,'" doesn\'t know key "').concat(String(r),'"'))}return n[r]}})},Ui=function(e){if(!Vi.exec(e))throw new Error('Invalid variable name for code generation "'.concat(e,'"'));return e},Vi=/^[a-zA-Z0-9_]+$/,Wi=function(e,n,t,r){return zi(e,fi(Object.values(n).filter((function(e){return e.type===t})),(function(e){return[e.id,r(e)]})))},Gi=function(e,n,t){var r=$i(t),a=r.audioSettings,o=r.arrays,i=r.inletCallerSpecs,s=r.outletListenerSpecs,c=r.target,u=r.debug,l=Ki(c),f=function(e,n,t){return{nodes:zi("n",Object.values(n).reduce((function(n,r){var a=Ti(e,r.type),o="[".concat(r.type,"] ").concat(r.id),i=Ui(t?"".concat(r.type.replace(/[^a-zA-Z0-9_]/g,""),"_").concat(r.id):r.id);return n[r.id]={ins:Wi("".concat(o,".ins"),r.inlets,"signal",(function(e){return"".concat(i,"_INS_").concat(Ui(e.id))})),rcvs:Wi("".concat(o,".rcvs"),r.inlets,"message",(function(e){return"".concat(i,"_RCVS_").concat(Ui(e.id))})),outs:Wi("".concat(o,".outs"),r.outlets,"signal",(function(e){return"".concat(i,"_OUTS_").concat(Ui(e.id))})),snds:Wi("".concat(o,".snds"),r.outlets,"message",(function(e){return"".concat(i,"_SNDS_").concat(Ui(e.id))})),state:zi("".concat(o,".state"),li(a.stateVariables,(function(e,n){return"".concat(i,"_STATE_").concat(Ui(n))})))},n}),{})),globs:zi("g",{iterFrame:"F",frame:"FRAME",blockSize:"BLOCK_SIZE",sampleRate:"SAMPLE_RATE",output:"OUTPUT",input:"INPUT",nullMessageReceiver:"SND_TO_NULL",m:"m"}),outletListeners:zi("outletListeners",{}),inletCallers:zi("inletCallers",{})}}(n,e,u);!function(e,n){Object.entries(n).forEach((function(n){var t=bt(n,2),r=t[0],a=t[1];e.inletCallers[r]={},a.forEach((function(n){e.inletCallers[r][n]="inletCaller_".concat(r,"_").concat(n)}))}))}(f,i),function(e,n){Object.entries(n).forEach((function(n){var t=bt(n,2),r=t[0],a=t[1];e.outletListeners[r]={},a.forEach((function(n){e.outletListeners[r][n]="outletListener_".concat(r,"_").concat(n)}))}))}(f,s);var d=function(e,n){var t=Object.values(e).filter((function(e){return!!e.isPullingSignal})),r=Object.values(e).filter((function(e){return!!e.isPushingMessages}));Object.keys(n).forEach((function(n){r.find((function(e){return e.id===n}))||r.push(mi(e,n))}));var a=wi(e,r);return bi(e,t).forEach((function(e){-1===a.indexOf(e)&&a.push(e)})),a}(e,i),p=Ii(e,d);return{status:0,code:qi({target:c,graph:p,graphTraversal:d,nodeImplementations:n,audioSettings:a,arrays:o,inletCallerSpecs:i,outletListenerSpecs:s,codeVariableNames:f,macros:l,debug:u,precompiledPortlets:{precompiledInlets:{},precompiledOutlets:{}}})}},$i=function(e){var n=e.arrays||{},t=e.inletCallerSpecs||{},r=e.outletListenerSpecs||{},a=e.debug||!1;if(![32,64].includes(e.audioSettings.bitDepth))throw new Hi('"bitDepth" can be only 32 or 64');return Rr(Rr({},e),{},{arrays:n,outletListenerSpecs:r,inletCallerSpecs:t,debug:a})},Ki=function(e){return{javascript:oi,assemblyscript:ii}[e]},qi=function(e){if(function(e){var n=e.graph,t=e.graphTraversal,r=e.codeVariableNames,a=e.inletCallerSpecs,o=e.outletListenerSpecs,i=t.map((function(e){return mi(n,e)})),s={},c={},u=function(e,n,t){e[n]=e[n]||[],e[n].includes(t)||e[n].push(t)};i.forEach((function(n){var t=r.nodes[n.id],i=t.outs,l=t.snds;Object.entries(n.outlets).forEach((function(t){var a=bt(t,2),f=a[0],d=a[1],p=yi(n,f),m=o[n.id]||[];"signal"===d.type?p.forEach((function(e){r.nodes[e.nodeId].ins[e.portletId]=i[f],u(s,e.nodeId,e.portletId)})):"message"===d.type&&(1!==p.length||m.includes(d.id)?0===p.length&&m.includes(d.id)?(l[f]=r.outletListeners[n.id][f],u(c,n.id,f)):0!==p.length||m.includes(d.id)||(l[f]=e.codeVariableNames.globs.nullMessageReceiver,u(c,n.id,f)):(l[f]=r.nodes[p[0].nodeId].rcvs[p[0].portletId],u(c,n.id,f)))})),Object.entries(n.inlets).forEach((function(e){var t=bt(e,2),r=t[0],o=t[1],i=a[n.id]||[];"message"!==o.type||0!==vi(n,r).length||i.includes(o.id)||u(s,n.id,r)}))})),e.precompiledPortlets.precompiledInlets=s,e.precompiledPortlets.precompiledOutlets=c}(e),"javascript"===e.target)return ji(e);if("assemblyscript"===e.target)return Bi(e);throw new Error("Invalid compilation.target ".concat(e.target))},Hi=function(e){co(t,e);var n=po(t);function t(){return io(this,t),n.apply(this,arguments)}return oo(t)}(ho(Error)),Xi="webpd-runtime.js",Yi=function(e,n){if("bare-bones"===e)return Rr(Rr({},Ji({artefacts:n})),{},Nr({},Xi,"var WebPdRuntime = (function (exports) {\n  'use strict';\n\n  var _WebPdWorkletProcessorCode = \"/*\\n * Copyright (c) 2012-2020 S\xe9bastien Piquemal <sebpiq@gmail.com>\\n *\\n * BSD Simplified License.\\n * For information on usage and redistribution, and for a DISCLAIMER OF ALL\\n * WARRANTIES, see the file, \\\"LICENSE.txt,\\\" in this distribution.\\n *\\n * See https://github.com/sebpiq/WebPd_pd-parser for documentation\\n *\\n */\\nconst FS_CALLBACK_NAMES = [\\n    'onReadSoundFile',\\n    'onOpenSoundReadStream',\\n    'onWriteSoundFile',\\n    'onOpenSoundWriteStream',\\n    'onSoundStreamData',\\n    'onCloseSoundStream',\\n];\\nclass WasmWorkletProcessor extends AudioWorkletProcessor {\\n    constructor() {\\n        super();\\n        this.port.onmessage = this.onMessage.bind(this);\\n        this.settings = {\\n            blockSize: null,\\n            sampleRate,\\n        };\\n        this.dspConfigured = false;\\n        this.engine = null;\\n    }\\n    process(inputs, outputs) {\\n        const output = outputs[0];\\n        const input = inputs[0];\\n        if (!this.dspConfigured) {\\n            if (!this.engine) {\\n                return true;\\n            }\\n            this.settings.blockSize = output[0].length;\\n            this.engine.configure(this.settings.sampleRate, this.settings.blockSize);\\n            this.dspConfigured = true;\\n        }\\n        this.engine.loop(input, output);\\n        return true;\\n    }\\n    onMessage(messageEvent) {\\n        const message = messageEvent.data;\\n        switch (message.type) {\\n            case 'code:WASM':\\n                this.setWasm(message.payload.wasmBuffer);\\n                break;\\n            case 'code:JS':\\n                this.setJsCode(message.payload.jsCode);\\n                break;\\n            case 'inletCaller':\\n                this.engine.inletCallers[message.payload.nodeId][message.payload.portletId](message.payload.message);\\n                break;\\n            case 'fs':\\n                const returned = this.engine.fs[message.payload.functionName].apply(null, message.payload.arguments);\\n                this.port.postMessage({\\n                    type: 'fs',\\n                    payload: {\\n                        functionName: message.payload.functionName + '_return',\\n                        operationId: message.payload.arguments[0],\\n                        returned,\\n                    },\\n                });\\n                break;\\n            case 'destroy':\\n                this.destroy();\\n                break;\\n            default:\\n                new Error(`unknown message type ${message.type}`);\\n        }\\n    }\\n    // TODO : control for channelCount of wasmModule\\n    setWasm(wasmBuffer) {\\n        return AssemblyscriptWasmBindings.createEngine(wasmBuffer).then((engine) => {\\n            this.setEngine(engine);\\n            return engine;\\n        });\\n    }\\n    setJsCode(code) {\\n        const engine = new Function(`\\n            ${code}\\n            return exports\\n        `)();\\n        this.setEngine(engine);\\n    }\\n    setEngine(engine) {\\n        FS_CALLBACK_NAMES.forEach((functionName) => {\\n            ;\\n            engine.fs[functionName] = (...args) => {\\n                // We don't use transferables, because that would imply reallocating each time new array in the engine.\\n                this.port.postMessage({\\n                    type: 'fs',\\n                    payload: {\\n                        functionName,\\n                        arguments: args,\\n                    },\\n                });\\n            };\\n        });\\n        this.engine = engine;\\n        this.dspConfigured = false;\\n    }\\n    destroy() {\\n        this.process = () => false;\\n    }\\n}\\nregisterProcessor('webpd-node', WasmWorkletProcessor);\\n\";\n\n  var AssemblyscriptWasmBindingsCode = \"var AssemblyscriptWasmBindings = (function (exports) {\\n    'use strict';\\n\\n    const getFloatArrayType = (bitDepth) => bitDepth === 64 ? Float64Array : Float32Array;\\n\\n    const liftString = (wasmExports, pointer) => {\\n        if (!pointer)\\n            return null;\\n        pointer = pointer >>> 0;\\n        const end = (pointer +\\n            new Uint32Array(wasmExports.memory.buffer)[(pointer - 4) >>> 2]) >>>\\n            1;\\n        const memoryU16 = new Uint16Array(wasmExports.memory.buffer);\\n        let start = pointer >>> 1;\\n        let string = '';\\n        while (end - start > 1024) {\\n            string += String.fromCharCode(...memoryU16.subarray(start, (start += 1024)));\\n        }\\n        return string + String.fromCharCode(...memoryU16.subarray(start, end));\\n    };\\n    const lowerString = (wasmExports, value) => {\\n        if (value == null)\\n            return 0;\\n        const length = value.length, pointer = wasmExports.__new(length << 1, 1) >>> 0, memoryU16 = new Uint16Array(wasmExports.memory.buffer);\\n        for (let i = 0; i < length; ++i)\\n            memoryU16[(pointer >>> 1) + i] = value.charCodeAt(i);\\n        return pointer;\\n    };\\n    const readTypedArray = (wasmExports, constructor, pointer) => {\\n        if (!pointer)\\n            return null;\\n        const memoryU32 = new Uint32Array(wasmExports.memory.buffer);\\n        return new constructor(wasmExports.memory.buffer, memoryU32[(pointer + 4) >>> 2], memoryU32[(pointer + 8) >>> 2] / constructor.BYTES_PER_ELEMENT);\\n    };\\n    const lowerFloatArray = (wasmExports, bitDepth, data) => {\\n        const arrayType = getFloatArrayType(bitDepth);\\n        const arrayPointer = wasmExports.createFloatArray(data.length);\\n        const array = readTypedArray(wasmExports, arrayType, arrayPointer);\\n        array.set(data);\\n        return { array, arrayPointer };\\n    };\\n    const lowerListOfFloatArrays = (wasmExports, bitDepth, data) => {\\n        const arraysPointer = wasmExports.core_createListOfArrays();\\n        data.forEach((array) => {\\n            const { arrayPointer } = lowerFloatArray(wasmExports, bitDepth, array);\\n            wasmExports.core_pushToListOfArrays(arraysPointer, arrayPointer);\\n        });\\n        return arraysPointer;\\n    };\\n    const readListOfFloatArrays = (wasmExports, bitDepth, listOfArraysPointer) => {\\n        const listLength = wasmExports.core_getListOfArraysLength(listOfArraysPointer);\\n        const arrays = [];\\n        const arrayType = getFloatArrayType(bitDepth);\\n        for (let i = 0; i < listLength; i++) {\\n            const arrayPointer = wasmExports.core_getListOfArraysElem(listOfArraysPointer, i);\\n            arrays.push(readTypedArray(wasmExports, arrayType, arrayPointer));\\n        }\\n        return arrays;\\n    };\\n\\n    const liftMessage = (wasmExports, messagePointer) => {\\n        const messageTokenTypesPointer = wasmExports.msg_getTokenTypes(messagePointer);\\n        const messageTokenTypes = readTypedArray(wasmExports, Int32Array, messageTokenTypesPointer);\\n        const message = [];\\n        messageTokenTypes.forEach((tokenType, tokenIndex) => {\\n            if (tokenType === wasmExports.MSG_FLOAT_TOKEN.valueOf()) {\\n                message.push(wasmExports.msg_readFloatToken(messagePointer, tokenIndex));\\n            }\\n            else if (tokenType === wasmExports.MSG_STRING_TOKEN.valueOf()) {\\n                const stringPointer = wasmExports.msg_readStringToken(messagePointer, tokenIndex);\\n                message.push(liftString(wasmExports, stringPointer));\\n            }\\n        });\\n        return message;\\n    };\\n    const lowerMessage = (wasmExports, message) => {\\n        const template = message.reduce((template, value) => {\\n            if (typeof value === 'number') {\\n                template.push(wasmExports.MSG_FLOAT_TOKEN.valueOf());\\n            }\\n            else if (typeof value === 'string') {\\n                template.push(wasmExports.MSG_STRING_TOKEN.valueOf());\\n                template.push(value.length);\\n            }\\n            else {\\n                throw new Error(`invalid message value ${value}`);\\n            }\\n            return template;\\n        }, []);\\n        const templateArrayPointer = wasmExports.msg_createTemplate(template.length);\\n        const loweredTemplateArray = readTypedArray(wasmExports, Int32Array, templateArrayPointer);\\n        loweredTemplateArray.set(template);\\n        const messagePointer = wasmExports.msg_create(templateArrayPointer);\\n        message.forEach((value, index) => {\\n            if (typeof value === 'number') {\\n                wasmExports.msg_writeFloatToken(messagePointer, index, value);\\n            }\\n            else if (typeof value === 'string') {\\n                const stringPointer = lowerString(wasmExports, value);\\n                wasmExports.msg_writeStringToken(messagePointer, index, stringPointer);\\n            }\\n        });\\n        return messagePointer;\\n    };\\n\\n    const instantiateWasmModule = async (wasmBuffer, wasmImports = {}) => {\\n        const instanceAndModule = await WebAssembly.instantiate(wasmBuffer, {\\n            env: {\\n                abort: (messagePointer, _, lineNumber, columnNumber) => {\\n                    const message = liftString(wasmExports, messagePointer);\\n                    lineNumber = lineNumber;\\n                    columnNumber = columnNumber;\\n                    (() => {\\n                        throw Error(`${message} at ${lineNumber}:${columnNumber}`);\\n                    })();\\n                },\\n                seed: () => {\\n                    return (() => {\\n                        return Date.now() * Math.random();\\n                    })();\\n                },\\n                'console.log': (textPointer) => {\\n                    console.log(liftString(wasmExports, textPointer));\\n                },\\n            },\\n            ...wasmImports,\\n        });\\n        const wasmExports = instanceAndModule.instance\\n            .exports;\\n        return instanceAndModule.instance;\\n    };\\n\\n    const mapObject = (src, func) => {\\n        const dest = {};\\n        Object.entries(src).forEach(([key, srcValue], i) => {\\n            dest[key] = func(srcValue, key, i);\\n        });\\n        return dest;\\n    };\\n    const mapArray = (src, func) => {\\n        const dest = {};\\n        src.forEach((srcValue, i) => {\\n            const [key, destValue] = func(srcValue, i);\\n            dest[key] = destValue;\\n        });\\n        return dest;\\n    };\\n\\n    const createEngine = async (wasmBuffer) => {\\n        const engine = new AssemblyScriptWasmEngine(wasmBuffer);\\n        await engine.initialize();\\n        return engine;\\n    };\\n    class AssemblyScriptWasmEngine {\\n        constructor(wasmBuffer) {\\n            this.wasmBuffer = wasmBuffer;\\n        }\\n        async initialize() {\\n            this.metadata = await readMetadata(this.wasmBuffer);\\n            this.bitDepth = this.metadata.audioSettings.bitDepth;\\n            this.arrayType = getFloatArrayType(this.bitDepth);\\n            const wasmImports = {\\n                ...this._fsImports(),\\n                ...this._outletListenersImports(),\\n            };\\n            const wasmInstance = await instantiateWasmModule(this.wasmBuffer, {\\n                input: wasmImports,\\n            });\\n            this.wasmExports =\\n                wasmInstance.exports;\\n            this.commons = this._bindCommons();\\n            this.fs = this._bindFs();\\n            this.inletCallers = this._bindInletCallers();\\n            this.outletListeners = this._bindOutletListeners();\\n        }\\n        configure(sampleRate, blockSize) {\\n            this.blockSize = blockSize;\\n            this.metadata.audioSettings.blockSize = blockSize;\\n            this.metadata.audioSettings.sampleRate = sampleRate;\\n            this.wasmExports.configure(sampleRate, blockSize);\\n            this._updateWasmInOuts();\\n        }\\n        loop(input, output) {\\n            for (let channel = 0; channel < input.length; channel++) {\\n                this.wasmInput.set(input[channel], channel * this.blockSize);\\n            }\\n            this._updateWasmInOuts();\\n            this.wasmExports.loop();\\n            this._updateWasmInOuts();\\n            for (let channel = 0; channel < output.length; channel++) {\\n                output[channel].set(this.wasmOutput.subarray(this.blockSize * channel, this.blockSize * (channel + 1)));\\n            }\\n        }\\n        _updateWasmInOuts() {\\n            this.wasmOutput = readTypedArray(this.wasmExports, this.arrayType, this.wasmExports.getOutput());\\n            this.wasmInput = readTypedArray(this.wasmExports, this.arrayType, this.wasmExports.getInput());\\n        }\\n        _bindCommons() {\\n            return {\\n                getArray: (arrayName) => {\\n                    const arrayNamePointer = lowerString(this.wasmExports, arrayName);\\n                    const arrayPointer = this.wasmExports.commons_getArray(arrayNamePointer);\\n                    return readTypedArray(this.wasmExports, this.arrayType, arrayPointer);\\n                },\\n                setArray: (arrayName, array) => {\\n                    const stringPointer = lowerString(this.wasmExports, arrayName);\\n                    const { arrayPointer } = lowerFloatArray(this.wasmExports, this.bitDepth, array);\\n                    this.wasmExports.commons_setArray(stringPointer, arrayPointer);\\n                    this._updateWasmInOuts();\\n                },\\n            };\\n        }\\n        _bindFs() {\\n            return {\\n                sendReadSoundFileResponse: (operationId, status, sound) => {\\n                    let soundPointer = 0;\\n                    if (sound) {\\n                        soundPointer = lowerListOfFloatArrays(this.wasmExports, this.bitDepth, sound);\\n                    }\\n                    this.wasmExports.fs_onReadSoundFileResponse(operationId, status, soundPointer);\\n                    this._updateWasmInOuts();\\n                },\\n                sendWriteSoundFileResponse: this.wasmExports.fs_onWriteSoundFileResponse,\\n                sendSoundStreamData: (operationId, sound) => {\\n                    const soundPointer = lowerListOfFloatArrays(this.wasmExports, this.bitDepth, sound);\\n                    const writtenFrameCount = this.wasmExports.fs_onSoundStreamData(operationId, soundPointer);\\n                    this._updateWasmInOuts();\\n                    return writtenFrameCount;\\n                },\\n                closeSoundStream: this.wasmExports.fs_onCloseSoundStream,\\n                onReadSoundFile: () => undefined,\\n                onWriteSoundFile: () => undefined,\\n                onOpenSoundReadStream: () => undefined,\\n                onOpenSoundWriteStream: () => undefined,\\n                onSoundStreamData: () => undefined,\\n                onCloseSoundStream: () => undefined,\\n            };\\n        }\\n        _fsImports() {\\n            let wasmImports = {\\n                i_fs_readSoundFile: (operationId, urlPointer, infoPointer) => {\\n                    const url = liftString(this.wasmExports, urlPointer);\\n                    const info = liftMessage(this.wasmExports, infoPointer);\\n                    this.fs.onReadSoundFile(operationId, url, info);\\n                },\\n                i_fs_writeSoundFile: (operationId, soundPointer, urlPointer, infoPointer) => {\\n                    const sound = readListOfFloatArrays(this.wasmExports, this.bitDepth, soundPointer);\\n                    const url = liftString(this.wasmExports, urlPointer);\\n                    const info = liftMessage(this.wasmExports, infoPointer);\\n                    this.fs.onWriteSoundFile(operationId, sound, url, info);\\n                },\\n                i_fs_openSoundReadStream: (operationId, urlPointer, infoPointer) => {\\n                    const url = liftString(this.wasmExports, urlPointer);\\n                    const info = liftMessage(this.wasmExports, infoPointer);\\n                    this._updateWasmInOuts();\\n                    this.fs.onOpenSoundReadStream(operationId, url, info);\\n                },\\n                i_fs_openSoundWriteStream: (operationId, urlPointer, infoPointer) => {\\n                    const url = liftString(this.wasmExports, urlPointer);\\n                    const info = liftMessage(this.wasmExports, infoPointer);\\n                    this.fs.onOpenSoundWriteStream(operationId, url, info);\\n                },\\n                i_fs_sendSoundStreamData: (operationId, blockPointer) => {\\n                    const block = readListOfFloatArrays(this.wasmExports, this.bitDepth, blockPointer);\\n                    this.fs.onSoundStreamData(operationId, block);\\n                },\\n                i_fs_closeSoundStream: (...args) => this.fs.onCloseSoundStream(...args),\\n            };\\n            return wasmImports;\\n        }\\n        _bindInletCallers() {\\n            return mapObject(this.metadata.compilation.inletCallerSpecs, (inletIds, nodeId) => mapArray(inletIds, (inletId) => [\\n                inletId,\\n                (message) => {\\n                    const messagePointer = lowerMessage(this.wasmExports, message);\\n                    this.wasmExports[this.metadata.compilation.codeVariableNames\\n                        .inletCallers[nodeId][inletId]](messagePointer);\\n                },\\n            ]));\\n        }\\n        _bindOutletListeners() {\\n            return mapObject(this.metadata.compilation.outletListenerSpecs, (outletIds) => mapArray(outletIds, (outletId) => [\\n                outletId,\\n                {\\n                    onMessage: () => undefined,\\n                },\\n            ]));\\n        }\\n        _outletListenersImports() {\\n            const wasmImports = {};\\n            const { codeVariableNames } = this.metadata.compilation;\\n            Object.entries(this.metadata.compilation.outletListenerSpecs).forEach(([nodeId, outletIds]) => {\\n                outletIds.forEach((outletId) => {\\n                    const listenerName = codeVariableNames.outletListeners[nodeId][outletId];\\n                    wasmImports[listenerName] = (messagePointer) => {\\n                        const message = liftMessage(this.wasmExports, messagePointer);\\n                        this.outletListeners[nodeId][outletId].onMessage(message);\\n                    };\\n                });\\n            });\\n            return wasmImports;\\n        }\\n    }\\n    const readMetadata = async (wasmBuffer) => {\\n        const inputImports = {};\\n        const wasmModule = WebAssembly.Module.imports(new WebAssembly.Module(wasmBuffer));\\n        wasmModule\\n            .filter((imprt) => imprt.module === 'input' && imprt.kind === 'function')\\n            .forEach((imprt) => (inputImports[imprt.name] = () => undefined));\\n        const wasmInstance = await instantiateWasmModule(wasmBuffer, {\\n            input: inputImports,\\n        });\\n        const wasmExports = wasmInstance.exports;\\n        const stringPointer = wasmExports.metadata.valueOf();\\n        const metadataJSON = liftString(wasmExports, stringPointer);\\n        return JSON.parse(metadataJSON);\\n    };\\n\\n    exports.AssemblyScriptWasmEngine = AssemblyScriptWasmEngine;\\n    exports.createEngine = createEngine;\\n    exports.readMetadata = readMetadata;\\n\\n    return exports;\\n\\n})({});\\n//# sourceMappingURL=assemblyscript-wasm-bindings.iife.js.map\\n\";\n\n  var fetchRetry$1 = function (fetch, defaults) {\n    defaults = defaults || {};\n    if (typeof fetch !== 'function') {\n      throw new ArgumentError('fetch must be a function');\n    }\n\n    if (typeof defaults !== 'object') {\n      throw new ArgumentError('defaults must be an object');\n    }\n\n    if (defaults.retries !== undefined && !isPositiveInteger(defaults.retries)) {\n      throw new ArgumentError('retries must be a positive integer');\n    }\n\n    if (defaults.retryDelay !== undefined && !isPositiveInteger(defaults.retryDelay) && typeof defaults.retryDelay !== 'function') {\n      throw new ArgumentError('retryDelay must be a positive integer or a function returning a positive integer');\n    }\n\n    if (defaults.retryOn !== undefined && !Array.isArray(defaults.retryOn) && typeof defaults.retryOn !== 'function') {\n      throw new ArgumentError('retryOn property expects an array or function');\n    }\n\n    var baseDefaults = {\n      retries: 3,\n      retryDelay: 1000,\n      retryOn: [],\n    };\n\n    defaults = Object.assign(baseDefaults, defaults);\n\n    return function fetchRetry(input, init) {\n      var retries = defaults.retries;\n      var retryDelay = defaults.retryDelay;\n      var retryOn = defaults.retryOn;\n\n      if (init && init.retries !== undefined) {\n        if (isPositiveInteger(init.retries)) {\n          retries = init.retries;\n        } else {\n          throw new ArgumentError('retries must be a positive integer');\n        }\n      }\n\n      if (init && init.retryDelay !== undefined) {\n        if (isPositiveInteger(init.retryDelay) || (typeof init.retryDelay === 'function')) {\n          retryDelay = init.retryDelay;\n        } else {\n          throw new ArgumentError('retryDelay must be a positive integer or a function returning a positive integer');\n        }\n      }\n\n      if (init && init.retryOn) {\n        if (Array.isArray(init.retryOn) || (typeof init.retryOn === 'function')) {\n          retryOn = init.retryOn;\n        } else {\n          throw new ArgumentError('retryOn property expects an array or function');\n        }\n      }\n\n      // eslint-disable-next-line no-undef\n      return new Promise(function (resolve, reject) {\n        var wrappedFetch = function (attempt) {\n          // As of node 18, this is no longer needed since node comes with native support for fetch:\n          /* istanbul ignore next */\n          var _input =\n            typeof Request !== 'undefined' && input instanceof Request\n              ? input.clone()\n              : input;\n          fetch(_input, init)\n            .then(function (response) {\n              if (Array.isArray(retryOn) && retryOn.indexOf(response.status) === -1) {\n                resolve(response);\n              } else if (typeof retryOn === 'function') {\n                try {\n                  // eslint-disable-next-line no-undef\n                  return Promise.resolve(retryOn(attempt, null, response))\n                    .then(function (retryOnResponse) {\n                      if(retryOnResponse) {\n                        retry(attempt, null, response);\n                      } else {\n                        resolve(response);\n                      }\n                    }).catch(reject);\n                } catch (error) {\n                  reject(error);\n                }\n              } else {\n                if (attempt < retries) {\n                  retry(attempt, null, response);\n                } else {\n                  resolve(response);\n                }\n              }\n            })\n            .catch(function (error) {\n              if (typeof retryOn === 'function') {\n                try {\n                  // eslint-disable-next-line no-undef\n                  Promise.resolve(retryOn(attempt, error, null))\n                    .then(function (retryOnResponse) {\n                      if(retryOnResponse) {\n                        retry(attempt, error, null);\n                      } else {\n                        reject(error);\n                      }\n                    })\n                    .catch(function(error) {\n                      reject(error);\n                    });\n                } catch(error) {\n                  reject(error);\n                }\n              } else if (attempt < retries) {\n                retry(attempt, error, null);\n              } else {\n                reject(error);\n              }\n            });\n        };\n\n        function retry(attempt, error, response) {\n          var delay = (typeof retryDelay === 'function') ?\n            retryDelay(attempt, error, response) : retryDelay;\n          setTimeout(function () {\n            wrappedFetch(++attempt);\n          }, delay);\n        }\n\n        wrappedFetch(0);\n      });\n    };\n  };\n\n  function isPositiveInteger(value) {\n    return Number.isInteger(value) && value >= 0;\n  }\n\n  function ArgumentError(message) {\n    this.name = 'ArgumentError';\n    this.message = message;\n  }\n\n  const fetchRetry = fetchRetry$1(fetch);\n  const addModule = async (context, processorCode) => {\n      const blob = new Blob([processorCode], { type: 'text/javascript' });\n      const workletProcessorUrl = URL.createObjectURL(blob);\n      return context.audioWorklet.addModule(workletProcessorUrl);\n  };\n  // TODO : testing\n  const fetchFile = async (url) => {\n      let response;\n      try {\n          response = await fetchRetry(url, { retries: 3 });\n      }\n      catch (err) {\n          throw new FileError(response.status, err.toString());\n      }\n      if (!response.ok) {\n          const responseText = await response.text();\n          throw new FileError(response.status, responseText);\n      }\n      return response.arrayBuffer();\n  };\n  const audioBufferToArray = (audioBuffer) => {\n      const sound = [];\n      for (let channel = 0; channel < audioBuffer.numberOfChannels; channel++) {\n          sound.push(audioBuffer.getChannelData(channel));\n      }\n      return sound;\n  };\n  // TODO : testing\n  const fixSoundChannelCount = (sound, targetChannelCount) => {\n      if (sound.length === 0) {\n          throw new Error(`Received empty sound`);\n      }\n      const floatArrayType = sound[0].constructor;\n      const frameCount = sound[0].length;\n      const fixedSound = sound.slice(0, targetChannelCount);\n      while (sound.length < targetChannelCount) {\n          fixedSound.push(new floatArrayType(frameCount));\n      }\n      return fixedSound;\n  };\n  class FileError extends Error {\n      constructor(status, msg) {\n          super(`Error ${status} : ${msg}`);\n      }\n  }\n\n  /*\n   * Copyright (c) 2012-2020 S\xe9bastien Piquemal <sebpiq@gmail.com>\n   *\n   * BSD Simplified License.\n   * For information on usage and redistribution, and for a DISCLAIMER OF ALL\n   * WARRANTIES, see the file, \"LICENSE.txt,\" in this distribution.\n   *\n   * See https://github.com/sebpiq/WebPd_pd-parser for documentation\n   *\n   */\n  // Concatenate WorkletProcessor code with the Wasm bindings it needs\n  const WebPdWorkletProcessorCode = AssemblyscriptWasmBindingsCode + ';\\n' + _WebPdWorkletProcessorCode;\n  const registerWebPdWorkletNode = (context) => {\n      return addModule(context, WebPdWorkletProcessorCode);\n  };\n\n  /*\n   * Copyright (c) 2012-2020 S\xe9bastien Piquemal <sebpiq@gmail.com>\n   *\n   * BSD Simplified License.\n   * For information on usage and redistribution, and for a DISCLAIMER OF ALL\n   * WARRANTIES, see the file, \"LICENSE.txt,\" in this distribution.\n   *\n   * See https://github.com/sebpiq/WebPd_pd-parser for documentation\n   *\n   */\n  const FILES = {};\n  const STREAMS = {};\n  class FakeStream {\n      constructor(url, sound) {\n          this.url = url;\n          this.sound = sound;\n          this.frameCount = sound[0].length;\n          this.readPosition = 0;\n      }\n  }\n  const read = async (url) => {\n      if (FILES[url]) {\n          return FILES[url];\n      }\n      const arrayBuffer = await fetchFile(url);\n      return {\n          type: 'binary',\n          data: arrayBuffer,\n      };\n  };\n  // TODO : testing\n  const readSound = async (url, context) => {\n      let fakeFile = FILES[url] || (await read(url));\n      switch (fakeFile.type) {\n          case 'binary':\n              const audioBuffer = await context.decodeAudioData(fakeFile.data);\n              return audioBufferToArray(audioBuffer);\n          case 'sound':\n              // We copy the data here o it can be manipulated freely by the host.\n              // e.g. if the buffer is sent as transferrable to the node we don't want the original to be transferred.\n              return fakeFile.data.map((array) => array.slice());\n      }\n  };\n  const writeSound = async (sound, url) => {\n      FILES[url] = {\n          type: 'sound',\n          data: sound,\n      };\n  };\n  const readStreamSound = async (operationId, url, channelCount, context) => {\n      const sound = await readSound(url, context);\n      STREAMS[operationId] = new FakeStream(url, fixSoundChannelCount(sound, channelCount));\n      return STREAMS[operationId];\n  };\n  const writeStreamSound = async (operationId, url, channelCount) => {\n      const emptySound = [];\n      for (let channel = 0; channel < channelCount; channel++) {\n          emptySound.push(new Float32Array(0));\n      }\n      STREAMS[operationId] = new FakeStream(url, emptySound);\n      FILES[url] = {\n          type: 'sound',\n          data: emptySound,\n      };\n      return STREAMS[operationId];\n  };\n  const getStream = (operationId) => {\n      return STREAMS[operationId];\n  };\n  const killStream = (operationId) => {\n      console.log('KILL STREAM', operationId);\n      delete STREAMS[operationId];\n  };\n  const pullBlock = (stream, frameCount) => {\n      const block = stream.sound.map((array) => array.slice(stream.readPosition, stream.readPosition + frameCount));\n      stream.readPosition += frameCount;\n      return block;\n  };\n  const pushBlock = (stream, block) => {\n      stream.sound = stream.sound.map((channelData, channel) => {\n          const concatenated = new Float32Array(channelData.length + block[channel].length);\n          concatenated.set(channelData);\n          concatenated.set(block[channel], channelData.length);\n          return concatenated;\n      });\n      stream.frameCount = stream.sound[0].length;\n      FILES[stream.url].data = stream.sound;\n  };\n  var fakeFs = {\n      writeSound,\n      readSound,\n      readStreamSound,\n      writeStreamSound,\n      pullBlock,\n      pushBlock,\n  };\n\n  var closeSoundStream = async (node, payload) => {\n      if (payload.functionName === 'onCloseSoundStream') {\n          killStream(payload.arguments[0]);\n      }\n  };\n\n  const FS_OPERATION_SUCCESS = 0;\n  const FS_OPERATION_FAILURE = 1;\n\n  var readSoundFile = async (node, payload) => {\n      if (payload.functionName === 'onReadSoundFile') {\n          const [operationId, url, [channelCount]] = payload.arguments;\n          let operationStatus = FS_OPERATION_SUCCESS;\n          let sound = null;\n          try {\n              sound = await fakeFs.readSound(url, node.context);\n          }\n          catch (err) {\n              operationStatus = FS_OPERATION_FAILURE;\n              console.error(err);\n          }\n          if (sound) {\n              sound = fixSoundChannelCount(sound, channelCount);\n          }\n          node.port.postMessage({\n              type: 'fs',\n              payload: {\n                  functionName: 'sendReadSoundFileResponse',\n                  arguments: [operationId, operationStatus, sound],\n              },\n          }, \n          // Add as transferables to avoid copies between threads\n          sound.map((array) => array.buffer));\n      }\n      else if (payload.functionName === 'sendReadSoundFileResponse_return') ;\n  };\n\n  const BUFFER_HIGH = 10 * 44100;\n  const BUFFER_LOW = BUFFER_HIGH / 2;\n  var readSoundStream = async (node, payload) => {\n      if (payload.functionName === 'onOpenSoundReadStream') {\n          const [operationId, url, [channelCount]] = payload.arguments;\n          try {\n              await fakeFs.readStreamSound(operationId, url, channelCount, node.context);\n          }\n          catch (err) {\n              console.error(err);\n              node.port.postMessage({\n                  type: 'fs',\n                  payload: {\n                      functionName: 'closeSoundStream',\n                      arguments: [operationId, FS_OPERATION_FAILURE],\n                  },\n              });\n              return;\n          }\n          streamLoop(node, operationId, 0);\n      }\n      else if (payload.functionName === 'sendSoundStreamData_return') {\n          const stream = getStream(payload.operationId);\n          if (!stream) {\n              throw new Error(`unknown stream ${payload.operationId}`);\n          }\n          streamLoop(node, payload.operationId, payload.returned);\n      }\n      else if (payload.functionName === 'closeSoundStream_return') {\n          const stream = getStream(payload.operationId);\n          if (stream) {\n              killStream(payload.operationId);\n          }\n      }\n  };\n  const streamLoop = (node, operationId, framesAvailableInEngine) => {\n      const sampleRate = node.context.sampleRate;\n      const secondsToThreshold = Math.max(framesAvailableInEngine - BUFFER_LOW, 10) / sampleRate;\n      const framesToSend = BUFFER_HIGH -\n          (framesAvailableInEngine - secondsToThreshold * sampleRate);\n      setTimeout(() => {\n          const stream = getStream(operationId);\n          if (!stream) {\n              console.log(`stream ${operationId} was maybe closed`);\n              return;\n          }\n          if (stream.readPosition < stream.frameCount) {\n              const block = pullBlock(stream, framesToSend);\n              node.port.postMessage({\n                  type: 'fs',\n                  payload: {\n                      functionName: 'sendSoundStreamData',\n                      arguments: [operationId, block],\n                  },\n              }, \n              // Add as transferables to avoid copies between threads\n              block.map((array) => array.buffer));\n          }\n          else {\n              node.port.postMessage({\n                  type: 'fs',\n                  payload: {\n                      functionName: 'closeSoundStream',\n                      arguments: [operationId, FS_OPERATION_SUCCESS],\n                  },\n              });\n          }\n      }, secondsToThreshold * 1000);\n  };\n\n  var writeSoundFile = async (node, payload) => {\n      if (payload.functionName === 'onWriteSoundFile') {\n          const [operationId, sound, url, [channelCount]] = payload.arguments;\n          const fixedSound = fixSoundChannelCount(sound, channelCount);\n          await fakeFs.writeSound(fixedSound, url);\n          let operationStatus = FS_OPERATION_SUCCESS;\n          node.port.postMessage({\n              type: 'fs',\n              payload: {\n                  functionName: 'sendWriteSoundFileResponse',\n                  arguments: [operationId, operationStatus],\n              },\n          });\n      }\n      else if (payload.functionName === 'sendWriteSoundFileResponse_return') ;\n  };\n\n  var writeSoundStream = async (_, payload) => {\n      if (payload.functionName === 'onOpenSoundWriteStream') {\n          const [operationId, url, [channelCount]] = payload.arguments;\n          await fakeFs.writeStreamSound(operationId, url, channelCount);\n      }\n      else if (payload.functionName === 'onSoundStreamData') {\n          const [operationId, sound] = payload.arguments;\n          const stream = getStream(operationId);\n          if (!stream) {\n              throw new Error(`unknown stream ${operationId}`);\n          }\n          pushBlock(stream, sound);\n      }\n      else if (payload.functionName === 'closeSoundStream_return') {\n          const stream = getStream(payload.operationId);\n          if (stream) {\n              killStream(payload.operationId);\n          }\n      }\n  };\n\n  var index = async (node, messageEvent) => {\n      const message = messageEvent.data;\n      const { payload } = message;\n      if (message.type !== 'fs') {\n          throw new Error(`Unknown message type from node ${message.type}`);\n      }\n      if (payload.functionName === 'onReadSoundFile' ||\n          payload.functionName === 'sendReadSoundFileResponse_return') {\n          readSoundFile(node, payload);\n      }\n      else if (payload.functionName === 'onOpenSoundReadStream' ||\n          payload.functionName === 'sendSoundStreamData_return') {\n          readSoundStream(node, payload);\n      }\n      else if (payload.functionName === 'onWriteSoundFile' ||\n          payload.functionName === 'sendWriteSoundFileResponse_return') {\n          writeSoundFile(node, payload);\n      }\n      else if (payload.functionName === 'onOpenSoundWriteStream' ||\n          payload.functionName === 'onSoundStreamData') {\n          writeSoundStream(node, payload);\n      }\n      else if (payload.functionName === 'closeSoundStream_return') {\n          writeSoundStream(node, payload);\n          readSoundStream(node, payload);\n      }\n      else if (payload.functionName === 'onCloseSoundStream') {\n          closeSoundStream(node, payload);\n      }\n      else {\n          throw new Error(`Unknown callback ${payload.functionName}`);\n      }\n  };\n\n  /*\n   * Copyright (c) 2012-2020 S\xe9bastien Piquemal <sebpiq@gmail.com>\n   *\n   * BSD Simplified License.\n   * For information on usage and redistribution, and for a DISCLAIMER OF ALL\n   * WARRANTIES, see the file, \"LICENSE.txt,\" in this distribution.\n   *\n   * See https://github.com/sebpiq/WebPd_pd-parser for documentation\n   *\n   */\n  // TODO : manage transferables\n  class WebPdWorkletNode extends AudioWorkletNode {\n      constructor(context) {\n          super(context, 'webpd-node', {\n              numberOfOutputs: 1,\n              outputChannelCount: [2],\n          });\n      }\n      destroy() {\n          this.port.postMessage({\n              type: 'destroy',\n              payload: {},\n          });\n      }\n  }\n\n  exports.WebPdWorkletNode = WebPdWorkletNode;\n  exports.fsWeb = index;\n  exports.registerWebPdWorkletNode = registerWebPdWorkletNode;\n\n  return exports;\n\n})({});\n"));throw new Error("Unknown template ".concat(e))},Ji=function(e){var n=e.artefacts;if(!n.compiledJs&&!n.wasm)throw new Error("Needs at least compiledJs or wasm to run");var t=n.compiledJs?"patch.js":"patch.wasm",r={"index.html":'\n<!DOCTYPE html>\n<html lang="en">\n    <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <meta http-equiv="X-UA-Compatible" content="ie=edge">\n        <title>WebPd boilerplate</title>\n        <style>\n            #start {\n                display: none;\n                position: fixed;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n            }\n            #loading {\n                width: 100%;\n                height: 100%;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n            }\n        </style>\n    </head>\n    <body>\n        <button id="start"> Start </button>\n        <div id="loading"> Loading ... </div>\n        <script src="'.concat(Xi,"\"><\/script>\n        <script>\n            const loadingDiv = document.querySelector('#loading')\n            const startButton = document.querySelector('#start')\n            const audioContext = new AudioContext()\n\n            let patch = null\n            let stream = null\n            let webpdNode = null\n\n            const initApp = async () => {\n                // Register the worklet\n                await WebPdRuntime.registerWebPdWorkletNode(audioContext)\n\n                // Fetch the patch code\n                response = await fetch('").concat(t,"')\n                patch = await ").concat(n.compiledJs?"response.text()":"response.arrayBuffer()","\n\n                // Get audio input\n                stream = await navigator.mediaDevices.getUserMedia({ audio: true })\n\n                // Hide loading and show start button\n                loadingDiv.style.display = 'none'\n                startButton.style.display = 'block'\n            }\n\n            const startApp = async () => {\n                // AudioContext needs to be resumed on click to protects users \n                // from being spammed with autoplay.\n                // See : https://github.com/WebAudio/web-audio-api/issues/345\n                if (audioContext.state === 'suspended') {\n                    audioContext.resume()\n                }\n\n                // Setup web audio graph\n                const sourceNode = audioContext.createMediaStreamSource(stream)\n                webpdNode = new WebPdRuntime.WebPdWorkletNode(audioContext)\n                sourceNode.connect(webpdNode)\n                webpdNode.connect(audioContext.destination)\n\n                // Setup filesystem management\n                webpdNode.port.onmessage = (message) => WebPdRuntime.fs.web(webpdNode, message)\n\n                // Send code to the worklet\n                ").concat(n.compiledJs?"\n                webpdNode.port.postMessage({\n                    type: 'code:JS',\n                    payload: {\n                        jsCode: patch,\n                    },\n                })":"\n                webpdNode.port.postMessage({\n                    type: 'code:WASM',\n                    payload: {\n                        wasmBuffer: patch,\n                    },\n                })","\n\n                // Hide the start button\n                startButton.style.display = 'none'\n            }\n\n            startButton.onclick = startApp\n\n            initApp().\n                then(() => {\n                    console.log('App initialized')\n                })\n\n            // You can then use this function to interact with your patch\n            // e.g. :\n            // sendMsgToWebPd('n_0_1', '0', ['bang'])\n            // sendMsgToWebPd('n_0_2', '0', [123])\n            const sendMsgToWebPd = (nodeId, portletId, message) => {\n                webpdNode.port.postMessage({\n                    type: 'inletCaller',\n                    payload: {\n                        nodeId,\n                        portletId,\n                        message,\n                    },\n                })\n            }\n            ").concat(n.dspGraph&&n.dspGraph.inletCallerSpecs?"\n            // For info, compilation has opened the following ports in your patch.\n            // You can send messages to them :"+Object.entries(n.dspGraph.inletCallerSpecs).flatMap((function(e){var t=bt(e,2),r=t[0];return t[1].map((function(e){return'\n            //     - Node of type "'.concat(n.dspGraph.graph[r].type,'", nodeId "').concat(r,'", portletId "').concat(e,'"')}))})).join(""):"","\n        <\/script>\n    </body>\n</html>")};return n.compiledJs?r[t]=n.compiledJs:r[t]=n.wasm,r},Qi=/\$(\d+)/,Zi=function(e,n){var t=e.patches[n];if(!t)throw new Error("Patch ".concat(n," not found"));return t},es=function(e,n){var t=e.nodes[n];if(!t)throw new Error("Pd node ".concat(n," not found in patch ").concat(e.id));return t},ns=function e(n,t){var r=n[t];return r?r.aliasTo?e(n,r.aliasTo):{nodeBuilder:r,nodeType:t}:null},ts=function(e,n){var t=parseInt(n.id);if(isNaN(t))throw new Error("Invalid patch id");for(var r,a=[t].concat(Mn(n.args)),o=new RegExp(Qi,"g");r=o.exec(e);){var i=parseInt(r[1],10),s=0<=i&&i<a.length;if(r[0]===e)return s?a[i]:void 0;s&&(e=e.replace(r[0],a[i].toString()))}return e},rs=function(e,n){var t=ts(n[0],e),r="string"===typeof n[1]?ts(n[1],e):n[1];return[(void 0===t?"":t).toString(),void 0===r?0:r,n[2]]},as=function(e,n){return n.map((function(n){return"string"===typeof n?ts(n,e):n}))};function os(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}function is(e,n){if(null==e)return{};var t,r,a=os(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var ss,cs=["status","parsingWarnings"],us=function(){var e=eo(Ft().mark((function e(n,t,r){var a,o,i,s,c,u;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ms({patches:{},arrays:{},rootPatchId:n.rootPatchId},n),o=bt(a,2),i=o[0],s=o[1],u=fs((c={pd:s,nodeBuilders:t,abstractions:{},errors:{},warnings:{},abstractionLoader:r}).pd),Object.values(c.pd.arrays).forEach((function(e){return e.args=rs(u,e.args)})),e.next=6,ls(c,u,u,i);case 6:if(!Object.keys(c.errors).length){e.next=11;break}return e.abrupt("return",{status:1,pd:c.pd,errors:c.errors,warnings:c.warnings});case 11:return e.abrupt("return",{status:0,pd:c.pd,abstractions:c.abstractions,warnings:c.warnings});case 12:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),ls=function(){var e=eo(Ft().mark((function e(n,t,r,a){var o,i,s,c,u,l,f;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=n.pd,i=n.abstractionLoader,s=n.errors,c=n.warnings,r.nodes=Rr({},r.nodes),u=Ft().mark((function e(){var u,d,p,m,h,g,y,v;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=f[l],!s.hasOwnProperty(u.type)){e.next=3;break}return e.abrupt("return","continue");case 3:if("subpatch"!==u.nodeClass){e.next=10;break}return u=r.nodes[u.id]=Rr(Rr({},u),{},{patchId:ps(a.patches,u.patchId)}),e.next=7,ls(n,t,Zi(o,u.patchId),a);case 7:return e.abrupt("return","continue");case 10:if("array"!==u.nodeClass){e.next=13;break}return u=r.nodes[u.id]=Rr(Rr({},u),{},{arrayId:ps(a.arrays,u.arrayId)}),e.abrupt("return","continue");case 13:if(null===ns(n.nodeBuilders,u.type)){e.next=15;break}return e.abrupt("return","continue");case 15:return e.next=17,ds(n,u.type,i);case 17:if((d=e.sent).parsingWarnings&&(c[u.type]=d.parsingWarnings),1!==d.status){e.next=23;break}return d.status,d.parsingWarnings,p=is(d,cs),s[u.type]=p,e.abrupt("return","continue");case 23:return m=ms(o,d.pd),h=bt(m,2),g=h[0],y=h[1],v=fs(y),u=r.nodes[u.id]=Rr(Rr({},u),{},{args:as(t,u.args),nodeClass:"subpatch",patchId:v.id,type:"pd"}),v.args=u.args,Object.values(y.arrays).forEach((function(e){return e.args=rs(v,e.args)})),o.patches=Rr(Rr({},o.patches),y.patches),o.arrays=Rr(Rr({},o.arrays),y.arrays),e.next=32,ls(n,v,v,g);case 32:case"end":return e.stop()}}),e)})),l=0,f=Object.values(r.nodes);case 4:if(!(l<f.length)){e.next=12;break}return e.delegateYield(u(),"t0",6);case 6:if("continue"!==e.t0){e.next=9;break}return e.abrupt("continue",9);case 9:l++,e.next=4;break;case 12:case"end":return e.stop()}}),e)})));return function(n,t,r,a){return e.apply(this,arguments)}}(),fs=function(e){var n=e.patches[e.rootPatchId];if(!n)throw new Error("Could not resolve root patch");return n},ds=function(){var e=eo(Ft().mark((function e(n,t,r){var a;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.abstractions[t]){e.next=6;break}return e.next=3,r(t);case 3:return 0===(a=e.sent).status&&(n.abstractions[t]=a.pd),e.abrupt("return",a);case 6:return e.abrupt("return",{status:0,pd:n.abstractions[t]});case 7:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),ps=function(e,n){var t=e.get(n);if(void 0===t)throw new Error("Could not resolve ".concat(n));return t},ms=function(e,n){var t={patches:{},arrays:{},rootPatchId:n.rootPatchId},r={patches:new Map,arrays:new Map},a=Object.keys(e.patches);a=a.length?a:["-1"];var o=Object.keys(e.arrays);o=o.length?o:["-1"];var i=Math.max.apply(Math,Mn(a.map((function(e){return parseInt(e)}))))+1,s=Math.max.apply(Math,Mn(o.map((function(e){return parseInt(e)}))))+1;return Object.entries(n.patches).forEach((function(e){var n=bt(e,2),a=n[0],o=n[1],s="".concat(i++);r.patches.set(a,s),t.patches[s]=Rr(Rr({},o),{},{id:s})})),Object.entries(n.arrays).forEach((function(e){var n=bt(e,2),a=n[0],o=n[1],i="".concat(s++);r.arrays.set(a,i),t.arrays[i]=Rr(Rr({},o),{},{id:i})})),t.rootPatchId=ps(r.patches,t.rootPatchId),[r,t]},hs={translateArgs:function(){return{}},build:function(){return{inlets:{},outlets:{}}}},gs={pd:hs,inlet:hs,outlet:hs,"inlet~":hs,"outlet~":hs},ys=function(e,n){return e.portletId===n.portletId&&e.nodeId===n.nodeId},vs=function(e){var n=[];return Object.keys(e).forEach((function(t){var r=mi(e,t);ki(r.sources,t).forEach((function(t){var r=bt(t,2),a=r[0],o=r[1],i=mi(e,a.nodeId);yi(i,a.portletId).filter((function(e){return ys(e,o)}))[0]||n.push([a,o])})),xi(r.sinks,t).forEach((function(t){var r=bt(t,2),a=r[0],o=r[1],i=mi(e,o.nodeId);vi(i,o.portletId)||n.push([a,o])}))})),n.length?{inconsistentConnections:n}:null},bs=function(e,n){return e[n.id]||(e[n.id]=n),e[n.id]},Ss=function(e,n,t){var r=mi(e,t.nodeId),a=mi(e,n.nodeId),o=vi(r,t.portletId),i=yi(a,n.portletId),s=gi(a,n.portletId),c=hi(r,t.portletId);if(!i.some((function(e){return ys(t,e)}))){if(!s)throw new Error("Undefined outlet ".concat(n.nodeId,":").concat(n.portletId));if(!c)throw new Error("Undefined inlet ".concat(t.nodeId,":").concat(t.portletId));if(s.type!==c.type)throw new Error("Incompatible portlets types ".concat(n.nodeId," | ").concat(n.portletId," (").concat(s.type,") -> ").concat(t.nodeId," | ").concat(t.portletId," (").concat(c.type,")"));if("signal"===c.type&&o.length)throw new Error("Signal inlets can have only one connection");xs(r.sources,t.portletId).push(n),xs(a.sinks,n.portletId).push(t)}},ws=function(e,n,t){var r=mi(e,t.nodeId),a=mi(e,n.nodeId),o=yi(a,n.portletId);a.sinks[n.portletId]=o.filter((function(e){return!ys(t,e)}));var i=vi(r,t.portletId);r.sources[t.portletId]=i.filter((function(e){return!ys(n,e)}))},_s=function(e,n,t){var r=mi(e,n),a=mi(e,t);Object.entries(a.sources).forEach((function(e){var t=bt(e,2),r=t[0],o=t[1];return a.sources[r]=o.filter((function(e){return e.nodeId!==n}))})),Object.entries(r.sinks).forEach((function(e){var n=bt(e,2),a=n[0],o=n[1];return r.sinks[a]=o.filter((function(e){return e.nodeId!==t}))}))},ks=function(e,n){var t=e[n];t&&(Object.values(t.sources).forEach((function(t){return t.slice(0).forEach((function(t){return _s(e,t.nodeId,n)}))})),Object.values(t.sinks).forEach((function(t){return t.slice(0).forEach((function(t){return _s(e,n,t.nodeId)}))})),delete e[n])},xs=function(e,n){return e[n]=e[n]||[]},Is={getters:e,traversal:n,mutation:a,helpers:r};!function(e){e.PD="n",e.MIXER="m"}(ss||(ss={}));var Es=function(e,n){return"".concat(ss.PD,"_").concat(e,"_").concat(n)},Os=function(){var e=eo(Ft().mark((function e(n,t){var r,a,o,i,s,c,u,l=arguments;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]?l[2]:function(){var e=eo(Ft().mark((function e(n){return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{status:1,unknownNodeType:n});case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),e.next=3,us(n,t,r);case 3:if(a=e.sent,o=Object.keys(a.warnings),1!==a.status){e.next=7;break}return e.abrupt("return",{status:1,abstractionsLoadingErrors:a.errors,abstractionsLoadingWarnings:o?a.warnings:void 0});case 7:return i=a.pd,s={pd:i,nodeBuilders:t,graph:{}},c=Bs(i),Ls(s,[c],Ts),As(s,[c]),Object.values(s.graph).forEach((function(e){Object.keys(gs).includes(e.type)&&Is.mutation.deleteNode(s.graph,e.id)})),u=Object.values(s.pd.arrays).reduce((function(e,n){return e[n.args[0]]=n.data?new Float32Array(n.data):new Float32Array(n.args[1]),e}),{}),e.abrupt("return",{status:0,graph:s.graph,pd:s.pd,arrays:u,abstractionsLoadingWarnings:o?a.warnings:void 0});case 15:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),Ts=function(e,n){var t=Rs(n),r=js(n);Object.values(t.nodes).forEach((function(n){var a=Es(t.id,n.id);Cs(e,r,t,n,a)}))},Cs=function(e,n,t,r,a){var o=ns(e.nodeBuilders,r.type);if(null===o)throw new Error("unknown node type ".concat(r.type));var i=o.nodeBuilder,s=o.nodeType;if(!0===i.isNoop)return null;i.skipDollarArgsResolution||(r=Rr(Rr({},r),{},{args:as(n,r.args)}));var c=i.translateArgs(r,t,e.pd),u=i.build(c);return Is.mutation.addNode(e.graph,Rr({id:a,type:s,args:c,sources:{},sinks:{}},u))},As=function(e,n){var t=[];Ls(e,n,(function(e,n){Ps(e,n,t)}));for(var r=function(){var n=bt(t[0],2),r=(n[0],n[1]),a=[],o=[];t.forEach((function(e){var n=bt(e,2),t=n[0],i=n[1];Ws(r,i)?a.push(t):o.push(e)})),t=o,Fs(e,a,r)};t.length;)r()},Fs=function(e,n,t){var r,a,o=bt(t,2),i=o[0],s=o[1],c=e.graph,u=Rs(i),l=js(i),f={nodeId:Es(u.id,s.nodeId),portletId:s.portletId.toString(10)},d=ns(e.nodeBuilders,es(u,s.nodeId).type).nodeBuilder,p=[],m=[],h=[];if(n.forEach((function(e){var n=bt(e,2),t=n[0],r=n[1],a=Rs(t),o={nodeId:Es(a.id,r.nodeId),portletId:r.portletId.toString(10)},i=Is.getters.getNode(c,o.nodeId);"signal"===Is.getters.getOutlet(i,o.portletId).type?m.push(o):h.push(o)})),m.length>1){var g=Cs(e,l,u,{id:"dummy",type:"mixer~",args:[m.length],nodeClass:"generic"},(r=f.nodeId,a=f.portletId,"".concat(ss.MIXER,"_").concat(r,"_").concat(a)));Is.mutation.connect(c,{nodeId:g.id,portletId:"0"},f),m.forEach((function(e,n){p.push([e,{nodeId:g.id,portletId:n.toString()}])}))}else m.forEach((function(e){return p.push([e,f])}));h.forEach((function(e){var n=f;if(d.rerouteMessageConnection){var t=d.rerouteMessageConnection(f.portletId);void 0!==t&&(n={nodeId:f.nodeId,portletId:t})}p.push([e,n])})),p.forEach((function(e){var n=bt(e,2),t=n[0],r=n[1];Is.mutation.connect(c,t,r)}))},Ps=function(e,n,t){var r=e.graph,a=Rs(n);a.connections.filter((function(e){var n=e.source,t=e.sink,o=Es(a.id,n.nodeId),i=Es(a.id,t.nodeId);return!(!r[o]||!r[i])})).forEach((function(r){var a=r.source,o=r.sink,i=Ms(e,[n,a]),s=Ns(e,n,o);i.forEach((function(e){return s.forEach((function(n){t.some((function(t){var r=bt(t,2),a=r[0],o=r[1];return Ws(e,a)&&Ws(n,o)}))||t.push([e,n])}))}))}))},Ms=function e(n,t){var r=bt(t,2),a=r[0],o=r[1],i=n.pd,s=Rs(a),c=es(s,o.nodeId);if("inlet"===c.type||"inlet~"===c.type){var u=Ds(a);if(!u)return[];var l=Vs(u,s.id),f=Us(s.inlets,c.id);return u.connections.filter((function(e){var n=e.sink;return n.nodeId===l.id&&n.portletId===f})).flatMap((function(t){var r=t.source;return e(n,[Mn(a.slice(0,-1)),r])}))}if("subpatch"===c.nodeClass){var d=Zi(i,c.patchId),p=zs(d.outlets,o.portletId);return d.connections.filter((function(e){var n=e.sink;return n.nodeId===p&&0===n.portletId})).flatMap((function(t){var r=t.source;return e(n,[[].concat(Mn(a),[d]),r])}))}return[[a,o]]},Ns=function e(n,t,r){var a=n.pd,o=Rs(t),i=es(o,r.nodeId);if("outlet"===i.type||"outlet~"===i.type){var s=Ds(t);if(!s)return[];var c=Vs(s,o.id),u=Us(o.outlets,i.id);return s.connections.filter((function(e){var n=e.source;return n.nodeId===c.id&&n.portletId===u})).flatMap((function(r){var a=r.sink;return e(n,Mn(t.slice(0,-1)),a)}))}if("subpatch"===i.nodeClass){var l=Zi(a,i.patchId),f=zs(l.inlets,r.portletId);return l.connections.filter((function(e){var n=e.source;return n.nodeId===f&&0===n.portletId})).flatMap((function(r){var a=r.sink;return e(n,[].concat(Mn(t),[l]),a)}))}return[[t,r]]},Ls=function e(n,t,r){var a=Rs(t);r(n,t),Object.values(a.nodes).forEach((function(a){if("subpatch"===a.nodeClass){var o=Zi(n.pd,a.patchId);e(n,[].concat(Mn(t),[o]),r)}}))},Rs=function(e){var n=e.slice(-1)[0];if(!n)throw new Error("patchPath empty !");return n},Ds=function(e){return e.length<2?null:e.slice(-2)[0]},js=function(e){var n=e.slice(0).reverse().find((function(e){return e.isRoot}));if(!n)throw new Error("Could not resolve root patch from path");return n},Bs=function(e){var n=e.patches[e.rootPatchId];if(!n)throw new Error("Could not resolve root patch");return n},zs=function(e,n){var t=e[n];if(void 0===t)throw new Error("Portlet ".concat(n," is undefined in patch.outlets/patch.inlets"));return t},Us=function(e,n){return e.findIndex((function(e){return e===n}))},Vs=function(e,n){var t=Object.values(e.nodes).find((function(e){return"subpatch"===e.nodeClass&&e.patchId===n}));if(void 0===t)throw new Error("could not find subpatch node with patchId=".concat(n," inside patch ").concat(e.id));return t},Ws=function(e,n){var t=bt(e,2),r=t[0],a=t[1],o=bt(n,2),i=o[0],s=o[1];return Rs(r).id===Rs(i).id&&a.nodeId===s.nodeId&&a.portletId===s.portletId},Gs=function(e){var n=e.patches[e.rootPatchId];return{controls:$s(e,n),comments:Object.values(e.patches[e.rootPatchId].nodes).filter((function(e){return"text"===e.type})).map((function(e){return{type:"comment",patch:n,node:e,text:e.args[0].toString()}}))}},$s=function e(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===r&&(r={topLeft:{x:-1/0,y:-1/0},bottomRight:{x:1/0,y:1/0}});var a=[];return Object.values(t.nodes).forEach((function(o){if("pd"===o.type&&"subpatch"===o.nodeClass){var i=n.patches[o.patchId],s=Qs(o.layout);if(!i.layout.graphOnParent)return;var c=Zs(i.layout),u=Hs({x:s.x,y:s.y},{x:c.viewportX,y:c.viewportY}),l={topLeft:u(r.topLeft),bottomRight:u(r.bottomRight)},f={x:c.viewportX,y:c.viewportY},d={topLeft:f,bottomRight:Xs(f,{x:c.viewportWidth,y:c.viewportHeight})},p=Ys(l,d);if(null===p)return;var m=e(n,i,p),h={type:"container",patch:t,node:o,children:m};a.push(h)}else if(o.type in No&&"control"===o.nodeClass){var g=Qs(o.layout);if(!Js({x:g.x,y:g.y},r))return;var y={type:"control",patch:t,node:o};a.push(y)}})),a},Ks=function e(n,t){n.forEach((function(n){"container"===n.type?e(n.children,t):"control"===n.type&&t(n)}))},qs=function(e,n){var t={};return Ks(e,(function(e){var r=Es(e.patch.id,e.node.id);n[r]&&(t[r]=t[r]||[],t[r].push("0"))})),t},Hs=function(e,n){var t=n.x-e.x,r=n.y-e.y;return function(e){return{x:e.x+t,y:e.y+r}}},Xs=function(e,n){return{x:e.x+n.x,y:e.y+n.y}},Ys=function(e,n){var t={x:Math.max(e.topLeft.x,n.topLeft.x),y:Math.max(e.topLeft.y,n.topLeft.y)},r={x:Math.min(e.bottomRight.x,n.bottomRight.x),y:Math.min(e.bottomRight.y,n.bottomRight.y)};return r.x<=t.x||r.y<=t.y?null:{topLeft:t,bottomRight:r}},Js=function(e,n){return n.topLeft.x<=e.x&&e.x<=n.bottomRight.x&&n.topLeft.y<=e.y&&e.y<=n.bottomRight.y},Qs=function(e){if(!e)throw new Error("Missing node layout");var n=e.x,t=e.y;if("number"!==typeof n||"number"!==typeof t)throw new Error("Missing node layout attributes");return{x:n,y:t}},Zs=function(e){if(!e)throw new Error("Missing patch layout");var n=e.viewportX,t=e.viewportY,r=e.viewportWidth,a=e.viewportHeight;if("number"!==typeof n||"number"!==typeof t||"number"!==typeof r||"number"!==typeof a)throw new Error("Missing patch layout attributes");return{viewportX:n,viewportY:t,viewportWidth:r,viewportHeight:a}},ec=function(e,n){if(!n)return null;for(var t=(n>>>=0)+new Uint32Array(e.memory.buffer)[n-4>>>2]>>>1,r=new Uint16Array(e.memory.buffer),a=n>>>1,o="";t-a>1024;)o+=String.fromCharCode.apply(String,Mn(r.subarray(a,a+=1024)));return o+String.fromCharCode.apply(String,Mn(r.subarray(a,t)))},nc=function(e,n){if(null==n)return 0;for(var t=n.length,r=e.__new(t<<1,1)>>>0,a=new Uint16Array(e.memory.buffer),o=0;o<t;++o)a[(r>>>1)+o]=n.charCodeAt(o);return r},tc=function(e,n,t){if(!t)return null;var r=new Uint32Array(e.memory.buffer);return new n(e.memory.buffer,r[t+4>>>2],r[t+8>>>2]/n.BYTES_PER_ELEMENT)},rc=function(e,n,t){var r=Fi(n),a=e.createFloatArray(t.length),o=tc(e,r,a);return o.set(t),{array:o,arrayPointer:a}},ac=function(e,n,t){var r=e.core_createListOfArrays();return t.forEach((function(t){var a=rc(e,n,t).arrayPointer;e.core_pushToListOfArrays(r,a)})),r},oc=function(e,n,t){for(var r=e.core_getListOfArraysLength(t),a=[],o=Fi(n),i=0;i<r;i++){var s=e.core_getListOfArraysElem(t,i);a.push(tc(e,o,s))}return a},ic=function(e,n){var t=e.msg_getTokenTypes(n),r=tc(e,Int32Array,t),a=[];return r.forEach((function(t,r){if(t===e.MSG_FLOAT_TOKEN.valueOf())a.push(e.msg_readFloatToken(n,r));else if(t===e.MSG_STRING_TOKEN.valueOf()){var o=e.msg_readStringToken(n,r);a.push(ec(e,o))}})),a},sc=function(){var e=eo(Ft().mark((function e(n){var t,r,a,o=arguments;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,WebAssembly.instantiate(n,Rr({env:{abort:function(e,n,t,r){var o=ec(a,e);!function(){throw Error("".concat(o," at ").concat(t,":").concat(r))}()},seed:function(){return Date.now()*Math.random()},"console.log":function(e){console.log(ec(a,e))}}},t));case 3:return r=e.sent,a=r.instance.exports,e.abrupt("return",r.instance);case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),cc=function(){var e=eo(Ft().mark((function e(n){var t;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new uc(n),e.next=3,t.initialize();case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),uc=function(){function e(n){io(this,e),this.wasmBuffer=n}return oo(e,[{key:"initialize",value:function(){var e=eo(Ft().mark((function e(){var n,t;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lc(this.wasmBuffer);case 2:return this.metadata=e.sent,this.bitDepth=this.metadata.audioSettings.bitDepth,this.arrayType=Fi(this.bitDepth),n=Rr(Rr({},this._fsImports()),this._outletListenersImports()),e.next=8,sc(this.wasmBuffer,{input:n});case 8:t=e.sent,this.wasmExports=t.exports,this.commons=this._bindCommons(),this.fs=this._bindFs(),this.inletCallers=this._bindInletCallers(),this.outletListeners=this._bindOutletListeners();case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"configure",value:function(e,n){this.blockSize=n,this.metadata.audioSettings.blockSize=n,this.metadata.audioSettings.sampleRate=e,this.wasmExports.configure(e,n),this._updateWasmInOuts()}},{key:"loop",value:function(e,n){for(var t=0;t<e.length;t++)this.wasmInput.set(e[t],t*this.blockSize);this._updateWasmInOuts(),this.wasmExports.loop(),this._updateWasmInOuts();for(var r=0;r<n.length;r++)n[r].set(this.wasmOutput.subarray(this.blockSize*r,this.blockSize*(r+1)))}},{key:"_updateWasmInOuts",value:function(){this.wasmOutput=tc(this.wasmExports,this.arrayType,this.wasmExports.getOutput()),this.wasmInput=tc(this.wasmExports,this.arrayType,this.wasmExports.getInput())}},{key:"_bindCommons",value:function(){var e=this;return{getArray:function(n){var t=nc(e.wasmExports,n),r=e.wasmExports.commons_getArray(t);return tc(e.wasmExports,e.arrayType,r)},setArray:function(n,t){var r=nc(e.wasmExports,n),a=rc(e.wasmExports,e.bitDepth,t).arrayPointer;e.wasmExports.commons_setArray(r,a),e._updateWasmInOuts()}}}},{key:"_bindFs",value:function(){var e=this;return{sendReadSoundFileResponse:function(n,t,r){var a=0;r&&(a=ac(e.wasmExports,e.bitDepth,r)),e.wasmExports.fs_onReadSoundFileResponse(n,t,a),e._updateWasmInOuts()},sendWriteSoundFileResponse:this.wasmExports.fs_onWriteSoundFileResponse,sendSoundStreamData:function(n,t){var r=ac(e.wasmExports,e.bitDepth,t),a=e.wasmExports.fs_onSoundStreamData(n,r);return e._updateWasmInOuts(),a},closeSoundStream:this.wasmExports.fs_onCloseSoundStream,onReadSoundFile:function(){},onWriteSoundFile:function(){},onOpenSoundReadStream:function(){},onOpenSoundWriteStream:function(){},onSoundStreamData:function(){},onCloseSoundStream:function(){}}}},{key:"_fsImports",value:function(){var e=this,n={i_fs_readSoundFile:function(n,t,r){var a=ec(e.wasmExports,t),o=ic(e.wasmExports,r);e.fs.onReadSoundFile(n,a,o)},i_fs_writeSoundFile:function(n,t,r,a){var o=oc(e.wasmExports,e.bitDepth,t),i=ec(e.wasmExports,r),s=ic(e.wasmExports,a);e.fs.onWriteSoundFile(n,o,i,s)},i_fs_openSoundReadStream:function(n,t,r){var a=ec(e.wasmExports,t),o=ic(e.wasmExports,r);e._updateWasmInOuts(),e.fs.onOpenSoundReadStream(n,a,o)},i_fs_openSoundWriteStream:function(n,t,r){var a=ec(e.wasmExports,t),o=ic(e.wasmExports,r);e.fs.onOpenSoundWriteStream(n,a,o)},i_fs_sendSoundStreamData:function(n,t){var r=oc(e.wasmExports,e.bitDepth,t);e.fs.onSoundStreamData(n,r)},i_fs_closeSoundStream:function(){var n;return(n=e.fs).onCloseSoundStream.apply(n,arguments)}};return n}},{key:"_bindInletCallers",value:function(){var e=this;return li(this.metadata.compilation.inletCallerSpecs,(function(n,t){return fi(n,(function(n){return[n,function(r){var a=function(e,n){var t=n.reduce((function(n,t){if("number"===typeof t)n.push(e.MSG_FLOAT_TOKEN.valueOf());else{if("string"!==typeof t)throw new Error("invalid message value ".concat(t));n.push(e.MSG_STRING_TOKEN.valueOf()),n.push(t.length)}return n}),[]),r=e.msg_createTemplate(t.length);tc(e,Int32Array,r).set(t);var a=e.msg_create(r);return n.forEach((function(n,t){if("number"===typeof n)e.msg_writeFloatToken(a,t,n);else if("string"===typeof n){var r=nc(e,n);e.msg_writeStringToken(a,t,r)}})),a}(e.wasmExports,r);e.wasmExports[e.metadata.compilation.codeVariableNames.inletCallers[t][n]](a)}]}))}))}},{key:"_bindOutletListeners",value:function(){return li(this.metadata.compilation.outletListenerSpecs,(function(e){return fi(e,(function(e){return[e,{onMessage:function(){}}]}))}))}},{key:"_outletListenersImports",value:function(){var e=this,n={},t=this.metadata.compilation.codeVariableNames;return Object.entries(this.metadata.compilation.outletListenerSpecs).forEach((function(r){var a=bt(r,2),o=a[0];a[1].forEach((function(r){var a=t.outletListeners[o][r];n[a]=function(n){var t=ic(e.wasmExports,n);e.outletListeners[o][r].onMessage(t)}}))})),n}}]),e}(),lc=function(){var e=eo(Ft().mark((function e(n){var t,r,a,o,i;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={},WebAssembly.Module.imports(new WebAssembly.Module(n)).filter((function(e){return"input"===e.module&&"function"===e.kind})).forEach((function(e){return t[e.name]=function(){}})),e.next=5,sc(n,{input:t});case 5:return r=e.sent,a=r.exports,o=a.metadata.valueOf(),i=ec(a,o),e.abrupt("return",JSON.parse(i));case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),fc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function dc(e,n,t,r){if(["32f","64"].indexOf(n)>-1&&["32f","64"].indexOf(r)>-1)t.set(e);else{gc(n),gc(r);var a=function(e,n){var t=function(e){return e};e!=n&&(t=["32f","64"].includes(e)?mc:["32f","64"].includes(n)?hc:pc);return t}(n,r),o={oldMin:Math.pow(2,parseInt(n,10))/2,newMin:Math.pow(2,parseInt(r,10))/2,oldMax:Math.pow(2,parseInt(n,10))/2-1,newMax:Math.pow(2,parseInt(r,10))/2-1};yc(n,e,!0);for(var i=0,s=e.length;i<s;i++)t[i]=a(e[i],o);yc(r,t,!1)}}function pc(e,n){return e=e>0?parseInt(e/n.oldMax*n.newMax,10):parseInt(e/n.oldMin*n.newMin,10)}function mc(e,n){return parseInt(e>0?e*n.newMax:e*n.newMin,10)}function hc(e,n){return e>0?e/n.oldMax:e/n.oldMin}function gc(e){if("32f"!=e&&"64"!=e&&(parseInt(e,10)<"8"||parseInt(e,10)>"53"))throw new Error("Invalid bit depth.")}function yc(e,n,t){if("8"==e)for(var r=t?-128:128,a=0,o=n.length;a<o;a++)n[a]=n[a]+=r}var vc=[-1,-1,-1,-1,2,4,6,8,-1,-1,-1,-1,2,4,6,8],bc=[7,8,9,10,11,12,13,14,16,17,19,21,23,25,28,31,34,37,41,45,50,55,60,66,73,80,88,97,107,118,130,143,157,173,190,209,230,253,279,307,337,371,408,449,494,544,598,658,724,796,876,963,1060,1166,1282,1411,1552,1707,1878,2066,2272,2499,2749,3024,3327,3660,4026,4428,4871,5358,5894,6484,7132,7845,8630,9493,10442,11487,12635,13899,15289,16818,18500,20350,22385,24623,27086,29794,32767];function Sc(e,n){for(var t=function(e,n){_c(e,n);var t=[];return t.push(255&e),t.push(e>>8&255),t.push(n.index),t.push(0),t}(e[0],n),r=3,a=e.length;r<a;r+=2){var o=_c(e[r],n),i=_c(e[r+1],n);t.push(i<<4|o)}return t}function wc(e,n){var t;n.predicted=(t=e[1]<<8|e[0])>32768?t-65536:t,n.index=e[2],n.step=bc[n.index];for(var r=[n.predicted,n.predicted],a=4,o=e.length;a<o;a++){var i=e[a],s=i>>4,c=s<<4^i;r.push(kc(c,n)),r.push(kc(s,n))}return r}function _c(e,n){var t=e-n.predicted,r=0;t>=0?r=0:(r=8,t=-t);var a=bc[n.index],o=a>>3;return t>a&&(r|=4,t-=a,o+=a),t>(a>>=1)&&(r|=2,t-=a,o+=a),t>(a>>=1)&&(r|=1,o+=a),function(e,n,t){8&e?t.predicted-=n:t.predicted+=n;t.predicted<-32768?t.predicted=-32768:t.predicted>32767&&(t.predicted=32767);t.index+=vc[7&e],t.index<0?t.index=0:t.index>88&&(t.index=88)}(r,o,n),r}function kc(e,n){var t=0;return 4&e&&(t+=n.step),2&e&&(t+=n.step>>1),1&e&&(t+=n.step>>2),t+=n.step>>3,8&e&&(t=-t),n.predicted+=t,n.predicted>32767?n.predicted=32767:n.predicted<-32767&&(n.predicted=-32767),function(e,n){n.index+=vc[e],n.index<0?n.index=0:n.index>88&&(n.index=88);n.step=bc[n.index]}(e,n),n.predicted}var xc=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];function Ic(e){var n,t=~(e=-32768==e?-32767:e)>>8&128;if(t||(e*=-1),e>32635&&(e=32635),e>=256){var r=xc[e>>8&127];n=r<<4|e>>r+3&15}else n=e>>4;return 85^n^t}function Ec(e){var n=0;0!==(128&(e^=85))&&(e&=-129,n=-1);var t=4+((240&e)>>4),r=0;return r=4!=t?1<<t|(15&e)<<t-4|1<<t-5:e<<1|1,8*(r=0===n?r:-r)*-1}var Oc=132,Tc=32635,Cc=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],Ac=[0,132,396,924,1980,4092,8316,16764];function Fc(e){var n,t;return 0!=(n=e>>8&128)&&(e=-e),(e+=Oc)>Tc&&(e=Tc),~(n|(t=Cc[e>>7&255])<<4|e>>t+3&15)}function Pc(e){var n,t,r,a;return n=128&(e=~e),r=15&e,a=Ac[t=e>>4&7]+(r<<t+3),0!=n&&(a=-a),a}function Mc(e,n){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,a=t;a<r;a+=n)Nc(e,n,a)}function Nc(e,n,t){n--;for(var r=0;r<n;r++){var a=e[t+r];e[t+r]=e[t+n],e[t+n]=a,n--}}function Lc(e,n){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=0,a=e.length;r<a;){var o=e.codePointAt(r);if(o<128)n[t]=o,t++;else{var i=0,s=0;for(o<=2047?(i=1,s=192):o<=65535?(i=2,s=224):o<=1114111&&(i=3,s=240,r++),n[t]=(o>>6*i)+s,t++;i>0;)n[t]=128|o>>6*(i-1)&63,t++,i--}r++}return t}var Rc=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];io(this,e),this.bits=n,this.offset=Math.ceil(n/8),this.max=Math.pow(2,n)-1,this.min=0,this.unpack=this.unpack_,t&&(this.max=Math.pow(2,n)/2-1,this.min=-this.max-1,this.unpack=this.unpackSigned_)}return oo(e,[{key:"pack",value:function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n=this.clamp_(Math.round(n));for(var r=0,a=this.offset;r<a;r++)e[t]=255&Math.floor(n/Math.pow(2,8*r)),t++;return t}},{key:"unpack_",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=0,r=0;r<this.offset;r++)t+=e[n+r]*Math.pow(256,r);return t}},{key:"unpackSigned_",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.sign_(this.unpack_(e,n))}},{key:"clamp_",value:function(e){return e>this.max?this.max:e<this.min?this.min:e}},{key:"sign_",value:function(e){return e>this.max&&(e-=2*this.max+2),e}}]),e}(),Dc=function(){function e(n,t){io(this,e),this.offset=Math.ceil((n+t)/8),this.ebits=n,this.fbits=t,this.bias=(1<<n-1)-1,this.biasP2=Math.pow(2,this.bias+1),this.ebitsFbits=n+t,this.fbias=Math.pow(2,-(8*this.offset-1-n))}return oo(e,[{key:"pack",value:function(e,n,t){Math.abs(n)>this.biasP2-2*this.ebitsFbits&&(n=n<0?-1/0:1/0);var r=((n=+n)||1/n)<0||n<0?1:0;n=Math.abs(n);var a=Math.min(Math.floor(Math.log(n)/Math.LN2),1023),o=jc(n/Math.pow(2,a)*Math.pow(2,this.fbits));return n!==n?(o=Math.pow(2,this.fbits-1),a=(1<<this.ebits)-1):0!==n&&(n>=Math.pow(2,1-this.bias)?(o/Math.pow(2,this.fbits)>=2&&(a+=1,o=1),a>this.bias?(a=(1<<this.ebits)-1,o=0):(a+=this.bias,o=jc(o)-Math.pow(2,this.fbits))):(o=jc(n/Math.pow(2,1-this.bias-this.fbits)),a=0)),this.packFloatBits_(e,t,r,a,o)}},{key:"unpack",value:function(e,n){for(var t,r=(1<<this.ebits)-1,a="",o=this.offset-1;o>=0;o--){var i=e[o+n].toString(2);a+="00000000".substring(i.length)+i}var s="1"==a.charAt(0)?-1:1;a=a.substring(1);var c=parseInt(a.substring(0,this.ebits),2);return a=a.substring(this.ebits),c==r?0!==parseInt(a,2)?NaN:s*(1/0):(0===c?(c+=1,t=parseInt(a,2)):t=parseInt("1"+a,2),s*t*this.fbias*Math.pow(2,c-this.bias))}},{key:"packFloatBits_",value:function(e,n,t,r,a){var o=[];o.push(t);for(var i=this.ebits;i>0;i-=1)o[i]=r%2?1:0,r=Math.floor(r/2);for(var s=o.length,c=this.fbits;c>0;c-=1)o[s+c]=a%2?1:0,a=Math.floor(a/2);for(var u=o.join(""),l=this.offset+n-1,f=n;l>=n;)e[l]=parseInt(u.substring(0,8),2),u=u.substring(8),l--,f++;return f}}]),e}();function jc(e){var n=Math.floor(e),t=e-n;return t<.5?n:t>.5||n%2?n+1:n}function Bc(e){return function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,r="",a=n;a<t;){var o=128,i=191,s=!1,c=e[a++];if(c>=0&&c<=127)r+=String.fromCharCode(c);else{var u=0;c>=194&&c<=223?u=1:c>=224&&c<=239?(u=2,224===e[a]&&(o=160),237===e[a]&&(i=159)):c>=240&&c<=244?(u=3,240===e[a]&&(o=144),244===e[a]&&(i=143)):s=!0,c&=(1<<8-u-1)-1;for(var l=0;l<u;l++)(e[a]<o||e[a]>i)&&(s=!0),c=c<<6|63&e[a],a++;s?r+=String.fromCharCode(65533):c<=65535?r+=String.fromCharCode(c):(c-=65536,r+=String.fromCharCode(55296+(c>>10&1023),56320+(1023&c)))}}return r}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length)}function zc(e){var n=[];return Lc(e,n),n}function Uc(e,n){return Lc(e,n,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0)}function Vc(e,n,t){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=Hc((n=n||{}).bits,n.fp,n.signed),o=Math.ceil(n.bits/8),i=0,s=r,c=e.length;i<c;i++)r=a.pack(t,e[i],r);return n.be&&Mc(t,o,s,r),r}function Wc(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.length,o=Hc((n=n||{}).bits,n.fp,n.signed);if(a=function(e,n,t,r){var a=(t-n)%r;return t-a}(0,r,a,o.offset),n.be){var i=function(e){return new Uint8Array(e)}(e);n.be&&Mc(i,o.offset,r,a),qc(i,t,r,a,o)}else qc(e,t,r,a,o)}function Gc(e,n,t){return Vc([e],n,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)}function $c(e,n){var t=[];return Gc(e,n,t,0),t}function Kc(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=[];return Wc(e,n,r,t,t+Math.ceil(n.bits/8)),r[0]}function qc(e,n,t,r,a){for(var o=a.offset,i=0,s=t;s<r;s+=o,i++)n[i]=a.unpack(e,s)}function Hc(e,n,t){return n&&32==e?new Dc(8,23):n&&64==e?new Dc(11,52):new Rc(e,t)}function Xc(){return Xc="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,n,t){var r=function(e,n){for(;!Object.prototype.hasOwnProperty.call(e,n)&&null!==(e=uo(e)););return e}(e,n);if(r){var a=Object.getOwnPropertyDescriptor(r,n);return a.get?a.get.call(arguments.length<3?e:t):a.value}},Xc.apply(this,arguments)}var Yc=function(){function e(){io(this,e),this.container="",this.chunkSize=0,this.format="",this.signature=null,this.head=0,this.uInt32={bits:32,be:!1},this.supported_containers=["RIFF","RIFX"]}return oo(e,[{key:"setSignature",value:function(e){if(this.head=0,this.container=this.readString(e,4),-1===this.supported_containers.indexOf(this.container))throw Error("Not a supported format.");this.uInt32.be="RIFX"===this.container,this.chunkSize=this.readUInt32(e),this.format=this.readString(e,4),this.signature={chunkId:this.container,chunkSize:this.chunkSize,format:this.format,subChunks:this.getSubChunksIndex_(e)}}},{key:"findChunk",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=this.signature.subChunks,r=[],a=0;a<t.length;a++)if(t[a].chunkId==e){if(!n)return t[a];r.push(t[a])}return"LIST"==e&&r.length?r:null}},{key:"readString",value:function(e,n){var t;return t=Bc(e,this.head,this.head+n),this.head+=n,t}},{key:"readUInt32",value:function(e){var n=Kc(e,this.uInt32,this.head);return this.head+=4,n}},{key:"getSubChunksIndex_",value:function(e){for(var n=[],t=this.head;t<=e.length-8;)n.push(this.getSubChunkIndex_(e,t)),t=(t+=8+n[n.length-1].chunkSize)%2?t+1:t;return n}},{key:"getSubChunkIndex_",value:function(e,n){var t={chunkId:this.getChunkId_(e,n),chunkSize:this.getChunkSize_(e,n)};if("LIST"==t.chunkId)t.format=Bc(e,n+8,n+12),this.head+=4,t.subChunks=this.getSubChunksIndex_(e);else{var r=t.chunkSize%2?t.chunkSize+1:t.chunkSize;this.head=n+8+r,t.chunkData={start:n+8,end:this.head}}return t}},{key:"getChunkId_",value:function(e,n){return this.head+=4,Bc(e,n,n+4)}},{key:"getChunkSize_",value:function(e,n){return this.head+=4,Kc(e,this.uInt32,n+4)}}]),e}(),Jc=function(e){co(t,e);var n=po(t);function t(){var e;return io(this,t),(e=n.call(this)).supported_containers.push("RF64"),e.fmt={chunkId:"",chunkSize:0,audioFormat:0,numChannels:0,sampleRate:0,byteRate:0,blockAlign:0,bitsPerSample:0,cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]},e.fact={chunkId:"",chunkSize:0,dwSampleLength:0},e.cue={chunkId:"",chunkSize:0,dwCuePoints:0,points:[]},e.smpl={chunkId:"",chunkSize:0,dwManufacturer:0,dwProduct:0,dwSamplePeriod:0,dwMIDIUnityNote:0,dwMIDIPitchFraction:0,dwSMPTEFormat:0,dwSMPTEOffset:0,dwNumSampleLoops:0,dwSamplerData:0,loops:[]},e.bext={chunkId:"",chunkSize:0,description:"",originator:"",originatorReference:"",originationDate:"",originationTime:"",timeReference:[0,0],version:0,UMID:"",loudnessValue:0,loudnessRange:0,maxTruePeakLevel:0,maxMomentaryLoudness:0,maxShortTermLoudness:0,reserved:"",codingHistory:""},e.iXML={chunkId:"",chunkSize:0,value:""},e.ds64={chunkId:"",chunkSize:0,riffSizeHigh:0,riffSizeLow:0,dataSizeHigh:0,dataSizeLow:0,originationTime:0,sampleCountHigh:0,sampleCountLow:0},e.data={chunkId:"",chunkSize:0,samples:new Uint8Array(0)},e.LIST=[],e.junk={chunkId:"",chunkSize:0,chunkData:[]},e._PMX={chunkId:"",chunkSize:0,value:""},e.uInt16={bits:16,be:!1,signed:!1,fp:!1},e}return oo(t,[{key:"fromBuffer",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.clearHeaders(),this.setSignature(e),this.uInt16.be=this.uInt32.be,"WAVE"!=this.format)throw Error('Could not find the "WAVE" format identifier');this.readDs64Chunk_(e),this.readFmtChunk_(e),this.readFactChunk_(e),this.readBextChunk_(e),this.readiXMLChunk_(e),this.readCueChunk_(e),this.readSmplChunk_(e),this.readDataChunk_(e,n),this.readJunkChunk_(e),this.readLISTChunk_(e),this.read_PMXChunk_(e)}},{key:"clearHeaders",value:function(){var e=new t;Object.assign(this.fmt,e.fmt),Object.assign(this.fact,e.fact),Object.assign(this.cue,e.cue),Object.assign(this.smpl,e.smpl),Object.assign(this.bext,e.bext),Object.assign(this.iXML,e.iXML),Object.assign(this.ds64,e.ds64),Object.assign(this.data,e.data),this.LIST=[],Object.assign(this.junk,e.junk),Object.assign(this._PMX,e._PMX)}},{key:"readFmtChunk_",value:function(e){var n=this.findChunk("fmt ");if(!n)throw Error('Could not find the "fmt " chunk');this.head=n.chunkData.start,this.fmt.chunkId=n.chunkId,this.fmt.chunkSize=n.chunkSize,this.fmt.audioFormat=this.readUInt16_(e),this.fmt.numChannels=this.readUInt16_(e),this.fmt.sampleRate=this.readUInt32(e),this.fmt.byteRate=this.readUInt32(e),this.fmt.blockAlign=this.readUInt16_(e),this.fmt.bitsPerSample=this.readUInt16_(e),this.readFmtExtension_(e)}},{key:"readFmtExtension_",value:function(e){this.fmt.chunkSize>16&&(this.fmt.cbSize=this.readUInt16_(e),this.fmt.chunkSize>18&&(this.fmt.validBitsPerSample=this.readUInt16_(e),this.fmt.chunkSize>20&&(this.fmt.dwChannelMask=this.readUInt32(e),this.fmt.subformat=[this.readUInt32(e),this.readUInt32(e),this.readUInt32(e),this.readUInt32(e)])))}},{key:"readFactChunk_",value:function(e){var n=this.findChunk("fact");n&&(this.head=n.chunkData.start,this.fact.chunkId=n.chunkId,this.fact.chunkSize=n.chunkSize,this.fact.dwSampleLength=this.readUInt32(e))}},{key:"readCueChunk_",value:function(e){var n=this.findChunk("cue ");if(n){this.head=n.chunkData.start,this.cue.chunkId=n.chunkId,this.cue.chunkSize=n.chunkSize,this.cue.dwCuePoints=this.readUInt32(e);for(var t=0;t<this.cue.dwCuePoints;t++)this.cue.points.push({dwName:this.readUInt32(e),dwPosition:this.readUInt32(e),fccChunk:this.readString(e,4),dwChunkStart:this.readUInt32(e),dwBlockStart:this.readUInt32(e),dwSampleOffset:this.readUInt32(e)})}}},{key:"readSmplChunk_",value:function(e){var n=this.findChunk("smpl");if(n){this.head=n.chunkData.start,this.smpl.chunkId=n.chunkId,this.smpl.chunkSize=n.chunkSize,this.smpl.dwManufacturer=this.readUInt32(e),this.smpl.dwProduct=this.readUInt32(e),this.smpl.dwSamplePeriod=this.readUInt32(e),this.smpl.dwMIDIUnityNote=this.readUInt32(e),this.smpl.dwMIDIPitchFraction=this.readUInt32(e),this.smpl.dwSMPTEFormat=this.readUInt32(e),this.smpl.dwSMPTEOffset=this.readUInt32(e),this.smpl.dwNumSampleLoops=this.readUInt32(e),this.smpl.dwSamplerData=this.readUInt32(e);for(var t=0;t<this.smpl.dwNumSampleLoops;t++)this.smpl.loops.push({dwName:this.readUInt32(e),dwType:this.readUInt32(e),dwStart:this.readUInt32(e),dwEnd:this.readUInt32(e),dwFraction:this.readUInt32(e),dwPlayCount:this.readUInt32(e)})}}},{key:"readDataChunk_",value:function(e,n){var t=this.findChunk("data");if(!t)throw Error('Could not find the "data" chunk');this.data.chunkId="data",this.data.chunkSize=t.chunkSize,n&&(this.data.samples=e.slice(t.chunkData.start,t.chunkData.end))}},{key:"readBextChunk_",value:function(e){var n=this.findChunk("bext");n&&(this.head=n.chunkData.start,this.bext.chunkId=n.chunkId,this.bext.chunkSize=n.chunkSize,this.bext.description=this.readString(e,256),this.bext.originator=this.readString(e,32),this.bext.originatorReference=this.readString(e,32),this.bext.originationDate=this.readString(e,10),this.bext.originationTime=this.readString(e,8),this.bext.timeReference=[this.readUInt32(e),this.readUInt32(e)],this.bext.version=this.readUInt16_(e),this.bext.UMID=this.readString(e,64),this.bext.loudnessValue=this.readUInt16_(e),this.bext.loudnessRange=this.readUInt16_(e),this.bext.maxTruePeakLevel=this.readUInt16_(e),this.bext.maxMomentaryLoudness=this.readUInt16_(e),this.bext.maxShortTermLoudness=this.readUInt16_(e),this.bext.reserved=this.readString(e,180),this.bext.codingHistory=this.readString(e,this.bext.chunkSize-602))}},{key:"readiXMLChunk_",value:function(e){var n=this.findChunk("iXML");n&&(this.head=n.chunkData.start,this.iXML.chunkId=n.chunkId,this.iXML.chunkSize=n.chunkSize,this.iXML.value=Bc(e,this.head,this.head+this.iXML.chunkSize))}},{key:"readDs64Chunk_",value:function(e){var n=this.findChunk("ds64");if(n)this.head=n.chunkData.start,this.ds64.chunkId=n.chunkId,this.ds64.chunkSize=n.chunkSize,this.ds64.riffSizeHigh=this.readUInt32(e),this.ds64.riffSizeLow=this.readUInt32(e),this.ds64.dataSizeHigh=this.readUInt32(e),this.ds64.dataSizeLow=this.readUInt32(e),this.ds64.originationTime=this.readUInt32(e),this.ds64.sampleCountHigh=this.readUInt32(e),this.ds64.sampleCountLow=this.readUInt32(e);else if("RF64"==this.container)throw Error('Could not find the "ds64" chunk')}},{key:"readLISTChunk_",value:function(e){var n=this.findChunk("LIST",!0);if(null!==n)for(var t=0;t<n.length;t++){var r=n[t];this.LIST.push({chunkId:r.chunkId,chunkSize:r.chunkSize,format:r.format,subChunks:[]});for(var a=0;a<r.subChunks.length;a++)this.readLISTSubChunks_(r.subChunks[a],r.format,e)}}},{key:"readLISTSubChunks_",value:function(e,n,t){"adtl"==n?["labl","note","ltxt"].indexOf(e.chunkId)>-1&&this.readLISTadtlSubChunks_(t,e):"INFO"==n&&this.readLISTINFOSubChunks_(t,e)}},{key:"readLISTadtlSubChunks_",value:function(e,n){this.head=n.chunkData.start;var t={chunkId:n.chunkId,chunkSize:n.chunkSize,dwName:this.readUInt32(e)};"ltxt"==n.chunkId?(t.dwSampleLength=this.readUInt32(e),t.dwPurposeID=this.readUInt32(e),t.dwCountry=this.readUInt16_(e),t.dwLanguage=this.readUInt16_(e),t.dwDialect=this.readUInt16_(e),t.dwCodePage=this.readUInt16_(e),t.value=""):t.value=this.readZSTR_(e,this.head),this.LIST[this.LIST.length-1].subChunks.push(t)}},{key:"readLISTINFOSubChunks_",value:function(e,n){this.head=n.chunkData.start,this.LIST[this.LIST.length-1].subChunks.push({chunkId:n.chunkId,chunkSize:n.chunkSize,value:this.readZSTR_(e,this.head)})}},{key:"readJunkChunk_",value:function(e){var n=this.findChunk("junk");n&&(this.junk={chunkId:n.chunkId,chunkSize:n.chunkSize,chunkData:[].slice.call(e.slice(n.chunkData.start,n.chunkData.end))})}},{key:"read_PMXChunk_",value:function(e){var n=this.findChunk("_PMX");n&&(this.head=n.chunkData.start,this._PMX.chunkId=n.chunkId,this._PMX.chunkSize=n.chunkSize,this._PMX.value=Bc(e,this.head,this.head+this._PMX.chunkSize))}},{key:"readZSTR_",value:function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=n;t<e.length&&(this.head++,0!==e[t]);t++);return Bc(e,n,this.head-1)}},{key:"readUInt16_",value:function(e){var n=Kc(e,this.uInt16,this.head);return this.head+=2,n}}]),t}(Yc);function Qc(e,n){for(var t=zc(e),r=t.length;r<n;r++)t.push(0);return t}var Zc=function(e){co(t,e);var n=po(t);function t(){return io(this,t),n.apply(this,arguments)}return oo(t,[{key:"toBuffer",value:function(){this.uInt16.be="RIFX"===this.container,this.uInt32.be=this.uInt16.be;for(var e=[this.getJunkBytes_(),this.getDs64Bytes_(),this.getBextBytes_(),this.getiXMLBytes_(),this.getFmtBytes_(),this.getFactBytes_(),zc(this.data.chunkId),$c(this.data.samples.length,this.uInt32),this.data.samples,this.getCueBytes_(),this.getSmplBytes_(),this.getLISTBytes_(),this.get_PMXBytes_()],n=0,t=0;t<e.length;t++)n+=e[t].length;var r=new Uint8Array(n+12),a=0;a=Uc(this.container,r,a),a=Gc(n+4,this.uInt32,r,a),a=Uc(this.format,r,a);for(var o=0;o<e.length;o++)r.set(e[o],a),a+=e[o].length;return r}},{key:"getBextBytes_",value:function(){var e=[];return this.enforceBext_(),this.bext.chunkId&&(this.bext.chunkSize=602+this.bext.codingHistory.length,e=e.concat(zc(this.bext.chunkId),$c(602+this.bext.codingHistory.length,this.uInt32),Qc(this.bext.description,256),Qc(this.bext.originator,32),Qc(this.bext.originatorReference,32),Qc(this.bext.originationDate,10),Qc(this.bext.originationTime,8),$c(this.bext.timeReference[0],this.uInt32),$c(this.bext.timeReference[1],this.uInt32),$c(this.bext.version,this.uInt16),Qc(this.bext.UMID,64),$c(this.bext.loudnessValue,this.uInt16),$c(this.bext.loudnessRange,this.uInt16),$c(this.bext.maxTruePeakLevel,this.uInt16),$c(this.bext.maxMomentaryLoudness,this.uInt16),$c(this.bext.maxShortTermLoudness,this.uInt16),Qc(this.bext.reserved,180),Qc(this.bext.codingHistory,this.bext.codingHistory.length))),this.enforceByteLen_(e),e}},{key:"enforceBext_",value:function(){for(var e in this.bext)if(this.bext.hasOwnProperty(e)&&this.bext[e]&&"timeReference"!=e){this.bext.chunkId="bext";break}(this.bext.timeReference[0]||this.bext.timeReference[1])&&(this.bext.chunkId="bext")}},{key:"getiXMLBytes_",value:function(){var e=[];if(this.iXML.chunkId){var n=zc(this.iXML.value);this.iXML.chunkSize=n.length,e=e.concat(zc(this.iXML.chunkId),$c(this.iXML.chunkSize,this.uInt32),n)}return this.enforceByteLen_(e),e}},{key:"getDs64Bytes_",value:function(){var e=[];return this.ds64.chunkId&&(e=e.concat(zc(this.ds64.chunkId),$c(this.ds64.chunkSize,this.uInt32),$c(this.ds64.riffSizeHigh,this.uInt32),$c(this.ds64.riffSizeLow,this.uInt32),$c(this.ds64.dataSizeHigh,this.uInt32),$c(this.ds64.dataSizeLow,this.uInt32),$c(this.ds64.originationTime,this.uInt32),$c(this.ds64.sampleCountHigh,this.uInt32),$c(this.ds64.sampleCountLow,this.uInt32))),this.enforceByteLen_(e),e}},{key:"getCueBytes_",value:function(){var e=[];if(this.cue.chunkId){var n=this.getCuePointsBytes_();e=e.concat(zc(this.cue.chunkId),$c(n.length+4,this.uInt32),$c(this.cue.dwCuePoints,this.uInt32),n)}return this.enforceByteLen_(e),e}},{key:"getCuePointsBytes_",value:function(){for(var e=[],n=0;n<this.cue.dwCuePoints;n++)e=e.concat($c(this.cue.points[n].dwName,this.uInt32),$c(this.cue.points[n].dwPosition,this.uInt32),zc(this.cue.points[n].fccChunk),$c(this.cue.points[n].dwChunkStart,this.uInt32),$c(this.cue.points[n].dwBlockStart,this.uInt32),$c(this.cue.points[n].dwSampleOffset,this.uInt32));return e}},{key:"getSmplBytes_",value:function(){var e=[];if(this.smpl.chunkId){var n=this.getSmplLoopsBytes_();e=e.concat(zc(this.smpl.chunkId),$c(n.length+36,this.uInt32),$c(this.smpl.dwManufacturer,this.uInt32),$c(this.smpl.dwProduct,this.uInt32),$c(this.smpl.dwSamplePeriod,this.uInt32),$c(this.smpl.dwMIDIUnityNote,this.uInt32),$c(this.smpl.dwMIDIPitchFraction,this.uInt32),$c(this.smpl.dwSMPTEFormat,this.uInt32),$c(this.smpl.dwSMPTEOffset,this.uInt32),$c(this.smpl.dwNumSampleLoops,this.uInt32),$c(this.smpl.dwSamplerData,this.uInt32),n)}return this.enforceByteLen_(e),e}},{key:"getSmplLoopsBytes_",value:function(){for(var e=[],n=0;n<this.smpl.dwNumSampleLoops;n++)e=e.concat($c(this.smpl.loops[n].dwName,this.uInt32),$c(this.smpl.loops[n].dwType,this.uInt32),$c(this.smpl.loops[n].dwStart,this.uInt32),$c(this.smpl.loops[n].dwEnd,this.uInt32),$c(this.smpl.loops[n].dwFraction,this.uInt32),$c(this.smpl.loops[n].dwPlayCount,this.uInt32));return e}},{key:"getFactBytes_",value:function(){var e=[];return this.fact.chunkId&&(e=e.concat(zc(this.fact.chunkId),$c(this.fact.chunkSize,this.uInt32),$c(this.fact.dwSampleLength,this.uInt32))),this.enforceByteLen_(e),e}},{key:"getFmtBytes_",value:function(){if(this.fmt.chunkId){var e=[].concat(zc(this.fmt.chunkId),$c(this.fmt.chunkSize,this.uInt32),$c(this.fmt.audioFormat,this.uInt16),$c(this.fmt.numChannels,this.uInt16),$c(this.fmt.sampleRate,this.uInt32),$c(this.fmt.byteRate,this.uInt32),$c(this.fmt.blockAlign,this.uInt16),$c(this.fmt.bitsPerSample,this.uInt16),this.getFmtExtensionBytes_());return this.enforceByteLen_(e),e}throw Error('Could not find the "fmt " chunk')}},{key:"getFmtExtensionBytes_",value:function(){var e=[];return this.fmt.chunkSize>16&&(e=e.concat($c(this.fmt.cbSize,this.uInt16))),this.fmt.chunkSize>18&&(e=e.concat($c(this.fmt.validBitsPerSample,this.uInt16))),this.fmt.chunkSize>20&&(e=e.concat($c(this.fmt.dwChannelMask,this.uInt32))),this.fmt.chunkSize>24&&(e=e.concat($c(this.fmt.subformat[0],this.uInt32),$c(this.fmt.subformat[1],this.uInt32),$c(this.fmt.subformat[2],this.uInt32),$c(this.fmt.subformat[3],this.uInt32))),e}},{key:"getLISTBytes_",value:function(){for(var e=[],n=0;n<this.LIST.length;n++){var t=this.getLISTSubChunksBytes_(this.LIST[n].subChunks,this.LIST[n].format);e=e.concat(zc(this.LIST[n].chunkId),$c(t.length+4,this.uInt32),zc(this.LIST[n].format),t)}return this.enforceByteLen_(e),e}},{key:"getLISTSubChunksBytes_",value:function(e,n){for(var t=[],r=0,a=e.length;r<a;r++)"INFO"==n?t=t.concat(this.getLISTINFOSubChunksBytes_(e[r])):"adtl"==n&&(t=t.concat(this.getLISTadtlSubChunksBytes_(e[r]))),this.enforceByteLen_(t);return t}},{key:"getLISTINFOSubChunksBytes_",value:function(e){var n=[],t=Qc(e.value,e.value.length);return(n=n.concat(zc(e.chunkId),$c(t.length+1,this.uInt32),t)).push(0),n}},{key:"getLISTadtlSubChunksBytes_",value:function(e){var n=[];if(["labl","note"].indexOf(e.chunkId)>-1){var t=Qc(e.value,e.value.length);(n=n.concat(zc(e.chunkId),$c(t.length+4+1,this.uInt32),$c(e.dwName,this.uInt32),t)).push(0)}else"ltxt"==e.chunkId&&(n=n.concat(this.getLtxtChunkBytes_(e)));return n}},{key:"getLtxtChunkBytes_",value:function(e){return[].concat(zc(e.chunkId),$c(e.value.length+20,this.uInt32),$c(e.dwName,this.uInt32),$c(e.dwSampleLength,this.uInt32),$c(e.dwPurposeID,this.uInt32),$c(e.dwCountry,this.uInt16),$c(e.dwLanguage,this.uInt16),$c(e.dwDialect,this.uInt16),$c(e.dwCodePage,this.uInt16),Qc(e.value,e.value.length))}},{key:"get_PMXBytes_",value:function(){var e=[];if(this._PMX.chunkId){var n=zc(this._PMX.value);this._PMX.chunkSize=n.length,e=e.concat(zc(this._PMX.chunkId),$c(this._PMX.chunkSize,this.uInt32),n)}return this.enforceByteLen_(e),e}},{key:"getJunkBytes_",value:function(){var e=[];return this.junk.chunkId?e.concat(zc(this.junk.chunkId),$c(this.junk.chunkData.length,this.uInt32),this.junk.chunkData):(this.enforceByteLen_(e),e)}},{key:"enforceByteLen_",value:function(e){e.length%2&&e.push(0)}}]),t}(Jc);function eu(e,n,t){return!(t<1||e*(n/8)*t>4294967295)}var nu=function(e){co(t,e);var n=po(t);function t(){var e;return io(this,t),(e=n.call(this)).bitDepth="0",e.dataType={bits:0,be:!1},e.WAV_AUDIO_FORMATS={4:17,8:1,"8a":6,"8m":7,16:1,24:1,32:1,"32f":3,64:3},e}return oo(t,[{key:"fromScratch",value:function(e,n,t,r,a){a=a||{},this.clearHeaders(),this.newWavFile_(e,n,t,r,a)}},{key:"fromBuffer",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Xc(uo(t.prototype),"fromBuffer",this).call(this,e,n),this.bitDepthFromFmt_(),this.updateDataType_()}},{key:"toBuffer",value:function(){return this.validateWavHeader_(),Xc(uo(t.prototype),"toBuffer",this).call(this)}},{key:"getSamples",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Float64Array,t=new n(this.data.samples.length/(this.dataType.bits/8));return Wc(this.data.samples,this.dataType,t,0,this.data.samples.length),!e&&this.fmt.numChannels>1?function(e,n){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=[],a=0;a<n;a++)r[a]=new t(e.length/n);for(var o=0;o<n;o++)for(var i=o,s=0;i<e.length;i+=n,s++)r[o][s]=e[i];return r}(t,this.fmt.numChannels,n):t}},{key:"getSample",value:function(e){if((e*=this.dataType.bits/8)+this.dataType.bits/8>this.data.samples.length)throw new Error("Range error");return Kc(this.data.samples.slice(e,e+this.dataType.bits/8),this.dataType)}},{key:"setSample",value:function(e,n){if((e*=this.dataType.bits/8)+this.dataType.bits/8>this.data.samples.length)throw new Error("Range error");Gc(n,this.dataType,this.data.samples,e)}},{key:"getiXML",value:function(){return this.iXML.value}},{key:"setiXML",value:function(e){if("string"!==typeof e)throw new TypeError("iXML value must be a string.");this.iXML.value=e,this.iXML.chunkId="iXML"}},{key:"get_PMX",value:function(){return this._PMX.value}},{key:"set_PMX",value:function(e){if("string"!==typeof e)throw new TypeError("_PMX value must be a string.");this._PMX.value=e,this._PMX.chunkId="_PMX"}},{key:"newWavFile_",value:function(e,n,t,r,a){a.container||(a.container="RIFF"),this.container=a.container,this.bitDepth=t,r=function(e){var n=[];if(e.length>0)if(e[0].constructor!==Number){n=new Float64Array(e[0].length*e.length);for(var t=0,r=e[0].length,a=0;t<r;t++)for(var o=0,i=e.length;o<i;o++,a++)n[a]=e[o][t]}else n=e;return n}(r),this.updateDataType_();var o=this.dataType.bits/8;this.data.samples=new Uint8Array(r.length*o),Vc(r,this.dataType,this.data.samples,0),this.makeWavHeader_(t,e,n,o,this.data.samples.length,a),this.data.chunkId="data",this.data.chunkSize=this.data.samples.length,this.validateWavHeader_()}},{key:"makeWavHeader_",value:function(e,n,t,r,a,o){"4"==e?this.createADPCMHeader_(e,n,t,r,a,o):"8a"==e||"8m"==e?this.createALawMulawHeader_(e,n,t,r,a,o):-1==Object.keys(this.WAV_AUDIO_FORMATS).indexOf(e)||n>2?this.createExtensibleHeader_(e,n,t,r,a,o):this.createPCMHeader_(e,n,t,r,a,o)}},{key:"createPCMHeader_",value:function(e,n,t,r,a,o){this.container=o.container,this.chunkSize=36+a,this.format="WAVE",this.bitDepth=e,this.fmt={chunkId:"fmt ",chunkSize:16,audioFormat:this.WAV_AUDIO_FORMATS[e]||65534,numChannels:n,sampleRate:t,byteRate:n*r*t,blockAlign:n*r,bitsPerSample:parseInt(e,10),cbSize:0,validBitsPerSample:0,dwChannelMask:0,subformat:[]}}},{key:"createADPCMHeader_",value:function(e,n,t,r,a,o){this.createPCMHeader_(e,n,t,r,a,o),this.chunkSize=40+a,this.fmt.chunkSize=20,this.fmt.byteRate=4055,this.fmt.blockAlign=256,this.fmt.bitsPerSample=4,this.fmt.cbSize=2,this.fmt.validBitsPerSample=505,this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:2*a}}},{key:"createExtensibleHeader_",value:function(e,n,t,r,a,o){this.createPCMHeader_(e,n,t,r,a,o),this.chunkSize=60+a,this.fmt.chunkSize=40,this.fmt.bitsPerSample=1+(parseInt(e,10)-1|7),this.fmt.cbSize=22,this.fmt.validBitsPerSample=parseInt(e,10),this.fmt.dwChannelMask=function(e){var n=0;1===e?n=4:2===e?n=3:4===e?n=51:6===e?n=63:8===e&&(n=1599);return n}(n),this.fmt.subformat=[1,1048576,2852126848,1905997824]}},{key:"createALawMulawHeader_",value:function(e,n,t,r,a,o){this.createPCMHeader_(e,n,t,r,a,o),this.chunkSize=40+a,this.fmt.chunkSize=20,this.fmt.cbSize=2,this.fmt.validBitsPerSample=8,this.fact={chunkId:"fact",chunkSize:4,dwSampleLength:a}}},{key:"bitDepthFromFmt_",value:function(){3===this.fmt.audioFormat&&32===this.fmt.bitsPerSample?this.bitDepth="32f":6===this.fmt.audioFormat?this.bitDepth="8a":7===this.fmt.audioFormat?this.bitDepth="8m":this.bitDepth=this.fmt.bitsPerSample.toString()}},{key:"validateBitDepth_",value:function(){if(!this.WAV_AUDIO_FORMATS[this.bitDepth]){if(parseInt(this.bitDepth,10)>8&&parseInt(this.bitDepth,10)<54)return!0;throw new Error("Invalid bit depth.")}return!0}},{key:"updateDataType_",value:function(){this.dataType={bits:1+(parseInt(this.bitDepth,10)-1|7),fp:"32f"==this.bitDepth||"64"==this.bitDepth,signed:"8"!=this.bitDepth,be:"RIFX"==this.container},["4","8a","8m"].indexOf(this.bitDepth)>-1&&(this.dataType.bits=8,this.dataType.signed=!1)}},{key:"validateWavHeader_",value:function(){if(this.validateBitDepth_(),e=this.fmt.numChannels,n=this.fmt.bitsPerSample,e<1||e*n/8>65535)throw new Error("Invalid number of channels.");var e,n;if(!eu(this.fmt.numChannels,this.fmt.bitsPerSample,this.fmt.sampleRate))throw new Error("Invalid sample rate.")}}]),t}(Zc);var tu=function(e){co(t,e);var n=po(t);function t(){return io(this,t),n.apply(this,arguments)}return oo(t,[{key:"getTag",value:function(e){var n=this.getTagIndex_(e);return null!==n.TAG?this.LIST[n.LIST].subChunks[n.TAG].value:null}},{key:"setTag",value:function(e,n){e=function(e){if(e.constructor!==String)throw new Error("Invalid tag name.");if(e.length<4)for(var n=0,t=4-e.length;n<t;n++)e+=" ";return e}(e);var t=this.getTagIndex_(e);null!==t.TAG?(this.LIST[t.LIST].subChunks[t.TAG].chunkSize=n.length+1,this.LIST[t.LIST].subChunks[t.TAG].value=n):null!==t.LIST?this.LIST[t.LIST].subChunks.push({chunkId:e,chunkSize:n.length+1,value:n}):(this.LIST.push({chunkId:"LIST",chunkSize:8+n.length+1,format:"INFO",subChunks:[]}),this.LIST[this.LIST.length-1].subChunks.push({chunkId:e,chunkSize:n.length+1,value:n}))}},{key:"deleteTag",value:function(e){var n=this.getTagIndex_(e);return null!==n.TAG&&(this.LIST[n.LIST].subChunks.splice(n.TAG,1),!0)}},{key:"listTags",value:function(){var e=this.getLISTIndex("INFO"),n={};if(null!==e)for(var t=0,r=this.LIST[e].subChunks.length;t<r;t++)n[this.LIST[e].subChunks[t].chunkId]=this.LIST[e].subChunks[t].value;return n}},{key:"getLISTIndex",value:function(e){for(var n=0,t=this.LIST.length;n<t;n++)if(this.LIST[n].format==e)return n;return null}},{key:"getTagIndex_",value:function(e){for(var n={LIST:null,TAG:null},t=0,r=this.LIST.length;t<r;t++)if("INFO"==this.LIST[t].format){n.LIST=t;for(var a=0,o=this.LIST[t].subChunks.length;a<o;a++)if(this.LIST[t].subChunks[a].chunkId==e){n.TAG=a;break}break}return n}}]),t}(nu);var ru=function(e){co(t,e);var n=po(t);function t(){return io(this,t),n.apply(this,arguments)}return oo(t,[{key:"listCuePoints",value:function(){for(var e=this.getCuePoints_(),n=0,t=e.length;n<t;n++)e[n].position=e[n].dwSampleOffset/this.fmt.sampleRate*1e3,e[n].dwSampleLength?(e[n].end=e[n].dwSampleLength/this.fmt.sampleRate*1e3,e[n].end+=e[n].position):e[n].end=null,delete e[n].value;return e}},{key:"setCuePoint",value:function(e){this.cue.chunkId="cue ",e.label||(e.label="");var n=this.getCuePoints_();this.clearLISTadtl_(),this.cue.points=[],e.dwSampleOffset=e.position*this.fmt.sampleRate/1e3,e.dwSampleLength=0,e.end&&(e.dwSampleLength=e.end*this.fmt.sampleRate/1e3-e.dwSampleOffset),0===n.length?this.setCuePoint_(e,1):this.setCuePointInOrder_(n,e),this.cue.dwCuePoints=this.cue.points.length}},{key:"deleteCuePoint",value:function(e){this.cue.chunkId="cue ";var n=this.getCuePoints_();this.clearLISTadtl_();var t=this.cue.points.length;this.cue.points=[];for(var r=0;r<t;r++)r+1!==e&&this.setCuePoint_(n[r],r+1);this.cue.dwCuePoints=this.cue.points.length,this.cue.dwCuePoints?this.cue.chunkId="cue ":(this.cue.chunkId="",this.clearLISTadtl_())}},{key:"updateLabel",value:function(e,n){var t=this.getLISTIndex("adtl");if(null!==t)for(var r=0,a=this.LIST[t].subChunks.length;r<a;r++)this.LIST[t].subChunks[r].dwName==e&&(this.LIST[t].subChunks[r].value=n)}},{key:"getCuePoints_",value:function(){for(var e=[],n=0;n<this.cue.points.length;n++){var t=this.cue.points[n],r=this.getDataForCuePoint_(t.dwName);r.label=r.value?r.value:"",r.dwPosition=t.dwPosition,r.fccChunk=t.fccChunk,r.dwChunkStart=t.dwChunkStart,r.dwBlockStart=t.dwBlockStart,r.dwSampleOffset=t.dwSampleOffset,e.push(r)}return e}},{key:"getDataForCuePoint_",value:function(e){var n=this.getLISTIndex("adtl"),t={};return null!==n&&this.getCueDataFromLIST_(t,n,e),t}},{key:"getCueDataFromLIST_",value:function(e,n,t){for(var r=0,a=this.LIST[n].subChunks.length;r<a;r++)if(this.LIST[n].subChunks[r].dwName==t){var o=this.LIST[n].subChunks[r];e.value=o.value||e.value,e.dwName=o.dwName||0,e.dwSampleLength=o.dwSampleLength||0,e.dwPurposeID=o.dwPurposeID||0,e.dwCountry=o.dwCountry||0,e.dwLanguage=o.dwLanguage||0,e.dwDialect=o.dwDialect||0,e.dwCodePage=o.dwCodePage||0}}},{key:"setCuePoint_",value:function(e,n){this.cue.points.push({dwName:n,dwPosition:e.dwPosition?e.dwPosition:0,fccChunk:e.fccChunk?e.fccChunk:"data",dwChunkStart:e.dwChunkStart?e.dwChunkStart:0,dwBlockStart:e.dwBlockStart?e.dwBlockStart:0,dwSampleOffset:e.dwSampleOffset}),this.setLabl_(e,n)}},{key:"setCuePointInOrder_",value:function(e,n){for(var t=!1,r=0;r<e.length;r++)e[r].dwSampleOffset>n.dwSampleOffset&&!t?(this.setCuePoint_(n,r+1),this.setCuePoint_(e[r],r+2),t=!0):this.setCuePoint_(e[r],t?r+2:r+1);t||this.setCuePoint_(n,this.cue.points.length+1)}},{key:"clearLISTadtl_",value:function(){for(var e=0,n=this.LIST.length;e<n;e++)"adtl"==this.LIST[e].format&&this.LIST.splice(e)}},{key:"setLabl_",value:function(e,n){var t=this.getLISTIndex("adtl");null===t&&(this.LIST.push({chunkId:"LIST",chunkSize:4,format:"adtl",subChunks:[]}),t=this.LIST.length-1),this.setLabelText_(t,e,n),e.dwSampleLength&&this.setLtxtChunk_(t,e,n)}},{key:"setLabelText_",value:function(e,n,t){this.LIST[e].subChunks.push({chunkId:"labl",chunkSize:4,dwName:t,value:n.label}),this.LIST[e].chunkSize+=12}},{key:"setLtxtChunk_",value:function(e,n,t){this.LIST[e].subChunks.push({chunkId:"ltxt",chunkSize:20,dwName:t,dwSampleLength:n.dwSampleLength,dwPurposeID:n.dwPurposeID||0,dwCountry:n.dwCountry||0,dwLanguage:n.dwLanguage||0,dwDialect:n.dwDialect||0,dwCodePage:n.dwCodePage||0,value:n.label}),this.LIST[e].chunkSize+=28}}]),t}(tu),au=function(){function e(n,t,r){io(this,e),this.length_=n,this.scaleFactor_=(n-1)/t,this.interpolate=this.sinc,"point"===r.method?this.interpolate=this.point:"linear"===r.method?this.interpolate=this.linear:"cubic"===r.method&&(this.interpolate=this.cubic),this.tangentFactor_=1-Math.max(0,Math.min(1,r.tension||0)),this.sincFilterSize_=r.sincFilterSize||1,this.kernel_=function(e){return function(n){return function(e){if(0===e)return 1;return Math.sin(Math.PI*e)/(Math.PI*e)}(n)*e(n)}}(r.sincWindow||ou)}return oo(e,[{key:"point",value:function(e,n){return this.getClippedInput_(Math.round(this.scaleFactor_*e),n)}},{key:"linear",value:function(e,n){e=this.scaleFactor_*e;var t=Math.floor(e);return(1-(e-=t))*this.getClippedInput_(t,n)+e*this.getClippedInput_(t+1,n)}},{key:"cubic",value:function(e,n){e=this.scaleFactor_*e;var t=Math.floor(e),r=[this.getTangent_(t,n),this.getTangent_(t+1,n)],a=[this.getClippedInput_(t,n),this.getClippedInput_(t+1,n)],o=(e-=t)*e,i=e*o;return(2*i-3*o+1)*a[0]+(i-2*o+e)*r[0]+(-2*i+3*o)*a[1]+(i-o)*r[1]}},{key:"sinc",value:function(e,n){e=this.scaleFactor_*e;for(var t=Math.floor(e),r=t-this.sincFilterSize_+1,a=t+this.sincFilterSize_,o=0,i=r;i<=a;i++)o+=this.kernel_(e-i)*this.getClippedInput_(i,n);return o}},{key:"getTangent_",value:function(e,n){return this.tangentFactor_*(this.getClippedInput_(e+1,n)-this.getClippedInput_(e-1,n))/2}},{key:"getClippedInput_",value:function(e,n){return 0<=e&&e<this.length_?n[e]:0}}]),e}();function ou(e){return Math.exp(-e/2*e/2)}var iu=function(){function e(n,t,r){io(this,e);var a=2*Math.PI*r/t,o=0;this.filters=[];for(var i=0;i<=n;i++)i-n/2===0?this.filters[i]=a:(this.filters[i]=Math.sin(a*(i-n/2))/(i-n/2),this.filters[i]*=.54-.46*Math.cos(2*Math.PI*i/n)),o+=this.filters[i];for(var s=0;s<=n;s++)this.filters[s]/=o;this.z=this.initZ_()}return oo(e,[{key:"filter",value:function(e){this.z.buf[this.z.pointer]=e;for(var n=0,t=0,r=this.z.buf.length;t<r;t++)n+=this.filters[t]*this.z.buf[(this.z.pointer+t)%this.z.buf.length];return this.z.pointer=(this.z.pointer+1)%this.z.buf.length,n}},{key:"reset",value:function(){this.z=this.initZ_()}},{key:"initZ_",value:function(){for(var e=[],n=0;n<this.filters.length-1;n++)e.push(0);return{buf:e,pointer:0}}}]),e}(),su=function(){function e(n,t,r){io(this,e);for(var a=[],o=0;o<n;o++)a.push(this.getCoeffs_({Fs:t,Fc:r,Q:.5/Math.sin(Math.PI/(2*n)*(o+.5))}));this.stages=[];for(var i=0;i<a.length;i++)this.stages[i]={b0:a[i].b[0],b1:a[i].b[1],b2:a[i].b[2],a1:a[i].a[0],a2:a[i].a[1],k:a[i].k,z:[0,0]}}return oo(e,[{key:"filter",value:function(e){for(var n=e,t=0,r=this.stages.length;t<r;t++)n=this.runStage_(t,n);return n}},{key:"getCoeffs_",value:function(e){var n={a:[],b:[]},t=this.preCalc_(e,n);return n.k=1,n.b.push((1-t.cw)/(2*t.a0)),n.b.push(2*n.b[0]),n.b.push(n.b[0]),n}},{key:"preCalc_",value:function(e,n){var t={},r=2*Math.PI*e.Fc/e.Fs;return t.alpha=Math.sin(r)/(2*e.Q),t.cw=Math.cos(r),t.a0=1+t.alpha,n.a0=t.a0,n.a.push(-2*t.cw/t.a0),n.k=1,n.a.push((1-t.alpha)/t.a0),t}},{key:"runStage_",value:function(e,n){var t=n*this.stages[e].k-this.stages[e].a1*this.stages[e].z[0]-this.stages[e].a2*this.stages[e].z[1],r=this.stages[e].b0*t+this.stages[e].b1*this.stages[e].z[0]+this.stages[e].b2*this.stages[e].z[1];return this.stages[e].z[1]=this.stages[e].z[0],this.stages[e].z[0]=t,r}},{key:"reset",value:function(){for(var e=0;e<this.stages.length;e++)this.stages[e].z=[0,0]}}]),e}(),cu={point:!1,linear:!1,cubic:!0,sinc:!0},uu={IIR:16,FIR:71},lu={IIR:su,FIR:iu};function fu(e,n,t){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r=r||{};var a=(t-n)/n+1,o=new Float64Array(e.length*a);r.method=r.method||"cubic";var i=new au(e.length,o.length,{method:r.method,tension:r.tension||0,sincFilterSize:r.sincFilterSize||6,sincWindow:r.sincWindow||void 0,clip:r.clip||"mirror"});if(void 0===r.LPF&&(r.LPF=cu[r.method]),r.LPF){r.LPFType=r.LPFType||"IIR";var s=lu[r.LPFType];if(t>n)!function(e,n,t,r){for(var a=0,o=n.length;a<o;a++)n[a]=r.filter(t.interpolate(a,e));r.reset();for(var i=n.length-1;i>=0;i--)n[i]=r.filter(n[i])}(e,o,i,new s(r.LPForder||uu[r.LPFType],t,n/2));else!function(e,n,t,r){for(var a=0,o=e.length;a<o;a++)e[a]=r.filter(e[a]);r.reset();for(var i=e.length-1;i>=0;i--)e[i]=r.filter(e[i]);du(e,n,t)}(e,o,i,new s(r.LPForder||uu[r.LPFType],n,t/2))}else du(e,o,i);return o}function du(e,n,t){for(var r=0,a=n.length;r<a;r++)n[r]=t.interpolate(r,e)}var pu=function(e){co(t,e);var n=po(t);function t(){return io(this,t),n.apply(this,arguments)}return oo(t,[{key:"toRIFF",value:function(){var e=new Float64Array(mu(this.data.samples.length,this.dataType.bits/8));Wc(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,e,{container:"RIFF"})}},{key:"toRIFX",value:function(){var e=new Float64Array(mu(this.data.samples.length,this.dataType.bits/8));Wc(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,this.bitDepth,e,{container:"RIFX"})}},{key:"toIMAADPCM",value:function(){if(8e3!==this.fmt.sampleRate)throw new Error("Only 8000 Hz files can be compressed as IMA-ADPCM.");if(1!==this.fmt.numChannels)throw new Error("Only mono files can be compressed as IMA-ADPCM.");this.assure16Bit_();var e=new Int16Array(mu(this.data.samples.length,2));Wc(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"4",function(e){for(var n={index:0,predicted:0,step:7},t=new Uint8Array(e.length),r=[],a=0,o=0,i=0,s=e.length;i<s;i++)i%505==0&&0!=i&&(t.set(Sc(r,n),a),a+=256,r=[],o++),r.push(e[i]);var c=e.length/2;return c%2&&c++,t.slice(0,c+512+4*o)}(e),{container:this.correctContainer_()})}},{key:"fromIMAADPCM",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"16";this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",function(e){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256,t={index:0,predicted:0,step:7},r=new Int16Array(2*e.length),a=[],o=0,i=0,s=e.length;i<s;i++){if(i%n==0&&0!=i){var c=wc(a,t);r.set(c,o),o+=c.length,a=[]}a.push(e[i])}return r}(this.data.samples,this.fmt.blockAlign),{container:this.correctContainer_()}),"16"!=e&&this.toBitDepth(e)}},{key:"toALaw",value:function(){this.assure16Bit_();var e=new Int16Array(mu(this.data.samples.length,2));Wc(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"8a",function(e){for(var n=new Uint8Array(e.length),t=0,r=e.length;t<r;t++)n[t]=Ic(e[t]);return n}(e),{container:this.correctContainer_()})}},{key:"fromALaw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"16";this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",function(e){for(var n=new Int16Array(e.length),t=0,r=e.length;t<r;t++)n[t]=Ec(e[t]);return n}(this.data.samples),{container:this.correctContainer_()}),"16"!=e&&this.toBitDepth(e)}},{key:"toMuLaw",value:function(){this.assure16Bit_();var e=new Int16Array(mu(this.data.samples.length,2));Wc(this.data.samples,this.dataType,e,0,this.data.samples.length),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"8m",function(e){for(var n=new Uint8Array(e.length),t=0,r=e.length;t<r;t++)n[t]=Fc(e[t]);return n}(e),{container:this.correctContainer_()})}},{key:"fromMuLaw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"16";this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,"16",function(e){for(var n=new Int16Array(e.length),t=0,r=e.length;t<r;t++)n[t]=Pc(e[t]);return n}(this.data.samples),{container:this.correctContainer_()}),"16"!=e&&this.toBitDepth(e)}},{key:"toBitDepth",value:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=e,r=this.bitDepth;n||("32f"!=e&&(t=this.dataType.bits.toString()),r=""+this.dataType.bits),this.assureUncompressed_();var a=this.getSamples(!0),o=new Float64Array(a.length);dc(a,r,o,t),this.fromExisting_(this.fmt.numChannels,this.fmt.sampleRate,e,o,{container:this.correctContainer_()})}},{key:"toSampleRate",value:function(e,n){this.validateResample_(e);var t=this.getSamples(),r=[];if(t.constructor===Float64Array)r=fu(t,this.fmt.sampleRate,e,n);else for(var a=0;a<t.length;a++)r.push(fu(t[a],this.fmt.sampleRate,e,n));this.fromExisting_(this.fmt.numChannels,e,this.bitDepth,r,{container:this.correctContainer_()})}},{key:"validateResample_",value:function(e){if(!eu(this.fmt.numChannels,this.fmt.bitsPerSample,e))throw new Error("Invalid sample rate.");if(["4","8a","8m"].indexOf(this.bitDepth)>-1)throw new Error("wavefile can't change the sample rate of compressed files.")}},{key:"assure16Bit_",value:function(){this.assureUncompressed_(),"16"!=this.bitDepth&&this.toBitDepth("16")}},{key:"assureUncompressed_",value:function(){"8a"==this.bitDepth?this.fromALaw():"8m"==this.bitDepth?this.fromMuLaw():"4"==this.bitDepth&&this.fromIMAADPCM()}},{key:"correctContainer_",value:function(){return"RF64"==this.container?"RIFF":this.container}},{key:"fromExisting_",value:function(e,n,t,r,a){var o=new ru;Object.assign(this.fmt,o.fmt),Object.assign(this.fact,o.fact),Object.assign(this.ds64,o.ds64),Object.assign(this.data,o.data),this.newWavFile_(e,n,t,r,a)}}]),t}(ru);function mu(e,n){var t=e/n;return t%2&&t++,t}var hu,gu,yu,vu=function(e){co(t,e);var n=po(t);function t(e){var r;return io(this,t),r=n.call(this),e&&r.fromBuffer(e),r}return oo(t,[{key:"fromBase64",value:function(e){this.fromBuffer(function(e){for(var n=new Uint8Array(256),t=0;t<fc.length;t++)n[fc.charCodeAt(t)]=t;var r=.75*e.length;"="===e[e.length-1]&&(r--,"="===e[e.length-2]&&r--);for(var a=new Uint8Array(r),o=0,i=0;o<e.length;o+=4){var s=n[e.charCodeAt(o)],c=n[e.charCodeAt(o+1)],u=n[e.charCodeAt(o+2)],l=n[e.charCodeAt(o+3)];a[i++]=s<<2|c>>4,a[i++]=(15&c)<<4|u>>2,a[i++]=(3&u)<<6|63&l}return a}(e))}},{key:"toBase64",value:function(){return function(e){for(var n="",t=0;t<e.length;t+=3)n+=fc[e[t]>>2],n+=fc[(3&e[t])<<4|e[t+1]>>4],n+=fc[(15&e[t+1])<<2|e[t+2]>>6],n+=fc[63&e[t+2]];return e.length%3===2?n=n.substring(0,n.length-1)+"=":e.length%3===1&&(n=n.substring(0,n.length-2)+"=="),n}(this.toBuffer())}},{key:"toDataURI",value:function(){return"data:audio/wav;base64,"+this.toBase64()}},{key:"fromDataURI",value:function(e){this.fromBase64(e.replace("data:audio/wav;base64,",""))}}]),t}(pu),bu=function(){var e=eo(Ft().mark((function e(n,t,r){var a,o,i;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="assemblyscript",t.wasm||t.compiledJs){e.next=3;break}throw new Error("Need compiled wasm or compiled js to render wav");case 3:return t.wasm||(a="javascript"),e.next=6,wu(t,a);case 6:return o=e.sent,e.next=9,_u(o,n,r);case 9:return i=e.sent,e.abrupt("return",Su(i,r.sampleRate));case 11:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),Su=function(e,n){var t=e.length,r=new vu;return r.fromScratch(t,n,"32f",e.map((function(e){return e.map((function(e){return e}))}))),r.toBuffer()},wu=function(){var e=eo(Ft().mark((function e(n,t){return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="javascript"===e.t0?3:"assemblyscript"===e.t0?4:5;break;case 3:return e.abrupt("return",new Function("\n                ".concat(ri(n,"compiledJs"),"\n                return exports\n            "))());case 4:return e.abrupt("return",cc(ri(n,"wasm")));case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),_u=function(e,n,t){var r=t.sampleRate,a=t.blockSize,o=t.channelCount,i=Math.round(n*r),s=ku("in",t),c=ku("out",t),u=ku("out",t,i);e.configure(r,a);for(var l=0;l<i;){e.loop(s,c);for(var f=0;f<o.out;f++)u[f].set(c[f].slice(0,Math.min(a,i-l)),l);l+=a}return u},ku=function(e,n,t){var r=n.channelCount,a=n.blockSize,o=n.bitDepth;void 0===t&&(t=a);for(var i=Fi(o),s=[],c=0;c<r[e];c++)s.push(new i(Math.round(t)));return s},xu={pd:{extensions:[".pd"],description:"Pure Data text"},pdJson:{extensions:[".pd.json"],description:"Pure Data JSON"},dspGraph:{extensions:[".dsp-graph.json"],description:"WebPd DSP graph"},compiledJs:{extensions:[".js"],description:"JavaScript WebPd module"},compiledAsc:{extensions:[".asc"],description:"AssemblyScript DSP code"},wasm:{extensions:[".wasm"],description:"Web Assembly WebPd module"},wav:{extensions:[".wav"],description:"An audio preview of your patch"},appTemplate:{extensions:[],description:"Complete web app embedding your compiled WebPd patch"}},Iu=["pd","pdJson","dspGraph",[["compiledJs","wav"],["compiledAsc","wasm","wav"],["compiledAsc","wasm","appTemplate"],["compiledJs","appTemplate"]]],Eu=function(){return{}},Ou=function(e,n,t){switch(t){case"pd":return Rr(Rr({},e),{},{pd:ai(n)});case"pdJson":return Rr(Rr({},e),{},{pdJson:JSON.parse(ai(n))});case"dspGraph":return Rr(Rr({},e),{},{dspGraph:JSON.parse(ai(n))});case"compiledJs":return Rr(Rr({},e),{},{compiledJs:ai(n)});case"compiledAsc":return Rr(Rr({},e),{},{compiledAsc:ai(n)});case"wasm":return Rr(Rr({},e),{},{wasm:n});case"wav":return Rr(Rr({},e),{},{wav:new Uint8Array(n)});default:throw new Error("Unexpected format for preloading ".concat(t))}},Tu=function(){var e=eo(Ft().mark((function e(n,t,r){var a,o,i,s,c,u,l,f,d,p,m,h,g;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=r.nodeBuilders,o=r.nodeImplementations,i=r.audioSettings,s=r.inletCallerSpecs,c=r.abstractionLoader,u=[],l=[],e.t0=t,e.next="pdJson"===e.t0?6:"dspGraph"===e.t0?13:"compiledJs"===e.t0||"compiledAsc"===e.t0?27:"wasm"===e.t0?30:"wav"===e.t0?40:"appTemplate"===e.t0?44:46;break;case 6:if(0!==(f=Xo(n.pd)).status){e.next=12;break}return n.pdJson=f.pd,e.abrupt("return",{status:0,warnings:Mu(f.warnings)});case 12:return e.abrupt("return",{status:1,warnings:Mu(f.warnings),errors:Mu(f.errors)});case 13:return e.next=15,Os(n.pdJson,a,c);case 15:if((d=e.sent).abstractionsLoadingWarnings&&(u=Object.entries(d.abstractionsLoadingWarnings).filter((function(e){var n=bt(e,2);n[0];return!!n[1].length})).flatMap((function(e){var n=bt(e,2),t=n[0],r=n[1];return["Warnings when parsing abstraction ".concat(t," :")].concat(Mn(Mu(r)))}))),0!==d.status){e.next=23;break}return n.dspGraph={graph:d.graph,arrays:d.arrays,pd:d.pd},s||(p=Gs(n.dspGraph.pd),m=p.controls,n.dspGraph.inletCallerSpecs=qs(m,n.dspGraph.graph)),e.abrupt("return",{status:0,warnings:u});case 23:return h=Object.values(d.abstractionsLoadingErrors).filter((function(e){return!!e.unknownNodeType})).map((function(e){return e.unknownNodeType})),h.length&&(l=[].concat(Mn(l),Mn(Pu(new Set(h))))),l=[].concat(Mn(l),Mn(Object.entries(d.abstractionsLoadingErrors).filter((function(e){var n=bt(e,2);n[0];return!!n[1].parsingErrors})).flatMap((function(e){var n=bt(e,2),t=n[0],r=n[1];return["Failed to parse abstraction ".concat(t," :")].concat(Mn(Mu(r.parsingErrors)))})))),e.abrupt("return",{status:1,errors:l,warnings:u});case 27:return g=Gi(n.dspGraph.graph,o,{target:"compiledJs"===t?"javascript":"assemblyscript",audioSettings:i,inletCallerSpecs:s||n.dspGraph.inletCallerSpecs,arrays:n.dspGraph.arrays}),"compiledJs"===t?n.compiledJs=g.code:n.compiledAsc=g.code,e.abrupt("return",{status:0,warnings:[]});case 30:return e.prev=30,e.next=33,ro(ri(n,"compiledAsc"),i.bitDepth);case 33:n.wasm=e.sent,e.next=39;break;case 36:return e.prev=36,e.t1=e.catch(30),e.abrupt("return",{status:1,errors:[e.t1.message],warnings:[]});case 39:return e.abrupt("return",{status:0,warnings:[]});case 40:return e.next=42,bu(i.previewDurationSeconds,n,i);case 42:return n.wav=e.sent,e.abrupt("return",{status:0,warnings:[]});case 44:return n.appTemplate=Yi("bare-bones",n),e.abrupt("return",{status:0,warnings:[]});case 46:throw new Error("invalid build step ".concat(t));case 47:case"end":return e.stop()}}),e,null,[[30,36]])})));return function(n,t,r){return e.apply(this,arguments)}}(),Cu=function(e){var n=Object.entries(xu).filter((function(n){var t=bt(n,2);t[0];return!!t[1].extensions.some((function(n){return e.endsWith(n)}))}));return 0===n.length?null:n[0][0]},Au=function(e,n,t){var r=Nu(Iu,n,[]).filter((function(n){return n.includes(e)})).map((function(n){return n.slice(n.indexOf(e)+1)}));return t&&(r=r.filter((function(e){return e.includes(t)}))),0===r.length?null:r[0]},Fu=function(e){return new Set(Lu(Iu,[]).filter((function(n){return n.includes(e)})).map((function(n){return n.slice(n.indexOf(e)+1)})).flat())},Pu=function(e){return["Unknown object types ".concat(Array.from(e).map((function(e){return"".concat(e)})).join(", "))]},Mu=function(e){return e.map((function(e){var n=e.message,t=e.lineIndex;return"line ".concat(t+1," : ").concat(n)}))},Nu=function e(n,t,r){var a=Mn(r);return n.flatMap((function(n){return Array.isArray(n)?e(n,t,a):(a=[].concat(Mn(a),[n]),n===t?[a]:[])}))},Lu=function e(n,t){var r=Mn(t);return n.flatMap((function(t,a){return Array.isArray(t)?e(t,r):(r=[].concat(Mn(r),[t]),a===n.length-1?[r]:[])}))},Ru=function(e){if("number"!==typeof e)throw new zu("".concat(e," is not a number"));return e},Du=function(e){if("string"!==typeof e)throw new zu("".concat(e," is not a string"));return e},ju=function(e){return void 0!==e?Ru(e):void 0},Bu=function(e){return void 0!==e?Du(e):void 0},zu=function(e){co(t,e);var n=po(t);function t(){return io(this,t),n.apply(this,arguments)}return oo(t)}(ho(Error)),Uu={translateArgs:function(e,n){var t;if(e.args.length)t=e.args.map((function(e){return Ru(e)-1}));else{var r=new Set;n.connections.forEach((function(n){n.sink.nodeId===e.id&&r.add(n.sink.portletId)}));var a=Math.max.apply(Math,Mn(r));t=[];for(var o=0;o<=a;o++)t.push(o)}return{channelMapping:t}},build:function(e){return{inlets:fi(e.channelMapping,(function(e,n){return["".concat(n),{type:"signal",id:"".concat(n)}]})),outlets:{},isPullingSignal:!0}}},Vu={loop:function(e){var n=e.ins,t=e.globs,r=e.node,a=e.compilation,o=a.audioSettings,i=a.target;return r.args.channelMapping.map((function(e,n){return[e,n]})).filter((function(e){var n=bt(e,1)[0];return 0<=n&&n<o.channelCount.out})).map((function(e){var r=bt(e,2),a=r[0],o=r[1];return"javascript"===i?"".concat(t.output,"[").concat(a,"][").concat(t.iterFrame,"] = ").concat(n["".concat(o)]):"".concat(t.output,"[").concat(t.iterFrame," + ").concat(t.blockSize," * ").concat(a,"] = ").concat(n["".concat(o)])})).join("\n")+"\n"},stateVariables:{}},Wu={translateArgs:function(e,n){var t;if(e.args.length)t=e.args.map((function(e){return Ru(e)-1}));else{var r=new Set;n.connections.forEach((function(n){n.source.nodeId===e.id&&r.add(n.source.portletId)}));var a=Math.max.apply(Math,Mn(r));t=[];for(var o=0;o<=a;o++)t.push(o)}return{channelMapping:t}},build:function(e){return{inlets:{},outlets:fi(e.channelMapping,(function(e,n){return["".concat(n),{type:"signal",id:"".concat(n)}]}))}}},Gu={loop:function(e){var n=e.outs,t=e.globs,r=e.node,a=e.compilation,o=a.audioSettings,i=a.target;return r.args.channelMapping.map((function(e,n){return[e,n]})).filter((function(e){var n=bt(e,1)[0];return 0<=n&&n<o.channelCount.in})).map((function(e){var r=bt(e,2),a=r[0],o=r[1];return"javascript"===i?"".concat(n["".concat(o)]," = ").concat(t.input,"[").concat(a,"][").concat(t.iterFrame,"]"):"".concat(n["".concat(o)]," = ").concat(t.input,"[").concat(t.iterFrame," + ").concat(t.blockSize," * ").concat(a,"]")})).join("\n")+"\n"},stateVariables:{}},$u=function(e){var n=e.macros,t=n.Func,r=n.Var;return"\n    function msg_isBang ".concat(t([r("message","Message")],"boolean")," {\n        return (\n            msg_isStringToken(message, 0) \n            && msg_readStringToken(message, 0) === 'bang'\n        )\n    }\n\n    function msg_bang ").concat(t([],"Message")," {\n        const ").concat(r("message","Message")," = msg_create([MSG_STRING_TOKEN, 4])\n        msg_writeStringToken(message, 0, 'bang')\n        return message\n    }\n\n    function msg_emptyToBang ").concat(t([r("message","Message")],"Message")," {\n        if (msg_getLength(message) === 0) {\n            return msg_bang()\n        } else {\n            return message\n        }\n    }\n")},Ku=function(e){var n=e.macros,t=n.Func,r=n.Var;return"\n\n    function msg_copyTemplate ".concat(t([r("src","Message"),r("start","Int"),r("end","Int")],"MessageTemplate")," {\n        const ").concat(r("template","MessageTemplate")," = []\n        for (let ").concat(r("i","Int")," = start; i < end; i++) {\n            const ").concat(r("tokenType","Int")," = msg_getTokenType(src, i)\n            template.push(tokenType)\n            if (tokenType === MSG_STRING_TOKEN) {\n                template.push(msg_readStringToken(src, i).length)\n            }\n        }\n        return template\n    }\n\n    function msg_copyMessage ").concat(t([r("src","Message"),r("dest","Message"),r("srcStart","Int"),r("srcEnd","Int"),r("destStart","Int")],"void")," {\n        let ").concat(r("i","Int")," = srcStart\n        let ").concat(r("j","Int")," = destStart\n        for (i, j; i < srcEnd; i++, j++) {\n            if (msg_getTokenType(src, i) === MSG_STRING_TOKEN) {\n                msg_writeStringToken(dest, j, msg_readStringToken(src, i))\n            } else {\n                msg_writeFloatToken(dest, j, msg_readFloatToken(src, i))\n            }\n        }\n    }\n\n    function msg_slice ").concat(t([r("message","Message"),r("start","Int"),r("end","Int")],"Message")," {\n        if (msg_getLength(message) <= start) {\n            throw new Error('message empty')\n        }\n        const ").concat(r("template","MessageTemplate")," = msg_copyTemplate(message, start, end)\n        const ").concat(r("newMessage","Message")," = msg_create(template)\n        msg_copyMessage(message, newMessage, start, end, 0)\n        return newMessage\n    }\n\n    function msg_concat  ").concat(t([r("message1","Message"),r("message2","Message")],"Message")," {\n        const ").concat(r("newMessage","Message")," = msg_create(\n            msg_copyTemplate(message1, 0, msg_getLength(message1))\n                .concat(msg_copyTemplate(message2, 0, msg_getLength(message2))))\n        msg_copyMessage(message1, newMessage, 0, msg_getLength(message1), 0)\n        msg_copyMessage(message2, newMessage, 0, msg_getLength(message2), msg_getLength(message1))\n        return newMessage\n    }\n\n    function msg_shift ").concat(t([r("message","Message")],"Message")," {\n        switch (msg_getLength(message)) {\n            case 0:\n                throw new Error('message empty')\n            case 1:\n                return msg_create([])\n            default:\n                return msg_slice(message, 1, msg_getLength(message))\n        }\n    }\n")},qu=function(e){var n=e.macros,t=n.Func,r=n.Var;return"\n    function msg_isAction ".concat(t([r("message","Message"),r("action","string")],"boolean")," {\n        return msg_isMatching(message, [MSG_STRING_TOKEN])\n            && msg_readStringToken(message, 0) === action\n    }\n")},Hu={stateVariables:{},messages:function(e){var n=e.globs,t=e.snds;return{0:"\n    if (msg_isBang(".concat(n.m,")) { \n        ").concat(t.$0,"(msg_floats([").concat(n.sampleRate,"])) \n        return\n    }")}},sharedCode:[$u]},Xu=function(e,n){return"if (msg_isMatching(".concat(e,", [MSG_FLOAT_TOKEN])) {\n        ").concat(n," = msg_readFloatToken(").concat(e,", 0)\n        return\n    }")},Yu=function(e,n){return"if (msg_isMatching(".concat(e,", [MSG_FLOAT_TOKEN])) {\n        ").concat(n,"(msg_readFloatToken(").concat(e,", 0))\n        return\n    }")},Ju={phase:1,frequency:1,J:1,K:1,funcSetFrequency:1,funcSetPhase:1},Qu={translateArgs:function(e){return{frequency:ju(e.args[0])||0}},build:function(){return{inlets:{"0_message":{type:"message",id:"0_message"},0:{type:"signal",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}},rerouteMessageConnection:function(e){if("0"===e)return"0_message"}},Zu=function(e){var n=e.coeff,t=e.generateOperation,r=function(e){var t=e.state,r=e.globs,a=e.macros.Var;return"\n        let ".concat(a(t.phase,"Float")," = 0\n        let ").concat(a(t.J,"Float"),"\n\n        commons_waitEngineConfigure(() => {\n            ").concat(t.J," = ").concat(n?"".concat(n):"1"," / ").concat(r.sampleRate,"\n        })\n    ")},a=function(e){var t=e.state,r=e.globs,a=e.node.args,o=e.macros,i=o.Func,s=o.Var;return"\n        let ".concat(s(t.phase,"Float")," = 0\n        let ").concat(s(t.frequency,"Float")," = ").concat(a.frequency,"\n        let ").concat(s(t.K,"Float")," = 0\n\n        function ").concat(t.funcSetFrequency," ").concat(i([s("frequency","Float")],"void")," {\n            ").concat(t.frequency," = frequency\n            ").concat(t.K," = ").concat(n?"".concat(n," * "):"").concat(t.frequency," / ").concat(r.sampleRate,"\n        }\n\n        commons_waitEngineConfigure(() => {\n            ").concat(t.funcSetFrequency,"(").concat(t.frequency,")\n        })\n    ")},o=function(e){var n=e.ins,r=e.state,a=e.outs;return"\n        ".concat(a.$0," = ").concat(t(r.phase),"\n        ").concat(r.phase," += (").concat(r.J," * ").concat(n.$0,")\n    ")},i=function(e){var n=e.state,r=e.outs;return"\n        ".concat(r.$0," = ").concat(t(n.phase),"\n        ").concat(n.phase," += ").concat(n.K,"\n    ")};return{declare:function(e){var t=e.state,o=e.macros,i=o.Var,s=o.Func;return(el(e.node)?r(e):a(e))+"\n                function ".concat(t.funcSetPhase," ").concat(s([i("phase","Float")],"void")," {").concat(t.phase," = phase % 1.0").concat(n?" * ".concat(n):"","}\n            ")},messages:function(e){var n=e.globs,t=e.state;return{"0_message":Yu(n.m,t.funcSetFrequency),1:Yu(n.m,t.funcSetPhase)}},loop:function(e){return el(e.node)?o(e):i(e)},stateVariables:Ju}},el=function(e){return e.sources[0]&&e.sources[0].length},nl={"osc~":Zu({coeff:"2 * Math.PI",generateOperation:function(e){return"Math.cos(".concat(e,")")}}),"phasor~":Zu({generateOperation:function(e){return"".concat(e," % 1")}})},tl={"osc~":Qu,"phasor~":Qu},rl={translateArgs:function(e){var n=e.args;return{minValue:ju(n[0])||0,maxValue:ju(n[1])||0}},build:function(){return{inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"signal",id:"0"}}}},rerouteMessageConnection:function(e){if("0"===e)return"0_message"}},al=function(e){return e.sources[0]&&e.sources[0].length},ol={loop:function(e){var n=e.ins,t=e.outs,r=e.state,a=e.node;return"\n    ".concat(t.$0," = Math.max(Math.min(").concat(r.maxValue,", ").concat(al(a)?n.$0:r.inputValue,"), ").concat(r.minValue,")\n")},stateVariables:{minValue:1,maxValue:1,inputValue:1},messages:function(e){var n=e.state,t=e.globs;return{"0_message":Xu(t.m,n.inputValue),1:Xu(t.m,n.minValue),2:Xu(t.m,n.maxValue)}},declare:function(e){var n=e.node.args,t=e.state,r=e.macros.Var;return"\n    let ".concat(r(t.inputValue,"Float")," = 0\n    let ").concat(r(t.minValue,"Float")," = ").concat(n.minValue,"\n    let ").concat(r(t.maxValue,"Float")," = ").concat(n.maxValue,"\n")}},il={translateArgs:function(e){var n=e.args;return{initValue:ju(n[0])||0}},build:function(){return{inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"signal",id:"0"}}}}},sl={loop:function(e){e.ins;var n=e.outs,t=e.state;return"\n    ".concat(n.$0," = ").concat(t.currentValue,"\n")},stateVariables:{currentValue:1},messages:function(e){var n=e.state,t=e.globs;return{0:Xu(t.m,n.currentValue)}},declare:function(e){var n=e.node.args,t=e.state,r=e.macros.Var;return"\n    let ".concat(r(t.currentValue,"Float")," = ").concat(n.initValue,"\n")}},cl={translateArgs:function(){return{}},build:function(){return{inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"},1:{type:"signal",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}},rerouteMessageConnection:function(e){if("0"===e)return"0_message"}},ul={loop:function(e){var n=e.ins,t=e.outs,r=e.state;return"\n    ".concat(r.signalMemory," = ").concat(t.$0," = ").concat(n.$1," < ").concat(r.controlMemory," ? ").concat(n.$0,": ").concat(r.signalMemory,"\n    ").concat(r.controlMemory," = ").concat(n.$1,"\n")},stateVariables:{signalMemory:1,controlMemory:1},messages:function(e){var n=e.state,t=e.globs;return{"0_message":"\n        if (\n            msg_isMatching(".concat(t.m,", [MSG_STRING_TOKEN, MSG_FLOAT_TOKEN])\n            && msg_readStringToken(").concat(t.m,", 0) === 'set'\n        ) {\n            ").concat(n.signalMemory," = msg_readFloatToken(").concat(t.m,", 1)\n            return\n\n        } else if (\n            msg_isMatching(").concat(t.m,", [MSG_STRING_TOKEN, MSG_FLOAT_TOKEN])\n            && msg_readStringToken(").concat(t.m,", 0) === 'reset'\n        ) {\n            ").concat(n.controlMemory," = msg_readFloatToken(").concat(t.m,", 1)\n            return\n\n        } else if (\n            msg_isMatching(").concat(t.m,", [MSG_STRING_TOKEN])\n            && msg_readStringToken(").concat(t.m,", 0) === 'reset'\n        ) {\n            ").concat(n.controlMemory," = 1e20\n            return\n        }\n    ")}},declare:function(e){var n=e.state,t=e.macros.Var;return"\n    let ".concat(t(n.signalMemory,"Float")," = 0\n    let ").concat(t(n.controlMemory,"Float")," = 0\n")}},ll={translateArgs:function(){return{}},build:function(){return{inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"}},outlets:{0:{type:"message",id:"0"}},isPullingSignal:!0}},rerouteMessageConnection:function(e){if("0"===e)return"0_message"}},fl={loop:function(e){var n=e.ins,t=e.state;return"\n    ".concat(t.currentValue," = ").concat(n.$0,"\n")},stateVariables:{currentValue:1},messages:function(e){var n=e.state,t=e.globs,r=e.snds;return{"0_message":"\n        if (msg_isBang(".concat(t.m,")) {\n            ").concat(r.$0,"(msg_floats([").concat(n.currentValue,"]))\n            return \n        }\n    ")}},declare:function(e){var n=e.state,t=e.macros.Var;return"\n    let ".concat(t(n.currentValue,"Float")," = 0\n")},sharedCode:[$u]},dl=[function(e){var n=e.macros.Var;return"\n    class Point {\n        ".concat(n("x","Float"),"\n        ").concat(n("y","Float"),"\n    }\n")},function(e){var n=e.macros,t=n.Var,r=n.Func;return"\n    function interpolateLin ".concat(r([t("x","Float"),t("p0","Point"),t("p1","Point")],"Float")," {\n        return p0.y + (x - p0.x) * (p1.y - p0.y) / (p1.x - p0.x)\n    }\n")}],pl=[].concat(Mn(dl),[function(e){var n=e.macros,t=n.Var,r=n.Func;return"\n\n    class LineSegment {\n        ".concat(t("p0","Point"),"\n        ").concat(t("p1","Point"),"\n        ").concat(t("dx","Float"),"\n        ").concat(t("dy","Float"),"\n    }\n\n    function computeSlope ").concat(r([t("p0","Point"),t("p1","Point")],"Float")," {\n        return p1.x !== p0.x ? (p1.y - p0.y) / (p1.x - p0.x) : 0\n    }\n\n    function removePointsBeforeFrame ").concat(r([t("points","Array<Point>"),t("frame","Float")],"Array<Point>")," {\n        const ").concat(t("newPoints","Array<Point>")," = []\n        let ").concat(t("i","Int")," = 0\n        while (i < points.length) {\n            if (frame <= points[i].x) {\n                newPoints.push(points[i])\n            }\n            i++\n        }\n        return newPoints\n    }\n\n    function insertNewLinePoints ").concat(r([t("points","Array<Point>"),t("p0","Point"),t("p1","Point")],"Array<Point>")," {\n        const ").concat(t("newPoints","Array<Point>")," = []\n        let ").concat(t("i","Int")," = 0\n        \n        // Keep the points that are before the new points added\n        while (i < points.length && points[i].x <= p0.x) {\n            newPoints.push(points[i])\n            i++\n        }\n        \n        // Find the start value of the start point :\n        \n        // 1. If there is a previous point and that previous point\n        // is on the same frame, we don't modify the start point value.\n        // (represents a vertical line).\n        if (0 < i - 1 && points[i - 1].x === p0.x) {\n\n        // 2. If new points are inserted in between already existing points \n        // we need to interpolate the existing line to find the startValue.\n        } else if (0 < i && i < points.length) {\n            newPoints.push({\n                x: p0.x,\n                y: interpolateLin(p0.x, points[i - 1], points[i])\n            })\n\n        // 3. If new line is inserted after all existing points, \n        // we just take the value of the last point\n        } else if (i >= points.length && points.length) {\n            newPoints.push({\n                x: p0.x,\n                y: points[points.length - 1].y,\n            })\n\n        // 4. If new line placed in first position, we take the defaultStartValue.\n        } else if (i === 0) {\n            newPoints.push({\n                x: p0.x,\n                y: p0.y,\n            })\n        }\n        \n        newPoints.push({\n            x: p1.x,\n            y: p1.y,\n        })\n        return newPoints\n    }\n\n    function computeFrameAjustedPoints ").concat(r([t("points","Array<Point>")],"Array<Point>")," {\n        if (points.length < 2) {\n            throw new Error('invalid length for points')\n        }\n\n        const ").concat(t("newPoints","Array<Point>")," = []\n        let ").concat(t("i","Int")," = 0\n        let ").concat(t("p","Point")," = points[0]\n        let ").concat(t("frameLower","Float")," = 0\n        let ").concat(t("frameUpper","Float")," = 0\n        \n        while(i < points.length) {\n            p = points[i]\n            frameLower = Math.floor(p.x)\n            frameUpper = frameLower + 1\n\n            // I. Placing interpolated point at the lower bound of the current frame\n            // ------------------------------------------------------------------------\n            // 1. Point is already on an exact frame,\n            if (p.x === frameLower) {\n                newPoints.push({ x: p.x, y: p.y })\n\n                // 1.a. if several of the next points are also on the same X,\n                // we find the last one to draw a vertical line.\n                while (\n                    (i + 1) < points.length\n                    && points[i + 1].x === frameLower\n                ) {\n                    i++\n                }\n                if (points[i].y !== newPoints[newPoints.length - 1].y) {\n                    newPoints.push({ x: points[i].x, y: points[i].y })\n                }\n\n                // 1.b. if last point, we quit\n                if (i + 1 >= points.length) {\n                    break\n                }\n\n                // 1.c. if next point is in a different frame we can move on to next iteration\n                if (frameUpper <= points[i + 1].x) {\n                    i++\n                    continue\n                }\n            \n            // 2. Point isn't on an exact frame\n            // 2.a. There's a previous point, the we use it to interpolate the value.\n            } else if (newPoints.length) {\n                newPoints.push({\n                    x: frameLower,\n                    y: interpolateLin(frameLower, points[i - 1], p),\n                })\n            \n            // 2.b. It's the very first point, then we don't change its value.\n            } else {\n                newPoints.push({ x: frameLower, y: p.y })\n            }\n\n            // II. Placing interpolated point at the upper bound of the current frame\n            // ---------------------------------------------------------------------------\n            // First, we find the closest point from the frame upper bound (could be the same p).\n            // Or could be a point that is exactly placed on frameUpper.\n            while (\n                (i + 1) < points.length \n                && (\n                    Math.ceil(points[i + 1].x) === frameUpper\n                    || Math.floor(points[i + 1].x) === frameUpper\n                )\n            ) {\n                i++\n            }\n            p = points[i]\n\n            // 1. If the next point is directly in the next frame, \n            // we do nothing, as this corresponds with next iteration frameLower.\n            if (Math.floor(p.x) === frameUpper) {\n                continue\n            \n            // 2. If there's still a point after p, we use it to interpolate the value\n            } else if (i < points.length - 1) {\n                newPoints.push({\n                    x: frameUpper,\n                    y: interpolateLin(frameUpper, p, points[i + 1]),\n                })\n\n            // 3. If it's the last point, we dont change the value\n            } else {\n                newPoints.push({ x: frameUpper, y: p.y })\n            }\n\n            i++\n        }\n\n        return newPoints\n    }\n\n    function computeLineSegments ").concat(r([t("points","Array<Point>")],"Array<LineSegment>")," {\n        const ").concat(t("lineSegments","Array<LineSegment>")," = []\n        let ").concat(t("i","Int")," = 0\n        let ").concat(t("p0","Point"),"\n        let ").concat(t("p1","Point"),"\n\n        while(i < points.length - 1) {\n            p0 = points[i]\n            p1 = points[i + 1]\n            lineSegments.push({\n                p0, p1, \n                dy: computeSlope(p0, p1),\n                dx: 1,\n            })\n            i++\n        }\n        return lineSegments\n    }\n\n")}]),ml=function(e){var n=e.macros,t=n.Func,r=n.Var;return"\n    function computeUnitInSamples ".concat(t([r("sampleRate","Float"),r("amount","Float"),r("unit","string")],"Float")," {\n        if (unit === 'msec' || unit === 'millisecond') {\n            return amount / 1000 * sampleRate\n        } else if (unit === 'sec' || unit === 'seconds' || unit === 'second') {\n            return amount * sampleRate\n        } else if (unit === 'min' || unit === 'minutes' || unit === 'minute') {\n            return amount * 60 * sampleRate\n        } else if (unit === 'samp' || unit === 'samples' || unit === 'sample') {\n            return amount\n        } else {\n            throw new Error(\"invalid time unit : \" + unit)\n        }\n    }\n")},hl={loop:function(e){var n=e.outs,t=e.state,r=e.globs;return"\n    if (".concat(t.lineSegments,".length) {\n        if (toFloat(").concat(r.frame,") < ").concat(t.lineSegments,"[0].p0.x) {\n\n        // This should come first to handle vertical lines\n        } else if (toFloat(").concat(r.frame,") === ").concat(t.lineSegments,"[0].p1.x) {\n            ").concat(t.currentValue," = ").concat(t.lineSegments,"[0].p1.y\n            ").concat(t.lineSegments,".shift()\n\n        } else if (toFloat(").concat(r.frame,") === ").concat(t.lineSegments,"[0].p0.x) {\n            ").concat(t.currentValue," = ").concat(t.lineSegments,"[0].p0.y\n\n        } else if (toFloat(").concat(r.frame,") < ").concat(t.lineSegments,"[0].p1.x) {\n            ").concat(t.currentValue," += ").concat(t.lineSegments,"[0].dy\n\n        }\n    }\n    ").concat(n.$0," = ").concat(t.currentValue,"\n")},stateVariables:{points:1,lineSegments:1,currentValue:1,nextDurationSamp:1,nextDelaySamp:1,funcSetNewLine:1,funcSetNextDuration:1,funcSetNextDelay:1},messages:function(e){var n=e.state,t=e.globs;return{0:"\n    if (\n        msg_isMatching(".concat(t.m,", [MSG_FLOAT_TOKEN])\n        || msg_isMatching(").concat(t.m,", [MSG_FLOAT_TOKEN, MSG_FLOAT_TOKEN])\n        || msg_isMatching(").concat(t.m,", [MSG_FLOAT_TOKEN, MSG_FLOAT_TOKEN, MSG_FLOAT_TOKEN])\n    ) {\n        switch (msg_getLength(").concat(t.m,")) {\n            case 3:\n                ").concat(n.funcSetNextDelay,"(msg_readFloatToken(").concat(t.m,", 2))\n            case 2:\n                ").concat(n.funcSetNextDuration,"(msg_readFloatToken(").concat(t.m,", 1))\n            case 1:\n                ").concat(n.funcSetNewLine,"(msg_readFloatToken(").concat(t.m,", 0))\n        }\n        return\n\n    } else if (msg_isAction(").concat(t.m,", 'stop')) {\n        ").concat(n.points," = []\n        ").concat(n.lineSegments," = []\n        return\n    }\n    "),1:Yu(t.m,n.funcSetNextDuration),2:Yu(t.m,n.funcSetNextDelay)}},declare:function(e){var n=e.globs,t=e.state,r=e.macros,a=r.Var,o=r.Func;return"\n    let ".concat(a(t.points,"Array<Point>")," = []\n    let ").concat(a(t.lineSegments,"Array<LineSegment>")," = []\n    let ").concat(a(t.currentValue,"Float")," = 0\n    let ").concat(a(t.nextDurationSamp,"Float")," = 0\n    let ").concat(a(t.nextDelaySamp,"Float")," = 0\n\n    function ").concat(t.funcSetNewLine," ").concat(o([a("targetValue","Float")],"void")," {\n        ").concat(t.points," = removePointsBeforeFrame(").concat(t.points,", toFloat(").concat(n.frame,"))\n        const ").concat(a("startFrame","Float")," = toFloat(").concat(n.frame,") + ").concat(t.nextDelaySamp,"\n        const ").concat(a("endFrame","Float")," = startFrame + ").concat(t.nextDurationSamp,"\n        if (endFrame === toFloat(").concat(n.frame,")) {\n            ").concat(t.currentValue," = targetValue\n            ").concat(t.lineSegments," = []\n        } else {\n            ").concat(t.points," = insertNewLinePoints(\n                ").concat(t.points,", \n                {x: startFrame, y: ").concat(t.currentValue,"},\n                {x: endFrame, y: targetValue}\n            )\n            ").concat(t.lineSegments," = computeLineSegments(\n                computeFrameAjustedPoints(").concat(t.points,"))\n        }\n        ").concat(t.nextDurationSamp," = 0\n        ").concat(t.nextDelaySamp," = 0\n    }\n\n    function ").concat(t.funcSetNextDuration," ").concat(o([a("durationMsec","Float")],"void")," {\n        ").concat(t.nextDurationSamp," = computeUnitInSamples(").concat(n.sampleRate,", durationMsec, 'msec')\n    }\n\n    function ").concat(t.funcSetNextDelay," ").concat(o([a("delayMsec","Float")],"void")," {\n        ").concat(t.nextDelaySamp," = computeUnitInSamples(").concat(n.sampleRate,", delayMsec, 'msec')\n    }\n")},sharedCode:[].concat(Mn(pl),[ml,qu])},gl={translateArgs:function(e){var n=e.args;return{initValue:ju(n[0])||0}},build:function(){return{inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}}},yl={declare:function(e){var n=e.globs,t=e.state,r=e.node.args,a=e.macros,o=a.Var,i=a.Func;return"\n    const ".concat(o(t.defaultLine,"LineSegment")," = {\n        p0: {x: -1, y: 0},\n        p1: {x: -1, y: 0},\n        dx: 1,\n        dy: 0,\n    }\n    let ").concat(o(t.currentLine,"LineSegment")," = ").concat(t.defaultLine,"\n    let ").concat(o(t.currentValue,"Float")," = ").concat(r.initValue,"\n    let ").concat(o(t.nextDurationSamp,"Float")," = 0\n\n    function ").concat(t.funcSetNewLine," ").concat(i([o("targetValue","Float")],"void")," {\n        const ").concat(o("startFrame","Float")," = toFloat(").concat(n.frame,")\n        const ").concat(o("endFrame","Float")," = toFloat(").concat(n.frame,") + ").concat(t.nextDurationSamp,"\n        if (endFrame === toFloat(").concat(n.frame,")) {\n            ").concat(t.currentLine," = ").concat(t.defaultLine,"\n            ").concat(t.currentValue," = targetValue\n            ").concat(t.nextDurationSamp," = 0\n        } else {\n            ").concat(t.currentLine," = {\n                p0: {\n                    x: startFrame, \n                    y: ").concat(t.currentValue,",\n                }, \n                p1: {\n                    x: endFrame, \n                    y: targetValue,\n                }, \n                dx: 1,\n                dy: 0,\n            }\n            ").concat(t.currentLine,".dy = computeSlope(").concat(t.currentLine,".p0, ").concat(t.currentLine,".p1)\n            ").concat(t.nextDurationSamp," = 0\n        }\n    }\n\n    function ").concat(t.funcSetNextDuration," ").concat(i([o("durationMsec","Float")],"void")," {\n        ").concat(t.nextDurationSamp," = computeUnitInSamples(").concat(n.sampleRate,", durationMsec, 'msec')\n    }\n\n    function ").concat(t.funcStopCurrentLine," ").concat(i([],"void")," {\n        ").concat(t.currentLine,".p1.x = -1\n        ").concat(t.currentLine,".p1.y = ").concat(t.currentValue,"\n    }\n")},messages:function(e){var n=e.globs,t=e.state;e.macros.Var;return{0:"\n    if (\n        msg_isMatching(".concat(n.m,", [MSG_FLOAT_TOKEN])\n        || msg_isMatching(").concat(n.m,", [MSG_FLOAT_TOKEN, MSG_FLOAT_TOKEN])\n    ) {\n        switch (msg_getLength(").concat(n.m,")) {\n            case 2:\n                ").concat(t.funcSetNextDuration,"(msg_readFloatToken(").concat(n.m,", 1))\n            case 1:\n                ").concat(t.funcSetNewLine,"(msg_readFloatToken(").concat(n.m,", 0))\n        }\n        return\n\n    } else if (msg_isAction(").concat(n.m,", 'stop')) {\n        ").concat(t.funcStopCurrentLine,"()\n        return\n\n    }\n    "),1:Yu(n.m,t.funcSetNextDuration)}},loop:function(e){var n=e.outs,t=e.state,r=e.globs;return"\n    ".concat(n.$0," = ").concat(t.currentValue,"\n    if (toFloat(").concat(r.frame,") < ").concat(t.currentLine,".p1.x) {\n        ").concat(t.currentValue," += ").concat(t.currentLine,".dy\n        if (toFloat(").concat(r.frame," + 1) >= ").concat(t.currentLine,".p1.x) {\n            ").concat(t.currentValue," = ").concat(t.currentLine,".p1.y\n        }\n    }\n")},stateVariables:{currentValue:1,currentLine:1,defaultLine:1,nextDurationSamp:1,funcSetNewLine:1,funcSetNextDuration:1,funcStopCurrentLine:1},sharedCode:[qu,ml].concat(Mn(pl))},vl={translateArgs:function(e){var n=e.args;return{initValue:ju(n[0])||0,timeGrainMsec:Math.max(ju(n[1])||20,20)}},build:function(){return{inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"message",id:"0"}}}}},bl={declare:function(e){var n=e.globs,t=e.state,r=e.snds,a=e.node.args,o=e.macros,i=o.Var,s=o.Func;return"\n    let ".concat(i(t.currentLine,"LineSegment")," = {\n        p0: {x: -1, y: 0},\n        p1: {x: -1, y: 0},\n        dx: 1,\n        dy: 0,\n    }\n    let ").concat(i(t.currentValue,"Float")," = ").concat(a.initValue,"\n    let ").concat(i(t.nextSamp,"Float")," = -1\n    let ").concat(i(t.nextSampInt,"Int")," = -1\n    let ").concat(i(t.grainSamp,"Float")," = 0\n    let ").concat(i(t.nextDurationSamp,"Float")," = 0\n    let ").concat(i(t.skedId,"SkedId")," = SKED_ID_NULL\n\n    function ").concat(t.funcSetNewLine," ").concat(s([i("targetValue","Float")],"void")," {\n        ").concat(t.currentLine," = {\n            p0: {\n                x: toFloat(").concat(n.frame,"), \n                y: ").concat(t.currentValue,",\n            }, \n            p1: {\n                x: toFloat(").concat(n.frame,") + ").concat(t.nextDurationSamp,", \n                y: targetValue,\n            }, \n            dx: ").concat(t.grainSamp,"\n        }\n        ").concat(t.nextDurationSamp," = 0\n        ").concat(t.currentLine,".dy = computeSlope(").concat(t.currentLine,".p0, ").concat(t.currentLine,".p1) * ").concat(t.grainSamp,"\n    }\n\n    function ").concat(t.funcSetNextDuration," ").concat(s([i("durationMsec","Float")],"void")," {\n        ").concat(t.nextDurationSamp," = computeUnitInSamples(").concat(n.sampleRate,", durationMsec, 'msec')\n    }\n\n    function ").concat(t.funcSetGrain," ").concat(s([i("grainMsec","Float")],"void")," {\n        ").concat(t.grainSamp," = computeUnitInSamples(").concat(n.sampleRate,", Math.max(grainMsec, ").concat(20,"), 'msec')\n    }\n\n    function ").concat(t.funcStopCurrentLine," ").concat(s([],"void")," {\n        if (").concat(t.skedId," !== SKED_ID_NULL) {\n            commons_cancelWaitFrame(").concat(t.skedId,")\n            ").concat(t.skedId," = SKED_ID_NULL\n        }\n        if (").concat(n.frame," < ").concat(t.nextSampInt,") {\n            ").concat(t.funcIncrementTime,"(-1 * (").concat(t.nextSamp," - toFloat(").concat(n.frame,")))\n        }\n        ").concat(t.funcSetNextSamp,"(-1)\n    }\n\n    function ").concat(t.funcSetNextSamp," ").concat(s([i("currentSamp","Float")],"void")," {\n        ").concat(t.nextSamp," = currentSamp\n        ").concat(t.nextSampInt," = toInt(Math.round(currentSamp))\n    }\n\n    function ").concat(t.funcIncrementTime," ").concat(s([i("incrementSamp","Float")],"void")," {\n        if (incrementSamp === ").concat(t.currentLine,".dx) {\n            ").concat(t.currentValue," += ").concat(t.currentLine,".dy\n        } else {\n            ").concat(t.currentValue," += interpolateLin(\n                incrementSamp,\n                {x: 0, y: 0},\n                {x: ").concat(t.currentLine,".dx, y: ").concat(t.currentLine,".dy},\n            )\n        }\n        ").concat(t.funcSetNextSamp,"((").concat(t.nextSamp," !== -1 ? ").concat(t.nextSamp,": toFloat(").concat(n.frame,")) + incrementSamp)\n    }\n\n    function ").concat(t.funcScheduleNextTick," ").concat(s([],"void")," {\n        ").concat(t.skedId," = commons_waitFrame(").concat(t.nextSampInt,", () => {\n            ").concat(r.$0,"(msg_floats([").concat(t.currentValue,"]))\n            if (toFloat(").concat(n.frame,") >= ").concat(t.currentLine,".p1.x) {\n                ").concat(t.currentValue," = ").concat(t.currentLine,".p1.y\n                ").concat(t.funcStopCurrentLine,"()\n            } else {\n                ").concat(t.funcIncrementTime,"(").concat(t.currentLine,".dx)\n                ").concat(t.funcScheduleNextTick,"()\n            }\n        })\n    }\n\n    commons_waitEngineConfigure(() => {\n        ").concat(t.funcSetGrain,"(").concat(a.timeGrainMsec,")\n    })\n")},messages:function(e){var n=e.snds,t=e.globs,r=e.state,a=e.macros.Var;return{0:"\n    if (\n        msg_isMatching(".concat(t.m,", [MSG_FLOAT_TOKEN])\n        || msg_isMatching(").concat(t.m,", [MSG_FLOAT_TOKEN, MSG_FLOAT_TOKEN])\n        || msg_isMatching(").concat(t.m,", [MSG_FLOAT_TOKEN, MSG_FLOAT_TOKEN, MSG_FLOAT_TOKEN])\n    ) {\n        ").concat(r.funcStopCurrentLine,"()\n        switch (msg_getLength(").concat(t.m,")) {\n            case 3:\n                ").concat(r.funcSetGrain,"(msg_readFloatToken(").concat(t.m,", 2))\n            case 2:\n                ").concat(r.funcSetNextDuration,"(msg_readFloatToken(").concat(t.m,", 1))\n            case 1:\n                const ").concat(a("targetValue","Float")," = msg_readFloatToken(").concat(t.m,", 0)\n                if (").concat(r.nextDurationSamp," === 0) {\n                    ").concat(r.currentValue," = targetValue\n                    ").concat(n.$0,"(msg_floats([targetValue]))\n                } else {\n                    ").concat(n.$0,"(msg_floats([").concat(r.currentValue,"]))\n                    ").concat(r.funcSetNewLine,"(targetValue)\n                    ").concat(r.funcIncrementTime,"(").concat(r.currentLine,".dx)\n                    ").concat(r.funcScheduleNextTick,"()\n                }\n                \n        }\n        return\n\n    } else if (msg_isAction(").concat(t.m,", 'stop')) {\n        ").concat(r.funcStopCurrentLine,"()\n        return\n\n    } else if (\n        msg_isMatching(").concat(t.m,", [MSG_STRING_TOKEN, MSG_FLOAT_TOKEN])\n        && msg_readStringToken(").concat(t.m,", 0) === 'set'\n    ) {\n        ").concat(r.funcStopCurrentLine,"()\n        ").concat(r.currentValue," = msg_readFloatToken(").concat(t.m,", 1)\n        return\n    }\n    "),1:Yu(t.m,r.funcSetNextDuration),2:Yu(t.m,r.funcSetGrain)}},stateVariables:{currentValue:1,nextSamp:1,nextSampInt:1,currentLine:1,nextDurationSamp:1,grainSamp:1,skedId:1,funcSetNewLine:1,funcSetNextDuration:1,funcSetGrain:1,funcStopCurrentLine:1,funcSetNextSamp:1,funcIncrementTime:1,funcScheduleNextTick:1},sharedCode:[qu,ml].concat(Mn(pl))},Sl=440*Math.pow(2,1430/12),wl=function(e){var n=e.macros,t=n.Func,r=n.Var;return"\n    function mtof ".concat(t([r("value","Float")],"Float")," {\n        return value <= -1500 ? 0: (value > 1499 ? ").concat(Sl," : Math.pow(2, (value - 69) / 12) * 440)\n    }\n")},_l=function(e){var n=e.macros,t=n.Func,r=n.Var;return"\n    function ftom ".concat(t([r("value","Float")],"Float")," {\n        return value <= 0 ? -1500: 12 * Math.log(value / 440) / Math.LN2 + 69\n    }\n")},kl=function(e){var n=e.macros,t=n.Func,r=n.Var;return"\n    function pow ".concat(t([r("leftOp","Float"),r("rightOp","Float")],"Float")," {\n        return leftOp > 0 || (Math.round(rightOp) === rightOp) ? Math.pow(leftOp, rightOp): 0\n    }\n")},xl={},Il={translateArgs:function(){return{}},build:function(){return{inlets:{0:{type:"signal",id:"0"}},outlets:{0:{type:"signal",id:"0"}}}}},El=function(e){var n=e.generateOperation,t=e.sharedCode;return{loop:function(e){var t=e.ins,r=e.outs;return"\n        ".concat(r.$0," = ").concat(n(t.$0),"\n    ")},stateVariables:xl,sharedCode:void 0===t?[]:t}},Ol={"abs~":El({generateOperation:function(e){return"Math.abs(".concat(e,")")}}),"cos~":El({generateOperation:function(e){return"Math.cos(".concat(e," * 2 * Math.PI)")}}),"wrap~":El({generateOperation:function(e){return"(1 + (".concat(e," % 1)) % 1")}}),"sqrt~":El({generateOperation:function(e){return"".concat(e," >= 0 ? Math.pow(").concat(e,", 0.5): 0")}}),"mtof~":El({generateOperation:function(e){return"mtof(".concat(e,")")},sharedCode:[wl]}),"ftom~":El({generateOperation:function(e){return"ftom(".concat(e,")")},sharedCode:[_l]})},Tl={"abs~":Il,"cos~":Il,"wrap~":Il,"sqrt~":Il,"mtof~":Il,"ftom~":Il},Cl={array:1,arrayName:1,arrayChangesSubscription:1,funcSetArrayName:1},Al=function(e){return{arrayName:Bu(e.args[0])||""}},Fl=function(e){var n=e.state,t=e.node,r=e.macros,a=r.Func,o=r.Var;return"\n    let ".concat(o(n.array,"FloatArray")," = createFloatArray(0)\n    let ").concat(o(n.arrayName,"string"),' = "').concat(t.args.arrayName,'"\n    let ').concat(o(n.arrayChangesSubscription,"SkedId")," = SKED_ID_NULL\n\n    function ").concat(n.funcSetArrayName," ").concat(a([o("arrayName","string")],"void")," {\n        if (").concat(n.arrayChangesSubscription," != SKED_ID_NULL) {\n            commons_cancelArrayChangesSubscription(").concat(n.arrayChangesSubscription,")\n        }\n        ").concat(n.arrayName," = arrayName\n        ").concat(n.array," = createFloatArray(0)\n        commons_subscribeArrayChanges(arrayName, () => {\n            ").concat(n.array," = commons_getArray(").concat(n.arrayName,")\n        })\n    }\n\n    commons_waitEngineConfigure(() => {\n        if (").concat(n.arrayName,".length) {\n            ").concat(n.funcSetArrayName,"(").concat(n.arrayName,")\n        }\n    })\n")},Pl=function(e,n){var t=n.state;return"toInt(Math.min(\n        Math.max(\n            0, Math.floor(".concat(e,")\n        ), toFloat(").concat(t.array,".length - 1)\n    ))")},Ml=function(e){var n=e.globs,t=e.state;return"else if (\n        msg_isMatching(".concat(n.m,", [MSG_STRING_TOKEN, MSG_STRING_TOKEN])\n        && msg_readStringToken(").concat(n.m,", 0) === 'set'\n    ) {\n        ").concat(t.funcSetArrayName,"(msg_readStringToken(").concat(n.m,", 1))\n        return\n\n    }")},Nl={translateArgs:Al,build:function(){return{inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}}}},Ll={declare:Fl,messages:function(e){var n=e.snds,t=e.state,r=e.globs;return{0:"\n        if (msg_isMatching(".concat(r.m,", [MSG_FLOAT_TOKEN])) {        \n            if (").concat(t.array,".length === 0) {\n                ").concat(n.$0,"(msg_floats([0]))\n\n            } else {\n                ").concat(n.$0,"(msg_floats([").concat(t.array,"[").concat(Pl("msg_readFloatToken(".concat(r.m,", 0)"),e),"]]))\n            }\n            return \n\n        } ").concat(Ml(e),"\n        ")}},stateVariables:Cl},Rl={translateArgs:Al,build:function(){return{inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{}}}},Dl={declare:function(e){var n=e.state,t=e.macros,r=t.Var,a=t.Func;return"\n        let ".concat(r(n.index,"Int")," = 0\n        ").concat(Fl(e),"\n\n        function ").concat(n.funcSetIndex," ").concat(a([r("index","Float")],"void")," {\n            ").concat(n.index," = ").concat(Pl("index",e),"\n        }\n    ")},messages:function(e){var n=e.state,t=e.globs;return{0:"\n        if (msg_isMatching(".concat(t.m,", [MSG_FLOAT_TOKEN])) {        \n            if (").concat(n.array,".length === 0) {\n                return\n\n            } else {\n                ").concat(n.array,"[").concat(n.index,"] = msg_readFloatToken(").concat(t.m,", 0)\n                return\n            }\n            return \n\n        } ").concat(Ml(e),"\n        "),1:Yu(t.m,n.funcSetIndex)}},stateVariables:Rr(Rr({},Cl),{},{index:1,funcSetIndex:1})},jl={translateArgs:function(e){return{arrayName:Bu(e.args[0])||""}},build:function(){return{inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"signal",id:"0"},1:{type:"message",id:"1"}}}}},Bl={declare:function(e){var n=e.state,t=e.node,r=e.macros,a=r.Func,o=r.Var;return"\n    let ".concat(o(n.array,"FloatArray")," = createFloatArray(0)\n    let ").concat(o(n.arrayName,"string"),' = "').concat(t.args.arrayName,'"\n    let ').concat(o(n.arrayChangesSubscription,"SkedId")," = SKED_ID_NULL\n    let ").concat(o(n.readPosition,"Int")," = 0\n    let ").concat(o(n.readUntil,"Int")," = 0\n\n    function ").concat(n.funcSetArrayName," ").concat(a([o("arrayName","string")],"void")," {\n        if (").concat(n.arrayChangesSubscription," != SKED_ID_NULL) {\n            commons_cancelArrayChangesSubscription(").concat(n.arrayChangesSubscription,")\n        }\n        ").concat(n.arrayName," = arrayName\n        ").concat(n.array," = createFloatArray(0)\n        ").concat(n.funcStop,"()\n        commons_subscribeArrayChanges(arrayName, () => {\n            ").concat(n.array," = commons_getArray(").concat(n.arrayName,")\n            ").concat(n.readPosition," = ").concat(n.array,".length\n            ").concat(n.readUntil," = ").concat(n.array,".length\n        })\n    }\n\n    function ").concat(n.funcPlay," ").concat(a([o("playFrom","Int"),o("playTo","Int")],"void")," {\n        ").concat(n.readPosition," = playFrom\n        ").concat(n.readUntil," = toInt(Math.min(\n            toFloat(playTo), \n            toFloat(").concat(n.array,".length),\n        ))\n    }\n\n    function ").concat(n.funcStop," ").concat(a([],"void")," {\n        ").concat(n.readPosition," = 0\n        ").concat(n.readUntil," = 0\n    }\n\n    commons_waitEngineConfigure(() => {\n        if (").concat(n.arrayName,".length) {\n            ").concat(n.funcSetArrayName,"(").concat(n.arrayName,")\n        }\n    })\n")},messages:function(e){var n=e.state,t=e.globs,r=e.macros.Var;return{0:"\n    if (msg_isBang(".concat(t.m,")) {\n        ").concat(n.funcPlay,"(0, ").concat(n.array,".length)\n        return \n        \n    } else if (msg_isAction(").concat(t.m,", 'stop')) {\n        ").concat(n.funcStop,"()\n        return \n\n    } else if (\n        msg_isMatching(").concat(t.m,", [MSG_STRING_TOKEN, MSG_STRING_TOKEN])\n        && msg_readStringToken(").concat(t.m,", 0) === 'set'\n    ) {\n        ").concat(n.funcSetArrayName,"(msg_readStringToken(").concat(t.m,", 1))   \n        return\n\n    } else if (msg_isMatching(").concat(t.m,", [MSG_FLOAT_TOKEN])) {\n        ").concat(n.funcPlay,"(\n            toInt(msg_readFloatToken(").concat(t.m,", 0)), \n            ").concat(n.array,".length\n        )\n        return \n\n    } else if (msg_isMatching(").concat(t.m,", [MSG_FLOAT_TOKEN, MSG_FLOAT_TOKEN])) {\n        const ").concat(r("fromSample","Int")," = toInt(msg_readFloatToken(").concat(t.m,", 0))\n        ").concat(n.funcPlay,"(\n            fromSample,\n            fromSample + toInt(msg_readFloatToken(").concat(t.m,", 1)),\n        )\n        return\n    }\n    ")}},loop:function(e){var n=e.state,t=e.snds,r=e.outs;return"\n    if (".concat(n.readPosition," < ").concat(n.readUntil,") {\n        ").concat(r.$0," = ").concat(n.array,"[").concat(n.readPosition,"]\n        ").concat(n.readPosition,"++\n        if (").concat(n.readPosition," >= ").concat(n.readUntil,") {\n            ").concat(t.$1,"(msg_bang())\n        }\n    } else {\n        ").concat(r.$0," = 0\n    }\n")},stateVariables:{array:1,arrayName:1,arrayChangesSubscription:1,readPosition:1,readUntil:1,funcSetArrayName:1,funcStop:1,funcPlay:1},sharedCode:[$u,qu]},zl=function(e){var n=e.macros,t=n.Func,r=n.Var;return"\n    function parseSoundFileOpenOpts ".concat(t([r("m","Message"),r("soundInfo","fs_SoundInfo")],"Set<Int>")," {\n        const ").concat(r("unhandled","Set<Int>")," = new Set()\n        let ").concat(r("i","Int")," = 0\n        while (i < msg_getLength(m)) {\n            if (msg_isStringToken(m, i)) {\n                const ").concat(r("str","string")," = msg_readStringToken(m, i)\n                if (['-wave', '-aiff', '-caf', '-next', '-ascii'].includes(str)) {\n                    soundInfo.encodingFormat = str.slice(1)\n\n                } else if (str === '-raw') {\n                    console.log('-raw format not yet supported')\n                    i += 4\n                    \n                } else if (str === '-big') {\n                    soundInfo.endianness = 'b'\n\n                } else if (str === '-little') {\n                    soundInfo.endianness = 'l'\n\n                } else if (str === '-bytes') {\n                    if (i < msg_getLength(m) && msg_isFloatToken(m, i + 1)) {\n                        soundInfo.bitDepth = toInt(msg_readFloatToken(m, i + 1) * 8)\n                        i++\n                    } else {\n                        console.log('failed to parse -bytes <value>')\n                    }\n\n                } else if (str === '-rate') {\n                    if (i < msg_getLength(m) && msg_isFloatToken(m, i + 1)) {\n                        soundInfo.sampleRate = toInt(msg_readFloatToken(m, i + 1))\n                        i++\n                    } else {\n                        console.log('failed to parse -rate <value>')\n                    }\n\n                } else {\n                    unhandled.add(i)\n                }\n                \n            } else {\n                unhandled.add(i)\n            }\n            i++\n        }\n        return unhandled\n    }\n")},Ul=function(e){var n=e.macros,t=n.Func,r=n.Var;return"\n    function parseReadWriteFsOpts ".concat(t([r("m","Message"),r("soundInfo","fs_SoundInfo"),r("unhandledOptions","Set<Int>")],"string"),' {\n        // Remove the "open" token\n        unhandledOptions.delete(0)\n\n        let ').concat(r("url","string")," = ''\n        let ").concat(r("urlFound","boolean")," = false\n        let ").concat(r("errored","boolean")," = false\n        let ").concat(r("i","Int")," = 1\n        while (i < msg_getLength(m)) {\n            if (!unhandledOptions.has(i)) {\n\n            } else if (msg_isStringToken(m, i)) {\n                url = msg_readStringToken(m, i)\n                urlFound = true\n\n            } else {\n                console.log(\"[writesf/readsf~] invalid option index \" + i.toString())\n                errored = true\n            }\n            i++\n        }\n        if (!urlFound) {\n            console.log(\"[writesf/readsf~] invalid options, file url not found\")\n            return ''\n        }\n        if (errored) {\n            return ''\n        }\n        return url\n    }\n")},Vl={translateArgs:function(e){return{channelCount:ju(e.args[0])||1}},build:function(e){return{inlets:{0:{type:"message",id:"0"}},outlets:Rr(Rr({},fi(ui(e.channelCount),(function(e){return["".concat(e),{type:"signal",id:"".concat(e)}]}))),{},Nr({},"".concat(e.channelCount),{type:"message",id:"".concat(e.channelCount)}))}}},Wl={declare:function(e){var n=e.macros.Var,t=e.state;return"\n    let ".concat(n(t.buffers,"Array<buf_SoundBuffer>")," = []\n    let ").concat(n(t.streamOperationId,"fs_OperationId")," = -1\n    let ").concat(n(t.readingStatus,"Int")," = 0\n")},messages:function(e){var n=e.node,t=e.state,r=e.globs,a=e.macros.Var;return{0:"\n    if (msg_getLength(".concat(r.m,") >= 2) {\n        if (msg_isStringToken(").concat(r.m,", 0) \n            && msg_readStringToken(").concat(r.m,", 0) === 'open'\n        ) {\n            if (").concat(t.streamOperationId," !== -1) {\n                ").concat(t.readingStatus," = 3\n                fs_closeSoundStream(").concat(t.streamOperationId,", FS_OPERATION_SUCCESS)\n            }\n\n            const ").concat(a("soundInfo","fs_SoundInfo")," = {\n                channelCount: ").concat(n.args.channelCount,",\n                sampleRate: toInt(").concat(r.sampleRate,"),\n                bitDepth: 32,\n                encodingFormat: '',\n                endianness: '',\n                extraOptions: '',\n            }\n            const ").concat(a("unhandledOptions","Set<Int>")," = parseSoundFileOpenOpts(\n                ").concat(r.m,",\n                soundInfo,\n            )\n            const ").concat(a("url","string")," = parseReadWriteFsOpts(\n                ").concat(r.m,",\n                soundInfo,\n                unhandledOptions\n            )\n            if (url.length === 0) {\n                return\n            }\n            ").concat(t.streamOperationId," = fs_openSoundReadStream(\n                url,\n                soundInfo,\n                () => {\n                    ").concat(t.streamOperationId," = -1\n                    if (").concat(t.readingStatus," === 1) {\n                        ").concat(t.readingStatus," = 2\n                    } else {\n                        ").concat(t.readingStatus," = 3\n                    }\n                }\n            )\n            ").concat(t.buffers," = _FS_SOUND_STREAM_BUFFERS.get(").concat(t.streamOperationId,")\n            return\n        }\n\n    } else if (msg_isMatching(").concat(r.m,", [MSG_FLOAT_TOKEN])) {\n        if (msg_readFloatToken(").concat(r.m,", 0) === 0) {\n            ").concat(t.readingStatus," = 3\n            return\n\n        } else {\n            if (").concat(t.streamOperationId," !== -1) {\n                ").concat(t.readingStatus," = 1\n            } else {\n                console.log('[readsf~] start requested without prior open')\n            }\n            return\n\n        }\n        \n    } else if (msg_isAction(").concat(r.m,", 'print')) {\n        console.log('[readsf~] reading = ' + ").concat(t.readingStatus,".toString())\n        return\n    }    \n    ")}},loop:function(e){var n=e.state,t=e.snds,r=e.outs,a=e.node.args.channelCount;return si(hu||(hu=s(["\n    switch(",") {\n        case 1: \n            ","\n            break\n            \n        case 2: \n            ","\n            if (","[0].pullAvailableLength === 0) {\n                ","(msg_bang())\n                "," = 3\n            }\n            break\n\n        case 3: \n            ","\n            "," = 0\n            break\n    }\n"])),n.readingStatus,ui(a).map((function(e){return"".concat(r[e]," = buf_pullSample(").concat(n.buffers,"[").concat(e,"])")})),ui(a).map((function(e){return"".concat(r[e]," = buf_pullSample(").concat(n.buffers,"[").concat(e,"])")})),n.buffers,t[a],n.readingStatus,ui(a).map((function(e){return"".concat(r[e]," = 0")})),n.readingStatus)},stateVariables:{buffers:1,readingStatus:1,streamOperationId:1,frame:1},sharedCode:[zl,Ul,$u,qu]},Gl=220500,$l={translateArgs:function(e){return{channelCount:ju(e.args[0])||1}},build:function(e){var n=e.channelCount;return{inlets:Rr({"0_message":{type:"message",id:"0_message"}},fi(ui(n),(function(e){return["".concat(e),{type:"signal",id:"".concat(e)}]}))),outlets:{},isPullingSignal:!0}},rerouteMessageConnection:function(e){if("0"===e)return"0_message"}},Kl={declare:function(e){var n=e.state,t=e.node.args,r=e.macros,a=r.Func,o=r.Var;return si(gu||(gu=s(["\n    let "," = -1\n    let "," = false\n    const "," = [\n        ","\n    ]\n    let "," = 0\n\n    const "," = "," => {\n        const "," = []\n        for (let "," = 0; i < ",".length; i++) {\n            block.push(","[i].subarray(0, ","))\n        }\n        fs_sendSoundStreamData(",", block)\n        "," = 0\n    }\n"])),o(n.operationId,"fs_OperationId"),o(n.isWriting,"boolean"),o(n.block,"Array<FloatArray>"),ui(t.channelCount).map((function(){return"createFloatArray(".concat(Gl,"),")})),o(n.cursor,"Int"),n.funcFlushBlock,a([],"void"),o("block","Array<FloatArray>"),o("i","Int"),n.block,n.block,n.cursor,n.operationId,n.cursor)},messages:function(e){var n=e.node,t=e.state,r=e.globs,a=e.macros.Var;return{"0_message":"\n    if (msg_getLength(".concat(r.m,") >= 2) {\n        if (\n            msg_isStringToken(").concat(r.m,", 0) \n            && msg_readStringToken(").concat(r.m,", 0) === 'open'\n        ) {\n            if (").concat(t.operationId," !== -1) {\n                fs_closeSoundStream(").concat(t.operationId,", FS_OPERATION_SUCCESS)\n            }\n\n            const ").concat(a("soundInfo","fs_SoundInfo")," = {\n                channelCount: ").concat(n.args.channelCount,",\n                sampleRate: toInt(").concat(r.sampleRate,"),\n                bitDepth: 32,\n                encodingFormat: '',\n                endianness: '',\n                extraOptions: '',\n            }\n            const ").concat(a("unhandledOptions","Set<Int>")," = parseSoundFileOpenOpts(\n                ").concat(r.m,",\n                soundInfo,\n            )\n            const ").concat(a("url","string")," = parseReadWriteFsOpts(\n                ").concat(r.m,",\n                soundInfo,\n                unhandledOptions\n            )\n            if (url.length === 0) {\n                return\n            }\n            ").concat(t.operationId," = fs_openSoundWriteStream(\n                url,\n                soundInfo,\n                () => {\n                    ").concat(t.funcFlushBlock,"()\n                    ").concat(t.operationId," = -1\n                }\n            )\n            return\n        }\n\n    } else if (msg_isAction(").concat(r.m,", 'start')) {\n            ").concat(t.isWriting," = true\n            return\n\n    } else if (msg_isAction(").concat(r.m,", 'stop')) {\n        ").concat(t.funcFlushBlock,"()\n        ").concat(t.isWriting," = false\n        return\n\n    } else if (msg_isAction(").concat(r.m,", 'print')) {\n        console.log('[writesf~] writing = ' + ").concat(t.isWriting,".toString())\n        return\n    }    \n    ")}},loop:function(e){var n=e.state,t=e.ins,r=e.node.args;return si(yu||(yu=s(["\n    if ("," === true) {\n        ","\n        ","++\n        if ("," === ",") {\n            ","()\n        }\n    }\n"])),n.isWriting,ui(r.channelCount).map((function(e){return"".concat(n.block,"[").concat(e,"][").concat(n.cursor,"] = ").concat(t[e])})),n.cursor,n.cursor,Gl,n.funcFlushBlock)},stateVariables:{isWriting:1,operationId:1,block:1,cursor:1,funcFlushBlock:1},sharedCode:[zl,Ul,qu]},ql={translateArgs:function(e){var n=e.args;return{frequency:ju(n[0])||0,Q:ju(n[1])||0}},build:function(){return{inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"signal",id:"0"}}}},rerouteMessageConnection:function(e){if("0"===e)return"0_message"}},Hl={loop:function(e){var n=e.ins,t=e.outs,r=e.state;return"\n    ".concat(r.y," = ").concat(n.$0," + ").concat(r.coef1," * ").concat(r.ym1," + ").concat(r.coef2," * ").concat(r.ym2,"\n    ").concat(t.$0," = ").concat(r.gain," * ").concat(r.y,"\n    ").concat(r.ym2," = ").concat(r.ym1,"\n    ").concat(r.ym1," = ").concat(r.y,"\n")},stateVariables:{frequency:1,Q:1,y:1,ym1:1,ym2:1,coef1:1,coef2:1,gain:1,funcSetQ:1,funcSetFrequency:1,funcUpdateCoefs:1,funcClear:1},messages:function(e){var n=e.state,t=e.globs;return{"0_message":"\n        if (\n            msg_isMatching(".concat(t.m,")\n            && msg_readStringToken(").concat(t.m,", 0) === 'clear'\n        ) {\n            ").concat(n.funcClear,"()\n            return \n        }\n    "),1:Yu(t.m,n.funcSetFrequency),2:Yu(t.m,n.funcSetQ)}},declare:function(e){var n=e.state,t=e.globs,r=e.node.args,a=e.macros,o=a.Var,i=a.Func;return"\n    let ".concat(o(n.frequency,"Float")," = ").concat(r.frequency,"\n    let ").concat(o(n.Q,"Float")," = ").concat(r.Q,"\n    let ").concat(o(n.coef1,"Float")," = 0\n    let ").concat(o(n.coef2,"Float")," = 0\n    let ").concat(o(n.gain,"Float")," = 0\n    let ").concat(o(n.y,"Float")," = 0\n    let ").concat(o(n.ym1,"Float")," = 0\n    let ").concat(o(n.ym2,"Float")," = 0\n\n    function ").concat(n.funcUpdateCoefs," ").concat(i([],"void")," {\n        let ").concat(o("omega","Float")," = ").concat(n.frequency," * (2.0 * Math.PI) / ").concat(t.sampleRate,";\n        let ").concat(o("oneminusr","Float")," = ").concat(n.Q," < 0.001 ? 1.0 : Math.min(omega / ").concat(n.Q,", 1)\n        let ").concat(o("r","Float")," = 1.0 - oneminusr\n        let ").concat(o("sigbp_qcos","Float")," = (omega >= -(0.5 * Math.PI) && omega <= 0.5 * Math.PI) ? \n            (((Math.pow(omega, 6) * (-1.0 / 720.0) + Math.pow(omega, 4) * (1.0 / 24)) - Math.pow(omega, 2) * 0.5) + 1)\n            : 0\n\n        ").concat(n.coef1," = 2.0 * sigbp_qcos * r\n        ").concat(n.coef2," = - r * r\n        ").concat(n.gain," = 2 * oneminusr * (oneminusr + r * omega)\n    }\n\n    function ").concat(n.funcSetFrequency," ").concat(i([o("frequency","Float")],"void")," {\n        ").concat(n.frequency," = (frequency < 0.001) ? 10: frequency\n        ").concat(n.funcUpdateCoefs,"()\n    }\n\n    function ").concat(n.funcSetQ," ").concat(i([o("Q","Float")],"void")," {\n        ").concat(n.Q," = Math.max(Q, 0)\n        ").concat(n.funcUpdateCoefs,"()\n    }\n\n    function ").concat(n.funcClear," ").concat(i([],"void")," {\n        ").concat(n.ym1," = 0\n        ").concat(n.ym2," = 0\n    }\n\n    commons_waitEngineConfigure(() => {\n        ").concat(n.funcUpdateCoefs,"()\n    })\n")}},Xl=function(e){var n=e.macros,t=n.Var,r=n.Func;return"\n    const ".concat(t("SIGNAL_BUSES","Map<string, Float>")," = new Map()\n    SIGNAL_BUSES.set('', 0)\n\n    function addAssignSignalBus ").concat(r([t("busName","string"),t("value","Float")],"Float")," {\n        const ").concat(t("newValue","Float")," = SIGNAL_BUSES.get(busName) + value\n        SIGNAL_BUSES.set(\n            busName,\n            newValue,\n        )\n        return newValue\n    }\n\n    function setSignalBus ").concat(r([t("busName","string"),t("value","Float")],"Float")," {\n        SIGNAL_BUSES.set(\n            busName,\n            value,\n        )\n    }\n\n    function resetSignalBus ").concat(r([t("busName","string")],"void")," {\n        SIGNAL_BUSES.set(busName, 0)\n    }\n\n    function readSignalBus ").concat(r([t("busName","string")],"Float")," {\n        return SIGNAL_BUSES.get(busName)\n    }\n")},Yl=function(e){var n=e.macros,t=n.Var,r=n.Func;return"\n    const ".concat(t("MSG_BUSES","Map<string, Array<(m: Message) => void>>")," = new Map()\n\n    function msgBusPublish ").concat(r([t("busName","string"),t("message","Message")],"void")," {\n        let ").concat(t("i","Int")," = 0\n        const ").concat(t("callbacks","Array<(m: Message) => void>")," = MSG_BUSES.has(busName) ? MSG_BUSES.get(busName): []\n        for (i = 0; i < callbacks.length; i++) {\n            callbacks[i](message)\n        }\n    }\n\n    function msgBusSubscribe ").concat(r([t("busName","string"),t("callback","(m: Message) => void")],"void")," {\n        if (!MSG_BUSES.has(busName)) {\n            MSG_BUSES.set(busName, [])\n        }\n        MSG_BUSES.get(busName).push(callback)\n    }\n\n    function msgBusUnsubscribe ").concat(r([t("busName","string"),t("callback","(m: Message) => void")],"void")," {\n        if (!MSG_BUSES.has(busName)) {\n            return\n        }\n        const ").concat(t("callbacks","Array<(m: Message) => void>")," = MSG_BUSES.get(busName)\n        const ").concat(t("found","Int")," = callbacks.indexOf(callback) !== -1\n        if (found !== -1) {\n            callbacks.splice(found, 1)\n        }\n    }\n")},Jl={translateArgs:function(e){return{busName:Bu(e.args[0])||""}},build:function(){return{inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"}},outlets:{},isPullingSignal:!0}},rerouteMessageConnection:function(e){if("0"===e)return"0_message"}},Ql={loop:function(e){var n=e.ins,t=e.state;return"\n    addAssignSignalBus(".concat(t.busName,", ").concat(n.$0,")\n")},messages:function(e){var n=e.state,t=e.globs;return{"0_message":"\n    if (\n        msg_isMatching(".concat(t.m,", [MSG_STRING_TOKEN, MSG_STRING_TOKEN])\n        && msg_readStringToken(").concat(t.m,", 0) === 'set'\n    ) {\n        ").concat(n.funcSetBusName,"(msg_readStringToken(").concat(t.m,", 1))\n        return\n    }\n    ")}},stateVariables:{busName:1,funcSetBusName:1},declare:function(e){var n=e.state,t=e.node.args,r=e.macros,a=r.Var,o=r.Func;return"\n    let ".concat(a(n.busName,"string"),' = ""\n\n    const ').concat(n.funcSetBusName," = ").concat(o([a("busName","string")],"void")," => {\n        if (busName.length) {\n            ").concat(n.busName," = busName\n            resetSignalBus(").concat(n.busName,")\n        }\n    }\n\n    ").concat(n.funcSetBusName,'("').concat(t.busName,'")\n')},sharedCode:[Xl]},Zl={translateArgs:function(e){return{busName:Bu(e.args[0])||""}},build:function(){return{inlets:{},outlets:{0:{type:"signal",id:"0"}}}}},ef={loop:function(e){var n=e.outs,t=e.state;return"\n    ".concat(n.$0," = readSignalBus(").concat(t.busName,")\n    resetSignalBus(").concat(t.busName,")\n")},stateVariables:{busName:1,funcSetBusName:1},declare:function(e){var n=e.state,t=e.node.args,r=e.macros,a=r.Var,o=r.Func;return"\n    let ".concat(a(n.busName,"string"),' = ""\n\n    const ').concat(n.funcSetBusName," = ").concat(o([a("busName","string")],"void")," => {\n        if (busName.length) {\n            ").concat(n.busName," = busName\n            resetSignalBus(").concat(n.busName,")\n        }\n    }\n\n    ").concat(n.funcSetBusName,'("').concat(t.busName,'")\n')},sharedCode:[Xl]},nf={translateArgs:function(e){return{busName:Bu(e.args[0])||""}},build:function(){return{inlets:{0:{type:"signal",id:"0"}},outlets:{},isPullingSignal:!0}}},tf={loop:function(e){var n=e.ins,t=e.state;return"\n    setSignalBus(".concat(t.busName,", ").concat(n.$0,")\n")},stateVariables:{busName:1},declare:function(e){var n=e.state,t=e.node.args,r=e.macros.Var;return"\n    const ".concat(r(n.busName,"string"),' = "').concat(t.busName,'"\n')},sharedCode:[Xl]},rf={translateArgs:function(e){return{busName:Bu(e.args[0])||""}},build:function(){return{inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"signal",id:"0"}}}}},af={loop:function(e){var n=e.outs,t=e.state;return"\n    ".concat(n.$0," = readSignalBus(").concat(t.busName,")\n")},messages:function(e){var n=e.state,t=e.globs;return{0:"\n    if (\n        msg_isMatching(".concat(t.m,", [MSG_STRING_TOKEN, MSG_STRING_TOKEN])\n        && msg_readStringToken(").concat(t.m,", 0) === 'set'\n    ) {\n        ").concat(n.funcSetBusName,"(msg_readStringToken(").concat(t.m,", 1))\n        return\n    }\n    ")}},stateVariables:{busName:1,funcSetBusName:1},declare:function(e){var n=e.state,t=e.node.args,r=e.macros,a=r.Var,o=r.Func;return"\n    let ".concat(a(n.busName,"string"),' = ""\n\n    const ').concat(n.funcSetBusName," = ").concat(o([a("busName","string")],"void")," => {\n        if (busName.length) {\n            ").concat(n.busName," = busName\n            resetSignalBus(").concat(n.busName,")\n        }\n    }\n\n    ").concat(n.funcSetBusName,'("').concat(t.busName,'")\n')},sharedCode:[Xl]},of={translateArgs:function(e){return{rate:ju(e.args[0])||0,unitAmount:ju(e.args[1])||1,unit:Bu(e.args[2])||"msec"}},build:function(){return{inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}}}},sf={declare:function(e){var n=e.state,t=e.globs,r=e.snds,a=e.node.args,o=e.macros,i=o.Func,s=o.Var;return"\n        let ".concat(s(n.rate,"Float")," = 0\n        let ").concat(s(n.sampleRatio,"Float")," = 1\n        let ").concat(s(n.skedId,"Int")," = SKED_ID_NULL\n        let ").concat(s(n.realNextTick,"Float")," = -1\n\n        function ").concat(n.funcSetRate," ").concat(i([s("rate","Float")],"void")," {\n            ").concat(n.rate," = Math.max(rate, 0)\n        }\n\n        function ").concat(n.funcScheduleNextTick," ").concat(i([],"void")," {\n            ").concat(r.$0,"(msg_bang())\n            ").concat(n.realNextTick," = ").concat(n.realNextTick," + ").concat(n.rate," * ").concat(n.sampleRatio,"\n            ").concat(n.skedId," = commons_waitFrame(toInt(Math.round(").concat(n.realNextTick,")), () => {\n                ").concat(n.funcScheduleNextTick,"()\n            })\n        }\n\n        function ").concat(n.funcStop," ").concat(i([],"void")," {\n            if (").concat(n.skedId," !== SKED_ID_NULL) {\n                commons_cancelWaitFrame(").concat(n.skedId,")\n                ").concat(n.skedId," = SKED_ID_NULL\n            }\n            ").concat(n.realNextTick," = 0\n        }\n\n        commons_waitEngineConfigure(() => {\n            ").concat(n.sampleRatio," = computeUnitInSamples(").concat(t.sampleRate,", ").concat(a.unitAmount,', "').concat(a.unit,'")\n            ').concat(n.funcSetRate,"(").concat(a.rate,")\n        })\n    ")},messages:function(e){var n=e.state,t=e.globs;e.snds;return{0:"\n    if (msg_getLength(".concat(t.m,") === 1) {\n        if (\n            (msg_isFloatToken(").concat(t.m,", 0) && msg_readFloatToken(").concat(t.m,", 0) === 0)\n            || msg_isAction(").concat(t.m,", 'stop')\n        ) {\n            ").concat(n.funcStop,"()\n            return\n\n        } else if (\n            msg_isFloatToken(").concat(t.m,", 0)\n            || msg_isBang(").concat(t.m,")\n        ) {\n            ").concat(n.realNextTick," = toFloat(").concat(t.frame,")\n            ").concat(n.funcScheduleNextTick,"()\n            return\n        }\n    }\n    "),1:Yu(t.m,n.funcSetRate)}},stateVariables:{rate:1,sampleRatio:1,skedId:1,realNextTick:1,funcSetRate:1,funcScheduleNextTick:1,funcStop:1},sharedCode:[ml,$u,qu]},cf={translateArgs:function(e){return{unitAmount:ju(e.args[0])||1,unit:Bu(e.args[1])||"msec"}},build:function(){return{inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}}}},uf={stateVariables:{resetTime:1,sampleRatio:1},declare:function(e){var n=e.state,t=e.globs,r=e.node.args,a=e.macros.Var;return"\n    let ".concat(a(n.sampleRatio,"Float")," = 0\n    let ").concat(a(n.resetTime,"Int")," = 0\n\n    commons_waitEngineConfigure(() => {\n        ").concat(n.sampleRatio," = computeUnitInSamples(").concat(t.sampleRate,", ").concat(r.unitAmount,', "').concat(r.unit,'")\n    })\n')},messages:function(e){var n=e.snds,t=e.globs,r=e.state;return{0:"\n    if (msg_isBang(".concat(t.m,")) {\n        ").concat(r.resetTime," = ").concat(t.frame,"\n        return\n\n    } else if (\n        msg_isMatching(").concat(t.m,", [MSG_STRING_TOKEN, MSG_FLOAT_TOKEN, MSG_STRING_TOKEN])\n        && msg_readStringToken(").concat(t.m,", 0) === 'tempo'\n    ) {\n        ").concat(r.sampleRatio," = computeUnitInSamples(\n            ").concat(t.sampleRate,", \n            msg_readFloatToken(").concat(t.m,", 1), \n            msg_readStringToken(").concat(t.m,", 2)\n        )\n        return\n    }\n    "),1:"\n    if (msg_isBang(".concat(t.m,")) {\n        ").concat(n.$0,"(msg_floats([toFloat(").concat(t.frame," - ").concat(r.resetTime,") / ").concat(r.sampleRatio,"]))\n        return\n    }\n    ")}},sharedCode:[ml,$u]},lf={translateArgs:function(e){return{delay:ju(e.args[0])||0,unitAmount:ju(e.args[1])||1,unit:Bu(e.args[2])||"msec"}},build:function(){return{inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}}}},ff={declare:function(e){var n=e.state,t=e.globs,r=e.node.args,a=e.macros,o=a.Func,i=a.Var;return"\n        let ".concat(i(n.delay,"Float")," = 0\n        let ").concat(i(n.sampleRatio,"Float")," = 1\n        let ").concat(i(n.scheduledBang,"Int")," = -1\n\n        const ").concat(n.funcSetDelay," = ").concat(o([i("delay","Float")],"void")," => {\n            ").concat(n.delay," = Math.max(0, delay)\n        }\n\n        const ").concat(n.funcScheduleDelay," = ").concat(o([],"void")," => {\n            ").concat(n.scheduledBang," = toInt(Math.round(\n                toFloat(").concat(t.frame,") + ").concat(n.delay," * ").concat(n.sampleRatio,"))\n        }\n\n        const ").concat(n.funcStopDelay," = ").concat(o([],"void")," => {\n            ").concat(n.scheduledBang," = -1\n        }\n\n        commons_waitEngineConfigure(() => {\n            ").concat(n.sampleRatio," = computeUnitInSamples(").concat(t.sampleRate,", ").concat(r.unitAmount,', "').concat(r.unit,'")\n            ').concat(n.funcSetDelay,"(").concat(r.delay,")\n        })\n    ")},messages:function(e){e.node;var n=e.state,t=e.globs,r=e.macros.Var;return{0:"\n        if (msg_getLength(".concat(t.m,") === 1) {\n            if (msg_isStringToken(").concat(t.m,", 0)) {\n                const ").concat(r("action","string")," = msg_readStringToken(").concat(t.m,", 0)\n                if (action === 'bang' || action === 'start') {\n                    ").concat(n.funcScheduleDelay,"()\n                    return\n                } else if (action === 'stop') {\n                    ").concat(n.funcStopDelay,"()\n                    return\n                }\n                \n            } else if (msg_isFloatToken(").concat(t.m,", 0)) {\n                ").concat(n.funcSetDelay,"(msg_readFloatToken(").concat(t.m,", 0))\n                ").concat(n.funcScheduleDelay,"()\n                return \n            }\n        \n        } else if (\n            msg_isMatching(").concat(t.m,", [MSG_STRING_TOKEN, MSG_FLOAT_TOKEN, MSG_STRING_TOKEN])\n            && msg_readStringToken(").concat(t.m,", 0) === 'tempo'\n        ) {\n            ").concat(n.sampleRatio," = computeUnitInSamples(\n                ").concat(t.sampleRate,", \n                msg_readFloatToken(").concat(t.m,", 1), \n                msg_readStringToken(").concat(t.m,", 2)\n            )\n            return\n        }\n    "),1:Yu(t.m,n.funcSetDelay)}},loop:function(e){var n=e.state,t=e.snds,r=e.globs;return"\n    if (\n        ".concat(n.scheduledBang," > -1 \n        && ").concat(n.scheduledBang," <= ").concat(r.frame,"\n    ) {\n        ").concat(t.$0,"(msg_bang())\n        ").concat(n.scheduledBang," = -1\n    }\n")},stateVariables:{funcSetDelay:1,funcScheduleDelay:1,funcStopDelay:1,delay:1,scheduledBang:1,sampleRatio:1},sharedCode:[ml,$u]},df="empty",pf={value:1,funcPrepareStoreValue:1,funcPrepareStoreValueBang:1,funcSetReceiveBusName:1,sendBusName:1,receiveBusName:1,funcMessageReceiver:1},mf=function(){return{inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0}},hf=function(e){var n=e.node,t=e.state,r=e.node.args,a=e.macros,o=a.Var,i=a.Func;return"\n    let ".concat(o(t.receiveBusName,"string"),' = "').concat(n.args.receiveBusName,'"\n    let ').concat(o(t.sendBusName,"string"),' = "').concat(n.args.sendBusName,'"\n\n    function ').concat(t.funcSetReceiveBusName," ").concat(i([o("busName","string")],"void")," {\n        if (").concat(t.receiveBusName,' !== "').concat(df,'") {\n            msgBusUnsubscribe(').concat(t.receiveBusName,", ").concat(t.funcMessageReceiver,")\n        }\n        ").concat(t.receiveBusName," = busName\n        if (").concat(t.receiveBusName,' !== "').concat(df,'") {\n            msgBusSubscribe(').concat(t.receiveBusName,", ").concat(t.funcMessageReceiver,")\n        }\n    }\n\n    commons_waitEngineConfigure(() => {\n        ").concat(t.funcSetReceiveBusName,'("').concat(r.receiveBusName,'")\n    })\n')},gf=function(e){var n=e.globs,t=e.state;return"\n    if (\n        msg_isMatching(".concat(n.m,", [MSG_STRING_TOKEN, MSG_STRING_TOKEN])\n        && msg_readStringToken(").concat(n.m,", 0) === 'receive'\n    ) {\n        ").concat(t.funcSetReceiveBusName,"(msg_readStringToken(").concat(n.m,", 1))\n        return\n\n    } else if (\n        msg_isMatching(").concat(n.m,", [MSG_STRING_TOKEN, MSG_STRING_TOKEN])\n        && msg_readStringToken(").concat(n.m,", 0) === 'send'\n    ) {\n        ").concat(t.sendBusName," = msg_readStringToken(").concat(n.m,", 1)\n        return\n    }\n")},yf={translateArgs:function(e){var n=bt(e.args,6),t=n[0],r=n[1],a=n[2],o=n[3],i=n[4],s=n[5];return{minValue:Ru(t),maxValue:Ru(r),sendBusName:Bu(s)||df,receiveBusName:Bu(i)||df,initValue:1===a?Ru(o):0,outputOnLoad:!!a}},build:mf},vf={translateArgs:function(e){var n=bt(e.args,5),t=n[0],r=n[1],a=n[2],o=n[3],i=n[4];return{minValue:0,maxValue:Ru(t),sendBusName:Bu(i)||df,receiveBusName:Bu(o)||df,initValue:1===r?Ru(a):0,outputOnLoad:!!r}},build:mf},bf=function(e){var n=e.prepareStoreValue,t=e.prepareStoreValueBang;return{messages:function(e){var n=e.globs,t=e.state;return{0:"\n                ".concat(t.funcMessageReceiver,"(").concat(n.m,")\n                return\n            ")}},declare:function(e){var r=e.node,a=e.state,o=e.snds,i=e.node,s=i.id,c=i.args,u=e.compilation.codeVariableNames.nodes,l=e.macros,f=l.Var,d=l.Func;return"\n            let ".concat(f(a.value,"Float")," = ").concat(r.args.initValue,"\n\n            ").concat(pi(n,(function(){return"function ".concat(a.funcPrepareStoreValue," ").concat(d([f("value","Float")],"Float")," {\n                    return ").concat(n(r.args),"\n                }")})),"\n\n            ").concat(pi(t,(function(){return"function ".concat(a.funcPrepareStoreValueBang," ").concat(d([f("value","Float")],"Float")," {\n                    return ").concat(t(r.args),"\n                }")})),"\n\n            function ").concat(a.funcMessageReceiver," ").concat(d([f("m","Message")],"void")," {\n                if (msg_isMatching(m, [MSG_FLOAT_TOKEN])) {\n                    ").concat(n?"".concat(a.value," = ").concat(a.funcPrepareStoreValue,"(msg_readFloatToken(m, 0))"):"".concat(a.value," = msg_readFloatToken(m, 0)"),"\n                    const ").concat(f("outMessage","Message")," = msg_floats([").concat(a.value,"])\n                    ").concat(u[s].snds.$0,"(outMessage)\n                    if (").concat(a.sendBusName,' !== "').concat(df,'") {\n                        msgBusPublish(').concat(a.sendBusName,", outMessage)\n                    }\n\n                } else if (msg_isBang(m)) {\n                    ").concat(pi(t,(function(){return"".concat(a.value," = ").concat(a.funcPrepareStoreValueBang,"(").concat(a.value,")")})),"\n                    const ").concat(f("outMessage","Message")," = msg_floats([").concat(a.value,"])\n                    ").concat(u[s].snds.$0,"(outMessage)\n                    if (").concat(a.sendBusName,' !== "').concat(df,'") {\n                        msgBusPublish(').concat(a.sendBusName,", outMessage)\n                    }\n\n                } else if (\n                    msg_isMatching(m, [MSG_STRING_TOKEN, MSG_FLOAT_TOKEN]) \n                    && msg_readStringToken(m, 0) === 'set'\n                ) {\n                    ").concat(n?"".concat(a.value," = ").concat(a.funcPrepareStoreValue,"(msg_readFloatToken(m, 1))"):"".concat(a.value," = msg_readFloatToken(m, 1)"),"\n                }\n            \n                ").concat(gf(e),"\n            }\n\n            ").concat(hf(e),"\n\n            ").concat(pi(c.outputOnLoad,"commons_waitFrame(0, () => ".concat(o.$0,"(msg_floats([").concat(a.value,"])))")),"\n        ")},stateVariables:pf,sharedCode:[$u,Yl]}},Sf={tgl:bf({prepareStoreValueBang:function(e){var n=e.maxValue;return"value === 0 ? ".concat(n,": 0")}}),nbx:bf({prepareStoreValue:function(e){var n=e.minValue,t=e.maxValue;return"Math.min(Math.max(value,".concat(n,"),").concat(t,")")}}),hsl:bf({}),hradio:bf({})};Sf.vsl=Sf.hsl,Sf.vradio=Sf.hradio;var wf,_f,kf,xf,If,Ef,Of,Tf,Cf,Af,Ff,Pf,Mf={tgl:vf,nbx:yf,hsl:yf,vsl:yf,hradio:vf,vradio:vf},Nf={translateArgs:function(e){var n=bt(e.args,3),t=n[0],r=n[1],a=n[2];return{outputOnLoad:!!t,sendBusName:Bu(a)||df,receiveBusName:Bu(r)||df}},build:mf},Lf={declare:function(e){var n=e.state,t=e.snds,r=e.node,a=r.id,o=r.args,i=e.macros,s=i.Var,c=i.Func,u=e.compilation.codeVariableNames.nodes;return"\n        function ".concat(n.funcMessageReceiver," ").concat(c([s("m","Message")],"void")," {\n            ").concat(gf(e),"\n            else {\n                const ").concat(s("outMessage","Message")," = msg_bang()\n                ").concat(u[a].snds.$0,"(outMessage)\n                if (").concat(n.sendBusName,' !== "').concat(df,'") {\n                    msgBusPublish(').concat(n.sendBusName,", outMessage)\n                }\n                return\n            }\n        }\n\n        ").concat(hf(e),"\n\n        ").concat(pi(o.outputOnLoad,"commons_waitFrame(0, () => ".concat(t.$0,"(msg_bang()))")),"\n    ")},messages:function(e){var n=e.state,t=e.globs;return{0:"\n            ".concat(n.funcMessageReceiver,"(").concat(t.m,")\n            return\n        ")}},stateVariables:pf,sharedCode:[$u,Yl]},Rf={translateArgs:function(e){var n=bt(e.args,4),t=(n[0],n[1],n[2]),r=n[3];return{sendBusName:Bu(r)||df,receiveBusName:Bu(t)||df}},build:mf},Df=function(e){var n=e.initValue,t=e.messageMatch;return{declare:function(e){var r=e.state,a=e.globs,o=e.macros,i=o.Var,s=o.Func,c=e.node.id,u=e.compilation.codeVariableNames.nodes;return"\n            let ".concat(i(r.value,"Message")," = ").concat(n,"\n            \n            function ").concat(r.funcMessageReceiver," ").concat(s([i("m","Message")],"void")," {\n                ").concat(gf(e),"\n                else if (msg_isBang(m)) {\n                    ").concat(u[c].snds.$0,"(").concat(r.value,")\n                    if (").concat(r.sendBusName,' !== "').concat(df,'") {\n                        msgBusPublish(').concat(r.sendBusName,", ").concat(r.value,")\n                    }\n                    return\n                \n                } else if (\n                    msg_getTokenType(").concat(a.m,", 0) === MSG_STRING_TOKEN\n                    && msg_readStringToken(").concat(a.m,", 0) === 'set'\n                ) {\n                    const ").concat(i("setMessage","Message")," = msg_slice(").concat(a.m,", 1, msg_getLength(").concat(a.m,"))\n                    ").concat(pi(t,(function(){return"if (".concat(t("setMessage"),") {")}))," \n                            ").concat(r.value," = setMessage    \n                            return\n                    ").concat(pi(t,(function(){return"}"})),"\n\n                } ").concat(t?"else if (".concat(t("m"),") {"):"else {","\n                \n                    ").concat(r.value," = m\n                    ").concat(u[c].snds.$0,"(").concat(r.value,")\n                    if (").concat(r.sendBusName,' !== "').concat(df,'") {\n                        msgBusPublish(').concat(r.sendBusName,", ").concat(r.value,")\n                    }\n                    return\n\n                }\n                throw new Error('unsupported message ' + msg_display(m))\n            }\n\n            ").concat(hf(e),"\n        ")},messages:function(e){var n=e.state,t=e.globs;return{0:"\n                ".concat(n.funcMessageReceiver,"(").concat(t.m,")\n                return\n            ")}},stateVariables:pf,sharedCode:[$u,Yl,Ku]}},jf={floatatom:Rf,symbolatom:Rf,listbox:Rf},Bf={floatatom:Df({initValue:"msg_floats([0])",messageMatch:function(e){return"msg_isMatching(".concat(e,", [MSG_FLOAT_TOKEN])")}}),symbolatom:Df({initValue:"msg_strings([''])",messageMatch:function(e){return"msg_isMatching(".concat(e,", [MSG_STRING_TOKEN])")}}),listbox:Df({initValue:"msg_bang()"})},zf={declare:function(e){var n=e.snds;return"commons_waitFrame(0, () => ".concat(n.$0,"(msg_bang()))")},stateVariables:{},sharedCode:[$u]},Uf=function(e){var n=e.macros,t=n.Func,r=n.Var;return"\n    function roundFloatAsPdInt ".concat(t([r("value","Float")],"Float")," {\n        return value > 0 ? Math.floor(value): Math.ceil(value)\n    }\n")},Vf={value:1,funcSetValue:1},Wf={translateArgs:function(e){return{value:ju(e.args[0])||0}},build:function(){return{inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0}}},Gf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"value";return function(n){var t=n.node.args,r=n.state,a=n.macros,o=a.Var,i=a.Func;return"\n        let ".concat(o(r.value,"Float")," = 0\n\n        const ").concat(r.funcSetValue," = ").concat(i([o("value","Float")],"void")," => { ").concat(r.value," = ").concat(e," }\n        \n        ").concat(r.funcSetValue,"(").concat(t.value,")\n    ")}},$f=function(e){var n=e.snds,t=e.globs,r=e.state;return{0:"\n    if (msg_isMatching(".concat(t.m,", [MSG_FLOAT_TOKEN])) {\n        ").concat(r.funcSetValue,"(msg_readFloatToken(").concat(t.m,", 0))\n        ").concat(n.$0,"(msg_floats([").concat(r.value,"]))\n        return \n\n    } else if (msg_isBang(").concat(t.m,")) {\n        ").concat(n.$0,"(msg_floats([").concat(r.value,"]))\n        return\n        \n    }\n    "),1:Yu(t.m,r.funcSetValue)}},Kf={float:Wf,f:{aliasTo:"float"},int:Wf,i:{aliasTo:"int"}},qf={float:{declare:Gf(),messages:$f,stateVariables:Vf,sharedCode:[$u]},int:{declare:Gf("roundFloatAsPdInt(value)"),messages:$f,stateVariables:Vf,sharedCode:[Uf,$u]}},Hf={},Xf={translateArgs:function(){return{}},build:function(){return{inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}}}},Yf=function(e){var n=e.operationCode,t=e.sharedCode;return{messages:function(e){var t=e.globs,r=e.snds,a=e.macros.Var;return{0:"\n        if (msg_isMatching(".concat(t.m,", [MSG_FLOAT_TOKEN])) {\n            const ").concat(a("value","Float")," = msg_readFloatToken(").concat(t.m,", 0)\n            ").concat(r.$0,"(msg_floats([").concat(n,"]))\n            return\n        }\n        ")}},stateVariables:Hf,sharedCode:void 0===t?[]:t}},Jf={abs:Yf({operationCode:"Math.abs(value)"}),wrap:Yf({operationCode:"(1 + (value % 1)) % 1"}),cos:Yf({operationCode:"Math.cos(value)"}),sqrt:Yf({operationCode:"value >= 0 ? Math.pow(value, 0.5): 0"}),mtof:Yf({operationCode:"mtof(value)",sharedCode:[wl]}),ftom:Yf({operationCode:"ftom(value)",sharedCode:[_l]}),rmstodb:Yf({operationCode:"value <= 0 ? 0 : 20 * Math.log(value) / Math.LN10 + 100"}),dbtorms:Yf({operationCode:"value <= 0 ? 0 : Math.exp(Math.LN10 * (value - 100) / 20)"}),powtodb:Yf({operationCode:"value <= 0 ? 0 : 10 * Math.log(value) / Math.LN10 + 100"}),dbtopow:Yf({operationCode:"value <= 0 ? 0 : Math.exp(Math.LN10 * (value - 100) / 10)"}),vu:Yf({operationCode:"value"})},Qf={abs:Xf,cos:Xf,wrap:Xf,sqrt:Xf,mtof:Xf,ftom:Xf,rmstodb:Xf,dbtorms:Xf,powtodb:Xf,dbtopow:Xf,vu:Xf},Zf={leftOp:1,rightOp:1},ed=function(e){return{translateArgs:function(n){var t=ju(n.args[0]);return{value:void 0!==t?t:e}},build:function(){return{inlets:{"0_message":{type:"message",id:"0_message"},0:{type:"signal",id:"0"},"1_message":{type:"message",id:"1_message"},1:{type:"signal",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}},rerouteMessageConnection:function(e){return"0"===e?"0_message":"1"===e?"1_message":void 0}}},nd=function(e){var n=e.generateOperation,t=e.sharedCode;return{declare:function(e){var n=e.node,t=e.state,r=e.macros.Var;return"\n        ".concat(pi(td(n),"\n                let ".concat(r(t.leftOp,"Float")," = 0\n            ")),"\n        ").concat(pi(rd(n),"\n                let ".concat(r(t.rightOp,"Float")," = ").concat(n.args.value,"\n            ")),"\n    ")},loop:function(e){var t=e.node,r=e.ins,a=e.outs,o=e.state;return"".concat(a.$0," = ").concat(n(td(t)?o.leftOp:r.$0,rd(t)?o.rightOp:r.$1))},messages:function(e){var n=e.node,t=e.state,r=e.globs;return{"0_message":pi(td(n),Xu(r.m,t.leftOp)),"1_message":pi(rd(n),Xu(r.m,t.rightOp))}},stateVariables:Zf,sharedCode:void 0===t?[]:t}},td=function(e){return!e.sources[0]||!e.sources[0].length},rd=function(e){return!e.sources[1]||!e.sources[1].length},ad={"+~":nd({generateOperation:function(e,n){return"".concat(e," + ").concat(n)}}),"-~":nd({generateOperation:function(e,n){return"".concat(e," - ").concat(n)}}),"*~":nd({generateOperation:function(e,n){return"".concat(e," * ").concat(n)}}),"/~":nd({generateOperation:function(e,n){return"".concat(n," !== 0 ? ").concat(e," / ").concat(n," : 0")}}),"min~":nd({generateOperation:function(e,n){return"Math.min(".concat(e,", ").concat(n,")")}}),"max~":nd({generateOperation:function(e,n){return"Math.max(".concat(e,", ").concat(n,")")}}),"pow~":nd({generateOperation:function(e,n){return"pow(".concat(e,", ").concat(n,")")},sharedCode:[kl]})},od={"+~":ed(0),"-~":ed(0),"*~":ed(0),"/~":ed(0),"min~":ed(0),"max~":ed(0),"pow~":ed(0)},id={translateArgs:function(e){return{channelCount:Ru(e.args[0])}},build:function(e){return{inlets:fi(ui(e.channelCount),(function(e){return["".concat(e),{type:"signal",id:"".concat(e)}]})),outlets:{0:{type:"signal",id:"0"}}}}},sd={loop:function(e){var n=e.node,t=e.ins,r=e.outs;return"\n    ".concat(r.$0," = ").concat(Object.keys(n.inlets).map((function(e){return t[e]})).join(" + "),"\n")},stateVariables:{}},cd={loop:function(e){var n=e.outs;return"\n    ".concat(n.$0," = Math.random() * 2 - 1\n")},messages:function(e){var n=e.globs;return{0:"\n    if (\n        msg_isMatching(".concat(n.m,", [MSG_STRING_TOKEN, MSG_FLOAT_TOKEN])\n        && msg_readStringToken(").concat(n.m,", 0) === 'seed'\n    ) {\n        console.log('WARNING : seed not implemented yet for [noise~]')\n        return\n    }\n    ")}},stateVariables:{}},ud=function(e){var n=e.macros,t=n.Var,r=n.Func;return"\n    const ".concat(t("DELAY_BUFFERS","Map<string, buf_SoundBuffer>")," = new Map()\n    const ").concat(t("DELAY_BUFFERS_SKEDULER","Skeduler")," = sked_create(true)\n    const ").concat(t("DELAY_BUFFERS_NULL","buf_SoundBuffer")," = buf_create(1)\n\n    function DELAY_BUFFERS_set ").concat(r([t("delayName","string"),t("buffer","buf_SoundBuffer")],"void")," {\n        DELAY_BUFFERS.set(delayName, buffer)\n        sked_emit(DELAY_BUFFERS_SKEDULER, delayName)\n    }\n\n    function DELAY_BUFFERS_get ").concat(r([t("delayName","string"),t("callback","(event: string) => void")],"void")," {\n        sked_wait(DELAY_BUFFERS_SKEDULER, delayName, callback)\n    }\n\n    function DELAY_BUFFERS_delete ").concat(r([t("delayName","string")],"void")," {\n        DELAY_BUFFERS.delete(delayName)\n    }\n")},ld={delayName:1,buffer:1,delaySamp:1,delayMsec:1,funcSetDelayName:1,funcSetDelayMsec:1},fd={translateArgs:function(e){var n=e.args;return{delayName:Bu(n[0])||"",initDelayMsec:ju(n[1])||0}},build:function(){return{inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"}},outlets:{0:{type:"signal",id:"0"}}}},rerouteMessageConnection:function(e){if("0"===e)return"0_message"}},dd=function(){var e=function(e){var n=e.outs,t=e.state;return"\n        ".concat(n.$0," = buf_readSample(").concat(t.buffer,", ").concat(t.delaySamp,")\n    ")},n=function(e){var n=e.globs,t=e.outs,r=e.ins,a=e.state;return"\n        ".concat(t.$0," = buf_readSample(").concat(a.buffer,", toInt(Math.round(\n            Math.min(\n                Math.max(computeUnitInSamples(").concat(n.sampleRate,", ").concat(r.$0,', "msec"), 0), \n                toFloat(').concat(a.buffer,".length - 1)\n            )\n        )))\n    ")};return{loop:function(t){return pd(t.node)?n(t):e(t)},stateVariables:ld,messages:function(e){var n=e.state,t=e.globs;return{"0_message":Yu(t.m,n.funcSetDelayMsec)}},declare:function(e){var n=e.state,t=e.globs,r=e.node.args,a=e.macros,o=a.Var,i=a.Func;return"\n        let ".concat(o(n.delayName,"string"),' = ""\n        let ').concat(o(n.buffer,"buf_SoundBuffer")," = DELAY_BUFFERS_NULL\n        let ").concat(o(n.delaySamp,"Int")," = 0\n        let ").concat(o(n.delayMsec,"Float")," = 0\n\n        const ").concat(n.funcSetDelayMsec," = ").concat(i([o("delayMsec","Float")],"void")," => {\n            ").concat(n.delayMsec," = delayMsec\n            ").concat(n.delaySamp," = toInt(Math.round(\n                Math.min(\n                    Math.max(computeUnitInSamples(").concat(t.sampleRate,', delayMsec, "msec"), 0), \n                    toFloat(').concat(n.buffer,".length - 1)\n                )\n            ))\n        }\n\n        const ").concat(n.funcSetDelayName," = ").concat(i([o("delayName","string")],"void")," => {\n            if (").concat(n.delayName,".length) {\n                ").concat(n.buffer," = DELAY_BUFFERS_NULL\n            }\n            ").concat(n.delayName," = delayName\n            if (").concat(n.delayName,".length) {\n                DELAY_BUFFERS_get(").concat(n.delayName,", () => { \n                    ").concat(n.buffer," = DELAY_BUFFERS.get(").concat(n.delayName,")\n                    ").concat(n.funcSetDelayMsec,"(").concat(n.delayMsec,')\n                })\n            }\n        }\n\n        commons_waitEngineConfigure(() => {\n            if ("').concat(r.delayName,'".length) {\n                ').concat(n.funcSetDelayName,'("').concat(r.delayName,'")\n            }\n            ').concat(n.funcSetDelayMsec,"(").concat(r.initDelayMsec,")\n        })\n    ")},sharedCode:[ml,ud]}},pd=function(e){return e.sources[0]&&e.sources[0].length},md={"delread~":fd,"delread4~":fd},hd={"delread~":dd(),"delread4~":dd()},gd={translateArgs:function(e){var n=e.args;return{delayName:Bu(n[0])||"",maxDurationMsec:ju(n[1])||100}},build:function(){return{inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"}},outlets:{},isPullingSignal:!0}},rerouteMessageConnection:function(e){if("0"===e)return"0_message"}},yd={loop:function(e){var n=e.ins,t=e.state;return"\n    buf_writeSample(".concat(t.buffer,", ").concat(n.$0,")\n")},stateVariables:{delayName:1,buffer:1,funcSetDelayName:1},messages:function(e){var n=e.state,t=e.globs;return{"0_message":"\n        if (msg_isAction(".concat(t.m,", 'clear')) {\n            buf_clear(").concat(n.buffer,")\n            return\n        }\n    ")}},declare:function(e){var n=e.state,t=e.globs,r=e.node.args,a=e.macros,o=a.Var,i=a.Func;return"\n    let ".concat(o(n.delayName,"string"),' = ""\n    let ').concat(o(n.buffer,"buf_SoundBuffer")," = DELAY_BUFFERS_NULL\n\n    const ").concat(n.funcSetDelayName," = ").concat(i([o("delayName","string")],"void")," => {\n        if (").concat(n.delayName,".length) {\n            DELAY_BUFFERS_delete(").concat(n.delayName,")\n        }\n        ").concat(n.delayName," = delayName\n        if (").concat(n.delayName,".length) {\n            DELAY_BUFFERS_set(").concat(n.delayName,", ").concat(n.buffer,")\n        }\n    }\n\n    commons_waitEngineConfigure(() => {\n        ").concat(n.buffer," = buf_create(\n            toInt(computeUnitInSamples(\n                ").concat(t.sampleRate,", \n                toFloat(").concat(r.maxDurationMsec,'), \n                "msec"\n            ))\n        )\n        if ("').concat(r.delayName,'".length) {\n            ').concat(n.funcSetDelayName,'("').concat(r.delayName,'")\n        }\n    })\n')},sharedCode:[ml,ud,qu]},vd={lastInput:1,lastOutput:1,coeff:1,funcSetCoeff:1},bd={translateArgs:function(e){var n=e.args;return{initValue:ju(n[0])||0}},build:function(){return{inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"},"1_message":{type:"message",id:"1_message"}},outlets:{0:{type:"signal",id:"0"}}}},rerouteMessageConnection:function(e){if("1"===e)return"1_message"}},Sd=function(e){var n=e.generateOperation,t=e.computeCoeff,r=void 0===t?function(){return"value"}:t,a=function(e){var n=e.state,t=e.macros.Var;return"\n        let ".concat(t(n.lastOutput,"Float")," = 0\n        let ").concat(t(n.lastInput,"Float")," = 0\n    ")},o=function(e){var n=e.state,t=e.globs,a=e.node.args,o=e.macros,i=o.Var,s=o.Func;return"\n        let ".concat(i(n.lastOutput,"Float")," = 0\n        let ").concat(i(n.lastInput,"Float")," = 0\n        let ").concat(i(n.coeff,"Float")," = 0\n\n        function ").concat(n.funcSetCoeff," ").concat(s([i("value","Float")],"void")," {\n            ").concat(n.coeff," = ").concat(r(t.sampleRate),"\n        }\n\n        commons_waitEngineConfigure(() => {\n            ").concat(n.funcSetCoeff,"(").concat(a.initValue,")\n        })\n    ")},i=function(e){var t=e.ins,r=e.state,a=e.outs;return"\n        ".concat(r.lastOutput," = ").concat(a.$0," = ").concat(n(t.$0,t.$1,r.lastOutput,r.lastInput),"\n        ").concat(r.lastInput," = ").concat(t.$0,"\n    ")},s=function(e){var t=e.ins,r=e.state,a=e.outs;return"\n        ".concat(r.lastOutput," = ").concat(a.$0," = ").concat(n(t.$0,r.coeff,r.lastOutput,r.lastInput),"\n        ").concat(r.lastInput," = ").concat(t.$0,"\n    ")};return{loop:function(e){return wd(e.node)?i(e):s(e)},stateVariables:vd,messages:function(e){var n=e.globs,t=e.state;return{"1_message":Yu(n.m,t.funcSetCoeff)}},declare:function(e){return wd(e.node)?a(e):o(e)}}},wd=function(e){return e.sources[1]&&e.sources[1].length},_d={"rpole~":bd,"rzero~":bd,"rzero_rev~":bd},kd={"rpole~":Sd({generateOperation:function(e,n,t){return"".concat(e," + ").concat(n," * ").concat(t)}}),"rzero~":Sd({generateOperation:function(e,n,t,r){return"".concat(e," - ").concat(n," * ").concat(r)}}),"rzero_rev~":Sd({generateOperation:function(e,n,t,r){return"".concat(r," - ").concat(n," * ").concat(e)}})},xd={inputIm:1,coeffRe:1,coeffIm:1,lastInputRe:1,lastInputIm:1,lastOutputRe:1,lastOutputIm:1},Id={translateArgs:function(e){var n=e.args;return{initCoeffRe:ju(n[0])||0,initCoeffIm:ju(n[1])||0}},build:function(){return{inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"},1:{type:"signal",id:"1"},"1_message":{type:"message",id:"1_message"},2:{type:"signal",id:"2"},"2_message":{type:"message",id:"2_message"},3:{type:"signal",id:"3"},"3_message":{type:"message",id:"3_message"}},outlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}}}},rerouteMessageConnection:function(e){return"0"===e?"0_message":"1"===e?"1_message":"2"===e?"2_message":"3"===e?"3_message":void 0}},Ed=function(e){var n=e.generateOperationRe,t=e.generateOperationIm;return{loop:function(e){var r=e.node,a=e.ins,o=e.state,i=e.outs;return"\n        ".concat(i.$0," = ").concat(n(a.$0,Od("1",r)?a.$1:o.inputIm,Od("2",r)?a.$2:o.coeffRe,Od("3",r)?a.$3:o.coeffIm,o.lastOutputRe,o.lastOutputIm,o.lastInputRe,o.lastInputIm),"\n        ").concat(o.lastOutputIm," = ").concat(i.$1," = ").concat(t(a.$0,Od("1",r)?a.$1:o.inputIm,Od("2",r)?a.$2:o.coeffRe,Od("3",r)?a.$3:o.coeffIm,o.lastOutputRe,o.lastOutputIm,o.lastInputRe,o.lastInputIm),"\n        ").concat(o.lastOutputRe," = ").concat(i.$0,"\n        ").concat(o.lastInputRe," = ").concat(a.$0,"\n        ").concat(o.lastInputIm," = ").concat(Od("1",r)?a.$1:o.inputIm,"\n    ")},stateVariables:xd,messages:function(e){var n=e.globs,t=e.state;return{"1_message":Xu(n.m,t.inputIm),"2_message":Xu(n.m,t.coeffRe),"3_message":Xu(n.m,t.coeffIm)}},declare:function(e){var n=e.state,t=e.node.args,r=e.macros.Var;return"\n        let ".concat(r(n.inputIm,"Float")," = 0\n        let ").concat(r(n.coeffRe,"Float")," = ").concat(t.initCoeffRe,"\n        let ").concat(r(n.coeffIm,"Float")," = ").concat(t.initCoeffIm,"\n        let ").concat(r(n.lastOutputRe,"Float")," = 0\n        let ").concat(r(n.lastOutputIm,"Float")," = 0\n        let ").concat(r(n.lastInputRe,"Float")," = 0\n        let ").concat(r(n.lastInputIm,"Float")," = 0\n    ")}}},Od=function(e,n){return n.sources[e]&&n.sources[e].length},Td={"cpole~":Id,"czero~":Id},Cd={"cpole~":Ed({generateOperationRe:function(e,n,t,r,a,o){return"".concat(e," + ").concat(a," * ").concat(t," - ").concat(o," * ").concat(r)},generateOperationIm:function(e,n,t,r,a,o){return"".concat(n," + ").concat(a," * ").concat(r," + ").concat(o," * ").concat(t)}}),"czero~":Ed({generateOperationRe:function(e,n,t,r,a,o,i,s){return"".concat(e," - ").concat(i," * ").concat(t," + ").concat(s," * ").concat(r)},generateOperationIm:function(e,n,t,r,a,o,i,s){return"".concat(n," - ").concat(i," * ").concat(r," - ").concat(s," * ").concat(t)}})},Ad={translateArgs:function(e){var n=e.args;return{initValue:ju(n[0])||0}},build:function(){return{inlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"},"1_message":{type:"message",id:"1_message"}},outlets:{0:{type:"signal",id:"0"}}}},rerouteMessageConnection:function(e){if("1"===e)return"1_message"}},Fd=function(e){var n=e.state,t=e.macros.Var;return"\n    let ".concat(t(n.previous,"Float")," = 0\n    let ").concat(t(n.current,"Float")," = 0\n")},Pd=function(e){var n=e.state,t=e.globs,r=e.node.args,a=e.macros,o=a.Var,i=a.Func;return"\n    let ".concat(o(n.previous,"Float")," = 0\n    let ").concat(o(n.current,"Float")," = 0\n    let ").concat(o(n.coeff,"Float")," = 0\n    let ").concat(o(n.normal,"Float")," = 0\n\n    function ").concat(n.funcSetCoeff," ").concat(i([o("freq","Float")],"void")," {\n        ").concat(n.coeff," = Math.min(Math.max(1 - freq * (2 * Math.PI) / ").concat(t.sampleRate,", 0), 1)\n        ").concat(n.normal," = 0.5 * (1 + ").concat(n.coeff,")\n    }\n\n    commons_waitEngineConfigure(() => {\n        ").concat(n.funcSetCoeff,"(").concat(r.initValue,")\n    })\n")},Md=function(e){var n=e.ins,t=e.state,r=e.outs;return"\n    ".concat(t.funcSetCoeff,"(").concat(n.$1,")\n    ").concat(t.current," = ").concat(n.$0," + ").concat(t.coeff," * ").concat(t.previous,"\n    ").concat(r.$0," = ").concat(t.normal," * (").concat(t.current," - ").concat(t.previous,")\n    ").concat(t.previous," = ").concat(t.current,"\n")},Nd=function(e){var n=e.ins,t=e.state,r=e.outs;return"\n    ".concat(t.current," = ").concat(n.$0," + ").concat(t.coeff," * ").concat(t.previous,"\n    ").concat(r.$0," = ").concat(t.normal," * (").concat(t.current," - ").concat(t.previous,")\n    ").concat(t.previous," = ").concat(t.current,"\n")},Ld={loop:function(e){return Rd(e.node)?Md(e):Nd(e)},stateVariables:{current:1,previous:1,coeff:1,normal:1,funcSetCoeff:1},messages:function(e){var n=e.globs,t=e.state;return{"1_message":Yu(n.m,t.funcSetCoeff)}},declare:function(e){return Rd(e.node)?Fd(e):Pd(e)}},Rd=function(e){return e.sources[1]&&e.sources[1].length},Dd={translateArgs:function(e){var n=e.args;return{frequency:ju(n[0])||0}},build:function(){return{inlets:{0:{type:"signal",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"signal",id:"0"}}}}},jd={loop:function(e){var n=e.ins,t=e.state,r=e.outs;return"\n    ".concat(t.previous," = ").concat(r.$0," = ").concat(t.coeff," * ").concat(n.$0," + (1 - ").concat(t.coeff,") * ").concat(t.previous,"\n")},stateVariables:{coeff:1,previous:1,funcSetFreq:1},messages:function(e){var n=e.globs,t=e.state;return{1:Yu(n.m,t.funcSetFreq)}},declare:function(e){var n=e.state,t=e.globs,r=e.node.args,a=e.macros,o=a.Var,i=a.Func;return"\n    let ".concat(o(n.previous,"Float")," = 0\n    let ").concat(o(n.coeff,"Float")," = 0\n\n    function ").concat(n.funcSetFreq," ").concat(i([o("freq","Float")],"void")," {\n        ").concat(n.coeff," = Math.max(Math.min(freq * 2 * Math.PI / ").concat(t.sampleRate,", 1), 0)\n    }\n\n    commons_waitEngineConfigure(() => {\n        ").concat(n.funcSetFreq,"(").concat(r.frequency,")\n    })\n")}},Bd={translateArgs:function(e){var n=e.args;return{frequency:ju(n[0])||0,Q:ju(n[1])||0}},build:function(){return{inlets:{0:{type:"signal",id:"0"},"0_message":{type:"message",id:"0_message"},1:{type:"signal",id:"1"},"1_message":{type:"message",id:"1_message"},2:{type:"message",id:"2"}},outlets:{0:{type:"signal",id:"0"},1:{type:"signal",id:"1"}}}},rerouteMessageConnection:function(e){return"0"===e?"0_message":"1"===e?"1_message":void 0}},zd=function(e){return e.sources[0]&&e.sources[0].length},Ud=function(e){return e.sources[1]&&e.sources[1].length},Vd={loop:function(e){var n=e.node,t=e.ins,r=e.outs,a=e.state;return"\n    ".concat(pi(Ud(n),"".concat(a.funcSetFrequency,"(").concat(t.$1,")")),"\n    ").concat(a.y," = ").concat(zd(n)?t.$0:a.inputValue," + ").concat(a.coef1," * ").concat(a.ym1," + ").concat(a.coef2," * ").concat(a.ym2,"\n    ").concat(r.$1," = ").concat(r.$0," = ").concat(a.gain," * ").concat(a.y,"\n    ").concat(a.ym2," = ").concat(a.ym1,"\n    ").concat(a.ym1," = ").concat(a.y,"\n")},stateVariables:{inputValue:1,frequency:1,Q:1,y:1,ym1:1,ym2:1,coef1:1,coef2:1,gain:1,funcSetQ:1,funcSetFrequency:1,funcUpdateCoefs:1,funcClear:1},messages:function(e){var n=e.state,t=e.globs;return{"0_message":Xu(t.m,n.inputValue),"1_message":Yu(t.m,n.funcSetFrequency),2:Yu(t.m,n.funcSetQ)}},declare:function(e){var n=e.state,t=e.globs,r=e.node.args,a=e.macros,o=a.Var,i=a.Func;return"\n    let ".concat(o(n.inputValue,"Float")," = 0\n    let ").concat(o(n.frequency,"Float")," = ").concat(r.frequency,"\n    let ").concat(o(n.Q,"Float")," = ").concat(r.Q,"\n    let ").concat(o(n.coef1,"Float")," = 0\n    let ").concat(o(n.coef2,"Float")," = 0\n    let ").concat(o(n.gain,"Float")," = 0\n    let ").concat(o(n.y,"Float")," = 0\n    let ").concat(o(n.ym1,"Float")," = 0\n    let ").concat(o(n.ym2,"Float")," = 0\n\n    function ").concat(n.funcUpdateCoefs," ").concat(i([],"void")," {\n        let ").concat(o("omega","Float")," = ").concat(n.frequency," * (2.0 * Math.PI) / ").concat(t.sampleRate,";\n        let ").concat(o("oneminusr","Float")," = ").concat(n.Q," < 0.001 ? 1.0 : Math.min(omega / ").concat(n.Q,", 1)\n        let ").concat(o("r","Float")," = 1.0 - oneminusr\n        let ").concat(o("sigbp_qcos","Float")," = (omega >= -(0.5 * Math.PI) && omega <= 0.5 * Math.PI) ? \n            (((Math.pow(omega, 6) * (-1.0 / 720.0) + Math.pow(omega, 4) * (1.0 / 24)) - Math.pow(omega, 2) * 0.5) + 1)\n            : 0\n\n        ").concat(n.coef1," = 2.0 * sigbp_qcos * r\n        ").concat(n.coef2," = - r * r\n        ").concat(n.gain," = 2 * oneminusr * (oneminusr + r * omega)\n    }\n\n    function ").concat(n.funcSetFrequency," ").concat(i([o("frequency","Float")],"void")," {\n        ").concat(n.frequency," = (frequency < 0.001) ? 10: frequency\n        ").concat(n.funcUpdateCoefs,"()\n    }\n\n    function ").concat(n.funcSetQ," ").concat(i([o("Q","Float")],"void")," {\n        ").concat(n.Q," = Math.max(Q, 0)\n        ").concat(n.funcUpdateCoefs,"()\n    }\n\n    function ").concat(n.funcClear," ").concat(i([],"void")," {\n        ").concat(n.ym1," = 0\n        ").concat(n.ym2," = 0\n    }\n\n    commons_waitEngineConfigure(() => {\n        ").concat(n.funcUpdateCoefs,"()\n    })\n")}},Wd={declare:function(e){var n=e.state,t=e.node,r=e.macros,a=r.Var,o=r.Func,i=t.args.templates.map((function(n,t){return Gd(e,n,t)}));return si(wf||(wf=s(["\n        let "," = []\n        let "," = []\n        ","\n        \n        const "," = [\n            ","\n        ]\n    "])),a(n.outTemplates,"Array<MessageTemplate>"),a(n.outMessages,"Array<Message>"),i.map((function(e){var n=e.inMessageUsed,t=e.outMessageCode;return pi(!n,t)})),a(n.messageTransferFunctions,"Array<(m: Message) => Message>"),i.map((function(e,t){var r=e.inMessageUsed,i=e.outMessageCode;return"\n                ".concat(o([a("inMessage","Message")],"Message")," => {\n                    ").concat(pi(r,i),"\n                    return ").concat(n.outMessages,"[").concat(t,"]\n                }")})).join(","))},messages:function(e){var n=e.snds,t=e.state,r=e.globs,a=e.macros,o=a.Var,i=a.Func;return{0:"\n        if (\n            msg_isStringToken(".concat(r.m,", 0) \n            && msg_readStringToken(").concat(r.m,", 0) === 'set'\n        ) {\n            ").concat(t.outTemplates," = [[]]\n            for (let ").concat(o("i","Int")," = 1; i < msg_getLength(").concat(r.m,"); i++) {\n                if (msg_isFloatToken(").concat(r.m,", i)) {\n                    ").concat(t.outTemplates,"[0].push(MSG_FLOAT_TOKEN)\n                } else {\n                    ").concat(t.outTemplates,"[0].push(MSG_STRING_TOKEN)\n                    ").concat(t.outTemplates,"[0].push(msg_readStringToken(").concat(r.m,", i).length)\n                }\n            }\n\n            const ").concat(o("message","Message")," = msg_create(").concat(t.outTemplates,"[0])\n            for (let ").concat(o("i","Int")," = 1; i < msg_getLength(").concat(r.m,"); i++) {\n                if (msg_isFloatToken(").concat(r.m,", i)) {\n                    msg_writeFloatToken(\n                        message, i - 1, msg_readFloatToken(").concat(r.m,", i)\n                    )\n                } else {\n                    msg_writeStringToken(\n                        message, i - 1, msg_readStringToken(").concat(r.m,", i)\n                    )\n                }\n            }\n            ").concat(t.outMessages,"[0] = message\n            ").concat(t.messageTransferFunctions,".splice(0, ").concat(t.messageTransferFunctions,".length - 1)\n            ").concat(t.messageTransferFunctions,"[0] = ").concat(i([o("m","Message")],"Message")," => { return ").concat(t.outMessages,"[0] }\n            return\n\n        } else {\n            for (let ").concat(o("i","Int")," = 0; i < ").concat(t.messageTransferFunctions,".length; i++) {\n                ").concat(n.$0,"(").concat(t.messageTransferFunctions,"[i](").concat(r.m,"))\n            }\n            return\n        }\n    ")}},stateVariables:{outTemplates:1,outMessages:1,messageTransferFunctions:1}},Gd=function(e,n,t){var r=e.state,a=e.macros.Var,o="".concat(r.outTemplates,"[").concat(t,"]"),i="".concat(r.outMessages,"[").concat(t,"]"),c=$d(n),u="",l="",f=0;c.forEach((function(e,n){if("noop"===e.type){var t=e.inIndex;u+="\n                ".concat(o,".push(msg_getTokenType(inMessage, ").concat(t,"))\n                if (msg_isStringToken(inMessage, ").concat(t,")) {\n                    stringMem[").concat(f,"] = msg_readStringToken(inMessage, ").concat(t,")\n                    ").concat(o,".push(stringMem[").concat(f,"].length)\n                }\n            "),l+="\n                if (msg_isFloatToken(inMessage, ".concat(t,")) {\n                    msg_writeFloatToken(").concat(i,", ").concat(n,", msg_readFloatToken(inMessage, ").concat(t,"))\n                } else if (msg_isStringToken(inMessage, ").concat(t,")) {\n                    msg_writeStringToken(").concat(i,", ").concat(n,", stringMem[").concat(f,"])\n                }\n            "),f++}else"string-template"===e.type?(u+=si(_f||(_f=s(['\n                stringToken = "','"\n                ',"\n                stringMem[","] = stringToken\n                ",".push(MSG_STRING_TOKEN)\n                ",".push(stringMem[","].length)\n            "])),e.template,e.variables.map((function(e){var n=e.placeholder,t=e.inIndex;return"\n                    if (msg_isFloatToken(inMessage, ".concat(t,")) {\n                        otherStringToken = msg_readFloatToken(inMessage, ").concat(t,").toString()\n                        if (otherStringToken.endsWith('.0')) {\n                            otherStringToken = otherStringToken.slice(0, -2)\n                        }\n                        stringToken = stringToken.replace(\"").concat(n,'", otherStringToken)\n                    } else if (msg_isStringToken(inMessage, ').concat(t,')) {\n                        stringToken = stringToken.replace("').concat(n,'", msg_readStringToken(inMessage, ').concat(t,"))\n                    }")})),f,o,o,f),l+="\n                msg_writeStringToken(".concat(i,", ").concat(n,", stringMem[").concat(f,"])\n            "),f++):"string-constant"===e.type?(u+="\n                ".concat(o,".push(MSG_STRING_TOKEN)\n                ").concat(o,".push(").concat(e.value.length,")\n            "),l+="\n                msg_writeStringToken(".concat(i,", ").concat(n,', "').concat(e.value,'")\n            ')):"float-constant"===e.type&&(u+="\n                ".concat(o,".push(MSG_FLOAT_TOKEN)\n            "),l+="\n                msg_writeFloatToken(".concat(i,", ").concat(n,", ").concat(e.value,")\n            "))}));var d=c.some((function(e){return"string-template"===e.type})),p=c.some((function(e){return"noop"===e.type||"string-template"===e.type}));return{inMessageUsed:p,outMessageCode:"\n            ".concat(pi(d,"let ".concat(a("stringToken","string"))),"\n            ").concat(pi(d,"let ".concat(a("otherStringToken","string"))),"\n            ").concat(pi(p,"let ".concat(a("stringMem","Array<string>")," = []")),"\n            ").concat(o," = []\n            ").concat(u,"           \n            ").concat(i," = msg_create(").concat(o,")\n            ").concat(l,"\n        ")}},$d=function(e){return e.map((function(e){if("string"===typeof e){var n=Kd.exec(e);if(n&&n[0]===e)return{type:"noop",inIndex:parseInt(n[1],10)-1};if(n){for(var t,r=[];t=qd.exec(e);)r.push({placeholder:t[0],inIndex:parseInt(t[1],10)-1});return{type:"string-template",template:e,variables:r}}return{type:"string-constant",value:e}}return{type:"float-constant",value:e}}))},Kd=/\$(\d+)/,qd=/\$(\d+)/g,Hd={translateArgs:function(e){var n=e.args,t=Bu(n[0])||"append",r=n.slice(1);switch(t){case"split":r=[ju(n[1])||0];break;case"trim":case"length":r=[];break;case"append":case"prepend":break;case"fromsymbol":case"tosymbol":case"store":throw new Error("list operation ".concat(t," not implemented yet"));default:throw new Error("invalid list operation ".concat(t))}return{operation:t,operationArgs:r}},build:function(e){var n=0,t=0;switch(e.operation){case"split":n=2,t=3;break;case"trim":case"length":n=1,t=1;break;case"prepend":case"append":n=2,t=1}return{inlets:fi(ui(n),(function(e){return["".concat(e),{type:"message",id:"".concat(e)}]})),outlets:fi(ui(t),(function(e){return["".concat(e),{type:"message",id:"".concat(e)}]}))}}},Xd={messages:function(e){var n=e.snds,t=e.globs,r=e.state,a=e.macros.Var,o=e.node.args,i="const ".concat(a("inMessage","Message")," = msg_isBang(").concat(t.m,") ? msg_create([]): ").concat(t.m);switch(o.operation){case"split":return{0:"\n                ".concat(i,"\n                if (msg_getLength(inMessage) < ").concat(r.splitPoint,") {\n                    ").concat(n.$2,"(").concat(t.m,")\n                    return\n                } else if (msg_getLength(inMessage) === ").concat(r.splitPoint,") {\n                    ").concat(n.$1,"(msg_bang())\n                    ").concat(n.$0,"(").concat(t.m,")\n                    return\n                }\n                const ").concat(a("outMessage1","Message")," = msg_slice(inMessage, ").concat(r.splitPoint,", msg_getLength(inMessage))\n                const ").concat(a("outMessage0","Message")," = msg_slice(inMessage, 0, ").concat(r.splitPoint,")\n                ").concat(n.$1,"(msg_getLength(outMessage1) === 0 ? msg_bang(): outMessage1)\n                ").concat(n.$0,"(msg_getLength(outMessage0) === 0 ? msg_bang(): outMessage0)\n                return\n                "),1:Yu(t.m,r.funcSetSplitPoint)};case"trim":return{0:"\n                ".concat(n.$0,"(").concat(t.m,")\n                return\n                ")};case"length":return{0:"\n                if (msg_isBang(".concat(t.m,")) {\n                    ").concat(n.$0,"(msg_floats([0]))\n                } else {\n                    ").concat(n.$0,"(msg_floats([toFloat(msg_getLength(").concat(t.m,"))]))\n                }\n                return\n                ")};case"append":case"prepend":var s="prepend"===o.operation?"msg_concat(".concat(r.currentList,", ").concat(t.m,")"):"msg_concat(".concat(t.m,", ").concat(r.currentList,")");return{0:"\n                if (msg_isBang(".concat(t.m,")) {\n                    ").concat(n.$0,"(msg_getLength(").concat(r.currentList,") === 0 ? msg_bang(): ").concat(r.currentList,")\n                } else {\n                    ").concat(n.$0,"(msg_getLength(").concat(r.currentList,") === 0 && msg_getLength(").concat(t.m,") === 0 ? msg_bang(): ").concat(s,")\n                }\n                return\n                "),1:"\n                ".concat(i,"\n                ").concat(r.currentList," = inMessage\n                return\n                ")};default:throw new Error("unknown list operation ".concat(o.operation))}},stateVariables:{currentList:1,splitPoint:1,funcSetSplitPoint:1},declare:function(e){var n=e.state,t=e.node.args,r=e.macros,a=r.Var,o=r.Func;switch(t.operation){case"split":return"\n                let ".concat(a(n.splitPoint,"Int")," = ").concat(t.operationArgs[0],"\n\n                function ").concat(n.funcSetSplitPoint," ").concat(o([a("value","Float")],"void")," {\n                    ").concat(n.splitPoint," = toInt(value)\n                }\n            ");case"trim":case"length":return"";case"append":case"prepend":return"\n                let ".concat(a(n.currentList,"Message")," = msg_create([])\n                {\n                    const ").concat(a("template","MessageTemplate")," = [").concat(t.operationArgs.map((function(e){return"string"===typeof e?"MSG_STRING_TOKEN,".concat(e.length):"MSG_FLOAT_TOKEN"})).join(","),"]\n        \n                    ").concat(n.currentList," = msg_create(template)\n        \n                    ").concat(t.operationArgs.map((function(e,t){return"string"===typeof e?"msg_writeStringToken(".concat(n.currentList,", ").concat(t,', "').concat(e,'")'):"msg_writeFloatToken(".concat(n.currentList,", ").concat(t,", ").concat(e,")")})),"\n                }\n            ");default:throw Error("unknown operation ".concat(t.operation))}},sharedCode:[$u,Ku]},Yd={translateArgs:function(e){return{busName:Bu(e.args[0])||""}},build:function(){return{inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{}}}},Jd={stateVariables:{busName:1},declare:function(e){var n=e.state,t=e.macros.Var,r=e.node.args;return"\n    let ".concat(t(n.busName,"string"),' = "').concat(r.busName,'"\n')},messages:function(e){var n,t,r=e.state,a=e.globs;return{0:"\n    msgBusPublish(".concat(r.busName,", ").concat(a.m,")\n    return\n    "),1:(n=a.m,t=r.busName,"if (msg_isMatching(".concat(n,", [MSG_STRING_TOKEN])) {\n        ").concat(t," = msg_readStringToken(").concat(n,", 0)\n        return\n    }"))}},sharedCode:[Yl]},Qd={translateArgs:function(e){return{busName:Bu(e.args[0])||""}},build:function(){return{inlets:{},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0}}},Zd={stateVariables:{},declare:function(e){var n=e.compilation.codeVariableNames.nodes,t=e.node,r=t.id,a=t.args;return'\n    commons_waitEngineConfigure(() => {\n        msgBusSubscribe("'.concat(a.busName,'", ').concat(n[r].snds.$0,")\n    })\n")},sharedCode:[Yl]},ep={declare:function(e){var n=e.state,t=e.macros,r=t.Func,a=t.Var;return"\n    class SfOperation {\n        ".concat(a("url","string"),"\n        ").concat(a("arrayNames","Array<string>"),"\n        ").concat(a("resize","boolean"),"\n        ").concat(a("maxSize","Float"),"\n        ").concat(a("framesToWrite","Float"),"\n        ").concat(a("skip","Float"),"\n        ").concat(a("soundInfo","fs_SoundInfo"),"\n    }\n    const ").concat(a(n.operations,"Map<fs_OperationId, SfOperation>")," = new Map()\n\n    const ").concat(n.buildMessage1," = ").concat(r([a("soundInfo","fs_SoundInfo")],"Message")," => {\n        const ").concat(a("m","Message")," = msg_create([\n            MSG_FLOAT_TOKEN,\n            MSG_FLOAT_TOKEN,\n            MSG_FLOAT_TOKEN,\n            MSG_FLOAT_TOKEN,\n            MSG_STRING_TOKEN,\n            soundInfo.endianness.length,\n        ])\n        msg_writeFloatToken(m, 0, toFloat(soundInfo.sampleRate))\n        msg_writeFloatToken(m, 1, -1) // TODO IMPLEMENT headersize\n        msg_writeFloatToken(m, 2, toFloat(soundInfo.channelCount))\n        msg_writeFloatToken(m, 3, Math.round(toFloat(soundInfo.bitDepth) / 8))\n        msg_writeStringToken(m, 4, soundInfo.endianness)\n        return m\n    }\n")},messages:function(e){var n=e.state,t=e.globs,r=e.snds,a=e.macros,o=a.Func,i=a.Var;return{0:"\n    if (\n        msg_getLength(".concat(t.m,") >= 3 \n        && msg_isStringToken(").concat(t.m,", 0)\n        && (\n            msg_readStringToken(").concat(t.m,", 0) === 'read'\n            || msg_readStringToken(").concat(t.m,", 0) === 'write'\n        )\n    ) {\n        const ").concat(i("operationType","string")," = msg_readStringToken(").concat(t.m,", 0)\n        const ").concat(i("soundInfo","fs_SoundInfo")," = {\n            channelCount: 0,\n            sampleRate: toInt(").concat(t.sampleRate,"),\n            bitDepth: 32,\n            encodingFormat: '',\n            endianness: '',\n            extraOptions: '',\n        }\n        const ").concat(i("operation","SfOperation")," = {\n            arrayNames: [],\n            resize: false,\n            maxSize: -1,\n            skip: 0,\n            framesToWrite: 0,\n            url: '',\n            soundInfo,\n        }\n        let ").concat(i("unhandledOptions","Set<Int>")," = parseSoundFileOpenOpts(\n            ").concat(t.m,",\n            soundInfo,\n        )\n        \n        // Remove the operation type\n        unhandledOptions.delete(0)\n        \n        let ").concat(i("i","Int")," = 1\n        let ").concat(i("str","string")," = ''\n        while (i < msg_getLength(").concat(t.m,")) {\n            if (!unhandledOptions.has(i)) {\n\n            } else if (msg_isStringToken(").concat(t.m,", i)) {\n                str = msg_readStringToken(").concat(t.m,", i)\n                if (str === '-resize') {\n                    unhandledOptions.delete(i)\n                    operation.resize = true\n\n                } else if (str === '-maxsize' || str === '-nframes') {\n                    unhandledOptions.delete(i)\n                    if (\n                        i + 1 >= msg_getLength(").concat(t.m,") \n                        || !msg_isFloatToken(").concat(t.m,', i + 1)\n                    ) {\n                        console.log("invalid value for -maxsize")\n                    }\n                    operation.maxSize = msg_readFloatToken(').concat(t.m,", i + 1)\n                    unhandledOptions.delete(i + 1)\n                    i++\n\n                } else if (str === '-skip') {\n                    unhandledOptions.delete(i)\n                    if (\n                        i + 1 >= msg_getLength(").concat(t.m,") \n                        || !msg_isFloatToken(").concat(t.m,', i + 1)\n                    ) {\n                        console.log("invalid value for -skip")\n                    }\n                    operation.skip = msg_readFloatToken(').concat(t.m,", i + 1)\n                    unhandledOptions.delete(i + 1)\n                    i++\n\n                } else if (str === '-normalize') {\n                    unhandledOptions.delete(i)\n                    console.log('-normalize not implemented')\n                }\n            }\n            i++\n        }\n\n        i = 1\n        let ").concat(i("urlFound","boolean")," = false\n        while (i < msg_getLength(").concat(t.m,")) {\n            if (!unhandledOptions.has(i)) {\n\n            } else if (msg_isStringToken(").concat(t.m,", i)) {\n                str = msg_readStringToken(").concat(t.m,", i)\n                if (!str.startsWith('-') && urlFound === false) {\n                    operation.url = str\n                    urlFound = true\n                } else {\n                    operation.arrayNames.push(str)\n                }\n                unhandledOptions.delete(i)\n            }\n            i++\n        }\n\n        for (i = 0; i < operation.arrayNames.length; i++) {\n            if (!commons_hasArray(operation.arrayNames[i])) {\n                console.log('[soundfiler] unknown array ' + operation.arrayNames[i])\n                return\n            }\n        }\n\n        if (unhandledOptions.size) {\n            console.log(\"soundfiler received invalid options\")\n        }\n\n        soundInfo.channelCount = operation.arrayNames.length\n\n        if (operationType === 'read') {\n            const callback = ").concat(o([i("id","fs_OperationId"),i("status","fs_OperationStatus"),i("sound","FloatArray[]")],"void")," => {\n                const ").concat(i("operation","SfOperation")," = ").concat(n.operations,".get(id)\n                ").concat(n.operations,".delete(id)\n                let ").concat(i("i","Int")," = 0\n                let ").concat(i("maxFramesRead","Float")," = 0\n                let ").concat(i("framesToRead","Float")," = 0\n                let ").concat(i("array","FloatArray")," = createFloatArray(0)\n                for (i = 0; i < sound.length; i++) {\n                    if (operation.resize) {\n                        if (operation.maxSize > 0) {\n                            framesToRead = Math.min(\n                                operation.maxSize, \n                                toFloat(sound[i].length) - operation.skip\n                            )\n\n                        } else {\n                            framesToRead = toFloat(sound[i].length) - operation.skip\n                        }\n\n                        commons_setArray(\n                            operation.arrayNames[i], \n                            sound[i].subarray(\n                                toInt(operation.skip), \n                                toInt(operation.skip + framesToRead)\n                            )\n                        )\n                        \n                    } else {\n                        array = commons_getArray(operation.arrayNames[i])\n                        framesToRead = Math.min(\n                            toFloat(array.length),\n                            toFloat(sound[i].length) - operation.skip\n                        )\n                        array.set(sound[i].subarray(0, array.length))\n                    }\n                    maxFramesRead = Math.max(\n                        maxFramesRead,\n                        framesToRead\n                    )\n                }\n\n                ").concat(r.$1,"(").concat(n.buildMessage1,"(operation.soundInfo))\n                ").concat(r.$0,"(msg_floats([maxFramesRead]))\n            }\n\n            const ").concat(i("id","fs_OperationId")," = fs_readSoundFile(\n                operation.url, \n                soundInfo,\n                callback\n            )\n\n            ").concat(n.operations,".set(id, operation)\n\n        } else if (operationType === 'write') {\n            let ").concat(i("i","Int")," = 0\n            let ").concat(i("framesToWrite","Float")," = 0\n            let ").concat(i("array","FloatArray")," = createFloatArray(0)\n            const ").concat(i("sound","FloatArray[]")," = []\n            \n            for (i = 0; i < operation.arrayNames.length; i++) {\n                framesToWrite = Math.max(\n                    framesToWrite,\n                    toFloat(commons_getArray(operation.arrayNames[i]).length) - operation.skip,\n                )\n            }\n\n            if (operation.maxSize >= 0) {\n                framesToWrite = Math.min(\n                    operation.maxSize, \n                    framesToWrite\n                )\n            }\n            operation.framesToWrite = framesToWrite\n\n            if (framesToWrite < 1) {\n                console.log('[soundfiler] no frames to write')\n                return\n            }\n\n            for (i = 0; i < operation.arrayNames.length; i++) {\n                array = commons_getArray(operation.arrayNames[i])\n                if (framesToWrite > toFloat(array.length) - operation.skip) {\n                    sound.push(createFloatArray(toInt(framesToWrite)))\n                    sound[i].set(array.subarray(\n                        toInt(operation.skip), \n                        toInt(operation.skip + framesToWrite)\n                    ))\n                } else {\n                    sound.push(array.subarray(\n                        toInt(operation.skip), \n                        toInt(operation.skip + framesToWrite)\n                    ))\n                }\n            }\n\n            const callback = ").concat(o([i("id","fs_OperationId"),i("status","fs_OperationStatus")],"void")," => {\n                const ").concat(i("operation","SfOperation")," = ").concat(n.operations,".get(id)\n                ").concat(n.operations,".delete(id)\n                ").concat(r.$1,"(").concat(n.buildMessage1,"(operation.soundInfo))\n                ").concat(r.$0,"(msg_floats([operation.framesToWrite]))\n            }\n\n            const ").concat(i("id","fs_OperationId")," = fs_writeSoundFile(\n                sound, \n                operation.url, \n                soundInfo, \n                callback\n            )\n\n            ").concat(n.operations,".set(id, operation)\n        }\n\n        return\n    }\n    ")}},stateVariables:{operations:1,buildMessage1:1},sharedCode:[zl]},np={messages:function(e){var n=e.globs,t=e.node.args;return{0:'\n        console.log("'.concat(t.prefix,' " + msg_display(').concat(n.m,"))\n        return\n    ")}},stateVariables:{}},tp=["float","bang","symbol","list","anything"],rp=function(e){switch(e){case"f":return"float";case"b":return"bang";case"s":return"symbol";case"l":return"list";case"a":return"anything";case"p":return"pointer";default:return e}},ap=function(e){if("pointer"===e)throw new zu('"pointer" not supported (yet)');if(!tp.includes(e))throw new zu("invalid type ".concat(e));return e},op=function(e,n,t){switch(e){case"float":return"msg_floats([messageTokenToFloat(".concat(n,", ").concat(t,")])");case"bang":return"msg_bang()";case"symbol":return"msg_strings([messageTokenToString(".concat(n,", ").concat(t,")])");case"list":case"anything":return"".concat(n);default:throw new Error("type argument ".concat(e," not supported (yet)"))}},ip=function(e){var n=e.macros,t=n.Func,r=n.Var;return"\n    function messageTokenToFloat ".concat(t([r("m","Message"),r("i","Int")],"Float")," {\n        if (msg_isFloatToken(m, i)) {\n            return msg_readFloatToken(m, i)\n        } else {\n            return 0\n        }\n    }\n")},sp=function(e){var n=e.macros,t=n.Func,r=n.Var;return"\n    function messageTokenToString ".concat(t([r("m","Message"),r("i","Int")],"string")," {\n        if (msg_isStringToken(m, i)) {\n            const ").concat(r("str","string")," = msg_readStringToken(m, i)\n            if (str === 'bang') {\n                return 'symbol'\n            } else {\n                return str\n            }\n        } else {\n            return 'float'\n        }\n    }\n")},cp={translateArgs:function(e){var n=e.args;return{typeArguments:0===n.length?["bang","bang"]:n.map(Du).map(rp).map(ap)}},build:function(e){var n=e.typeArguments;return{inlets:{0:{type:"message",id:"0"}},outlets:fi(n,(function(e,n){return["".concat(n),{type:"message",id:"".concat(n)}]}))}}},up={messages:function(e){var n=e.snds,t=e.globs,r=e.node.args.typeArguments;return{0:si(kf||(kf=s(["\n        ","\n        return\n    "])),r.reverse().map((function(e,a){return"".concat(n[r.length-a-1],"(").concat(op(e,t.m,0),")")})))}},stateVariables:{},sharedCode:[ip,sp,$u]},lp={translateArgs:function(e){var n=e.args;return{initValue:ju(n[0])||0}},build:function(){return{inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}}}},fp={messages:function(e){var n=e.snds,t=e.globs,r=e.state,a=e.macros.Var;return{0:"\n    if (msg_isMatching(".concat(t.m,", [MSG_FLOAT_TOKEN])) {\n        const ").concat(a("newValue","Float")," = msg_readFloatToken(").concat(t.m,", 0)\n        if (newValue !== ").concat(r.currentValue,") {\n            ").concat(r.currentValue," = newValue\n            ").concat(n[0],"(msg_floats([").concat(r.currentValue,"]))\n        }\n        return\n\n    } else if (msg_isBang(").concat(t.m,")) {\n        ").concat(n[0],"(msg_floats([").concat(r.currentValue,"]))\n        return \n\n    } else if (\n        msg_isMatching(").concat(t.m,", [MSG_STRING_TOKEN, MSG_FLOAT_TOKEN])\n        && msg_readStringToken(").concat(t.m,", 0) === 'set'\n    ) {\n        ").concat(r.currentValue," = msg_readFloatToken(").concat(t.m,", 1)\n        return\n    }\n    ")}},stateVariables:{currentValue:1},declare:function(e){var n=e.node,t=e.state,r=e.macros.Var;return"let ".concat(r(t.currentValue,"Float")," = ").concat(n.args.initValue)},sharedCode:[$u]},dp={translateArgs:function(e){var n=e.args;return{threshold:ju(n[0])||0}},build:function(){return{inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}}}}},pp={messages:function(e){var n=e.snds,t=e.globs,r=e.state,a=e.macros.Var;return{0:"\n    if (msg_isMatching(".concat(t.m,", [MSG_FLOAT_TOKEN])) {\n        const ").concat(a("value","Float")," = msg_readFloatToken(").concat(t.m,", 0)\n        if (value >= ").concat(r.threshold,") {\n            ").concat(n[1],"(msg_floats([value]))\n        } else {\n            ").concat(n[0],"(msg_floats([value]))\n        }\n        return\n    }\n    "),1:Xu(t.m,r.threshold)}},stateVariables:{threshold:1},declare:function(e){var n=e.node,t=e.state,r=e.macros.Var;return"\n    let ".concat(r(t.threshold,"Float")," = ").concat(n.args.threshold,"\n")}},mp={translateArgs:function(e){var n=e.args;return{minValue:ju(n[0])||0,maxValue:ju(n[1])||0}},build:function(){return{inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"message",id:"0"}}}}},hp={messages:function(e){var n=e.snds,t=e.globs,r=e.state;return{0:"\n    if (msg_isMatching(".concat(t.m,", [MSG_FLOAT_TOKEN])) {\n        ").concat(n[0],"(msg_floats([\n            Math.max(Math.min(").concat(r.maxValue,", msg_readFloatToken(").concat(t.m,", 0)), ").concat(r.minValue,")\n        ]))\n        return\n    }\n    "),1:Xu(t.m,r.minValue),2:Xu(t.m,r.maxValue)}},stateVariables:{minValue:1,maxValue:1},declare:function(e){var n=e.node,t=e.state,r=e.macros.Var;return"\n    let ".concat(r(t.minValue,"Float")," = ").concat(n.args.minValue,"\n    let ").concat(r(t.maxValue,"Float")," = ").concat(n.args.maxValue,"\n")}},gp={translateArgs:function(e){var n=e.args;return{filters:n.length?n:[0]}},build:function(e){var n={0:{type:"message",id:"0"}};return 1===e.filters.length&&(n[1]={type:"message",id:"1"}),{inlets:n,outlets:fi(e.filters.length?ui(e.filters.length+1):[0,1],(function(e,n){return["".concat(n),{type:"message",id:"".concat(n)}]}))}}},yp={messages:function(e){var n=e.snds,t=e.globs,r=e.state,a=e.node.args;return a.filters.length>1?{0:si(If||(If=s(["\n        \n            ","\n\n            ","(",")\n            return\n            "])),a.filters.map((function(e,r){return di(["float"===e,"\n                    if (msg_isFloatToken(".concat(t.m,", 0)) {\n                        ").concat(n[r],"(").concat(t.m,")\n                        return\n                    }\n                ")],["symbol"===e,"\n                    if (msg_isStringToken(".concat(t.m,", 0)) {\n                        ").concat(n[r],"(").concat(t.m,")\n                        return\n                    }\n                ")],["list"===e,"\n                    if (msg_getLength(".concat(t.m,").length > 1) {\n                        ").concat(n[r],"(").concat(t.m,")\n                        return\n                    }\n                ")],["bang"===e,"\n                    if (msg_isBang(".concat(t.m,")) {\n                        ").concat(n[r],"(").concat(t.m,")\n                        return\n                    }\n                ")],["number"===typeof e,"\n                    if (\n                        msg_isFloatToken(".concat(t.m,", 0)\n                        && msg_readFloatToken(").concat(t.m,", 0) === ").concat(e,"\n                    ) {\n                        ").concat(n[r],"(msg_emptyToBang(msg_shift(").concat(t.m,")))\n                        return\n                    }\n                ")],["string"===typeof e,"\n                    if (\n                        msg_isStringToken(".concat(t.m,", 0) \n                        && msg_readStringToken(").concat(t.m,', 0) === "').concat(e,'"\n                    ) {\n                        ').concat(n[r],"(msg_emptyToBang(msg_shift(").concat(t.m,")))\n                        return\n                    }")])})),n[a.filters.length],t.m)}:{0:"\n            if (".concat(r.filterType," === MSG_STRING_TOKEN) {\n                if (\n                    (").concat(r.stringFilter," === 'float'\n                        && msg_isFloatToken(").concat(t.m,", 0))\n                    || (").concat(r.stringFilter," === 'symbol'\n                        && msg_isStringToken(").concat(t.m,", 0))\n                    || (").concat(r.stringFilter," === 'list'\n                        && msg_getLength(").concat(t.m,") > 1)\n                    || (").concat(r.stringFilter," === 'bang' \n                        && msg_isBang(").concat(t.m,"))\n                ) {\n                    ").concat(n.$0,"(").concat(t.m,")\n                    return\n                \n                } else if (\n                    msg_isStringToken(").concat(t.m,", 0)\n                    && msg_readStringToken(").concat(t.m,", 0) === ").concat(r.stringFilter,"\n                ) {\n                    ").concat(n.$0,"(msg_emptyToBang(msg_shift(").concat(t.m,")))\n                    return\n                }\n\n            } else if (\n                msg_isFloatToken(").concat(t.m,", 0)\n                && msg_readFloatToken(").concat(t.m,", 0) === ").concat(r.floatFilter,"\n            ) {\n                ").concat(n.$0,"(msg_emptyToBang(msg_shift(").concat(t.m,")))\n                return\n            }\n        \n            ").concat(n.$1,"(").concat(t.m,")\n            return\n            "),1:"\n            ".concat(r.filterType," = msg_getTokenType(").concat(t.m,", 0)\n            if (").concat(r.filterType," === MSG_STRING_TOKEN) {\n                ").concat(r.stringFilter," = msg_readStringToken(").concat(t.m,", 0)\n            } else {\n                ").concat(r.floatFilter," = msg_readFloatToken(").concat(t.m,", 0)\n            }\n            return\n            ")}},stateVariables:{filterType:1,floatFilter:1,stringFilter:1},declare:function(e){var n=e.node.args,t=e.state,r=e.macros.Var;return si(xf||(xf=s(["\n    ","\n"])),pi(1===n.filters.length,"\n        let ".concat(r(t.floatFilter,"Float")," = ").concat("number"===typeof n.filters[0]?n.filters[0]:0,"\n        let ").concat(r(t.stringFilter,"string"),' = "').concat(n.filters[0],'"\n        let ').concat(r(t.filterType,"Int")," = ").concat("number"===typeof n.filters[0]?"MSG_FLOAT_TOKEN":"MSG_STRING_TOKEN","\n    ")))},sharedCode:[$u,Ku]},vp={translateArgs:function(e){var n=e.args;return{isClosed:0===(ju(n[0])||0)}},build:function(){return{inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}}}},bp={messages:function(e){var n=e.snds,t=e.globs,r=e.state;return{0:"\n    if (!".concat(r.isClosed,") {\n        ").concat(n.$0,"(").concat(t.m,")\n    }\n    return\n    "),1:Yu(t.m,r.funcSetIsClosed)}},stateVariables:{isClosed:1,funcSetIsClosed:1},declare:function(e){var n=e.node,t=e.state,r=e.macros,a=r.Var,o=r.Func;return"\n    let ".concat(a(t.isClosed,"Float")," = ").concat(n.args.isClosed?"true":"false","\n\n    function ").concat(t.funcSetIsClosed," ").concat(o([a("value","Float")],"void")," {\n        ").concat(t.isClosed," = (value === 0)\n    }\n")}},Sp={messages:function(e){var n=e.snds,t=e.globs,r=e.state,a=e.macros.Var;return{0:"\n    if (msg_isBang(".concat(t.m,")) {\n        ").concat(r.continueIter," = true\n        while (").concat(r.continueIter,") {\n            ").concat(n[0],"(msg_bang())\n        }\n        return\n\n    } else if (msg_isMatching(").concat(t.m,", [MSG_FLOAT_TOKEN])) {\n        ").concat(r.continueIter," = true\n        let ").concat(a("maxIterCount","Int")," = toInt(msg_readFloatToken(").concat(t.m,", 0))\n        let ").concat(a("iterCount","Int")," = 0\n        while (").concat(r.continueIter," && iterCount++ < maxIterCount) {\n            ").concat(n[0],"(msg_bang())\n        }\n        return\n    }\n    "),1:"\n    if (msg_isBang(".concat(t.m,")) {\n        ").concat(r.continueIter," = false\n        return\n    }\n    ")}},stateVariables:{continueIter:1},declare:function(e){var n=e.state,t=e.macros.Var;return"\n    let ".concat(t(n.continueIter,"boolean")," = true\n")},sharedCode:[$u]},wp={translateArgs:function(e){var n=e.args;return{maxValue:ju(n[0])||0}},build:function(){return{inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}}}},_p={messages:function(e){var n=e.snds,t=e.globs,r=e.state;return{0:"\n    if (msg_isBang(".concat(t.m,")) {\n        ").concat(n[0],"(msg_floats([Math.floor(Math.random() * ").concat(r.maxValue,")]))\n        return\n    } else if (\n        msg_isMatching(").concat(t.m,", [MSG_STRING_TOKEN, MSG_FLOAT_TOKEN])\n        && msg_readStringToken(").concat(t.m,", 0) === 'seed'\n    ) {\n        console.log('WARNING : seed not implemented yet for [random]')\n        return\n    }\n    "),1:Yu(t.m,r.funcSetMaxValue)}},stateVariables:{maxValue:1,funcSetMaxValue:1},declare:function(e){var n=e.node,t=e.state,r=e.macros,a=r.Var,o=r.Func;return"\n    let ".concat(a(t.maxValue,"Float")," = ").concat(n.args.maxValue,"\n\n    function ").concat(t.funcSetMaxValue," ").concat(o([a("maxValue","Float")],"void")," {\n        ").concat(t.maxValue," = Math.max(maxValue, 0)\n    }\n")},sharedCode:[$u]},kp={translateArgs:function(e){var n=e.args,t=0;return n.length>=1&&(t=Ru(n[n.length-1]),n=n.slice(0,-1)),{typeArguments:(n=n.length?n:[0]).map(rp).map((function(e){return["number"===typeof e?"float":ap(e),"number"===typeof e?e:"float"===e?0:"symbol"]})),delay:t}},build:function(e){return{inlets:Rr(Rr({},fi(e.typeArguments,(function(e,n){return["".concat(n),{type:"message",id:"".concat(n)}]}))),{},Nr({},"".concat(e.typeArguments.length),{type:"message",id:"".concat(e.typeArguments.length)})),outlets:fi(e.typeArguments,(function(e,n){return["".concat(n),{type:"message",id:"".concat(n)}]}))}}},xp={loop:function(e){var n=e.node,t=e.state,r=e.globs,a=e.snds;return"\n    while (".concat(t.scheduledFrames,".length && ").concat(t.scheduledFrames,"[0] <= ").concat(r.frame,") {\n        ").concat(t.scheduledFrames,".shift()\n        ").concat(ui(n.args.typeArguments.length).reverse().map((function(e){return"".concat(a[e],"(").concat(t.scheduledMessages,".shift())")})),"\n    }\n")},messages:function(e){var n=e.node,t=e.snds,r=e.globs,a=e.state;e.macros.Var;return Rr(Rr({0:si(Of||(Of=s(["\n    if (msg_isBang(",")) {\n        ","(msg_create([]))\n        return\n\n    } else if (msg_isAction(",", 'clear')) {\n            "," = []\n            "," = []\n            return \n\n    } else if (msg_isAction(",", 'flush')) {\n        "," = []\n        while (",".length) {\n            ","\n        }\n        return\n\n    } else {\n        ","(",")\n        return\n    }\n    "])),r.m,a.funcScheduleMessage,r.m,a.scheduledMessages,a.scheduledFrames,r.m,a.scheduledFrames,a.scheduledMessages,ui(n.args.typeArguments.length).reverse().map((function(e){return"".concat(t[e],"(").concat(a.scheduledMessages,".shift())")})),a.funcScheduleMessage,r.m)},fi(n.args.typeArguments.slice(1),(function(e,n){var t=bt(e,1)[0];return["".concat(n+1),"".concat(a.lastReceived,"[").concat(n+1,"] = ").concat(op(t,r.m,0),"\n            return")]}))),{},Nr({},n.args.typeArguments.length,Yu(r.m,a.funcSetDelay)))},stateVariables:{delay:1,scheduledMessages:1,scheduledFrames:1,lastReceived:1,funcScheduleMessage:1,funcSetDelay:1},declare:function(e){var n=e.state,t=e.globs,r=e.node.args,a=e.macros,o=a.Var,i=a.Func;return si(Ef||(Ef=s(["\n    let "," = 0\n    let "," = []\n    let "," = []\n    const "," = [","]\n\n    const "," = "," => {\n        let "," = 0\n        let "," = "," + ","\n        let "," = msg_create([])\n\n        while (\n            insertIndex < ",".length \n            && ","[insertIndex] <= frame\n        ) {insertIndex++}\n\n        \n        ","\n        ",".copyWithin((insertIndex + 1) * ",", insertIndex * ",")\n        ",".push(0)\n        ",".copyWithin(insertIndex + 1, insertIndex)\n\n        ","\n        ","[insertIndex] = frame\n    }\n\n    const "," = "," => {\n        "," = toInt(Math.round(delay / 1000 * ","))\n    }\n\n    commons_waitEngineConfigure(() => {\n        ","(",")\n    })\n"])),n.delay,o(n.scheduledMessages,"Array<Message>"),o(n.scheduledFrames,"Array<Int>"),o(n.lastReceived,"Array<Message>"),r.typeArguments.map((function(e){var n=bt(e,2),t=(n[0],n[1]);return"number"===typeof t?"msg_floats([".concat(t,"])"):'msg_strings(["'.concat(t,'"])')})).join(","),n.funcScheduleMessage,i([o("inMessage","Message")],"void"),o("insertIndex","Int"),o("frame","Int"),t.frame,n.delay,o("outMessage","Message"),n.scheduledFrames,n.scheduledFrames,ui(r.typeArguments.length).map((function(e){return"".concat(n.scheduledMessages,".push(msg_create([]))")})),n.scheduledMessages,r.typeArguments.length,r.typeArguments.length,n.scheduledFrames,n.scheduledFrames,r.typeArguments.reverse().map((function(e,n){var t=bt(e,1)[0];return[r.typeArguments.length-n-1,t]})).map((function(e,t){var a=bt(e,2),o=a[0],i=a[1];return"\n                if (msg_getLength(inMessage) > ".concat(o,") {\n                    outMessage = ").concat(op(i,"inMessage",o),"\n                    ").concat(n.lastReceived,"[").concat(o,"] = outMessage\n                } else {\n                    outMessage = ").concat(n.lastReceived,"[").concat(o,"]\n                }\n                ").concat(n.scheduledMessages,"[insertIndex * ").concat(r.typeArguments.length," + ").concat(t,"] = outMessage\n            ")})),n.scheduledFrames,n.funcSetDelay,i([o("delay","Float")],"void"),n.delay,t.sampleRate,n.funcSetDelay,r.delay)},sharedCode:[ip,sp,$u,qu]},Ip={translateArgs:function(e){var n=e.args;return{typeArguments:(n.length?n:["float"]).map(rp).map((function(e){if("bang"===(e=e||"float")&&(e="float"),"number"===typeof e)return e;if(!["float","symbol"].includes(e))throw new Error("".concat(e," not supported (yet)"));return e})).map((function(e){return["number"===typeof e?"float":ap(e),"number"===typeof e?e:"float"===e?0:"symbol"]}))}},build:function(e){var n=e.typeArguments;return{inlets:fi(n,(function(e,n){return["".concat(n),{type:"message",id:"".concat(n)}]})),outlets:{0:{type:"message",id:"0"}}}}},Ep={messages:function(e){var n=e.snds,t=e.globs,r=e.state,a=e.node,o=e.macros.Var;return Rr({0:si(Cf||(Cf=s(["\n    if (!msg_isBang(",")) {\n        for (let "," = 0; i < msg_getLength(","); i++) {\n            ","[i] = messageTokenToString(",", i)\n            ","[i] = messageTokenToFloat(",", i)\n        }\n    }\n\n    const "," = [","]\n\n    const "," = msg_create(template)\n\n    ","\n\n    ","(messageOut)\n    return\n    "])),t.m,o("i","Int"),t.m,r.stringValues,t.m,r.floatValues,t.m,o("template","MessageTemplate"),a.args.typeArguments.map((function(e,n){return"symbol"===bt(e,1)[0]?"MSG_STRING_TOKEN,".concat(r.stringValues,"[").concat(n,"].length"):"MSG_FLOAT_TOKEN"})).join(","),o("messageOut","Message"),a.args.typeArguments.map((function(e,n){return"symbol"===bt(e,1)[0]?"msg_writeStringToken(messageOut, ".concat(n,", ").concat(r.stringValues,"[").concat(n,"])"):"msg_writeFloatToken(messageOut, ".concat(n,", ").concat(r.floatValues,"[").concat(n,"])")})),n[0])},fi(a.args.typeArguments.slice(1),(function(e,n){var a=bt(e,1)[0];return["".concat(n+1),di(["symbol"===a,"".concat(r.stringValues,"[").concat(n+1,"] = messageTokenToString(").concat(t.m,", 0)")],["float"===a,"".concat(r.floatValues,"[").concat(n+1,"] = messageTokenToFloat(").concat(t.m,", 0)")])+";return"]})))},stateVariables:{floatValues:1,stringValues:1},declare:function(e){var n=e.node.args,t=e.state,r=e.macros.Var;return si(Tf||(Tf=s(["\n    const "," = [","]\n    const "," = [","]\n"])),r(t.floatValues,"Array<Float>"),n.typeArguments.map((function(e){var n=bt(e,2),t=n[0],r=n[1];return"".concat("float"===t?r:0)})).join(","),r(t.stringValues,"Array<string>"),n.typeArguments.map((function(e){var n=bt(e,2),t=n[0],r=n[1];return"".concat("symbol"===t?'"'.concat(r,'"'):'""')})).join(","))},sharedCode:[sp,ip,$u]},Op={translateArgs:function(e){var n=e.args;return{typeArguments:0===n.length?["float","float"]:n.map(rp).map((function(e){if("number"===typeof e)return"float";if("symbol"===e||"float"===e)return e;throw new Error('Invalid type argument for unpack "'.concat(e,'"'))}))}},build:function(e){var n=e.typeArguments;return{inlets:{0:{type:"message",id:"0"}},outlets:fi(n,(function(e,n){return["".concat(n),{type:"message",id:"".concat(n)}]}))}}},Tp={messages:function(e){var n=e.snds,t=e.globs,r=e.node.args;return{0:si(Af||(Af=s(["\n    ","\n    return\n    "])),r.typeArguments.map((function(e,n){return[e,n]})).reverse().map((function(e){var r=bt(e,2),a=r[0],o=r[1];return"\n            if (\n                msg_getLength(".concat(t.m,") >= ").concat(o+1,"\n            ) {\n                if (msg_getTokenType(").concat(t.m,", ").concat(o,") === ").concat("float"===a?"MSG_FLOAT_TOKEN":"MSG_STRING_TOKEN",") {\n                    ").concat(di(["float"===a,"".concat(n[o],"(msg_floats([msg_readFloatToken(").concat(t.m,", ").concat(o,")]))")],["symbol"===a,"".concat(n[o],"(msg_strings([msg_readStringToken(").concat(t.m,", ").concat(o,")]))")]),"\n                } else {\n                    console.log('unpack : invalid token type index ").concat(o,"')\n                }\n            }\n        ")})))}},stateVariables:{}},Cp={floatInputs:1,stringInputs:1,outputs:1},Ap={translateArgs:function(e){var n=e.args;return{tokenizedExpressions:zp(n).map(Lp)}},build:function(e){return{inlets:fi(jp(e.tokenizedExpressions),(function(e){var n=e.id;return["".concat(n),{type:"message",id:"".concat(n)}]})),outlets:fi(e.tokenizedExpressions,(function(e,n){return["".concat(n),{type:"message",id:"".concat(n)}]}))}}},Fp={translateArgs:function(e){var n=e.args;return{tokenizedExpressions:zp(n).map(Lp)}},build:function(e){return{inlets:fi(Bp(e.tokenizedExpressions),(function(e){var n=e.id,t=e.type;return["".concat(n),{type:"signal"===t?"signal":"message",id:"".concat(n)}]})),outlets:fi(e.tokenizedExpressions,(function(e,n){return["".concat(n),{type:"signal",id:"".concat(n)}]}))}}},Pp=function(e){var n=e.node,t=n.args,r=n.type,a=e.state,o=e.macros.Var,i="expr"===r?jp(t.tokenizedExpressions):Bp(t.tokenizedExpressions).filter((function(e){return"signal"!==e.type}));return si(Ff||(Ff=s(["\n        const "," = new Map()\n        const "," = new Map()\n        const "," = new Array(",")\n        ","\n        ","\n    "])),o(a.floatInputs,"Map<Int, Float>"),o(a.stringInputs,"Map<Int, string>"),o(a.outputs,"Array<Float>"),t.tokenizedExpressions.length,i.filter((function(e){return"float"===e.type||"int"===e.type})).map((function(e){return"".concat(a.floatInputs,".set(").concat(e.id,", 0)")})),i.filter((function(e){return"string"===e.type})).map((function(e){return"".concat(a.stringInputs,".set(").concat(e.id,", '')")})))},Mp=function(e){var n=e.snds,t=e.globs,r=e.state,a=e.node,o=a.args,i=a.type,c=e.macros.Var,u="expr"===i?jp(o.tokenizedExpressions):Bp(o.tokenizedExpressions).filter((function(e){return"signal"!==e.type})),l=u.length&&0===u[0].id;return Rr({0:si(Pf||(Pf=s(["\n\n        if (!msg_isBang(",")) {\n            for (let "," = 0; i < msg_getLength(","); i++) {\n                ",".set(i, messageTokenToString(",", i))\n                ",".set(i, messageTokenToFloat(",", i))\n            }\n        }\n\n        ","\n        \n        return\n        "])),t.m,c("i","Int"),t.m,r.stringInputs,t.m,r.floatInputs,t.m,pi("expr"===i,(function(){return"\n                ".concat(o.tokenizedExpressions.map((function(e,n){return"".concat(r.outputs,"[").concat(n,"] = ").concat(Rp(r,null,e))})),"\n        \n                ").concat(o.tokenizedExpressions.map((function(e,t){return"".concat(n["".concat(t)],"(msg_floats([").concat(r.outputs,"[").concat(t,"]]))")})),"\n            ")})))},fi(u.slice(l?1:0),(function(e){var n=e.id,a=e.type;return["".concat(n),di(["float"===a||"int"===a,"".concat(r.floatInputs,".set(").concat(n,", messageTokenToFloat(").concat(t.m,", 0));return")],["string"===a,"".concat(r.stringInputs,".set(").concat(n,", messageTokenToString(").concat(t.m,", 0));return")])]})))},Np=To(/(\$f([0-9]+))|(\$v([0-9]+))|(\$i([0-9]+))|(\$s([0-9]+)\s*\[([^\[\]]*)\])/,{f:1,id_f:2,v:3,id_v:4,i:5,id_i:6,s:7,id_s:8,sIndex:9}),Lp=function e(n){for(var t,r=[];t=Np.exec(n);)t.index&&r.push({type:"raw",content:n.slice(0,t.index)}),t[1]?r.push({type:"float",id:parseInt(t[2])-1}):t[3]?r.push({type:"signal",id:parseInt(t[4])-1}):t[5]?r.push({type:"int",id:parseInt(t[6])-1}):t[7]&&(r=[].concat(Mn(r),[{type:"string",id:parseInt(t[8])-1},{type:"indexing-start"}],Mn(e(t[9])),[{type:"indexing-end"}])),n=n.slice(t.index+t[0].length);return n.length&&r.push({type:"raw",content:n}),r},Rp=function(e,n,t){return"+("+t.map((function(t){switch(t.type){case"float":return"".concat(e.floatInputs,".get(").concat(t.id,")");case"signal":if(null===n)throw new Error("invalid token signal received");return n[t.id];case"int":return"roundFloatAsPdInt(".concat(e.floatInputs,".get(").concat(t.id,"))");case"string":return"commons_getArray(".concat(e.stringInputs,".get(").concat(t.id,"))");case"indexing-start":return"[toInt(";case"indexing-end":return")]";case"raw":return t.content}})).join("")+")"},Dp=function(e){var n=[];e.forEach((function(e){e.forEach((function(e){"float"!==e.type&&"signal"!==e.type&&"int"!==e.type&&"string"!==e.type||n.push(e)}))})),n.sort((function(e,n){return e.id-n.id}));var t=new Map;return n.filter((function(e){if(t.has(e.id)){if(t.get(e.id).type!==e.type)throw new Error("contradictory definitions for input ".concat(e.id));return!1}return t.set(e.id,e),!0}))},jp=function(e){var n=Dp(e);return n.forEach((function(e){if("signal"===e.type)throw new Error("invalid signal token $v# for [expr]")})),n},Bp=function(e){return Dp(e)},zp=function(e){var n=e.join(" ");return Object.getOwnPropertyNames(Math).forEach((function(e){n=n.replaceAll(e,"Math.".concat(e))})),n.split(";").map((function(e){return e.trim()}))},Up={expr:{messages:Mp,stateVariables:Cp,declare:Pp,sharedCode:[sp,ip,Uf,$u]},"expr~":{messages:Mp,stateVariables:Cp,declare:Pp,loop:function(e){var n=e.node.args,t=e.state,r=e.outs,a=e.ins;return"\n    ".concat(n.tokenizedExpressions.map((function(e,n){return"".concat(r[n]," = ").concat(Rp(t,a,e))})),"\n")},sharedCode:[sp,ip,Uf,$u]}},Vp={expr:Ap,"expr~":Fp},Wp={leftOp:1,rightOp:1,funcSetRightOp:1,funcSetLeftOp:1},Gp=function(e){return{translateArgs:function(n){var t=ju(n.args[0]);return{value:void 0!==t?t:e}},build:function(){return{inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}}}}},$p=function(e){var n=e.generateOperation,t=e.sharedCode,r=void 0===t?[]:t,a=e.prepareLeftOp,o=void 0===a?"value":a,i=e.prepareRightOp,s=void 0===i?"value":i;return{declare:function(e){var n=e.state,t=e.macros,r=t.Var,a=t.Func,i=e.node.args;return"\n        let ".concat(r(n.leftOp,"Float")," = 0\n        let ").concat(r(n.rightOp,"Float")," = 0\n\n        const ").concat(n.funcSetLeftOp," = ").concat(a([r("value","Float")],"void")," => {\n            ").concat(n.leftOp," = ").concat(o,"\n        }\n\n        const ").concat(n.funcSetRightOp," = ").concat(a([r("value","Float")],"void")," => {\n            ").concat(n.rightOp," = ").concat(s,"\n        }\n\n        ").concat(n.funcSetLeftOp,"(0)\n        ").concat(n.funcSetRightOp,"(").concat(i.value,")\n    ")},messages:function(e){var t=e.state,r=e.globs,a=e.snds;return{0:"\n        if (msg_isMatching(".concat(r.m,", [MSG_FLOAT_TOKEN])) {\n            ").concat(t.funcSetLeftOp,"(msg_readFloatToken(").concat(r.m,", 0))\n            ").concat(a.$0,"(msg_floats([").concat(n(t),"]))\n            return\n        \n        } else if (msg_isBang(").concat(r.m,")) {\n            ").concat(a.$0,"(msg_floats([").concat(n(t),"]))\n            return\n        }\n        "),1:Yu(r.m,t.funcSetRightOp)}},stateVariables:Wp,sharedCode:[$u].concat(Mn(r))}},Kp={"+":$p({generateOperation:function(e){return"".concat(e.leftOp," + ").concat(e.rightOp)}}),"-":$p({generateOperation:function(e){return"".concat(e.leftOp," - ").concat(e.rightOp)}}),"*":$p({generateOperation:function(e){return"".concat(e.leftOp," * ").concat(e.rightOp)}}),"/":$p({generateOperation:function(e){return"".concat(e.rightOp," !== 0 ? ").concat(e.leftOp," / ").concat(e.rightOp,": 0")}}),max:$p({generateOperation:function(e){return"Math.max(".concat(e.leftOp,", ").concat(e.rightOp,")")}}),min:$p({generateOperation:function(e){return"Math.min(".concat(e.leftOp,", ").concat(e.rightOp,")")}}),mod:$p({prepareLeftOp:"value > 0 ? Math.floor(value): Math.ceil(value)",prepareRightOp:"Math.floor(Math.abs(value))",generateOperation:function(e){return"".concat(e.rightOp," !== 0 ? (").concat(e.rightOp," + (").concat(e.leftOp," % ").concat(e.rightOp,")) % ").concat(e.rightOp,": 0")}}),"%":$p({generateOperation:function(e){return"".concat(e.leftOp," % ").concat(e.rightOp)}}),pow:$p({generateOperation:function(e){return"pow(".concat(e.leftOp,", ").concat(e.rightOp,")")},sharedCode:[kl]}),log:$p({generateOperation:function(e){return"Math.log(".concat(e.leftOp,") / Math.log(").concat(e.rightOp,")")}}),"||":$p({prepareLeftOp:"Math.floor(Math.abs(value))",prepareRightOp:"Math.floor(Math.abs(value))",generateOperation:function(e){return"".concat(e.leftOp," || ").concat(e.rightOp," ? 1: 0")}}),"&&":$p({prepareLeftOp:"Math.floor(Math.abs(value))",prepareRightOp:"Math.floor(Math.abs(value))",generateOperation:function(e){return"".concat(e.leftOp," && ").concat(e.rightOp," ? 1: 0")}}),">":$p({generateOperation:function(e){return"".concat(e.leftOp," > ").concat(e.rightOp," ? 1: 0")}}),">=":$p({generateOperation:function(e){return"".concat(e.leftOp," >= ").concat(e.rightOp," ? 1: 0")}}),"<":$p({generateOperation:function(e){return"".concat(e.leftOp," < ").concat(e.rightOp," ? 1: 0")}}),"<=":$p({generateOperation:function(e){return"".concat(e.leftOp," <= ").concat(e.rightOp," ? 1: 0")}}),"==":$p({generateOperation:function(e){return"".concat(e.leftOp," == ").concat(e.rightOp," ? 1: 0")}}),"!=":$p({generateOperation:function(e){return"".concat(e.leftOp," != ").concat(e.rightOp," ? 1: 0")}})},qp={"+":Gp(0),"-":Gp(0),"*":Gp(1),"/":Gp(1),max:Gp(0),min:Gp(1),mod:Gp(0),"%":Gp(0),pow:Gp(0),log:Gp(Math.E),"||":Gp(0),"&&":Gp(0),">":Gp(0),">=":Gp(0),"<":Gp(0),"<=":Gp(0),"==":Gp(0),"!=":Gp(0)},Hp=Rr(Rr(Rr(Rr(Rr(Rr(Rr(Rr(Rr(Rr(Rr(Rr(Rr(Rr({},gs),od),Tl),tl),_d),Td),md),{},{"noise~":{translateArgs:function(){return{}},build:function(){return{inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"signal",id:"0"}}}}},"snapshot~":ll,"sig~":il,"samphold~":cl,"clip~":rl,"vline~":{translateArgs:function(){return{}},build:function(){return{inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"},2:{type:"message",id:"2"}},outlets:{0:{type:"signal",id:"0"}}}}},"line~":gl,"dac~":Uu,"adc~":Wu,"samplerate~":{translateArgs:function(){return{}},build:function(){return{inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}}}},"tabplay~":jl,"readsf~":Vl,"writesf~":$l,"mixer~":id,"vd~":{aliasTo:"delread4~"},"bp~":ql,"hip~":Ad,"lop~":Dd,"vcf~":Bd,"delwrite~":gd,"throw~":Jl,"catch~":Zl,"send~":nf,"s~":{aliasTo:"send~"},"receive~":rf,"r~":{aliasTo:"receive~"}},Mf),jf),qp),Qf),Kf),Vp),{},{bang:Nf,bng:{aliasTo:"bang"},b:{aliasTo:"bang"},list:Hd,loadbang:{translateArgs:function(){return{}},build:function(){return{inlets:{},outlets:{0:{type:"message",id:"0"}},isPushingMessages:!0}}},send:Yd,s:{aliasTo:"send"},receive:Qd,r:{aliasTo:"receive"},print:{translateArgs:function(e){var n="print:";return 1===e.args.length&&"-n"===e.args[0]?n="":e.args.length>=1&&(n=e.args.join(" ")+":"),{prefix:n}},build:function(){return{inlets:{0:{type:"message",id:"0"}},outlets:{}}}},trigger:cp,t:{aliasTo:"trigger"},change:lp,clip:mp,pipe:kp,moses:dp,pack:Ip,unpack:Op,spigot:vp,until:{translateArgs:function(){return{}},build:function(){return{inlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}},outlets:{0:{type:"message",id:"0"}}}}},random:wp,route:gp,select:{aliasTo:"route"},sel:{aliasTo:"route"},msg:{skipDollarArgsResolution:!0,translateArgs:function(e){var n=e.args,t=[[]];return n.forEach((function(e){","===e?t.push([]):t[t.length-1].push(e)})),{templates:t.filter((function(e){return e.length})).map((function(e){return"symbol"===e[0]?["string"===typeof e[1]?e[1]:""]:e}))}},build:function(){return{inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"}}}}},metro:of,timer:cf,delay:lf,del:{aliasTo:"delay"},line:vl,soundfiler:{translateArgs:function(){return{}},build:function(){return{inlets:{0:{type:"message",id:"0"}},outlets:{0:{type:"message",id:"0"},1:{type:"message",id:"1"}}}}},tabread:Nl,tabwrite:Rl,graph:{isNoop:!0},table:{isNoop:!0},array:{isNoop:!0},text:{isNoop:!0},cnv:{isNoop:!0},"block~":{isNoop:!0},openpanel:{isNoop:!0}}),Xp=Rr(Rr(Rr(Rr(Rr(Rr(Rr(Rr(Rr(Rr(Rr(Rr(Rr({},ad),Ol),nl),kd),Cd),hd),{},{"noise~":cd,"snapshot~":fl,"sig~":sl,"samphold~":ul,"clip~":ol,"vline~":hl,"line~":yl,"mixer~":sd,"dac~":Vu,"adc~":Gu,"samplerate~":Hu,"tabplay~":Bl,"readsf~":Wl,"writesf~":Kl,"delwrite~":yd,"bp~":Hl,"hip~":Ld,"lop~":jd,"vcf~":Vd,"throw~":Ql,"catch~":ef,"send~":tf,"receive~":af},Sf),Bf),Kp),qf),Jf),Up),{},{bang:Lf,list:Xd,send:Jd,receive:Zd,loadbang:zf,print:np,trigger:up,change:fp,clip:hp,pipe:xp,moses:pp,pack:Ep,unpack:Tp,spigot:bp,until:Sp,route:yp,random:_p,msg:Wd,metro:sf,timer:uf,delay:ff,line:bl,tabread:Ll,tabwrite:Dl,soundfiler:ep});function Yp(e){return Number.isInteger(e)&&e>=0}function Jp(e){this.name="ArgumentError",this.message=e}var Qp,Zp,em,nm=function(e,n){if(n=n||{},"function"!==typeof e)throw new Jp("fetch must be a function");if("object"!==typeof n)throw new Jp("defaults must be an object");if(void 0!==n.retries&&!Yp(n.retries))throw new Jp("retries must be a positive integer");if(void 0!==n.retryDelay&&!Yp(n.retryDelay)&&"function"!==typeof n.retryDelay)throw new Jp("retryDelay must be a positive integer or a function returning a positive integer");if(void 0!==n.retryOn&&!Array.isArray(n.retryOn)&&"function"!==typeof n.retryOn)throw new Jp("retryOn property expects an array or function");return n=Object.assign({retries:3,retryDelay:1e3,retryOn:[]},n),function(t,r){var a=n.retries,o=n.retryDelay,i=n.retryOn;if(r&&void 0!==r.retries){if(!Yp(r.retries))throw new Jp("retries must be a positive integer");a=r.retries}if(r&&void 0!==r.retryDelay){if(!Yp(r.retryDelay)&&"function"!==typeof r.retryDelay)throw new Jp("retryDelay must be a positive integer or a function returning a positive integer");o=r.retryDelay}if(r&&r.retryOn){if(!Array.isArray(r.retryOn)&&"function"!==typeof r.retryOn)throw new Jp("retryOn property expects an array or function");i=r.retryOn}return new Promise((function(n,s){var c=function(o){var c="undefined"!==typeof Request&&t instanceof Request?t.clone():t;e(c,r).then((function(e){if(Array.isArray(i)&&-1===i.indexOf(e.status))n(e);else if("function"===typeof i)try{return Promise.resolve(i(o,null,e)).then((function(t){t?u(o,null,e):n(e)})).catch(s)}catch(t){s(t)}else o<a?u(o,null,e):n(e)})).catch((function(e){if("function"===typeof i)try{Promise.resolve(i(o,e,null)).then((function(n){n?u(o,e,null):s(e)})).catch((function(e){s(e)}))}catch(e){s(e)}else o<a?u(o,e,null):s(e)}))};function u(e,n,t){var r="function"===typeof o?o(e,n,t):o;setTimeout((function(){c(++e)}),r)}c(0)}))}}(fetch),tm=function(){var e=eo(Ft().mark((function e(n,t){var r,a;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Blob([t],{type:"text/javascript"}),a=URL.createObjectURL(r),e.abrupt("return",n.audioWorklet.addModule(a));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),rm=function(){var e=eo(Ft().mark((function e(n){var t,r;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,nm(n,{retries:3});case 3:t=e.sent,e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(0),new um(t.status,e.t0.toString());case 9:if(t.ok){e.next=14;break}return e.next=12,t.text();case 12:throw r=e.sent,new um(t.status,r);case 14:return e.abrupt("return",t.arrayBuffer());case 15:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(n){return e.apply(this,arguments)}}(),am=function(e){for(var n=[],t=0;t<e.numberOfChannels;t++)n.push(e.getChannelData(t));return n},om=function(e,n){if(0===e.length)throw new Error("Received empty sound");for(var t=e[0].constructor,r=e[0].length,a=e.slice(0,n);e.length<n;)a.push(new t(r));return a},im=function(e){return cm(e)?new URL(".",e).href:new URL(".",new URL(e,document.URL).href).href},sm=function(e,n){return new URL(n,e).href},cm=function(e){try{if(new URL(e).origin!==new URL(document.URL,document.baseURI).origin)return!0}catch(Se){new URL(e,window.document.baseURI)}return!1},um=function(e){co(t,e);var n=po(t);function t(e,r){return io(this,t),n.call(this,"Error ".concat(e," : ").concat(r))}return oo(t)}(ho(Error)),lm=function(e){return tm(e,"var AssemblyscriptWasmBindings = (function (exports) {\n    'use strict';\n\n    const mapObject = (src, func) => {\n        const dest = {};\n        Object.entries(src).forEach(([key, srcValue], i) => {\n            dest[key] = func(srcValue, key, i);\n        });\n        return dest;\n    };\n    const mapArray = (src, func) => {\n        const dest = {};\n        src.forEach((srcValue, i) => {\n            const [key, destValue] = func(srcValue, i);\n            dest[key] = destValue;\n        });\n        return dest;\n    };\n\n    const getFloatArrayType = (bitDepth) => bitDepth === 64 ? Float64Array : Float32Array;\n\n    const liftString = (wasmExports, pointer) => {\n        if (!pointer)\n            return null;\n        pointer = pointer >>> 0;\n        const end = (pointer +\n            new Uint32Array(wasmExports.memory.buffer)[(pointer - 4) >>> 2]) >>>\n            1;\n        const memoryU16 = new Uint16Array(wasmExports.memory.buffer);\n        let start = pointer >>> 1;\n        let string = '';\n        while (end - start > 1024) {\n            string += String.fromCharCode(...memoryU16.subarray(start, (start += 1024)));\n        }\n        return string + String.fromCharCode(...memoryU16.subarray(start, end));\n    };\n    const lowerString = (wasmExports, value) => {\n        if (value == null)\n            return 0;\n        const length = value.length, pointer = wasmExports.__new(length << 1, 1) >>> 0, memoryU16 = new Uint16Array(wasmExports.memory.buffer);\n        for (let i = 0; i < length; ++i)\n            memoryU16[(pointer >>> 1) + i] = value.charCodeAt(i);\n        return pointer;\n    };\n    const readTypedArray = (wasmExports, constructor, pointer) => {\n        if (!pointer)\n            return null;\n        const memoryU32 = new Uint32Array(wasmExports.memory.buffer);\n        return new constructor(wasmExports.memory.buffer, memoryU32[(pointer + 4) >>> 2], memoryU32[(pointer + 8) >>> 2] / constructor.BYTES_PER_ELEMENT);\n    };\n    const lowerFloatArray = (wasmExports, bitDepth, data) => {\n        const arrayType = getFloatArrayType(bitDepth);\n        const arrayPointer = wasmExports.createFloatArray(data.length);\n        const array = readTypedArray(wasmExports, arrayType, arrayPointer);\n        array.set(data);\n        return { array, arrayPointer };\n    };\n    const lowerListOfFloatArrays = (wasmExports, bitDepth, data) => {\n        const arraysPointer = wasmExports.core_createListOfArrays();\n        data.forEach((array) => {\n            const { arrayPointer } = lowerFloatArray(wasmExports, bitDepth, array);\n            wasmExports.core_pushToListOfArrays(arraysPointer, arrayPointer);\n        });\n        return arraysPointer;\n    };\n    const readListOfFloatArrays = (wasmExports, bitDepth, listOfArraysPointer) => {\n        const listLength = wasmExports.core_getListOfArraysLength(listOfArraysPointer);\n        const arrays = [];\n        const arrayType = getFloatArrayType(bitDepth);\n        for (let i = 0; i < listLength; i++) {\n            const arrayPointer = wasmExports.core_getListOfArraysElem(listOfArraysPointer, i);\n            arrays.push(readTypedArray(wasmExports, arrayType, arrayPointer));\n        }\n        return arrays;\n    };\n\n    const liftMessage = (wasmExports, messagePointer) => {\n        const messageTokenTypesPointer = wasmExports.msg_getTokenTypes(messagePointer);\n        const messageTokenTypes = readTypedArray(wasmExports, Int32Array, messageTokenTypesPointer);\n        const message = [];\n        messageTokenTypes.forEach((tokenType, tokenIndex) => {\n            if (tokenType === wasmExports.MSG_FLOAT_TOKEN.valueOf()) {\n                message.push(wasmExports.msg_readFloatToken(messagePointer, tokenIndex));\n            }\n            else if (tokenType === wasmExports.MSG_STRING_TOKEN.valueOf()) {\n                const stringPointer = wasmExports.msg_readStringToken(messagePointer, tokenIndex);\n                message.push(liftString(wasmExports, stringPointer));\n            }\n        });\n        return message;\n    };\n    const lowerMessage = (wasmExports, message) => {\n        const template = message.reduce((template, value) => {\n            if (typeof value === 'number') {\n                template.push(wasmExports.MSG_FLOAT_TOKEN.valueOf());\n            }\n            else if (typeof value === 'string') {\n                template.push(wasmExports.MSG_STRING_TOKEN.valueOf());\n                template.push(value.length);\n            }\n            else {\n                throw new Error(`invalid message value ${value}`);\n            }\n            return template;\n        }, []);\n        const templateArrayPointer = wasmExports.msg_createTemplate(template.length);\n        const loweredTemplateArray = readTypedArray(wasmExports, Int32Array, templateArrayPointer);\n        loweredTemplateArray.set(template);\n        const messagePointer = wasmExports.msg_create(templateArrayPointer);\n        message.forEach((value, index) => {\n            if (typeof value === 'number') {\n                wasmExports.msg_writeFloatToken(messagePointer, index, value);\n            }\n            else if (typeof value === 'string') {\n                const stringPointer = lowerString(wasmExports, value);\n                wasmExports.msg_writeStringToken(messagePointer, index, stringPointer);\n            }\n        });\n        return messagePointer;\n    };\n\n    const instantiateWasmModule = async (wasmBuffer, wasmImports = {}) => {\n        const instanceAndModule = await WebAssembly.instantiate(wasmBuffer, {\n            env: {\n                abort: (messagePointer, _, lineNumber, columnNumber) => {\n                    const message = liftString(wasmExports, messagePointer);\n                    lineNumber = lineNumber;\n                    columnNumber = columnNumber;\n                    (() => {\n                        throw Error(`${message} at ${lineNumber}:${columnNumber}`);\n                    })();\n                },\n                seed: () => {\n                    return (() => {\n                        return Date.now() * Math.random();\n                    })();\n                },\n                'console.log': (textPointer) => {\n                    console.log(liftString(wasmExports, textPointer));\n                },\n            },\n            ...wasmImports,\n        });\n        const wasmExports = instanceAndModule.instance\n            .exports;\n        return instanceAndModule.instance;\n    };\n\n    const createEngine = async (wasmBuffer) => {\n        const engine = new AssemblyScriptWasmEngine(wasmBuffer);\n        await engine.initialize();\n        return engine;\n    };\n    class AssemblyScriptWasmEngine {\n        constructor(wasmBuffer) {\n            this.wasmBuffer = wasmBuffer;\n        }\n        async initialize() {\n            this.metadata = await readMetadata(this.wasmBuffer);\n            this.bitDepth = this.metadata.audioSettings.bitDepth;\n            this.arrayType = getFloatArrayType(this.bitDepth);\n            const wasmImports = {\n                ...this._fsImports(),\n                ...this._outletListenersImports(),\n            };\n            const wasmInstance = await instantiateWasmModule(this.wasmBuffer, {\n                input: wasmImports,\n            });\n            this.wasmExports =\n                wasmInstance.exports;\n            this.commons = this._bindCommons();\n            this.fs = this._bindFs();\n            this.inletCallers = this._bindInletCallers();\n            this.outletListeners = this._bindOutletListeners();\n        }\n        configure(sampleRate, blockSize) {\n            this.blockSize = blockSize;\n            this.metadata.audioSettings.blockSize = blockSize;\n            this.metadata.audioSettings.sampleRate = sampleRate;\n            this.wasmExports.configure(sampleRate, blockSize);\n            this._updateWasmInOuts();\n        }\n        loop(input, output) {\n            for (let channel = 0; channel < input.length; channel++) {\n                this.wasmInput.set(input[channel], channel * this.blockSize);\n            }\n            this._updateWasmInOuts();\n            this.wasmExports.loop();\n            this._updateWasmInOuts();\n            for (let channel = 0; channel < output.length; channel++) {\n                output[channel].set(this.wasmOutput.subarray(this.blockSize * channel, this.blockSize * (channel + 1)));\n            }\n        }\n        _updateWasmInOuts() {\n            this.wasmOutput = readTypedArray(this.wasmExports, this.arrayType, this.wasmExports.getOutput());\n            this.wasmInput = readTypedArray(this.wasmExports, this.arrayType, this.wasmExports.getInput());\n        }\n        _bindCommons() {\n            return {\n                getArray: (arrayName) => {\n                    const arrayNamePointer = lowerString(this.wasmExports, arrayName);\n                    const arrayPointer = this.wasmExports.commons_getArray(arrayNamePointer);\n                    return readTypedArray(this.wasmExports, this.arrayType, arrayPointer);\n                },\n                setArray: (arrayName, array) => {\n                    const stringPointer = lowerString(this.wasmExports, arrayName);\n                    const { arrayPointer } = lowerFloatArray(this.wasmExports, this.bitDepth, array);\n                    this.wasmExports.commons_setArray(stringPointer, arrayPointer);\n                    this._updateWasmInOuts();\n                },\n            };\n        }\n        _bindFs() {\n            return {\n                sendReadSoundFileResponse: (operationId, status, sound) => {\n                    let soundPointer = 0;\n                    if (sound) {\n                        soundPointer = lowerListOfFloatArrays(this.wasmExports, this.bitDepth, sound);\n                    }\n                    this.wasmExports.fs_onReadSoundFileResponse(operationId, status, soundPointer);\n                    this._updateWasmInOuts();\n                },\n                sendWriteSoundFileResponse: this.wasmExports.fs_onWriteSoundFileResponse,\n                sendSoundStreamData: (operationId, sound) => {\n                    const soundPointer = lowerListOfFloatArrays(this.wasmExports, this.bitDepth, sound);\n                    const writtenFrameCount = this.wasmExports.fs_onSoundStreamData(operationId, soundPointer);\n                    this._updateWasmInOuts();\n                    return writtenFrameCount;\n                },\n                closeSoundStream: this.wasmExports.fs_onCloseSoundStream,\n                onReadSoundFile: () => undefined,\n                onWriteSoundFile: () => undefined,\n                onOpenSoundReadStream: () => undefined,\n                onOpenSoundWriteStream: () => undefined,\n                onSoundStreamData: () => undefined,\n                onCloseSoundStream: () => undefined,\n            };\n        }\n        _fsImports() {\n            let wasmImports = {\n                i_fs_readSoundFile: (operationId, urlPointer, infoPointer) => {\n                    const url = liftString(this.wasmExports, urlPointer);\n                    const info = liftMessage(this.wasmExports, infoPointer);\n                    this.fs.onReadSoundFile(operationId, url, info);\n                },\n                i_fs_writeSoundFile: (operationId, soundPointer, urlPointer, infoPointer) => {\n                    const sound = readListOfFloatArrays(this.wasmExports, this.bitDepth, soundPointer);\n                    const url = liftString(this.wasmExports, urlPointer);\n                    const info = liftMessage(this.wasmExports, infoPointer);\n                    this.fs.onWriteSoundFile(operationId, sound, url, info);\n                },\n                i_fs_openSoundReadStream: (operationId, urlPointer, infoPointer) => {\n                    const url = liftString(this.wasmExports, urlPointer);\n                    const info = liftMessage(this.wasmExports, infoPointer);\n                    this._updateWasmInOuts();\n                    this.fs.onOpenSoundReadStream(operationId, url, info);\n                },\n                i_fs_openSoundWriteStream: (operationId, urlPointer, infoPointer) => {\n                    const url = liftString(this.wasmExports, urlPointer);\n                    const info = liftMessage(this.wasmExports, infoPointer);\n                    this.fs.onOpenSoundWriteStream(operationId, url, info);\n                },\n                i_fs_sendSoundStreamData: (operationId, blockPointer) => {\n                    const block = readListOfFloatArrays(this.wasmExports, this.bitDepth, blockPointer);\n                    this.fs.onSoundStreamData(operationId, block);\n                },\n                i_fs_closeSoundStream: (...args) => this.fs.onCloseSoundStream(...args),\n            };\n            return wasmImports;\n        }\n        _bindInletCallers() {\n            return mapObject(this.metadata.compilation.inletCallerSpecs, (inletIds, nodeId) => mapArray(inletIds, (inletId) => [\n                inletId,\n                (message) => {\n                    const messagePointer = lowerMessage(this.wasmExports, message);\n                    this.wasmExports[this.metadata.compilation.codeVariableNames\n                        .inletCallers[nodeId][inletId]](messagePointer);\n                },\n            ]));\n        }\n        _bindOutletListeners() {\n            return mapObject(this.metadata.compilation.outletListenerSpecs, (outletIds) => mapArray(outletIds, (outletId) => [\n                outletId,\n                {\n                    onMessage: () => undefined,\n                },\n            ]));\n        }\n        _outletListenersImports() {\n            const wasmImports = {};\n            const { codeVariableNames } = this.metadata.compilation;\n            Object.entries(this.metadata.compilation.outletListenerSpecs).forEach(([nodeId, outletIds]) => {\n                outletIds.forEach((outletId) => {\n                    const listenerName = codeVariableNames.outletListeners[nodeId][outletId];\n                    wasmImports[listenerName] = (messagePointer) => {\n                        const message = liftMessage(this.wasmExports, messagePointer);\n                        this.outletListeners[nodeId][outletId].onMessage(message);\n                    };\n                });\n            });\n            return wasmImports;\n        }\n    }\n    const readMetadata = async (wasmBuffer) => {\n        const inputImports = {};\n        const wasmModule = WebAssembly.Module.imports(new WebAssembly.Module(wasmBuffer));\n        wasmModule\n            .filter((imprt) => imprt.module === 'input' && imprt.kind === 'function')\n            .forEach((imprt) => (inputImports[imprt.name] = () => undefined));\n        const wasmInstance = await instantiateWasmModule(wasmBuffer, {\n            input: inputImports,\n        });\n        const wasmExports = wasmInstance.exports;\n        const stringPointer = wasmExports.metadata.valueOf();\n        const metadataJSON = liftString(wasmExports, stringPointer);\n        return JSON.parse(metadataJSON);\n    };\n\n    exports.AssemblyScriptWasmEngine = AssemblyScriptWasmEngine;\n    exports.createEngine = createEngine;\n    exports.readMetadata = readMetadata;\n\n    return exports;\n\n})({});\n//# sourceMappingURL=assemblyscript-wasm-bindings.iife.js.map\n;\n/*\n * Copyright (c) 2022-2023 S\xe9bastien Piquemal <sebpiq@protonmail.com>, Chris McCormick.\n *\n * This file is part of WebPd\n * (see https://github.com/sebpiq/WebPd).\n *\n * This program is free software: you can redistribute it and/or modify\n * it under the terms of the GNU Lesser General Public License as published by\n * the Free Software Foundation, either version 3 of the License, or\n * (at your option) any later version.\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU Lesser General Public License for more details.\n *\n * You should have received a copy of the GNU Lesser General Public License\n * along with this program. If not, see <http://www.gnu.org/licenses/>.\n */\nconst FS_CALLBACK_NAMES = [\n    'onReadSoundFile',\n    'onOpenSoundReadStream',\n    'onWriteSoundFile',\n    'onOpenSoundWriteStream',\n    'onSoundStreamData',\n    'onCloseSoundStream',\n];\nclass WasmWorkletProcessor extends AudioWorkletProcessor {\n    constructor() {\n        super();\n        this.port.onmessage = this.onMessage.bind(this);\n        this.settings = {\n            blockSize: null,\n            sampleRate,\n        };\n        this.dspConfigured = false;\n        this.engine = null;\n    }\n    process(inputs, outputs) {\n        const output = outputs[0];\n        const input = inputs[0];\n        if (!this.dspConfigured) {\n            if (!this.engine) {\n                return true;\n            }\n            this.settings.blockSize = output[0].length;\n            this.engine.configure(this.settings.sampleRate, this.settings.blockSize);\n            this.dspConfigured = true;\n        }\n        this.engine.loop(input, output);\n        return true;\n    }\n    onMessage(messageEvent) {\n        const message = messageEvent.data;\n        switch (message.type) {\n            case 'code:WASM':\n                this.setWasm(message.payload.wasmBuffer);\n                break;\n            case 'code:JS':\n                this.setJsCode(message.payload.jsCode);\n                break;\n            case 'inletCaller':\n                this.engine.inletCallers[message.payload.nodeId][message.payload.portletId](message.payload.message);\n                break;\n            case 'fs':\n                const returned = this.engine.fs[message.payload.functionName].apply(null, message.payload.arguments);\n                this.port.postMessage({\n                    type: 'fs',\n                    payload: {\n                        functionName: message.payload.functionName + '_return',\n                        operationId: message.payload.arguments[0],\n                        returned,\n                    },\n                });\n                break;\n            case 'destroy':\n                this.destroy();\n                break;\n            default:\n                new Error(`unknown message type ${message.type}`);\n        }\n    }\n    // TODO : control for channelCount of wasmModule\n    setWasm(wasmBuffer) {\n        return AssemblyscriptWasmBindings.createEngine(wasmBuffer).then((engine) => {\n            this.setEngine(engine);\n            return engine;\n        });\n    }\n    setJsCode(code) {\n        const engine = new Function(`\n            ${code}\n            return exports\n        `)();\n        this.setEngine(engine);\n    }\n    setEngine(engine) {\n        FS_CALLBACK_NAMES.forEach((functionName) => {\n            ;\n            engine.fs[functionName] = (...args) => {\n                // We don't use transferables, because that would imply reallocating each time new array in the engine.\n                this.port.postMessage({\n                    type: 'fs',\n                    payload: {\n                        functionName,\n                        arguments: args,\n                    },\n                });\n            };\n        });\n        this.engine = engine;\n        this.dspConfigured = false;\n    }\n    destroy() {\n        this.process = () => false;\n    }\n}\nregisterProcessor('webpd-node', WasmWorkletProcessor);\n")},fm={},dm={},pm=oo((function e(n,t){io(this,e),this.url=n,this.sound=t,this.frameCount=t[0].length,this.readPosition=0})),mm=function(){var e=eo(Ft().mark((function e(n){var t;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!fm[n]){e.next=2;break}return e.abrupt("return",fm[n]);case 2:return e.next=4,rm(n);case 4:return t=e.sent,e.abrupt("return",{type:"binary",data:t});case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),hm=function(){var e=eo(Ft().mark((function e(n,t){var r,a;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=fm[n],e.t0){e.next=5;break}return e.next=4,mm(n);case 4:e.t0=e.sent;case 5:r=e.t0,e.t1=r.type,e.next="binary"===e.t1?9:"sound"===e.t1?13:14;break;case 9:return e.next=11,t.decodeAudioData(r.data);case 11:return a=e.sent,e.abrupt("return",am(a));case 13:return e.abrupt("return",r.data.map((function(e){return e.slice()})));case 14:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),gm=function(){var e=eo(Ft().mark((function e(n,t){return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fm[t]={type:"sound",data:n};case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),ym=function(){var e=eo(Ft().mark((function e(n,t,r,a){var o;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hm(t,a);case 2:return o=e.sent,dm[n]=new pm(t,om(o,r)),e.abrupt("return",dm[n]);case 5:case"end":return e.stop()}}),e)})));return function(n,t,r,a){return e.apply(this,arguments)}}(),vm=function(){var e=eo(Ft().mark((function e(n,t,r){var a,o;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=[],o=0;o<r;o++)a.push(new Float32Array(0));return dm[n]=new pm(t,a),fm[t]={type:"sound",data:a},e.abrupt("return",dm[n]);case 5:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),bm=function(e){return dm[e]},Sm=function(e){console.log("KILL STREAM",e),delete dm[e]},wm=function(e,n){var t=e.sound.map((function(t){return t.slice(e.readPosition,e.readPosition+n)}));return e.readPosition+=n,t},_m=function(e,n){e.sound=e.sound.map((function(e,t){var r=new Float32Array(e.length+n[t].length);return r.set(e),r.set(n[t],e.length),r})),e.frameCount=e.sound[0].length,fm[e.url].data=e.sound},km={writeSound:gm,readSound:hm,readStreamSound:ym,writeStreamSound:vm,pullBlock:wm,pushBlock:_m},xm=function(){var e=eo(Ft().mark((function e(n,t,r){return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"onCloseSoundStream"===t.functionName&&Sm(t.arguments[0]);case 1:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),Im=function(){var e=eo(Ft().mark((function e(n,t,r){var a,o,i,s,c,u,l,f;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("onReadSoundFile"!==t.functionName){e.next=19;break}return a=bt(t.arguments,3),o=a[0],i=a[1],s=bt(a[2],1),c=s[0],u=sm(r.rootUrl,i),l=0,f=null,e.prev=5,e.next=8,km.readSound(u,n.context);case 8:f=e.sent,e.next=15;break;case 11:e.prev=11,e.t0=e.catch(5),l=1,console.error(e.t0);case 15:f&&(f=om(f,c)),n.port.postMessage({type:"fs",payload:{functionName:"sendReadSoundFileResponse",arguments:[o,l,f]}},f.map((function(e){return e.buffer}))),e.next=20;break;case 19:t.functionName;case 20:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(n,t,r){return e.apply(this,arguments)}}(),Em=441e3,Om=function(){var e=eo(Ft().mark((function e(n,t,r){var a,o,i,s,c,u;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("onOpenSoundReadStream"!==t.functionName){e.next=16;break}return a=bt(t.arguments,3),o=a[0],i=a[1],s=bt(a[2],1),c=s[0],e.prev=2,u=sm(r.rootUrl,i),e.next=6,km.readStreamSound(o,u,c,n.context);case 6:e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),console.error(e.t0),n.port.postMessage({type:"fs",payload:{functionName:"closeSoundStream",arguments:[o,1]}}),e.abrupt("return");case 13:Tm(n,o,0),e.next=24;break;case 16:if("sendSoundStreamData_return"!==t.functionName){e.next=23;break}if(bm(t.operationId)){e.next=20;break}throw new Error("unknown stream ".concat(t.operationId));case 20:Tm(n,t.operationId,t.returned),e.next=24;break;case 23:"closeSoundStream_return"===t.functionName&&bm(t.operationId)&&Sm(t.operationId);case 24:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(n,t,r){return e.apply(this,arguments)}}(),Tm=function(e,n,t){var r=e.context.sampleRate,a=Math.max(t-220500,10)/r,o=Em-(t-a*r);setTimeout((function(){var t=bm(n);if(t)if(t.readPosition<t.frameCount){var r=wm(t,o);e.port.postMessage({type:"fs",payload:{functionName:"sendSoundStreamData",arguments:[n,r]}},r.map((function(e){return e.buffer})))}else e.port.postMessage({type:"fs",payload:{functionName:"closeSoundStream",arguments:[n,0]}});else console.log("stream ".concat(n," was maybe closed"))}),1e3*a)},Cm=function(){var e=eo(Ft().mark((function e(n,t,r){var a,o,i,s,c,u,l,f;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("onWriteSoundFile"!==t.functionName){e.next=10;break}return a=bt(t.arguments,4),o=a[0],i=a[1],s=a[2],c=bt(a[3],1),u=c[0],l=om(i,u),f=sm(r.rootUrl,s),e.next=6,km.writeSound(l,f);case 6:0,n.port.postMessage({type:"fs",payload:{functionName:"sendWriteSoundFileResponse",arguments:[o,0]}}),e.next=11;break;case 10:t.functionName;case 11:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),Am=function(){var e=eo(Ft().mark((function e(n,t,r){var a,o,i,s,c,u,l,f,d,p;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("onOpenSoundWriteStream"!==t.functionName){e.next=7;break}return a=bt(t.arguments,3),o=a[0],i=a[1],s=bt(a[2],1),c=s[0],u=sm(r.rootUrl,i),e.next=5,km.writeStreamSound(o,u,c);case 5:e.next=16;break;case 7:if("onSoundStreamData"!==t.functionName){e.next=15;break}if(l=bt(t.arguments,2),f=l[0],d=l[1],p=bm(f)){e.next=12;break}throw new Error("unknown stream ".concat(f));case 12:_m(p,d),e.next=16;break;case 15:"closeSoundStream_return"===t.functionName&&bm(t.operationId)&&Sm(t.operationId);case 16:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),Fm=function(){var e=eo(Ft().mark((function e(n,t,r){var a,o;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.data,o=a.payload,"fs"===a.type){e.next=4;break}throw new Error("Unknown message type from node ".concat(a.type));case 4:if("onReadSoundFile"!==o.functionName&&"sendReadSoundFileResponse_return"!==o.functionName){e.next=8;break}Im(n,o,r),e.next=30;break;case 8:if("onOpenSoundReadStream"!==o.functionName&&"sendSoundStreamData_return"!==o.functionName){e.next=12;break}Om(n,o,r),e.next=30;break;case 12:if("onWriteSoundFile"!==o.functionName&&"sendWriteSoundFileResponse_return"!==o.functionName){e.next=16;break}Cm(n,o,r),e.next=30;break;case 16:if("onOpenSoundWriteStream"!==o.functionName&&"onSoundStreamData"!==o.functionName){e.next=20;break}Am(n,o,r),e.next=30;break;case 20:if("closeSoundStream_return"!==o.functionName){e.next=25;break}Am(n,o,r),Om(n,o,r),e.next=30;break;case 25:if("onCloseSoundStream"!==o.functionName){e.next=29;break}xm(n,o),e.next=30;break;case 29:throw new Error("Unknown callback ".concat(o.functionName));case 30:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),Pm=function(e){co(t,e);var n=po(t);function t(e){return io(this,t),n.call(this,e,"webpd-node",{numberOfOutputs:1,outputChannelCount:[2]})}return oo(t,[{key:"destroy",value:function(){this.port.postMessage({type:"destroy",payload:{}})}}]),t}(ho(AudioWorkletNode));!function(e){e.createArtefacts=Eu,e.performBuildStep=Tu,e.preloadArtefact=Ou,e.listOutputFormats=Fu,e.listBuildSteps=Au,e.guessFormat=Cu,e.setAsc=to,e.buildGraphNodeId=Es,e.makeAbstractionLoader=ni,e.UnknownNodeTypeError=ti,e.BUILD_FORMATS=xu,e.NODE_BUILDERS=Hp,e.NODE_IMPLEMENTATIONS=Xp}(Qp||(Qp={})),function(e){e.WebPdWorkletNode=Pm,e.registerWebPdWorkletNode=lm,e.fs={web:Fm},e.urlDirName=im}(Zp||(Zp={})),function(e){e.discoverGuiControls=Gs,e.traverseGuiControls=Ks,e.collectGuiControlsInletCallerSpecs=qs}(em||(em={}));var Mm=ma("shared/clean"),Nm=0,Lm=1,Rm=2,Dm=3,jm={artefacts:Qp.createArtefacts()},Bm={buildStatus:Nm,step:null},zm=ga({name:"buildOutput",initialState:Bm,reducers:{startBuild:function(e){e.buildStatus=Lm},buildSuccess:function(e,n){jm.artefacts=n.payload.artefacts,e.buildStatus=Rm},startStep:function(e,n){e.step=n.payload},stepComplete:function(e,n){jm.artefacts=n.payload.artefacts,1===n.payload.status&&(e.buildStatus=Dm)}},extraReducers:function(e){var n=function(){return jm.artefacts=Qp.createArtefacts(),Bm};e.addCase(Mm,n),e.addCase(Qa.actions.setFormat,n),e.addCase(Xa.actions.setLocalFile,n),e.addCase(Xa.actions.fetchUrlSuccess,n)}}),Um={warnings:null,errors:null},Vm=ga({name:"console",initialState:Um,reducers:{setState:function(e,n){return n.payload}},extraReducers:function(e){e.addCase(zm.actions.startBuild,(function(){return Um})),e.addCase(zm.actions.stepComplete,(function(e,n){n.payload.warnings&&(e.warnings=[].concat(Mn(e.warnings||[]),Mn(n.payload.warnings)),0===e.warnings.length&&(e.warnings=null)),n.payload.errors&&(e.errors=[].concat(Mn(e.errors||[]),Mn(n.payload.errors)))})),e.addCase(Xa.actions.setUrl,(function(){return Um})),e.addCase(Xa.actions.setLocalFile,(function(){return Um})),e.addCase(Xa.actions.clear,(function(){return Um})),e.addCase(Qa.actions.setFormat,(function(){return Um})),e.addCase(Xa.actions.fetchUrlError,(function(e,n){e.errors=[n.payload]}))}}),Wm=ga({name:"app",initialState:{isInitialized:!1,willBuildOnLoad:!1,debug:!1},reducers:{setWillBuildOnLoad:function(e,n){e.willBuildOnLoad=n.payload},initializationDone:function(e){e.isInitialized=!0},setDebug:function(e,n){e.debug=n.payload},pointerUp:function(){}},extraReducers:function(e){e.addCase(zm.actions.buildSuccess,(function(e){e.willBuildOnLoad=!0}))}}),Gm=t(457),$m="NOT_FOUND";var Km=function(e,n){return e===n};function qm(e,n){var t="object"===typeof n?n:{equalityCheck:n},r=t.equalityCheck,a=void 0===r?Km:r,o=t.maxSize,i=void 0===o?1:o,s=t.resultEqualityCheck,c=function(e){return function(n,t){if(null===n||null===t||n.length!==t.length)return!1;for(var r=n.length,a=0;a<r;a++)if(!e(n[a],t[a]))return!1;return!0}}(a),u=1===i?function(e){var n;return{get:function(t){return n&&e(n.key,t)?n.value:$m},put:function(e,t){n={key:e,value:t}},getEntries:function(){return n?[n]:[]},clear:function(){n=void 0}}}(c):function(e,n){var t=[];function r(e){var r=t.findIndex((function(t){return n(e,t.key)}));if(r>-1){var a=t[r];return r>0&&(t.splice(r,1),t.unshift(a)),a.value}return $m}return{get:r,put:function(n,a){r(n)===$m&&(t.unshift({key:n,value:a}),t.length>e&&t.pop())},getEntries:function(){return t},clear:function(){t=[]}}}(i,c);function l(){var n=u.get(arguments);if(n===$m){if(n=e.apply(null,arguments),s){var t=u.getEntries().find((function(e){return s(e.value,n)}));t&&(n=t.value)}u.put(arguments,n)}return n}return l.clearCache=function(){return u.clear()},l}function Hm(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o,i=0,s={memoizeOptions:void 0},c=r.pop();if("object"===typeof c&&(s=c,c=r.pop()),"function"!==typeof c)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof c+"]");var u=s.memoizeOptions,l=void 0===u?t:u,f=Array.isArray(l)?l:[l],d=function(e){var n=Array.isArray(e[0])?e[0]:e;if(!n.every((function(e){return"function"===typeof e}))){var t=n.map((function(e){return"function"===typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+t+"]")}return n}(r),p=e.apply(void 0,[function(){return i++,c.apply(null,arguments)}].concat(f)),m=e((function(){for(var e=[],n=d.length,t=0;t<n;t++)e.push(d[t].apply(null,arguments));return o=p.apply(null,e)}));return Object.assign(m,{resultFunc:c,memoizedResultFunc:p,dependencies:d,lastResult:function(){return o},recomputations:function(){return i},resetRecomputations:function(){return i=0}}),m}}var Xm=Hm(qm),Ym=function(e){return e.buildInput.url},Jm=function(e){return e.buildInput.filepath},Qm=function(e){return e.buildInput.arrayBuffer},Zm=Xm(Ym,Jm,(function(e,n){var t=e||n;return t?Qp.guessFormat(t)||"pd":null})),eh=Xm(Zm,Qm,(function(e,n){return null===e||null===n?null:Qp.preloadArtefact(Qp.createArtefacts(),n,e)})),nh=function(e){return e.buildOutput.format},th=function(e){return e.buildOutput.codeTarget},rh=function(e){return e.buildOutput.previewDurationSeconds},ah=Xm(Zm,(function(e){e=e||"pd";var n=Qp.listOutputFormats(e);return["patchPlayer"].concat(Mn(Ya.filter((function(e){return n.has(e)}))))})),oh=function(e){return"@@redux-saga/"+e},ih=oh("CANCEL_PROMISE"),sh=oh("CHANNEL_END"),ch=oh("IO"),uh=oh("MATCH"),lh=oh("MULTICAST"),fh=oh("SAGA_ACTION"),dh=oh("SELF_CANCELLATION"),ph=oh("TASK"),mh=oh("TASK_CANCEL"),hh=oh("TERMINATE"),gh=oh("LOCATION"),yh=t(462),vh=function(e){return null===e||void 0===e},bh=function(e){return null!==e&&void 0!==e},Sh=function(e){return"function"===typeof e},wh=function(e){return"string"===typeof e},_h=Array.isArray,kh=function(e){return e&&Sh(e.then)},xh=function(e){return e&&Sh(e.next)&&Sh(e.throw)},Ih=function e(n){return n&&(wh(n)||Th(n)||Sh(n)||_h(n)&&n.every(e))},Eh=function(e){return e&&Sh(e.take)&&Sh(e.close)},Oh=function(e){return Sh(e)&&e.hasOwnProperty("toString")},Th=function(e){return Boolean(e)&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype},Ch=function(e){return Eh(e)&&e[lh]},Ah=2147483647;var Fh=function(e,n){var t;void 0===n&&(n=!0);var r=new Promise((function(r){t=setTimeout(r,Math.min(Ah,e),n)}));return r[ih]=function(){clearTimeout(t)},r},Ph=function(e){return function(){return e}},Mh=Ph(!0),Nh=function(){};var Lh=function(e){return e};"function"===typeof Symbol&&Symbol.asyncIterator&&Symbol.asyncIterator;var Rh=function(e,n){(0,yh.Z)(e,n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(n).forEach((function(t){e[t]=n[t]}))},Dh=function(e,n){var t;return(t=[]).concat.apply(t,n.map(e))};function jh(e,n){var t=e.indexOf(n);t>=0&&e.splice(t,1)}var Bh=function(e){throw e},zh=function(e){return{value:e,done:!0}};function Uh(e,n,t){void 0===n&&(n=Bh),void 0===t&&(t="iterator");var r={meta:{name:t},next:e,throw:n,return:zh,isSagaIterator:!0};return"undefined"!==typeof Symbol&&(r[Symbol.iterator]=function(){return r}),r}function Vh(e,n){var t=n.sagaStack;console.error(e),console.error(t)}var Wh=function(e){return Array.apply(null,new Array(e))},Gh=function(e){return function(n){return e(Object.defineProperty(n,fh,{value:!0}))}},$h=function(e){return e===hh},Kh=function(e){return e===mh},qh=function(e){return $h(e)||Kh(e)};function Hh(e,n){var t=Object.keys(e),r=t.length;var a,o=0,i=_h(e)?Wh(r):{},s={};return t.forEach((function(e){var t=function(t,s){a||(s||qh(t)?(n.cancel(),n(t,s)):(i[e]=t,++o===r&&(a=!0,n(i))))};t.cancel=Nh,s[e]=t})),n.cancel=function(){a||(a=!0,t.forEach((function(e){return s[e].cancel()})))},s}function Xh(e){return{name:e.name||"anonymous",location:Yh(e)}}function Yh(e){return e[gh]}var Jh="Channel's Buffer overflow!",Qh=1,Zh=3,eg=4;function ng(e,n){void 0===e&&(e=10);var t=new Array(e),r=0,a=0,o=0,i=function(n){t[a]=n,a=(a+1)%e,r++},s=function(){if(0!=r){var n=t[o];return t[o]=null,r--,o=(o+1)%e,n}},c=function(){for(var e=[];r;)e.push(s());return e};return{isEmpty:function(){return 0==r},put:function(s){var u;if(r<e)i(s);else switch(n){case Qh:throw new Error(Jh);case Zh:t[a]=s,o=a=(a+1)%e;break;case eg:u=2*e,t=c(),r=t.length,a=t.length,o=0,t.length=u,e=u,i(s)}},take:s,flush:c}}var tg=function(e){return ng(e,eg)},rg="TAKE",ag="PUT",og="ALL",ig="RACE",sg="CALL",cg="CPS",ug="FORK",lg="JOIN",fg="CANCEL",dg="SELECT",pg="ACTION_CHANNEL",mg="CANCELLED",hg="FLUSH",gg="GET_CONTEXT",yg="SET_CONTEXT",vg=function(e,n){var t;return(t={})[ch]=!0,t.combinator=!1,t.type=e,t.payload=n,t};function bg(e,n){return void 0===e&&(e="*"),Ih(e)?(bh(n)&&console.warn("take(pattern) takes one argument but two were provided. Consider passing an array for listening to several action types"),vg(rg,{pattern:e})):Ch(e)&&bh(n)&&Ih(n)?vg(rg,{channel:e,pattern:n}):Eh(e)?(bh(n)&&console.warn("take(channel) takes one argument but two were provided. Second argument is ignored."),vg(rg,{channel:e})):void 0}function Sg(e,n){return vh(n)&&(n=e,e=void 0),vg(ag,{channel:e,action:n})}function wg(e){var n=vg(og,e);return n.combinator=!0,n}function _g(e,n){var t,r=null;return Sh(e)?t=e:(_h(e)?(r=e[0],t=e[1]):(r=e.context,t=e.fn),r&&wh(t)&&Sh(r[t])&&(t=r[t])),{context:r,fn:t,args:n}}function kg(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return vg(sg,_g(e,t))}function xg(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return vg(ug,_g(e,t))}function Ig(e){void 0===e&&(e=Lh);for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];return vg(dg,{selector:e,args:t})}var Eg=kg.bind(null,Fh);function Og(){var e={};return e.promise=new Promise((function(n,t){e.resolve=n,e.reject=t})),e}var Tg=Og,Cg=[],Ag=0;function Fg(e){try{Ng(),e()}finally{Lg()}}function Pg(e){Cg.push(e),Ag||(Ng(),Rg())}function Mg(e){try{return Ng(),e()}finally{Rg()}}function Ng(){Ag++}function Lg(){Ag--}function Rg(){var e;for(Lg();!Ag&&void 0!==(e=Cg.shift());)Fg(e)}var Dg=function(e){return function(n){return e.some((function(e){return Vg(e)(n)}))}},jg=function(e){return function(n){return e(n)}},Bg=function(e){return function(n){return n.type===String(e)}},zg=function(e){return function(n){return n.type===e}},Ug=function(){return Mh};function Vg(e){var n="*"===e?Ug:wh(e)?Bg:_h(e)?Dg:Oh(e)?Bg:Sh(e)?jg:Th(e)?zg:null;if(null===n)throw new Error("invalid pattern: "+e);return n(e)}var Wg={type:sh},Gg=function(e){return e&&e.type===sh};function $g(e){void 0===e&&(e=tg());var n=!1,t=[];return{take:function(r){n&&e.isEmpty()?r(Wg):e.isEmpty()?(t.push(r),r.cancel=function(){jh(t,r)}):r(e.take())},put:function(r){if(!n){if(0===t.length)return e.put(r);t.shift()(r)}},flush:function(t){n&&e.isEmpty()?t(Wg):t(e.flush())},close:function(){if(!n){n=!0;var e=t;t=[];for(var r=0,a=e.length;r<a;r++){(0,e[r])(Wg)}}}}}function Kg(){var e=function(){var e,n=!1,t=[],r=t,a=function(){r===t&&(r=t.slice())},o=function(){n=!0;var e=t=r;r=[],e.forEach((function(e){e(Wg)}))};return(e={})[lh]=!0,e.put=function(e){if(!n)if(Gg(e))o();else for(var a=t=r,i=0,s=a.length;i<s;i++){var c=a[i];c[uh](e)&&(c.cancel(),c(e))}},e.take=function(e,t){void 0===t&&(t=Ug),n?e(Wg):(e[uh]=t,a(),r.push(e),e.cancel=function(e){var n=!1;return function(){n||(n=!0,e())}}((function(){a(),jh(r,e)})))},e.close=o,e}(),n=e.put;return e.put=function(e){e[fh]?n(e):Pg((function(){n(e)}))},e}var qg=0,Hg=1,Xg=2,Yg=3;function Jg(e,n){var t=e[ih];Sh(t)&&(n.cancel=t),e.then(n,(function(e){n(e,!0)}))}var Qg,Zg=0,ey=function(){return++Zg};function ny(e){e.isRunning()&&e.cancel()}var ty=((Qg={})[rg]=function(e,n,t){var r=n.channel,a=void 0===r?e.channel:r,o=n.pattern,i=n.maybe,s=function(e){e instanceof Error?t(e,!0):!Gg(e)||i?t(e):t(hh)};try{a.take(s,bh(o)?Vg(o):null)}catch(c){return void t(c,!0)}t.cancel=s.cancel},Qg[ag]=function(e,n,t){var r=n.channel,a=n.action,o=n.resolve;Pg((function(){var n;try{n=(r?r.put:e.dispatch)(a)}catch(i){return void t(i,!0)}o&&kh(n)?Jg(n,t):t(n)}))},Qg[og]=function(e,n,t,r){var a=r.digestEffect,o=Zg,i=Object.keys(n);if(0!==i.length){var s=Hh(n,t);i.forEach((function(e){a(n[e],o,s[e],e)}))}else t(_h(n)?[]:{})},Qg[ig]=function(e,n,t,r){var a=r.digestEffect,o=Zg,i=Object.keys(n),s=_h(n)?Wh(i.length):{},c={},u=!1;i.forEach((function(e){var n=function(n,r){u||(r||qh(n)?(t.cancel(),t(n,r)):(t.cancel(),u=!0,s[e]=n,t(s)))};n.cancel=Nh,c[e]=n})),t.cancel=function(){u||(u=!0,i.forEach((function(e){return c[e].cancel()})))},i.forEach((function(e){u||a(n[e],o,c[e],e)}))},Qg[sg]=function(e,n,t,r){var a=n.context,o=n.fn,i=n.args,s=r.task;try{var c=o.apply(a,i);if(kh(c))return void Jg(c,t);if(xh(c))return void py(e,c,s.context,Zg,Xh(o),!1,t);t(c)}catch(u){t(u,!0)}},Qg[cg]=function(e,n,t){var r=n.context,a=n.fn,o=n.args;try{var i=function(e,n){vh(e)?t(n):t(e,!0)};a.apply(r,o.concat(i)),i.cancel&&(t.cancel=i.cancel)}catch(s){t(s,!0)}},Qg[ug]=function(e,n,t,r){var a=n.context,o=n.fn,i=n.args,s=n.detached,c=r.task,u=function(e){var n=e.context,t=e.fn,r=e.args;try{var a=t.apply(n,r);if(xh(a))return a;var o=!1;return Uh((function(e){return o?{value:e,done:!0}:(o=!0,{value:a,done:!kh(a)})}))}catch(i){return Uh((function(){throw i}))}}({context:a,fn:o,args:i}),l=function(e,n){return e.isSagaIterator?{name:e.meta.name}:Xh(n)}(u,o);Mg((function(){var n=py(e,u,c.context,Zg,l,s,void 0);s?t(n):n.isRunning()?(c.queue.addTask(n),t(n)):n.isAborted()?c.queue.abort(n.error()):t(n)}))},Qg[lg]=function(e,n,t,r){var a=r.task,o=function(e,n){if(e.isRunning()){var t={task:a,cb:n};n.cancel=function(){e.isRunning()&&jh(e.joiners,t)},e.joiners.push(t)}else e.isAborted()?n(e.error(),!0):n(e.result())};if(_h(n)){if(0===n.length)return void t([]);var i=Hh(n,t);n.forEach((function(e,n){o(e,i[n])}))}else o(n,t)},Qg[fg]=function(e,n,t,r){var a=r.task;n===dh?ny(a):_h(n)?n.forEach(ny):ny(n),t()},Qg[dg]=function(e,n,t){var r=n.selector,a=n.args;try{t(r.apply(void 0,[e.getState()].concat(a)))}catch(o){t(o,!0)}},Qg[pg]=function(e,n,t){var r=n.pattern,a=$g(n.buffer),o=Vg(r),i=function n(t){Gg(t)||e.channel.take(n,o),a.put(t)},s=a.close;a.close=function(){i.cancel(),s()},e.channel.take(i,o),t(a)},Qg[mg]=function(e,n,t,r){t(r.task.isCancelled())},Qg[hg]=function(e,n,t){n.flush(t)},Qg[gg]=function(e,n,t,r){t(r.task.context[n])},Qg[yg]=function(e,n,t,r){var a=r.task;Rh(a.context,n),t()},Qg);function ry(e,n){return e+"?"+n}function ay(e){var n=e.name,t=e.location;return t?n+"  "+ry(t.fileName,t.lineNumber):n}function oy(e){var n=Dh((function(e){return e.cancelledTasks}),e);return n.length?["Tasks cancelled due to error:"].concat(n).join("\n"):""}var iy=null,sy=[],cy=function(e){e.crashedEffect=iy,sy.push(e)},uy=function(){iy=null,sy.length=0},ly=function(e){iy=e},fy=function(){var e=sy[0],n=sy.slice(1),t=e.crashedEffect?function(e){var n=Yh(e);return n?n.code+"  "+ry(n.fileName,n.lineNumber):""}(e.crashedEffect):null;return["The above error occurred in task "+ay(e.meta)+(t?" \n when executing effect "+t:"")].concat(n.map((function(e){return"    created by "+ay(e.meta)})),[oy(sy)]).join("\n")};function dy(e,n,t,r,a,o,i){var s;void 0===i&&(i=Nh);var c,u,l=qg,f=null,d=[],p=Object.create(t),m=function(e,n,t){var r,a=[],o=!1;function i(e){n(),c(),t(e,!0)}function s(n){a.push(n),n.cont=function(s,c){o||(jh(a,n),n.cont=Nh,c?i(s):(n===e&&(r=s),a.length||(o=!0,t(r))))}}function c(){o||(o=!0,a.forEach((function(e){e.cont=Nh,e.cancel()})),a=[])}return s(e),{addTask:s,cancelAll:c,abort:i,getTasks:function(){return a}}}(n,(function(){d.push.apply(d,m.getTasks().map((function(e){return e.meta.name})))}),h);function h(n,t){if(t){if(l=Xg,cy({meta:a,cancelledTasks:d}),g.isRoot){var r=fy();uy(),e.onError(n,{sagaStack:r})}u=n,f&&f.reject(n)}else n===mh?l=Hg:l!==Hg&&(l=Yg),c=n,f&&f.resolve(n);g.cont(n,t),g.joiners.forEach((function(e){e.cb(n,t)})),g.joiners=null}var g=((s={})[ph]=!0,s.id=r,s.meta=a,s.isRoot=o,s.context=p,s.joiners=[],s.queue=m,s.cancel=function(){l===qg&&(l=Hg,m.cancelAll(),h(mh,!1))},s.cont=i,s.end=h,s.setContext=function(e){Rh(p,e)},s.toPromise=function(){return f||(f=Tg(),l===Xg?f.reject(u):l!==qg&&f.resolve(c)),f.promise},s.isRunning=function(){return l===qg},s.isCancelled=function(){return l===Hg||l===qg&&n.status===Hg},s.isAborted=function(){return l===Xg},s.result=function(){return c},s.error=function(){return u},s);return g}function py(e,n,t,r,a,o,i){var s=e.finalizeRunEffect((function(n,t,r){if(kh(n))Jg(n,r);else if(xh(n))py(e,n,u.context,t,a,!1,r);else if(n&&n[ch]){(0,ty[n.type])(e,n.payload,r,l)}else r(n)}));f.cancel=Nh;var c={meta:a,cancel:function(){c.status===qg&&(c.status=Hg,f(mh))},status:qg},u=dy(e,c,t,r,a,o,i),l={task:u,digestEffect:d};return i&&(i.cancel=u.cancel),f(),u;function f(e,t){try{var a;t?(a=n.throw(e),uy()):Kh(e)?(c.status=Hg,f.cancel(),a=Sh(n.return)?n.return(mh):{done:!0,value:mh}):a=$h(e)?Sh(n.return)?n.return():{done:!0}:n.next(e),a.done?(c.status!==Hg&&(c.status=Yg),c.cont(a.value)):d(a.value,r,f)}catch(o){if(c.status===Hg)throw o;c.status=Xg,c.cont(o,!0)}}function d(n,t,r,a){void 0===a&&(a="");var o,i=ey();function c(t,a){o||(o=!0,r.cancel=Nh,e.sagaMonitor&&(a?e.sagaMonitor.effectRejected(i,t):e.sagaMonitor.effectResolved(i,t)),a&&ly(n),r(t,a))}e.sagaMonitor&&e.sagaMonitor.effectTriggered({effectId:i,parentEffectId:t,label:a,effect:n}),c.cancel=Nh,r.cancel=function(){o||(o=!0,c.cancel(),c.cancel=Nh,e.sagaMonitor&&e.sagaMonitor.effectCancelled(i))},s(n,i,c)}}function my(e,n){var t=e.channel,r=void 0===t?Kg():t,a=e.dispatch,o=e.getState,i=e.context,s=void 0===i?{}:i,c=e.sagaMonitor,u=e.effectMiddlewares,l=e.onError,f=void 0===l?Vh:l;for(var d=arguments.length,p=new Array(d>2?d-2:0),m=2;m<d;m++)p[m-2]=arguments[m];var h=n.apply(void 0,p);var g,y=ey();if(c&&(c.rootSagaStarted=c.rootSagaStarted||Nh,c.effectTriggered=c.effectTriggered||Nh,c.effectResolved=c.effectResolved||Nh,c.effectRejected=c.effectRejected||Nh,c.effectCancelled=c.effectCancelled||Nh,c.actionDispatched=c.actionDispatched||Nh,c.rootSagaStarted({effectId:y,saga:n,args:p})),u){var v=Gr.apply(void 0,u);g=function(e){return function(n,t,r){return v((function(n){return e(n,t,r)}))(n)}}}else g=Lh;var b={channel:r,dispatch:Gh(a),getState:o,sagaMonitor:c,onError:f,finalizeRunEffect:g};return Mg((function(){var e=py(b,h,s,y,Xh(n),!0,void 0);return c&&c.effectResolved(y,e),e}))}var hy=function(e){var n,t=void 0===e?{}:e,r=t.context,a=void 0===r?{}:r,o=t.channel,i=void 0===o?Kg():o,s=t.sagaMonitor,c=os(t,["context","channel","sagaMonitor"]);function u(e){var t=e.getState,r=e.dispatch;return n=my.bind(null,(0,yh.Z)({},c,{context:a,channel:i,dispatch:r,getState:t,sagaMonitor:s})),function(e){return function(n){s&&s.actionDispatched&&s.actionDispatched(n);var t=e(n);return i.put(n),t}}}return u.run=function(){return n.apply(void 0,arguments)},u.setContext=function(e){Rh(a,e)},u},gy=hy,yy=function(e){return{done:!0,value:e}},vy={};function by(e){return Eh(e)?"channel":Oh(e)?String(e):Sh(e)?e.name:String(e)}function Sy(e,n,t){var r,a,o,i=n;function s(n,t){if(i===vy)return yy(n);if(t&&!a)throw i=vy,t;r&&r(n);var s=t?e[a](t):e[i]();return i=s.nextState,o=s.effect,r=s.stateUpdater,a=s.errorState,i===vy?yy(n):o}return Uh(s,(function(e){return s(null,e)}),t)}function wy(e,n){for(var t=arguments.length,r=new Array(t>2?t-2:0),a=2;a<t;a++)r[a-2]=arguments[a];var o,i,s={done:!1,value:bg(e)},c=function(e){return{done:!1,value:xg.apply(void 0,[n].concat(r,[e]))}},u=function(e){return{done:!1,value:(n=e,void 0===n&&(n=dh),vg(fg,n))};var n},l=function(e){return o=e},f=function(e){return i=e};return Sy({q1:function(){return{nextState:"q2",effect:s,stateUpdater:f}},q2:function(){return o?{nextState:"q3",effect:u(o)}:{nextState:"q1",effect:c(i),stateUpdater:l}},q3:function(){return{nextState:"q1",effect:c(i),stateUpdater:l}}},"q1","takeLatest("+by(e)+", "+n.name+")")}function _y(e,n){for(var t=arguments.length,r=new Array(t>2?t-2:0),a=2;a<t;a++)r[a-2]=arguments[a];return xg.apply(void 0,[wy,e,n].concat(r))}var ky=Ft().mark(Oy),xy=Ft().mark(Ty),Iy=Ft().mark(Cy),Ey=Ft().mark(Ay);function Oy(){return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_y(Xa.actions.setLocalFile.type,Ty);case 2:case"end":return e.stop()}}),ky)}function Ty(e){var n;return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Qp.guessFormat(e.payload.filepath),qa.includes(n)){t.next=6;break}return t.next=4,Sg(Xa.actions.clear());case 4:return t.next=6,Sg(Vm.actions.setState({errors:["Invalid file input ".concat(e.payload.filepath)],warnings:[]}));case 6:case"end":return t.stop()}}),xy)}function Cy(){return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_y(Xa.actions.setUrl.type,Ay);case 2:case"end":return e.stop()}}),Iy)}function Ay(e){var n,t;return Ft().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.payload,r.prev=1,r.next=4,kg(Fy,n);case 4:return t=r.sent,r.next=7,Sg(Xa.actions.fetchUrlSuccess({arrayBuffer:t,url:n}));case 7:r.next=13;break;case 9:return r.prev=9,r.t0=r.catch(1),r.next=13,Sg(Xa.actions.fetchUrlError(r.t0.message));case 13:case"end":return r.stop()}}),Ey,null,[[1,9]])}var Fy=function(){var e=eo(Ft().mark((function e(n){var t,r;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(n);case 2:if((t=e.sent).ok){e.next=5;break}throw new Py("Failed to load ".concat(n));case 5:return e.next=7,t.arrayBuffer();case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Py=function(e){co(t,e);var n=po(t);function t(){return io(this,t),n.apply(this,arguments)}return oo(t)}(ho(Error));function My(e,n){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Pn(e))||n&&e&&"number"===typeof e.length){t&&(e=t);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==t.return||t.return()}finally{if(s)throw o}}}}var Ny=function(e,n){return{x:e.x+n.x,y:e.y+n.y}},Ly=function(e){return e.reduce((function(e,n){var t=e.topLeft,r=e.bottomRight;return{topLeft:{x:Math.min(n.x,t.x),y:Math.min(n.y,t.y)},bottomRight:{x:Math.max(n.x,r.x),y:Math.max(n.y,r.y)}}}),{topLeft:{x:1/0,y:1/0},bottomRight:{x:-1/0,y:-1/0}})},Ry=function(e){return{x:e.bottomRight.x-e.topLeft.x,y:e.bottomRight.y-e.topLeft.y}},Dy=function(){return new Promise((function(e){return setTimeout(e,1)}))},jy=function(e,n){if(!e)throw new Error(n||"expected ".concat(e," to be defined"));return e},By=function(e,n,t){var r=n.node,a=n.patch,o=Qp.buildGraphNodeId(a.id,r.id);e.transforms[o]=t},zy=function(e,n,t){e.controlsValues.values[n]=t,e.settings.valuesUpdatedCallback&&Uy(e),function(e,n,t){e.webpdNode.port.postMessage({type:"inletCaller",payload:{nodeId:n,portletId:"0",message:t}})}(e,n,[t])},Uy=function(e,n){var t=null;return function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];t&&clearTimeout(t),t=setTimeout((function(){return n.apply(void 0,a)}),e)}}(300,(function(e){var n={};Object.entries(e.controlsValues.values).forEach((function(e){var t=bt(e,2),r=t[0],a=t[1];n[r]="number"===typeof a?function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,t=Math.round(e*Math.pow(10,n))/Math.pow(10,n);return 0===t?0:t}(a):a})),e.settings.valuesUpdatedCallback(n)})),Vy=function(){var e=eo(Ft().mark((function e(n,t,r){var a,o;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.audioContext.createMediaStreamSource(t),o=new Zp.WebPdWorkletNode(n.audioContext),a.connect(o),o.connect(n.audioContext.destination),o.port.onmessage=function(e){return Zp.fs.web(o,e,{rootUrl:Zp.urlDirName(n.patchUrl||".")})},!r.compiledJs){e.next=9;break}o.port.postMessage({type:"code:JS",payload:{jsCode:r.compiledJs}}),e.next=14;break;case 9:if(!r.wasm){e.next=13;break}o.port.postMessage({type:"code:WASM",payload:{wasmBuffer:r.wasm}}),e.next=14;break;case 13:throw new Error("Missing artefacts for creating the engine");case 14:return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),Wy={x:7,y:12},Gy=function e(n){var t=n.map((function(n){switch(n.type){case"container":var t=bt(Ky(e(n.children)),1)[0],r={type:"container",label:"string"===typeof n.node.args[0]?n.node.args[0]:null,control:n,dimensions:Ny(Wy,Ry(Ly([].concat(Mn(t.map((function(e){return e.position}))),Mn(t.map((function(e){return Ny(e.position,e.dimensions)}))))))),children:t,position:{x:Yy(Jy(n.node).x),y:Yy(Jy(n.node).y)}};return r;case"control":return{type:"control",label:Hy(n.node),control:n,dimensions:qy(n.node),position:{x:Yy(Jy(n.node).x),y:Yy(Jy(n.node).y)}};default:throw new Error("unexpected control type ".concat(n.type))}}));return t},$y=function(e){return e.map((function(e){return{type:"comment",text:e.text,position:{x:Yy(Jy(e.node).x),y:Yy(Jy(e.node).y)}}}))},Ky=function(e){var n=Ly([].concat(Mn(e.map((function(e){return e.position}))),Mn(e.map((function(e){return Ny(e.position,e.dimensions)}))))),t=function(e,n){return{x:e.x*n,y:e.y*n}}(n.topLeft,-1);return[e.map((function(e){return Rr(Rr({},e),{},{position:Ny(e.position,t)})})),t]},qy=function(e){if("control"!==e.nodeClass)throw new Error("Can only get dimension for control node");switch(e.type){case"floatatom":case"symbolatom":return{x:Yy(7*(Jy(e).widthInChars||3)),y:Yy(15)};case"bng":case"tgl":return{x:Yy(Jy(e).size),y:Yy(Jy(e).size)};case"nbx":return{x:Yy(7*(Jy(e).widthInChars||3)),y:Yy(Jy(e).height)};case"vradio":return{x:Yy(Jy(e).size),y:Yy(Xy(e.args[0])*Xy(Jy(e).size))};case"hradio":return{x:Yy(Xy(e.args[0])*Xy(Jy(e).size)),y:Yy(Jy(e).size)};case"vsl":case"hsl":return{x:Yy(Jy(e).width),y:Yy(Jy(e).height)};case"msg":return{x:Yy(7*e.args.join(" ").length),y:Yy(15)};case"cnv":return{x:0,y:0};default:throw new Error("unsupported type ".concat(e.type))}},Hy=function(e){var n=Jy(e).label;return n&&n.length?n:null},Xy=function(e){if("number"!==typeof e)throw new Error("Expected ".concat(e," to be a number"));return e},Yy=function(e){return 1*Math.round(Xy(e)/1)},Jy=function(e){return jy(e.layout,"expected node to have a layout")},Qy=function(e){return e.innerHTML='\n    <div id="splash-container">\n        <div id="loading"></div>\n        <button id="start">START</button>\n    </div>\n\n    <div id="patch-controls">\n        <div id="controls-root"></div>\n    </div>\n\n    <div id="credits">\n        <button>Credits</button>\n        <div class="content">\n        <div>Sound made using <a href="https://github.com/sebpiq/WebPd/" target="_blank" rel="noopener noreferrer" >WebPd</a>.</div>\n        <div>UI made using <a href="https://nexus-js.github.io/ui/" target="_blank" rel="noopener noreferrer" >NexusUI</a>.</div>\n        <div>Demo source code available <a href="https://github.com/sebpiq/WebPd_demos/" target="_blank" rel="noopener noreferrer" >here</a>.</div>\n        <div>Patch ginger2.pd by <a href="http://www.martin-brinkmann.de/pd-patches.html" target="_blank" rel="noopener noreferrer" >Martin Brinkmann</a>.</div>\n        </div>\n    </div>\n',{controlsRoot:jy(e.querySelector("#controls-root"),"controlsRoot not found"),startButton:jy(e.querySelector("#start"),"startButton not found"),loadingLabel:jy(e.querySelector("#loading"),"loadingLabel not found"),loadingContainer:jy(e.querySelector("#splash-container"),"loadingContainer not found"),creditsButton:jy(e.querySelector("#credits button"),"creditsButton not found"),creditsContainer:jy(e.querySelector("#credits"),"creditsContainer not found")}},Zy=function(e,n){nv(e,n,e.controlsViews,null)},ev=function(e,n){e.commentsViews.forEach((function(e){var t=document.createElement("div");t.classList.add("comment"),t.innerHTML=e.text,n.appendChild(t),t.style.left="".concat(iv(e.position.x),"px"),t.style.top="".concat(iv(e.position.y),"px")}))},nv=function e(n,t,r,a){r.forEach((function(r){if("container"===r.type){var o=tv(n,t,r);e(n,o,r.children,r)}else"control"===r.type&&rv(n,t,r,sv(!!a&&cv(a)))}))},tv=function(e,n,t){var r=document.createElement("div");r.classList.add("controls-container");var a=sv(cv(t));return r.style.left="".concat(iv(t.position.x),"px"),r.style.top="".concat(iv(t.position.y),"px"),r.style.width="".concat(iv(t.dimensions.x),"px"),r.style.height="".concat(iv(t.dimensions.y),"px"),r.style.paddingTop="".concat(iv(a.top),"px"),r.style.paddingBottom="".concat(iv(a.bottom),"px"),r.style.paddingRight="".concat(iv(a.right),"px"),r.style.paddingLeft="".concat(iv(a.left),"px"),cv(t)&&av(r,t.label),n.appendChild(r),r},rv=function(e,n,t,r){var a=t.control,o=a.node,i=a.patch,s=e.settings.colorScheme.next(),c=document.createElement("div");(c.classList.add("control"),c.classList.add(o.type),c.id="control-".concat(i.id,"-").concat(o.id),c.style.left="".concat(iv(t.position.x+r.left),"px"),c.style.top="".concat(iv(t.position.y+r.top),"px"),c.style.width="".concat(iv(t.dimensions.x),"px"),c.style.height="".concat(iv(t.dimensions.y),"px"),n.appendChild(c),cv(t))&&(av(c,t.label||"").style.color=s);var u=document.createElement("div");c.appendChild(u);var l={x:iv(t.dimensions.x),y:iv(t.dimensions.y-(cv(t)?5:0))},f=ov(e,u,t,l);return f.colorize("accent",s),f.colorize("fill","black"),f.colorize("dark",s),f.colorize("mediumDark","#222"),f.colorize("mediumLight","#333"),f.element.style.fontFamily="Rajdhani",c},av=function(e,n){var t=document.createElement("div");return t.classList.add("label"),t.innerHTML=n,t.style.height="".concat(iv(5),"px"),e.appendChild(t),t},ov=function(e,n,t,r){var a,o=r.x,i=r.y,s=t.control.node,c=function(e,n){var t=n.node,r=n.patch,a=Qp.buildGraphNodeId(r.id,t.id);return e.controlsValues.values[a]}(e,t.control);switch(s.type){case"hsl":case"vsl":"hsl"===s.type?i*=1.2:o*=1.2,a=new Nexus.Add.Slider(n,{min:s.args[0],max:s.args[1],value:void 0!==c?c:s.args[3],size:[o,i]});break;case"hradio":case"vradio":a=new Nexus.RadioButton(n,{numberOfButtons:s.args[0],active:void 0!==c?c:s.args[2],size:[o,i]});break;case"bng":a=new Nexus.Button(n,{size:[i,i]});break;case"msg":a=new Nexus.TextButton(n,{size:[o,i],text:s.args.join(" ")});break;case"nbx":case"floatatom":a=new Nexus.Number(n,{value:void 0!==c?c:"nbx"===s.type?s.args[3]:0,size:[o,i]});break;case"tgl":a=new Nexus.Button(n,{mode:"toggle",state:void 0!==c?c:!!s.args[2],size:[o,i]});break;case"symbolatom":a=new Nexus.TextButton(n,{size:[o,i],state:!1,text:"SYMBOLATOM NOT SUPPORTED"});break;case"cnv":a=new Nexus.TextButton(n,{size:[o,i],state:!1,text:"CNV NOT SUPPORTED"});break;default:throw new Error("Not supported ".concat(s.type))}return a.on("change",(function(n){return function(e,n,t){var r=n.node,a=n.patch,o=Qp.buildGraphNodeId(a.id,r.id),i=e.controlsValues.transforms[o];if(!i)throw new Error("no value transform for ".concat(o));var s=i(t);null!==s&&zy(e,o,s)}(e,t.control,n)})),a},iv=function(e){return 3*e},sv=function(e){return{top:e?Wy.y-Wy.x/2:Wy.y/2,left:Wy.x/2,right:Wy.x/2,bottom:e?Wy.x/2:Wy.y/2}},cv=function(e){return!(!e.label||!e.label.length)},uv=function(e,n){var t=jy(e.dspGraph,"artefacts.dspGraph not defined"),r={values:{},transforms:{}},a=function(e,n){var t=em.discoverGuiControls(e),r=t.controls,a=t.comments;return em.traverseGuiControls(r,(function(e){var t=function(e){return e};"bng"===e.node.type?t=function(e){return!0===e.state?"bang":null}:"msg"===e.node.type?t=function(e){return!0===e?"bang":null}:"tgl"===e.node.type&&(t=function(e){return+e}),By(n,e,t)})),{controls:r.map((function(e){var n={type:"container",patch:e.patch,node:e.node,children:[e]};return"control"===e.type?n:e})),comments:a}}(t.pd,r),o=a.controls,i=function(e,n){var t=bt(Ky(Gy(e)),2),r=t[0],a=t[1];return{controlsViews:r,commentsViews:$y(n).map((function(e){return Rr(Rr({},e),{},{position:Ny(e.position,a)})}))}}(o,a.comments),s=i.controlsViews,c=i.commentsViews,u=new AudioContext;return u.suspend(),{rootElem:null,patchUrl:n,audioContext:u,webpdNode:null,pdJson:t.pd,controls:o,controlsValues:r,controlsViews:s,commentsViews:c,inletCallersSpecs:em.collectGuiControlsInletCallerSpecs(o,t.graph),settings:null}},lv=function(){var e=eo(Ft().mark((function e(n,t,r){var a,o,i,s;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Rr(Rr({},t),{},{controlsValues:Rr(Rr({},t.controlsValues),{},{values:r.initialValues?Rr({},r.initialValues):{}}),settings:r}),o=document.createElement("div"),a.settings.container.appendChild(o),i=Qy(o),!0!==a.settings.showCredits&&(i.creditsButton.style.display="none"),i.creditsButton.onclick=function(){i.creditsContainer.classList.contains("expanded")?i.creditsContainer.classList.remove("expanded"):i.creditsContainer.classList.add("expanded")},i.startButton.style.display="none",i.startButton.onclick=function(){i.loadingContainer.style.display="none",fv(a)},i.loadingLabel.innerHTML="loading assemblyscript compiler ...",console.log("PatchPlayer START"),e.next=12,Zp.registerWebPdWorkletNode(a.audioContext);case 12:return i.loadingLabel.innerHTML="generating GUI ...",e.next=15,Dy();case 15:return Zy(a,i.controlsRoot),ev(a,i.controlsRoot),e.next=19,Dy();case 19:return e.next=21,navigator.mediaDevices.getUserMedia({audio:!0});case 21:return s=e.sent,e.next=24,Vy(a,s,n);case 24:return a.webpdNode=e.sent,a.rootElem=o,i.loadingLabel.style.display="none",i.startButton.style.display="block",e.abrupt("return",a);case 29:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),fv=function(e){"suspended"===e.audioContext.state&&e.audioContext.resume(),function(e){Object.entries(e.controlsValues.values).forEach((function(n){var t=bt(n,2),r=t[0],a=t[1];zy(e,r,a)}))}(e)},dv=Xm(Zm,nh,th,(function(e,n,t){if(console.log("selectBuildSteps CODE TARGET",t),!e||!n)return null;if("patchPlayer"===n)switch(t){case"JavaScript":n="compiledJs";break;case"WebAssembly":n="wasm"}return"wav"===n&&["pd","pdJson","dspGraph"].includes(e)?Qp.listBuildSteps(e,n,"JavaScript"===t?"compiledJs":"wasm"):Qp.listBuildSteps(e,n)})),pv=64,mv={WebAssembly:{display:"Web Assembly",info:"Web Assembly is slower to build, but provides a higher performance when running. Good for when your patch is stable and you want to take it elsewhere."},JavaScript:{display:"JavaScript",info:"JavaScript is fast to build, but slower when running. Good if you want to test things fast."}},hv=function(e){return e.app.isInitialized},gv=function(e){return e.app.willBuildOnLoad},yv=function(e){return e.app.debug},vv=Ft().mark(Sv),bv=Ft().mark(wv);function Sv(){return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_y(zm.actions.startBuild.type,wv);case 2:case"end":return e.stop()}}),vv)}function wv(){var e,n,t,r,a,o,i,s,c,u,l,f,d;return Ft().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Ig(eh);case 2:return e=p.sent,p.next=5,Ig(dv);case 5:return n=p.sent,p.next=8,Ig(nh);case 8:return t=p.sent,p.next=11,Ig(Ym);case 11:return r=p.sent,p.next=14,Ig(rh);case 14:return a=p.sent,p.next=17,Ig(yv);case 17:if(o=p.sent,e&&n){p.next=22;break}return p.next=21,Sg(zm.actions.buildSuccess({artefacts:e||Qp.createArtefacts(),patchPlayer:null}));case 21:return p.abrupt("return");case 22:return p.next=24,Eg(1);case 24:i=Rr({},e),s=null,c=My(n),p.prev=27,c.s();case 29:if((u=c.n()).done){p.next=55;break}return l=u.value,console.log("BUILD STEP START",l),p.next=34,Sg(zm.actions.startStep(l));case 34:return p.prev=34,p.next=37,kg(Qp.performBuildStep,i,l,{audioSettings:{channelCount:{in:2,out:2},bitDepth:pv,sampleRate:44100,blockSize:4096,previewDurationSeconds:a||30},nodeBuilders:Qp.NODE_BUILDERS,nodeImplementations:Qp.NODE_IMPLEMENTATIONS,inletCallerSpecs:s?s.inletCallersSpecs:void 0,abstractionLoader:r?_v(r):kv});case 37:return f=p.sent,d=1===f.status?f.errors:void 0,p.next=41,Sg(zm.actions.stepComplete({status:f.status,artefacts:i,errors:d,warnings:f.warnings}));case 41:if(1!==f.status){p.next=43;break}return p.abrupt("return");case 43:p.next=52;break;case 45:return p.prev=45,p.t0=p.catch(34),p.next=49,Sg(zm.actions.stepComplete({status:1,artefacts:i,errors:[p.t0.message],warnings:[]}));case 49:if(!o){p.next=51;break}throw p.t0;case 51:return p.abrupt("return");case 52:"dspGraph"===l&&"patchPlayer"===t&&(s=uv(i,r||null));case 53:p.next=29;break;case 55:p.next=60;break;case 57:p.prev=57,p.t1=p.catch(27),c.e(p.t1);case 60:return p.prev=60,c.f(),p.finish(60);case 63:return p.next=65,Sg(zm.actions.buildSuccess({artefacts:i,patchPlayer:s}));case 65:case"end":return p.stop()}}),bv,null,[[27,57,60,63],[34,45]])}var _v=function(e){var n=new URL(e,window.location.origin),t=n.origin+n.pathname.split("/").slice(0,-1).join("/");return Qp.makeAbstractionLoader(function(){var e=eo(Ft().mark((function e(n){var r,a;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t+"/"+(n.endsWith(".pd")?n:"".concat(n,".pd")),console.log("LOADING ABSTRACTION",r),e.next=4,fetch(r);case 4:if((a=e.sent).ok){e.next=8;break}throw console.log("ERROR LOADING ABSTRACTION",r),new Qp.UnknownNodeTypeError(n);case 8:return e.next=10,a.text();case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())},kv=Qp.makeAbstractionLoader(function(){var e=eo(Ft().mark((function e(n){return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Qp.UnknownNodeTypeError(n);case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()),xv=Ft().mark(Iv);function Iv(){var e,n;return Ft().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.asc){t.next=5;break}return t.next=3,Eg(100);case 3:t.next=0;break;case 5:return Qp.setAsc(window.asc),t.next=8,Ig(Ym);case 8:return e=t.sent,t.next=11,Ig(Qm);case 11:if(n=t.sent,!e||n){t.next=19;break}return t.next=15,bg([Xa.actions.fetchUrlSuccess,Xa.actions.fetchUrlError]);case 15:if(t.sent.type!==Xa.actions.fetchUrlError.type){t.next=19;break}return console.log("INIT FAILED ERROR"),t.abrupt("return");case 19:return t.next=21,Ig(gv);case 21:if(!t.sent){t.next=25;break}return t.next=25,Sg(zm.actions.startBuild());case 25:return t.next=27,Sg(Wm.actions.initializationDone());case 27:case"end":return t.stop()}}),xv)}var Ev={patchPlayer:null},Ov={values:{}},Tv=ga({name:"patchPlayer",initialState:Ov,reducers:{valuesChanged:function(e,n){e.values=n.payload}},extraReducers:function(e){e.addCase(zm.actions.buildSuccess,(function(e,n){Ev.patchPlayer=n.payload.patchPlayer})),e.addCase(Mm,(function(){return Ev.patchPlayer=null,Ov}))}}),Cv=function(e){return e.patchPlayer.values},Av=function(){return Ev.patchPlayer},Fv=gy(),Pv=function(e){var n,t=da(),r=e||{},a=r.reducer,o=void 0===a?void 0:a,i=r.middleware,s=void 0===i?t():i,c=r.devTools,u=void 0===c||c,l=r.preloadedState,f=void 0===l?void 0:l,d=r.enhancers,p=void 0===d?void 0:d;if("function"===typeof o)n=o;else{if(!ua(o))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');n=Wr(o)}var m=s;if("function"===typeof m&&(m=m(t),!pa&&!Array.isArray(m)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!pa&&m.some((function(e){return"function"!==typeof e})))throw new Error("each middleware provided to configureStore must be a function");var h=$r.apply(void 0,m),g=Gr;u&&(g=ca(oa({trace:!pa},"object"===typeof u&&u)));var y=[h];return Array.isArray(p)?y=Jr([h],p):"function"===typeof p&&(y=p(y)),Vr(n,f,g.apply(void 0,y))}({reducer:{app:Wm.reducer,buildInput:Xa.reducer,buildOutput:Qa.reducer,artefacts:zm.reducer,console:Vm.reducer,patchPlayer:Tv.reducer},middleware:function(e){return e({serializableCheck:!1}).concat([Fv])}}),Mv=Ka,Nv=Da;Fv.run(Ft().mark((function e(){return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wg([Iv(),Cy(),Oy(),Sv()]);case 2:case"end":return e.stop()}}),e)})));var Lv,Rv,Dv=function(e){return"1"===e},jv=function(e){return e?"1":"0"};(0,Gm.Z)({store:Pv,params:{jsOrAsc:{selector:th,action:Qa.actions.setCodeTarget,defaultValue:Qa.getInitialState().codeTarget},target:{selector:nh,action:Qa.actions.setFormat,defaultValue:Qa.getInitialState().format},url:{selector:Ym,action:Xa.actions.setUrl,defaultValue:Xa.getInitialState().url},build:{selector:gv,action:Wm.actions.setWillBuildOnLoad,defaultValue:Wm.getInitialState().willBuildOnLoad,stringToValue:Dv,valueToString:jv},debug:{selector:yv,action:Wm.actions.setDebug,defaultValue:Wm.getInitialState().debug,stringToValue:Dv,valueToString:jv},pp:{selector:Cv,action:Tv.actions.valuesChanged,defaultValue:Tv.getInitialState().values,stringToValue:function(e){return JSON.parse(e)},valueToString:function(e){return JSON.stringify(e)}}},replaceState:!0,initialTruth:"location"});var Bv={ginger2:{display:"Martin's Brinkmann ginger2",url:"./patches/Martin-Brinkmann-ginger2.pd"},randomperc1:{display:"Martin's Brinkmann randomperc1",url:"./patches/Martin-Brinkmann-randomperc1.pd"}},zv=Be.form(Lv||(Lv=s(["\n    display: inline;\n"]))),Uv=Be(hn)(Rv||(Rv=s(["\n    padding-left: 0;\n    padding-top: ",";\n    text-overflow: ellipsis;\n    @media (max-width: ","px) {\n        width: 100%;\n        background-color: transparent;\n        text-align: center;\n    }\n"])),on.spacings.space0p1,on.devices.mobile.maxWidth),Vv=function(){var e=Mv();return(0,sn.jsx)(zv,{children:(0,sn.jsxs)(Uv,{onChange:function(n){var t=n.currentTarget.value;e(Xa.actions.setUrl(Bv[t].url))},children:[(0,sn.jsx)("option",{value:"",children:"Load one of the following examples"}),Object.entries(Bv).map((function(e){var n=bt(e,2),t=n[0],r=n[1];return(0,sn.jsx)("option",{value:t,children:r.display},t)}))]})})},Wv=t(7),Gv=t.n(Wv);function $v(e,n,t,r){return new(t||(t=Promise))((function(a,o){function i(e){try{c(r.next(e))}catch(n){o(n)}}function s(e){try{c(r.throw(e))}catch(n){o(n)}}function c(e){var n;e.done?a(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,s)}c((r=r.apply(e,n||[])).next())}))}function Kv(e,n){var t,r,a,o,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(t)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(i=0)),i;)try{if(t=1,r&&(a=2&s[0]?r.return:s[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,s[1])).done)return a;switch(r=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,r=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(a=(a=i.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){i.label=s[1];break}if(6===s[0]&&i.label<a[1]){i.label=a[1],a=s;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(s);break}a[2]&&i.ops.pop(),i.trys.pop();continue}s=n.call(e,i)}catch(c){s=[6,c],r=0}finally{t=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}Object.create;function qv(e,n){var t="function"===typeof Symbol&&e[Symbol.iterator];if(!t)return e;var r,a,o=t.call(e),i=[];try{for(;(void 0===n||n-- >0)&&!(r=o.next()).done;)i.push(r.value)}catch(s){a={error:s}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(a)throw a.error}}return i}function Hv(e,n,t){if(t||2===arguments.length)for(var r,a=0,o=n.length;a<o;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))}Object.create;var Xv=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function Yv(e,n){var t=function(e){var n=e.name;if(n&&-1!==n.lastIndexOf(".")&&!e.type){var t=n.split(".").pop().toLowerCase(),r=Xv.get(t);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!==typeof t.path){var r=e.webkitRelativePath;Object.defineProperty(t,"path",{value:"string"===typeof n?n:"string"===typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return t}var Jv=[".DS_Store","Thumbs.db"];function Qv(e){return"object"===typeof e&&null!==e}function Zv(e){return rb(e.target.files).map((function(e){return Yv(e)}))}function eb(e){return $v(this,void 0,void 0,(function(){return Kv(this,(function(n){switch(n.label){case 0:return[4,Promise.all(e.map((function(e){return e.getFile()})))];case 1:return[2,n.sent().map((function(e){return Yv(e)}))]}}))}))}function nb(e,n){return $v(this,void 0,void 0,(function(){var t;return Kv(this,(function(r){switch(r.label){case 0:return e.items?(t=rb(e.items).filter((function(e){return"file"===e.kind})),"drop"!==n?[2,t]:[4,Promise.all(t.map(ab))]):[3,2];case 1:return[2,tb(ob(r.sent()))];case 2:return[2,tb(rb(e.files).map((function(e){return Yv(e)})))]}}))}))}function tb(e){return e.filter((function(e){return-1===Jv.indexOf(e.name)}))}function rb(e){if(null===e)return[];for(var n=[],t=0;t<e.length;t++){var r=e[t];n.push(r)}return n}function ab(e){if("function"!==typeof e.webkitGetAsEntry)return ib(e);var n=e.webkitGetAsEntry();return n&&n.isDirectory?cb(n):ib(e)}function ob(e){return e.reduce((function(e,n){return Hv(Hv([],qv(e),!1),qv(Array.isArray(n)?ob(n):[n]),!1)}),[])}function ib(e){var n=e.getAsFile();if(!n)return Promise.reject("".concat(e," is not a File"));var t=Yv(n);return Promise.resolve(t)}function sb(e){return $v(this,void 0,void 0,(function(){return Kv(this,(function(n){return[2,e.isDirectory?cb(e):ub(e)]}))}))}function cb(e){var n=e.createReader();return new Promise((function(e,t){var r=[];!function a(){var o=this;n.readEntries((function(n){return $v(o,void 0,void 0,(function(){var o,i,s;return Kv(this,(function(c){switch(c.label){case 0:if(n.length)return[3,5];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return o=c.sent(),e(o),[3,4];case 3:return i=c.sent(),t(i),[3,4];case 4:return[3,6];case 5:s=Promise.all(n.map(sb)),r.push(s),a(),c.label=6;case 6:return[2]}}))}))}),(function(e){t(e)}))}()}))}function ub(e){return $v(this,void 0,void 0,(function(){return Kv(this,(function(n){return[2,new Promise((function(n,t){e.file((function(t){var r=Yv(t,e.fullPath);n(r)}),(function(e){t(e)}))}))]}))}))}var lb=t(998);function fb(e){return function(e){if(Array.isArray(e))return yb(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||gb(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function db(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function pb(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?db(Object(t),!0).forEach((function(n){mb(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):db(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function mb(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function hb(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,a,o=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);i=!0);}catch(c){s=!0,a=c}finally{try{i||null==t.return||t.return()}finally{if(s)throw a}}return o}(e,n)||gb(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gb(e,n){if(e){if("string"===typeof e)return yb(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?yb(e,n):void 0}}function yb(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var vb="file-invalid-type",bb="file-too-large",Sb="file-too-small",wb="too-many-files",_b=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var n=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:vb,message:"File type must be ".concat(n)}},kb=function(e){return{code:bb,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},xb=function(e){return{code:Sb,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},Ib={code:wb,message:"Too many files"};function Eb(e,n){var t="application/x-moz-file"===e.type||(0,lb.Z)(e,n);return[t,t?null:_b(n)]}function Ob(e,n,t){if(Tb(e.size))if(Tb(n)&&Tb(t)){if(e.size>t)return[!1,kb(t)];if(e.size<n)return[!1,xb(n)]}else{if(Tb(n)&&e.size<n)return[!1,xb(n)];if(Tb(t)&&e.size>t)return[!1,kb(t)]}return[!0,null]}function Tb(e){return void 0!==e&&null!==e}function Cb(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function Ab(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function Fb(e){e.preventDefault()}function Pb(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return n.some((function(n){return!Cb(e)&&n&&n.apply(void 0,[e].concat(r)),Cb(e)}))}}function Mb(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)}function Nb(e){return/^.*\.[\w]+$/.test(e)}var Lb=["children"],Rb=["open"],Db=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],jb=["refKey","onChange","onClick"];function Bb(e){return function(e){if(Array.isArray(e))return Vb(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ub(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zb(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,a,o=[],i=!0,s=!1;try{for(t=t.call(e);!(i=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);i=!0);}catch(c){s=!0,a=c}finally{try{i||null==t.return||t.return()}finally{if(s)throw a}}return o}(e,n)||Ub(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ub(e,n){if(e){if("string"===typeof e)return Vb(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Vb(e,n):void 0}}function Vb(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Wb(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Gb(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Wb(Object(t),!0).forEach((function(n){$b(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Wb(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function $b(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Kb(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var qb=(0,o.forwardRef)((function(e,n){var t=e.children,r=Qb(Kb(e,Lb)),a=r.open,i=Kb(r,Rb);return(0,o.useImperativeHandle)(n,(function(){return{open:a}}),[a]),o.createElement(o.Fragment,null,t(Gb(Gb({},i),{},{open:a})))}));qb.displayName="Dropzone";var Hb={disabled:!1,getFilesFromEvent:function(e){return $v(this,void 0,void 0,(function(){return Kv(this,(function(n){return Qv(e)&&Qv(e.dataTransfer)?[2,nb(e.dataTransfer,e.type)]:function(e){return Qv(e)&&Qv(e.target)}(e)?[2,Zv(e)]:Array.isArray(e)&&e.every((function(e){return"getFile"in e&&"function"===typeof e.getFile}))?[2,eb(e)]:[2,[]]}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};qb.defaultProps=Hb,qb.propTypes={children:Gv().func,accept:Gv().objectOf(Gv().arrayOf(Gv().string)),multiple:Gv().bool,preventDropOnDocument:Gv().bool,noClick:Gv().bool,noKeyboard:Gv().bool,noDrag:Gv().bool,noDragEventsBubbling:Gv().bool,minSize:Gv().number,maxSize:Gv().number,maxFiles:Gv().number,disabled:Gv().bool,getFilesFromEvent:Gv().func,onFileDialogCancel:Gv().func,onFileDialogOpen:Gv().func,useFsAccessApi:Gv().bool,autoFocus:Gv().bool,onDragEnter:Gv().func,onDragLeave:Gv().func,onDragOver:Gv().func,onDrop:Gv().func,onDropAccepted:Gv().func,onDropRejected:Gv().func,onError:Gv().func,validator:Gv().func};var Xb,Yb,Jb={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function Qb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Gb(Gb({},Hb),e),t=n.accept,r=n.disabled,a=n.getFilesFromEvent,i=n.maxSize,s=n.minSize,c=n.multiple,u=n.maxFiles,l=n.onDragEnter,f=n.onDragLeave,d=n.onDragOver,p=n.onDrop,m=n.onDropAccepted,h=n.onDropRejected,g=n.onFileDialogCancel,y=n.onFileDialogOpen,v=n.useFsAccessApi,b=n.autoFocus,S=n.preventDropOnDocument,w=n.noClick,_=n.noKeyboard,k=n.noDrag,x=n.noDragEventsBubbling,I=n.onError,E=n.validator,O=(0,o.useMemo)((function(){return function(e){if(Tb(e))return Object.entries(e).reduce((function(e,n){var t=hb(n,2),r=t[0],a=t[1];return[].concat(fb(e),[r],fb(a))}),[]).filter((function(e){return Mb(e)||Nb(e)})).join(",")}(t)}),[t]),T=(0,o.useMemo)((function(){return function(e){return Tb(e)?[{description:"Files",accept:Object.entries(e).filter((function(e){var n=hb(e,2),t=n[0],r=n[1],a=!0;return Mb(t)||(console.warn('Skipped "'.concat(t,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),a=!1),Array.isArray(r)&&r.every(Nb)||(console.warn('Skipped "'.concat(t,'" because an invalid file extension was provided.')),a=!1),a})).reduce((function(e,n){var t=hb(n,2),r=t[0],a=t[1];return pb(pb({},e),{},mb({},r,a))}),{})}]:e}(t)}),[t]),C=(0,o.useMemo)((function(){return"function"===typeof y?y:eS}),[y]),A=(0,o.useMemo)((function(){return"function"===typeof g?g:eS}),[g]),F=(0,o.useRef)(null),P=(0,o.useRef)(null),M=zb((0,o.useReducer)(Zb,Jb),2),N=M[0],L=M[1],R=N.isFocused,D=N.isFileDialogActive,j=(0,o.useRef)("undefined"!==typeof window&&window.isSecureContext&&v&&"showOpenFilePicker"in window),B=function(){!j.current&&D&&setTimeout((function(){P.current&&(P.current.files.length||(L({type:"closeDialog"}),A()))}),300)};(0,o.useEffect)((function(){return window.addEventListener("focus",B,!1),function(){window.removeEventListener("focus",B,!1)}}),[P,D,A,j]);var z=(0,o.useRef)([]),U=function(e){F.current&&F.current.contains(e.target)||(e.preventDefault(),z.current=[])};(0,o.useEffect)((function(){return S&&(document.addEventListener("dragover",Fb,!1),document.addEventListener("drop",U,!1)),function(){S&&(document.removeEventListener("dragover",Fb),document.removeEventListener("drop",U))}}),[F,S]),(0,o.useEffect)((function(){return!r&&b&&F.current&&F.current.focus(),function(){}}),[F,b,r]);var V=(0,o.useCallback)((function(e){I?I(e):console.error(e)}),[I]),W=(0,o.useCallback)((function(e){e.preventDefault(),e.persist(),te(e),z.current=[].concat(Bb(z.current),[e.target]),Ab(e)&&Promise.resolve(a(e)).then((function(n){if(!Cb(e)||x){var t=n.length,r=t>0&&function(e){var n=e.files,t=e.accept,r=e.minSize,a=e.maxSize,o=e.multiple,i=e.maxFiles,s=e.validator;return!(!o&&n.length>1||o&&i>=1&&n.length>i)&&n.every((function(e){var n=hb(Eb(e,t),1)[0],o=hb(Ob(e,r,a),1)[0],i=s?s(e):null;return n&&o&&!i}))}({files:n,accept:O,minSize:s,maxSize:i,multiple:c,maxFiles:u,validator:E});L({isDragAccept:r,isDragReject:t>0&&!r,isDragActive:!0,type:"setDraggedFiles"}),l&&l(e)}})).catch((function(e){return V(e)}))}),[a,l,V,x,O,s,i,c,u,E]),G=(0,o.useCallback)((function(e){e.preventDefault(),e.persist(),te(e);var n=Ab(e);if(n&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(t){}return n&&d&&d(e),!1}),[d,x]),$=(0,o.useCallback)((function(e){e.preventDefault(),e.persist(),te(e);var n=z.current.filter((function(e){return F.current&&F.current.contains(e)})),t=n.indexOf(e.target);-1!==t&&n.splice(t,1),z.current=n,n.length>0||(L({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Ab(e)&&f&&f(e))}),[F,f,x]),K=(0,o.useCallback)((function(e,n){var t=[],r=[];e.forEach((function(e){var n=zb(Eb(e,O),2),a=n[0],o=n[1],c=zb(Ob(e,s,i),2),u=c[0],l=c[1],f=E?E(e):null;if(a&&u&&!f)t.push(e);else{var d=[o,l];f&&(d=d.concat(f)),r.push({file:e,errors:d.filter((function(e){return e}))})}})),(!c&&t.length>1||c&&u>=1&&t.length>u)&&(t.forEach((function(e){r.push({file:e,errors:[Ib]})})),t.splice(0)),L({acceptedFiles:t,fileRejections:r,type:"setFiles"}),p&&p(t,r,n),r.length>0&&h&&h(r,n),t.length>0&&m&&m(t,n)}),[L,c,O,s,i,u,p,m,h,E]),q=(0,o.useCallback)((function(e){e.preventDefault(),e.persist(),te(e),z.current=[],Ab(e)&&Promise.resolve(a(e)).then((function(n){Cb(e)&&!x||K(n,e)})).catch((function(e){return V(e)})),L({type:"reset"})}),[a,K,V,x]),H=(0,o.useCallback)((function(){if(j.current){L({type:"openDialog"}),C();var e={multiple:c,types:T};window.showOpenFilePicker(e).then((function(e){return a(e)})).then((function(e){K(e,null),L({type:"closeDialog"})})).catch((function(e){!function(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}(e)?!function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?V(e):(j.current=!1,P.current?(P.current.value=null,P.current.click()):V(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):(A(e),L({type:"closeDialog"}))}))}else P.current&&(L({type:"openDialog"}),C(),P.current.value=null,P.current.click())}),[L,C,A,v,K,V,T,c]),X=(0,o.useCallback)((function(e){F.current&&F.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),H()))}),[F,H]),Y=(0,o.useCallback)((function(){L({type:"focus"})}),[]),J=(0,o.useCallback)((function(){L({type:"blur"})}),[]),Q=(0,o.useCallback)((function(){w||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?H():setTimeout(H,0))}),[w,H]),Z=function(e){return r?null:e},ee=function(e){return _?null:Z(e)},ne=function(e){return k?null:Z(e)},te=function(e){x&&e.stopPropagation()},re=(0,o.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.refKey,t=void 0===n?"ref":n,a=e.role,o=e.onKeyDown,i=e.onFocus,s=e.onBlur,c=e.onClick,u=e.onDragEnter,l=e.onDragOver,f=e.onDragLeave,d=e.onDrop,p=Kb(e,Db);return Gb(Gb($b({onKeyDown:ee(Pb(o,X)),onFocus:ee(Pb(i,Y)),onBlur:ee(Pb(s,J)),onClick:Z(Pb(c,Q)),onDragEnter:ne(Pb(u,W)),onDragOver:ne(Pb(l,G)),onDragLeave:ne(Pb(f,$)),onDrop:ne(Pb(d,q)),role:"string"===typeof a&&""!==a?a:"presentation"},t,F),r||_?{}:{tabIndex:0}),p)}}),[F,X,Y,J,Q,W,G,$,q,_,k,r]),ae=(0,o.useCallback)((function(e){e.stopPropagation()}),[]),oe=(0,o.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.refKey,t=void 0===n?"ref":n,r=e.onChange,a=e.onClick,o=Kb(e,jb);return Gb(Gb({},$b({accept:O,multiple:c,type:"file",style:{display:"none"},onChange:Z(Pb(r,q)),onClick:Z(Pb(a,ae)),tabIndex:-1},t,P)),o)}}),[P,t,c,q,r]);return Gb(Gb({},N),{},{isFocused:R&&!r,getRootProps:re,getInputProps:oe,rootRef:F,inputRef:P,open:Z(H)})}function Zb(e,n){switch(n.type){case"focus":return Gb(Gb({},e),{},{isFocused:!0});case"blur":return Gb(Gb({},e),{},{isFocused:!1});case"openDialog":return Gb(Gb({},Jb),{},{isFileDialogActive:!0});case"closeDialog":return Gb(Gb({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return Gb(Gb({},e),{},{isDragActive:n.isDragActive,isDragAccept:n.isDragAccept,isDragReject:n.isDragReject});case"setFiles":return Gb(Gb({},e),{},{acceptedFiles:n.acceptedFiles,fileRejections:n.fileRejections});case"reset":return Gb({},Jb);default:return e}}function eS(){}var nS,tS,rS,aS,oS,iS,sS,cS,uS,lS,fS,dS,pS,mS,hS,gS,yS,vS,bS=Be.span(Xb||(Xb=s(["\n    padding: "," 0;\n    cursor: pointer;\n"])),on.spacings.space0p1),SS=Be.span(Yb||(Yb=s(["\n    color: ",";\n"])),on.colors.fg1),wS=function(){var e=Nv(Jm),n=Mv(),t=Qb({onDrop:(0,o.useCallback)((function(e){var t=e[0],r=new FileReader;r.onabort=function(){return console.log("file reading was aborted")},r.onerror=function(){return console.log("file reading has failed")},r.onload=function(){n(Xa.actions.setLocalFile({arrayBuffer:r.result,filepath:t.name}))},r.readAsArrayBuffer(t)}),[])}),r=t.getRootProps,a=t.getInputProps,i=t.isDragActive;return(0,sn.jsxs)(bS,Rr(Rr({},r()),{},{children:[(0,sn.jsx)("input",Rr({},a())),i?(0,sn.jsx)(SS,{children:"Drop the file here ..."}):(0,sn.jsx)(SS,{children:e?"Choose a different file":"Upload a file from your device"})]}))},_S=Be.form(nS||(nS=s(["\n    display: inline;\n"]))),kS=Be.input(tS||(tS=s(["\n    padding: "," 0;\n    color: ",";\n    ::placeholder,\n    ::-webkit-input-placeholder {\n        color: ",";\n        opacity: 1;\n    }\n    :-ms-input-placeholder {\n        color: ",";\n        opacity: 1;\n    }\n    @media (max-width: ","px) {\n        background-color: transparent;\n        text-align: center;\n    }\n"])),on.spacings.space0p1,on.colors.fg1,on.colors.fg1,on.colors.fg1,on.devices.mobile.maxWidth),xS=Be(pn)(rS||(rS=s(["\n    margin-left: ",";\n"])),on.spacings.space1),IS=function(){var e=Mv(),n=Nv(Ym),t=bt((0,o.useState)(n||""),2),r=t[0],a=t[1];return(0,sn.jsxs)(_S,{onSubmit:function(n){n.preventDefault(),e(Xa.actions.setUrl(r))},children:[(0,sn.jsx)(kS,{value:r,onChange:function(n){a(n.target.value),e(Xa.actions.setFocusOn("url"))},placeholder:"Load a file from a URL"}),r.length?(0,sn.jsx)(xS,{children:"Load"}):null]})},ES=Be(_n)(aS||(aS=s(["\n    position: relative;\n"]))),OS=Be.div(oS||(oS=s(["\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    flex: auto;\n    & > * {\n        display: inline-block;\n        @media (max-width: ","px) {\n            /* Match all objects except Or */\n            &:nth-child(2n+1) {\n                width: 100%;\n                text-align: center;\n                background-color: ",";\n            }\n        }\n    }\n"])),on.devices.mobile.maxWidth,on.colors.bg1),TS=function(){var e=Mv(),n=Nv(Jm),t=Nv(Ym),r=Nv(Zm),a=Nv(eh);return(0,sn.jsxs)(ES,{children:[(0,sn.jsx)(kn,{children:(0,sn.jsx)(un,{children:"\u2192 input"})}),(0,sn.jsx)(xn,{children:r&&a?(0,sn.jsx)(sn.Fragment,{children:(0,sn.jsx)(Ct,{format:r,artefacts:a,filename:n||t||void 0,extraButtons:[(0,sn.jsx)(pn,{onClick:function(){e(Xa.actions.clear())},children:"clear"},"clear")]})}):(0,sn.jsxs)(OS,{children:[(0,sn.jsx)(wS,{})," ",(0,sn.jsx)(Sn,{children:"OR"})," ",(0,sn.jsx)(IS,{})," ",(0,sn.jsx)(Sn,{children:"OR"})," ",(0,sn.jsx)(Vv,{})]})})]})},CS=Rr(Rr({},Qp.BUILD_FORMATS),{},{patchPlayer:{description:"Patch player"}}),AS={pd:{info:"A Pure Data file (.pd) in text format."},pdJson:{info:"Will compile a JSON representation of a pure data file."},dspGraph:{info:"Will compile a DSP graph that is used internally by the WebPd compiler to generate the audio output."},compiledJs:{info:"Will compile a JavaScript function for generating audio."},compiledAsc:{info:"Will compile an AssemblyScript function which can then be compiled to Web Assembly."},wasm:{info:"Will generate a Web Assembly module from your patch. This module can be loaded again here at a later time to play your patch."},wav:{info:"Will generate an audio preview of your patch."},patchPlayer:{info:"Will render a interactive interface allowing to play your patch online."},appTemplate:{info:"Will generate a bare bones web page embedding your patch. A good starter to build an audio web site of your own."}},FS=Be.div.withConfig({displayName:"OutputSelector__Container",componentId:"sc-1qpzo58-0"})([""]),PS=Be.div.withConfig({displayName:"OutputSelector__FormatSelector",componentId:"sc-1qpzo58-1"})(["width:100%;display:flex;flex-direction:row;justify-content:space-between;@media (max-width:","px){flex-direction:column;align-items:initial;","{text-align:center;}}"],on.devices.mobile.maxWidth,Sn),MS=Be(wn).withConfig({displayName:"OutputSelector__FormatHint",componentId:"sc-1qpzo58-2"})(["margin-top:",";"],on.spacings.space0p1),NS=Be(pn).withConfig({displayName:"OutputSelector__ButtonInit",componentId:"sc-1qpzo58-3"})([""]),LS=Be(pn).withConfig({displayName:"OutputSelector__ButtonActive",componentId:"sc-1qpzo58-4"})(["color:",";background-color:",";"],on.colors.colorScheme.next(),on.colors.bg1p5),RS=Be(pn).withConfig({displayName:"OutputSelector__ButtonInactive",componentId:"sc-1qpzo58-5"})(["color:",";background-color:",";"],on.colors.fg1,on.colors.bg1p5),DS=function(){var e=Mv(),n=Nv(nh),t=Array.from(Nv(ah));return(0,sn.jsxs)(FS,{children:[(0,sn.jsx)(PS,{children:t.flatMap((function(r,a){var o=r===n?LS:n?RS:NS;return[(0,sn.jsx)(o,{onClick:function(){return e(Qa.actions.setFormat(r))},children:CS[r].description},r),a<t.length-1?(0,sn.jsx)(Sn,{children:"OR"},r+"OR"):null]}))}),n?(0,sn.jsx)(MS,{children:AS[n].info}):null]})},jS=Be.div(iS||(iS=s(["\n    margin-top: ",";\n"])),on.spacings.space2),BS=Be(hn)(sS||(sS=s(["\n    min-width: 8em;\n    margin-left: ",";\n"])),on.spacings.space0p1),zS=Be(wn)(cS||(cS=s(["\n    margin-top: ",";\n"])),on.spacings.space0p1),US=function(){var e=Nv(th),n=Mv();return(0,sn.jsxs)(jS,{children:[(0,sn.jsx)("label",{children:"Compilation target"}),(0,sn.jsx)(BS,{value:e,onChange:function(e){return n(Qa.actions.setCodeTarget(e.currentTarget.value))},children:Object.entries(mv).map((function(e){var n=bt(e,2),t=n[0],r=n[1].display;return(0,sn.jsx)("option",{value:t,children:r},t)}))}),(0,sn.jsx)(zS,{children:mv[e].info})]})},VS=function(){return jm.artefacts},WS=function(e){return e.artefacts.buildStatus},GS=function(e){return e.artefacts.step},$S=function(e){return e.console.errors},KS=function(e){return e.console.warnings},qS=Be.div(uS||(uS=s(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    overflow: auto;\n    background-color: ",";\n"])),on.colors.bg1),HS=Be(pn)(lS||(lS=s(["\n    position: fixed;\n    right: ",";\n    top: ",";\n    z-index: ",";\n"])),on.spacings.space1,on.spacings.space1,on.zIndexes.closeButton),XS=function(e){var n=e.artefacts,t=(0,o.useRef)(null),r=Mv(),a=Nv(Av),i=Nv(Cv);(0,o.useEffect)((function(){if(a){var e=lv(n,a,{container:t.current,colorScheme:on.colors.colorScheme,showCredits:!1,initialValues:i,valuesUpdatedCallback:function(e){r(Tv.actions.valuesChanged(e))}});return function(){console.log("DESTROY"),e.then((function(e){return function(e){e.rootElem&&(e.rootElem.innerHTML="",e.rootElem.remove(),console.log("DESTROY PATCH PLAYER",e.rootElem)),e.webpdNode.disconnect(),e.audioContext.suspend()}(e)}))}}}),[n,a]);return(0,sn.jsx)(qS,{id:"PatchPlayer",ref:t,children:(0,sn.jsx)(HS,{onClick:function(){r(Mm())},children:"Close"})})},YS=Be.div(fS||(fS=s([""]))),JS=function(){var e=Mv(),n=Nv(nh),t=Nv(VS),r=Nv($S),a=Nv(GS),o=Nv(WS);return!n||r||o!==Rm?null:(0,sn.jsxs)(YS,{children:[o===Lm&&(0,sn.jsxs)(un,{children:["Building ",a," ..."]}),o===Rm?"patchPlayer"!==n?(0,sn.jsx)(Ct,{artefacts:t,format:n,filename:"output."+n,showDownloadButton:!0,extraButtons:[(0,sn.jsx)(pn,{onClick:function(){e(Qa.actions.clear())},children:"clear"},"clear")]}):(0,sn.jsx)(XS,{artefacts:t}):null]})},QS=Be.div(dS||(dS=s(["\n    margin-top: ",";\n"])),on.spacings.space2),ZS=Be.input(pS||(pS=s(["\n    margin-left: ",";\n    background-color: ",";\n    width: 2em;\n"])),on.spacings.space0p1,on.colors.bg1p5),ew=function(){var e=Nv(rh),n=Mv();return(0,sn.jsxs)(QS,{children:[(0,sn.jsx)("label",{children:"Duration of preview in seconds"}),(0,sn.jsx)(ZS,{value:e||"",onChange:function(e){if(""!==e.currentTarget.value){var t=Number.parseInt(e.currentTarget.value);isNaN(t)||n(Qa.actions.setPreviewDurationSeconds(t))}else n(Qa.actions.setPreviewDurationSeconds(null))}})]})},nw=Be(_n)(mS||(mS=s([""]))),tw=Be(wn)(hS||(hS=s(["\n    margin-top: ",";\n"])),on.spacings.space2),rw=Be.div(gS||(gS=s(["\n    margin-top: ",";\n"])),on.spacings.space2),aw=Be(mn)(yS||(yS=s(["\n    font-size: 150%;\n    padding: 0.1em 0.5em;\n"]))),ow=function(){var e=Mv(),n=Nv(eh),t=Nv(Zm),r=Nv(nh),a=Nv(WS),o=t&&r&&["pd","pdJson","dspGraph"].includes(t)&&["wav","patchPlayer"].includes(r),i=Nv($S);return n?(0,sn.jsxs)(nw,{children:[(0,sn.jsx)(kn,{children:(0,sn.jsx)(un,{children:"\u2190 output"})}),(0,sn.jsx)(xn,{children:r&&!i&&a===Rm?(0,sn.jsx)(JS,{}):(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)(DS,{}),r&&o?(0,sn.jsx)(US,{}):null,"wav"===r?(0,sn.jsx)(ew,{}):null,r?(0,sn.jsx)(rw,{children:(0,sn.jsx)(aw,{onClick:function(){e(zm.actions.startBuild())},children:"Go !"})}):null,(0,sn.jsxs)(tw,{children:["For more compilation options"," ",(0,sn.jsx)("a",{href:"https://github.com/sebpiq/WebPd/#using-the-cli",target:"_blank",rel:"noreferrer",children:"you can use the CLI"}),"."]})]})})]}):null},iw=t.p+"static/media/README.1242b102109b5060ead8.md",sw=["title","titleId"];function cw(){return cw=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},cw.apply(this,arguments)}function uw(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function lw(e,n){var t=e.title,r=e.titleId,a=uw(e,sw);return o.createElement("svg",cw({width:98,height:96,xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":r},a),t?o.createElement("title",{id:r},t):null,vS||(vS=o.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M48.854 0C21.839 0 0 22 0 49.217c0 21.756 13.993 40.172 33.405 46.69 2.427.49 3.316-1.059 3.316-2.362 0-1.141-.08-5.052-.08-9.127-13.59 2.934-16.42-5.867-16.42-5.867-2.184-5.704-5.42-7.17-5.42-7.17-4.448-3.015.324-3.015.324-3.015 4.934.326 7.523 5.052 7.523 5.052 4.367 7.496 11.404 5.378 14.235 4.074.404-3.178 1.699-5.378 3.074-6.6-10.839-1.141-22.243-5.378-22.243-24.283 0-5.378 1.94-9.778 5.014-13.2-.485-1.222-2.184-6.275.486-13.038 0 0 4.125-1.304 13.426 5.052a46.97 46.97 0 0 1 12.214-1.63c4.125 0 8.33.571 12.213 1.63 9.302-6.356 13.427-5.052 13.427-5.052 2.67 6.763.97 11.816.485 13.038 3.155 3.422 5.015 7.822 5.015 13.2 0 18.905-11.404 23.06-22.324 24.283 1.78 1.548 3.316 4.481 3.316 9.126 0 6.6-.08 11.897-.08 13.526 0 1.304.89 2.853 3.316 2.364 19.412-6.52 33.405-24.935 33.405-46.691C97.707 22 75.788 0 48.854 0z",fill:"#24292f"})))}var fw=o.forwardRef(lw),dw=(t.p,["title","titleId"]);function pw(){return pw=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},pw.apply(this,arguments)}function mw(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}function hw(e,n){var t=e.title,r=e.titleId,a=mw(e,dw);return o.createElement("svg",pw({width:700,height:736,viewBox:"0 0 525 552",id:"svg2647",xmlns:"http://www.w3.org/2000/svg",ref:n,"aria-labelledby":r},a),t?o.createElement("title",{id:r},t):null,o.createElement("path",{d:"M 110.52407,0.01240603 V 27.644204 H 55.25943 V 55.276003 L 27.631798,55.27194 V 82.903738 H 0 V 193.433 h 27.631798 v 55.26464 l 27.627632,-0.008 v 27.6318 h 27.631798 v 27.6318 h 27.631802 v 27.63179 h 27.63179 v 27.6318 h 27.6318 v 27.6318 h 27.6318 v 55.26464 h 27.6318 v 55.26464 h 27.6318 v 55.26463 h 27.6318 v -55.26463 h 27.63179 v -55.26464 h 27.6318 V 386.8483 h 27.6318 v -27.6318 h 27.6318 v -27.6318 h 27.6318 v -27.63179 h 27.6318 v -27.6318 h 27.63179 v -27.6318 h 27.6318 V 193.42467 H 525 V 82.895395 H 497.3682 V 55.263596 H 469.7364 V 27.631798 H 414.47177 V 0 h -55.26464 v 27.631798 h -55.26464 v 27.631798 h -27.6318 v 27.631799 h -27.6318 V 55.263596 h -27.6318 V 27.631798 l -27.63596,0.01221 h -27.6318 V 0.01220812 Z",id:"path2645",style:{strokeWidth:1.04165}}))}var gw,yw,vw,bw,Sw,ww,_w,kw,xw,Iw,Ew,Ow,Tw,Cw,Aw,Fw,Pw,Mw,Nw,Lw,Rw,Dw,jw,Bw=o.forwardRef(hw),zw=(t.p,"\x3c!-- intro start --\x3e"),Uw=Be(ln)(gw||(gw=s(["\n    background: linear-gradient(\n        180deg,\n        rgba(0, 0, 0, 0) 10%,\n        "," 50%,\n        "," 67%\n    );\n"])),on.colors.bg2,on.colors.bg2),Vw=Be.h1(yw||(yw=s(["\n    position: relative;\n    bottom: 0.15em;\n    font-size: 600%;\n    font-family: ",";\n    color: ",";\n    margin: 0;\n    padding: 0;\n    margin-bottom: ",";\n    line-height: 100%;\n    letter-spacing: 0.3em;\n    text-align: center;\n    @media (max-width: 700px) {\n        font-size: 450%;\n    }\n    @media (max-width: 400px) {\n        font-size: 350%;\n    }\n"])),on.fonts.title,on.colors.colorScheme.next(),on.spacings.space2),Ww=Be.div(vw||(vw=s(["\n    & > *:last-child {\n        margin-bottom: 0;\n    }\n"]))),Gw=Be.div(bw||(bw=s(["\n    margin-top: ",";\n    display: flex;\n    flex-direction: row;\n"])),on.spacings.space1),$w="\n    font-family: ".concat(on.fonts.title,";\n    font-size: 85%;\n    text-decoration: underline;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    width: fit-content;\n\n    svg {\n        height: 1em;\n        width: 1em;\n        display: inline;\n        margin-left: 0.5em;\n        path {\n            fill: ").concat(on.colors.fg1,";\n        }\n    }\n"),Kw=Be.a(Sw||(Sw=s(["\n    ","\n"])),$w),qw=Be.a(ww||(ww=s(["\n    ","\n    margin-left: ",";\n"])),$w,on.spacings.space1),Hw=function(){var e=bt((0,o.useState)(null),2),n=e[0],t=e[1];return(0,o.useEffect)((function(){var e=function(){var e=eo(Ft().mark((function e(){var n,r;return Ft().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(iw);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("Failed to load text");case 5:return e.next=7,n.text();case 7:r=(r=e.sent).slice(r.indexOf(zw)+zw.length,r.indexOf("\x3c!-- intro end --\x3e")),t(r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,sn.jsxs)(Uw,{children:[(0,sn.jsx)(Vw,{children:"WebPd"}),n?(0,sn.jsx)(Ww,{dangerouslySetInnerHTML:{__html:n}}):null,(0,sn.jsxs)(Gw,{children:[(0,sn.jsxs)(Kw,{href:"https://github.com/sebpiq/WebPd",target:"_blank",rel:"noopener",children:["Read more",(0,sn.jsx)(fw,{viewBox:"0 0 97.627 96"})]}),(0,sn.jsxs)(qw,{href:"https://opencollective.com/webpd",target:"_blank",rel:"noopener",children:["Donate",(0,sn.jsx)(Bw,{})]})]})]})},Xw=Be(ln)(_w||(_w=s([""]))),Yw=Be.pre(kw||(kw=s(["\n    overflow: auto;\n    margin: 0;\n"]))),Jw=Be.pre(xw||(xw=s(["\n    overflow: auto;\n    margin: 0;\n    color: ",";\n"])),on.colors.colorScheme.next()),Qw=Be.div(Iw||(Iw=s(["\n    margin-top: ",";\n"])),on.spacings.space1),Zw=Be(wn)(Ew||(Ew=s(["\n    margin-top: ",";\n"])),on.spacings.space2),e_=function(){var e=Nv($S),n=Nv(KS),t=e&&e.length,r=n&&n.length;if(!t&&!r)return null;var a=(0,sn.jsxs)(sn.Fragment,{children:["WebPd is still in alpha release and many patches will likely not work (for now). You can find the list of implemented objects ",(0,sn.jsx)("a",{href:"https://github.com/sebpiq/WebPd/blob/main/ROADMAP.md",target:"_blank",rel:"noreferrer",children:"here"}),". If failure was caused by a missing feature, you can either"," ",(0,sn.jsx)("a",{href:"https://opencollective.com/webpd",target:"_blank",rel:"noreferrer",children:"donate"})," ","to speed up its implementation, or you can directly"," ",(0,sn.jsx)("a",{href:"https://github.com/sebpiq/WebPd/#contributing",target:"_blank",rel:"noreferrer",children:"contribute to development"}),". If, on the other hand, this looks like a bug, thanks for"," ",(0,sn.jsx)("a",{href:"https://github.com/sebpiq/WebPd/#reporting-a-bug",target:"_blank",rel:"noreferrer",children:"reporting it here."})]});return(0,sn.jsxs)(Xw,{children:[(0,sn.jsx)(un,{children:"Compilation output :"}),(0,sn.jsxs)(Qw,{children:[r?n.map((function(e,n){return(0,sn.jsxs)(Yw,{children:["WARNING : ",e]},n)})):null,t?e.map((function(e,n){return(0,sn.jsxs)(Jw,{children:["ERROR : ",e]},n)})):null]}),t||r?(0,sn.jsxs)(Zw,{children:[t?"It seems like your compilation failed \ud83d\ude22.":"It seems like your compilation succeeded but with warnings \ud83d\ude05.",(0,sn.jsx)("br",{}),a]}):null]})},n_=Be(ln)(Ow||(Ow=s(["\n    text-align: center;\n"]))),t_=function(){return(0,sn.jsx)(n_,{children:(0,sn.jsx)(cn,{children:"\u2193 Online compiler \u2193"})})},r_=Be(ln)(Tw||(Tw=s(["\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    & * {\n        font-size: 90%;\n    }\n    background: linear-gradient(\n        180deg,\n        "," 33%,\n        "," 60%,\n        rgba(0, 0, 0, 0) 100%\n    );\n    padding-bottom: calc("," * 2);\n"])),on.colors.bg2,on.colors.bg2,on.spacings.space2),a_=Be.div(Cw||(Cw=s(["\n    color: ",";\n    margin-right: 1em;\n"])),on.colors.fg2),o_=Be.div(Aw||(Aw=s(["\n    display: flex;\n    flex-direction: row;\n    @media (min-width: ","px) {\n        min-width: 10em;\n    }\n    @media (max-width: ","px) {\n        flex-direction: column;\n        min-width: 5em;\n    }\n"])),on.devices.mobile.maxWidth,on.devices.mobile.maxWidth),i_=Be.a(Fw||(Fw=s(["\n    text-align: right;\n    color: ",";\n\n    svg {\n        height: 1em;\n        width: 1em;\n        display: inline;\n        position: relative;\n        top: 0.2em;\n        margin-left: 0.5em;\n        path {\n            fill: ",";\n        }\n    }\n\n    @media (min-width: ","px) {\n        width: 10em;\n    }\n\n    @media (max-width: ","px) {\n        margin-bottom: ",";\n        &:last-child {\n            margin-bottom: 0;\n        }\n    }\n"])),on.colors.fg2,on.colors.fg2,on.devices.mobile.maxWidth,on.devices.mobile.maxWidth,on.spacings.space1),s_=function(){return(0,sn.jsxs)(r_,{children:[(0,sn.jsx)(a_,{children:"WebPd is an open-source project released under the LGPL v3.0. Files uploaded on this web site are not stored on any server."}),(0,sn.jsxs)(o_,{children:[(0,sn.jsxs)(i_,{href:"https://github.com/sebpiq/WebPd",target:"_blank",rel:"noopener",children:["GitHub",(0,sn.jsx)(fw,{viewBox:"0 0 97.627 96"})]}),(0,sn.jsxs)(i_,{href:"https://opencollective.com/webpd",target:"_blank",rel:"noopener",children:["Donate",(0,sn.jsx)(Bw,{})]})]})]})},c_=Be(ln)(Pw||(Pw=s([""]))),u_=Be.pre(Mw||(Mw=s(["\n    max-height: 25vh;\n    overflow: auto;\n"]))),l_=function(){var e=Nv(VS);return(0,sn.jsxs)(c_,{children:[(0,sn.jsx)(cn,{children:"Debugging"}),e.pdJson?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsxs)(un,{children:["Pd JSON"," ",(0,sn.jsx)(pn,{onClick:function(){Dn("debug.pd.json",JSON.stringify(e.pdJson,null,2),"application/json")},children:"Download"})]}),(0,sn.jsx)(u_,{children:JSON.stringify(e.pdJson,null,2)})]}):null,e.dspGraph?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsxs)(un,{children:["DSP Graph"," ",(0,sn.jsx)(pn,{onClick:function(){Dn("debug.dsp-graph.json",JSON.stringify(e.dspGraph,null,2),"application/json")},children:"Download"})]}),(0,sn.jsx)(u_,{children:JSON.stringify(e.dspGraph,null,2)})]}):null,e.compiledJs?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsxs)(un,{children:["Compiled JS"," ",(0,sn.jsx)(pn,{onClick:function(){Dn("debug.code.js",e.compiledJs,"application/javascript")},children:"Download"})]}),(0,sn.jsx)(u_,{children:e.compiledJs})]}):null,e.compiledAsc?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsxs)(un,{children:["Compiled ASC"," ",(0,sn.jsx)(pn,{onClick:function(){Dn("debug.code.asc",e.compiledAsc,"application/assemblyscript")},children:"Download"})]}),(0,sn.jsx)(u_,{children:e.compiledAsc})]}):null]})},f_=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),r=1;r<n;r++)t[r-1]=arguments[r];var a=ke.apply(void 0,[e].concat(t)),i="sc-global-"+Te(JSON.stringify(a)),s=new je(a,i);function c(e){var n=fe(),t=de(),r=(0,o.useContext)(Ne),a=(0,o.useRef)(n.allocateGSInstance(i)).current;return n.server&&u(a,e,n,r,t),(0,o.useLayoutEffect)((function(){if(!n.server)return u(a,e,n,r,t),function(){return s.removeStyles(a,n)}}),[a,e,n,r,t]),null}function u(e,n,t,r,a){if(s.isStatic)s.renderStyles(e,C,t,a);else{var o=v({},n,{theme:xe(n,r,c.defaultProps)});s.renderStyles(e,o,t,a)}}return o.memo(c)}(Nw||(Nw=s(["\n    @font-face {\n        font-family: 'Rajdhani';\n        src: local('Rajdhani'),\n            url('./fonts/Rajdhani/Rajdhani-Medium.ttf') format('woff');\n    }\n\n    @font-face {\n        font-family: 'Silkscreen';\n        src: local('Silkscreen'),\n            url('./fonts/Silkscreen/Silkscreen-Regular.ttf') format('woff');\n    }\n\n    body, html {\n        padding: 0;\n        margin: 0;\n        background-color: ",";\n    }\n\n    * { \n        box-sizing: border-box;\n        /* To enable flex items shrink : https://stackoverflow.com/questions/36247140/why-dont-flex-items-shrink-past-content-size */\n        min-width: 0; \n        min-height: 0;\n        font-size: ","px;\n        @media (max-width: ","px) {\n            font-size: ","px;\n        }\n        font-family: ",";\n        color: ",";\n        scrollbar-width: thin;\n        &::-webkit-scrollbar {\n            width: calc("," / 4);\n            height: calc("," / 4);\n        }\n        &::-webkit-scrollbar-track {\n            background: transparent;\n        }\n        &::-webkit-scrollbar-thumb {\n            background-color: ",";\n            border-radius: 20px;\n        }\n    }\n\n    input {\n        background-color: ",";\n        border: none;\n        font-size: 100%;\n    }\n\n    textarea:focus, input:focus{\n        outline: "," solid 1px;\n    }\n"])),on.colors.bg1,on.devices.desktop.fontSize,on.devices.mobile.maxWidth,on.devices.mobile.fontSize,on.fonts.default,on.colors.fg1,on.spacings.space1,on.spacings.space1,on.colors.fg2,on.colors.bg2,on.colors.fg2),d_=Be.div(Lw||(Lw=s(["\n    display: flex;\n    flex-direction: column;\n    min-height: 100vh;\n    & > *:last-child {\n        flex: auto;\n    }\n"]))),p_=Be.div(Rw||(Rw=s(["\n    position: relative;\n"]))),m_=Be.div(Dw||(Dw=s(["\n    margin: auto;\n    width: 100%;\n    position: absolute;\n    height: 100%;\n    z-index: 3;\n"]))),h_=Be((function(e){var n=e.text,t=e.className;return(0,sn.jsx)(In,{className:t,children:n})}))(jw||(jw=s(["\n    max-width: ",";\n    width: 100%;\n    margin: 0 auto;\n    height: 100%;\n    z-index: ",";\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background-color: ","ee;\n    font-size: 200%;\n"])),on.dimensions.maxContentWidth,on.zIndexes.spinner,on.colors.bg2),g_=function(){var e=Nv(hv),n=Nv(WS)===Lm,t=Nv(yv);return e?(0,sn.jsxs)(d_,{children:[(0,sn.jsx)(Hw,{}),(0,sn.jsx)(t_,{}),(0,sn.jsxs)(p_,{children:[n?(0,sn.jsx)(m_,{children:(0,sn.jsx)(h_,{text:"building..."})}):null,(0,sn.jsx)(TS,{}),(0,sn.jsx)(ow,{}),t?(0,sn.jsx)(l_,{}):null,(0,sn.jsx)(e_,{})]}),(0,sn.jsx)(s_,{})]}):(0,sn.jsx)(sn.Fragment,{children:(0,sn.jsx)(Hw,{})})},y_=function(){return(0,sn.jsxs)(Ua,{store:Pv,children:[(0,sn.jsx)(f_,{}),(0,sn.jsx)(g_,{})]})},v_=function(e){e&&e instanceof Function&&t.e(787).then(t.bind(t,787)).then((function(n){var t=n.getCLS,r=n.getFID,a=n.getFCP,o=n.getLCP,i=n.getTTFB;t(e),r(e),a(e),o(e),i(e)}))};i.createRoot(document.getElementById("root")).render((0,sn.jsx)(y_,{})),v_()}()}();
//# sourceMappingURL=main.9e647b2d.js.map